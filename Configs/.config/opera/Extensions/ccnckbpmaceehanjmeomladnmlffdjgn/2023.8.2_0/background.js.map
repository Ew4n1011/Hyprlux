{"version":3,"file":"background.js","mappings":"UAAIA,ECCAC,EADAC,E,+CCAG,MAAe,EAGpBC,YAAYC,GACVC,KAAKD,SAAWA,CAClB,CAEUE,oBACRC,EACAH,EAAgB,KAChBI,GAAY,GAEZ,GAAoB,MAAhBD,GAAyC,KAAjBA,EAC1B,MAAM,IAAIE,MAAM,wCAKlB,GAHgB,MAAZL,GAAqC,MAAjBC,KAAKD,WAC3BA,EAAWC,KAAKD,UAEF,MAAZA,EACF,OAAO,KAET,IAAKI,QAAwCE,IAA3BN,EAASG,GAA6B,CACtD,IAAII,EAAgC,KAElCA,EADEJ,EAAaK,OAAO,KAAOL,EAAaK,OAAO,GAAGC,cAC5BN,EAAaK,OAAO,GAAGE,cAEvBP,EAAaK,OAAO,GAAGC,cAE7CN,EAAaQ,OAAS,IACxBJ,GAAyBJ,EAAaS,MAAM,SAIfN,IAA3BN,EADJG,EAAeI,KAEbJ,EAAeA,EAAaO,oBAECJ,IAA3BN,EAASG,KACXA,EAAeA,EAAaM,c,CAGhC,OAAOT,EAASG,EAClB,ECvCK,MAAMU,UAAwB,EAInCd,YAAYC,EAAec,GACzBC,MAAMf,GACN,MAAMgB,EAAOf,KAAKC,oBAAoB,QACtCD,KAAKe,KAAe,MAARA,EAAe,GAAKA,EAAKC,KAAKC,GAAY,IAAIJ,EAAEI,KAC5DjB,KAAKkB,kBAAoBlB,KAAKC,oBAAoB,oBACpD,E,2DCAF,MAAMkB,EAA4B,oBAAXC,OAAyB,EAAQ,OAAS,KAY1D,MAAM,EAgBXC,cACM,EAAMC,SAIV,EAAMA,QAAS,EACf,EAAMC,YACe,IAAZC,GACqB,MAA3BA,EAAgBC,SACiB,SAAjCD,EAAgBC,QAAQC,KAC3B,EAAMC,UAA8B,oBAAXP,OAEzB,EAAMQ,gBAAkB,EAAMD,WAAa3B,KAAK6B,SAAST,QACzD,EAAMU,qBAAuB,EAAMH,WAAa3B,KAAK+B,cAAcX,QAE/D,EAAMG,OACR,EAAMS,OAAS,EAAAC,EACN,EAAMN,UACf,EAAMK,OAASZ,OAGf,EAAMY,OAASE,KAEnB,CAEAb,sBAAsBc,GACpB,GAAW,MAAPA,EACF,OAAO,KAGT,GAAI,EAAMZ,OACR,OAAO,IAAIa,WAAWC,OAAOC,KAAKH,EAAK,WAClC,CACL,MAAMI,EAAe,EAAMP,OAAOQ,KAAKL,GACjCM,EAAQ,IAAIL,WAAWG,EAAa7B,QAC1C,IAAK,IAAIgC,EAAI,EAAGA,EAAIH,EAAa7B,OAAQgC,IACvCD,EAAMC,GAAKH,EAAaI,WAAWD,GAErC,OAAOD,C,CAEX,CAEApB,yBAAyBc,GACvB,OAAO,EAAMS,eAAe,EAAMC,gBAAgBV,GACpD,CAEAd,sBAAsBc,GACpB,GAAI,EAAMZ,OACR,OAAO,IAAIa,WAAWC,OAAOC,KAAKH,EAAK,QAClC,CACL,MAAMM,EAAQ,IAAIL,WAAWD,EAAIzB,OAAS,GAC1C,IAAK,IAAIgC,EAAI,EAAGA,EAAIP,EAAIzB,OAAQgC,GAAK,EACnCD,EAAMC,EAAI,GAAKI,SAASX,EAAIY,OAAOL,EAAG,GAAI,IAE5C,OAAOD,C,CAEX,CAEApB,uBAAuBc,GACrB,GAAI,EAAMZ,OACR,OAAO,IAAIa,WAAWC,OAAOC,KAAKH,EAAK,SAClC,CACL,MAAMa,EAAUC,SAASC,mBAAmBf,IACtCgB,EAAM,IAAIf,WAAWY,EAAQtC,QACnC,IAAK,IAAIgC,EAAI,EAAGA,EAAIM,EAAQtC,OAAQgC,IAClCS,EAAIT,GAAKM,EAAQL,WAAWD,GAE9B,OAAOS,C,CAEX,CAEA9B,6BAA6Bc,GAC3B,GAAW,MAAPA,EACF,OAAO,KAET,MAAMgB,EAAM,IAAIf,WAAWD,EAAIzB,QAC/B,IAAK,IAAIgC,EAAI,EAAGA,EAAIP,EAAIzB,OAAQgC,IAC9BS,EAAIT,GAAKP,EAAIQ,WAAWD,GAE1B,OAAOS,CACT,CAEA9B,uBAAuB+B,GACrB,GAAc,MAAVA,EACF,OAAO,KAET,GAAI,EAAM7B,OACR,OAAOc,OAAOC,KAAKc,GAAQC,SAAS,UAC/B,CACL,IAAIC,EAAS,GACb,MAAMb,EAAQ,IAAIL,WAAWgB,GAC7B,IAAK,IAAIV,EAAI,EAAGA,EAAID,EAAMc,WAAYb,IACpCY,GAAUE,OAAOC,aAAahB,EAAMC,IAEtC,OAAO,EAAMV,OAAO0B,KAAKJ,E,CAE7B,CAEAjC,0BAA0B+B,GACxB,OAAO,EAAMO,gBAAgB,EAAMC,gBAAgBR,GACrD,CAEA/B,uBAAuBwC,GACrB,OAAOA,EAAOC,QAAQ,MAAO,KAAKA,QAAQ,MAAO,KAAKA,QAAQ,KAAM,GACtE,CAEAzC,wBAAwB+B,GACtB,GAAI,EAAM7B,OACR,OAAOc,OAAOC,KAAKc,GAAQC,SAAS,QAC/B,CACL,MAAMZ,EAAQ,IAAIL,WAAWgB,GACvBW,EAAgBP,OAAOC,aAAaO,MAAM,KAAMvB,GACtD,OAAOwB,mBAAmBC,OAAOH,G,CAErC,CAEA1C,8BAA8B+B,GAC5B,OAAOI,OAAOC,aAAaO,MAAM,KAAM,IAAI5B,WAAWgB,GACxD,CAGA/B,uBAAuB+B,GACrB,GAAI,EAAM7B,OACR,OAAOc,OAAOC,KAAKc,GAAQC,SAAS,OAC/B,CACL,MAAMZ,EAAQ,IAAIL,WAAWgB,GAC7B,OAAOe,MAAMC,UAAUpD,IACpBqD,KAAK5B,GAAQ6B,IAAe,KAAOA,EAAEjB,SAAS,KAAK1C,OAAO,KAC1D4D,KAAK,G,CAEZ,CAEAlD,uBAAuBmD,GACrB,IAAIC,EAASD,EAAUV,QAAQ,KAAM,KAAKA,QAAQ,KAAM,KACxD,OAAQW,EAAO/D,OAAS,GACtB,KAAK,EACH,MACF,KAAK,EACH+D,GAAU,KACV,MACF,KAAK,EACHA,GAAU,IACV,MACF,QACE,MAAM,IAAIrE,MAAM,6BAGpB,OAAOqE,CACT,CAEApD,wBAAwBmD,GACtB,OAAO,EAAME,cAAc,EAAM7B,gBAAgB2B,GACnD,CAEAnD,qBAAqBsD,GACnB,OAAI,EAAMpD,OACDc,OAAOC,KAAKqC,EAAQ,QAAQtB,SAAS,UAErCY,mBAAmBC,OAAO,EAAMlC,OAAO0B,KAAKiB,IAEvD,CAEAtD,wBAAwBsD,GACtB,OAAO,EAAMC,mBAAmB,EAAMC,gBAAgBF,GACxD,CAEAtD,qBAAqBwC,GACnB,OAAI,EAAMtC,OACDc,OAAOC,KAAKuB,EAAQ,UAAUR,SAAS,QAEvCY,mBAAmBC,OAAO,EAAMlC,OAAOQ,KAAKqB,IAEvD,CAGAxC,iBACE,MAAO,uCAAuCyC,QAAQ,SAAUgB,IAC9D,MAAMC,EAAqB,GAAhBC,KAAKC,SAAiB,EAEjC,OADgB,MAANH,EAAYC,EAAS,EAAJA,EAAW,GAC7B1B,SAAS,GAAG,GAEzB,CAEAhC,cAAc6D,GACZ,OAAOC,OACL,4EACA,KACAC,KAAKF,EACT,CAEA7D,mBAAmBgE,GACjB,GAAI,EAAMC,mBAAmBD,GAC3B,OAAO,KAKT,IAFAA,EAAYA,EAAUE,QAERC,WAAW,SACvB,OAAO,KAGT,GAAIH,EAAUG,WAAW,UACvB,OAAO,KAGT,GAAIH,EAAUG,WAAW,SACvB,OAAO,KAKT,GAAIH,EAAUI,QAAQ,KAAO,EAC3B,OAAO,KAGT,IACE,MAAMC,GAAW,QAAYL,EAAW,CAAEM,WAAY3F,KAAK2F,aAC3D,GAAgB,MAAZD,EACF,OAAOA,C,CAET,SACA,OAAO,I,CAET,OAAO,IACT,CAEArE,eAAegE,GACb,MAAMO,EAAM,EAAMC,OAAOR,GACzB,IACE,OAAc,MAAPO,GAA4B,KAAbA,EAAIE,KAAcF,EAAIE,KAAO,I,CACnD,SACA,OAAO,I,CAEX,CAEAzE,iBAAiBgE,GACf,GAAI,EAAMC,mBAAmBD,GAC3B,OAAO,KAKT,IAFAA,EAAYA,EAAUE,QAERC,WAAW,SACvB,OAAO,KAGT,GAAIH,EAAUG,WAAW,UACvB,OAAO,KAGT,IACE,MAAMO,GAAc,QAAMV,EAAW,CAAEM,WAAY3F,KAAK2F,aACxD,GAAmB,MAAfI,GAA+C,MAAxBA,EAAYL,SACrC,MAA6B,cAAzBK,EAAYL,UAA4BK,EAAYC,KAC/CD,EAAYL,SAGK,MAAtBK,EAAYE,OACPF,EAAYE,OAEd,I,CAET,SACA,OAAO,I,CAET,OAAO,IACT,CAEA5E,sBAAsBgE,GACpB,MAAMO,EAAM,EAAMC,OAAOR,GACzB,GAAW,MAAPO,GAA6B,MAAdA,EAAIM,QAAiC,KAAfN,EAAIM,OAC3C,OAAO,KAET,MAAMlF,EAAM,IAAImF,IAYhB,OAXiC,MAAlBP,EAAIM,OAAO,GAAaN,EAAIM,OAAOnD,OAAO,GAAK6C,EAAIM,QAAQE,MAAM,KAC1EC,SAASC,IACb,MAAMC,EAAQD,EAAKF,MAAM,KACrBG,EAAM7F,OAAS,GAGnBM,EAAIwF,IACFvC,mBAAmBsC,EAAM,IAAI9F,cACjB,MAAZ8F,EAAM,GAAa,GAAKtC,mBAAmBsC,EAAM,IAClD,IAEIvF,CACT,CAEAK,uBACEoF,EACAC,GAEA,MAAO,CAACC,EAAGC,IACM,MAAXD,EAAED,IAA4B,MAAXE,EAAEF,IACf,EAEK,MAAXC,EAAED,IAA4B,MAAXE,EAAEF,GAChB,EAEM,MAAXC,EAAED,IAA4B,MAAXE,EAAEF,GAChB,EAIFD,EAAYI,SACfJ,EAAYI,SAASC,QAAQH,EAAED,GAA4BE,EAAEF,IAC5DC,EAAED,GAA4BK,cAAcH,EAAEF,GAEvD,CAEArF,0BAA0Bc,GACxB,OAAc,MAAPA,GAA8B,iBAARA,GAAmC,KAAfA,EAAIoD,MACvD,CAEAlE,qBAAqBc,GACnB,OAAc,MAAPA,GAA8B,iBAARA,GAA2B,IAAPA,CACnD,CAEAd,iBAAiB2F,GACf,OACS3G,MAAP2G,GAA2C,mBAAhBA,EAAU,MAA4C,mBAAjBA,EAAW,KAE/E,CAEA3F,cAAiBK,GACf,OAAOA,CACT,CAEAL,cAAiB4F,EAAWC,GAC1B,OAAOC,OAAOC,OAAOH,EAAQC,EAC/B,CAEA7F,mBAAkE2F,GAChE,OAAQG,OAAOE,KAAKL,GAAKM,QAAQC,GAAMC,OAAOC,OAAOF,KAAYvG,KAAKuG,GAAMP,EAAIO,IAClF,CAEAlG,cAAcgE,GACZ,OAAIrF,KAAKsF,mBAAmBD,GACnB,MAGTA,EAAYA,EAAUE,OAEf,EAAMmC,aAAarC,GAC5B,CAEAhE,yBAAyBsG,GACvB,OAAOA,EAAEpH,OAAO,GAAGC,cAAgBmH,EAAEhH,MAAM,EAC7C,CAYAU,mCAAmCuG,EAAiBC,EAAY,IAAKC,GAAc,GACjF,MAAMC,EAAuC,MAAtBH,EAAQrH,OAAO,GAAaqH,EAAQI,UAAU,EAAG,GAAKJ,EAM7E,MAAW,KALD9E,SAASiF,EAAeC,UAAU,EAAG,GAAI,IAK5B,KAJblF,SAASiF,EAAeC,UAAU,EAAG,GAAI,IAIhB,KAHzBlF,SAASiF,EAAeC,UAAU,EAAG,GAAI,IAGRH,EAFxBC,EAAc,QAAU,mBACxBA,EAAc,QAAU,kBAE7C,CAEAzG,qBAAqBc,GACnB,IAAI8F,EAAO,EACX,IAAK,IAAIvF,EAAI,EAAGA,EAAIP,EAAIzB,OAAQgC,IAC9BuF,EAAO9F,EAAIQ,WAAWD,KAAOuF,GAAQ,GAAKA,GAE5C,IAAIC,EAAQ,IACZ,IAAK,IAAIxF,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAE1BwF,IAAU,MADKD,GAAa,EAAJvF,EAAU,KACXW,SAAS,KAAKN,QAAQ,E,CAE/C,OAAOmF,CACT,CAKA7G,6BACE,GAA6C,MAAzCrB,KAAKgC,OAAOmG,0BACd,MAAM,IAAI/H,MAAM,qDAElB,OAAOJ,KAAKgC,OAAOmG,yBACrB,CAEA9G,wBAAwB6G,GACtB,MAAO,qCAAqC9C,KAAK8C,EACnD,CAQA7G,mBAAiDL,GAC/C,OAAW,MAAPA,EACK,KAEHA,aAAemF,IAGdgB,OAAOiB,YAAYpH,GAFjBA,CAGX,CAUAK,mBAAiDgH,GAC/C,GAAc,MAAVA,EACF,OAAO,KACF,GAAIA,aAAkBlC,IAC3B,OAAOkC,EAGT,MAAMC,EAAUnB,OAAOmB,QAAQD,GAC/B,OAAuB,IAAnBC,EAAQ5H,OACH,IAAIyF,IAGTsB,MAAMD,OAAOc,EAAQ,GAAG,KACnB,IAAInC,IAAImC,GAER,IAAInC,IAAImC,EAAQtH,KAAKuH,GAAM,CAACf,OAAOe,EAAE,IAAKA,EAAE,MAEvD,CAGAlH,aACEmH,EACAtB,GAEA,OAAOC,OAAOC,OAAOoB,EAAatB,EACpC,CAOA7F,iCAAiCc,GAC/B,OAAOe,mBAAmBf,GAAK2B,QAC7B,YACCgB,GAAM,IAAIA,EAAEnC,WAAW,GAAGU,SAAS,IAAI7C,iBAE5C,CAOAa,qBAAqBoH,GACnB,OAAO,YAAexE,mBAAmBwE,IAAmB3E,QAAQ,oBAAqB,GAC3F,CAEQzC,gBAAgBqH,GACtB,IAAIC,GAAS,EACb,IAAEhC,EAYF,OAZEA,EAWC+B,EAAIE,UAAUC,WAAaH,EAAIE,UAAUE,QAAWJ,EAAYK,OAT/D,2TAA2T3D,KACzTuB,IAEF,0kDAA0kDvB,KACxkDuB,EAAE5D,OAAO,EAAG,OAGd4F,GAAS,GAGNA,GAAoD,MAA1CD,EAAIE,UAAUC,UAAUG,MAAM,QACjD,CAEA3H,aAAa4H,GACX,OAAO,IAAIC,SAASC,GAAYC,WAAWD,EAASF,IACtD,CASA5H,yBAA4BgI,GAC1B,OAAO,EAAAC,EAAAA,SAAGjJ,GAAWkJ,MAAK,EAAAC,EAAA,IAAU,IAAMH,MAC5C,CAMAhI,qBAAqBoI,GACnB,MAAMC,EAAWD,EAAWE,UAAYC,KAAKC,MAE7C,OAAO7E,KAAK8E,IAAI,EAAG9E,KAAK+E,MAAML,EADb,OAEnB,CAEQrI,qBAAqBqH,GAC3B,OAC8C,MAA5CA,EAAIE,UAAUC,UAAUG,MAAM,YACY,MAA1CN,EAAIE,UAAUC,UAAUG,MAAM,QAElC,CAEQ3H,oBAAoBgE,GAG1B,MAAM2E,EAAc3E,EAAUI,QAAQ,QAAU,EAChD,IAAKuE,GAAe3E,EAAUI,QAAQ,MAAQ,EAC5CJ,EAAY,UAAYA,OACnB,IAAK2E,EACV,OAAO,KAGT,IACE,OAAe,MAAX7I,EACK,IAAIA,EAAQ8I,IAAI5E,GAGlB,IAAI4E,IAAI5E,E,CACf,MAAOkD,G,CAIT,OAAO,IACT,EA1iBO,EAAAjH,QAAS,EACT,EAAAC,QAAS,EACT,EAAAI,WAAY,EACZ,EAAAC,iBAAkB,EAClB,EAAAE,sBAAuB,EACvB,EAAAE,OAAwB,KAExB,EAAAkI,wBACL,02BACc,EAAAvE,WAAuB,CAAC,aACxB,EAAAwE,sBAAwB,GACxB,EAAAC,qBAAuB,IAAIjE,IAAyB,CAClE,CAAC,aAAc,IAAIkE,IAAI,CAAC,yBAiiB5B,EAAMC,OClkBC,MAAMC,EAOXzK,YAAYC,GACVC,KAAKkF,GAAKnF,EAASmF,GACnBlF,KAAKwK,eAAiBzK,EAASyK,eAC/BxK,KAAKyK,KAAO1K,EAAS0K,KACrBzK,KAAKe,KAAOhB,EAASgB,KACrBf,KAAK0K,QAAU3K,EAAS2K,OAC1B,ECbK,MAAMC,UAAuB,EAOlC7K,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAKwK,eAAiBxK,KAAKC,oBAAoB,kBAC/CD,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAKe,KAAOf,KAAKC,oBAAoB,QACrCD,KAAK0K,QAAU1K,KAAKC,oBAAoB,UAC1C,E,ICjBU2K,ECAAC,ECAAC,ECAAC,ECAAC,ECAAC,ECAAC,ECAAC,E,sSCcL,MAAMC,EACXtL,YACUuL,EACAC,EACAC,GAFA,KAAAF,cAAAA,EACA,KAAAC,WAAAA,EACA,KAAAC,aAAAA,CACP,CAEGC,UAAUhB,EAAwBC,G,yCACtC,MAAM1F,QAAU/E,KAAKsL,WAAWG,KAC9B,MACA,kBAAoBjB,EAAiB,aAAeC,EACpD,MACA,GACA,GAEF,OAAO,IAAIE,EAAe5F,EAC5B,G,CAEM2G,YAAYlB,G,yCAChB,MAAMzF,QAAU/E,KAAKsL,WAAWG,KAC9B,MACA,kBAAoBjB,EAAiB,YACrC,MACA,GACA,GAEF,OAAO,IAAI5J,EAAamE,EAAG4F,EAC7B,G,CAEMgB,mBACJnB,EACAoB,EACAC,EACAC,G,yCAEA,MAAM/G,QAAU/E,KAAKsL,WAAWG,KAC9B,MACA,kBACEjB,EADF,yBAIEtH,mBAAmB0I,GACnB,UACA,EAAMG,0BAA0BF,GAChC,uBACAC,EACF,MACA,GACA,GAEF,OAAO,IAAIlL,EAAamE,EAAG4F,EAC7B,G,CAEMqB,yBACJxB,EACAyB,G,yCAEA,MAAMlH,QAAU/E,KAAKsL,WAAWG,KAC9B,MACA,kBAAoBjB,EAApB,iCAA6EyB,EAC7E,MACA,GACA,GAEF,OAAO,IAAIrL,EAAamE,EAAG4F,EAC7B,G,CAEMuB,yCACJC,G,yCAEA,MAAMF,QAAejM,KAAKuL,aAAaa,YACjCrM,QAAiBC,KAAKgM,yBAAyBG,EAAOF,GACtDI,QAAiBrM,KAAKqL,cAAciB,qBAAqBvM,GAC/D,aAAa,EAAAwM,EAAA,GAAevM,KAAKqL,cAAcmB,6BAA6BH,GAC9E,G,CAEMI,UAAUjC,EAAwBC,EAAkBiC,G,yCACxD,MAAM3H,QAAU/E,KAAKsL,WAAWG,KAC9B,MACA,kBAAoBjB,EAAiB,aAAeC,EACpDiC,GACA,GACA,GAEI3M,EAAW,IAAI4K,EAAe5F,GAC9BhE,EAAO,IAAIwJ,EAAWxK,SACtBC,KAAKqL,cAAcsB,OAAO5L,EAClC,G,GRrGF,SAAY6J,GACV,yBACA,iCACA,kBACD,CAJD,CAAYA,IAAAA,EAAsB,KCAlC,SAAYC,GACV,2CACA,kBACD,CAHD,CAAYA,IAAAA,EAA0B,KCAtC,SAAYC,GACV,yBACA,2BACA,6BACA,yBACD,CALD,CAAYA,IAAAA,EAA0B,KCAtC,SAAYC,GACV,qBACA,qBACA,mBACA,yBACA,sBACD,CAND,CAAYA,IAAAA,EAAoB,KCAhC,SAAYC,GACV,yDACA,uCACA,6CACA,6BACA,+BACA,6CACA,iCACA,iCACA,qCACA,iDACA,gEACA,2CACD,CAbD,CAAYA,IAAAA,EAAU,KCAtB,SAAYC,GACV,yBACA,2BACA,6BACA,yBACD,CALD,CAAYA,IAAAA,EAAsB,KCAlC,SAAYC,GACV,qCACA,gCACD,CAHD,CAAYA,IAAAA,EAAgB,KCA5B,SAAYC,GACV,yBACA,yBACA,mBACA,2BACA,6BACA,yCACA,0BACD,CARD,CAAYA,IAAAA,EAAgB,KEGrB,MAAMyB,EASX9M,YAAYkH,GACC,MAAPA,IAIJhH,KAAKkF,GAAK8B,EAAI9B,GACdlF,KAAK0B,KAAOsF,EAAItF,KAChB1B,KAAK6M,OAAS7F,EAAI6F,OAClB7M,KAAKyK,KAAOzD,EAAIyD,KAChBzK,KAAK0K,QAAU1D,EAAI0D,QACnB1K,KAAKiM,OAASjF,EAAIiF,OAClBjM,KAAK8M,UAAY9F,EAAI8F,UACvB,CAEIC,gBACF,QAAI/M,KAAKgN,iBAGFhN,KAAK0K,SAAW1K,KAAK6M,SAAW5B,EAAuBgC,SAChE,CAEIC,6BACF,OAAOlN,KAAK0K,SAAW1K,KAAKgN,eAC9B,CAEIG,qBACF,OAAOnN,KAAKgN,eACd,CAEII,yBACF,OAAOpN,KAAKgN,eACd,CAEIA,sBACF,OAAOhN,KAAKyK,OAASS,EAAiBmC,aACxC,E,IC/CUC,ECAAC,E,sSCKL,MAAMC,EACX1N,YAAoByL,GAAA,KAAAA,aAAAA,CAA6B,CAE3CkC,IAAIvI,G,yCACR,MAAMwI,QAAkB1N,KAAKuL,aAAaoC,eAE1C,OAAiB,MAAbD,GAAsBA,EAAUE,eAAe1I,GAI5C,IAAI0H,EAASc,EAAUxI,IAHrB,IAIX,G,CAEM2I,S,yCACJ,MAAMH,QAAkB1N,KAAKuL,aAAaoC,eACpC5N,EAAuB,GAC7B,IAAK,MAAMmF,KAAMwI,EAEXA,EAAUE,eAAe1I,IAC3BnF,EAAS+N,KAAK,IAAIlB,EAASc,EAAUxI,KAGzC,OAAOnF,CACT,G,CAEMgO,KAAKL,G,+CACH1N,KAAKuL,aAAayC,aAAaN,EACvC,G,GFhCF,SAAYJ,GACV,YACA,oBACA,oBACA,kBACA,YACA,gCACD,CAPD,CAAYA,IAAAA,EAAU,KCAtB,SAAYC,GACV,yBACA,iBACA,yCACA,2CACA,uCACA,qCACA,uCACA,mCACA,mCACA,qCACA,wCACA,oCACA,kCACA,8BACA,wCACA,sCACA,kBACA,sCACA,wCACA,4CACA,0CACA,kBACA,uBACD,CAxBD,CAAYA,IAAAA,EAAU,KA0B4B,IAAIlD,IAAI,CACxDkD,EAAWU,QACXV,EAAWW,IACXX,EAAWY,gBAGsC,IAAI9D,IAAI,CACzDkD,EAAWa,eACXb,EAAWc,aACXd,EAAWe,aACXf,EAAWgB,MEpCb,IAAYC,ECAAC,GDAZ,SAAYD,GACV,2CACA,oCACD,CAHD,CAAYA,IAAAA,EAAmB,KCA/B,SAAYC,GACV,qCACA,2DACA,2DACA,uDACA,mDACA,6EACA,wEACD,CARD,CAAYA,IAAAA,EAAc,KAyBnB,MAAMC,EAAwC,CACnD,CAACD,EAAeE,eAAgB,EAChC,CAACF,EAAeG,0BAA2B,EAC3C,CAACH,EAAeI,0BAA2B,EAC3C,CAACJ,EAAeK,wBAAyB,EACzC,CAACL,EAAeM,sBAAuB,EACvC,CAACN,EAAeO,mCAAoC,EACpD,CAACP,EAAeQ,iCAAkC,GC/BpD,IAAYC,ECAAC,ECDAC,ECAAC,ECAAC,ECAAC,ECMAC,ECJAC,GPDZ,SAAYP,GACV,mBACA,8CACD,CAHD,CAAYA,IAAAA,EAAe,KCA3B,SAAYC,GACV,uCACA,sDACA,4CACA,8CACA,gDACA,8CACA,oDACA,8DACA,8DACA,0EACA,sEAEA,0CACA,0CACA,0CACA,8DACA,8DACA,wCACA,gEACA,oDACA,oFACA,0FACA,oFACA,oEACA,0EACA,oEACA,4DACA,kDACA,4CACA,wFAEA,kDACA,kDACA,kDAEA,wCACA,wCACA,wCAEA,8DACA,kEACA,8DACA,8DACA,0EACA,sEACA,wFACA,4FACA,oFACA,wEACA,0EACA,8DACA,gEACA,sFACA,sFAEA,sDACA,8DACA,8EACA,kEACA,4DACA,8DACA,8EACA,gFACA,4EAEA,0CAEA,sDACA,0DACA,sDACA,sDAEA,sEACA,kEACA,sEACA,kFAEA,6DACA,kEACA,oEACA,0EAEA,6CACD,CApFD,CAAYA,IAAAA,EAAS,KCDrB,SAAYC,GACV,mBACA,uBACA,yBACA,sBACD,CALD,CAAYA,IAAAA,EAAS,KCArB,SAAYC,GACV,uBACA,oBACD,CAHD,CAAYA,IAAAA,EAAc,KCA1B,SAAYC,GACV,iDACA,8CACD,CAHD,CAAYA,IAAAA,EAAW,KCAvB,SAAYC,GACV,gBACA,kBACA,mBACD,CAJD,CAAYA,IAAAA,EAAmB,KCM/B,SAAYC,GAQV,6BAKA,iDAOA,iCAYA,iBAKA,2BAMA,6BAOA,mEAKA,+BAMA,qCAOA,yCAMA,mCAMA,2CAMA,yBAWA,2CAKA,6CAUA,uBAQA,6BAMA,mCAOA,6BAKA,mCAQA,+CAOA,+CAUA,iCAQA,qCAOA,2CAMA,+BAMA,6BAMA,6CAKA,uCAKA,mEAOA,yCAMA,6BASA,qBAKA,yCAKA,iDAKA,2CAOA,iCAMA,qDAOA,mDAKA,+CAOA,iCAKA,iDAKA,mDAKA,yBAKA,6CAKA,2CAQA,qDAKA,2CAMA,mEAMA,iEASA,mDAMA,yCAKA,iCAMA,iDAKA,yCAKA,2DAKA,uDAKA,mDAKA,qCAKA,mCAOA,sEACD,CArYD,CAAYA,IAAAA,EAAc,KENnB,MAAME,EAKX5P,YAAY6P,EAAoBC,EAAiBC,GAC/C7P,KAAK2P,WAAaA,EAClB3P,KAAK4P,OAASA,EACd5P,KAAK6P,YAAcA,CACrB,GDPF,SAAYJ,GACV,qCACA,0BACD,CAHD,CAAYA,IAAAA,EAAO,KASaA,EAAQK,cAEN,IAAIJ,EADG,KEZzC,IAAYK,ECGAC,EAMAC,EAUAC,ECnBAC,ECAAC,ECAAC,ECAAC,ECAAC,ECAAC,ECAAC,ECAAC,ECAAC,GCAAC,IXAZ,SAAYb,GACV,cACA,wBACA,WACD,CAJD,CAAYA,IAAAA,EAAgB,KCG5B,SAAYC,GACV,6BACA,4BACD,CAHD,CAAYA,IAAAA,EAAa,KAMzB,SAAYC,GACV,yCACA,6BACA,2BACA,qBACA,uBACA,wBACD,CAPD,CAAYA,IAAAA,EAAY,KAUxB,SAAYC,GACV,uBACA,iCACA,6BACA,6BACA,6BACA,qBACA,uBACA,iCACA,2BACA,2BACA,uBACA,uBACA,mBACA,6BACA,yCACA,uCACA,+BACA,6BACA,4BACD,CApBD,CAAYA,IAAAA,EAAgB,KCnB5B,SAAYC,GACV,qBACA,mBACA,yBACA,oBACD,CALD,CAAYA,IAAAA,EAAY,KCAxB,SAAYC,GACV,iBACA,sBACD,CAHD,CAAYA,IAAAA,EAAsB,KCAlC,SAAYC,GACV,2CACA,2CACA,yCACA,2CACA,iCAEA,6BACA,iCACA,2CACA,2CACA,2CACA,oCAEA,wBAEA,wCACA,wCACA,wCAEA,kCACA,iDACD,CAtBD,CAAYA,IAAAA,EAAgB,KCA5B,SAAYC,GACV,mBACA,2BACA,qBACA,8BACD,CALD,CAAYA,IAAAA,EAAW,KCAvB,SAAYC,GACV,iBACA,0BACD,CAHD,CAAYA,IAAAA,EAAY,KCAxB,SAAYC,GACV,wBACD,CAFD,CAAYA,IAAAA,EAAc,KCA1B,SAAYC,GACV,iBACA,iBACA,qBACA,mBACA,mBACA,iBACA,qBACA,sBACD,CATD,CAAYA,IAAAA,EAAY,KCAxB,SAAYC,GACV,cACA,cACA,iBACD,CAJD,CAAYA,IAAAA,EAAe,KCA3B,SAAYC,GACV,kBACA,gBACA,cACA,cACA,+BACD,CAND,CAAYA,KAAAA,GAAS,KCArB,SAAYC,GACV,uBACA,mBACA,+BACA,qBACA,6CACA,oBACD,CAPD,CAAYA,KAAAA,GAAY,KCKjB,MAAMC,GAYX/Q,YAAYgR,EAAiBC,GAC3B,GAAW,MAAPD,EACF,MAAM,IAAI1Q,MAAM,oBAGlB,GAAe,MAAX2Q,EACF,GAAuB,KAAnBD,EAAIvN,WACNwN,EAAUtC,EAAeE,kBACpB,IAAuB,KAAnBmC,EAAIvN,WAGb,MAAM,IAAInD,MAAM,gCAFhB2Q,EAAUtC,EAAeI,wB,CAS7B,GAHA7O,KAAK8Q,IAAMA,EACX9Q,KAAK+Q,QAAUA,EAEXA,IAAYtC,EAAeE,eAAoC,KAAnBmC,EAAIvN,WAClDvD,KAAKgR,OAASF,EACd9Q,KAAKiR,OAAS,UACT,GAAIF,IAAYtC,EAAeG,0BAA+C,KAAnBkC,EAAIvN,WACpEvD,KAAKgR,OAASF,EAAInQ,MAAM,EAAG,IAC3BX,KAAKiR,OAASH,EAAInQ,MAAM,GAAI,QACvB,IAAIoQ,IAAYtC,EAAeI,0BAA+C,KAAnBiC,EAAIvN,WAIpE,MAAM,IAAInD,MAAM,mCAHhBJ,KAAKgR,OAASF,EAAInQ,MAAM,EAAG,IAC3BX,KAAKiR,OAASH,EAAInQ,MAAM,GAAI,G,CAKd,MAAZX,KAAK8Q,MACP9Q,KAAKkR,OAAS,EAAMtN,gBAAgB5D,KAAK8Q,MAExB,MAAf9Q,KAAKgR,SACPhR,KAAKmR,UAAY,EAAMvN,gBAAgB5D,KAAKgR,SAE3B,MAAfhR,KAAKiR,SACPjR,KAAKoR,UAAY,EAAMxN,gBAAgB5D,KAAKiR,QAEhD,CAEAI,SAEE,MAAO,CAAEH,OAAQlR,KAAKkR,OACxB,CAEA7P,kBAAkBsG,GAChB,GAAS,MAALA,EACF,OAAO,KAGT,MAAM2J,EAAc,EAAM1O,eAAe+E,GACzC,OAAO,IAAIkJ,GAAmBS,EAChC,CAEAjQ,gBAAgB2F,GACd,OAAO6J,GAAmBU,WAAWvK,aAAG,EAAHA,EAAKkK,OAC5C,E,2SCjEK,MAAMM,GACX1R,YAAoB2R,GAAA,KAAAA,cAAAA,CAA+B,CAE7CC,uCACJC,EACAC,G,0CAEA,MAAMC,QAAgB7R,KAAK8R,8BACzBH,EAAgBb,IAChBc,SAEI5R,KAAKyR,cAAcM,WAAWF,EACtC,G,CAEMG,6CACJL,EACAC,G,0CAEA,MAAM,UAAEK,EAAS,cAAEC,SAAwBlS,KAAKmS,uCAC9CR,EAAgBb,IAChBa,EAAgBS,mBAChBR,GAIIC,QAAgB7R,KAAKyR,cAAcY,4BAA4BJ,SAG/DjS,KAAKyR,cAAca,aAAaL,SAChCjS,KAAKyR,cAAcc,iBAAiBL,SAEpClS,KAAKyR,cAAcM,WAAWF,EACtC,G,CAGMC,8BACJU,EACAC,G,0CAEA,MAAMC,QAA8B1S,KAAKyR,cAAckB,WACrDH,EACAC,GAGF,OAAO,IAAI5B,GAAmB6B,EAChC,G,CAEMP,uCACJS,EACAC,EACAJ,G,0CAEA,MAAMK,QAAsC9S,KAAKyR,cAAckB,WAC7DC,EACAH,GAGIM,QAA0C/S,KAAKyR,cAAckB,WACjEE,EACAJ,GAMF,MAAO,CACLR,UAJgB,IAAIpB,GAAmBiC,GAKvCZ,cAJoB,EAAMc,iBAAiBD,GAM/C,G,MC/EUE,GCAAC,G,YCAL,MAAMC,GAGXrT,YAAY+L,GACV7L,KAAK6L,MAAQA,CACf,ECDK,MAAMuH,WAAsB,EAOjCtT,YAAYC,EAAe8M,EAAgBwG,G,QACzCvS,MAAMf,GACN,IAAIuT,EAAa,KACjB,GAAgB,MAAZvT,EAAkB,CACpB,MAAMwT,EAAqBvT,KAAKC,oBAAoB,cAElDqT,EADEC,GAAsBF,EACXE,EAEAxT,C,CAIF,MAAX8M,EACF7M,KAAKwT,QAAU,wCACNF,IACTtT,KAAKwT,QAAUxT,KAAKC,oBAAoB,UAAWqT,GACnDtT,KAAKyT,iBAAmBzT,KAAKC,oBAAoB,mBAAoBqT,GACrEtT,KAAK0T,eAAwD,QAAvC,EAAqB,QAArB,EAAA1T,KAAKyT,wBAAgB,eAAEE,wBAAgB,eAAG,GAChE3T,KAAK4T,iBAAmB,EAAMtO,mBAAmBtF,KAAK0T,iBAExD1T,KAAK6T,WAAahH,CACpB,CAEAiH,mBACE,GAA6B,MAAzB9T,KAAKyT,iBACP,OAAOzT,KAAKwT,QAEd,IAAK,MAAM1C,KAAO9Q,KAAKyT,iBAErB,GAAKzT,KAAKyT,iBAAiB7F,eAAekD,IAGtC9Q,KAAKyT,iBAAiB3C,GAAKpQ,OAC7B,OAAOV,KAAKyT,iBAAiB3C,GAAK,GAGtC,OAAO9Q,KAAKwT,OACd,CAEAO,iBACE,MAAMC,EAAqB,GAC3B,GAA6B,MAAzBhU,KAAKyT,iBACP,OAAOO,EAET,IAAK,MAAMlD,KAAO9Q,KAAKyT,iBAEhBzT,KAAKyT,iBAAiB7F,eAAekD,IAG1C9Q,KAAKyT,iBAAiB3C,GAAKzK,SAAS4N,IAClC,IAAIC,EAAS,GACb,GAAIpD,EAAIrL,QAAQ,MAAQ,GAAKqL,EAAIrL,QAAQ,MAAQ,EAAG,CAClD,MAAM0O,EAAUrD,EAAIsD,YAAY,KAChCF,EAASpD,EAAI/N,OAAO,EAAGoR,GAAW,EAAIA,EAAUrD,EAAIpQ,QAAU,I,CAEhEsT,EAASlG,KAAKoG,EAASD,EAAK,IAGhC,OAAOD,CACT,GHtEF,SAAYf,GACV,6BACA,uBACA,0BACD,CAJD,CAAYA,KAAAA,GAAoB,KCAhC,SAAYC,GACV,2BACA,iBACA,yBACA,kCACD,CALD,CAAYA,KAAAA,GAAkB,K,2SGQvB,MAAMmB,GAQXvU,YACEwU,EACAvT,EACAwT,EACAC,GAEY,MAARzT,EACFf,KAAKyU,aAAaH,EAAyCvT,EAAMwT,EAAIC,GAErExU,KAAK0U,wBAAwBJ,EAEjC,CAEIK,cACF,OAAkB,MAAX3U,KAAKuU,GAAa,KAAO,EAAM3R,eAAe5C,KAAKuU,GAC5D,CAEIK,eACF,OAAmB,MAAZ5U,KAAKwU,IAAc,KAAO,EAAM5R,eAAe5C,KAAKwU,IAC7D,CAEIK,gBACF,OAAoB,MAAb7U,KAAKe,KAAe,KAAO,EAAM6B,eAAe5C,KAAKe,KAC9D,CAEAsQ,SACE,OAAOrR,KAAK8U,eACd,CAEAzT,gBAAgB2F,GACd,OAAW,MAAPA,EACK,KAGF,IAAIqN,GAAUrN,EACvB,CAEQyN,aAAa1D,EAAyBhQ,EAAcwT,EAAYC,GAEpExU,KAAK8U,gBADG,MAANP,EACsBxD,EAAU,IAAMwD,EAAK,IAAMxT,EAE3BgQ,EAAU,IAAMhQ,EAI/B,MAAPyT,IACFxU,KAAK8U,gBAAmB9U,KAAK8U,gBAAkB,IAAMN,GAGvDxU,KAAK+U,eAAiBhE,EACtB/Q,KAAKe,KAAOA,EACZf,KAAKuU,GAAKA,EACVvU,KAAKwU,IAAMA,CACb,CAEQE,wBAAwBI,GAE9B,GADA9U,KAAK8U,gBAAkBA,GAClB9U,KAAK8U,gBACR,OAGF,MAAM,QAAE/D,EAAO,UAAEiE,GAAcX,GAAUY,qBAAqBjV,KAAK8U,iBAGnE,GAFA9U,KAAK+U,eAAiBhE,EAElBiE,EAAUtU,SAAWgO,EAAsCqC,GAI/D,OAAQA,GACN,KAAKtC,EAAeG,yBACpB,KAAKH,EAAeI,yBAClB7O,KAAKuU,GAAKS,EAAU,GACpBhV,KAAKe,KAAOiU,EAAU,GACtBhV,KAAKwU,IAAMQ,EAAU,GACrB,MACF,KAAKvG,EAAeE,cAClB3O,KAAKuU,GAAKS,EAAU,GACpBhV,KAAKe,KAAOiU,EAAU,GACtB,MACF,KAAKvG,EAAeK,uBACpB,KAAKL,EAAeM,qBAClB/O,KAAKe,KAAOiU,EAAU,GACtB,MACF,QACE,OAEN,CAEQ3T,4BAA4ByT,GAIlC,MAAMI,EAAeJ,EAAgB1O,MAAM,KAC3C,IAAI2K,EACAiE,EAAsB,KAE1B,GAA4B,IAAxBE,EAAaxU,OACf,IACEqQ,EAAUjO,SAASoS,EAAa,GAAI,MACpCF,EAAYE,EAAa,GAAG9O,MAAM,I,CAClC,MAAOmC,GACP,M,MAGFyM,EAAYF,EAAgB1O,MAAM,KAClC2K,EACuB,IAArBiE,EAAUtU,OACN+N,EAAeG,yBACfH,EAAeE,cAGvB,MAAO,CACLoC,UACAiE,YAEJ,CAEA3T,6BAA6BsG,GAC3B,MAAM,QAAEoJ,EAAO,UAAEiE,GAAchV,KAAKiV,qBAAqBtN,GAEzD,OAAO+G,EAAsCqC,KAAaiE,EAAUtU,MACtE,CAEMyU,QAAQhJ,EAAe2E,EAA0B,M,0CACrD,GAA2B,MAAvB9Q,KAAKoV,eACP,OAAOpV,KAAKoV,eAGd,IAIE,GAHW,MAAPtE,IACFA,QAAY9Q,KAAKqV,oBAAoBlJ,IAE5B,MAAP2E,EACF,MAAM,IAAI1Q,MAAM,0CAA4C+L,GAG9D,MAAMmJ,EAAiB,EAAMC,sBAAsBC,oBACnDxV,KAAKoV,qBAAuBE,EAAeG,cAAczV,KAAM8Q,E,CAC/D,MAAOvI,GACPvI,KAAKoV,eAAiB,yB,CAExB,OAAOpV,KAAKoV,cACd,G,CAEcC,oBAAoBlJ,G,0CAChC,MAAMsF,EAAgB,EAAM8D,sBAAsBG,mBAClD,OAAgB,MAATvJ,QACGsF,EAAckE,UAAUxJ,SACxBsF,EAAcmE,6BAC1B,G,MCrKUC,GCAAC,G,uSCMG,MAAMC,GACTC,iBACR/P,EACAgQ,EACAjV,EACAkV,EAAoB,IAEpB,IAAK,MAAMxP,KAAQ1F,EAAK,CAEtB,IAAKA,EAAI4M,eAAelH,GACtB,SAGF,MAAMyP,EAAUF,EAAQjV,EAAI0F,IAASA,GACjCwP,EAAWzQ,QAAQiB,IAAS,EAC7BT,EAAeS,GAAQyP,GAAoB,KAE3ClQ,EAAeS,GAAQyP,EAAU,IAAI9B,GAAU8B,GAAW,I,CAGjE,CACUC,eACRnQ,EACAgQ,EACAjV,EACAqV,EAA0B,IAE1B,IAAK,MAAM3P,KAAQ1F,EAAK,CAEtB,IAAKA,EAAI4M,eAAelH,GACtB,SAGF,MAAMyP,EAAWlQ,EAAejF,EAAI0F,IAASA,GACzC2P,EAAiB5Q,QAAQiB,IAAS,EACnCuP,EAAgBvP,GAAmB,MAAXyP,EAAkBA,EAAU,KAEpDF,EAAgBvP,GAAmB,MAAXyP,EAAmBA,EAAsBrB,gBAAkB,I,CAG1F,CAEgBwB,WACdC,EACAvV,EACAmL,EACA2E,EAA0B,M,0CAE1B,MAAM0F,EAAW,GACXtU,EAAYlC,KAElB,IAAK,MAAM0G,KAAQ1F,EAEZA,EAAI4M,eAAelH,IAIxB,SAAW+P,GACT,MAAMC,EAAIxN,QAAQC,UACfwN,MAAK,KACJ,MAAMC,EAAU5V,EAAIyV,IAAYA,EAChC,OAAIvU,EAAK0U,GACA1U,EAAK0U,GAASzB,QAAQhJ,EAAO2E,GAE/B,IAAI,IAEZ6F,MAAME,IACJN,EAAkBE,GAAWI,CAAG,IAErCL,EAAS1I,KAAK4I,EACf,CAbD,CAaGhQ,GAIL,aADMwC,QAAQ4N,IAAIN,GACXD,CACT,G,EC9EK,MAAMQ,WAAoChB,GAAjD,c,oBACE,KAAAiB,cAAgB,EAChB,KAAAC,UAAY,EACZ,KAAAC,cAAe,EACf,KAAAC,cAAe,EACf,KAAAC,gBAAiB,EACjB,KAAAC,gBAAiB,EAOjB,KAAAC,gBAAiB,CAgBnB,CAdEjW,oBAAoBkW,GAClB,GAAc,MAAVA,EACF,OAAO,KAET,MAAMC,EAAU,IAAIT,GAQpB,OAPAS,EAAQR,cAAgBO,EAAOP,cAC/BQ,EAAQP,UAAYM,EAAON,UAC3BO,EAAQN,aAAeK,EAAOL,aAC9BM,EAAQL,aAAeI,EAAOJ,aAC9BK,EAAQJ,eAAiBG,EAAOH,eAChCI,EAAQH,eAAiBE,EAAOF,eAChCG,EAAQF,eAAiBC,EAAOD,eACzBE,CACT,GH/BF,SAAY3B,GAIV,mBAKA,yDAMA,8CACD,CAhBD,CAAYA,KAAAA,GAAwB,KIG7B,MAAe4B,GAIpB3X,YAAsB4X,EAAkCC,GAAlC,KAAAD,UAAAA,EACpB1X,KAAK2X,OAAmB,MAAVA,EAAiBA,EAAS,IAC1C,CAGAC,0BAA0BC,GAE1B,CAEAC,aAAaJ,GACX1X,KAAK0X,UAAYA,CACnB,CAEAK,0BAA0BC,GACxBhY,KAAKiY,wBAA0BD,CACjC,CAEUE,gBAAgBC,GACxB,MAAMnR,EAAW,CACfoR,MAAO,qBACPC,UAAWF,GAwBb,OArBInY,KAAK2X,SACP3Q,EAAIsR,WAAatY,KAAK2X,OAAOlN,KAC7BzD,EAAIuR,iBAAmBvY,KAAK2X,OAAOa,WACnCxR,EAAIyR,WAAazY,KAAK2X,OAAOjW,MAM3B1B,KAAKiY,0BACPjR,EAAI0R,YAAc1Y,KAAKiY,yBAGrBjY,KAAK0X,WACH1X,KAAK0X,UAAU9L,OAAoC,MAA3B5L,KAAK0X,UAAUiB,WACzC3R,EAAI4R,eAAiB5Y,KAAK0X,UAAU9L,MACpC5E,EAAI6R,kBAAoB7Y,KAAK0X,UAAUiB,SACvC3R,EAAI8R,kBAAoB9Y,KAAK0X,UAAUqB,SAAW,IAAM,KAIrD/R,CACT,EC5CK,MAAMgS,WAA6BvB,GACxC3X,YACS+L,EACAuG,EACA6G,EACGvB,EACVC,GAEA7W,MAAM4W,EAAWC,GANV,KAAA9L,MAAAA,EACA,KAAAuG,mBAAAA,EACA,KAAA6G,gBAAAA,EACG,KAAAvB,UAAAA,CAIZ,CAEAQ,gBAAgBC,GACd,MAAMnR,EAAMlG,MAAMoX,gBAAgBC,GAUlC,OARAnR,EAAIkS,WAAa,WACjBlS,EAAImS,SAAWnZ,KAAK6L,MACpB7E,EAAIoS,SAAWpZ,KAAKoS,mBAEQ,MAAxBpS,KAAKiZ,kBACPjS,EAAIiS,gBAAkBjZ,KAAKiZ,iBAGtBjS,CACT,CAEA4Q,0BAA0BC,GACxBA,EAAQrR,IAAI,aAAc,EAAM6S,iBAAiBrZ,KAAK6L,OACxD,ECjCK,MAAMyN,WAAgC,EAG3CxZ,YAAYC,GACVe,MAAMf,GACNC,KAAKuZ,QAAUvZ,KAAKC,oBAAoB,mBAC1C,ECRK,MAAMuZ,GAIX1Z,YAAY2Z,EAAmBC,GAC7B1Z,KAAKyZ,UAAYA,EACjBzZ,KAAK0Z,oBAAsBA,CAC7B,ECCK,MAAMC,GAIX7Z,YAAYwK,GACNA,GACFnD,OAAOC,OAAOpH,KAAMsK,EAExB,CAEA+G,SACE,MAAO,CACLnM,GAAIlF,KAAKkF,GACTuN,WAAY,EAAMmH,uBAAuB5Z,KAAKyS,YAElD,CAEApR,gBAAgB2F,GACd,GAAW,MAAPA,EACF,OAAO,KAGT,IAAI6S,EAAmB,KAKvB,OAJI7S,EAAIyL,aACNoH,EAAmB,EAAMC,sBAAsB9S,EAAIyL,aAG9C,IAAIkH,GAAyB,CAClCzU,GAAI8B,EAAI9B,GACRuN,WAAYoH,GAEhB,ECrCK,MAAME,GAAb,cACE,KAAAC,KAAe,KACf,KAAAC,IAAc,KACd,KAAAC,SAAmB,KACnB,KAAAC,MAAgB,KAChB,KAAAC,cAAwB,KACxB,KAAAC,OAAiB,KACjB,KAAAC,SAAmB,KACnB,KAAAC,aAAuB,IAKzB,CAHElZ,gBAAgB2F,GACd,OAAOG,OAAOC,OAAO,IAAI2S,GAAmB/S,EAC9C,ECdK,MAAMwT,GACX1a,YAAmB2a,GAAA,KAAAA,gBAAAA,CAA0B,ECDxC,MAAMC,GACX5a,YACS6a,EACAC,EACAC,GAFA,KAAAF,iBAAAA,EACA,KAAAC,wBAAAA,EACA,KAAAC,iCAAAA,CACN,ECIE,MAAMC,GAQXhb,YAAYib,GAFZ,KAAAC,cAA2C,CAAC,EAG1Chb,KAAKib,QAAUF,aAAoB,EAApBA,EAAsBE,QACrCjb,KAAKkb,QAAUH,aAAoB,EAApBA,EAAsBG,QACrClb,KAAKmb,QAASJ,aAAoB,EAApBA,EAAsBI,QAChC,IAAIC,GAA2BL,EAAqBI,QACpD,KACJnb,KAAKqb,SAAU,IAAIzR,MAAO0R,cAC1Btb,KAAKub,aAAcR,aAAoB,EAApBA,EAAsBQ,aACrC,IAAIC,GAA4BT,EAAqBQ,aACrD,KACJvb,KAAKgb,cAAgBD,aAAoB,EAApBA,EAAsBC,aAC7C,CAEA3Z,gBAAgB2F,GACd,OAAOG,OAAOC,OAAO,IAAI0T,GAAiB,CAAC,GAAI9T,EAAK,CAClDmU,QAAQnU,aAAG,EAAHA,EAAKmU,QAASC,GAA2BK,SAASzU,EAAImU,QAAU,KACxEI,aAAavU,aAAG,EAAHA,EAAKuU,aAAcC,GAA4BC,SAASzU,EAAIuU,aAAe,MAE5F,EAGK,MAAMH,GAIXtb,YAAYC,GACVC,KAAK0B,KAAO3B,EAAS2B,KACrB1B,KAAK4F,IAAM7F,EAAS6F,GACtB,CAEAvE,gBAAgB2F,GACd,OAAOG,OAAOC,OAAO,IAAIgU,GAA2B,CAAC,GAAIpU,EAC3D,EAGK,MAAMwU,GAQX1b,YAAYC,GACVC,KAAK0b,YAAc3b,EAAS2b,YAC5B1b,KAAK2b,MAAQ5b,EAAS4b,MACtB3b,KAAKia,IAAMla,EAASka,IACpBja,KAAKka,SAAWna,EAASma,SACzBla,KAAKoa,cAAgBra,EAASqa,cAC9Bpa,KAAK4b,IAAM7b,EAAS6b,GACtB,CAEAva,gBAAgB2F,GACd,OAAOG,OAAOC,OAAO,IAAIoU,GAA4B,CAAC,GAAIxU,EAC5D,ECxCK,MAAM6U,GAIXxK,SACE,MAAO,CACLyK,UAAW9b,KAAK8b,UAChBC,UACE/b,KAAK+b,qBAAqBC,YACtB,EAAMpC,uBAAuB5Z,KAAK+b,WAClC/b,KAAK+b,UAEf,CAEA1a,gBACE2F,EACAiV,EACAC,GAEA,GAAW,MAAPlV,EACF,OAAO,KAGT,MAAMV,EAAO,IAAIuV,GAWjB,OAVsB,OAAlB7U,aAAG,EAAHA,EAAK8U,aACPxV,EAAKwV,UAAYI,EACbA,EAAkBlV,EAAI8U,WACrB9U,EAAI8U,WAEW,OAAlB9U,aAAG,EAAHA,EAAK+U,aACPzV,EAAKyV,UAAYE,EACbA,EAAkBjV,EAAI+U,WACrB/U,EAAI+U,WAEJzV,CACT,EAGK,MAAM6V,IAQN,MAAMC,IAIN,MAAMC,GAAb,cACE,KAAAC,QAAuD,IAAIH,GAI3D,KAAAI,QAAW,IAAIH,GAEf,KAAAI,MAAiD,IAAIL,GACrD,KAAAM,YAAmE,IAAIN,GAIvE,KAAA9P,SAAoD,IAAI8P,GACxD,KAAAO,0BAGI,IAAIb,EAKV,EAEO,MAAMc,GAAb,cAKE,KAAAC,iBAGI,IAAIf,GAIR,KAAAgB,aAAyE,IAAIhB,GAI7E,KAAApJ,WAAkD,IAAIoJ,GAWtD,KAAAiB,mBAAkE,IAAIjB,EA+CxE,CA1CExK,SACE,OAAO,EAAM0L,MAAM/c,KAAM,CACvByZ,UAAW,EAAMG,uBAAuB5Z,KAAKyZ,YAEjD,CAEApY,gBAAgB2F,GACd,OAAW,MAAPA,EACK,KAGFG,OAAOC,OAAO,IAAIuV,GAAe,CACtC9K,QAAShB,GAAmB4K,SAASzU,aAAG,EAAHA,EAAK6K,SAC1CI,UAAWpB,GAAmB4K,SAASzU,aAAG,EAAHA,EAAKiL,WAC5C+K,UAAWhW,aAAG,EAAHA,EAAKgW,UAChBC,gBAAiBpM,GAAmB4K,SAASzU,aAAG,EAAHA,EAAKiW,iBAClDH,mBAAoBjB,GAAeJ,SACjCzU,aAAG,EAAHA,EAAK8V,mBACLjM,GAAmB4K,UAErBmB,iBAAkBD,GAAYO,kCAAkClW,aAAG,EAAHA,EAAK4V,kBACrEC,aAAcF,GAAYO,kCAAkClW,aAAG,EAAHA,EAAK6V,cACjEpK,WAAYoJ,GAAeJ,SAA6BzU,aAAG,EAAHA,EAAKyL,YAAa0K,GACxE,EAAMrD,sBAAsBqD,KAE9B1D,UAAW,EAAMK,sBAAsB9S,aAAG,EAAHA,EAAKyS,YAEhD,CAEApY,yCAAyC2F,GACvC,OAAO6U,GAAeJ,SAASzU,GAAMmW,IACnC,GAAW,MAAPnW,EACF,OAAO,KAGT,MAAMqB,EAA6C,CAAC,EACpD,IAAK,MAAMnD,KAAMiY,EACf9U,EAAOnD,GAAM2L,GAAmB4K,SAAS0B,EAAOjY,IAElD,OAAOmD,CAAM,GAEjB,EAGK,MAAM+U,GAuBX/b,gBAAgB2F,GACd,OAAW,MAAPA,EACK,KAGFG,OAAOC,OAAO,IAAIgW,GAAkBpW,EAC7C,EAGK,MAAM,GAAb,cAqBE,KAAAqW,gBAAmC,IAAItD,GAYvC,KAAAuD,mBAA8B,OAU9B,KAAAC,aAAmD,IAAI1B,EAgBzD,CAdExa,gBAAgB2F,GACd,OAAW,MAAPA,EACK,KAGFG,OAAOC,OAAO,IAAI,GAAmBJ,EAAK,CAC/CqW,gBAAiBtD,GAAgB0B,SAASzU,aAAG,EAAHA,EAAKqW,iBAC/CE,aAAc1B,GAAeJ,SAC3BzU,aAAG,EAAHA,EAAKuW,aACLlJ,GAAUoH,UAEZ+B,aAAc1C,GAAiBW,SAASzU,aAAG,EAAHA,EAAKwW,eAEjD,EAOK,MAAMC,GAKXpc,gBAAgB2F,GACd,OAAW,MAAPA,EACK,KAGFG,OAAOC,OAAO,IAAIqW,GAAiBzW,EAC5C,EAGK,MAAM0W,GAKX5d,YAAYwK,GACNA,GACFnD,OAAOC,OAAOpH,KAAMsK,EAExB,CAaAjJ,oBAAoBtB,GAClB,GAAgB,MAAZA,EACF,OAAO,KAGT,MAAM4d,EAA2B,IAAID,GAiBrC,OAhBAC,EAAyBC,kBAAoB7d,EAAS6d,kBAElD7d,EAAS8d,sBACXF,EAAyBE,oBAAsB,IAAInD,GACjD3a,EAAS8d,oBAAoBlD,iBAC7B5a,EAAS8d,oBAAoBjD,wBAC7B7a,EAAS8d,oBAAoBhD,mCAI7B9a,EAAS+d,qBACXH,EAAyBG,mBAAqB,IAAItD,GAChDza,EAAS+d,mBAAmBrD,kBAIzBkD,CACT,CAEAtc,gBAAgB2F,GACd,GAAW,MAAPA,EACF,OAAO,KAGT,MAAM2W,EAA2BxW,OAAOC,OAAO,IAAIsW,GAA4B1W,GAgB/E,OAdIA,EAAI6W,sBACNF,EAAyBE,oBAAsB,IAAInD,GACjD1T,EAAI6W,oBAAoBlD,iBACxB3T,EAAI6W,oBAAoBjD,wBACxB5T,EAAI6W,oBAAoBhD,mCAIxB7T,EAAI8W,qBACNH,EAAyBG,mBAAqB,IAAItD,GAChDxT,EAAI8W,mBAAmBrD,kBAIpBkD,CACT,EAGK,MAAMI,GAGXje,YAAYwK,GACNA,GACFnD,OAAOC,OAAOpH,KAAMsK,EAExB,CAEAjJ,gBAAgB2F,GACd,GAAW,MAAPA,EACF,OAAO,KAIT,OADmBG,OAAOC,OAAO,IAAI2W,GAAc/W,EAErD,EAGK,MAAM,GAUXlH,YAAYwK,GATZ,KAAAvJ,KAAqB,IAAIsb,GACzB,KAAAhV,KAAqB,IAAIsV,GACzB,KAAAqB,QAA2B,IAAIZ,GAC/B,KAAAa,SAA6B,IAAI,GACjC,KAAAC,OAAyB,IAAIT,GAC7B,KAAAU,kBAA+C,IAAIT,GACnD,KAAAU,WAA0B,IAAIL,GAC9B,KAAAM,iBAAuD,KAGrDlX,OAAOC,OAAOpH,KAAM,CAClBe,KAAM,OAAF,wBACC,IAAIsb,IACJ/R,aAAI,EAAJA,EAAMvJ,MAEXsG,KAAM,OAAF,wBACC,IAAIsV,IACJrS,aAAI,EAAJA,EAAMjD,MAEX2W,QAAS,OAAF,wBACF,IAAIZ,IACJ9S,aAAI,EAAJA,EAAM0T,SAEXC,SAAU,OAAF,wBACH,IAAI,IACJ3T,aAAI,EAAJA,EAAM2T,UAEXC,OAAQ,OAAF,wBACD,IAAIT,IACJnT,aAAI,EAAJA,EAAM4T,QAEXC,kBAAmB,OAAF,wBACZ,IAAIT,IACJpT,aAAI,EAAJA,EAAM6T,mBAEXC,WAAY,OAAF,wBACL,IAAIL,IACJzT,aAAI,EAAJA,EAAM8T,YAEXC,iBAAkB/T,aAAI,EAAJA,EAAM+T,kBAE5B,CAEAhd,gBAAgBid,GACd,OAAY,MAARA,EACK,KAGFnX,OAAOC,OAAO,IAAI,GAAQ,CAAC,GAAIkX,EAAM,CAC1CjX,KAAMsV,GAAYlB,SAAS6C,aAAI,EAAJA,EAAMjX,MACjC2W,QAASZ,GAAe3B,SAAS6C,aAAI,EAAJA,EAAMN,SACvCC,SAAU,GAAgBxC,SAAS6C,aAAI,EAAJA,EAAML,UACzCC,OAAQT,GAAchC,SAAS6C,aAAI,EAAJA,EAAMJ,QACrCC,kBAAmBT,GAAyBjC,SAAS6C,aAAI,EAAJA,EAAMH,mBAC3DC,WAAYL,GAAWtC,SAAS6C,aAAI,EAAJA,EAAMF,YACtCC,iBAAkB1E,GAAyB8B,SAAS6C,aAAI,EAAJA,EAAMD,mBAE9D,GZxbF,SAAYvI,GACV,qCACA,qBACA,iBACA,yBACA,iBACA,2BACA,yCACA,0BACD,CATD,CAAYA,KAAAA,GAAqB,KaK1B,MAAMyI,GAAb,cACE,KAAA7K,eAAiB,GAOjB,KAAA8K,qBAAsB,EAEtB,KAAAC,mBAA+C5I,GAAyB6I,KACxE,KAAAC,mBAA4E,IAW9E,CAPMC,sBACF,OAAQ,EAAMtZ,mBAAmBtF,KAAK0T,eACxC,CAEImL,wBACF,OAAkC,MAA3B7e,KAAK2e,kBACd,ECvBK,MAAMG,GAMXhf,YAAYif,EAAeC,GACzBhf,KAAKyK,KAAOuU,EAAqBC,YACjCjf,KAAK0B,KAAOsd,EAAqBE,kBACjClf,KAAKwY,WAAauG,EAClB/e,KAAKmf,UAAY,IACnB,ECZK,MAAMC,GACXtf,YACS6Y,EAAkC,KAClC/M,EAAgB,KAChBmN,GAAoB,GAFpB,KAAAJ,SAAAA,EACA,KAAA/M,MAAAA,EACA,KAAAmN,SAAAA,CACN,ECLE,MAAMsG,WAAqC,EAehDvf,YAAYC,GACVe,MAAMf,GAENC,KAAKgX,cAAgBhX,KAAKC,oBAAoB,iBAC9CD,KAAKiX,UAAYjX,KAAKC,oBAAoB,aAC1CD,KAAKkX,aAAelX,KAAKC,oBAAoB,gBAC7CD,KAAKmX,aAAenX,KAAKC,oBAAoB,gBAC7CD,KAAKoX,eAAiBpX,KAAKC,oBAAoB,kBAC/CD,KAAKqX,eAAiBrX,KAAKC,oBAAoB,kBAC/CD,KAAKsX,eAAiBtX,KAAKC,oBAAoB,iBACjD,ECrBK,MAAMqf,WAAiD,EAG5Dxf,YAAYC,GACVe,MAAMf,GACNC,KAAKya,gBAAkBza,KAAKC,oBAAoB,kBAClD,ECDK,MAAMsf,WAAkD,EAO7Dzf,YAAYC,GACVe,MAAMf,GACNC,KAAK2a,iBAAmB3a,KAAKC,oBAAoB,oBAEjDD,KAAK4a,wBAA0B5a,KAAKC,oBAAoB,2BACxDD,KAAK6a,iCAAmC7a,KAAKC,oBAC3C,oCAGEF,EAASyf,sBACXxf,KAAK0Z,oBAAsB,IAAIrF,GAAUrU,KAAKC,oBAAoB,yBAEhEF,EAAS0f,mBACXzf,KAAK0f,iBAAmB,IAAIrL,GAAUrU,KAAKC,oBAAoB,qBAEnE,EChBK,MAAM0f,WAAsC,EAKjD7f,YAAYC,GACVe,MAAMf,GAENC,KAAK4d,kBAAoB5d,KAAKC,oBAAoB,qBAE9CF,EAAS6f,sBACX5f,KAAK6d,oBAAsB,IAAI0B,GAC7Bvf,KAAKC,oBAAoB,yBAGzBF,EAAS8f,qBACX7f,KAAK8d,mBAAqB,IAAIwB,GAC5Btf,KAAKC,oBAAoB,uBAG/B,EC/BK,MAAM6f,WAA8B,EAqBzChgB,YAAYC,GACVe,MAAMf,GACNC,KAAK+f,YAAchgB,EAASigB,aAC5BhgB,KAAKigB,UAAYlgB,EAASmgB,WAC1BlgB,KAAKmgB,aAAepgB,EAASqgB,cAC7BpgB,KAAKqgB,UAAYtgB,EAASugB,WAE1BtgB,KAAKwe,oBAAsBxe,KAAKC,oBAAoB,uBACpDD,KAAKyS,WAAazS,KAAKC,oBAAoB,cAC3CD,KAAK8Q,IAAM9Q,KAAKC,oBAAoB,OACpCD,KAAK4Y,eAAiB5Y,KAAKC,oBAAoB,kBAC/CD,KAAKugB,IAAMvgB,KAAKC,oBAAoB,OACpCD,KAAKwgB,cAAgBxgB,KAAKC,oBAAoB,iBAC9CD,KAAKygB,UAAYzgB,KAAKC,oBAAoB,aAC1CD,KAAK0gB,eAAiB1gB,KAAKC,oBAAoB,kBAC/CD,KAAKye,mBAAqBze,KAAKC,oBAAoB,sBACnDD,KAAK2gB,mBAAqB3gB,KAAKC,oBAAoB,sBACnDD,KAAKya,gBAAkBza,KAAKC,oBAAoB,mBAChDD,KAAK4gB,qBAAuB,IAAIvB,GAC9Brf,KAAKC,oBAAoB,yBAGvBF,EAAS8gB,wBACX7gB,KAAK8gB,sBAAwB,IAAInB,GAC/B3f,KAAKC,oBAAoB,0BAG/B,ECjDK,MAAM8gB,WAAkC,EAQ7CjhB,YAAYC,GACVe,MAAMf,GAPR,KAAAihB,oBAAsB,IAAI7a,IAQxBnG,KAAKihB,aAAejhB,KAAKC,oBAAoB,sBAC7CD,KAAK2e,mBAAqB3e,KAAKC,oBAAoB,sBACnD,MAAM+gB,EAAsBhhB,KAAKC,oBAAoB,uBACrD,GAA2B,MAAvB+gB,EACF,IAAK,MAAMta,KAAQsa,EAEbA,EAAoBpT,eAAelH,IACrC1G,KAAKghB,oBAAoBxa,IAAI1D,SAAS4D,EAAM,MAAOsa,EAAoBta,IAI7E1G,KAAK4gB,qBAAuB,IAAIvB,GAC9Brf,KAAKC,oBAAoB,yBAG3BD,KAAKkhB,wBAA0BlhB,KAAKC,oBAAoB,2BACxDD,KAAK6L,MAAQ7L,KAAKC,oBAAoB,QACxC,E,2SCKK,MAAekhB,GAIpBrhB,YACY2R,EACAnG,EACA8V,EACAC,EACArC,EACAsC,EACAC,EACAhW,EACAiW,GARA,KAAA/P,cAAAA,EACA,KAAAnG,WAAAA,EACA,KAAA8V,aAAAA,EACA,KAAAC,aAAAA,EACA,KAAArC,qBAAAA,EACA,KAAAsC,iBAAAA,EACA,KAAAC,WAAAA,EACA,KAAAhW,aAAAA,EACA,KAAAiW,iBAAAA,EAXF,KAAAC,mBAA6B,IAYpC,CAUGC,eACJhK,EACAuB,EAA0B,M,0CAE1BjZ,KAAK2hB,aAAa7J,aAAaJ,GAC/B,MAAOkK,SAAoB5hB,KAAK6hB,aAChC,OAAOD,CACT,G,CAEgBC,a,0CACd7hB,KAAKwhB,iBAAiBM,wBAEtB,MAAM/hB,QAAiBC,KAAKsL,WAAWyW,kBAAkB/hB,KAAK2hB,cAE9D,GAAI5hB,aAAoBghB,GACtB,MAAO,OAAO/gB,KAAKgiB,yBAAyBjiB,GAAWA,GAClD,GAAIA,aAAoBuZ,GAC7B,MAAO,OAAOtZ,KAAKiiB,uBAAuBliB,GAAWA,GAChD,GAAIA,aAAoB+f,GAC7B,MAAO,OAAO9f,KAAKkiB,qBAAqBniB,GAAWA,GAGrD,MAAM,IAAIK,MAAM,2BAClB,G,CAEgB+hB,qB,0CACd,MAAMpD,QAAc/e,KAAKqhB,aAAae,WACtC,OAAO,IAAItD,GAAcC,EAAO/e,KAAKgf,qBACvC,G,CAEgBqD,eAAeC,G,0CAC7B,GAA6B,MAAzBA,EACF,OAAOA,EAGT,MAAMC,QAA6BviB,KAAKohB,aAAaoB,oBACrD,OAA4B,MAAxBD,EACK,IAAInD,GAAsBtJ,GAAsB2M,SAAUF,GAAsB,GAGlF,IAAInD,EACb,G,CAEgBsD,uBAAuBC,G,0CACrC,MAAMC,QAA2B5iB,KAAKohB,aAAayB,YAAYF,EAAc5C,aAMvE9T,EAAS2W,EAAmBE,IAE5B9F,QAAkBhd,KAAKuL,aAAawX,aAAa,CAAE9W,WACnD+W,EAAc,IAAIrG,GACpBK,IACFgG,EAAYhG,UAAYA,GAI1B,MAAMqB,QAAyBre,KAAKuL,aAAa0X,oBAAoB,CAAEhX,iBAEjEjM,KAAKuL,aAAa2X,WACtB,IAAI,GAAQ,CACVlF,QAAS,OAAF,wBACF,IAAIZ,IACJ,CACDnR,SACAvK,KAAMkhB,EAAmBlhB,KACzBmK,MAAO+W,EAAmB/W,MAC1BsX,qBAAsBP,EAAmBQ,QACzC5C,cAAemC,EAAcnC,cAC7BC,UAAWkC,EAAclC,UACzBC,eAAgBiC,EAAcjC,eAC9B2C,QAASV,EAAcpC,MAG3BrC,OAAQ,OAAF,wBACD,IAAIT,IACJ,CACDsC,YAAa4C,EAAc5C,YAC3BI,aAAcwC,EAAcxC,eAGhC9Y,KAAM2b,EACN7E,kBAAmBT,GAAyB4F,aAC1CX,EAAc7B,uBAEhBzC,iBAAkBA,aAAgB,EAAhBA,EAAkBhN,WAG1C,G,CAEgB6Q,qBAAqBniB,G,0CACnC,MAAMwjB,EAAS,IAAIhF,GAsBnB,OArBAgF,EAAO/E,oBAAsBze,EAASye,oBAElCze,EAAS0e,qBACX8E,EAAO9E,mBAAqB5I,GAAyB2N,+BAIjDxjB,KAAK0iB,uBAAuB3iB,GAEH,MAA3BA,EAAS6Y,uBACL5Y,KAAKohB,aAAaqC,kBAAkB1jB,UAGtCC,KAAKsS,aAAavS,SAElBC,KAAK+R,WAAWhS,SAEhBC,KAAK0jB,cAAc3jB,GAEzBC,KAAKshB,iBAAiB7V,KAAK,YAEpB8X,CACT,G,CASgBI,6B,0CACd,IACE,MAAOlK,EAAWhH,SAAoBzS,KAAKyR,cAAcmS,cAEzD,aADM5jB,KAAKsL,WAAWuY,gBAAgB,IAAIrK,GAAYC,EAAWhH,EAAWqC,kBACrErC,EAAWqC,e,CAClB,MAAOvM,GACPvI,KAAKuhB,WAAWuC,MAAMvb,E,CAE1B,G,CAEcyZ,yBAAyBjiB,G,gDACrC,MAAMwjB,EAAS,IAAIhF,GAOnB,OANAgF,EAAO5E,mBAAqB5e,EAASihB,oBAErChhB,KAAKwhB,iBAAiBxT,aAAajO,GACnCC,KAAKyhB,mBAA0C,QAArB,EAAA1hB,EAASkhB,oBAAY,QAAI,KACnDsC,EAAOQ,wBAA0BhkB,EAASmhB,wBAC1CqC,EAAO1X,MAAQ9L,EAAS8L,MACjB0X,C,IAGKtB,uBAAuBliB,G,0CACnC,MAAMwjB,EAAS,IAAIhF,GAEnB,OADAgF,EAAO7P,eAAiB3T,EAASwZ,QAC1BgK,CACT,G,6SCzLK,MAAMS,WAA8B7C,GACrCtV,YACF,OAAO7L,KAAK2hB,aAAa9V,KAC3B,CAEIuG,yBACF,OAAOpS,KAAK2hB,aAAavP,kBAC3B,CAaAtS,YACE2R,EACAnG,EACA8V,EACAC,EACArC,EACAsC,EACAC,EACUhW,EACViW,EACQyC,EACA5Y,EACA6Y,GAERpjB,MACE2Q,EACAnG,EACA8V,EACAC,EACArC,EACAsC,EACAC,EACAhW,EACAiW,GAfQ,KAAAjW,aAAAA,EAEF,KAAA0Y,wBAAAA,EACA,KAAA5Y,cAAAA,EACA,KAAA6Y,YAAAA,EAdF,KAAAC,yBAAqDtO,GAAyB6I,IA2BtF,CAEegD,eACbhK,EACAuB,G,sHAEAjZ,KAAK2hB,aAAa1I,gBAAkBA,QAAAA,EAAmBjZ,KAAKyhB,mBAC5D,MAAM8B,QAAe,EAAM7B,eAAc,UAAChK,GAY1C,OARG6L,EAAO1E,mBACP0E,EAAO3E,iBACR5e,KAAKmkB,0BAA4BtO,GAAyB6I,aAEpD1e,KAAKuL,aAAa6Y,4BAA4BpkB,KAAKmkB,0BACzDZ,EAAO9E,mBAAqBze,KAAKmkB,0BAG5BZ,CACT,G,CAEec,MAAMC,G,0CACnB,MAAM,MAAEzY,EAAK,eAAE0Y,EAAc,aAAEtD,EAAY,UAAEvJ,GAAc4M,EAE3DtkB,KAAKiS,gBAAkBjS,KAAKkkB,YAAYM,gBAAgBD,EAAgB1Y,GAGxE7L,KAAKykB,yBAA2BzkB,KAAKyR,cAAciT,cACjDH,EACAvkB,KAAKiS,UACL3C,EAAYqV,oBAEd,MAAMzS,QAAsBlS,KAAKyR,cAAciT,cAAcH,EAAgBvkB,KAAKiS,WAElFjS,KAAK2hB,aAAe,IAAI3I,GACtBnN,EACAqG,EACA+O,QACMjhB,KAAKqiB,eAAe3K,SACpB1X,KAAKmiB,sBAGb,MAAOP,EAAYvO,SAA0BrT,KAAK6hB,aAE5C+C,EACJ5kB,KAAK6kB,2CAA2CxR,GAGlD,GAAIuR,aAA2B,EAA3BA,EAA6BtN,eAAgB,CAErBtX,KAAK8kB,uBAC7BR,EACAM,KAIIhD,EAAWhD,iBAAmBgD,EAAW/C,kBAE3C7e,KAAKmkB,yBAA2BtO,GAAyBkP,0BAGnD/kB,KAAKuL,aAAa6Y,4BACtBvO,GAAyBkP,oBAE3BnD,EAAWnD,mBAAqB5I,GAAyBkP,oB,CAI/D,OAAOnD,CACT,G,CAEyBtP,aAAavS,G,gDAC9BC,KAAKyR,cAAca,aAAatS,KAAKiS,iBACrCjS,KAAKyR,cAAcc,iBAAiBvS,KAAKykB,mBACjD,G,CAEyB1S,WAAWhS,G,gDAC5BC,KAAKyR,cAAcuT,6BAA6BjlB,EAAS+Q,KAE/D,MAAMmB,QAAkBjS,KAAKyR,cAAcwT,eAC3C,GAAIhT,EAAW,CACb,MAAMJ,QAAgB7R,KAAKyR,cAAcY,4BAA4BJ,SAC/DjS,KAAKyR,cAAcM,WAAWF,E,CAExC,G,CAEyB6R,cAAc3jB,G,sDAC/BC,KAAKyR,cAAciS,cACJ,QAAnB,EAAA3jB,EAAS0S,kBAAU,cAAWzS,KAAK2jB,6B,IAI/BkB,2CACN9kB,GAEA,OAAgB,MAAZA,GAAoBA,aAAoBuZ,GACnC,KAEFvC,GAA4BuM,aAAavjB,EAAS6gB,qBAC3D,CAEQkE,wBACN,eAAEP,EAAc,MAAE1Y,GAClB2L,G,MAEA,MAAM0N,EAGL,QAHwB,EAAAllB,KAAKikB,wBAAwBkB,oBACpDZ,EACA1Y,UACD,eAAEuZ,MAEH,OAAOplB,KAAKqL,cAAcyZ,uBAAuBI,EAAkBX,EAAgB/M,EACrF,E,2SCrKK,MAAM6N,WAAkClE,GACzCtV,YACF,OAAO7L,KAAK2hB,aAAa9V,KAC3B,CAEImM,iBACF,OAAOhY,KAAKslB,wBAAwBtN,UACtC,CAEIuN,oBACF,OAAOvlB,KAAKslB,wBAAwBC,aACtC,CAKAzlB,YACE2R,EACAnG,EACA8V,EACAC,EACArC,EACAsC,EACAC,EACAhW,EACAiW,EACQgE,GAER1kB,MACE2Q,EACAnG,EACA8V,EACAC,EACArC,EACAsC,EACAC,EACAhW,EACAiW,GAXM,KAAAgE,yBAAAA,CAaV,CAEenB,MAAMC,G,0CACnBtkB,KAAKslB,wBAA0BhB,EAE/BtkB,KAAK2hB,aAAe,IAAI3I,GACtBsL,EAAYzY,MACZyY,EAAYtM,WACZ,WACMhY,KAAKqiB,eAAeiC,EAAY5M,iBAChC1X,KAAKmiB,sBAGbniB,KAAK2hB,aAAa5J,0BAA0BuM,EAAYiB,eACxD,MAAO3D,SAAoB5hB,KAAK6hB,aAChC,OAAOD,CACT,G,CAEeF,eACbhK,EACAuB,G,sHAGA,OADAjZ,KAAK2hB,aAAa1I,gBAAkBA,QAAAA,EAAmBjZ,KAAKyhB,mBACrD,EAAMC,eAAc,UAAChK,EAC9B,G,CAEyBpF,aAAavS,G,0CAElCC,KAAKslB,wBAAwBG,oBAC7BzlB,KAAKslB,wBAAwBI,+BAEvB1lB,KAAKyR,cAAca,aAAatS,KAAKslB,wBAAwBG,0BAC7DzlB,KAAKyR,cAAcc,iBACvBvS,KAAKslB,wBAAwBI,wBAGnC,G,CAEyB3T,WAAWhS,G,gDAG5BC,KAAKyR,cAAcuT,6BAA6BjlB,EAAS+Q,KAE3D9Q,KAAKslB,wBAAwBK,uBACzB3lB,KAAKyR,cAAcM,WAAW/R,KAAKslB,wBAAwBK,yBAE3D3lB,KAAK4lB,mCAEL5lB,KAAKwlB,yBAAyBK,wBAExC,G,CAEcD,6B,0CACZ,MAAM3T,QAAkBjS,KAAKyR,cAAcwT,eAC3C,GAAIhT,EAAW,CACb,MAAMJ,QAAgB7R,KAAKyR,cAAcY,4BAA4BJ,SAC/DjS,KAAKyR,cAAcM,WAAWF,E,CAExC,G,CAEyB6R,cAAc3jB,G,sDAC/BC,KAAKyR,cAAciS,cACJ,QAAnB,EAAA3jB,EAAS0S,kBAAU,cAAWzS,KAAK2jB,6B,KCnHlC,MAAMmC,WAAwBrO,GACnC3X,YACSimB,EACAC,EACAC,EACGvO,EACVC,GAEA7W,MAAM4W,EAAWC,GANV,KAAAoO,KAAAA,EACA,KAAAC,aAAAA,EACA,KAAAC,YAAAA,EACG,KAAAvO,UAAAA,CAIZ,CAEAQ,gBAAgBC,GACd,MAAMnR,EAAMlG,MAAMoX,gBAAgBC,GAOlC,OALAnR,EAAIkS,WAAa,qBACjBlS,EAAI+e,KAAO/lB,KAAK+lB,KAChB/e,EAAIkf,cAAgBlmB,KAAKgmB,aACzBhf,EAAImf,aAAenmB,KAAKimB,YAEjBjf,CACT,E,2SCFK,MAAMof,WAAyBjF,GAUpCrhB,YACE2R,EACAnG,EACA8V,EACAC,EACArC,EACAsC,EACAC,EACAhW,EACAiW,EACQ6E,EACAb,EACAc,EACA7f,GAER3F,MACE2Q,EACAnG,EACA8V,EACAC,EACArC,EACAsC,EACAC,EACAhW,EACAiW,GAdM,KAAA6E,oBAAAA,EACA,KAAAb,yBAAAA,EACA,KAAAc,qBAAAA,EACA,KAAA7f,YAAAA,CAaV,CAEM4d,MAAMC,G,0CACVtkB,KAAKmM,MAAQmY,EAAYnY,MACzBnM,KAAK2hB,aAAe,IAAImE,GACtBxB,EAAYyB,KACZzB,EAAY0B,aACZ1B,EAAYiC,kBACNvmB,KAAKqiB,eAAeiC,EAAY5M,iBAChC1X,KAAKmiB,sBAGb,MAAOqE,SAAuBxmB,KAAK6hB,aAKnC,OAHA7hB,KAAK6L,MAAQ2a,EAAc3a,MAC3B7L,KAAK+jB,wBAA0ByC,EAAczC,wBAEtCyC,CACT,G,CAEyBlU,aAAaqQ,G,0CAGpC,MAAM8D,EAAkC,MAArB9D,EAAc7R,IAEI,MAAjC6R,EAAclI,kBACXgM,QAGGzmB,KAAKqmB,oBAAoBK,gCAAgC/D,EAAe3iB,KAAKmM,aAF7EnM,KAAKqmB,oBAAoBM,oBAAoBhE,EAAclI,iBAKvE,G,CAIyB1I,WAAW4Q,G,gDAClC,MAAMiE,EAA4BjE,EAAc7R,IAM5C8V,UAEI5mB,KAAKyR,cAAcuT,6BAA6B4B,IAGxD,MAAM9F,EAAwB6B,aAAa,EAAbA,EAAe7B,sBAG7C,GAAIA,aAAqB,EAArBA,EAAuBjD,oBAAqB,OACxC7d,KAAK6mB,uDAEc7mB,KAAKyR,cAAcqV,sBAIpC9mB,KAAK+mB,2BAA2BpE,G,MAIX,MAA7BiE,IACCjE,EAAclI,kBAA4D,QAAzC,EAAAqG,aAAqB,EAArBA,EAAuBhD,0BAAkB,eAAErD,0BAGvEza,KAAK4lB,6B,IAODiB,gD,0CAEZ,MAAMG,QAA6BhnB,KAAKuL,aAAa0X,sBAErD,IAAK+D,EACH,OAIF,IAAIC,EAEJ,IACEA,QAA6BjnB,KAAKsL,WAAW4b,eAAeF,EAAqB9hB,G,CACjF,MAAO4e,GAOP,YANIA,aAAiB1Q,IAAiB0Q,EAAMjQ,aAAerE,EAAe2X,iBAElEnnB,KAAKuL,aAAa6b,oBAAoB,O,EAO5CH,aAAoB,EAApBA,EAAsBI,mBAGpBJ,EAAqB7U,yBACjBpS,KAAKsmB,qBAAqBtU,6CAC9BiV,EACAD,EAAqBvU,kBAKjBzS,KAAKsmB,qBAAqB5U,uCAC9BuV,EACAD,EAAqBvU,mBAIfzS,KAAKyR,cAAcqV,sBAGrB9mB,KAAKwlB,yBAAyBK,8BAI9B7lB,KAAKuL,aAAa6b,oBAAoB,MAE5CpnB,KAAKgf,qBAAqBsI,UAAU,UAAW,KAAMtnB,KAAKyG,YAAY5F,EAAE,mBAG9E,G,CAEckmB,2BAA2BpE,G,gDACvC,MAAM9E,EAAyD,QAAnC,EAAA8E,EAAc7B,6BAAqB,eAAEjD,oBAE3Db,QAAkBhd,KAAKwlB,yBAAyBzC,eAChDwE,EAAsB1J,aAAmB,EAAnBA,EAAqBnE,oBAC3C8N,EAAa3J,aAAmB,EAAnBA,EAAqB6B,iBAExC,IAAK1C,IAAcuK,IAAwBC,EACzC,OAGF,MAAM3V,QAAgB7R,KAAKwlB,yBAAyBiC,4BAClDF,EACAC,EACAxK,GAGEnL,UACI7R,KAAKyR,cAAcM,WAAWF,G,IAI1B+T,6B,0CACZ,MAAM3T,QAAkBjS,KAAKyR,cAAcwT,eAE3C,IAAKhT,EACH,MAAM,IAAI7R,MAAM,wBAGlB,MAAMyR,QAAgB7R,KAAKyR,cAAcY,4BAA4BJ,SAE/DjS,KAAKyR,cAAcM,WAAWF,EACtC,G,CAEyB6R,cAAcf,G,gDACG,MAArBA,EAAc7R,YAGzB9Q,KAAKyR,cAAciS,cACC,QAAxB,EAAAf,EAAclQ,kBAAU,cAAWzS,KAAK2jB,8B,KC5NzC,MAAM+D,WAA4BjQ,GACvC3X,YACSqY,EACAwP,EACGjQ,EACVC,GAEA7W,MAAM4W,EAAWC,GALV,KAAAQ,SAAAA,EACA,KAAAwP,aAAAA,EACG,KAAAjQ,UAAAA,CAIZ,CAEAQ,kBACE,MAAMlR,EAAMlG,MAAMoX,gBAAgBlY,KAAKmY,UAMvC,OAJAnR,EAAIoR,MAAQpY,KAAKmY,SAAS3S,WAAW,gBAAkB,mBAAqB,MAC5EwB,EAAIkS,WAAa,qBACjBlS,EAAI4gB,cAAgB5nB,KAAK2nB,aAElB3gB,CACT,E,2SCLK,MAAM6gB,WAA6B1G,GAGxCrhB,YACE2R,EACAnG,EACA8V,EACAC,EACArC,EACAsC,EACAC,EACAhW,EACAiW,EACQsG,EACAzB,GAERvlB,MACE2Q,EACAnG,EACA8V,EACAC,EACArC,EACAsC,EACAC,EACAhW,EACAiW,GAZM,KAAAsG,mBAAAA,EACA,KAAAzB,oBAAAA,CAaV,CAEehC,MAAMC,G,0CACnBtkB,KAAK2hB,aAAe,IAAI+F,GACtBpD,EAAYnM,SACZmM,EAAYqD,mBACN3nB,KAAKqiB,uBACLriB,KAAKmiB,sBAGb,MAAOP,SAAoB5hB,KAAK6hB,aAChC,OAAOD,CACT,G,CAEyBtP,aAAavS,G,0CACpC,GAAIA,EAAS4gB,mBAAoB,CAC/B,MAAMlG,EAAkBza,KAAK8nB,mBAAmBC,2BAC1C/nB,KAAKqmB,oBAAoBM,oBAAoBlM,E,CAEvD,G,CAEyB1I,WAAWhS,G,0CAGlC,SAFMC,KAAKyR,cAAcuT,6BAA6BjlB,EAAS+Q,KAE3D/Q,EAAS4gB,mBAAoB,CAC/B,MAAM1O,QAAkBjS,KAAKyR,cAAcwT,eAC3C,GAAIhT,EAAW,CACb,MAAMJ,QAAgB7R,KAAKyR,cAAcY,4BAA4BJ,SAC/DjS,KAAKyR,cAAcM,WAAWF,E,EAG1C,G,CAEyB6R,cAAc3jB,G,sDAC/BC,KAAKyR,cAAciS,cACJ,QAAnB,EAAA3jB,EAAS0S,kBAAU,cAAWzS,KAAK2jB,6B,IAIvBjB,uBAAuBC,G,4IAC/B,EAAMD,uBAAsB,UAACC,SAC7B3iB,KAAKuL,aAAayc,kBAAkBhoB,KAAK2hB,aAAaxJ,gBACtDnY,KAAKuL,aAAa0c,sBAAsBjoB,KAAK2hB,aAAagG,aAClE,G,ECvFK,MAAMO,GACXpoB,YACWgR,EACAsB,EACAmG,EACA8O,GAHA,KAAAvW,IAAAA,EACA,KAAAsB,mBAAAA,EACA,KAAAmG,iBAAAA,EACA,KAAA8O,gBAAAA,CACR,E,2SCwCE,MAAMc,GACPtc,YACF,OACE7L,KAAKooB,yBAAyBpE,IAC9BhkB,KAAKooB,yBAAyB/C,IAC9BrlB,KAAKooB,yBAAyBhC,GAEvBpmB,KAAKooB,cAAcvc,MAGrB,IACT,CAEIuG,yBACF,OAAOpS,KAAKooB,yBAAyBpE,GACjChkB,KAAKooB,cAAchW,mBACnB,IACN,CAEI4F,iBACF,OAAOhY,KAAKooB,yBAAyB/C,GACjCrlB,KAAKooB,cAAcpQ,WACnB,IACN,CAEIuN,oBACF,OAAOvlB,KAAKooB,yBAAyB/C,GACjCrlB,KAAKooB,cAAc7C,cACnB,IACN,CAEIxB,8BACF,OAAO/jB,KAAKooB,yBAAyBhC,GACjCpmB,KAAKooB,cAAcrE,wBACnB,IACN,CAWAjkB,YACY2R,EACAnG,EACA8V,EACAC,EACArC,EACAsC,EACAC,EACA8E,EACAyB,EACAvc,EACAiW,EACA/a,EACA6O,EACA2O,EACA5Y,EACAma,EACAc,GAhBA,KAAA7U,cAAAA,EACA,KAAAnG,WAAAA,EACA,KAAA8V,aAAAA,EACA,KAAAC,aAAAA,EACA,KAAArC,qBAAAA,EACA,KAAAsC,iBAAAA,EACA,KAAAC,WAAAA,EACA,KAAA8E,oBAAAA,EACA,KAAAyB,mBAAAA,EACA,KAAAvc,aAAAA,EACA,KAAAiW,iBAAAA,EACA,KAAA/a,YAAAA,EACA,KAAA6O,eAAAA,EACA,KAAA2O,wBAAAA,EACA,KAAA5Y,cAAAA,EACA,KAAAma,yBAAAA,EACA,KAAAc,qBAAAA,EAnBJ,KAAA+B,wBAA0B,IAAIC,GAAA,CAoBnC,CAEGjE,MACJC,G,0CAQA,IAAIiE,EAMJ,OARAvoB,KAAKwoB,aAQGlE,EAAY7Z,MAClB,KAAKyI,GAAmBuV,SACtBF,EAAW,IAAIvE,GACbhkB,KAAKyR,cACLzR,KAAKsL,WACLtL,KAAKohB,aACLphB,KAAKqhB,aACLrhB,KAAKgf,qBACLhf,KAAKshB,iBACLthB,KAAKuhB,WACLvhB,KAAKuL,aACLvL,KAAKwhB,iBACLxhB,KAAKikB,wBACLjkB,KAAKqL,cACLrL,MAEF,MACF,KAAKkT,GAAmBwV,IACtBH,EAAW,IAAInC,GACbpmB,KAAKyR,cACLzR,KAAKsL,WACLtL,KAAKohB,aACLphB,KAAKqhB,aACLrhB,KAAKgf,qBACLhf,KAAKshB,iBACLthB,KAAKuhB,WACLvhB,KAAKuL,aACLvL,KAAKwhB,iBACLxhB,KAAKqmB,oBACLrmB,KAAKwlB,yBACLxlB,KAAKsmB,qBACLtmB,KAAKyG,aAEP,MACF,KAAKyM,GAAmByV,QACtBJ,EAAW,IAAIV,GACb7nB,KAAKyR,cACLzR,KAAKsL,WACLtL,KAAKohB,aACLphB,KAAKqhB,aACLrhB,KAAKgf,qBACLhf,KAAKshB,iBACLthB,KAAKuhB,WACLvhB,KAAKuL,aACLvL,KAAKwhB,iBACLxhB,KAAK8nB,mBACL9nB,KAAKqmB,qBAEP,MACF,KAAKnT,GAAmB0V,aACtBL,EAAW,IAAIlD,GACbrlB,KAAKyR,cACLzR,KAAKsL,WACLtL,KAAKohB,aACLphB,KAAKqhB,aACLrhB,KAAKgf,qBACLhf,KAAKshB,iBACLthB,KAAKuhB,WACLvhB,KAAKuL,aACLvL,KAAKwhB,iBACLxhB,KAAKwlB,0BAKX,MAAMjC,QAAegF,EAASlE,MAAMC,GAKpC,OAHIf,aAAM,EAANA,EAAQ1E,oBACV7e,KAAK6oB,UAAUN,GAEVhF,CACT,G,CAEM7B,eACJhK,EACAuB,G,0CAEA,GAA0B,MAAtBjZ,KAAKooB,cACP,MAAM,IAAIhoB,MAAMJ,KAAKyG,YAAY5F,EAAE,mBAGrC,IACE,MAAM0iB,QAAevjB,KAAKooB,cAAc1G,eAAehK,EAAWuB,GAMlE,OAHKsK,EAAO1E,mBAAsB0E,EAAO3E,iBACvC5e,KAAKwoB,aAEAjF,C,CACP,MAAOhb,GAKP,MAHMA,aAAa6K,IACjBpT,KAAKwoB,aAEDjgB,C,CAEV,G,CAEAugB,OAAOC,GACLA,IACA/oB,KAAKshB,iBAAiB7V,KAAK,YAC7B,CAEAud,wBACE,OAAOhpB,KAAKooB,yBAAyBP,EACvC,CAEAoB,iBACE,OAAOjpB,KAAKooB,yBAAyBhC,EACvC,CAEA8C,sBACE,OAAOlpB,KAAKooB,yBAAyBpE,EACvC,CAEAmF,0BACE,OAAOnpB,KAAKooB,yBAAyB/C,EACvC,CAEM+D,cAAcnd,G,0CAGlB,WAD8BjM,KAAKuL,aAAa8d,mBAAmB,CAAEpd,OAAQA,KAE3E,OAAOgH,GAAqBqW,UAI9B,WAAYtpB,KAAKyR,cAAc8X,mBAAmBtd,IAAU,CAO1D,UAHSjM,KAAKyR,cAAc+X,iBAAiBzZ,EAAiB0Z,KAAMxd,aAC1DjM,KAAKuL,aAAame,oBAAoB,CAAEzd,OAAQA,KAE3C,CAEb,MAAM4F,QAAgB7R,KAAKyR,cAAckY,sBACvC5Z,EAAiB0Z,KACjBxd,SAEIjM,KAAKyR,cAAcM,WAAWF,EAAS5F,E,EAMjD,aAD6BjM,KAAKyR,cAAc8X,mBAAmBtd,IAK5DgH,GAAqB2W,SAHnB3W,GAAqB4W,MAIhC,G,CAEMrF,gBAAgBD,EAAwB1Y,G,0CAC5CA,EAAQA,EAAMtG,OAAO9E,cACrB,IAAI8f,EAAe,KACfuJ,EAAuB,KAC3B,IACE,MAAMC,QAAyB/pB,KAAKsL,WAAW0e,aAAa,IAAI7W,GAAgBtH,IACxD,MAApBke,IACFxJ,EAAMwJ,EAAiBxJ,IACvBuJ,EAAY,IAAIpa,EACdqa,EAAiBvJ,cACjBuJ,EAAiBtJ,UACjBsJ,EAAiBrJ,gB,CAGrB,MAAOnY,GACP,GAAS,MAALA,GAA8B,MAAjBA,EAAEsL,WACjB,MAAMtL,C,CAGV,aAAavI,KAAKyR,cAAcwY,cAAc1F,EAAgB1Y,EAAO0U,EAAKuJ,EAC5E,G,CAEMI,6BAA6BC,G,0CACjCnqB,KAAKqoB,wBAAwB+B,KAAKD,EAAajlB,GACjD,G,CAEAmlB,0BACE,OAAOrqB,KAAKqoB,wBAAwBiC,cACtC,CAEMC,kBACJrlB,EACA4L,EACAuW,G,0CAEA,MAAMmD,EAAS,EAAM5nB,eAAekO,GAE9BmB,QAAkBjS,KAAKyR,cAAcwT,eAC3C,IAAIwF,EACAC,EAAyB,KAE7B,GAAIzY,EAAW,CACbwY,EAAexY,EAAUjB,OAIzB,MAAMkB,QAAsBlS,KAAKuL,aAAaof,aACzB,MAAjBzY,IACFwY,QAA+B1qB,KAAKyR,cAAcmZ,WAChD,EAAM/lB,gBAAgBqN,GACtBsY,G,KAGC,CAELC,SADsBzqB,KAAKyR,cAAcoZ,cAClB/Z,G,CAGzB,MAAMga,QAAqB9qB,KAAKyR,cAAcmZ,WAAWH,EAAcD,GAEjE9d,EAAU,IAAIwb,GAClB4C,EAAahW,gBACb4V,aAAsB,EAAtBA,EAAwB5V,sBAClB9U,KAAKqhB,aAAae,WACxBiF,GAEF,aAAarnB,KAAKsL,WAAWyf,eAAe7lB,EAAIwH,EAClD,G,CAEQmc,UACNN,GAMAvoB,KAAKooB,cAAgBG,EACrBvoB,KAAKgrB,qBACP,CAEQxC,aACNxoB,KAAKooB,cAAgB,KACrBpoB,KAAKirB,qBACP,CAEQD,sBACNhrB,KAAKirB,sBACLjrB,KAAKkrB,eAAiB9hB,YAAW,IAAMpJ,KAAKwoB,cAnUnB,KAoU3B,CAEQyC,sBACqB,MAAvBjrB,KAAKkrB,gBACPC,aAAanrB,KAAKkrB,eAEtB,ECtXK,MAAME,ICEN,MAAMC,WAAkCD,IAKxC,MAAME,I,2SCgBN,MAAMC,GACXzrB,YACU0rB,EACA/Z,EACA6D,EACA/J,EACA8V,EACAoK,EACAhlB,EACAuY,GAPA,KAAAwM,sBAAAA,EACA,KAAA/Z,cAAAA,EACA,KAAA6D,eAAAA,EACA,KAAA/J,aAAAA,EACA,KAAA8V,aAAAA,EACA,KAAAoK,kBAAAA,EACA,KAAAhlB,YAAAA,EACA,KAAAuY,qBAAAA,CACP,CAMG0M,uB,0CACJ,aAAa1rB,KAAKuL,aAAamgB,sBACjC,G,CAEMC,qBAAqBC,G,gDACnB5rB,KAAKuL,aAAaogB,qBAAqBC,EAC/C,G,CAEM/F,wB,iDAC4B7lB,KAAK0rB,gCAE7B1rB,KAAK6rB,oBAEL7rB,KAAK2rB,sBAAqB,GAEpC,G,CAEME,c,0CAEJ,MAAMha,QAAyB7R,KAAKyR,cAAcoZ,aAGlD,IAAKhZ,EACH,MAAM,IAAIzR,MAAM,gCAIlB,MAAM4c,QAAkBhd,KAAK8rB,iBAGtBC,EAAiBC,SAA0BhsB,KAAKwrB,sBAAsBS,mBAC3E,OAIAC,EACAC,EACAC,SACQljB,QAAQ4N,IAAI,CAEpB9W,KAAKyR,cAAcmZ,WAAW/Y,EAAQf,IAAKib,GAG3C/rB,KAAKsV,eAAe+W,QAAQN,EAAiBla,GAG7C7R,KAAKsV,eAAe+W,QAAQL,EAAkBhP,KAI1CzE,QAAyBvY,KAAKqhB,aAAae,WAC3CkK,QAAuBtsB,KAAKyrB,kBAAkBc,wBAClDhU,EACA2T,EAAgCpX,gBAChCqX,EAAgCrX,gBAChCsX,EAAmCtX,iBAQrC,aAJM9U,KAAKwsB,aAAaxP,GAExBhd,KAAKgf,qBAAqBsI,UAAU,UAAW,KAAMtnB,KAAKyG,YAAY5F,EAAE,kBAEjEyrB,CACT,G,CAEMG,mBAAmBC,EAAqBta,G,0CAE5C,GAAwB,aADOpS,KAAK+iB,gBAIlC,OAIF,MAAM4J,QAAmB3sB,KAAKuL,aAAasf,aAErCtS,QAAyBvY,KAAKqhB,aAAae,WAC3CwK,EAA4B,IAAIxB,GACtCwB,EAA0Bxa,mBAAqBA,EAG/C,MAAMya,QAA0B7sB,KAAKyrB,kBAAkBqB,cACrDvU,EACAqU,GAIIG,QAAiC/sB,KAAKsV,eAAe0X,eACzDH,EAAkBI,mBAClBN,GAIIO,QAA4BltB,KAAKyR,cAAcmZ,WACnD8B,EAAW5b,IACXic,GAIII,QAAiCntB,KAAKsV,eAAe+W,QACzDU,EACAL,GAGIU,EAA6B,IAAI9B,GACvC8B,EAA2B1N,iBAAmBwN,EAAoBpY,gBAClEsY,EAA2BH,mBAAqBE,EAAyBrY,gBAKzE,MAAMuY,EAAe,IAAIhC,GACzBgC,EAAajb,mBAAqBA,EAClCib,EAAaC,cAAgBF,EAC7BC,EAAaE,aAAe,SAEtBvtB,KAAKyrB,kBAAkB+B,YAAYH,EAC3C,G,CAEMtK,e,0CACJ,aAAa/iB,KAAKuL,aAAawX,cACjC,G,CAEcyJ,aAAaxP,G,gDACnBhd,KAAKuL,aAAaihB,aAAaxP,EACvC,G,CAEc8O,gB,0CAEZ,MAAM2B,QAAiCztB,KAAKwrB,sBAAsBiC,YAAY,IAG9E,OAFkB,IAAI5c,GAAmB4c,EAG3C,G,CAEMhG,4BACJiG,EACAhO,EACA1C,G,0CAKA,GAFAA,IAAAA,QAAoBhd,KAAK+iB,iBAEpB/F,EAEH,OAAO,KAGT,IAEE,MAAMgP,QAAyBhsB,KAAKsV,eAAe0X,eACjDU,EACA1Q,GAIInL,QAAgB7R,KAAKyR,cAAckB,WACvC+M,EAAiB5K,gBACjBkX,GAGF,OAAO,IAAInb,GAAmBgB,E,CAC9B,MAAOtJ,GAIP,aAFMvI,KAAKwsB,aAAa,MAEjB,I,CAEX,G,CAEMmB,sB,0CACJ,MAAMxP,QAA0Bne,KAAKuL,aAAaqiB,8BAClD,OAAiD,OAA1CzP,aAAiB,EAAjBA,EAAmBN,oBAC5B,G,EClNK,MAAMgQ,WAAuB,EAQlC/tB,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAKiM,OAASjM,KAAKC,oBAAoB,UACvCD,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAKwY,WAAaxY,KAAKC,oBAAoB,cAC3CD,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAK8tB,aAAe9tB,KAAKC,oBAAoB,gBAC7CD,KAAK+tB,aAAe/tB,KAAKC,oBAAoB,eAC/C,ECpBK,MAAM+tB,GACXluB,YACS4f,EACAuN,EACAvT,GAFA,KAAAgG,iBAAAA,EACA,KAAAuN,mBAAAA,EACA,KAAAvT,oBAAAA,CACN,ECCE,MAAMuU,WAAgC,EAC3CnuB,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAKwY,WAAaxY,KAAKC,oBAAoB,cAC3CD,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAK8tB,aAAe,IAAIlkB,KAAK5J,KAAKC,oBAAoB,iBAClDF,EAAS2f,mBACX1f,KAAK0f,iBAAmB,IAAIrL,GAAUrU,KAAKC,oBAAoB,sBAE7DF,EAASktB,qBACXjtB,KAAKitB,mBAAqB,IAAI5Y,GAAUrU,KAAKC,oBAAoB,uBAErE,E,2SCVK,MAAMiuB,GACXpuB,YAAoBwL,GAAA,KAAAA,WAAAA,CAAyB,CAEvC6iB,eAAetiB,EAAe0M,G,0CAalC,aAZgBvY,KAAKsL,WAAWG,KAC9B,MACA,uBACA,MACA,GACA,EACA,MACCoM,IACCA,EAAQrR,IAAI,sBAAuB+R,GACnCV,EAAQrR,IAAI,kBAAmB,EAAM6S,iBAAiBxN,GAAO,GAInE,G,CAMMuiB,sBAAsB7V,G,0CAC1B,MAAMxT,QAAU/E,KAAKsL,WAAWG,KAC9B,MACA,uBAAuB8M,IACvB,MACA,GACA,GAEF,OAAO,IAAIsV,GAAe9oB,EAC5B,G,CAEMspB,a,0CACJ,MAAMtpB,QAAU/E,KAAKsL,WAAWG,KAAK,MAAO,WAAY,MAAM,GAAM,EAAM,MAC1E,OAAO,IAAI7K,EAAamE,EAAG8oB,GAC7B,G,CAEMtB,wBACJhU,EACA2T,EACAC,EACAC,G,0CAEA,MAAM1f,EAAU,IAAIshB,GAClB9B,EACAC,EACAC,GAGI7I,QAAevjB,KAAKsL,WAAWG,KACnC,MACA,YAAY8M,SACZ7L,GACA,GACA,GAGF,OAAO,IAAImhB,GAAetK,EAC5B,G,CAEMiK,YAAYc,G,gDACVtuB,KAAKsL,WAAWG,KACpB,OACA,wBACA6iB,GACA,GACA,EAEJ,G,CAEMxB,cACJvU,EACAqU,G,0CAEA,MAAMrJ,QAAevjB,KAAKsL,WAAWG,KACnC,OACA,YAAY8M,kBACZqU,GACA,GACA,GAEF,OAAO,IAAIqB,GAAwB1K,EACrC,G,EC9FK,MAAMgL,GAGXzuB,YAAYgR,GACV9Q,KAAK8Q,IAAMA,CACb,ECDK,MAAM0d,GASX1uB,YACEgR,EACAyP,EACAuJ,EACA2E,EACApnB,GAEArH,KAAK8Q,IAAMA,EACX9Q,KAAKugB,IAAMA,EACXvgB,KAAKwgB,cAAgBsJ,EAAUna,WAC/B3P,KAAKygB,UAAYqJ,EAAUla,OAC3B5P,KAAK0gB,eAAiBoJ,EAAUja,YAChC7P,KAAKyuB,cAAgBA,EACrBzuB,KAAKqH,KAAOA,CACd,E,2SCVK,MAAMqnB,GACX5uB,YACUyL,EACAkG,EACAnG,EACA8V,EACAG,EACAoN,EACAnD,EACAoD,GAPA,KAAArjB,aAAAA,EACA,KAAAkG,cAAAA,EACA,KAAAnG,WAAAA,EACA,KAAA8V,aAAAA,EACA,KAAAG,WAAAA,EACA,KAAAoN,oBAAAA,EACA,KAAAnD,sBAAAA,EACA,KAAAoD,eAAAA,CACP,CAEHC,oBAAoBC,GAClB,OAAO9uB,KAAKuL,aAAasjB,oBAAoBC,EAC/C,CAEMC,sB,0CACJ,aAAa/uB,KAAKuL,aAAawjB,qBACjC,G,CAEMC,qB,0CACJ,MAAMC,QAAyBjvB,KAAKohB,aAAa8N,gBAC3CC,EAAmE,aAAnCnvB,KAAKovB,2BACrCC,UAAqCrvB,KAAK+uB,uBAEhD,OAAOE,GAAoBE,GAA0BE,CACvD,G,CAEMC,c,0CACJ,MAAMC,QAAqBvvB,KAAKovB,0BAC1Bnd,QAAkBjS,KAAKyR,cAAcwT,eACrCuK,EAAsB,IAAIjB,GAA2Btc,EAAUd,WAErE,UACQnR,KAAKsL,WAAWmkB,0BACpBF,EAAa9U,gBACb+U,E,CAEF,MAAOjnB,GACPvI,KAAK0vB,wBAAwBnnB,E,OAGzBvI,KAAKsL,WAAWqkB,2BACxB,G,CAGMhJ,oBAAoB/gB,G,0CACxB,IACE,MAAMgqB,QAA0B5vB,KAAKsL,WAAWukB,6BAA6BjqB,GACvEkqB,EAAS,EAAMltB,eAAegtB,EAAkB9e,KAChDmB,EAAY,IAAIpB,GAAmBif,SACnC9vB,KAAKyR,cAAca,aAAaL,E,CACtC,MAAO1J,GACPvI,KAAK0vB,wBAAwBnnB,E,CAEjC,G,CAEM6mB,0B,0CAEJ,aADmBpvB,KAAK2uB,oBAAoB9gB,UAChCkiB,MACTC,GACCA,EAAEC,qBACFD,EAAEvlB,OAASM,EAAqBmlB,OAChCF,EAAEvlB,OAASM,EAAqBolB,QAC/BH,EAAEI,gBAET,G,CAEM1J,gCAAgC/D,EAAsCxW,G,0CAC1E,MAAM,IAAEoU,EAAG,cAAEC,EAAa,UAAEC,EAAS,eAAEC,EAAc,gBAAEjG,GAAoBkI,EACrEvJ,QAAiBpZ,KAAKwrB,sBAAsBiC,YAAY,IACxD3D,EAAY,IAAIpa,EAAU8Q,EAAeC,EAAWC,GAEpDzO,QAAkBjS,KAAKyR,cAAcwY,cACzC,EAAMrmB,gBAAgBwV,SAChBpZ,KAAKohB,aAAaiP,WACxB9P,EACAuJ,GAEI0F,EAAsB,IAAIjB,GAA2Btc,EAAUd,iBAC/DnR,KAAKyR,cAAca,aAAaL,GAEtC,MAAMJ,QAAgB7R,KAAKyR,cAAc6e,YAAYre,SAC/CjS,KAAKyR,cAAcM,WAAWF,EAAQ,UACtC7R,KAAKyR,cAAcuT,6BAA6BnT,EAAQ,GAAGiD,iBAEjE,MAAO0V,EAAQ+F,SAAiBvwB,KAAKyR,cAAcmS,cAEnD,UACQ5jB,KAAKsL,WAAWmkB,0BAA0BhV,EAAiB+U,E,CACjE,MAAOjnB,GACPvI,KAAK0vB,wBAAwBnnB,E,CAG/B,MAAMlB,EAAO,IAAImS,GAAYgR,EAAQ+F,EAAQzb,iBACvC0b,EAAqB,IAAIhC,GAC7B3c,EAAQ,GAAGiD,gBACXyL,EACAuJ,EACA3d,EACA9E,SAEIrH,KAAKsL,WAAWmlB,uBAAuBD,EAC/C,G,CAEME,0BAA0B7jB,G,gDACxB7M,KAAKuL,aAAaolB,gCAAgC9jB,EAC1D,G,CAEM+jB,4B,0CACJ,aAAa5wB,KAAKuL,aAAaslB,iCACjC,G,CAEMC,+B,gDACE9wB,KAAKuL,aAAaolB,gCAAgC,KAC1D,G,CAEMI,Q,gDACE/wB,KAAK8wB,8BACb,G,CAEQpB,wBAAwBnnB,GAK9B,MAJAvI,KAAKuhB,WAAWuC,MAAMvb,GACK,MAAvBvI,KAAK4uB,gBACP5uB,KAAK4uB,gBAAe,GAEhB,IAAIxuB,MAAM,sBAClB,E,2SC3IK,MAAM4wB,GACX3vB,mBAAmBuK,GACjB,GAAa,MAATA,EACF,MAAM,IAAIxL,MAAM,uBAGlB,MAAMmG,EAAQqF,EAAMxF,MAAM,KAC1B,GAAqB,IAAjBG,EAAM7F,OACR,MAAM,IAAIN,MAAM,yBAGlB,MAAM6wB,EAAU,EAAMC,iBAAiB3qB,EAAM,IAC7C,GAAe,MAAX0qB,EACF,MAAM,IAAI7wB,MAAM,2BAIlB,OADqB+wB,KAAKC,MAAMH,EAElC,CAEAnxB,YAAoByL,GAAA,KAAAA,aAAAA,CAA6B,CAE3C8lB,UACJtR,EACAI,EACAmR,G,gDAEMtxB,KAAKuxB,SAASxR,SACd/f,KAAKwxB,gBAAgBrR,GACC,MAAxBmR,UACItxB,KAAKyxB,YAAYH,EAAqB,UACtCtxB,KAAK0xB,gBAAgBJ,EAAqB,IAEpD,G,CAEMG,YAAYtZ,G,0CAChB,aAAanY,KAAKuL,aAAayc,kBAAkB7P,EACnD,G,CAEMwZ,c,0CACJ,aAAa3xB,KAAKuL,aAAaqmB,mBACjC,G,CAEMF,gBAAgB/J,G,0CACpB,aAAa3nB,KAAKuL,aAAa0c,sBAAsBN,EACvD,G,CAEMkK,kB,0CACJ,aAAa7xB,KAAKuL,aAAaumB,uBACjC,G,CAEMP,SAAS3lB,G,gDACP5L,KAAKuL,aAAawmB,eAAenmB,EACzC,G,CAEMomB,W,0CACJ,aAAahyB,KAAKuL,aAAa0mB,gBACjC,G,CAEMT,gBAAgBrR,G,0CACpB,aAAangB,KAAKuL,aAAaimB,gBAAgBrR,EACjD,G,CAEM+R,kB,0CACJ,aAAalyB,KAAKuL,aAAa2mB,iBACjC,G,CAEMzO,kBAAkBd,G,0CACtB,aAAa3iB,KAAKuL,aAAakY,kBAAkBd,EAAc/J,eACjE,G,CAEM4J,oB,0CACJ,aAAaxiB,KAAKuL,aAAaiX,mBACjC,G,CAEM2P,sB,0CACJ,aAAanyB,KAAKuL,aAAakY,kBAAkB,KACnD,G,CAEM2O,WAAWnmB,G,gDACTjM,KAAKuL,aAAawmB,eAAe,KAAM,CAAE9lB,OAAQA,UACjDjM,KAAKuL,aAAaimB,gBAAgB,KAAM,CAAEvlB,OAAQA,UAClDjM,KAAKuL,aAAayc,kBAAkB,KAAM,CAAE/b,OAAQA,UACpDjM,KAAKuL,aAAa0c,sBAAsB,KAAM,CAAEhc,OAAQA,GAChE,G,CAKM4W,YAAYjX,G,0CAGhB,GAAa,OAFbA,EAAQA,QAAAA,QAAgB5L,KAAKuL,aAAa0mB,kBAGxC,MAAM,IAAI7xB,MAAM,oBAGlB,OAAO4wB,GAAanO,YAAYjX,EAClC,G,CAEMymB,yB,0CACJ,MAAMpB,QAAgBjxB,KAAK6iB,cAC3B,QAA2B,IAAhBoO,EAAQqB,IACjB,OAAO,KAGT,MAAMC,EAAI,IAAI3oB,KAAK,GAEnB,OADA2oB,EAAEC,cAAcvB,EAAQqB,KACjBC,CACT,G,CAEME,sBAAsBC,EAAgB,G,0CAC1C,MAAMH,QAAUvyB,KAAKqyB,yBACrB,GAAS,MAALE,EACF,OAAO,EAGT,MAAMI,EAAcJ,EAAEK,YAAa,IAAIhpB,MAAOgpB,UAA4B,IAAhBF,GAC1D,OAAO1tB,KAAK6tB,MAAMF,EAAc,IAClC,G,CAEMG,kBAAkBC,EAAU,G,0CAEhC,aADyB/yB,KAAKyyB,yBACV,GAAKM,CAC3B,G,CAEM3mB,Y,0CACJ,MAAM6kB,QAAgBjxB,KAAK6iB,cAC3B,QAA2B,IAAhBoO,EAAQnO,IACjB,MAAM,IAAI1iB,MAAM,oBAGlB,OAAO6wB,EAAQnO,GACjB,G,CAEMuN,W,0CACJ,MAAMY,QAAgBjxB,KAAK6iB,cAC3B,QAA6B,IAAlBoO,EAAQplB,MACjB,MAAM,IAAIzL,MAAM,kBAGlB,OAAO6wB,EAAQplB,KACjB,G,CAEMmnB,mB,0CACJ,MAAM/B,QAAgBjxB,KAAK6iB,cAC3B,QAAsC,IAA3BoO,EAAQgC,eACjB,MAAM,IAAI7yB,MAAM,+BAGlB,OAAO6wB,EAAQgC,cACjB,G,CAEMC,U,0CACJ,MAAMjC,QAAgBjxB,KAAK6iB,cAC3B,YAA4B,IAAjBoO,EAAQvvB,KACV,KAGFuvB,EAAQvvB,IACjB,G,CAEMyxB,Y,0CACJ,MAAMlC,QAAgBjxB,KAAK6iB,cAC3B,QAA2B,IAAhBoO,EAAQmC,IACjB,MAAM,IAAIhzB,MAAM,mBAGlB,OAAO6wB,EAAQmC,GACjB,G,CAEMlE,gB,0CACJ,MAAM+B,QAAgBjxB,KAAK6iB,cAE3B,OAAO1e,MAAMkvB,QAAQpC,EAAQqC,MAAQrC,EAAQqC,IAAIC,SAAS,WAC5D,G,EC1KK,MAAMC,GACX,CACE,CAAC1d,GAAsB2d,eAAgB,CACrChpB,KAAMqL,GAAsB2d,cAC5B/xB,KAAM,KACNgyB,YAAa,KACbC,SAAU,EACVC,KAAM,EACNxQ,SAAS,GAEX,CAACtN,GAAsB+d,SAAU,CAC/BppB,KAAMqL,GAAsB+d,QAC5BnyB,KAAM,KACNgyB,YAAa,KACbC,SAAU,EACVC,KAAM,EACNxQ,SAAS,GAEX,CAACtN,GAAsBge,KAAM,CAC3BrpB,KAAMqL,GAAsBge,IAC5BpyB,KAAM,MACNgyB,YAAa,KACbC,SAAU,EACVC,KAAM,EACNxQ,SAAS,GAEX,CAACtN,GAAsBie,iBAAkB,CACvCtpB,KAAMqL,GAAsBie,gBAC5BryB,KAAM,qBACNgyB,YAAa,KACbC,SAAU,GACVC,KAAM,EACNxQ,SAAS,GAEX,CAACtN,GAAsBke,OAAQ,CAC7BvpB,KAAMqL,GAAsBke,MAC5BtyB,KAAM,KACNgyB,YAAa,KACbC,SAAU,EACVC,KAAM,EACNxQ,SAAS,GAEX,CAACtN,GAAsBme,UAAW,CAChCxpB,KAAMqL,GAAsBme,SAC5BvyB,KAAM,KACNgyB,YAAa,KACbC,SAAU,EACVC,KAAM,EACNxQ,SAAS,IAIR,MAAM8Q,GAIXp0B,YACU2G,EACAuY,GADA,KAAAvY,YAAAA,EACA,KAAAuY,qBAAAA,EAJF,KAAAmV,8BAAuD,IAK5D,CAEH7pB,OACEkpB,GAAmB1d,GAAsBke,OAAOtyB,KAAO1B,KAAKyG,YAAY5F,EAAE,cAC1E2yB,GAAmB1d,GAAsBke,OAAON,YAAc1zB,KAAKyG,YAAY5F,EAAE,aAEjF2yB,GAAmB1d,GAAsB2d,eAAe/xB,KACtD1B,KAAKyG,YAAY5F,EAAE,yBACrB2yB,GAAmB1d,GAAsB2d,eAAeC,YACtD1zB,KAAKyG,YAAY5F,EAAE,wBAErB2yB,GAAmB1d,GAAsBge,KAAKJ,YAAc1zB,KAAKyG,YAAY5F,EAAE,WAE/E2yB,GAAmB1d,GAAsBie,iBAAiBryB,KACxD,QAAU1B,KAAKyG,YAAY5F,EAAE,gBAAkB,IACjD2yB,GAAmB1d,GAAsBie,iBAAiBL,YACxD1zB,KAAKyG,YAAY5F,EAAE,uBAErB2yB,GAAmB1d,GAAsBme,UAAUvyB,KAAO1B,KAAKyG,YAAY5F,EAAE,iBAC7E2yB,GAAmB1d,GAAsBme,UAAUP,YACjD1zB,KAAKyG,YAAY5F,EAAE,gBAErB2yB,GAAmB1d,GAAsB+d,SAASnyB,KAAO1B,KAAKyG,YAAY5F,EAAE,gBAC5E2yB,GAAmB1d,GAAsB+d,SAASH,YAChD1zB,KAAKyG,YAAY5F,EAAE,cACvB,CAEAuzB,sBAAsB1rB,GACpB,MAAMgF,EAAmB,GACzB,OAAmC,MAA/B1N,KAAKq0B,yBAKPr0B,KAAKq0B,uBAAuBC,IAAIxe,GAAsBie,kBACtD/zB,KAAKgf,qBAAqBuV,eAE1B7mB,EAAUI,KAAK0lB,GAAmB1d,GAAsBie,kBAGtD/zB,KAAKq0B,uBAAuBC,IAAIxe,GAAsB2d,gBACxD/lB,EAAUI,KAAK0lB,GAAmB1d,GAAsB2d,gBAGtDzzB,KAAKq0B,uBAAuBC,IAAIxe,GAAsB+d,UACxDnmB,EAAUI,KAAK0lB,GAAmB1d,GAAsB+d,UAIxD7zB,KAAKq0B,uBAAuBC,IAAIxe,GAAsBge,MACtD9zB,KAAKgf,qBAAqBuV,eAE1B7mB,EAAUI,KAAK0lB,GAAmB1d,GAAsBge,MAIxD9zB,KAAKq0B,uBAAuBC,IAAIxe,GAAsBme,WACtDj0B,KAAKgf,qBAAqBwV,iBAAiB9rB,IAE3CgF,EAAUI,KAAK0lB,GAAmB1d,GAAsBme,WAGtDj0B,KAAKq0B,uBAAuBC,IAAIxe,GAAsBke,QACxDtmB,EAAUI,KAAK0lB,GAAmB1d,GAAsBke,SAjCjDtmB,CAqCX,CAEA+mB,mBAAmBC,GACjB,GAAmC,MAA/B10B,KAAKq0B,uBACP,OAAO,KAGT,GACwC,MAAtCr0B,KAAKm0B,+BACLn0B,KAAKq0B,uBAAuBC,IAAIt0B,KAAKm0B,+BAErC,OAAOn0B,KAAKm0B,8BAGd,IAAIQ,EAAsC,KACtCC,GAAoB,EAaxB,OAZA50B,KAAKq0B,uBAAuBhuB,SAAQ,CAACwuB,EAAQpqB,KAC3C,MAAMkO,EAAY6a,GAA2B/oB,GAC7C,GAAgB,MAAZkO,GAAoBA,EAASgb,SAAWiB,EAAkB,CAC5D,GAAInqB,IAASqL,GAAsBme,WAAaS,EAC9C,OAGFC,EAAelqB,EACfmqB,EAAmBjc,EAASgb,Q,KAIzBgB,CACT,CAEAG,oBAAoBrqB,GAClBzK,KAAKm0B,8BAAgC1pB,CACvC,CAEAqX,wBACE9hB,KAAKm0B,8BAAgC,IACvC,CAEAnmB,aAAajO,GACXC,KAAKq0B,uBAAyBt0B,EAASihB,mBACzC,CAEA+T,iBACE/0B,KAAKq0B,uBAAyB,IAChC,CAEA1mB,eACE,OAAO3N,KAAKq0B,sBACd,E,ICxLUW,G,uSCIL,MAAMC,GACXn1B,YAAoBwL,GAAA,KAAAA,WAAAA,CAAyB,CAE7C4pB,qBAAqBxoB,GACnB,OAAO1M,KAAKsL,WAAWG,KAAK,OAAQ,uBAAwBiB,GAAS,GAAM,EAC7E,CACMyoB,wB,0CACJ,OAAOn1B,KAAKsL,WAAWG,KAAK,OAAQ,wBAAyB,MAAM,GAAM,EAC3E,G,GDZF,SAAYupB,GACV,uCACA,gBACD,CAHD,CAAYA,KAAAA,GAAgB,KEArB,MAAMI,GAGXt1B,YAAYu1B,GACVr1B,KAAKq1B,IAAMA,CACb,E,2SCSK,MAAMC,GACXx1B,YACUyL,EACAkG,EACAhL,EACA8uB,GAHA,KAAAhqB,aAAAA,EACA,KAAAkG,cAAAA,EACA,KAAAhL,YAAAA,EACA,KAAA8uB,2BAAAA,CACP,CAQGC,aACJC,EACAC,EACAC,G,0CAEA31B,KAAK41B,cAAcH,GAEnB,MAAM/oB,EACY,MAAhBgpB,EAAuB,IAAIA,EAAkB,IAAItK,GAEnD,GAAIqK,EAAahrB,OAASuqB,GAAiBK,IACzC3oB,EAAQmpB,IAAMJ,EAAaK,WACtB,CACL,IAAI7jB,QAAkBjS,KAAKyR,cAAcwT,eACpChT,GAAc0jB,IACjB1jB,QAAkBjS,KAAKyR,cAAcwY,cACnCwL,EAAaK,aACP91B,KAAKuL,aAAa8kB,iBAClBrwB,KAAKuL,aAAawqB,mBAClB/1B,KAAKuL,aAAayqB,iBAG5BtpB,EAAQ0F,mBAAqBujB,EACzBF,EAAaK,aACP91B,KAAKyR,cAAciT,cAAc+Q,EAAaK,OAAQ7jB,E,CAGlE,OAAOvF,CACT,G,CAOMupB,WAAWR,G,0CAGf,GAFAz1B,KAAK41B,cAAcH,GAEfA,EAAahrB,OAASuqB,GAAiBK,IAAK,CAC9C,MAAM3oB,EAAU,IAAI0oB,GAAiBK,EAAaK,QAClD,UACQ91B,KAAKu1B,2BAA2BL,qBAAqBxoB,E,CAC3D,MAAOnE,GACP,MAAM,IAAInI,MAAMJ,KAAKyG,YAAY5F,EAAE,2B,MAEhC,CACL,IAAIoR,QAAkBjS,KAAKyR,cAAcwT,eACpChT,IACHA,QAAkBjS,KAAKyR,cAAcwY,cACnCwL,EAAaK,aACP91B,KAAKuL,aAAa8kB,iBAClBrwB,KAAKuL,aAAawqB,mBAClB/1B,KAAKuL,aAAayqB,iBAO5B,WAJ4Bh2B,KAAKyR,cAAcykB,wBAC7CT,EAAaK,OACb7jB,IAGA,MAAM,IAAI7R,MAAMJ,KAAKyG,YAAY5F,EAAE,0BAErCb,KAAKyR,cAAca,aAAaL,E,CAElC,OAAO,CACT,G,CAEMkkB,a,gDACEn2B,KAAKu1B,2BAA2BJ,uBACxC,G,CAQMvX,kBAAkB3R,G,0CACtB,MAAMkS,QAA0Bne,KAAKuL,aAAaqiB,4BAA4B,CAAE3hB,WAEhF,OAA4C5L,OAAxC8d,aAAiB,EAAjBA,EAAmBP,mBACdO,EAAkBP,0BAIZ5d,KAAKuL,aAAawjB,oBAAoB,CAAE9iB,WACzD,G,CAEMmqB,kCAAkCnqB,G,0CACtC,aACSjM,KAAK4d,kBAAkB3R,KACmB,aAA1CjM,KAAKyR,cAAc4kB,mBAE9B,G,CAEQT,cAAcH,GACpB,GAA4B,OAAxBA,aAAY,EAAZA,EAAcK,SAA0C,KAAxBL,EAAaK,OAC/C,MAAIL,EAAahrB,OAASuqB,GAAiBK,IACnC,IAAIj1B,MAAMJ,KAAKyG,YAAY5F,EAAE,6BAE7B,IAAIT,MAAMJ,KAAKyG,YAAY5F,EAAE,0BAGzC,ECnIK,MAAey1B,ICEf,MAAMC,GAGXz2B,YAAY02B,GACVx2B,KAAKw2B,mBAAqBA,CAC5B,CAEAC,OAAOC,GACL,OAAO,IAAI12B,KAAKw2B,mBAAmBE,EACrC,ECTK,MAAMC,GAGX72B,YAAY82B,GACV52B,KAAK42B,uBAAyBA,CAChC,CAEAH,OAAOC,GACL,OAAO,IAAI12B,KAAK42B,uBAAuBF,EACzC,ECLK,MAAMG,GAOX/2B,YACE82B,EACAJ,GAEAx2B,KAAK82B,mBAAqB,IAAIH,GAAmBC,GACjD52B,KAAK+2B,eAAiB,IAAIR,GAAeC,EAC3C,CAEAQ,aAAaN,GACX,OAAO12B,KAAK82B,mBAAmBL,OAAOC,EACxC,CAEAO,cAAcP,GACZ,OAAO12B,KAAK+2B,eAAeN,OAAOC,EACpC,EC3BK,MAAMQ,ICIN,MAAMC,GAAb,cAUE,KAAAC,MAAoBzmB,GAAU0mB,OAC9B,KAAAj2B,OAAuB,IAAI81B,GAY3B,KAAAI,aAA6B7mB,EAAa8mB,IAC1C,KAAAla,gBAAmC,IAAItD,EAWzC,E,2SClCO,MAAMyd,GACX13B,YAAoB23B,GAAA,KAAAA,eAAAA,CAAyC,CAE7DrV,WACE,OAAOpiB,KAAK03B,gBAAgB,QAC9B,CAEAC,oBACE,OAAO33B,KAAK03B,gBAAgB,iBAC9B,CAEcA,gBAAgB5mB,G,0CAC5B,MAAM8mB,QAAmB53B,KAAKy3B,eAAehqB,IAAYqD,EAAK,CAC5D+mB,oBAAqBtoB,EAAoBuoB,QAE3C,GAAkB,MAAdF,EACF,OAAOA,EAGT,MAAMG,EAAO,EAAMC,UAInB,aAHMh4B,KAAKy3B,eAAe1pB,KAAK+C,EAAKinB,EAAM,CACxCF,oBAAqBtoB,EAAoBuoB,QAEpCC,CACT,G,sDClBK,MAAME,GAQXn4B,YAAYo4B,G,QAFZ,KAAAld,cAA2C,CAAC,EAG1Chb,KAAKib,QAAUid,EAAiBjd,QAChCjb,KAAKkb,QAAUgd,EAAiBhd,QAChClb,KAAKmb,OAAS+c,EAAiB/c,OAC/Bnb,KAAKqb,QAAU,IAAIzR,KAAKsuB,EAAiB7c,SACzCrb,KAAKub,YAAc2c,EAAiB3c,YACpCvb,KAAKgb,cAAgBkd,EAAiBld,cAEb,OAAV,QAAX,EAAAhb,KAAKmb,cAAM,eAAEzZ,OAAoC,OAAT,QAAX,EAAA1B,KAAKmb,cAAM,eAAEvV,OAC5C5F,KAAKmb,OAAS,KAElB,CAEQgd,uB,MACN,OAAO,IAAIvuB,MAAOD,WAAwB,QAAZ,EAAA3J,KAAKqb,eAAO,eAAE1R,UAC9C,CAEAyuB,UACE,OAAOp4B,KAAKm4B,wBA7BU,KA8BxB,CAEAE,cACE,OAAOr4B,KAAKm4B,wBAhCoB,KAiClC,CAEA92B,gBAAgB2F,GACd,OAAW,MAAPA,EACK,KAGF,IAAIixB,GAAajxB,EAC1B,E,2SCtCK,MAAMsxB,GAIXx4B,YACUyL,EACAgtB,EACArU,EACA4D,GAHA,KAAAvc,aAAAA,EACA,KAAAgtB,iBAAAA,EACA,KAAArU,YAAAA,EACA,KAAA4D,mBAAAA,EAPA,KAAA0Q,cAAgB,IAAIC,GAAA,EAAqC,MACnE,KAAAC,cAAgB14B,KAAKw4B,cAAclO,gBASjC,EAAAqO,GAAA,GAAM,EAAG,MACNpvB,MAAK,EAAAqvB,GAAA,IAAU,KAAM,EAAAt2B,GAAA,GAAKtC,KAAK64B,wBAC/BC,WAAWtb,IACVxd,KAAKw4B,cAAcpO,KAAK5M,EAAa,IAGzCxd,KAAK8nB,mBAAmBiR,KAAKD,WAAU,KACrC94B,KAAK64B,mBAAmB,GAE5B,CAEMA,oB,gDACJ,IACE,MAAM94B,QAAiBC,KAAKu4B,iBAAiB9qB,MAE7C,GAAgB,MAAZ1N,EACF,OAGF,MAAMgB,EAAO,IAAI+Z,GAAiB/a,GAC5Byd,EAAe,IAAIya,GAAal3B,GACtCf,KAAKw4B,cAAcpO,KAAK5M,GAYxB,aAV6Bxd,KAAKkkB,YAAYkF,mBACvBnW,GAAqBqW,kBAEpCtpB,KAAKuL,aAAaytB,gBAAgBj4B,GACxCf,KAAK8nB,mBAAmBmR,oBAAoC,QAAhB,EAAAl4B,EAAKwa,mBAAW,eAAEG,cAMzD8B,C,CACP,SACA,OAAO,I,KAIL0b,mBAAmBpoB,EAAkBqoB,GAAe,G,0CACxD,aAAan5B,KAAKo5B,eAAetoB,EAAKqoB,EACxC,G,CAEME,qBAAqBvoB,EAAkBqoB,EAAe,I,0CAC1D,aAAan5B,KAAKo5B,eAAetoB,EAAKqoB,EACxC,G,CAEMG,qBAAqBxoB,EAAkBqoB,EAAe,G,0CAC1D,aAAan5B,KAAKo5B,eAAetoB,EAAKqoB,EACxC,G,CAEMI,eAAeJ,EAAe,M,kDAClC,MAAM3b,QAAqBxd,KAAKw5B,oBAChC,OAA4C,QAArC,EAAwB,QAAxB,EAAAhc,EAAajC,mBAAW,eAAEG,mBAAW,QAAIyd,C,IAGpCC,eAAkBtoB,EAAkBqoB,G,0CAChD,MAAM3b,QAAqBxd,KAAKw5B,oBAChC,OACkB,MAAhBhc,GAC8B,MAA9BA,EAAaxC,eACsB,MAAnCwC,EAAaxC,cAAclK,GAEpBqoB,EAEF3b,EAAaxC,cAAclK,EACpC,G,CAEc0oB,oB,0CACZ,MAAMz4B,QAAaf,KAAKuL,aAAakuB,kBAC/BxzB,EAASlF,EAAO,IAAIk3B,GAAal3B,GAAQf,KAAKw4B,cAAckB,WAElE,GAAc,MAAVzzB,IAAmBA,EAAOmyB,WAAanyB,EAAOoyB,cAAe,CAC/D,MAAMzM,QAAc5rB,KAAK64B,oBACzB,OAAOjN,QAAAA,EAAS3lB,C,CAGlB,OAAOA,CACT,G,EClGK,MAAM0zB,GAGX75B,YACY85B,EACAtyB,EAA2C,MAD3C,KAAAsyB,MAAAA,EACA,KAAAtyB,OAAAA,EAJF,KAAAuyB,UAA2C,IAAI1zB,GAKtD,CAEH2zB,MAAMtmB,GACCxT,KAAK45B,OAGV55B,KAAK+5B,MAAM5pB,EAAa6pB,MAAOxmB,EACjC,CAEAymB,KAAKzmB,GACHxT,KAAK+5B,MAAM5pB,EAAa+pB,KAAM1mB,EAChC,CAEA2mB,QAAQ3mB,GACNxT,KAAK+5B,MAAM5pB,EAAaiqB,QAAS5mB,EACnC,CAEAsQ,MAAMtQ,GACJxT,KAAK+5B,MAAM5pB,EAAa/P,MAAOoT,EACjC,CAEAumB,MAAMM,EAAqB7mB,GACzB,GAAmB,MAAfxT,KAAKsH,SAAkBtH,KAAKsH,OAAO+yB,GAIvC,OAAQA,GACN,KAAKlqB,EAAa6pB,MAIlB,KAAK7pB,EAAa+pB,KAEhBI,QAAQC,IAAI/mB,GACZ,MACF,KAAKrD,EAAaiqB,QAEhBE,QAAQE,KAAKhnB,GACb,MACF,KAAKrD,EAAa/P,MAEhBk6B,QAAQxW,MAAMtQ,GAKpB,ECpDK,MAAMinB,GACX36B,YAAoB2R,EAAsC6D,GAAtC,KAAA7D,cAAAA,EAAsC,KAAA6D,eAAAA,CAAiC,CAE3FolB,eAAe14B,GACRA,EAAOmG,4BACVnG,EAAOmG,0BAA4BnI,KAEvC,CAKA0V,mBACE,GAA0B,MAAtB1V,KAAKyR,cACP,MAAM,IAAIrR,MAAM,mDAElB,OAAOJ,KAAKyR,aACd,CAKA+D,oBACE,GAA2B,MAAvBxV,KAAKsV,eACP,MAAM,IAAIlV,MAAM,oDAElB,OAAOJ,KAAKsV,cACd,E,2SCrBK,MAAMqlB,GAMX76B,YAAqBsD,GAAA,KAAAA,OAAAA,EALZ,KAAA2R,eAAiC,KACjC,KAAAF,UAAwB,KACxB,KAAAF,QAAsB,KACtB,KAAAC,SAAuB,KAG9B,MAAMgmB,EAAWx3B,EACX2N,EAAU6pB,EAAS,GAEzB,OAAQ7pB,GACN,KAAKtC,EAAeG,yBACpB,KAAKH,EAAeI,yBAA0B,CAC5C,MAAMgsB,EAAgBC,GAClBF,EAASl6B,OAASm6B,GACpB76B,KAAK+6B,uBAGP/6B,KAAK2U,QAAUimB,EAASj6B,MAvBR,EAuB+Bm6B,IAC/C96B,KAAK4U,SAAWgmB,EAASj6B,MACvBm6B,GACAA,IAEF96B,KAAK6U,UAAY+lB,EAASj6B,MAAMm6B,IAChC,K,CAEF,KAAKrsB,EAAeE,cAAe,CACjC,MAAMksB,EAAgBC,GAClBF,EAASl6B,OAASm6B,GACpB76B,KAAK+6B,uBAGP/6B,KAAK2U,QAAUimB,EAASj6B,MArCR,EAqC+Bm6B,IAC/C96B,KAAK6U,UAAY+lB,EAASj6B,MAAMm6B,IAChC,K,CAEF,QACE96B,KAAK+6B,uBAGT/6B,KAAK+U,eAAiBhE,CACxB,CAEQgqB,uBACN,MAAM,IAAI36B,MACR,mFAEJ,CAEAiB,oBAA0BtB,G,0CAGxB,MAAMqD,QAAerD,EAASuR,cAC9B,GAAc,MAAVlO,EACF,MAAM,IAAIhD,MAAM,kEAElB,OAAO,IAAIu6B,GAAe,IAAIv4B,WAAWgB,GAC3C,G,CAEA/B,eAAe25B,GACb,MAAM53B,EAAS,EAAMR,eAAeo4B,GACpC,OAAO,IAAIL,GAAev3B,EAC5B,ECrEK,MAAM63B,I,2SCWN,MAAMC,GACXp7B,YACY0rB,EACAjK,EACA4Z,GAFA,KAAA3P,sBAAAA,EACA,KAAAjK,WAAAA,EACA,KAAA4Z,eAAAA,CACT,CAEG9O,QAAQ+O,EAAiCtqB,G,0CAC7C,GAAW,MAAPA,EACF,MAAM,IAAI1Q,MAAM,+BAGlB,GAAkB,MAAdg7B,EACF,OAAOlyB,QAAQC,QAAQ,MAGzB,IAAIkyB,EAEFA,EADwB,iBAAfD,EACE,EAAMv2B,gBAAgBu2B,GAEtBA,EAGb,MAAME,QAAet7B,KAAKu7B,WAAWF,EAAUvqB,GACzCyD,EAAK,EAAM3Q,gBAAgB03B,EAAO/mB,IAClCxT,EAAO,EAAM6C,gBAAgB03B,EAAOv6B,MACpCyT,EAAoB,MAAd8mB,EAAO9mB,IAAc,EAAM5Q,gBAAgB03B,EAAO9mB,KAAO,KACrE,OAAO,IAAIH,GAAUinB,EAAOxqB,IAAIC,QAAShQ,EAAMwT,EAAIC,EACrD,G,CAEMgnB,eAAeJ,EAAwBtqB,G,0CAC3C,GAAW,MAAPA,EACF,MAAM,IAAI1Q,MAAM,+BAGlB,MAAMq7B,QAAiBz7B,KAAKu7B,WAAWH,EAAYtqB,GACnD,IAAI4qB,EAAS,EACO,MAAhBD,EAASjnB,MACXknB,EAASD,EAASjnB,IAAIjR,YAGxB,MAAMq3B,EAAW,IAAIx4B,WAAW,EAAIq5B,EAASlnB,GAAGhR,WAAam4B,EAASD,EAAS16B,KAAKwC,YAQpF,OAPAq3B,EAASp0B,IAAI,CAACi1B,EAAS3qB,IAAIC,UAC3B6pB,EAASp0B,IAAI,IAAIpE,WAAWq5B,EAASlnB,IAAK,GACtB,MAAhBknB,EAASjnB,KACXomB,EAASp0B,IAAI,IAAIpE,WAAWq5B,EAASjnB,KAAM,EAAIinB,EAASlnB,GAAGhR,YAG7Dq3B,EAASp0B,IAAI,IAAIpE,WAAWq5B,EAAS16B,MAAO,EAAI06B,EAASlnB,GAAGhR,WAAam4B,GAClE,IAAIf,GAAeC,EAC5B,G,CAEMnlB,cAAckmB,EAAsB7qB,G,0CACxC,GAAW,MAAPA,EACF,MAAM,IAAI1Q,MAAM,mCAKlB,GAAkB,OAFlB0Q,EAAM9Q,KAAK47B,iBAAiB9qB,EAAK6qB,IAEzB1qB,QAAoC,OAAlB0qB,aAAS,EAATA,EAAWnnB,KAEnC,OADAxU,KAAKuhB,WAAWuC,MAAM,iBACf,KAGT,GAAIhT,EAAIC,UAAY4qB,EAAU5mB,eAE5B,OADA/U,KAAKuhB,WAAWuC,MAAM,wBACf,KAGT,MAAM+X,EAAa77B,KAAKwrB,sBAAsBsQ,yBAC5CH,EAAU56B,KACV46B,EAAUpnB,GACVonB,EAAUnnB,IACV1D,GAEF,GAAyB,MAArB+qB,EAAW5qB,QAAoC,MAAlB4qB,EAAWrnB,IAAa,CACvD,MAAMunB,QAAoB/7B,KAAKwrB,sBAAsBwQ,SACnDH,EAAWI,QACXJ,EAAW5qB,OACX,UAGF,WADwBjR,KAAKwrB,sBAAsB0Q,YAAYL,EAAWrnB,IAAKunB,IAG7E,OADA/7B,KAAKm8B,aAAa,eACX,I,CAIX,aAAan8B,KAAKwrB,sBAAsB4Q,eAAeP,EACzD,G,CAEM7O,eAAeqP,EAAqBvrB,G,0CACxC,GAAW,MAAPA,EACF,MAAM,IAAI1Q,MAAM,+BAGlB,GAAgB,MAAZi8B,EACF,MAAM,IAAIj8B,MAAM,oCAKlB,GAAkB,OAFlB0Q,EAAM9Q,KAAK47B,iBAAiB9qB,EAAKurB,IAEzBprB,QAAuC,MAArBorB,EAASznB,SACjC,OAAO,KAGT,GAAI9D,EAAIC,UAAYsrB,EAAStnB,eAC3B,OAAO,KAGT,GAAkB,MAAdjE,EAAIG,QAAuC,MAArBorB,EAASznB,SAAkB,CACnD,MAAMqnB,EAAU,IAAI75B,WAAWi6B,EAAS1nB,QAAQpR,WAAa84B,EAASxnB,UAAUtR,YAChF04B,EAAQz1B,IAAI,IAAIpE,WAAWi6B,EAAS1nB,SAAU,GAC9CsnB,EAAQz1B,IAAI,IAAIpE,WAAWi6B,EAASxnB,WAAYwnB,EAAS1nB,QAAQpR,YACjE,MAAMw4B,QAAoB/7B,KAAKwrB,sBAAsB8Q,KAAKL,EAASnrB,EAAIG,OAAQ,UAC/E,GAAoB,OAAhB8qB,EACF,OAAO,KAIT,WADwB/7B,KAAKwrB,sBAAsB1kB,QAAQu1B,EAASznB,SAAUmnB,IAG5E,OADA/7B,KAAKm8B,aAAa,eACX,I,CAIX,MAAM5Y,QAAevjB,KAAKwrB,sBAAsB+Q,WAC9CF,EAASxnB,UACTwnB,EAAS1nB,QACT7D,EAAIE,QAGN,OAAOuS,QAAAA,EAAU,IACnB,G,CAEMiZ,aACJC,EACA3rB,G,0CAEA,OAAa,MAAT2rB,GAAiBA,EAAM/7B,OAAS,EAC3B,SAGIwI,QAAQ4N,IAAI2lB,EAAMz7B,KAAKiT,GAASA,EAAKkB,QAAQrE,KAC5D,G,CAEcyqB,WAAWx6B,EAAkB+P,G,0CACzC,MAAM9J,EAAM,IAAIi0B,GAKhB,GAJAj0B,EAAI8J,IAAMA,EACV9J,EAAIuN,SAAWvU,KAAKwrB,sBAAsBiC,YAAY,IACtDzmB,EAAIjG,WAAaf,KAAKwrB,sBAAsB+P,WAAWx6B,EAAMiG,EAAIuN,GAAIvN,EAAI8J,IAAIE,QAEvD,MAAlBhK,EAAI8J,IAAIG,OAAgB,CAC1B,MAAMgrB,EAAU,IAAI75B,WAAW4E,EAAIuN,GAAGhR,WAAayD,EAAIjG,KAAKwC,YAC5D04B,EAAQz1B,IAAI,IAAIpE,WAAW4E,EAAIuN,IAAK,GACpC0nB,EAAQz1B,IAAI,IAAIpE,WAAW4E,EAAIjG,MAAOiG,EAAIuN,GAAGhR,YAC7CyD,EAAIwN,UAAYxU,KAAKwrB,sBAAsB8Q,KAAKL,EAASj1B,EAAI8J,IAAIG,OAAQ,S,CAG3E,OAAOjK,CACT,G,CAEQm1B,aAAaO,GACf18B,KAAKm7B,gBACPn7B,KAAKuhB,WAAWuC,MAAM4Y,EAE1B,CAMAd,iBAAiB9qB,EAAyBurB,GACxC,OACEA,EAAStnB,iBAAmBtG,EAAeG,0BAC3CkC,EAAIC,UAAYtC,EAAeE,cAExB,IAAIkC,GAAmBC,EAAIA,IAAKrC,EAAeG,0BAGjDkC,CACT,E,IClMU6rB,GCAAC,GCAAC,G,6DFAZ,SAAYF,GACV,uBACA,8BACD,CAHD,CAAYA,KAAAA,GAAc,KCA1B,SAAYC,GACV,qBACA,+BACA,mBACA,0BACD,CALD,CAAYA,KAAAA,GAAU,KEEf,MAAME,GAQXh9B,YAAYC,GACM,MAAZA,IAGJC,KAAKkF,GAAKnF,EAASmF,GACnBlF,KAAK4F,IAAM7F,EAAS6F,IACpB5F,KAAK+8B,SAAWh9B,EAASg9B,SACzB/8B,KAAK8Q,IAAM/Q,EAAS+Q,IACpB9Q,KAAKg9B,KAAOj9B,EAASi9B,KACrBh9B,KAAKi9B,SAAWl9B,EAASk9B,SAC3B,EClBK,MAAMC,GAQXp9B,YAAYiB,GACE,MAARA,IAIJf,KAAKm9B,eAAiBp8B,EAAKo8B,eAC3Bn9B,KAAKo9B,MAAQr8B,EAAKq8B,MAClBp9B,KAAKq9B,OAASt8B,EAAKs8B,OACnBr9B,KAAKs9B,SAAWv8B,EAAKu8B,SACrBt9B,KAAKu9B,QAAUx8B,EAAKw8B,QACpBv9B,KAAK+lB,KAAOhlB,EAAKglB,KACnB,EClBK,MAAMyX,GAMX19B,YAAYC,GACM,MAAZA,IAGJC,KAAKyK,KAAO1K,EAAS0K,KACrBzK,KAAK0B,KAAO3B,EAAS2B,KACrB1B,KAAK4rB,MAAQ7rB,EAAS6rB,MACtB5rB,KAAKy9B,SAAW19B,EAAS09B,SAC3B,ECfK,MAAMC,GAoBX59B,YAAYiB,GACE,MAARA,IAIJf,KAAK29B,MAAQ58B,EAAK48B,MAClB39B,KAAK49B,UAAY78B,EAAK68B,UACtB59B,KAAK69B,WAAa98B,EAAK88B,WACvB79B,KAAK89B,SAAW/8B,EAAK+8B,SACrB99B,KAAK+9B,SAAWh9B,EAAKg9B,SACrB/9B,KAAKg+B,SAAWj9B,EAAKi9B,SACrBh+B,KAAKi+B,SAAWl9B,EAAKk9B,SACrBj+B,KAAKk+B,KAAOn9B,EAAKm9B,KACjBl+B,KAAKm+B,MAAQp9B,EAAKo9B,MAClBn+B,KAAKo+B,WAAar9B,EAAKq9B,WACvBp+B,KAAKq+B,QAAUt9B,EAAKs9B,QACpBr+B,KAAKs+B,QAAUv9B,EAAKu9B,QACpBt+B,KAAK6L,MAAQ9K,EAAK8K,MAClB7L,KAAKu+B,MAAQx9B,EAAKw9B,MAClBv+B,KAAKw+B,IAAMz9B,EAAKy9B,IAChBx+B,KAAKmZ,SAAWpY,EAAKoY,SACrBnZ,KAAKy+B,eAAiB19B,EAAK09B,eAC3Bz+B,KAAK0+B,cAAgB39B,EAAK29B,cAC5B,EC1CK,MAAMC,GAIX7+B,YAAYiB,GAFZ,KAAAiI,MAAsB,KAGR,MAARjI,IAGJf,KAAK4+B,IAAM79B,EAAK69B,IAChB5+B,KAAKgJ,MAAQjI,EAAKiI,MACpB,ECTK,MAAM61B,GAQX/+B,YAAYiB,GACE,MAARA,IAIJf,KAAKmZ,SAAWpY,EAAKoY,SACrBnZ,KAAKoZ,SAAWrY,EAAKqY,SACrBpZ,KAAK8+B,qBAAuB/9B,EAAK+9B,qBACjC9+B,KAAK++B,KAAOh+B,EAAKg+B,KACjB/+B,KAAKg/B,mBAAqBj+B,EAAKi+B,mBAE3Bj+B,EAAKk+B,OACPj/B,KAAKi/B,KAAOl+B,EAAKk+B,KAAKj+B,KAAKk+B,GAAM,IAAIP,GAAaO,MAEtD,ECxBK,MAAMC,GAIXr/B,YAAYC,GACM,MAAZA,IAIJC,KAAKoZ,SAAWrZ,EAASqZ,SACzBpZ,KAAKo/B,aAAer/B,EAASq/B,aAC/B,ECVK,MAAMC,GAGXv/B,YAAYiB,GACE,MAARA,IAIJf,KAAKyK,KAAO1J,EAAK0J,KACnB,ECAK,MAAM60B,GAwBXx/B,YAAYC,EAA2Bw/B,GACrC,GAAgB,MAAZx/B,EAAJ,CAoBA,OAhBAC,KAAKkF,GAAKnF,EAASmF,GACnBlF,KAAKwK,eAAiBzK,EAASyK,eAC/BxK,KAAKw/B,SAAWz/B,EAASy/B,SACzBx/B,KAAKy/B,KAAO1/B,EAAS0/B,KACrBz/B,KAAK0/B,aAAe3/B,EAAS2/B,aAC7B1/B,KAAK2/B,oBAAsB5/B,EAAS4/B,oBACpC3/B,KAAK4/B,SAAW7/B,EAAS6/B,SACzB5/B,KAAK+tB,aAAehuB,EAASguB,aAC7B/tB,KAAKyK,KAAO1K,EAAS0K,KACrBzK,KAAK0B,KAAO3B,EAAS2B,KACrB1B,KAAK6/B,MAAQ9/B,EAAS8/B,MACtB7/B,KAAKu/B,cAAiC,MAAjBA,EAAwBA,EAAgBx/B,EAASw/B,cACtEv/B,KAAK8tB,aAAe/tB,EAAS+tB,aAC7B9tB,KAAK8/B,YAAc//B,EAAS+/B,YAC5B9/B,KAAK+/B,SAAWhgC,EAASggC,SAEjB//B,KAAKyK,MACX,KAAKmyB,GAAWoD,MACdhgC,KAAKigC,MAAQ,IAAIpB,GAAU9+B,EAASkgC,OACpC,MACF,KAAKrD,GAAWsD,WACdlgC,KAAKmgC,WAAa,IAAId,GAAet/B,EAASogC,YAC9C,MACF,KAAKvD,GAAWwD,KACdpgC,KAAKqgC,KAAO,IAAInD,GAASn9B,EAASsgC,MAClC,MACF,KAAKzD,GAAW0D,SACdtgC,KAAKka,SAAW,IAAIwjB,GAAa39B,EAASma,UAMvB,MAAnBna,EAASwgC,SACXvgC,KAAKugC,OAASxgC,EAASwgC,OAAOv/B,KAAKw/B,GAAM,IAAIhD,GAAUgD,MAE7B,MAAxBzgC,EAAS0gC,cACXzgC,KAAKygC,YAAc1gC,EAAS0gC,YAAYz/B,KAAK2F,GAAM,IAAIm2B,GAAen2B,MAExC,MAA5B5G,EAAS2gC,kBACX1gC,KAAK0gC,gBAAkB3gC,EAAS2gC,gBAAgB1/B,KAAK2/B,GAAO,IAAIxB,GAAoBwB,K,CAExF,GTnFF,SAAY9D,GACV,mBACA,0BACD,CAHD,CAAYA,KAAAA,GAAkB,KUMvB,MAAM+D,GAQX9gC,YAAY6G,GAPZ,KAAAzB,GAAa,KACb,KAAAU,IAAc,KACd,KAAAo3B,KAAe,KACf,KAAAC,SAAmB,KACnB,KAAAF,SAAmB,KACnB,KAAAjsB,IAA0B,KAGnBnK,IAIL3G,KAAKkF,GAAKyB,EAAEzB,GACZlF,KAAK4F,IAAMe,EAAEf,IACb5F,KAAKg9B,KAAOr2B,EAAEq2B,KACdh9B,KAAKi9B,SAAWt2B,EAAEs2B,SACpB,CAEI4D,eACF,IACE,GAAiB,MAAb7gC,KAAKg9B,KACP,OAAOl6B,SAAS9C,KAAKg9B,KAAM,K,CAE7B,S,CAGF,OAAO,CACT,CAEA37B,gBAAgB2F,GACd,MAAM8J,EAAiB,MAAX9J,EAAI8J,IAAc,KAAOD,GAAmB4K,SAASzU,EAAI8J,KACrE,OAAO3J,OAAOC,OAAO,IAAIw5B,GAAkB55B,EAAK,CAAE8J,IAAKA,GACzD,ECpCK,MAAMgwB,GACXhhC,YAAqBihC,EAAsCC,GAAtC,KAAAD,YAAAA,EAAsC,KAAAC,SAAAA,CAAoB,CAE3EC,c,MACF,OAAoB,QAAb,EAAAjhC,KAAKghC,gBAAQ,QAAIhhC,KAAK+gC,WAC/B,EAUK,SAASG,GAAkBh8B,EAAkB+7B,GAClD,MAAO,CAAC78B,EAAqB28B,KACS,MAAhC38B,EAAU+8B,qBACZ/8B,EAAU+8B,mBAAqB,IAAIh7B,KAGrC/B,EAAU+8B,mBAAmB36B,IAAItB,EAAI,IAAI47B,GAAeC,EAAaE,GAAS,CAElF,CCvBO,MAAeG,I,2bCIf,MAAMC,WAAiBD,GAA9B,c,oBAEE,KAAAjE,eAAyB,KAEzB,KAAAG,SAAmB,KAEnB,KAAAC,QAAkB,KAElB,KAAAxX,KAAe,KAEP,KAAAub,OAAiB,KACjB,KAAAC,QAAkB,KAClB,KAAAC,UAAoB,IA+H9B,CA7HMC,iBACF,OAAoB,MAAbzhC,KAAK+lB,KAAe,IAAI2b,OAAO1hC,KAAK+lB,KAAKrlB,QAAU,IAC5D,CAEIihC,mBACF,OAAsB,MAAf3hC,KAAKq9B,OAAiB,IAAIqE,OAAO1hC,KAAKq9B,OAAO38B,QAAU,IAChE,CAGI08B,YACF,OAAOp9B,KAAKshC,MACd,CACIlE,UAAMxR,GACR5rB,KAAKshC,OAAS1V,EACd5rB,KAAKwhC,UAAY,IACnB,CAGInE,aACF,OAAOr9B,KAAKuhC,OACd,CACIlE,WAAOzR,GACT5rB,KAAKuhC,QAAU3V,EACf5rB,KAAKwhC,UAAY,IACnB,CAEII,eACF,GAAsB,MAAlB5hC,KAAKwhC,YACPxhC,KAAKwhC,UAAYxhC,KAAKo9B,MACH,MAAfp9B,KAAKq9B,QAAkBr9B,KAAKq9B,OAAO38B,QAAU,GAAG,CAC5B,MAAlBV,KAAKwhC,WAAwC,KAAnBxhC,KAAKwhC,UACjCxhC,KAAKwhC,WAAa,KAElBxhC,KAAKwhC,UAAY,GAInB,MAAMK,EACJ7hC,KAAKq9B,OAAO38B,QAAU,GAAgD,MAA3CV,KAAKq9B,OAAOr0B,MAAM,IAAI7D,OAAO,WAAqB,EAAI,EACnFnF,KAAKwhC,WAAa,IAAMxhC,KAAKq9B,OAAOt6B,OAAO/C,KAAKq9B,OAAO38B,OAASmhC,E,CAGpE,OAAO7hC,KAAKwhC,SACd,CAEIM,iBACF,IAAK9hC,KAAKs9B,WAAat9B,KAAKu9B,QAC1B,OAAO,KAGT,IAAIjL,EAAuB,MAAjBtyB,KAAKs9B,UAAoB,IAAMt9B,KAAKs9B,UAAU38B,OAAO,GAAK,KAEpE,OADA2xB,GAAO,OAAyB,MAAhBtyB,KAAKu9B,QAAkBv9B,KAAK+hC,WAAW/hC,KAAKu9B,SAAW,QAChEjL,CACT,CAEQyP,WAAWC,GACjB,OAAuB,IAAhBA,EAAKthC,OAAe,KAAOshC,EAAOA,CAC3C,CAEA3gC,gBAAgB2F,GACd,OAAOG,OAAOC,OAAO,IAAIi6B,GAAYr6B,EACvC,CAGA3F,8BAA8B4gC,GAC5B,GAAe,MAAXA,GAAsC,iBAAZA,GAA2C,KAAnBA,EAAQ18B,OAC5D,OAAO,KAIT,IAAI28B,EAAK,IAAI/8B,OAAO,MACpB,OAAyB,MAArB88B,EAAQj5B,MAAMk5B,GACT,OAMP,sGAAsG98B,KACpG68B,GAGK,cAITC,EAAK,IAAI/8B,OAAO,UACS,MAArB88B,EAAQj5B,MAAMk5B,GACT,QAITA,EAAK,IAAI/8B,OACP,iFAEuB,MAArB88B,EAAQj5B,MAAMk5B,GACT,YAITA,EAAK,IAAI/8B,OAAO,OACS,MAArB88B,EAAQj5B,MAAMk5B,GACT,eAITA,EAAK,IAAI/8B,OAAO,YACS,MAArB88B,EAAQj5B,MAAMk5B,GACT,eAITA,EAAK,IAAI/8B,OAAO,yBACS,MAArB88B,EAAQj5B,MAAMk5B,GACT,OAITA,EAAK,IAAI/8B,OAAO,qCACS,MAArB88B,EAAQj5B,MAAMk5B,GACT,OAGF,UACT,EAzIA,IAAChB,GAAkB,EAASiB,gB,gEAE5B,IAACjB,GAAkB,EAASkB,SAAU,mB,0DAEtC,IAAClB,GAAkB,EAASmB,QAAS,kB,yDAErC,IAACnB,GAAkB,EAASoB,KAAM,gB,sDAelC,IAACpB,GAAkB,EAASqB,O,sFAS5B,IAACrB,GAAkB,EAAS15B,Q,uFChCvB,MAAMg7B,GASX1iC,YAAY0gC,GARZ,KAAA9+B,KAAe,KACf,KAAAkqB,MAAgB,KAChB,KAAAnhB,KAAkB,KAClB,KAAAg4B,UAAW,EACX,KAAAC,WAAY,EACZ,KAAAC,WAAY,EACZ,KAAAlF,SAAyB,KAGlB+C,IAILxgC,KAAKyK,KAAO+1B,EAAE/1B,KACdzK,KAAKy9B,SAAW+C,EAAE/C,SACpB,CAEImF,kBACF,OAAqB,MAAd5iC,KAAK4rB,MAAgB,WAAa,IAC3C,CAEAvqB,gBAAgB2F,GACd,OAAOG,OAAOC,OAAO,IAAIo7B,GAAax7B,EACxC,E,2bCtBK,MAAM67B,WAAqBzB,GAsChCthC,cACEgB,QArCF,KAAA68B,MAAgB,KAEhB,KAAAE,WAAqB,KAErB,KAAAE,SAAmB,KAEnB,KAAAC,SAAmB,KAEnB,KAAAC,SAAmB,KAEnB,KAAAC,KAAe,KAEf,KAAAC,MAAgB,KAEhB,KAAAC,WAAqB,KAErB,KAAAC,QAAkB,KAElB,KAAAC,QAAkB,KAElB,KAAAzyB,MAAgB,KAEhB,KAAA0yB,MAAgB,KAEhB,KAAAC,IAAc,KAEd,KAAArlB,SAAmB,KAEnB,KAAAslB,eAAyB,KAEzB,KAAAC,cAAwB,KAEhB,KAAAoE,WAAqB,KACrB,KAAAC,UAAoB,KACpB,KAAAvB,UAAoB,IAI5B,CAGI5D,gBACF,OAAO59B,KAAK8iC,UACd,CACIlF,cAAUhS,GACZ5rB,KAAK8iC,WAAalX,EAClB5rB,KAAKwhC,UAAY,IACnB,CAGI1D,eACF,OAAO99B,KAAK+iC,SACd,CACIjF,aAASlS,GACX5rB,KAAK+iC,UAAYnX,EACjB5rB,KAAKwhC,UAAY,IACnB,CAEII,eAcF,OAbsB,MAAlB5hC,KAAKwhC,WAAwC,MAAlBxhC,KAAK49B,WAAsC,MAAjB59B,KAAK89B,WAC5D99B,KAAKwhC,UAAY,GACK,MAAlBxhC,KAAK49B,YACP59B,KAAKwhC,UAAYxhC,KAAK49B,WAEH,MAAjB59B,KAAK89B,WACgB,KAAnB99B,KAAKwhC,YACPxhC,KAAKwhC,WAAa,KAEpBxhC,KAAKwhC,WAAaxhC,KAAK89B,WAIpB99B,KAAKwhC,SACd,CAGIwB,eACF,GACgB,MAAdhjC,KAAK29B,OACa,MAAlB39B,KAAK49B,WACc,MAAnB59B,KAAK69B,YACY,MAAjB79B,KAAK89B,SACL,CACA,IAAIp8B,EAAO,GAaX,OAZkB,MAAd1B,KAAK29B,QACPj8B,GAAQ1B,KAAK29B,MAAQ,KAED,MAAlB39B,KAAK49B,YACPl8B,GAAQ1B,KAAK49B,UAAY,KAEJ,MAAnB59B,KAAK69B,aACPn8B,GAAQ1B,KAAK69B,WAAa,KAEP,MAAjB79B,KAAK89B,WACPp8B,GAAQ1B,KAAK89B,UAERp8B,EAAK6D,M,CAGd,OAAO,IACT,CAEI09B,kBACF,IAAIC,EAAUljC,KAAK+9B,SAanB,OAZK,EAAMz4B,mBAAmBtF,KAAKg+B,YAC5B,EAAM14B,mBAAmB49B,KAC5BA,GAAW,MAEbA,GAAWljC,KAAKg+B,UAEb,EAAM14B,mBAAmBtF,KAAKi+B,YAC5B,EAAM34B,mBAAmB49B,KAC5BA,GAAW,MAEbA,GAAWljC,KAAKi+B,UAEXiF,CACT,CAEIC,uBACF,GAAiB,MAAbnjC,KAAKk+B,MAA8B,MAAdl+B,KAAKm+B,OAAoC,MAAnBn+B,KAAKo+B,WAClD,OAAO,KAET,MAAMF,EAAOl+B,KAAKk+B,MAAQ,IACpBC,EAAQn+B,KAAKm+B,MACbC,EAAap+B,KAAKo+B,YAAc,IACtC,IAAIgF,EAAelF,EAKnB,OAJK,EAAM54B,mBAAmB64B,KAC5BiF,GAAgB,KAAOjF,GAEzBiF,GAAgB,KAAOhF,EAChBgF,CACT,CAEA/hC,gBAAgB2F,GACd,OAAOG,OAAOC,OAAO,IAAIy7B,GAAgB77B,EAC3C,EAzIA,IAACk6B,GAAkB,EAASmC,O,uDAE5B,IAACnC,GAAkB,EAASoC,Y,4DAE5B,IAACpC,GAAkB,EAASqC,U,0DAE5B,IAACrC,GAAkB,EAASsC,U,0DAE5B,IAACtC,GAAkB,EAASuC,U,0DAE5B,IAACvC,GAAkB,EAASwC,KAAM,Y,sDAElC,IAACxC,GAAkB,EAASyC,MAAO,iB,uDAEnC,IAACzC,GAAkB,EAAS0C,WAAY,iB,4DAExC,IAAC1C,GAAkB,EAAS2C,S,yDAE5B,IAAC3C,GAAkB,EAAS4C,S,yDAE5B,IAAC5C,GAAkB,EAASlN,O,uDAE5B,IAACkN,GAAkB,EAAS6C,O,uDAE5B,IAAC7C,GAAkB,EAAS8C,K,qDAE5B,IAAC9C,GAAkB,EAAS+C,U,0DAE5B,IAAC/C,GAAkB,EAASgD,gB,gEAE5B,IAAChD,GAAkB,EAASiD,e,+DAW5B,IAACjD,GAAkB,EAASkD,W,0FAS5B,IAAClD,GAAkB,EAASmD,U,yFA0B5B,IAACnD,GAAkB,EAASoD,U,mFC9E9B,MAAMC,GAAqB,CACzB,WACA,UACA,SACA,SACA,UACA,SACA,SAEA,SACA,SACA,YACA,YACA,iBAGK,MAAMC,GASX1kC,YAAYo/B,GARZ,KAAAl2B,MAAsB,KAEd,KAAAy7B,KAAe,KACf,KAAAC,QAAkB,KAClB,KAAAC,UAAoB,KACpB,KAAAC,MAAgB,KAChB,KAAAC,WAAsB,KAGvB3F,IAILl/B,KAAKgJ,MAAQk2B,EAAEl2B,MACjB,CAEI41B,UACF,OAAO5+B,KAAKykC,IACd,CACI7F,QAAIhT,GACN5rB,KAAKykC,KAAO7Y,EACZ5rB,KAAK0kC,QAAU,KACf1kC,KAAK6kC,WAAa,IACpB,CAEI5+B,aAQF,OAPoB,MAAhBjG,KAAK0kC,SAA+B,MAAZ1kC,KAAK4+B,MAC/B5+B,KAAK0kC,QAAU,EAAMI,UAAU9kC,KAAK4+B,KACf,KAAjB5+B,KAAK0kC,UACP1kC,KAAK0kC,QAAU,OAIZ1kC,KAAK0kC,OACd,CAEIh/B,eACF,OAAI1F,KAAKgJ,QAAU4H,GAAam0B,kBACvB,MAEa,MAAlB/kC,KAAK2kC,WAAiC,MAAZ3kC,KAAK4+B,MACjC5+B,KAAK2kC,UAAY,EAAMK,YAAYhlC,KAAK4+B,KACjB,KAAnB5+B,KAAK2kC,YACP3kC,KAAK2kC,UAAY,OAId3kC,KAAK2kC,UACd,CAEI7+B,WACF,OAAI9F,KAAKgJ,QAAU4H,GAAam0B,kBACvB,MAES,MAAd/kC,KAAK4kC,OAA6B,MAAZ5kC,KAAK4+B,MAC7B5+B,KAAK4kC,MAAQ,EAAMK,QAAQjlC,KAAK4+B,KACb,KAAf5+B,KAAK4kC,QACP5kC,KAAK4kC,MAAQ,OAIV5kC,KAAK4kC,MACd,CAEIM,oBACF,OAAwB,MAAjBllC,KAAK0F,SAAmB1F,KAAK0F,SAAW1F,KAAK4+B,GACtD,CAEIuG,gBACF,OAAoB,MAAbnlC,KAAK8F,KAAe9F,KAAK8F,KAAO9F,KAAK4+B,GAC9C,CAEIwG,gBACF,OACc,MAAZplC,KAAK4+B,MAC4B,IAAhC5+B,KAAK4+B,IAAIn5B,QAAQ,YACiB,IAAjCzF,KAAK4+B,IAAIn5B,QAAQ,aAChBzF,KAAK4+B,IAAIn5B,QAAQ,OAAS,IAAM,EAAMH,mBAAmB,EAAMw/B,UAAU9kC,KAAK4+B,MAErF,CAEIyG,gBACF,GAAuB,MAAnBrlC,KAAK6kC,WACP,OAAO7kC,KAAK6kC,WAEd,GAAgB,MAAZ7kC,KAAK4+B,KAAe5+B,KAAKgJ,QAAU4H,GAAam0B,kBAAmB,CACrE,MAAMnG,EAAM5+B,KAAKslC,UACjB,IAAK,IAAI5iC,EAAI,EAAGA,EAAI6hC,GAAmB7jC,OAAQgC,IAC7C,GAA2C,IAAvCk8B,EAAIn5B,QAAQ8+B,GAAmB7hC,IAEjC,OADA1C,KAAK6kC,YAAa,EACX7kC,KAAK6kC,U,CAKlB,OADA7kC,KAAK6kC,YAAa,EACX7kC,KAAK6kC,UACd,CAEIS,gBACF,OAAOtlC,KAAK4+B,IAAIn5B,QAAQ,OAAS,IAAM,EAAMH,mBAAmB,EAAMw/B,UAAU9kC,KAAK4+B,MACjF,UAAY5+B,KAAK4+B,IACjB5+B,KAAK4+B,GACX,CAEAv9B,gBAAgB2F,GACd,OAAOG,OAAOC,OAAO,IAAIo9B,GAAgBx9B,EAC3C,CAEAu+B,WACEC,EACAC,EACAC,EAAgC,M,MAEhC,IAAK1lC,KAAK4+B,MAAQ4G,EAChB,OAAO,EAGT,IAAIG,EAAsB,QAAV,EAAA3lC,KAAKgJ,aAAK,QAAI08B,EAC9BC,UAAAA,EAAc/0B,GAAamF,QAE3B,MAAM6vB,EAAe,EAAMd,UAAUU,GAC/BK,EAAeJ,EAAkBK,IAAIF,GAE3C,OAAQD,GACN,KAAK/0B,GAAamF,OAChB,OAAO/V,KAAK+lC,cAAcP,EAAWK,GACvC,KAAKj1B,GAAao1B,KAAM,CACtB,MAAMC,EAAU,EAAMhB,QAAQO,GAC9B,OAAkB,MAAXS,GAAmBA,IAAY,EAAMhB,QAAQjlC,KAAK4+B,I,CAE3D,KAAKhuB,GAAas1B,MAChB,OAAOV,IAAcxlC,KAAK4+B,IAC5B,KAAKhuB,GAAau1B,WAChB,OAAOX,EAAUhgC,WAAWxF,KAAK4+B,KACnC,KAAKhuB,GAAam0B,kBAChB,IAEE,OADc,IAAI5/B,OAAOnF,KAAK4+B,IAAK,KACtBx5B,KAAKogC,E,CAClB,MAAOj9B,GAEP,OAAO,C,CAEX,KAAKqI,GAAaw1B,MAChB,OAAO,EAKX,OAAO,CACT,CAEQL,cAAcP,EAAmBK,GACvC,GAAiB,MAAbL,GAAoC,MAAfxlC,KAAKiG,SAAmB4/B,EAAavR,IAAIt0B,KAAKiG,QACrE,OAAO,EAGT,GAAI,EAAMmE,qBAAqBkqB,IAAIt0B,KAAKiG,QAAS,CAC/C,MAAMogC,EAAgB,EAAMpB,QAAQO,GACpC,OAAQ,EAAMp7B,qBAAqBqD,IAAIzN,KAAKiG,QAAQquB,IAAI+R,E,CAG1D,OAAO,CACT,E,2bChLK,MAAMC,WAAkBlF,GAW7BthC,YAAYymC,GACVzlC,QAVF,KAAAqY,SAAmB,KAEnB,KAAAC,SAAmB,KAEnB,KAAA0lB,qBAA8B,KAC9B,KAAAC,KAAe,KACf,KAAAE,KAAuB,KACvB,KAAAD,mBAA8B,KAIvBuH,IAILvmC,KAAK8+B,qBAAuByH,EAAEzH,qBAC9B9+B,KAAKg/B,mBAAqBuH,EAAEvH,mBAC9B,CAEIJ,UACF,OAAO5+B,KAAKwmC,QAAUxmC,KAAKi/B,KAAK,GAAGL,IAAM,IAC3C,CAEI6H,qBACF,OAAwB,MAAjBzmC,KAAKoZ,SAAmB,WAAa,IAC9C,CAEIwoB,eACF,OAAO5hC,KAAKmZ,QACd,CAEIksB,gBACF,OAAOrlC,KAAKwmC,SAAWxmC,KAAKi/B,KAAKyH,MAAMxH,GAAMA,EAAEmG,WACjD,CAEIsB,cACF,OAAQ,EAAMrhC,mBAAmBtF,KAAK++B,KACxC,CAEIuG,gBACF,GAAItlC,KAAKwmC,QAAS,CAChB,MAAM5H,EAAM5+B,KAAKi/B,KAAKlP,MAAMmP,GAAMA,EAAEmG,YACpC,GAAW,MAAPzG,EACF,OAAOA,EAAI0G,S,CAGf,OAAO,IACT,CAEIkB,cACF,OAAoB,MAAbxmC,KAAKi/B,MAAgBj/B,KAAKi/B,KAAKv+B,OAAS,CACjD,CAEA6kC,WACEC,EACAC,EACAC,EAAgC,MAEhC,OAAiB,MAAb1lC,KAAKi/B,MAIFj/B,KAAKi/B,KAAKyH,MAAM9H,GAAQA,EAAI2G,WAAWC,EAAWC,EAAmBC,IAC9E,CAEArkC,gBAAgB2F,G,MACd,MAAM83B,EACwB,MAA5B93B,EAAI83B,qBAA+B,KAAO,IAAIl1B,KAAK5C,EAAI83B,sBACnDG,EAAe,QAAR,EAAAj4B,EAAIi4B,YAAI,eAAEj+B,KAAK49B,GAAa4F,GAAa/oB,SAASmjB,KAE/D,OAAOz3B,OAAOC,OAAO,IAAIk/B,GAAat/B,EAAK,CACzC83B,qBAAsBA,EACtBG,KAAMA,GAEV,EA3EA,IAACiC,GAAkB,EAAS+C,U,0DAE5B,IAAC/C,GAAkB,EAASzY,U,0DCRvB,MAAMme,GAIX9mC,YAAY6gC,GAHZ,KAAAvnB,SAAmB,KACnB,KAAAgmB,aAAqB,KAGduB,IAIL3gC,KAAKo/B,aAAeuB,EAAGvB,aACzB,CAEA/9B,gBAAgB2F,GACd,MAAMo4B,EAAmC,MAApBp4B,EAAIo4B,aAAuB,KAAO,IAAIx1B,KAAK5C,EAAIo4B,cAEpE,OAAOj4B,OAAOC,OAAO,IAAIw/B,GAAuB5/B,EAAK,CACnDo4B,aAAcA,GAElB,EChBK,MAAMyH,WAAuBzF,GAGlCthC,YAAYgnC,GACVhmC,QAHF,KAAA2J,KAAuB,KAIhBq8B,IAIL9mC,KAAKyK,KAAOq8B,EAAEr8B,KAChB,CAEIm3B,eACF,OAAO,IACT,CAEAvgC,gBAAgB2F,GACd,OAAOG,OAAOC,OAAO,IAAIy/B,GAAkB7/B,EAC7C,ECNK,MAAM+/B,GA2BXjnC,YAAYgF,G,MA1BH,KAAAkiC,eAAiBrK,GAAeoK,WAEzC,KAAA7hC,GAAa,KACb,KAAAsF,eAAyB,KACzB,KAAAg1B,SAAmB,KACnB,KAAA99B,KAAe,KACf,KAAAm+B,MAAgB,KAChB,KAAAp1B,KAAmB,KACnB,KAAAm1B,UAAW,EACX,KAAAD,qBAAsB,EACtB,KAAAF,MAAO,EACP,KAAAC,cAAe,EAEf,KAAAO,MAAQ,IAAIqG,GACZ,KAAApsB,SAAW,IAAI2oB,GACf,KAAAxC,KAAO,IAAIgB,GACX,KAAAlB,WAAa,IAAI0G,GACjB,KAAApG,YAAgC,KAChC,KAAAF,OAAsB,KACtB,KAAAG,gBAAyC,KACzC,KAAAnB,cAA0B,KAC1B,KAAAxR,aAAqB,KACrB,KAAAD,aAAqB,KACrB,KAAAgS,YAAoB,KACpB,KAAAC,SAA+BlD,GAAmBne,KAG3C5Z,IAIL9E,KAAKkF,GAAKJ,EAAEI,GACZlF,KAAKwK,eAAiB1F,EAAE0F,eACxBxK,KAAKw/B,SAAW16B,EAAE06B,SAClBx/B,KAAK4/B,SAAW96B,EAAE86B,SAClB5/B,KAAK2/B,oBAAsB76B,EAAE66B,oBAC7B3/B,KAAKy/B,KAAO36B,EAAE26B,KACdz/B,KAAK0/B,aAAe56B,EAAE46B,aACtB1/B,KAAKyK,KAAO3F,EAAE2F,KACdzK,KAAKinC,UAAYniC,EAAEmiC,UACnBjnC,KAAKu/B,cAAgBz6B,EAAEy6B,cACvBv/B,KAAK+tB,aAAejpB,EAAEipB,aACtB/tB,KAAK8tB,aAAehpB,EAAEgpB,aACtB9tB,KAAK8/B,YAAch7B,EAAEg7B,YAErB9/B,KAAK+/B,SAAqB,QAAV,EAAAj7B,EAAEi7B,gBAAQ,QAAIlD,GAAmBne,KACnD,CAEYzK,WACV,OAAQjU,KAAKyK,MACX,KAAKmyB,GAAWoD,MACd,OAAOhgC,KAAKigC,MACd,KAAKrD,GAAWsD,WACd,OAAOlgC,KAAKmgC,WACd,KAAKvD,GAAWwD,KACd,OAAOpgC,KAAKqgC,KACd,KAAKzD,GAAW0D,SACd,OAAOtgC,KAAKka,SAKhB,OAAO,IACT,CAEI0nB,eACF,OAAO5hC,KAAKiU,KAAK2tB,QACnB,CAEIsF,yBACF,OAAOlnC,KAAK0gC,iBAAmB1gC,KAAK0gC,gBAAgBhgC,OAAS,CAC/D,CAEIymC,qBACF,OAAOnnC,KAAKygC,aAAezgC,KAAKygC,YAAY//B,OAAS,CACvD,CAEI0mC,wBACF,GAAIpnC,KAAKmnC,eACP,IAAK,IAAIzkC,EAAI,EAAGA,EAAI1C,KAAKygC,YAAY//B,OAAQgC,IAC3C,GAA+B,MAA3B1C,KAAKygC,YAAY/9B,GAAGoO,IACtB,OAAO,EAIb,OAAO,CACT,CAEIu2B,gBACF,OAAOrnC,KAAKugC,QAAUvgC,KAAKugC,OAAO7/B,OAAS,CAC7C,CAEI4mC,kCACF,OAAItnC,KAAKyK,OAASmyB,GAAWoD,OAAuB,MAAdhgC,KAAKigC,OAET,MAAvBjgC,KAAKigC,MAAM7mB,UAA4C,KAAxBpZ,KAAKigC,MAAM7mB,SAD5C,KAIFpZ,KAAKigC,MAAMnB,oBACpB,CAEIyI,gBACF,OAA2B,MAApBvnC,KAAK8/B,WACd,CAEIqB,yBACF,OAAOnhC,KAAKiU,KAAKktB,kBACnB,CAEAqG,iBAAiBtiC,G,MACf,MAAMg8B,EAA2C,QAAvB,EAAAlhC,KAAKmhC,0BAAkB,eAAE1zB,IAAIvI,GACvD,GAAyB,MAArBg8B,EACF,OAAO,KAGIlhC,KAAKiU,KAClB,OAAOjU,KAAKiU,KAAKitB,EAAkBH,YACrC,CAEA0G,mBAAmBviC,G,MACjB,OAAsC,QAA/B,EAAAlF,KAAKmhC,mBAAmB1zB,IAAIvI,UAAG,eAAE+7B,OAC1C,CAEA5/B,gBAAgB2F,G,UACd,MAAM0gC,EAAO,IAAIX,GACXhZ,EAAmC,MAApB/mB,EAAI+mB,aAAuB,KAAO,IAAInkB,KAAK5C,EAAI+mB,cAC9D+R,EAAiC,MAAnB94B,EAAI84B,YAAsB,KAAO,IAAIl2B,KAAK5C,EAAI84B,aAC5DW,EAA6B,QAAf,EAAAz5B,EAAIy5B,mBAAW,eAAEz/B,KAAK2F,GAAWi6B,GAAenlB,SAAS9U,KACvE45B,EAAmB,QAAV,EAAAv5B,EAAIu5B,cAAM,eAAEv/B,KAAKw/B,GAAWgC,GAAU/mB,SAAS+kB,KACxDE,EAAqC,QAAnB,EAAA15B,EAAI05B,uBAAe,eAAE1/B,KAAK2/B,GAAYiG,GAAoBnrB,SAASklB,KAU3F,OARAx5B,OAAOC,OAAOsgC,EAAM1gC,EAAK,CACvB+mB,aAAcA,EACd+R,YAAaA,EACbW,YAAaA,EACbF,OAAQA,EACRG,gBAAiBA,IAGX15B,EAAIyD,MACV,KAAKmyB,GAAWwD,KACdsH,EAAKrH,KAAOgB,GAAS5lB,SAASzU,EAAIq5B,MAClC,MACF,KAAKzD,GAAW0D,SACdoH,EAAKxtB,SAAW2oB,GAAapnB,SAASzU,EAAIkT,UAC1C,MACF,KAAK0iB,GAAWoD,MACd0H,EAAKzH,MAAQqG,GAAU7qB,SAASzU,EAAIi5B,OACpC,MACF,KAAKrD,GAAWsD,WACdwH,EAAKvH,WAAa0G,GAAeprB,SAASzU,EAAIm5B,YAMlD,OAAOuH,CACT,E,2SCxKK,MAAMC,WAAmB5xB,GAQ9BjW,YAAYkH,GACVlG,QACW,MAAPkG,IAIJhH,KAAKg9B,KAAOh2B,EAAIg2B,KAChBh9B,KAAKgW,iBACHhW,KACAgH,EACA,CACE9B,GAAI,KACJU,IAAK,KACLq3B,SAAU,KACVF,SAAU,KACVjsB,IAAK,MAEP,CAAC,KAAM,MAAO,aAElB,CAEMqE,QAAQhJ,EAAe6E,G,0CAC3B,MAAM02B,QAAa1nC,KAAKsW,WACtB,IAAIsqB,GAAe5gC,MACnB,CACE+8B,SAAU,MAEZ5wB,EACA6E,GAOF,OAJgB,MAAZhR,KAAK8Q,MACP42B,EAAK52B,UAAY9Q,KAAK4nC,qBAAqBz7B,EAAO6E,IAG7C02B,CACT,G,CAEcE,qBAAqBz7B,EAAe6E,G,0CAChD,IACgB,MAAVA,IACFA,QAAehR,KAAKqV,oBAAoBlJ,IAG1C,MAAMmJ,EAAiB,EAAMC,sBAAsBC,oBAC7CqyB,QAAiBvyB,EAAe0X,eAAehtB,KAAK8Q,IAAKE,GAC/D,OAAO,IAAIH,GAAmBg3B,E,CAC9B,MAAOt/B,G,CAGX,G,CAEc8M,oBAAoBlJ,G,0CAChC,MAAMsF,EAAgB,EAAM8D,sBAAsBG,mBAClD,OAAgB,MAATvJ,QACGsF,EAAckE,UAAUxJ,SACxBsF,EAAcmE,6BAC1B,G,CAEAkyB,mBACE,MAAMnhC,EAAI,IAAIm2B,GAcd,OAbAn2B,EAAEq2B,KAAOh9B,KAAKg9B,KACdh9B,KAAKoW,eACHpW,KACA2G,EACA,CACEzB,GAAI,KACJU,IAAK,KACLq3B,SAAU,KACVF,SAAU,KACVjsB,IAAK,MAEP,CAAC,KAAM,MAAO,aAETnK,CACT,CAEAtF,gBAAgB2F,GACd,GAAW,MAAPA,EACF,OAAO,KAGT,MAAM8J,EAAMuD,GAAUoH,SAASzU,EAAI8J,KAC7BisB,EAAW1oB,GAAUoH,SAASzU,EAAI+1B,UAExC,OAAO51B,OAAOC,OAAO,IAAIugC,GAAc3gC,EAAK,CAC1C8J,MACAisB,YAEJ,EClGK,MAAMqD,WAAarqB,GAQxBjW,YAAYkH,GACVlG,QACW,MAAPkG,GAIJhH,KAAKgW,iBACHhW,KACAgH,EACA,CACEm2B,eAAgB,KAChBC,MAAO,KACPC,OAAQ,KACRC,SAAU,KACVC,QAAS,KACTxX,KAAM,MAER,GAEJ,CAEA5Q,QAAQhJ,EAAe6E,GACrB,OAAOhR,KAAKsW,WACV,IAAI+qB,GACJ,CACElE,eAAgB,KAChBC,MAAO,KACPC,OAAQ,KACRC,SAAU,KACVC,QAAS,KACTxX,KAAM,MAER5Z,EACA6E,EAEJ,CAEA+2B,aACE,MAAMjjC,EAAI,IAAIo4B,GASd,OARAl9B,KAAKoW,eAAepW,KAAM8E,EAAG,CAC3Bq4B,eAAgB,KAChBC,MAAO,KACPC,OAAQ,KACRC,SAAU,KACVC,QAAS,KACTxX,KAAM,OAEDjhB,CACT,CAEAzD,gBAAgB2F,GACd,GAAW,MAAPA,EACF,OAAO,KAGT,MAAMm2B,EAAiB9oB,GAAUoH,SAASzU,EAAIm2B,gBACxCC,EAAQ/oB,GAAUoH,SAASzU,EAAIo2B,OAC/BC,EAAShpB,GAAUoH,SAASzU,EAAIq2B,QAChCC,EAAWjpB,GAAUoH,SAASzU,EAAIs2B,UAClCC,EAAUlpB,GAAUoH,SAASzU,EAAIu2B,SACjCxX,EAAO1R,GAAUoH,SAASzU,EAAI+e,MACpC,OAAO5e,OAAOC,OAAO,IAAIg5B,GAAQp5B,EAAK,CACpCm2B,iBACAC,QACAC,SACAC,WACAC,UACAxX,QAEJ,EC5EK,MAAMiiB,WAAcjyB,GAMzBjW,YAAYkH,GACVlG,QACW,MAAPkG,IAIJhH,KAAKyK,KAAOzD,EAAIyD,KAChBzK,KAAKy9B,SAAWz2B,EAAIy2B,SACpBz9B,KAAKgW,iBACHhW,KACAgH,EACA,CACEtF,KAAM,KACNkqB,MAAO,MAET,IAEJ,CAEAzW,QAAQhJ,EAAe6E,GACrB,OAAOhR,KAAKsW,WACV,IAAIksB,GAAUxiC,MACd,CACE0B,KAAM,KACNkqB,MAAO,MAETzf,EACA6E,EAEJ,CAEAi3B,cACE,MAAMzH,EAAI,IAAIhD,GAYd,OAXAx9B,KAAKoW,eACHpW,KACAwgC,EACA,CACE9+B,KAAM,KACNkqB,MAAO,KACPnhB,KAAM,KACNgzB,SAAU,MAEZ,CAAC,OAAQ,aAEJ+C,CACT,CAEAn/B,gBAAgB2F,GACd,GAAW,MAAPA,EACF,OAAO,KAGT,MAAMtF,EAAO2S,GAAUoH,SAASzU,EAAItF,MAC9BkqB,EAAQvX,GAAUoH,SAASzU,EAAI4kB,OAErC,OAAOzkB,OAAOC,OAAO,IAAI4gC,GAAShhC,EAAK,CACrCtF,OACAkqB,SAEJ,EClEK,MAAM0U,WAAiBvqB,GAoB5BjW,YAAYkH,GACVlG,QACW,MAAPkG,GAIJhH,KAAKgW,iBACHhW,KACAgH,EACA,CACE22B,MAAO,KACPC,UAAW,KACXC,WAAY,KACZC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,KAAM,KACNC,MAAO,KACPC,WAAY,KACZC,QAAS,KACTC,QAAS,KACTzyB,MAAO,KACP0yB,MAAO,KACPC,IAAK,KACLrlB,SAAU,KACVslB,eAAgB,KAChBC,cAAe,MAEjB,GAEJ,CAEAvpB,QAAQhJ,EAAe6E,GACrB,OAAOhR,KAAKsW,WACV,IAAIusB,GACJ,CACElF,MAAO,KACPC,UAAW,KACXC,WAAY,KACZC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,KAAM,KACNC,MAAO,KACPC,WAAY,KACZC,QAAS,KACTC,QAAS,KACTzyB,MAAO,KACP0yB,MAAO,KACPC,IAAK,KACLrlB,SAAU,KACVslB,eAAgB,KAChBC,cAAe,MAEjBvyB,EACA6E,EAEJ,CAEAk3B,iBACE,MAAMxlC,EAAI,IAAIg7B,GAqBd,OApBA19B,KAAKoW,eAAepW,KAAM0C,EAAG,CAC3Bi7B,MAAO,KACPC,UAAW,KACXC,WAAY,KACZC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,KAAM,KACNC,MAAO,KACPC,WAAY,KACZC,QAAS,KACTC,QAAS,KACTzyB,MAAO,KACP0yB,MAAO,KACPC,IAAK,KACLrlB,SAAU,KACVslB,eAAgB,KAChBC,cAAe,OAEVh8B,CACT,CAEArB,gBAAgB2F,GACd,GAAW,MAAPA,EACF,OAAO,KAGT,MAAM22B,EAAQtpB,GAAUoH,SAASzU,EAAI22B,OAC/BC,EAAYvpB,GAAUoH,SAASzU,EAAI42B,WACnCC,EAAaxpB,GAAUoH,SAASzU,EAAI62B,YACpCC,EAAWzpB,GAAUoH,SAASzU,EAAI82B,UAClCC,EAAW1pB,GAAUoH,SAASzU,EAAI+2B,UAClCC,EAAW3pB,GAAUoH,SAASzU,EAAIg3B,UAClCC,EAAW5pB,GAAUoH,SAASzU,EAAIi3B,UAClCC,EAAO7pB,GAAUoH,SAASzU,EAAIk3B,MAC9BC,EAAQ9pB,GAAUoH,SAASzU,EAAIm3B,OAC/BC,EAAa/pB,GAAUoH,SAASzU,EAAIo3B,YACpCC,EAAUhqB,GAAUoH,SAASzU,EAAIq3B,SACjCC,EAAUjqB,GAAUoH,SAASzU,EAAIs3B,SACjCzyB,EAAQwI,GAAUoH,SAASzU,EAAI6E,OAC/B0yB,EAAQlqB,GAAUoH,SAASzU,EAAIu3B,OAC/BC,EAAMnqB,GAAUoH,SAASzU,EAAIw3B,KAC7BrlB,EAAW9E,GAAUoH,SAASzU,EAAImS,UAClCslB,EAAiBpqB,GAAUoH,SAASzU,EAAIy3B,gBACxCC,EAAgBrqB,GAAUoH,SAASzU,EAAI03B,eAE7C,OAAOv3B,OAAOC,OAAO,IAAIk5B,GAAYt5B,EAAK,CACxC22B,QACAC,YACAC,aACAC,WACAC,WACAC,WACAC,WACAC,OACAC,QACAC,aACAC,UACAC,UACAzyB,QACA0yB,QACAC,MACArlB,WACAslB,iBACAC,iBAEJ,ECrJK,MAAMyJ,WAAiBpyB,GAI5BjW,YAAYkH,GACVlG,QACW,MAAPkG,IAIJhH,KAAKgJ,MAAQhC,EAAIgC,MACjBhJ,KAAKgW,iBACHhW,KACAgH,EACA,CACE43B,IAAK,MAEP,IAEJ,CAEAzpB,QAAQhJ,EAAe6E,GACrB,OAAOhR,KAAKsW,WACV,IAAIkuB,GAAaxkC,MACjB,CACE4+B,IAAK,MAEPzyB,EACA6E,EAEJ,CAEAo3B,iBACE,MAAMlJ,EAAI,IAAIP,GAUd,OATA3+B,KAAKoW,eACHpW,KACAk/B,EACA,CACEN,IAAK,KACL51B,MAAO,MAET,CAAC,UAEIk2B,CACT,CAEA79B,gBAAgB2F,GACd,GAAW,MAAPA,EACF,OAAO,KAGT,MAAM43B,EAAMvqB,GAAUoH,SAASzU,EAAI43B,KACnC,OAAOz3B,OAAOC,OAAO,IAAI+gC,GAAYnhC,EAAK,CACxC43B,OAEJ,E,2SCtDK,MAAMoB,WAAcjqB,GAQzBjW,YAAYkH,GACVlG,QACW,MAAPkG,IAIJhH,KAAK8+B,qBACyB,MAA5B93B,EAAI83B,qBAA+B,IAAIl1B,KAAK5C,EAAI83B,sBAAwB,KAC1E9+B,KAAKg/B,mBAAqBh4B,EAAIg4B,mBAC9Bh/B,KAAKgW,iBACHhW,KACAgH,EACA,CACEmS,SAAU,KACVC,SAAU,KACV2lB,KAAM,MAER,IAGE/3B,EAAIi4B,OACNj/B,KAAKi/B,KAAO,GACZj4B,EAAIi4B,KAAK54B,SAAS64B,IAChBl/B,KAAKi/B,KAAKnxB,KAAK,IAAIq6B,GAASjJ,GAAG,KAGrC,CAEM/pB,QAAQhJ,EAAe6E,G,0CAC3B,MAAM02B,QAAa1nC,KAAKsW,WACtB,IAAIgwB,GAAUtmC,MACd,CACEmZ,SAAU,KACVC,SAAU,KACV2lB,KAAM,MAER5yB,EACA6E,GAGF,GAAiB,MAAbhR,KAAKi/B,KAAc,CACrByI,EAAKzI,KAAO,GACZ,IAAK,IAAIv8B,EAAI,EAAGA,EAAI1C,KAAKi/B,KAAKv+B,OAAQgC,IAAK,CACzC,MAAMk8B,QAAY5+B,KAAKi/B,KAAKv8B,GAAGyS,QAAQhJ,EAAO6E,GAC9C02B,EAAKzI,KAAKnxB,KAAK8wB,E,EAInB,OAAO8I,CACT,G,CAEAW,cACE,MAAM9B,EAAI,IAAI1H,GAiBd,OAhBA0H,EAAEzH,qBAC6B,MAA7B9+B,KAAK8+B,qBAA+B9+B,KAAK8+B,qBAAqBxjB,cAAgB,KAChFirB,EAAEvH,mBAAqBh/B,KAAKg/B,mBAC5Bh/B,KAAKoW,eAAepW,KAAMumC,EAAG,CAC3BptB,SAAU,KACVC,SAAU,KACV2lB,KAAM,OAGS,MAAb/+B,KAAKi/B,MAAgBj/B,KAAKi/B,KAAKv+B,OAAS,IAC1C6lC,EAAEtH,KAAO,GACTj/B,KAAKi/B,KAAK54B,SAAS64B,IACjBqH,EAAEtH,KAAKnxB,KAAKoxB,EAAEkJ,iBAAiB,KAI5B7B,CACT,CAEAllC,gBAAgB2F,G,MACd,GAAW,MAAPA,EACF,OAAO,KAGT,MAAMmS,EAAW9E,GAAUoH,SAASzU,EAAImS,UAClCC,EAAW/E,GAAUoH,SAASzU,EAAIoS,UAClC2lB,EAAO1qB,GAAUoH,SAASzU,EAAI+3B,MAC9BD,EACwB,MAA5B93B,EAAI83B,qBAA+B,KAAO,IAAIl1B,KAAK5C,EAAI83B,sBACnDG,EAAe,QAAR,EAAAj4B,EAAIi4B,YAAI,eAAEj+B,KAAK49B,GAAauJ,GAAS1sB,SAASmjB,KAE3D,OAAOz3B,OAAOC,OAAO,IAAI44B,GAASh5B,EAAK,CACrCmS,WACAC,WACA2lB,OACAD,qBAAsBA,EACtBG,KAAMA,GAEV,ECrGK,MAAMxW,WAAiB1S,GAI5BjW,YAAYkH,GACVlG,QACW,MAAPkG,IAIJhH,KAAKgW,iBAAiBhW,KAAMgH,EAAK,CAC/BoS,SAAU,OAEZpZ,KAAKo/B,aAAe,IAAIx1B,KAAK5C,EAAIo4B,cACnC,CAEAjqB,QAAQhJ,EAAe6E,GACrB,OAAOhR,KAAKsW,WACV,IAAIswB,GAAoB5mC,MACxB,CACEoZ,SAAU,MAEZjN,EACA6E,EAEJ,CAEAs3B,wBACE,MAAM3H,EAAK,IAAIxB,GAKf,OAJAwB,EAAGvB,aAAep/B,KAAKo/B,aAAa9jB,cACpCtb,KAAKoW,eAAepW,KAAM2gC,EAAI,CAC5BvnB,SAAU,OAELunB,CACT,CAEAt/B,gBAAgB2F,GACd,GAAW,MAAPA,EACF,OAAO,KAGT,MAAMoS,EAAW/E,GAAUoH,SAASzU,EAAIoS,UAClCgmB,EAAmC,MAApBp4B,EAAIo4B,aAAuB,KAAO,IAAIx1B,KAAK5C,EAAIo4B,cAEpE,OAAOj4B,OAAOC,OAAO,IAAIqhB,GAAYzhB,EAAK,CACxCoS,WACAgmB,gBAEJ,EChDK,MAAMc,WAAmBnqB,GAG9BjW,YAAYkH,GACVlG,QACW,MAAPkG,IAIJhH,KAAKyK,KAAOzD,EAAIyD,KAClB,CAEA0K,QAAQhJ,EAAe6E,GACrB,OAAO9H,QAAQC,QAAQ,IAAI09B,GAAe7mC,MAC5C,CAEAuoC,mBACE,MAAMzB,EAAI,IAAIzH,GAEd,OADAyH,EAAEr8B,KAAOzK,KAAKyK,KACPq8B,CACT,CAEAzlC,gBAAgB2F,GACd,OAAW,MAAPA,EACK,KAGFG,OAAOC,OAAO,IAAI84B,GAAcl5B,EACzC,E,2SCfK,MAAMwhC,WAAezyB,GA2B1BjW,YAAYkH,EAAkBigC,EAAuB,MAEnD,GADAnmC,QA3BO,KAAAkmC,eAAiBrK,GAAe6L,OA4B5B,MAAPxhC,EAAJ,CAiCA,OA7BAhH,KAAKgW,iBACHhW,KACAgH,EACA,CACE9B,GAAI,KACJsF,eAAgB,KAChBg1B,SAAU,KACV99B,KAAM,KACNm+B,MAAO,MAET,CAAC,KAAM,iBAAkB,aAG3B7/B,KAAKyK,KAAOzD,EAAIyD,KAChBzK,KAAK4/B,SAAW54B,EAAI44B,SACpB5/B,KAAK2/B,oBAAsB34B,EAAI24B,oBAC/B3/B,KAAKy/B,KAAOz4B,EAAIy4B,KACQ,MAApBz4B,EAAI04B,aACN1/B,KAAK0/B,aAAe14B,EAAI04B,aAExB1/B,KAAK0/B,cAAe,EAEtB1/B,KAAK+tB,aAAmC,MAApB/mB,EAAI+mB,aAAuB,IAAInkB,KAAK5C,EAAI+mB,cAAgB,KAC5E/tB,KAAKu/B,cAAgBv4B,EAAIu4B,cACzBv/B,KAAKinC,UAAYA,EACjBjnC,KAAK8tB,aAAmC,MAApB9mB,EAAI8mB,aAAuB,IAAIlkB,KAAK5C,EAAI8mB,cAAgB,KAC5E9tB,KAAK8/B,YAAiC,MAAnB94B,EAAI84B,YAAsB,IAAIl2B,KAAK5C,EAAI84B,aAAe,KACzE9/B,KAAK+/B,SAAW/4B,EAAI+4B,SAEZ//B,KAAKyK,MACX,KAAKmyB,GAAWoD,MACdhgC,KAAKigC,MAAQ,IAAID,GAAMh5B,EAAIi5B,OAC3B,MACF,KAAKrD,GAAWsD,WACdlgC,KAAKmgC,WAAa,IAAID,GAAWl5B,EAAIm5B,YACrC,MACF,KAAKvD,GAAWwD,KACdpgC,KAAKqgC,KAAO,IAAID,GAAKp5B,EAAIq5B,MACzB,MACF,KAAKzD,GAAW0D,SACdtgC,KAAKka,SAAW,IAAIomB,GAASt5B,EAAIkT,UAMd,MAAnBlT,EAAIy5B,YACNzgC,KAAKygC,YAAcz5B,EAAIy5B,YAAYz/B,KAAK2F,GAAM,IAAIghC,GAAWhhC,KAE7D3G,KAAKygC,YAAc,KAGH,MAAdz5B,EAAIu5B,OACNvgC,KAAKugC,OAASv5B,EAAIu5B,OAAOv/B,KAAKw/B,GAAM,IAAIwH,GAAMxH,KAE9CxgC,KAAKugC,OAAS,KAGW,MAAvBv5B,EAAI05B,gBACN1gC,KAAK0gC,gBAAkB15B,EAAI05B,gBAAgB1/B,KAAK2/B,GAAO,IAAIlY,GAASkY,KAEpE3gC,KAAK0gC,gBAAkB,I,CAE3B,CAEMvrB,QAAQnE,G,0CACZ,MAAMy3B,EAAQ,IAAI1B,GAAW/mC,MAY7B,aAVMA,KAAKsW,WACTmyB,EACA,CACE/mC,KAAM,KACNm+B,MAAO,MAET7/B,KAAKwK,eACLwG,GAGMhR,KAAKyK,MACX,KAAKmyB,GAAWoD,MACdyI,EAAMxI,YAAcjgC,KAAKigC,MAAM9qB,QAAQnV,KAAKwK,eAAgBwG,GAC5D,MACF,KAAK4rB,GAAWsD,WACduI,EAAMtI,iBAAmBngC,KAAKmgC,WAAWhrB,QAAQnV,KAAKwK,eAAgBwG,GACtE,MACF,KAAK4rB,GAAWwD,KACdqI,EAAMpI,WAAargC,KAAKqgC,KAAKlrB,QAAQnV,KAAKwK,eAAgBwG,GAC1D,MACF,KAAK4rB,GAAW0D,SACdmI,EAAMvuB,eAAiBla,KAAKka,SAAS/E,QAAQnV,KAAKwK,eAAgBwG,GAMtE,MAAM7E,EAAQnM,KAAKwK,eAEnB,GAAwB,MAApBxK,KAAKygC,aAAuBzgC,KAAKygC,YAAY//B,OAAS,EAAG,CAC3D,MAAM+/B,EAAqB,SACrBzgC,KAAKygC,YAAYiI,QAAO,CAACC,EAASC,IAC/BD,EACJhyB,MAAK,IACGiyB,EAAWzzB,QAAQhJ,EAAO6E,KAElC2F,MAAMkyB,IACLpI,EAAY3yB,KAAK+6B,EAAc,KAElC3/B,QAAQC,WACXs/B,EAAMhI,YAAcA,C,CAGtB,GAAmB,MAAfzgC,KAAKugC,QAAkBvgC,KAAKugC,OAAO7/B,OAAS,EAAG,CACjD,MAAM6/B,EAAgB,SAChBvgC,KAAKugC,OAAOmI,QAAO,CAACC,EAASG,IAC1BH,EACJhyB,MAAK,IACGmyB,EAAM3zB,QAAQhJ,EAAO6E,KAE7B2F,MAAMoyB,IACLxI,EAAOzyB,KAAKi7B,EAAS,KAExB7/B,QAAQC,WACXs/B,EAAMlI,OAASA,C,CAGjB,GAA4B,MAAxBvgC,KAAK0gC,iBAA2B1gC,KAAK0gC,gBAAgBhgC,OAAS,EAAG,CACnE,MAAMggC,EAAyB,SACzB1gC,KAAK0gC,gBAAgBgI,QAAO,CAACC,EAAShI,IACnCgI,EACJhyB,MAAK,IACGgqB,EAAGxrB,QAAQhJ,EAAO6E,KAE1B2F,MAAMqyB,IACLtI,EAAgB5yB,KAAKk7B,EAAM,KAE9B9/B,QAAQC,WACXs/B,EAAM/H,gBAAkBA,C,CAG1B,OAAO+H,CACT,G,CAEAQ,eACE,MAAMnkC,EAAI,IAAIw6B,GAoBd,OAnBAx6B,EAAEI,GAAKlF,KAAKkF,GACZJ,EAAE0F,eAAiBxK,KAAKwK,eACxB1F,EAAE06B,SAAWx/B,KAAKw/B,SAClB16B,EAAE26B,KAAOz/B,KAAKy/B,KACd36B,EAAE46B,aAAe1/B,KAAK0/B,aACtB56B,EAAE66B,oBAAsB3/B,KAAK2/B,oBAC7B76B,EAAE86B,SAAW5/B,KAAK4/B,SAClB96B,EAAEipB,aAAoC,MAArB/tB,KAAK+tB,aAAuB/tB,KAAK+tB,aAAazS,cAAgB,KAC/ExW,EAAE2F,KAAOzK,KAAKyK,KACd3F,EAAEy6B,cAAgBv/B,KAAKu/B,cACvBz6B,EAAEgpB,aAAoC,MAArB9tB,KAAK8tB,aAAuB9tB,KAAK8tB,aAAaxS,cAAgB,KAC/ExW,EAAEg7B,YAAkC,MAApB9/B,KAAK8/B,YAAsB9/B,KAAK8/B,YAAYxkB,cAAgB,KAC5ExW,EAAEi7B,SAAW//B,KAAK+/B,SAElB//B,KAAKoW,eAAepW,KAAM8E,EAAG,CAC3BpD,KAAM,KACNm+B,MAAO,OAGD/6B,EAAE2F,MACR,KAAKmyB,GAAWoD,MACdl7B,EAAEm7B,MAAQjgC,KAAKigC,MAAMoI,cACrB,MACF,KAAKzL,GAAWsD,WACdp7B,EAAEq7B,WAAangC,KAAKmgC,WAAWoI,mBAC/B,MACF,KAAK3L,GAAWwD,KACdt7B,EAAEu7B,KAAOrgC,KAAKqgC,KAAK0H,aACnB,MACF,KAAKnL,GAAW0D,SACdx7B,EAAEoV,SAAWla,KAAKka,SAASguB,iBAe/B,OATmB,MAAfloC,KAAKugC,SACPz7B,EAAEy7B,OAASvgC,KAAKugC,OAAOv/B,KAAKw/B,GAAMA,EAAEyH,iBAEd,MAApBjoC,KAAKygC,cACP37B,EAAE27B,YAAczgC,KAAKygC,YAAYz/B,KAAK2F,GAAMA,EAAEmhC,sBAEpB,MAAxB9nC,KAAK0gC,kBACP57B,EAAE47B,gBAAkB1gC,KAAK0gC,gBAAgB1/B,KAAK2/B,GAAOA,EAAG2H,2BAEnDxjC,CACT,CAEAzD,gBAAgB2F,G,UACd,GAAW,MAAPA,EACF,OAAO,KAGT,MAAMf,EAAS,IAAIuiC,GACb9mC,EAAO2S,GAAUoH,SAASzU,EAAItF,MAC9Bm+B,EAAQxrB,GAAUoH,SAASzU,EAAI64B,OAC/B9R,EAAmC,MAApB/mB,EAAI+mB,aAAuB,KAAO,IAAInkB,KAAK5C,EAAI+mB,cAC9D+R,EAAiC,MAAnB94B,EAAI84B,YAAsB,KAAO,IAAIl2B,KAAK5C,EAAI84B,aAC5DW,EAA6B,QAAf,EAAAz5B,EAAIy5B,mBAAW,eAAEz/B,KAAK2F,GAAWghC,GAAWlsB,SAAS9U,KACnE45B,EAAmB,QAAV,EAAAv5B,EAAIu5B,cAAM,eAAEv/B,KAAKw/B,GAAWwH,GAAMvsB,SAAS+kB,KACpDE,EAAqC,QAAnB,EAAA15B,EAAI05B,uBAAe,eAAE1/B,KAAK2/B,GAAYlY,GAAShN,SAASklB,KAYhF,OAVAx5B,OAAOC,OAAOnB,EAAQe,EAAK,CACzBtF,OACAm+B,QACA9R,eACA+R,cACAW,cACAF,SACAG,oBAGM15B,EAAIyD,MACV,KAAKmyB,GAAWwD,KACdn6B,EAAOo6B,KAAOD,GAAK3kB,SAASzU,EAAIq5B,MAChC,MACF,KAAKzD,GAAW0D,SACdr6B,EAAOiU,SAAWomB,GAAS7kB,SAASzU,EAAIkT,UACxC,MACF,KAAK0iB,GAAWoD,MACd/5B,EAAOg6B,MAAQD,GAAMvkB,SAASzU,EAAIi5B,OAClC,MACF,KAAKrD,GAAWsD,WACdj6B,EAAOk6B,WAAaD,GAAWzkB,SAASzU,EAAIm5B,YAMhD,OAAOl6B,CACT,ECpRF,MAAMijC,GAA+D,CACnE,CAACvM,GAAe6L,QAASA,GAAO/sB,SAChC,CAACkhB,GAAeoK,YAAaA,GAAWtrB,U,2SCAnC,MAAM0tB,WAAgDjO,GAA7D,c,oBAIU,KAAAkO,OAAS,IAAI9gB,GAAA,CAmEvB,CA7DQkU,aACJC,EACA3rB,G,gDAEA,GAAa,MAAT2rB,GAAiBA,EAAM/7B,OAAS,EAClC,MAAO,GAGTV,KAAKuhB,WAAW0Y,KAAK,4CAEV,QAAX,EAAAj6B,KAAKqpC,cAAM,QAAXrpC,KAAKqpC,OAAW,IAAIC,OAClB,IAAIr/B,IAEF,oBAKJjK,KAAKupC,iBAEL,MAAM78B,EAAU,CACdxH,GAAI,EAAM8yB,UACVyE,MAAOA,EACP3rB,IAAKA,GAKP,OAFA9Q,KAAKqpC,OAAOG,YAAYrY,KAAKsY,UAAU/8B,UAE1B,EAAAH,EAAA,IACX,EAAAm9B,GAAA,GAAU1pC,KAAKqpC,OAAQ,WAAW9/B,MAChC,EAAAjC,GAAA,IAAQvH,IAA0B,MAAC,OAAa,QAAb,EAAAA,EAASgB,YAAI,eAAEmE,MAAOwH,EAAQxH,EAAE,KACnE,SAAKnF,GAAaoxB,KAAKC,MAAMrxB,EAASgB,KAAK07B,UAC3C,SAAKA,GACHA,EAAMz7B,KAAK2oC,IDxCd,IACLC,ECyCU,ODzCVA,ECwCqDD,EAAS3C,eDtCvDkC,GAAkBU,ICuCID,EAAS,OAGhC,EAAAE,GAAA,GAAU7pC,KAAKopC,SACf,EAAAU,GAAAvX,GAAe,K,IAKbxB,Q,MACN/wB,KAAKopC,OAAOhf,OACD,QAAX,EAAApqB,KAAKqpC,cAAM,SAAEU,YACb/pC,KAAKqpC,OAAS,KACdrpC,KAAKmrB,cACP,CAEQoe,iBACNvpC,KAAKmrB,eACLnrB,KAAKgqC,QAAU5gC,YAAW,IAAMpJ,KAAK+wB,SAjEvB,KAkEhB,CAEQ5F,eACc,MAAhBnrB,KAAKgqC,SACP7e,aAAanrB,KAAKgqC,QAEtB,E,2SC7EK,MAAMC,GACXnqC,YAAoByhB,GAAA,KAAAA,WAAAA,CAAyB,CAEvC2oB,OAAOtkC,EAAa7E,EAAsBopC,G,0CAC9C,OAAIppC,EAAKqC,OAAOG,YAPgB,gBAQjBvD,KAAKoqC,gBAAgBxkC,EAAK7E,SAE1Bf,KAAKqqC,kBAAkBzkC,EAAK7E,EAAMopC,EAEnD,G,CACcC,gBAAgBxkC,EAAa7E,G,0CACzC,MAAMupC,EAAY,EAAMzkC,OAAOD,GACzBiS,EAAU,IAAI0yB,QAAQ,CAC1B,aAAa,IAAI3gC,MAAO4gC,cACxB,eAAgBF,EAAUG,aAAah9B,IAAI,MAC3C,iBAAkB1M,EAAKqC,OAAOG,WAAWF,WACzC,iBAAkB,cAGdqJ,EAAU,IAAIg+B,QAAQ9kC,EAAK,CAC/B+kC,KAAM5pC,EAAKqC,OACXwnC,MAAO,WACPC,OAAQ,MACRhzB,QAASA,IAGLizB,QAAqBC,MAAMr+B,GAEjC,GAA4B,MAAxBo+B,EAAaj+B,OACf,MAAM,IAAIzM,MAAM,gCAAgC0qC,EAAaj+B,SAEjE,G,CACcw9B,kBACZzkC,EACA7E,EACAopC,G,0CAEA,MAAMa,EAAU,EAAMnlC,OAAOD,GACvBqlC,EAAYjrC,KAAKkrC,gBAAgBF,EAAQP,aAAah9B,IAAI,OAChE,IAAI09B,EAAa,EACjB,MAAMC,EAAYpmC,KAAKqmC,KAAKtqC,EAAKqC,OAAOG,WAAa0nC,GAC/CK,EAAyB,GAE/B,GAAIF,EA7CoB,IA8CtB,MAAM,IAAIhrC,MACR,+CA/CoB,IA+C2B6qC,GAKnD,IACE,KAAOE,EAAaC,GAAW,CAC7BxlC,QAAY5F,KAAKurC,oBAAoB3lC,EAAKukC,GAC1C,MAAMqB,EAAW,EAAM3lC,OAAOD,GACxB6lC,EAAUzrC,KAAK0rC,eAAeP,GACpCK,EAASf,aAAakB,OAAO,OAAQ,SACrCH,EAASf,aAAakB,OAAO,UAAWF,GACxC,MAAMG,EAAQT,EAAaF,EACrBY,EAAY9qC,EAAKqC,OAAOzC,MAAMirC,EAAOA,EAAQX,GAC7Ca,EAAe,IAAIvB,QAAQ,CAC/B,aAAa,IAAI3gC,MAAO4gC,cACxB,eAAgBgB,EAASf,aAAah9B,IAAI,MAC1C,iBAAkBo+B,EAAUtoC,WAAWF,aAGnC0oC,EAAe,IAAIrB,QAAQc,EAASnoC,WAAY,CACpDsnC,KAAMkB,EACNjB,MAAO,WACPC,OAAQ,MACRhzB,QAASi0B,IAGLE,QAAsBjB,MAAMgB,GAElC,GAA6B,MAAzBC,EAAcn/B,OAAgB,CAChC,MAAM2G,EAAU,2CAA2Cw4B,EAAcn/B,SAEzE,MADA7M,KAAKuhB,WAAWuC,MAAMtQ,EAAU,YAAcw4B,EAAc1tB,SACtD,IAAIle,MAAMoT,E,CAGlB83B,EAAax9B,KAAK29B,GAClBN,G,CAGFvlC,QAAY5F,KAAKurC,oBAAoB3lC,EAAKukC,GAC1C,MAAM8B,EAAe,EAAMpmC,OAAOD,GAC5BsmC,EAAelsC,KAAKksC,aAAaZ,GACvCW,EAAaxB,aAAakB,OAAO,OAAQ,aACzC,MAAM9zB,EAAU,IAAI0yB,QAAQ,CAC1B,aAAa,IAAI3gC,MAAO4gC,cACxB,eAAgByB,EAAaxB,aAAah9B,IAAI,MAC9C,iBAAkBy+B,EAAaxrC,OAAO2C,aAGlCqJ,EAAU,IAAIg+B,QAAQuB,EAAa5oC,WAAY,CACnDsnC,KAAMuB,EACNtB,MAAO,WACPC,OAAQ,MACRhzB,QAASA,IAGL9X,QAAiBgrC,MAAMr+B,GAE7B,GAAwB,MAApB3M,EAAS8M,OAAgB,CAC3B,MAAM2G,EAAU,gDAAgDzT,EAAS8M,SAEzE,MADA7M,KAAKuhB,WAAWuC,MAAMtQ,EAAU,YAAczT,EAASue,SACjD,IAAIle,MAAMoT,E,EAElB,MAAOjL,GACP,MAAMA,C,CAEV,G,CAEcgjC,oBACZ3lC,EACAukC,G,gDAEA,MAAMG,EAAY,EAAMzkC,OAAOD,GACzBumC,EAAS,IAAIviC,KAAqC,QAAhC,EAAA0gC,EAAUG,aAAah9B,IAAI,aAAK,QAAI,IAM5D,OAJIhG,MAAM0kC,EAAOxiC,YACfwiC,EAAOC,QAAQxiC,KAAKC,MAAQ,MAG1BsiC,EAAOxiC,UAAYC,KAAKC,MAAQ,UACrBsgC,IAERvkC,C,IAGD8lC,eAAeP,GAErB,MAAMkB,GACJ,mDAAqDlB,EAAW9nC,YAChE1C,OAAO,IACT,OAAO,EAAM2rC,cAAcD,EAC7B,CAEQH,aAAaK,GACnB,IAAIC,EAAM,oDAKV,OAJAD,EAAYlmC,SAASolC,IACnBe,GAAO,WAAWf,YAAkB,IAEtCe,GAAO,eACAA,CACT,CAEQtB,gBAAgBjwB,GACtB,OAAIwxB,GAAQ3lC,QAAQmU,EAAS,eAAiB,EACrC,UACEwxB,GAAQ3lC,QAAQmU,EAAS,eAAiB,EAC5C,UAEA,OAEX,EAGF,MAAMwxB,GAQJprC,eAAesF,EAA+BC,GAS5C,MARiB,iBAAND,IACTA,EAAI,IAAI8lC,GAAQ9lC,IAGD,iBAANC,IACTA,EAAI,IAAI6lC,GAAQ7lC,IAGXD,EAAEq7B,OAASp7B,EAAEo7B,KAChBr7B,EAAEq7B,KAAOp7B,EAAEo7B,KACXr7B,EAAE+lC,QAAU9lC,EAAE8lC,MACd/lC,EAAE+lC,MAAQ9lC,EAAE8lC,MACZ/lC,EAAEgmC,MAAQ/lC,EAAE+lC,IACZhmC,EAAEgmC,IAAM/lC,EAAE+lC,IACV,CACN,CAKA7sC,YAAYmb,GAJZ,KAAA+mB,KAAO,EACP,KAAA0K,MAAQ,EACR,KAAAC,IAAM,EAGJ,IACE,MAAMpmC,EAAQ0U,EAAQ7U,MAAM,KAAKpF,KAAK4rC,GAAMplC,OAAO1E,SAAS8pC,EAAG,MAC/D5sC,KAAKgiC,KAAOz7B,EAAM,GAClBvG,KAAK0sC,MAAQnmC,EAAM,GACnBvG,KAAK2sC,IAAMpmC,EAAM,E,CACjB,S,CAGJ,CAOAO,QAAQ+lC,GACN,OAAOJ,GAAQ3lC,QAAQ9G,KAAM6sC,EAC/B,E,2SCjNK,MAAMC,GACL5C,OACJ6C,EACAC,EACAC,G,0CAEA,MAAMC,EAAK,IAAIC,SACf,IACE,MAAMC,EAAO,IAAIC,KAAK,CAACL,EAAkB5pC,QAAS,CAAEqH,KAAM,6BAC1DyiC,EAAGvB,OAAO,OAAQyB,EAAML,E,CACxB,MAAOxkC,GACP,IAAI,EAAMhH,QAAW,EAAMI,UAUzB,MAAM4G,EATN2kC,EAAGvB,OACD,OACAtpC,OAAOC,KAAK0qC,EAAkB5pC,QAC9B,CACEkqC,SAAUP,EACVQ,YAAa,4B,OAQfN,EAAQC,EAChB,G,6SCjBK,MAAMM,GAIX1tC,YAAsByhB,GAAA,KAAAA,WAAAA,EACpBvhB,KAAKytC,uBAAyB,IAAIxD,GAAuB1oB,GACzDvhB,KAAK0tC,2BAA6B,IAAIZ,EACxC,CAEM5C,OACJyD,EACA5Q,EACAiQ,EACAY,G,0CAEA,IACE,OAAQD,EAAWE,gBACjB,KAAKx+B,EAAey+B,aACZ9tC,KAAK0tC,2BAA2BxD,OACpCnN,EAASjoB,gBACTk4B,GACCE,GAAOU,EAAkBG,WAAWb,KAEvC,MACF,KAAK79B,EAAe2+B,YACZhuC,KAAKytC,uBAAuBvD,OAChCyD,EAAW/nC,IACXonC,EACAY,EAAkBK,oBAEpB,MAEF,QACE,MAAM,IAAI7tC,MAAM,4B,CAEpB,MAAOmI,GAEP,YADMqlC,EAAkBM,WAClB3lC,C,CAEV,G,ECjDK,MAAe4lC,IAOf,MAAeC,WAAqCD,GAA3D,c,oBAGW,KAAA1jC,KAAO2jC,GAA6BC,IAI/C,EALkB,GAAAA,KAAO,uB,2SCTlB,MAAMC,WAA6BF,GAA1C,c,oBACU,KAAAG,MAAQ,IAAIpoC,GA8BtB,CA5BEsH,IAAOqD,GACL,GAAI9Q,KAAKuuC,MAAMja,IAAIxjB,GAAM,CACvB,MAAM9J,EAAMhH,KAAKuuC,MAAM9gC,IAAIqD,GAC3B,OAAO5H,QAAQC,QAAQnC,E,CAEzB,OAAOkC,QAAQC,QAAQ,KACzB,CAEMmrB,IAAIxjB,G,0CACR,OAAgC,aAAlB9Q,KAAKyN,IAAIqD,GACzB,G,CAEA/C,KAAK+C,EAAa9J,GAChB,OAAW,MAAPA,EACKhH,KAAKwuC,OAAO19B,IAErB9Q,KAAKuuC,MAAM/nC,IAAIsK,EAAK9J,GACbkC,QAAQC,UACjB,CAEAqlC,OAAO19B,GAEL,OADA9Q,KAAKuuC,MAAME,OAAO39B,GACX5H,QAAQC,SACjB,CAEAulC,eAAkB59B,GAChB,OAAO9Q,KAAKyN,IAAOqD,EACrB,E,2SCNF,MAAM69B,GAAoC,CACxC5uB,YAAa,cACb6uB,eAAgB,iBAChBC,wBAAyB,0BACzBC,0BAA2B,4BAC3BC,4BAA6B,8BAC7BC,8BAA+B,gCAC/BC,cAAe,gBACfC,gBAAiB,YACjBC,eAAgB,oBAChBh3B,SAAU,kBACVwP,aAAc,sBACdynB,mBAAoB,qBACpBC,6BAA8B,+BAC9B3J,gBAAiB,kBACjB4J,4BAA6B,8BAC7BC,4BAA6B,yBAC7BC,oBAAqB,sBACrBC,oBAAqB,sBACrBC,mCAAoC,qCACpCC,uBAAwB,yBACxBC,eAAgB,iBAChBC,UAAW,YACXC,wBAAyB,0BACzBC,6BAA8B,+BAC9BC,cAAe,gBACfC,kBAAmB,uBACnBC,yBAA0B,2BAC1BC,gBAAiB,mBACjBC,yBAA0B,2BAC1BC,oCAAqC,sCACrCC,kBAAmB,oBACnBC,gBAAiB,kBACjBC,qBAAsB,uBACtBC,kBAAmB,uBACnBC,WAAY,aACZ1/B,OAAQ,SACR2/B,WAAY,aACZC,WAAY,gBACZC,gBAAiB,kBACjBC,SAAU,WACVC,WAAY,aACZ1zB,gBAAiB,kBACjBooB,kBAAmB,oBACnBuL,gBAAiB,kBACjBvyB,mBAAoB,qBACpBwyB,QAAS,2BACTC,iBAAkB,mBAClB3wB,IAAK,MACLC,cAAe,gBACf1P,IAAK,MACLqgC,QAAS,UACTC,WAAY,aACZnK,UAAW,iBACXoK,OAAQ,SACRC,eAAgB,iBAChBC,0BAA2B,+BAC3BC,aAAc,eACdC,2BAA4B,6BAC5BC,YAAa,cACbC,0BAA2B,4BAC3Bp0B,aAAc,kBACdq0B,aAAc,eACdzxB,aAAc,eACd0xB,gBAAiB,kBACjBC,cAAe,mBACfC,SAAU,WACVC,MAAO,gBACP5a,MAAO,QACP6a,UAAW,YACXhmC,OAAQ,SACRimC,cAAe,mBACf50B,mBAAoB,qBACpB60B,aAAc,aACdC,gBAAiB,mBAGbC,GAA2C,CAC/C/1B,QAAS,WACTG,YAAa,eACbF,QAAS,WACT+1B,SAAU,YACVjmC,SAAU,YACVuM,eAAgB,kBAChB25B,cAAe,iBACf7kC,UAAW,aACX8O,MAAO,SACPyB,SAAU,aAGN5W,GACI,SADJA,GAEmB,wBAFnBA,GAGU,eAHVA,GAIiB,sBAJjBA,GAKa,kBAGbmrC,GACK,kBADLA,GAEU,uBAFVA,GAGO,aAGN,MAAMC,GAIX3yC,YACY23B,EACAib,EACAC,GAFA,KAAAlb,eAAAA,EACA,KAAAib,qBAAAA,EACA,KAAAC,aAAAA,CACT,CAEGC,iB,0CACJ,MAAMC,QAA4B7yC,KAAK8yC,yBACvC,OAA8B,MAAvBD,GAA+BA,EAAsBpiC,EAAasiC,MAC3E,G,CAEMC,U,0CACJ,IAAIH,QAA4B7yC,KAAK8yC,yBACrC,KAAOD,EAAsBpiC,EAAasiC,QAAQ,CAChD,OAAQF,GACN,KAAKpiC,EAAa8mB,UACVv3B,KAAKizC,uBACX,MACF,KAAKxiC,EAAayiC,UACVlzC,KAAKmzC,uBACX,MACF,KAAK1iC,EAAa2iC,YACVpzC,KAAKqzC,uBACX,MACF,KAAK5iC,EAAa6iC,KAAM,CACtB,MAAMC,QAA8BvzC,KAAKwzC,2BACzC,IAAK,MAAMC,KAAWF,EAAuB,CAC3C,MAAMG,QAAwB1zC,KAAK2zC,uBAAuBF,SACpDzzC,KAAKwG,IAAIitC,EAAQz1B,QAAQ/R,OAAQynC,E,OAEnC1zC,KAAK4zC,uBAAuBnjC,EAAaojC,MAC/C,K,CAEF,KAAKpjC,EAAaojC,KAAM,CACtB,MAAMN,QAA8BvzC,KAAKwzC,2BACzC,IAAK,MAAMC,KAAWF,EAAuB,CAC3C,MAAMG,QAAwB1zC,KAAK8zC,uBAAuBL,SACpDzzC,KAAKwG,IAAIitC,EAAQz1B,QAAQ/R,OAAQynC,E,OAEnC1zC,KAAK4zC,uBAAuBnjC,EAAasjC,KAC/C,K,CAEF,KAAKtjC,EAAasjC,IAAK,CACrB,MAAMR,QAA8BvzC,KAAKwzC,2BACnCQ,QAAiBh0C,KAAKi0C,aAC5B,IAAK,MAAMR,KAAWF,EAAuB,CAC3C,MAAMG,QAAwB1zC,KAAKk0C,uBACjCF,aAAO,EAAPA,EAASG,uBACTV,SAEIzzC,KAAKwG,IAAIitC,EAAQz1B,QAAQ/R,OAAQynC,E,CAErCM,UACKA,EAAQG,6BAEXn0C,KAAKwG,IAAIa,GAAa2sC,SACtBh0C,KAAK4zC,uBAAuBnjC,EAAa2jC,M,EAInDvB,GAAuB,C,CAE3B,G,CAEgBI,uB,4IACd,MAAMoB,EAAqBC,GAA4B,mCACrD,IAAK,MAAMxjC,KAAO69B,GACL,MAAP79B,UAGE9Q,KAAKwG,IAAImoC,GAAO79B,GAAM,OAE9B,GAAsB,MAAlBwjC,EACF,IAAK,MAAMC,KAAalC,GACL,MAAbkC,UAGEv0C,KAAKwG,IAAI6rC,GAAckC,GAAatoC,EAAQ,MAGxD,IAQM+nC,EACsC,QAAzC,QAAMh0C,KAAKyN,IAAiBpG,WAAa,QAAIrH,KAAK2yC,aAAa3b,aAAa,MAC/Egd,EAAQ1c,aAAe7mB,EAAayiC,IACpCc,EAAQ32B,gBACmD,QAAxD,QAAMrd,KAAKyN,IAAqBkhC,GAAOtxB,wBAAiB,QAAI22B,EAAQ32B,gBACvE22B,EAAQ3C,OAAgD,QAAtC,QAAMrxC,KAAKyN,IAAYkhC,GAAO0C,eAAQ,QAAI2C,EAAQ3C,OACpE2C,EAAQG,uBACuD,QAA5D,QAAMn0C,KAAKyN,IAAakhC,GAAOY,oCAA6B,QAC7DyE,EAAQG,uBACVH,EAAQvC,2BACqD,QAA1D,QAAMzxC,KAAKyN,IAAYkhC,GAAO8C,mCAA4B,QAC3DuC,EAAQvC,2BACVuC,EAAQnC,gBAC0C,QAA/C,QAAM7xC,KAAKyN,IAAYkhC,GAAOkD,wBAAiB,QAAImC,EAAQnC,gBAC9DmC,EAAQQ,0BACwC,QAA7C,QAAMx0C,KAAKyN,IAAYkhC,GAAOmD,sBAAe,QAAIkC,EAAQQ,0BAC5DR,EAAQjC,SAAiD,QAArC,QAAM/xC,KAAKyN,IAASkhC,GAAOoD,iBAAU,QAAIiC,EAAQjC,SACrEiC,EAAQ5B,gBAC0C,QAA/C,QAAMpyC,KAAKyN,IAAYkhC,GAAOyD,wBAAiB,QAAI4B,EAAQ5B,gBAC9D4B,EAAQ5c,MAAiD,QAAxC,QAAMp3B,KAAKyN,IAAekhC,GAAOvX,cAAO,QAAI4c,EAAQ5c,MACrE4c,EAAQ7B,aAA4D,QAA5C,QAAMnyC,KAAKyN,IAAYkhC,GAAOwD,qBAAc,QAAI6B,EAAQ7B,aAChF6B,EAAQ12B,mBAC6C,QAAlD,QAAMtd,KAAKyN,IAAYkhC,GAAOrxB,2BAAoB,QAAI02B,EAAQ12B,mBACjE02B,EAAQ5yC,OAAqD,QAA3C,QAAMpB,KAAKyN,IAASkhC,GAAO2C,uBAAgB,QAAI0C,EAAQ5yC,OACzE4yC,EAAQtD,WAAyD,QAA3C,QAAM1wC,KAAKyN,IAAakhC,GAAO+B,mBAAY,QAAIsD,EAAQtD,WAC7EsD,EAAQxD,qBACgD,QAArD,QAAMxwC,KAAKyN,IAAakhC,GAAO6B,6BAAsB,QAAIwD,EAAQxD,qBACpEwD,EAAQ1D,kBAC6C,QAAlD,QAAMtwC,KAAKyN,IAAakhC,GAAO2B,0BAAmB,QAAI0D,EAAQ1D,kBACjE0D,EAAQvD,kBAC6C,QAAlD,QAAMzwC,KAAKyN,IAAakhC,GAAO8B,0BAAmB,QAAIuD,EAAQvD,kBACjEuD,EAAQtC,YAA2D,QAA5C,QAAM1xC,KAAKyN,IAAakhC,GAAO+C,oBAAa,QAAIsC,EAAQtC,YAC/EsC,EAAQpF,eAC0C,QAA/C,QAAM5uC,KAAKyN,IAAakhC,GAAOC,uBAAgB,QAAIoF,EAAQpF,eAC9DoF,EAAQ5D,yBACoD,QAAzD,QAAMpwC,KAAKyN,IAAakhC,GAAOyB,iCAA0B,QAC1D4D,EAAQ5D,yBACV4D,EAAQ3D,oCAC+D,QAApE,QAAMrwC,KAAKyN,IAAakhC,GAAO0B,4CAAqC,QACrE2D,EAAQ3D,oCAEV,MAAMpkC,EACmC,QAAtC,QAAMjM,KAAKyN,IAAYkhC,GAAO1iC,eAAQ,cAAWjM,KAAKyN,IAAYkhC,GAAOmC,UAEtE2D,EAAiBz0C,KAAK2yC,aAAa1b,cAAc,MACjDyd,EAAmC,CACvCC,wBAC2D,QAAxD,QAAM30C,KAAKyN,IAAakhC,GAAOE,gCAAyB,QACzD4F,EAAex2B,SAAS02B,wBAC1B7F,0BAC6D,QAA1D,QAAM9uC,KAAKyN,IAAakhC,GAAOG,kCAA2B,QAC3D2F,EAAex2B,SAAS6wB,0BAC1BI,gBACmD,QAAhD,QAAMlvC,KAAKyN,IAAakhC,GAAOO,wBAAiB,QACjDuF,EAAex2B,SAASixB,gBAC1BC,eACiD,QAA9C,QAAMnvC,KAAKyN,IAAYkhC,GAAOQ,uBAAgB,QAAIsF,EAAex2B,SAASkxB,eAC7EzJ,gBAC+C,QAA5C,QAAM1lC,KAAKyN,IAASkhC,GAAOjJ,wBAAiB,QAAI+O,EAAex2B,SAASynB,gBAC3E4J,4BAC+D,QAA5D,QAAMtvC,KAAKyN,IAAakhC,GAAOW,oCAA6B,QAC7DmF,EAAex2B,SAASqxB,4BAC1BC,4BAC+D,QAA5D,QAAMvvC,KAAKyN,IAAakhC,GAAOY,oCAA6B,QAC7DkF,EAAex2B,SAASsxB,4BAC1BC,oBACuD,QAApD,QAAMxvC,KAAKyN,IAAakhC,GAAOa,4BAAqB,QACrDiF,EAAex2B,SAASuxB,oBAC1BC,oBACuD,QAApD,QAAMzvC,KAAKyN,IAAakhC,GAAOc,4BAAqB,QACrDgF,EAAex2B,SAASwxB,oBAC1BC,mCACsE,QAAnE,QAAM1vC,KAAKyN,IAAakhC,GAAOe,2CAAoC,QACpE+E,EAAex2B,SAASyxB,mCAC1BC,uBAC0D,QAAvD,QAAM3vC,KAAKyN,IAAakhC,GAAOgB,+BAAwB,QACxD8E,EAAex2B,SAAS0xB,uBAC1BE,UAAsD,QAA1C,QAAM7vC,KAAKyN,IAAakhC,GAAOkB,kBAAW,QAAI4E,EAAex2B,SAAS4xB,UAClFC,wBAC2D,QAAxD,QAAM9vC,KAAKyN,IAAakhC,GAAOmB,gCAAyB,QACzD2E,EAAex2B,SAAS6xB,wBAC1BC,6BACgE,QAA7D,QAAM/vC,KAAKyN,IAAakhC,GAAOoB,qCAA8B,QAC9D0E,EAAex2B,SAAS8xB,6BAC1BE,kBACqD,QAAlD,QAAMjwC,KAAKyN,IAAakhC,GAAOsB,0BAAmB,QACnDwE,EAAex2B,SAASgyB,kBAC1BC,yBAC4D,QAAzD,QAAMlwC,KAAKyN,IAAakhC,GAAOuB,iCAA0B,QAC1DuE,EAAex2B,SAASiyB,yBAC1BC,gBACmD,QAAhD,QAAMnwC,KAAKyN,IAAakhC,GAAOwB,wBAAiB,QACjDsE,EAAex2B,SAASkyB,gBAC1BI,gBACmD,QAAhD,QAAMvwC,KAAKyN,IAAakhC,GAAO4B,wBAAiB,QACjDkE,EAAex2B,SAASsyB,gBAC1BlzB,gBAAwC,QAAvB,EAAA22B,EAAQ32B,uBAAe,QAAIo3B,EAAex2B,SAASZ,gBACpEooB,kBACiD,QAA9C,QAAMzlC,KAAKyN,IAASkhC,GAAOlJ,0BAAmB,QAC/CgP,EAAex2B,SAASwnB,kBAC1B8L,0BAC6D,QAA1D,QAAMvxC,KAAKyN,IAAakhC,GAAO4C,kCAA2B,QAC3DkD,EAAex2B,SAASszB,0BAC1BC,aAC4C,QAAzC,QAAMxxC,KAAKyN,IAASkhC,GAAO6C,qBAAc,QAAIiD,EAAex2B,SAASuzB,aACxEG,0BACyD,QAAtD,QAAM3xC,KAAKyN,IAASkhC,GAAOgD,kCAA2B,QACvD8C,EAAex2B,SAAS0zB,0BAC1Bp0B,aAAcpW,OAAOC,OAAO,IAAIyU,GAAqC,CACnEE,UAAW,KACXD,gBAAiB9b,KAAKyN,IAAYkhC,GAAOpxB,gBAE3Cq0B,mBAAoB5xC,KAAKyN,IAAYkhC,GAAOiD,cAC5C3zB,SACY,MAAVhS,EACI,WACMjM,KAAKyN,IAA6B4kC,GAAcp0B,SAAWhS,GACvEkmC,aAC+C,QAA5C,QAAMnyC,KAAKyN,IAAYkhC,GAAOwD,qBAAc,QAAIsC,EAAex2B,SAASk0B,aAC3E70B,mBACqD,QAAlD,QAAMtd,KAAKyN,IAAYkhC,GAAOrxB,2BAAoB,QACnDm3B,EAAex2B,SAASX,oBAK5B,GAAc,MAAVrR,EAMF,aALMjM,KAAKwG,IAAIa,GAA0BqtC,SACnC10C,KAAKwG,IAAIa,GAAa2sC,SACtBh0C,KAAKwG,IAAIa,GAA4B,UACrCrH,KAAKwG,IAAIa,GAAmB,iBAC5BgtC,KAIRL,EAAQp7B,qBAAuB5Y,KAAKyN,IAAY4kC,GAAcz5B,eAAiB3M,SACzEjM,KAAKwG,IAAIa,GAAa2sC,SACtBh0C,KAAKwG,IAAIyF,EAAQ,CACrBlL,KAAM,CACJ6zC,kBAAmB,KACnBt4B,QAAS,CACPP,UAAW,KACXD,gBAAiB9b,KAAKyN,IAAkC4kC,GAAc/1B,QAAUrQ,IAElFmjC,mBAAoB,KACpB3yB,YAAa,CACXV,UAAW,KACXD,gBAAiB9b,KAAKyN,IACpB4kC,GAAc51B,YAAcxQ,IAGhC+kC,sBAAuBhxC,KAAKyN,IAAiBkhC,GAAOqC,iBACpDz0B,QAAS,CACPR,UAAW,KACXD,gBAAiB9b,KAAKyN,IAAkC4kC,GAAc91B,QAAUtQ,IAElFg7B,UAAW,KACXsL,oBAAqBvyC,KAAKyN,IACxB4kC,GAAcE,cAAgBtmC,GAEhCyQ,0BAA2B,CACzBX,UAAW,KACXD,gBAAiB9b,KAAKyN,IAAgCkhC,GAAOsC,UAE/D5kC,SAAU,CACR0P,UAAW,KACXD,gBAAiB9b,KAAKyN,IAAkC4kC,GAAchmC,SAAWJ,IAEnFyB,gBAAiB1N,KAAKyN,IAAoC4kC,GAAc3kC,UAAYzB,GACpFuQ,MAAO,CACLT,UAAW,KACXD,gBAAiB9b,KAAKyN,IAAgC4kC,GAAc71B,MAAQvQ,KAGhF5E,KAAM,CACJwtC,yBAA0B70C,KAAKyN,IAAYkhC,GAAOhnB,cAClD1K,gBAAiB,KACjB63B,oBAAqB,KACrBC,mBAAoB,KACpBC,yBAA0B,KAC1Bl4B,mBAAoB,CAClBhB,gBAAiB9b,KAAKyN,IAAYkhC,GAAO39B,QACzC+K,UAAW,MAEbk5B,aAAc,KACdr4B,iBAAkB,CAChBb,UAAW,KACXD,gBAAiB9b,KAAKyN,IAASkhC,GAAOgC,aAExCl+B,WAAY,CACVsJ,UAAW,KACXD,gBAAiB9b,KAAKyN,IAAYkhC,GAAOiC,aAE3C/zB,aAAc,CACZd,UAAW,KACXD,gBAAiB9b,KAAKyN,IAASkhC,GAAOkC,kBAExCp3B,UAAW,MAEbuE,QAAS,CACPk3B,qBAAsBl1C,KAAKyN,IAAYkhC,GAAOx2B,UAC9Cg9B,qBAAsB,KACtB9F,mCAAoCrvC,KAAKyN,IAAakhC,GAAOU,8BAC7DxjC,YAAa7L,KAAKyN,IAAYkhC,GAAOsD,WACrCjC,oBAAqBhwC,KAAKyN,IAAakhC,GAAOqB,eAC9Cc,SAAU,KACVC,WAAY,KACZqE,iBAAkB,KAClB32B,mBAAoB,KACpB0E,qBAAsB,KACtB3C,oBAAqBxgB,KAAKyN,IAAYkhC,GAAOnuB,eAC7C6C,cAAerjB,KAAKyN,IAAakhC,GAAOpuB,KACxC4wB,cAAenxC,KAAKyN,IAAYkhC,GAAOwC,SACvCmB,SAAU,KACVrmC,OAAQA,EACR6iB,iBAAkB,MAEpB7Q,SAAUy2B,EACVx2B,OAAQ,CACN6B,kBAAmB/f,KAAKyN,IAAYkhC,GAAO5uB,aAC3Cs1B,aAAc,KACdl1B,mBAAoBngB,KAAKyN,IAAYkhC,GAAOxuB,cAC5Cm1B,cAAe,cAIbt1C,KAAKwG,IAAIa,GAA4B,CAAC4E,UACtCjM,KAAKwG,IAAIa,GAAmB4E,GAElC,MAAMspC,EAAgD,CACpD,CAACtpC,SAAejM,KAAKyN,IAAYkhC,GAAOyC,aAE1CmE,EAAgBtpC,SAAgBjM,KAAKyN,IAAYkhC,GAAOyC,kBAClDpxC,KAAKwG,IAAIa,GAAsBkuC,SAE/BlB,EAAYpoC,UAERjM,KAAK0yC,qBAAqBpe,IAAIqa,GAAO79B,IAAK,CAAE0kC,UAAW,uBACzDx1C,KAAK0yC,qBAAqB3kC,KAC9B,GAAG9B,IAASumC,WACNxyC,KAAK0yC,qBAAqBjlC,IAAIkhC,GAAO79B,IAAK,CAAE0kC,UAAW,cAC7D,CAAEA,UAAW,oBAETx1C,KAAK0yC,qBAAqBlE,OAAOG,GAAO79B,IAAK,CAAE0kC,UAAW,sBAGxDx1C,KAAK0yC,qBAAqBpe,IAAIqa,GAAO79B,IAAK,CAAE0kC,UAAW,kBACzDx1C,KAAK0yC,qBAAqB3kC,KAC9B,GAAG9B,IAASumC,WACNxyC,KAAK0yC,qBAAqBjlC,IAAIkhC,GAAO79B,IAAK,CAAE0kC,UAAW,SAC7D,CAAEA,UAAW,eAETx1C,KAAK0yC,qBAAqBlE,OAAOG,GAAO79B,IAAK,CAAE0kC,UAAW,iBAGxDx1C,KAAK0yC,qBAAqBpe,IAAIqa,GAAO79B,cACvC9Q,KAAK0yC,qBAAqB3kC,KAC9B,GAAG9B,IAASumC,WACNxyC,KAAK0yC,qBAAqBjlC,IAAIkhC,GAAO79B,YAEvC9Q,KAAK0yC,qBAAqBlE,OAAOG,GAAO79B,K,IAIlCqiC,uB,0CACd,MAAMsC,QAA6Bz1C,KAAKyN,IAAcpG,UAChD6B,QAAQ4N,IACZ2+B,EAAqBz0C,KAAWiL,GAAW,mC,QACzC,MAAMwnC,QAAgBzzC,KAAKyN,IAAcxB,GACzC,GAC6C,QAA3B,QAAhB,EAAAwnC,aAAO,EAAPA,EAASz1B,eAAO,eAAEmF,uBACa,OAAjB,QAAd,EAAAswB,EAAQv1B,cAAM,eAAE6B,aAChB,CACA,MAAMs1B,QAAqBrkB,GAAanO,YAAY4wB,EAAQv1B,OAAO6B,aACnE0zB,EAAQz1B,QAAQmF,qBAAuBkyB,EAAajyB,cAC9CpjB,KAAKwG,IAAIyF,EAAQwnC,E,CAE3B,OAGF,MAAMO,QAAgBh0C,KAAKi0C,aAC3BD,EAAQ1c,aAAe7mB,EAAa2iC,YAC9BpzC,KAAKwG,IAAIa,GAAa2sC,EAC9B,G,CAEgBX,uB,0CACd,MAAMoC,QAA6Bz1C,KAAKyN,IAAcpG,UAChD6B,QAAQ4N,IACZ2+B,EAAqBz0C,KAAWiL,GAAW,mC,MACzC,MAAMwnC,QAAgBzzC,KAAKyN,IAAcxB,GACzC,GAA0C,OAAtB,QAAhB,EAAAwnC,aAAO,EAAPA,EAASz1B,eAAO,eAAEo3B,kBAEpB,cADO3B,EAAQz1B,QAAQo3B,iBAChBp1C,KAAKwG,IAAIyF,EAAQwnC,EAE5B,OAGF,MAAMO,QAAgBh0C,KAAKi0C,aAC3BD,EAAQ1c,aAAe7mB,EAAa6iC,WAC9BtzC,KAAKwG,IAAIa,GAAa2sC,EAC9B,G,CAEgBL,uBAAuBF,G,kDACrC,MAAMiC,EAAiD,QAA9B,EAAY,QAAZ,EAAAjC,EAAQpsC,YAAI,eAAEuV,wBAAgB,eAAEd,UACzD,GAAwB,MAApB45B,EACF,IAAK,MAAOvpC,EAAO6E,KAAW7J,OAAOmB,QAAQotC,GAC3CA,EAAiBvpC,GAAS,CACxB1B,KAAM,eACNqG,IAAKE,GAKX,OAAOyiC,C,IAGOK,uBAAuBL,G,gDAErC,OAD4B,QAApB,EAAAA,EAAgBpsC,YAAI,gBAAE4tC,aACvBxB,C,IAGOS,uBACdyB,EACAlC,G,0CAKA,OAHIkC,IACFlC,EAAQx1B,SAAW9W,OAAOC,OAAO,CAAC,EAAGqsC,EAAQx1B,SAAU,CAAEsxB,6BAA6B,KAEjFkE,CACT,G,CAEcj8B,cACZ,MAAO,CAAEqgB,oBAAqBtoB,EAAoBuoB,MACpD,CAEUrqB,IAAOqD,GACf,OAAO9Q,KAAKy3B,eAAehqB,IAAOqD,EAAK9Q,KAAKwX,QAC9C,CAEUhR,IAAIsK,EAAa8a,GACzB,OAAa,MAATA,EACK5rB,KAAKy3B,eAAe+W,OAAO19B,EAAK9Q,KAAKwX,SAEvCxX,KAAKy3B,eAAe1pB,KAAK+C,EAAK8a,EAAO5rB,KAAKwX,QACnD,CAEgBy8B,a,0CACd,aAAaj0C,KAAKyN,IAAkBpG,GACtC,G,CAEgByrC,yB,kDACd,OAA8C,QAAtC,EAAwB,QAAzB,QAAO9yC,KAAKi0C,oBAAa,eAAE3c,oBAAY,QAAI7mB,EAAa8mB,G,IAGjDqc,uBAAuBgC,G,0CACrC,MAAM5B,QAAgBh0C,KAAKi0C,aAC3BD,EAAQ1c,aAAese,QACjB51C,KAAKwG,IAAIa,GAAa2sC,EAC9B,G,CAEgBR,2B,0CACd,MAAMiC,QAA6Bz1C,KAAKyN,IAAcpG,IACtD,OAAO6B,QAAQ4N,IAAI2+B,EAAqBz0C,KAAKkE,GAAOlF,KAAKyN,IAAcvI,KACzE,G,6SC/jBK,MAAM2wC,GAKX/1C,YACUwhB,EACAtC,EACA82B,EAAsC,KACtCvqC,GAHA,KAAA+V,iBAAAA,EACA,KAAAtC,qBAAAA,EACA,KAAA82B,eAAAA,EACA,KAAAvqC,aAAAA,EARF,KAAAwqC,eAAsB,KACtB,KAAAC,sBAA6B,KAC7B,KAAAC,8BAAoD,IAOzD,CAEGC,mBAAmBhyB,G,0CACvB,MAAMiyB,QAAiB,EAAA5pC,EAAA,GAAevM,KAAKuL,aAAa6qC,WACxD,GAAgB,MAAZD,EAAkB,CACpB,MAAM9uC,EAAOF,OAAOE,KAAK8uC,GACzB,GAAI9uC,EAAK3G,OAAS,EAChB,IAAK,MAAMuL,KAAU5E,EACnB,UAAW6c,EAAYkF,cAAcnd,MAAagH,GAAqB2W,SACrE,M,CAOR,GAA2B,MAAvB5pB,KAAK+1C,eACP,OAKkB,aADO/1C,KAAKuL,aAAa8qC,wCAK7Cr2C,KAAKs2C,4BACCt2C,KAAKu2C,uBACb,G,CAEcA,uB,0CAGZ,WADQv2C,KAAKuL,aAAairC,oCAQxB,OANAC,cAAcz2C,KAAK+1C,gBACnB/1C,KAAK+1C,eAAiB,KACtB/1C,KAAKshB,iBAAiB7V,KAAK,sBACA,MAAvBzL,KAAK81C,uBACD91C,KAAK81C,mBAIY,MAAvB91C,KAAK+1C,iBACP/1C,KAAK+1C,eAAiBW,aAAY,IAAY,gDAAM12C,KAAKu2C,sBAAsB,KAAE,KAErF,G,CAEAD,sBAC6B,MAAvBt2C,KAAK+1C,iBACPU,cAAcz2C,KAAK+1C,gBACnB/1C,KAAK+1C,eAAiB,KAE1B,CAEM5G,eAAewH,EAAwBC,EAAoB,M,0CAC7B,MAA9B52C,KAAKg2C,wBACP7qB,aAAanrB,KAAKg2C,uBAClBh2C,KAAKg2C,sBAAwB,MAE3B,EAAM1wC,mBAAmBqxC,WAGvB32C,KAAKuL,aAAasrC,oBAAoBlgC,MAAMmgC,IAC5B,MAAhBA,IAGa,MAAbF,IACFA,EAA2B,IAAfE,GAEd92C,KAAKi2C,8BAAgC,IAAY,mCAC/C,MAAMc,QAA0B/2C,KAAKgf,qBAAqBg4B,oBACtDL,IAAmBI,GACrB/2C,KAAKgf,qBAAqBi4B,gBAAgB,GAAI,CAAEC,UAAU,GAE9D,IACAl3C,KAAKg2C,sBAAwB5sC,YAAW,IAAY,yCAC5CpJ,KAAKm3C,uBACb,KAAGP,GAAU,IAEjB,G,CAEMO,wB,0CACsC,MAAtCn3C,KAAKi2C,sCACDj2C,KAAKi2C,gCACXj2C,KAAKi2C,8BAAgC,KAEzC,G,8BC1GK,MAAMmB,I,2SCSN,MAAMC,GAKXv3C,YAAY4I,GACV1I,KAAKs3C,YAA+B,IAAf5uC,EAAI4uC,OAAyB5uC,EAAI4uC,OAAS,KAC/Dt3C,KAAKu3C,OACDv3C,KAAKs3C,aAAuC,IAAtB5uC,EAAI4uC,OAAOC,OAAyB7uC,EAAI4uC,OAAOC,OAAS,KAClFv3C,KAAKw3C,cAAgBx3C,KAAKy3C,sBAC5B,CAEMC,OACJt+B,EACAu+B,EACAC,EACAjoC,G,0CAEA,MAAMkoC,EAAsB,WAAdD,EAAyB,IAAM,IACvCE,EAAc93C,KAAK+3C,MAAM3+B,GAGzB4+B,EAA6B,CACjCt2C,KAAM,SACNi2C,KAJc33C,KAAK+3C,MAAMJ,GAKzBhoC,WAAYA,EACZ1H,KAAM,CAAEvG,KAAM1B,KAAKi4C,qBAAqBL,KAGpCM,QAAel4C,KAAKu3C,OAAOY,UAC/B,MACAL,EACA,CAAEp2C,KAAM,WACR,EACA,CAAC,eAEG0B,QAAepD,KAAKu3C,OAAOa,WAAWJ,EAAqBE,EAAQL,GACzE,OAAO,IAAIz1C,WAAWgB,EACxB,G,CAEMi1C,OACJj/B,EACAu+B,EACAhoC,EACAC,EACAC,G,0CAEA,IAAK7P,KAAKw3C,cACR,KAAM,8DAGR,MAAMc,EAAc,IAAIl2C,WAAWpC,KAAK+3C,MAAM3+B,IACxCm/B,EAAU,IAAIn2C,WAAWpC,KAAK+3C,MAAMJ,IAEpCp0B,QAAe80B,GAAOpwC,KAAK,CAC/BuwC,KAAMF,EACNX,KAAMY,EACNE,KAAM9oC,EACN+oC,IAAK9oC,EACLC,YAAaA,EACb8oC,QAAS,GACTluC,KAAM4tC,GAAOO,UAAUC,WAGzB,OADAR,GAAOS,gBACAv1B,EAAOtb,IAChB,G,CAEM8wC,KACJC,EACArB,EACA1d,EACAgf,EACArB,G,0CAEA,MAGMsB,EAAyB,CAC7Bx3C,KAAM,OACNi2C,KALc33C,KAAK+3C,MAAMJ,GAMzB1d,KALcj6B,KAAK+3C,MAAM9d,GAMzBhyB,KAAM,CAAEvG,KAAM1B,KAAKi4C,qBAAqBL,KAGpCM,QAAel4C,KAAKu3C,OAAOY,UAAU,MAAOa,EAAK,CAAEt3C,KAAM,SAAiB,EAAO,CACrF,eAEI0B,QAAepD,KAAKu3C,OAAOa,WAAWc,EAAmBhB,EAAyB,EAAjBe,GACvE,OAAO,IAAI72C,WAAWgB,EACxB,G,CAGM+1C,WACJC,EACAnf,EACAgf,EACArB,G,0CAEA,MAAMe,EAAwB,WAAdf,EAAyB,GAAK,GAC9C,GAAIqB,EAAiB,IAAMN,EACzB,MAAM,IAAIv4C,MAAM,gCAGlB,GADe,IAAIgC,WAAWg3C,GACnB14C,OAASi4C,EAClB,MAAM,IAAIv4C,MAAM,qBAElB,MAAMi5C,EAAUr5C,KAAK+3C,MAAM9d,GACrBqf,EAAU,IAAIl3C,WAAWi3C,GAC/B,IAAIE,EAAmB,EACnBC,EAAY,IAAIp3C,WAAW,GAC/B,MAAM0kC,EAAI9hC,KAAKqmC,KAAK4N,EAAiBN,GAC/Bc,EAAM,IAAIr3C,WAAW0kC,EAAI6R,GAC/B,IAAK,IAAIj2C,EAAI,EAAGA,EAAIokC,EAAGpkC,IAAK,CAC1B,MAAM7B,EAAI,IAAIuB,WAAWo3C,EAAU94C,OAAS44C,EAAQ54C,OAAS,GAO7D,GANAG,EAAE2F,IAAIgzC,GACN34C,EAAE2F,IAAI8yC,EAASE,EAAU94C,QACzBG,EAAE2F,IAAI,CAAC9D,EAAI,GAAI7B,EAAEH,OAAS,GAC1B84C,EAAY,IAAIp3C,iBAAiBpC,KAAKs8B,KAAKz7B,EAAGu4C,EAAKxB,IACnD6B,EAAIjzC,IAAIgzC,EAAWD,GACnBA,GAAoBC,EAAU94C,OAC1B64C,GAAoBN,EACtB,K,CAGJ,OAAOQ,EAAI94C,MAAM,EAAGs4C,EACtB,G,CAEMhxC,KACJ2jB,EACAgsB,G,0CAEA,GAAkB,QAAdA,EAAqB,CACvB,MAAM8B,EAAmB,QAAd9B,EAAsB,MAAS+B,IAAIljB,SAAW,MAASmjB,KAAKnjB,SACjEojB,EAAa75C,KAAK85C,aAAaluB,GAErC,OADA8tB,EAAGK,OAAOF,EAAY,OACf,EAAM//B,sBAAsB4/B,EAAGM,SAASj5C,K,CAGjD,MAAMk5C,EAAWj6C,KAAK+3C,MAAMnsB,GACtBxoB,QAAepD,KAAKu3C,OAAOyC,OAC/B,CAAEt4C,KAAM1B,KAAKi4C,qBAAqBL,IAClCqC,GAEF,OAAO,IAAI73C,WAAWgB,EACxB,G,CAEMk5B,KACJ1Q,EACA9a,EACA8mC,G,0CAEA,MAAMsC,EAAmB,CACvBx4C,KAAM,OACNuG,KAAM,CAAEvG,KAAM1B,KAAKi4C,qBAAqBL,KAGpCM,QAAel4C,KAAKu3C,OAAOY,UAAU,MAAOrnC,EAAKopC,GAAkB,EAAO,CAAC,SAC3E92C,QAAepD,KAAKu3C,OAAO4C,KAAKD,EAAkBhC,EAAQtsB,GAChE,OAAO,IAAIxpB,WAAWgB,EACxB,G,CAKM0D,QAAQH,EAAeC,G,0CAC3B,MAAMqK,QAAejR,KAAKytB,YAAY,IAChCysB,EAAmB,CACvBx4C,KAAM,OACNuG,KAAM,CAAEvG,KAAM,YAEVw2C,QAAel4C,KAAKu3C,OAAOY,UAAU,MAAOlnC,EAAQipC,GAAkB,EAAO,CAAC,SAC9EE,QAAap6C,KAAKu3C,OAAO4C,KAAKD,EAAkBhC,EAAQvxC,GACxD0zC,QAAar6C,KAAKu3C,OAAO4C,KAAKD,EAAkBhC,EAAQtxC,GAE9D,GAAIwzC,EAAK72C,aAAe82C,EAAK92C,WAC3B,OAAO,EAGT,MAAM+2C,EAAO,IAAIl4C,WAAWg4C,GACtBG,EAAO,IAAIn4C,WAAWi4C,GAC5B,IAAK,IAAI33C,EAAI,EAAGA,EAAI63C,EAAK75C,OAAQgC,IAC/B,GAAI43C,EAAK53C,KAAO63C,EAAK73C,GACnB,OAAO,EAIX,OAAO,CACT,G,CAEAs5B,SAASpQ,EAAe9a,EAAa8mC,GACnC,MAAMtb,EAAO,QAAW7F,SACxB6F,EAAKsP,MAAMgM,EAAW9mC,GACtBwrB,EAAKyd,OAAOnuB,GACZ,MAAMnpB,EAAQ65B,EAAK0d,SAASQ,WAC5B,OAAOtxC,QAAQC,QAAQ1G,EACzB,CAEMy5B,YAAYv1B,EAAWC,G,0CAC3B,MAAM6zC,QAAaz6C,KAAKytB,YAAY,IAC9BhrB,EAAQ,IAAIi4C,YAAYD,GACxBr3C,EAAS,QAAWu3C,eAC1B,IAAK,IAAIj4C,EAAI,EAAGA,EAAID,EAAM/B,OAAQgC,IAChCU,EAAOw3C,SAASn4C,EAAMC,IAExB,MAAMuO,EAAS7N,EAAOo3C,WAEhBle,EAAO,QAAW7F,SACxB6F,EAAKsP,MAAM,SAAU36B,GACrBqrB,EAAKyd,OAAOpzC,GACZ,MAAMyzC,EAAO9d,EAAK0d,SAASQ,WAE3Ble,EAAKsP,MAAM,KAAM,MACjBtP,EAAKyd,OAAOnzC,GAIZ,OADewzC,IAFF9d,EAAK0d,SAASQ,UAI7B,G,CAEMjf,WAAWx6B,EAAkBwT,EAAgBzD,G,0CACjD,MAAMonC,QAAel4C,KAAKu3C,OAAOY,UAAU,MAAOrnC,EAAK,CAAEpP,KAAM,YAAoB,EAAO,CACxF,YAEI0B,QAAepD,KAAKu3C,OAAOlrB,QAAQ,CAAE3qB,KAAM,UAAW6S,GAAIA,GAAM2jC,EAAQn3C,GAC9E,OAAO,IAAIqB,WAAWgB,EACxB,G,CAEA04B,yBACE/6B,EACAwT,EACAC,EACA1D,GAEA,MAAM4F,EAAI,IAAI0gC,GA8Bd,OA7BgB,MAAZtmC,EAAI+pC,OACNnkC,EAAE1F,OAASF,EAAI+pC,KAAKC,iBACpBpkC,EAAEzF,OAASH,EAAI+pC,KAAKE,kBAGN,MAAZrkC,EAAE1F,SACJ0F,EAAE1F,OAAS,QAAWgqC,SAASlqC,EAAIK,YAErCuF,EAAE3V,KAAO,QAAWi6C,SAASj6C,GAC7B2V,EAAEnC,GAAK,QAAWymC,SAASzmC,GAC3BmC,EAAEulB,QAAUvlB,EAAEnC,GAAKmC,EAAE3V,KACL,MAAZ2V,EAAEzF,QAAmC,MAAjBH,EAAIM,YAC1BsF,EAAEzF,OAAS,QAAW+pC,SAASlqC,EAAIM,YAE1B,MAAPoD,IACFkC,EAAElC,IAAM,QAAWwmC,SAASxmC,IAId,MAAZ1D,EAAI+pC,OACN/pC,EAAI+pC,KAAO,CAAC,GAEmB,MAA7B/pC,EAAI+pC,KAAKC,mBACXhqC,EAAI+pC,KAAKC,iBAAmBpkC,EAAE1F,QAEhB,MAAZ0F,EAAEzF,QAA+C,MAA7BH,EAAI+pC,KAAKE,mBAC/BjqC,EAAI+pC,KAAKE,iBAAmBrkC,EAAEzF,QAGzByF,CACT,CAEA0lB,eAAe6e,GACb,MAAMC,EAAa,QAAWP,aAAaM,EAAWl6C,MAChDo6C,EAAW,UAAaC,eAAe,UAAWH,EAAWjqC,QACnEmqC,EAASvP,MAAM,CAAEr3B,GAAI0mC,EAAW1mC,KAChC4mC,EAASpB,OAAOmB,GAChBC,EAASE,SACT,MAAMxkC,EAAMskC,EAAS12C,OAAOpB,WAC5B,OAAO6F,QAAQC,QAAQ0N,EACzB,CAEM0lB,WAAWx7B,EAAkBwT,EAAgBzD,G,0CACjD,MAAMonC,QAAel4C,KAAKu3C,OAAOY,UAAU,MAAOrnC,EAAK,CAAEpP,KAAM,YAAoB,EAAO,CACxF,YAEI0B,QAAepD,KAAKu3C,OAAOpiC,QAAQ,CAAEzT,KAAM,UAAW6S,GAAIA,GAAM2jC,EAAQn3C,GAC9E,OAAO,IAAIqB,WAAWgB,EACxB,G,CAEMwnB,WACJ7pB,EACA0Y,EACAm+B,G,0CAIA,MAAM0D,EAAY,CAChB55C,KAAM,WACNuG,KAAM,CAAEvG,KAAM1B,KAAKi4C,qBAAqBL,KAEpCM,QAAel4C,KAAKu3C,OAAOY,UAAU,OAAQ1+B,EAAW6hC,GAAW,EAAO,CAAC,YAC3El4C,QAAepD,KAAKu3C,OAAOlrB,QAAQivB,EAAWpD,EAAQn3C,GAC5D,OAAO,IAAIqB,WAAWgB,EACxB,G,CAEMuP,WACJ5R,EACA0R,EACAmlC,G,0CAIA,MAAM0D,EAAY,CAChB55C,KAAM,WACNuG,KAAM,CAAEvG,KAAM1B,KAAKi4C,qBAAqBL,KAEpCM,QAAel4C,KAAKu3C,OAAOY,UAAU,QAAS1lC,EAAY6oC,GAAW,EAAO,CAAC,YAC7El4C,QAAepD,KAAKu3C,OAAOpiC,QAAQmmC,EAAWpD,EAAQn3C,GAC5D,OAAO,IAAIqB,WAAWgB,EACxB,G,CAEMm4C,oBAAoB9oC,G,0CACxB,MAAM6oC,EAAY,CAChB55C,KAAM,WAENuG,KAAM,CAAEvG,KAAM1B,KAAKi4C,qBAAqB,UAEpCuD,QAAsBx7C,KAAKu3C,OAAOY,UAAU,QAAS1lC,EAAY6oC,GAAW,EAAM,CACtF,YAEIG,QAAsBz7C,KAAKu3C,OAAOmE,UAAU,MAAOF,GACnDG,EAAqB,CACzBC,IAAK,MACLrzC,EAAGkzC,EAAclzC,EACjBu+B,EAAG2U,EAAc3U,EACjB+U,IAAK,WACLC,KAAK,GAEDC,QAAqB/7C,KAAKu3C,OAAOY,UAAU,MAAOwD,EAAoBL,GAAW,EAAM,CAC3F,YAEIl4C,QAAepD,KAAKu3C,OAAOmE,UAAU,OAAQK,GACnD,OAAO,IAAI35C,WAAWgB,EACxB,G,CAEM6oB,mBAAmBvrB,G,0CACvB,MAAM46C,EAAY,CAChB55C,KAAM,WACNs6C,cAAet7C,EACfu7C,eAAgB,IAAI75C,WAAW,CAAC,EAAM,EAAM,IAE5C6F,KAAM,CAAEvG,KAAM1B,KAAKi4C,qBAAqB,UAEpCiE,QAAiBl8C,KAAKu3C,OAAO4E,YAAYb,GAAW,EAAM,CAC9D,UACA,YAEI7hC,QAAkBzZ,KAAKu3C,OAAOmE,UAAU,OAAQQ,EAAQziC,WACxDhH,QAAmBzS,KAAKu3C,OAAOmE,UAAU,QAASQ,EAAQzpC,YAChE,MAAO,CAAC,IAAIrQ,WAAWqX,GAAY,IAAIrX,WAAWqQ,GACpD,G,CAEAgb,YAAY/sB,GACV,MAAMyC,EAAM,IAAIf,WAAW1B,GAE3B,OADAV,KAAKs3C,OAAO8E,gBAAgBj5C,GACrB+F,QAAQC,QAAQhG,EACzB,CAEQ40C,MAAMnsB,GACZ,IAAIywB,EAMJ,OAJEA,EADmB,iBAAVzwB,EACH,EAAM/mB,gBAAgB+mB,GAEtBA,EAEDywB,CACT,CAEQvC,aAAaluB,GACnB,IAAInpB,EAMJ,OAJEA,EADmB,iBAAVmpB,EACD,QAAW0wB,WAAW1wB,GAEtB,EAAMhS,uBAAuBgS,GAEhCnpB,CACT,CAEQw1C,qBAAqBL,GAC3B,GAAkB,QAAdA,EACF,MAAM,IAAIx3C,MAAM,sCAElB,MAAqB,SAAdw3C,EAAuB,QAAwB,WAAdA,EAAyB,UAAY,SAC/E,CAGQH,uBACN,IACE,GAA2B,iBAAhB8E,aAA+D,mBAA5BA,YAAYC,YAA4B,CACpF,MAAMC,EAAS,IAAIF,YAAYG,OAC7Bt6C,WAAWkH,GAAG,EAAK,GAAM,IAAM,IAAM,EAAM,EAAM,EAAM,IAEzD,GAAImzC,aAAkBF,YAAYG,OAChC,OAAO,IAAIH,YAAYI,SAASF,aAAmBF,YAAYI,Q,EAGnE,SACA,OAAO,C,CAET,OAAO,CACT,EC9ZK,MAAMC,GAGX98C,YAAY+8C,GACV78C,KAAK68C,YAAcA,CACrB,ECGK,MAAMC,GAIXh9C,YAAoBwL,EAAgCC,GAAhC,KAAAD,WAAAA,EAAgC,KAAAC,aAAAA,EAH5C,KAAAwxC,eAAiB,IAAItkB,GAAA,EAA+B,MAC5D,KAAAukB,cAA2Ch9C,KAAK+8C,eAAezyB,eAG7DtqB,KAAKi9C,oBACP,CAEAA,qBACE,OAAOj9C,KAAKuL,aAAa2xC,iBAAiBvmC,MAAMzO,IAC9ClI,KAAK+8C,eAAe3yB,KAAKliB,GAClBA,IAEX,CAEAi1C,WAAWj1C,GACT,OAAOlI,KAAKsL,WAAW8xC,UAAU,IAAIR,GAAoB10C,IAAQyO,MAAM5W,IACrEC,KAAKuL,aAAa8xC,eAAet9C,EAAS88C,aAC1C78C,KAAK+8C,eAAe3yB,KAAKrqB,EAAS88C,YAAY,GAElD,ECpBK,MAAMS,WAEH,EAORx9C,YAAYC,EAAew9C,GACzBz8C,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAKwK,eAAiBxK,KAAKC,oBAAoB,kBAC/CD,KAAK0K,QAAU1K,KAAKC,oBAAoB,WACxC,MAAMu9C,EAAYx9C,KAAKC,oBAAoB,UAC3CD,KAAKy9C,OAAsB,MAAbD,EAAoB,KAAO,IAAID,EAAWC,EAC1D,ECvBK,MAAME,WAAgB,EAQ3B59C,YAAYiB,EAAY,MACtBD,MAAMC,GACM,MAARA,IAGJf,KAAKm9B,eAAiBn9B,KAAKC,oBAAoB,kBAC/CD,KAAKo9B,MAAQp9B,KAAKC,oBAAoB,SACtCD,KAAKq9B,OAASr9B,KAAKC,oBAAoB,UACvCD,KAAKs9B,SAAWt9B,KAAKC,oBAAoB,YACzCD,KAAKu9B,QAAUv9B,KAAKC,oBAAoB,WACxCD,KAAK+lB,KAAO/lB,KAAKC,oBAAoB,QACvC,EClBK,MAAM09C,WAAiB,EAM5B79C,YAAYiB,EAAY,MACtBD,MAAMC,GACM,MAARA,IAGJf,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAK4rB,MAAQ5rB,KAAKC,oBAAoB,SACtCD,KAAKy9B,SAAWz9B,KAAKC,oBAAoB,YAC3C,EChBK,MAAM29C,WAAoB,EAoB/B99C,YAAYiB,EAAY,MACtBD,MAAMC,GACM,MAARA,IAGJf,KAAK29B,MAAQ39B,KAAKC,oBAAoB,SACtCD,KAAK49B,UAAY59B,KAAKC,oBAAoB,aAC1CD,KAAK69B,WAAa79B,KAAKC,oBAAoB,cAC3CD,KAAK89B,SAAW99B,KAAKC,oBAAoB,YACzCD,KAAK+9B,SAAW/9B,KAAKC,oBAAoB,YACzCD,KAAKg+B,SAAWh+B,KAAKC,oBAAoB,YACzCD,KAAKi+B,SAAWj+B,KAAKC,oBAAoB,YACzCD,KAAKk+B,KAAOl+B,KAAKC,oBAAoB,QACrCD,KAAKm+B,MAAQn+B,KAAKC,oBAAoB,SACtCD,KAAKo+B,WAAap+B,KAAKC,oBAAoB,cAC3CD,KAAKq+B,QAAUr+B,KAAKC,oBAAoB,WACxCD,KAAKs+B,QAAUt+B,KAAKC,oBAAoB,WACxCD,KAAK6L,MAAQ7L,KAAKC,oBAAoB,SACtCD,KAAKu+B,MAAQv+B,KAAKC,oBAAoB,SACtCD,KAAKw+B,IAAMx+B,KAAKC,oBAAoB,OACpCD,KAAKmZ,SAAWnZ,KAAKC,oBAAoB,YACzCD,KAAKy+B,eAAiBz+B,KAAKC,oBAAoB,kBAC/CD,KAAK0+B,cAAgB1+B,KAAKC,oBAAoB,iBAChD,EC1CK,MAAM49C,WAAoB,EAI/B/9C,YAAYiB,EAAY,MAEtB,GADAD,MAAMC,GAHR,KAAAiI,MAAsB,KAIR,MAARjI,EACF,OAEFf,KAAK4+B,IAAM5+B,KAAKC,oBAAoB,OACpC,MAAM+I,EAAQhJ,KAAKC,oBAAoB,SACvCD,KAAKgJ,MAAiB,MAATA,EAAgBA,EAAQ,IACvC,ECXK,MAAM80C,WAAiB,EAQ5Bh+C,YAAYiB,EAAY,MAEtB,GADAD,MAAMC,GACM,MAARA,EACF,OAEFf,KAAKmZ,SAAWnZ,KAAKC,oBAAoB,YACzCD,KAAKoZ,SAAWpZ,KAAKC,oBAAoB,YACzCD,KAAK8+B,qBAAuB9+B,KAAKC,oBAAoB,wBACrDD,KAAK++B,KAAO/+B,KAAKC,oBAAoB,QACrCD,KAAKg/B,mBAAqBh/B,KAAKC,oBAAoB,sBAEnD,MAAMg/B,EAAOj/B,KAAKC,oBAAoB,QAC1B,MAARg/B,IACFj/B,KAAKi/B,KAAOA,EAAKj+B,KAAKk+B,GAAW,IAAI2e,GAAY3e,KAErD,ECxBK,MAAM6e,WAAsB,EAGjCj+C,YAAYiB,EAAY,MACtBD,MAAMC,GACM,MAARA,IAGJf,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACvC,ECVK,MAAM+9C,WAA2B,EAQtCl+C,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAK4F,IAAM5F,KAAKC,oBAAoB,OACpCD,KAAK+8B,SAAW/8B,KAAKC,oBAAoB,YACzCD,KAAK8Q,IAAM9Q,KAAKC,oBAAoB,OACpCD,KAAKg9B,KAAOh9B,KAAKC,oBAAoB,QACrCD,KAAKi9B,SAAWj9B,KAAKC,oBAAoB,WAC3C,EChBK,MAAMg+C,WAAgC,EAI3Cn+C,YAAYC,GACVe,MAAMf,GACNC,KAAKoZ,SAAWpZ,KAAKC,oBAAoB,YACzCD,KAAKo/B,aAAep/B,KAAKC,oBAAoB,eAC/C,ECCK,MAAMi+C,WAAuB,EAwBlCp+C,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAKwK,eAAiBxK,KAAKC,oBAAoB,kBAC/CD,KAAKw/B,SAAWx/B,KAAKC,oBAAoB,aAAe,KACxDD,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAK6/B,MAAQ7/B,KAAKC,oBAAoB,SACtCD,KAAK4/B,SAAW5/B,KAAKC,oBAAoB,cAAe,EACxDD,KAAKy/B,OAASz/B,KAAKC,oBAAoB,QACS,MAA5CD,KAAKC,oBAAoB,gBAC3BD,KAAK0/B,cAAe,EAEpB1/B,KAAK0/B,aAAe1/B,KAAKC,oBAAoB,gBAE/CD,KAAK2/B,oBAAsB3/B,KAAKC,oBAAoB,uBACpDD,KAAK+tB,aAAe/tB,KAAKC,oBAAoB,gBAC7CD,KAAKu/B,cAAgBv/B,KAAKC,oBAAoB,iBAC9CD,KAAK8tB,aAAe9tB,KAAKC,oBAAoB,gBAC7CD,KAAK8/B,YAAc9/B,KAAKC,oBAAoB,eAE5C,MAAMggC,EAAQjgC,KAAKC,oBAAoB,SAC1B,MAATggC,IACFjgC,KAAKigC,MAAQ,IAAI6d,GAAS7d,IAG5B,MAAMI,EAAOrgC,KAAKC,oBAAoB,QAC1B,MAARogC,IACFrgC,KAAKqgC,KAAO,IAAIqd,GAAQrd,IAG1B,MAAMnmB,EAAWla,KAAKC,oBAAoB,YAC1B,MAAZia,IACFla,KAAKka,SAAW,IAAI0jC,GAAY1jC,IAGlC,MAAMimB,EAAangC,KAAKC,oBAAoB,cAC1B,MAAdkgC,IACFngC,KAAKmgC,WAAa,IAAI4d,GAAc5d,IAGtC,MAAMI,EAASvgC,KAAKC,oBAAoB,UAC1B,MAAVsgC,IACFvgC,KAAKugC,OAASA,EAAOv/B,KAAKw/B,GAAW,IAAImd,GAASnd,MAGpD,MAAMC,EAAczgC,KAAKC,oBAAoB,eAC1B,MAAfwgC,IACFzgC,KAAKygC,YAAcA,EAAYz/B,KAAK2F,GAAW,IAAIq3C,GAAmBr3C,MAGxE,MAAM+5B,EAAkB1gC,KAAKC,oBAAoB,mBAC1B,MAAnBygC,IACF1gC,KAAK0gC,gBAAkBA,EAAgB1/B,KAAKm9C,GAAW,IAAIF,GAAwBE,MAGrFn+C,KAAK+/B,SAAW//B,KAAKC,oBAAoB,aAAe48B,GAAmBne,IAC7E,EC1FK,MAAM0/B,WAAkC,EAK7Ct+C,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAKq+C,SAAWr+C,KAAKC,oBAAoB,YACzCD,KAAKs+C,cAAgBt+C,KAAKC,oBAAoB,gBAChD,ECTK,MAAMs+C,WAA2B,EAMtCz+C,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAKwK,eAAiBxK,KAAKC,oBAAoB,kBAC/CD,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAKw+C,WAAax+C,KAAKC,oBAAoB,aAC7C,EAGK,MAAMw+C,WAAkCF,GAG7Cz+C,YAAYC,GACVe,MAAMf,GACNC,KAAKq+C,SAAWr+C,KAAKC,oBAAoB,cAAe,CAC1D,EAGK,MAAMy+C,WAAwCH,GASnDz+C,YAAYC,GACVe,MAAMf,GATR,KAAA4+C,OAAsC,GACtC,KAAAC,MAAqC,GASnC5+C,KAAK6+C,SAAW7+C,KAAKC,oBAAoB,cAAe,EAExD,MAAM0+C,EAAS3+C,KAAKC,oBAAoB,UAC1B,MAAV0+C,IACF3+C,KAAK2+C,OAASA,EAAO39C,KAAKiB,GAAW,IAAIm8C,GAA0Bn8C,MAGrE,MAAM28C,EAAQ5+C,KAAKC,oBAAoB,SAC1B,MAAT2+C,IACF5+C,KAAK4+C,MAAQA,EAAM59C,KAAKiB,GAAW,IAAIm8C,GAA0Bn8C,KAErE,EC7CK,MAAM68C,WAAmC,EAI9Ch/C,YAAYC,GACVe,MAAMf,GACN,MAAM0c,EAAczc,KAAKC,oBAAoB,eAC1B,MAAfwc,IACFzc,KAAKyc,YAAcA,EAAYzb,KAAK8D,GAAW,IAAIy5C,GAAmBz5C,MAExE,MAAMwX,EAAUtc,KAAKC,oBAAoB,WAC1B,MAAXqc,IACFtc,KAAKsc,QAAUA,EAAQtb,KAAK8D,GAAW,IAAIo5C,GAAep5C,KAE9D,EChBK,MAAMi6C,WAAkD,EAG7Dj/C,YAAYC,GACVe,MAAMf,GACN,MAAMi/C,EAAeh/C,KAAKC,oBAAoB,gBAC1C++C,IACFh/C,KAAKg/C,aAAe,IAAIp1C,KAAKo1C,GAEjC,ECTK,MAAMC,WAAqC,EAYhDn/C,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAKk/C,WAAal/C,KAAKC,oBAAoB,cAC3CD,KAAKwK,eAAiBxK,KAAKC,oBAAoB,kBAC/CD,KAAK8Q,IAAM9Q,KAAKC,oBAAoB,OACpCD,KAAKie,SAAWje,KAAKC,oBAAoB,YACzCD,KAAK8tB,aAAe9tB,KAAKC,oBAAoB,gBAC7CD,KAAK+tB,aAAe/tB,KAAKC,oBAAoB,gBAC7CD,KAAKm/C,UAAYn/C,KAAKC,oBAAoB,aAC1CD,KAAKo/C,MAAQp/C,KAAKC,oBAAoB,SACtCD,KAAKq/C,KAAOr/C,KAAKC,oBAAoB,OACvC,EAGK,MAAMq/C,WAAwDL,GAGnEn/C,YAAYC,GACVe,MAAMf,GACNC,KAAKu/C,iBAAmBv/C,KAAKC,oBAAoB,mBACnD,ECjCK,MAAMu/C,WAA8C,EAKzD1/C,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAKiM,OAASjM,KAAKC,oBAAoB,UACvCD,KAAK8Q,IAAM9Q,KAAKC,oBAAoB,MACtC,ECVK,MAAMw/C,WAA0CD,ICAhD,MAAME,WAAiC,EAI5C5/C,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAK8jB,MAAQ9jB,KAAKC,oBAAoB,QACxC,ECRK,MAAM0/C,WAAuB,EAiBlC7/C,YAAYiB,EAAY,MAEtB,GADAD,MAAMC,GACM,MAARA,EACF,OAAOf,KAETA,KAAK4/C,gBAAkB5/C,KAAKC,oBAAoB,mBAChDD,KAAK6/C,mBAAqB7/C,KAAKC,oBAAoB,sBACnDD,KAAK8/C,cAAgB9/C,KAAKC,oBAAoB,iBAE9CD,KAAK+/C,qBAAuB//C,KAAKC,oBAAoB,wBACrDD,KAAKggD,kBAAoBhgD,KAAKC,oBAAoB,qBAClDD,KAAKigD,oBAAsBjgD,KAAKC,oBAAoB,uBACpDD,KAAKkgD,wBAA0BlgD,KAAKC,oBAAoB,2BACxDD,KAAKmgD,0BAA4BngD,KAAKC,oBAAoB,6BAE1DD,KAAKogD,cAAgBpgD,KAAKC,oBAAoB,iBAC9CD,KAAKqgD,aAAergD,KAAKC,oBAAoB,gBAC7CD,KAAKsgD,UAAYtgD,KAAKC,oBAAoB,aAC1CD,KAAKugD,eAAiBvgD,KAAKC,oBAAoB,kBAC/CD,KAAKwgD,YAAcxgD,KAAKC,oBAAoB,eAC5CD,KAAKygD,oBAAsBzgD,KAAKC,oBAAoB,uBACpDD,KAAK0gD,WAAa1gD,KAAKC,oBAAoB,aAC7C,ECrCK,MAAM0gD,WAA6B,EAOxC7gD,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAKiM,OAASjM,KAAKC,oBAAoB,UACvCD,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAK6M,OAAS7M,KAAKC,oBAAoB,UACvCD,KAAK4gD,YAAc,IAAIjB,GAAe3/C,KAAKC,oBAAoB,eACjE,EAGK,MAAM4gD,WAAwCF,GAInD7gD,YAAYC,GACVe,MAAMf,GACNC,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAK6L,MAAQ7L,KAAKC,oBAAoB,QACxC,EC3BK,MAAM6gD,WAAyB,EAMpChhD,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAK+gD,aAAe/gD,KAAKC,oBAAoB,gBAC7CD,KAAKghD,aAAehhD,KAAKC,oBAAoB,eAC/C,ECZK,MAAMghD,WAAuB,EAIlCnhD,YAAYC,GACVe,MAAMf,GACNC,KAAKkhD,OAASlhD,KAAKC,oBAAoB,UACvCD,KAAK+tB,aAAe,IAAInkB,KAAK5J,KAAKC,oBAAoB,gBACxD,ECLK,MAAMkhD,WAA4B,EAavCrhD,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAKyZ,UAAYzZ,KAAKC,oBAAoB,aAC1CD,KAAKohD,kBAAoBphD,KAAKC,oBAAoB,qBAClDD,KAAKqhD,iBAAmBrhD,KAAKC,oBAAoB,oBACjDD,KAAK8Q,IAAM9Q,KAAKC,oBAAoB,OACpCD,KAAKoS,mBAAqBpS,KAAKC,oBAAoB,sBACnDD,KAAK8tB,aAAe9tB,KAAKC,oBAAoB,gBAC7CD,KAAKqnB,gBAAkBrnB,KAAKC,oBAAoB,mBAChDD,KAAKshD,aAAethD,KAAKC,oBAAoB,gBAE7C,MAAMshD,EAAc,IAAI33C,KAAK5J,KAAK8tB,cAC5B0zB,EAAiB53C,KAAK63C,IAC1BF,EAAYG,iBACZH,EAAYI,cACZJ,EAAYK,UACZL,EAAYM,cACZN,EAAYO,gBACZP,EAAYQ,gBACZR,EAAYS,sBAGRC,EAAU,IAAIr4C,KAAKA,KAAKC,OACxBq4C,EAAat4C,KAAK63C,IACtBQ,EAAQP,iBACRO,EAAQN,cACRM,EAAQL,UACRK,EAAQJ,cACRI,EAAQH,gBACRG,EAAQF,gBACRE,EAAQD,sBAGVhiD,KAAKmiD,UAAYD,EAAaV,GAjDX,IAkDnBxhD,KAAKoiD,WAAqC,MAAxBpiD,KAAKqnB,iBAAgD,MAArBrnB,KAAKshD,YACzD,ECpDK,MAAMe,WAAmC,EAI9CviD,YAAYC,GACVe,MAAMf,GACNC,KAAKsiD,mCAAqCtiD,KAAKC,oBAC7C,sCAEFD,KAAKuiD,iCAAmCviD,KAAKC,oBAC3C,mCAEJ,ECRK,MAAMuiD,WAA8C,EAWzD1iD,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAKyiD,UAAYziD,KAAKC,oBAAoB,aAC1CD,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAK6L,MAAQ7L,KAAKC,oBAAoB,SACtCD,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAK6M,OAAS7M,KAAKC,oBAAoB,UACvCD,KAAK0iD,aAAe1iD,KAAKC,oBAAoB,gBAC7CD,KAAK8tB,aAAe9tB,KAAKC,oBAAoB,gBAC7CD,KAAK68C,YAAc78C,KAAKC,oBAAoB,cAC9C,EAGK,MAAM0iD,WAA8C,EAWzD7iD,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAK4iD,UAAY5iD,KAAKC,oBAAoB,aAC1CD,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAK6L,MAAQ7L,KAAKC,oBAAoB,SACtCD,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAK6M,OAAS7M,KAAKC,oBAAoB,UACvCD,KAAK0iD,aAAe1iD,KAAKC,oBAAoB,gBAC7CD,KAAK8tB,aAAe9tB,KAAKC,oBAAoB,gBAC7CD,KAAK68C,YAAc78C,KAAKC,oBAAoB,cAC9C,EAGK,MAAM4iD,WAAwC,EAOnD/iD,YAAYC,GACVe,MAAMf,GAENC,KAAK8iD,aAAe9iD,KAAKC,oBAAoB,gBAC7CD,KAAKugB,IAAMvgB,KAAKC,oBAAoB,OACpCD,KAAKwgB,cAAgBxgB,KAAKC,oBAAoB,iBAC9CD,KAAKygB,UAAYzgB,KAAKC,oBAAoB,aAC1CD,KAAK0gB,eAAiB1gB,KAAKC,oBAAoB,iBACjD,EAGK,MAAM8iD,WAAoC,EAI/CjjD,YAAYC,GACVe,MAAMf,GAHR,KAAAuc,QAA4B,GAK1Btc,KAAK8iD,aAAe9iD,KAAKC,oBAAoB,gBAE7C,MAAMqc,EAAUtc,KAAKC,oBAAoB,WAC1B,MAAXqc,IACFtc,KAAKsc,QAAUA,EAAQtb,KAAK8D,GAAW,IAAIo5C,GAAep5C,KAE9D,ECrFK,MAAMk+C,WAAoC,EAG/CljD,YAAYC,GACVe,MAAMf,GACNC,KAAK8Q,IAAM9Q,KAAKC,oBAAoB,MACtC,ECLK,MAAMgjD,WAAyB,EAMpCnjD,YAAYC,GACVe,MAAMf,GACNC,KAAKugB,IAAMvgB,KAAKC,oBAAoB,OACpCD,KAAKwgB,cAAgBxgB,KAAKC,oBAAoB,iBAC9CD,KAAKygB,UAAYzgB,KAAKC,oBAAoB,aAC1CD,KAAK0gB,eAAiB1gB,KAAKC,oBAAoB,iBACjD,ECXK,MAAMijD,WAAyB,EAGpCpjD,YAAYC,GACVe,MAAMf,GACNC,KAAKyhB,mBAAqBzhB,KAAKC,oBAAoB,qBACrD,ECRK,MAAMkjD,WAA+B,EAG1CrjD,YAAYC,GACVe,MAAMf,GACNC,KAAK4L,MAAQ5L,KAAKC,oBAAoB,QACxC,ECNK,MAAMmjD,WAAuC,EAIlDtjD,YAAYC,GACVe,MAAMf,GACNC,KAAK0K,QAAU1K,KAAKC,oBAAoB,WACxCD,KAAK8Q,IAAM9Q,KAAKC,oBAAoB,MACtC,ECRK,MAAMojD,WAA6B,EAMxCvjD,YAAYC,GACVe,MAAMf,GACNC,KAAK0K,QAAU1K,KAAKC,oBAAoB,WACxCD,KAAK8F,KAAO9F,KAAKC,oBAAoB,QACrCD,KAAKsjD,UAAYtjD,KAAKC,oBAAoB,aAC1CD,KAAKujD,eAAiBvjD,KAAKC,oBAAoB,iBACjD,ECZK,MAAMujD,WAA+B,EAI1C1jD,YAAYC,GACVe,MAAMf,GACNC,KAAK0K,QAAU1K,KAAKC,oBAAoB,WACxCD,KAAK6L,MAAQ7L,KAAKC,oBAAoB,QACxC,ECPK,MAAMwjD,WAAkC,EAI7C3jD,YAAYC,GACVe,MAAMf,GACNC,KAAK0K,QAAU1K,KAAKC,oBAAoB,WACxCD,KAAKyK,KAAOzK,KAAKC,oBAAoB,OACvC,ECTK,MAAMyjD,WAAiC,EAG5C5jD,YAAYC,GACVe,MAAMf,GACNC,KAAK+lB,KAAO/lB,KAAKC,oBAAoB,OACvC,ECLK,MAAM0jD,WAAkC,EAI7C7jD,YAAYC,GACVe,MAAMf,GACNC,KAAK0K,QAAU1K,KAAKC,oBAAoB,WACxC,MAAMoH,EAAOrH,KAAKC,oBAAoB,QACtCD,KAAKqH,KAAe,MAARA,EAAe,KAAOA,EAAKrG,KAAKuG,GAAW,IAAIq8C,GAAYr8C,IACzE,EAGK,MAAMq8C,WAAoB,EAK/B9jD,YAAYC,GACVe,MAAMf,GACNC,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAK6jD,SAAW7jD,KAAKC,oBAAoB,WAC3C,EAGK,MAAM6jD,WAA0B,EAWrChkD,YAAYC,GACVe,MAAMf,GACNC,KAAK+jD,YAAc/jD,KAAKC,oBAAoB,eAC5CD,KAAKgkD,uBAAyBhkD,KAAKC,oBAAoB,0BACvDD,KAAKikD,UAAY,EAAMC,kBAAkBlkD,KAAKC,oBAAoB,cAClED,KAAKmkD,mBAAqBnkD,KAAKC,oBAAoB,sBAAsBe,KAAK8D,IAC5EA,EAAEI,GAAK,EAAMg/C,kBAAkBp/C,EAAEI,IAAI9B,OAC9B0B,KAET9E,KAAKokD,WAAapkD,KAAKC,oBAAoB,cAC3CD,KAAKqkD,iBAAmBrkD,KAAKC,oBAAoB,oBACjDD,KAAKskD,GAAKtkD,KAAKC,oBAAoB,MACnCD,KAAKgqC,QAAUhqC,KAAKC,oBAAoB,WAExC,MAAMskD,EAAOvkD,KAAKC,oBAAoB,QACtCskD,EAAKr/C,GAAK,EAAMg/C,kBAAkBK,EAAKr/C,IAEvClF,KAAKukD,KAAOA,CACd,ECvDK,MAAMC,WAAiC,EAS5C1kD,YAAYC,GACVe,MAAMf,GACNC,KAAK0K,QAAU1K,KAAKC,oBAAoB,WACxCD,KAAKykD,KAAOzkD,KAAKC,oBAAoB,QACrCD,KAAK0kD,KAAO1kD,KAAKC,oBAAoB,QACrCD,KAAK2kD,KAAO3kD,KAAKC,oBAAoB,QACrCD,KAAK4kD,KAAO5kD,KAAKC,oBAAoB,QACrCD,KAAK6kD,KAAO7kD,KAAKC,oBAAoB,QACrCD,KAAK8kD,IAAM9kD,KAAKC,oBAAoB,MACtC,ECSK,MAAM8kD,WAA8B,EAMzCjlD,YAAYC,GACVe,MAAMf,GACNC,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAKglD,UAAYhlD,KAAKC,oBAAoB,aAC1CD,KAAK0zB,YAAc1zB,KAAKC,oBAAoB,eAC5CD,KAAKilD,kBAAoBjlD,KAAKC,oBAAoB,oBACpD,EAGK,MAAMilD,WAA+B,EAQ1CplD,YAAYC,GACVe,MAAMf,GACNC,KAAK4F,IAAM5F,KAAKC,oBAAoB,OACpCD,KAAKmlD,OAASnlD,KAAKC,oBAAoB,UACvCD,KAAKq9B,OAASr9B,KAAKC,oBAAoB,UACvCD,KAAKolD,KAAOplD,KAAKC,oBAAoB,QACrCD,KAAKqlD,KAAOrlD,KAAKC,oBAAoB,QACrCD,KAAKslD,OAAStlD,KAAKC,oBAAoB,SACzC,EAGK,MAAMslD,WAAmC,EAU9CzlD,YAAYC,GACVe,MAAMf,GACNC,KAAKwlD,YAAcxlD,KAAKC,oBAAoB,eAC5CD,KAAKslD,OAAStlD,KAAKC,oBAAoB,UACvCD,KAAKylD,SAAWzlD,KAAKC,oBAAoB,YACzCD,KAAK0lD,kBAAoB1lD,KAAKC,oBAAoB,qBAClDD,KAAK2lD,eAAiB3lD,KAAKC,oBAAoB,kBAC/CD,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAK4lD,kBAAoB5lD,KAAKC,oBAAoB,qBAClDD,KAAK6lD,QAAU7lD,KAAKC,oBAAoB,UAC1C,EC/EK,MAAM6lD,WAA+B,EAI1ChmD,YAAYC,GACVe,MAAMf,GAJR,KAAAgmD,SAAqC,GACrC,KAAAC,aAA6C,GAI3C,MAAMA,EAAehmD,KAAKC,oBAAoB,gBACxC8lD,EAAW/lD,KAAKC,oBAAoB,YACtB,MAAhB+lD,IACFhmD,KAAKgmD,aAAeA,EAAahlD,KAAKH,GAAW,IAAI0kD,GAA2B1kD,MAElE,MAAZklD,IACF/lD,KAAK+lD,SAAWA,EAAS/kD,KAAK0B,GAAW,IAAIwiD,GAAuBxiD,KAExE,CAEIujD,mBACF,OAA+B,GAAxBjmD,KAAK+lD,SAASrlD,QAA2C,GAA5BV,KAAKgmD,aAAatlD,MACxD,EClBK,MAAMwlD,WAA+B,EAI1CpmD,YAAYC,GACVe,MAAMf,GACNC,KAAKmmD,QAAUnmD,KAAKC,oBAAoB,WACxC,MAAMmmD,EAAgBpmD,KAAKC,oBAAoB,iBAC/CD,KAAKomD,cAAiC,MAAjBA,EAAwB,KAAO,IAAIrB,GAAsBqB,EAChF,ECRK,MAAMC,WAAoC,EA8C/CvmD,YAAYC,G,YACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAKsmD,YAActmD,KAAKC,oBAAoB,eAC5CD,KAAKumD,UAAYvmD,KAAKC,oBAAoB,aAC1CD,KAAKwmD,aAAexmD,KAAKC,oBAAoB,gBAC7CD,KAAK8M,UAAY9M,KAAKC,oBAAoB,aAC1CD,KAAKymD,QAAUzmD,KAAKC,oBAAoB,WACxCD,KAAK0mD,OAAS1mD,KAAKC,oBAAoB,UACvCD,KAAK2mD,OAAS3mD,KAAKC,oBAAoB,UACvCD,KAAK4mD,OAAS5mD,KAAKC,oBAAoB,UACvCD,KAAK6mD,gBAA6D,QAA3C,EAAA7mD,KAAKC,oBAAoB,0BAAkB,SAClED,KAAK8mD,QAA6C,QAAnC,EAAA9mD,KAAKC,oBAAoB,kBAAU,SAClDD,KAAK+mD,qBAAuE,QAAhD,EAAA/mD,KAAKC,oBAAoB,+BAAuB,SAC5ED,KAAKgnD,iBAAmBhnD,KAAKC,oBAAoB,oBACjDD,KAAKinD,kBAAoBjnD,KAAKC,oBAAoB,qBAClDD,KAAKknD,mBAAqBlnD,KAAKC,oBAAoB,sBACnDD,KAAKmnD,0BAA4BnnD,KAAKC,oBAAoB,6BAC1DD,KAAKonD,SAAWpnD,KAAKC,oBAAoB,YACzCD,KAAKqnD,gBAAkBrnD,KAAKC,oBAAoB,mBAChDD,KAAKo/C,MAAQp/C,KAAKC,oBAAoB,SACtCD,KAAKsnD,eAAiBtnD,KAAKC,oBAAoB,kBAC/CD,KAAKunD,aAAevnD,KAAKC,oBAAoB,gBAC7CD,KAAK8Q,IAAM9Q,KAAKC,oBAAoB,OACpCD,KAAKwnD,wBAA0BxnD,KAAKC,oBAAoB,2BACxDD,KAAK6M,OAAS7M,KAAKC,oBAAoB,UACvCD,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAK0K,QAAU1K,KAAKC,oBAAoB,WACxCD,KAAKynD,SAAWznD,KAAKC,oBAAoB,YACzCD,KAAKwY,WAAaxY,KAAKC,oBAAoB,cAC3CD,KAAK4gD,YAAc,IAAIjB,GAAe3/C,KAAKC,oBAAoB,gBAC/DD,KAAK0nD,sBAAwB1nD,KAAKC,oBAAoB,yBACtDD,KAAKiM,OAASjM,KAAKC,oBAAoB,UACvCD,KAAKk/C,WAAal/C,KAAKC,oBAAoB,cAC3CD,KAAK2nD,aAAe3nD,KAAKC,oBAAoB,gBAC7CD,KAAK20B,aAAe30B,KAAKC,oBAAoB,gBAC7CD,KAAK4nD,8BAAgC5nD,KAAKC,oBAAoB,iCAC9DD,KAAK6nD,2BAA6B7nD,KAAKC,oBAAoB,8BAC3DD,KAAK8nD,gBAAkB9nD,KAAKC,oBAAoB,mBAChDD,KAAKiwB,oBAAqE,QAA/C,EAAAjwB,KAAKC,oBAAoB,8BAAsB,SAC1ED,KAAKya,gBAAkBza,KAAKC,oBAAoB,mBAChD,MAAM8nD,EAAsC/nD,KAAKC,oBAC/C,iCAEE8nD,IACF/nD,KAAKgoD,8BAAgC,IAAIp+C,KAAKm+C,IAEhD,MAAME,EAAoCjoD,KAAKC,oBAC7C,+BAEEgoD,IACFjoD,KAAKkoD,4BAA8B,IAAIt+C,KAAKq+C,IAE9CjoD,KAAKmoD,0BAA4BnoD,KAAKC,oBAAoB,6BAC1DD,KAAKooD,qBAAuBpoD,KAAKC,oBAAoB,uBACvD,ECzGK,MAAMooD,WAA4ChC,GACvDvmD,YAAYC,GACVe,MAAMf,GACNC,KAAKiwB,qBAAsB,CAC7B,ECFK,MAAMq4B,WAAgC,EAW3CxoD,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAK8Q,IAAM9Q,KAAKC,oBAAoB,OACpCD,KAAK6M,OAAS7M,KAAKC,oBAAoB,UACvCD,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAK0K,QAAU1K,KAAKC,oBAAoB,WACxCD,KAAK4gD,YAAc,IAAIjB,GAAe3/C,KAAKC,oBAAoB,gBAC/DD,KAAKiM,OAASjM,KAAKC,oBAAoB,UACvCD,KAAK8M,UAAY9M,KAAKC,oBAAoB,YAC5C,ECpBK,MAAMsoD,WAAwB,EAoBnCzoD,YAAYC,G,QACVe,MAAMf,GALR,KAAAwyC,cAA+C,GAC/C,KAAA7kC,UAAuC,GACvC,KAAA86C,sBAA+D,GAI7DxoD,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAK6L,MAAQ7L,KAAKC,oBAAoB,SACtCD,KAAKgwC,cAAgBhwC,KAAKC,oBAAoB,iBAC9CD,KAAKyoD,mBAAqBzoD,KAAKC,oBAAoB,sBACnDD,KAAK0oD,kBAAoB1oD,KAAKC,oBAAoB,WAClDD,KAAK2oD,wBAA0B3oD,KAAKC,oBAAoB,2BACxDD,KAAK4oD,QAAU5oD,KAAKC,oBAAoB,WACxCD,KAAK6oD,iBAAmB7oD,KAAKC,oBAAoB,oBACjDD,KAAK8Q,IAAM9Q,KAAKC,oBAAoB,OACpCD,KAAK68C,YAAc78C,KAAKC,oBAAoB,eAC5CD,KAAKyS,WAAazS,KAAKC,oBAAoB,cAC3CD,KAAKs1C,cAAgBt1C,KAAKC,oBAAoB,iBAC9CD,KAAKye,mBAAmE,QAA9C,EAAAze,KAAKC,oBAAoB,6BAAqB,SACxED,KAAK8uB,iBAA+D,QAA5C,EAAA9uB,KAAKC,oBAAoB,2BAAmB,SAEpE,MAAMsyC,EAAgBvyC,KAAKC,oBAAoB,iBAC1B,MAAjBsyC,IACFvyC,KAAKuyC,cAAgBA,EAAcvxC,KAAKgvB,GAAW,IAAIq2B,GAA4Br2B,MAErF,MAAMtiB,EAAY1N,KAAKC,oBAAoB,aAC1B,MAAbyN,IACF1N,KAAK0N,UAAYA,EAAU1M,KAAKgvB,GAAW,IAAIs4B,GAAwBt4B,MAEzE,MAAMw4B,EAAwBxoD,KAAKC,oBAAoB,yBAC1B,MAAzBuoD,IACFxoD,KAAKwoD,sBAAwBA,EAAsBxnD,KAChDgvB,GAAW,IAAIq4B,GAAoCr4B,KAG1D,ECvDK,MAAM84B,WAAwB,EAKnChpD,YAAYC,GACVe,MAAMf,GACN,MAAMgpD,EAAc/oD,KAAKC,oBAAoB,eAC1B,MAAf8oD,IACF/oD,KAAK+oD,YAAc,IAAIR,GAAgBQ,IAEzC/oD,KAAKgpD,0BAA4BhpD,KAAKC,oBAAoB,6BAC1DD,KAAKipD,QAAUjpD,KAAKC,oBAAoB,UAC1C,ECZK,MAAMipD,WAAqB,EAwDhCppD,YAAYC,GACVe,MAAMf,GACNC,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAKmpD,QAAUnpD,KAAKC,oBAAoB,WACxCD,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAKopD,SAAWppD,KAAKC,oBAAoB,YACzCD,KAAKqpD,oBAAsBrpD,KAAKC,oBAAoB,uBACpDD,KAAKspD,2BAA6BtpD,KAAKC,oBAAoB,8BAC3DD,KAAKupD,oBAAsBvpD,KAAKC,oBAAoB,uBACpDD,KAAKwpD,UAAYxpD,KAAKC,oBAAoB,aAC1CD,KAAKypD,cAAgBzpD,KAAKC,oBAAoB,iBAC9CD,KAAKsnD,eAAiBtnD,KAAKC,oBAAoB,kBAC/CD,KAAK0pD,SAAW1pD,KAAKC,oBAAoB,YACzCD,KAAK2pD,yBAA2B3pD,KAAKC,oBAAoB,4BACzDD,KAAK4pD,mBAAqB5pD,KAAKC,oBAAoB,sBACnDD,KAAK6pD,2BAA6B7pD,KAAKC,oBAAoB,8BAC3DD,KAAK8pD,qBAAuB9pD,KAAKC,oBAAoB,wBACrDD,KAAK+pD,uBAAyB/pD,KAAKC,oBAAoB,0BACvDD,KAAKgqD,gBAAkBhqD,KAAKC,oBAAoB,mBAChDD,KAAKiqD,YAAcjqD,KAAKC,oBAAoB,eAC5CD,KAAKkqD,YAAclqD,KAAKC,oBAAoB,eAC5CD,KAAKmqD,UAAYnqD,KAAKC,oBAAoB,aAC1CD,KAAKoqD,aAAepqD,KAAKC,oBAAoB,gBAC7CD,KAAKqqD,UAAYrqD,KAAKC,oBAAoB,aAC1CD,KAAK2mC,QAAU3mC,KAAKC,oBAAoB,WACxCD,KAAKsqD,OAAStqD,KAAKC,oBAAoB,UACvCD,KAAKuqD,OAASvqD,KAAKC,oBAAoB,UACvCD,KAAKwqD,OAASxqD,KAAKC,oBAAoB,UACvCD,KAAKyqD,iBAAmBzqD,KAAKC,oBAAoB,oBACjDD,KAAKqnD,gBAAkBrnD,KAAKC,oBAAoB,mBAChDD,KAAK0qD,iBAAmB1qD,KAAKC,oBAAoB,oBACjDD,KAAK2qD,iBAAmB3qD,KAAKC,oBAAoB,aACjDD,KAAK4qD,WAAa5qD,KAAKC,oBAAoB,cAC3CD,KAAK6qD,SAAW7qD,KAAKC,oBAAoB,YACzCD,KAAK8qD,aAAe9qD,KAAKC,oBAAoB,gBAC7CD,KAAK+qD,iBAAmB/qD,KAAKC,oBAAoB,oBACjDD,KAAKgrD,oBAAsBhrD,KAAKC,oBAAoB,uBACpDD,KAAKirD,0BAA4BjrD,KAAKC,oBAAoB,6BAC1DD,KAAKkrD,UAAYlrD,KAAKC,oBAAoB,aAC1CD,KAAKmrD,UAAYnrD,KAAKC,oBAAoB,aAC1CD,KAAKorD,4BAA8BprD,KAAKC,oBAAoB,+BAC5DD,KAAKqrD,yBAA2BrrD,KAAKC,oBAAoB,4BAEzDD,KAAKsrD,iBAAmBtrD,KAAKC,oBAAoB,oBACjDD,KAAKurD,iCAAmCvrD,KAAKC,oBAC3C,oCAEFD,KAAKwrD,mBAAqBxrD,KAAKC,oBAAoB,sBACnDD,KAAKyrD,kBAAoBzrD,KAAKC,oBAAoB,qBAClDD,KAAK0rD,kCAAoC1rD,KAAKC,oBAC5C,qCAEFD,KAAK2rD,YAAc3rD,KAAKC,oBAAoB,eAC5CD,KAAK4rD,6BAA+B5rD,KAAKC,oBAAoB,gCAC7DD,KAAK6rD,2BAA6B7rD,KAAKC,oBAAoB,6BAC7D,EChHK,MAAM6rD,WAA6B,EAUxChsD,YAAYC,GACVe,MAAMf,GACNC,KAAK+rD,YAAc/rD,KAAKC,oBAAoB,eAC5CD,KAAKgsD,UAAYhsD,KAAKC,oBAAoB,aAC1CD,KAAKunD,aAAevnD,KAAKC,oBAAoB,gBAC7CD,KAAKisD,QAAUjsD,KAAKC,oBAAoB,WACxCD,KAAK8hC,WAAa9hC,KAAKC,oBAAoB,cAC3CD,KAAKksD,mBAAqBlsD,KAAKC,oBAAoB,sBACnD,MAAMksD,EAAensD,KAAKC,oBAAoB,gBACxCmsD,EAAkBpsD,KAAKC,oBAAoB,mBACjDD,KAAKmsD,aAA+B,MAAhBA,EAAuB,KAAO,IAAIE,GAA4BF,GAClFnsD,KAAKosD,gBACgB,MAAnBA,EACI,KACA,IAAIE,GAA2CF,EACvD,EAGK,MAAMC,WAAoC,EAW/CvsD,YAAYC,GACVe,MAAMf,GAHR,KAAA08B,MAA2C,GAIzCz8B,KAAKusD,aAAevsD,KAAKC,oBAAoB,kBAC7CD,KAAKusD,aAAevsD,KAAKC,oBAAoB,gBAC7CD,KAAKwsD,gBAAkBxsD,KAAKC,oBAAoB,mBAChDD,KAAKysD,cAAgBzsD,KAAKC,oBAAoB,iBAC9CD,KAAK0sD,cAAgB1sD,KAAKC,oBAAoB,iBAC9CD,KAAK2sD,gBAAkB3sD,KAAKC,oBAAoB,mBAChDD,KAAK6M,OAAS7M,KAAKC,oBAAoB,UACvCD,KAAK4sD,UAAY5sD,KAAKC,oBAAoB,aAC1C,MAAMw8B,EAAQz8B,KAAKC,oBAAoB,SAC1B,MAATw8B,IACFz8B,KAAKy8B,MAAQA,EAAMz7B,KAAK0B,GAAW,IAAImqD,GAAgCnqD,KAE3E,EAGK,MAAMmqD,WAAwC,EASnD/sD,YAAYC,GACVe,MAAMf,GACNC,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAKslD,OAAStlD,KAAKC,oBAAoB,UACvCD,KAAK8sD,SAAW9sD,KAAKC,oBAAoB,YACzCD,KAAK+sD,SAAW/sD,KAAKC,oBAAoB,YACzCD,KAAKgtD,0BAA4BhtD,KAAKC,oBAAoB,6BAC1DD,KAAKitD,sBAAwBjtD,KAAKC,oBAAoB,yBACtDD,KAAKsrD,iBAAmBtrD,KAAKC,oBAAoB,mBACnD,EAGK,MAAMqsD,WAAmD,EAI9DxsD,YAAYC,GACVe,MAAMf,GACNC,KAAKqlD,KAAOrlD,KAAKC,oBAAoB,QACrCD,KAAKslD,OAAStlD,KAAKC,oBAAoB,SACzC,ECtFK,MAAMitD,WAAwB,EAUnCptD,YAAYC,GACVe,MAAMf,GACNC,KAAKmtD,MAAQntD,KAAKC,oBAAoB,eACtCD,KAAKotD,UAAYptD,KAAKC,oBAAoB,aAC1CD,KAAKqtD,MAAQrtD,KAAKC,oBAAoB,SACtCD,KAAKstD,MAAQttD,KAAKC,oBAAoB,SACtCD,KAAKk+B,KAAOl+B,KAAKC,oBAAoB,QACrCD,KAAKm+B,MAAQn+B,KAAKC,oBAAoB,SACtCD,KAAKo+B,WAAap+B,KAAKC,oBAAoB,cAC3CD,KAAKq+B,QAAUr+B,KAAKC,oBAAoB,UAC1C,ECpBK,MAAMstD,WAAwB,EAOnCztD,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAKq+B,QAAUr+B,KAAKC,oBAAoB,WACxCD,KAAKm+B,MAAQn+B,KAAKC,oBAAoB,SACtCD,KAAKo+B,WAAap+B,KAAKC,oBAAoB,cAC3CD,KAAKwtD,KAAOxtD,KAAKC,oBAAoB,OACvC,ECdK,MAAMwtD,WAA8B,EAczC3tD,YAAYC,GACVe,MAAMf,GACNC,KAAK0tD,UAAY1tD,KAAKC,oBAAoB,aAC1CD,KAAK2tD,WAAa3tD,KAAKC,oBAAoB,cAC3CD,KAAK4tD,YAAc5tD,KAAKC,oBAAoB,eAC5CD,KAAK0zB,YAAc1zB,KAAKC,oBAAoB,eAC5CD,KAAKiG,OAASjG,KAAKC,oBAAoB,UACvCD,KAAK6tD,SAAW7tD,KAAKC,oBAAoB,YACzCD,KAAK8tD,WAAa9tD,KAAKC,oBAAoB,cAC3CD,KAAK+tD,SAAW/tD,KAAKC,oBAAoB,YACzCD,KAAKguD,aAAehuD,KAAKC,oBAAoB,gBAC7CD,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAKiuD,SAAWjuD,KAAKC,oBAAoB,YACzCD,KAAK29B,MAAQ39B,KAAKC,oBAAoB,QACxC,EC5BK,MAAMiuD,WAA6B,EAKxCpuD,YAAYC,GACVe,MAAMf,GACNC,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAKmuD,QAAUnuD,KAAKC,oBAAoB,WACxCD,KAAKouD,SAAWpuD,KAAKC,oBAAoB,WAC3C,ECTK,MAAMouD,WAAwB,EAInCvuD,YAAYC,GACVe,MAAMf,GAHR,KAAAuuD,wBAAkD,GAIhDtuD,KAAKylC,kBAAoBzlC,KAAKC,oBAAoB,qBAClD,MAAMquD,EAA0BtuD,KAAKC,oBAAoB,2BAEvDD,KAAKsuD,wBADwB,MAA3BA,EAC6BA,EAAwBttD,KACpDuxB,GAAW,IAAI27B,GAAqB37B,KAGR,EAEnC,ECdK,MAAMg8B,WAAsB,EAsBjCzuD,YAAYC,GACVe,MAAMf,GACNC,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAKiM,OAASjM,KAAKC,oBAAoB,UACvCD,KAAKwK,eAAiBxK,KAAKC,oBAAoB,kBAC/CD,KAAKk/C,WAAal/C,KAAKC,oBAAoB,cAC3CD,KAAKwuD,SAAWxuD,KAAKC,oBAAoB,YACzCD,KAAKyuD,aAAezuD,KAAKC,oBAAoB,gBAC7CD,KAAK0uD,QAAU1uD,KAAKC,oBAAoB,WACxCD,KAAK2uD,SAAW3uD,KAAKC,oBAAoB,YACzCD,KAAK8L,mBAAqB9L,KAAKC,oBAAoB,sBACnDD,KAAK4uD,eAAiB5uD,KAAKC,oBAAoB,kBAC/CD,KAAK6uD,uBAAyB7uD,KAAKC,oBAAoB,0BACvDD,KAAK8uD,aAAe9uD,KAAKC,oBAAoB,gBAC7CD,KAAKqlD,KAAOrlD,KAAKC,oBAAoB,QACrCD,KAAKsY,WAAatY,KAAKC,oBAAoB,cAC3CD,KAAK+uD,UAAY/uD,KAAKC,oBAAoB,aAC1CD,KAAKgvD,eAAiBhvD,KAAKC,oBAAoB,kBAC/CD,KAAKivD,WAAajvD,KAAKC,oBAAoB,cAC3CD,KAAKkvD,WAAalvD,KAAKC,oBAAoB,cAC3CD,KAAKmvD,SAAWnvD,KAAKC,oBAAoB,YACzCD,KAAKovD,iBAAmBpvD,KAAKC,oBAAoB,mBACnD,EC9CK,MAAMovD,WAAwB,EAInCvvD,YAAYC,GACVe,MAAMf,GACNC,KAAKiM,OAASjM,KAAKC,oBAAoB,UACvCD,KAAKyZ,UAAYzZ,KAAKC,oBAAoB,YAC5C,ECLK,MAAMqvD,WAAqC,EAMhDxvD,YAAYC,GACVe,MAAMf,GAFR,KAAA6F,IAAc,KAGZ5F,KAAKuvD,aAAevvD,KAAKC,oBAAoB,gBAC7CD,KAAK6tC,eAAiB7tC,KAAKC,oBAAoB,kBAC/C,MAAMuvD,EAAiBxvD,KAAKC,oBAAoB,kBAC1CwvD,EAAqBzvD,KAAKC,oBAAoB,sBACpDD,KAAKwvD,eAAmC,MAAlBA,EAAyB,KAAO,IAAItR,GAAesR,GACzExvD,KAAKyvD,mBACmB,MAAtBA,EAA6B,KAAO,IAAIvR,GAAeuR,GACzDzvD,KAAK4F,IAAM5F,KAAKC,oBAAoB,MACtC,ECnBK,MAAMyvD,WAAoB,EAM/B5vD,YAAYiB,EAAY,MACtBD,MAAMC,GACM,MAARA,IAGJf,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAK+8B,SAAW/8B,KAAKC,oBAAoB,YACzCD,KAAKg9B,KAAOh9B,KAAKC,oBAAoB,QACrCD,KAAKi9B,SAAWj9B,KAAKC,oBAAoB,YAC3C,ECfK,MAAM0vD,WAAoB,EAI/B7vD,YAAYiB,EAAY,MACtBD,MAAMC,GACM,MAARA,IAGJf,KAAK4vD,KAAO5vD,KAAKC,oBAAoB,QACrCD,KAAK6vD,OAAS7vD,KAAKC,oBAAoB,YAAa,EACtD,ECRK,MAAM6vD,WAAqB,EAkBhChwD,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAK+vD,SAAW/vD,KAAKC,oBAAoB,YACzCD,KAAKyK,KAAOzK,KAAKC,oBAAoB,QACrCD,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAK6/B,MAAQ7/B,KAAKC,oBAAoB,SACtCD,KAAK8Q,IAAM9Q,KAAKC,oBAAoB,OACpCD,KAAKgwD,eAAiBhwD,KAAKC,oBAAoB,kBAC/CD,KAAKiwD,YAAcjwD,KAAKC,oBAAoB,eAC5CD,KAAK+tB,aAAe/tB,KAAKC,oBAAoB,gBAC7CD,KAAKkwD,eAAiBlwD,KAAKC,oBAAoB,kBAC/CD,KAAKmwD,aAAenwD,KAAKC,oBAAoB,gBAC7CD,KAAKoZ,SAAWpZ,KAAKC,oBAAoB,YACzCD,KAAKowD,QAAUpwD,KAAKC,oBAAoB,cAAe,EACvDD,KAAKqwD,UAAYrwD,KAAKC,oBAAoB,eAAgB,EAE1D,MAAM2vD,EAAO5vD,KAAKC,oBAAoB,QAC1B,MAAR2vD,IACF5vD,KAAK4vD,KAAO,IAAID,GAAYC,IAG9B,MAAMU,EAAOtwD,KAAKC,oBAAoB,QAC1B,MAARqwD,IACFtwD,KAAKswD,KAAO,IAAIZ,GAAYY,GAEhC,EC/CK,MAAMC,WAAuB,EAKlCzwD,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAK0B,KAAO1B,KAAKC,oBAAoB,QACrCD,KAAK+tB,aAAe/tB,KAAKC,oBAAoB,eAC/C,ECFK,MAAMuwD,WAAqB,EAShC1wD,YAAYC,GACVe,MAAMf,GARR,KAAAwc,QAA4B,GAC5B,KAAAE,YAA2C,GAC3C,KAAAH,QAA4B,GAE5B,KAAAjQ,SAA8B,GAC9B,KAAAmQ,MAAwB,GAKtB,MAAMwB,EAAUhe,KAAKC,oBAAoB,WAC1B,MAAX+d,IACFhe,KAAKge,QAAU,IAAIuqC,GAAgBvqC,IAGrC,MAAMzB,EAAUvc,KAAKC,oBAAoB,WAC1B,MAAXsc,IACFvc,KAAKuc,QAAUA,EAAQvb,KAAKw/B,GAAW,IAAI+vB,GAAe/vB,MAG5D,MAAM/jB,EAAczc,KAAKC,oBAAoB,eAC1B,MAAfwc,IACFzc,KAAKyc,YAAcA,EAAYzb,KAAK8D,GAAW,IAAI25C,GAA0B35C,MAG/E,MAAMwX,EAAUtc,KAAKC,oBAAoB,WAC1B,MAAXqc,IACFtc,KAAKsc,QAAUA,EAAQtb,KAAK8D,GAAW,IAAIo5C,GAAep5C,MAG5D,MAAMqpD,EAAUnuD,KAAKC,oBAAoB,WAC1B,MAAXkuD,IACFnuD,KAAKmuD,QAAU,IAAIE,GAAgBF,IAGrC,MAAM9hD,EAAWrM,KAAKC,oBAAoB,YAC1B,MAAZoM,IACFrM,KAAKqM,SAAWA,EAASrL,KAAK0V,GAAW,IAAI/L,EAAe+L,MAG9D,MAAM8F,EAAQxc,KAAKC,oBAAoB,SAC1B,MAATuc,IACFxc,KAAKwc,MAAQA,EAAMxb,KAAK2G,GAAW,IAAImoD,GAAanoD,KAExD,E,2SCqGK,MAAM8oD,GAMX3wD,YACUshB,EACApC,EACA8I,EACAzG,EACAuN,EACA8hC,EAA0B,MAL1B,KAAAtvC,aAAAA,EACA,KAAApC,qBAAAA,EACA,KAAA8I,mBAAAA,EACA,KAAAzG,aAAAA,EACA,KAAAuN,eAAAA,EACA,KAAA8hC,gBAAAA,EATF,KAAAC,aAAc,EACd,KAAAC,iBAAkB,EAUxB5wD,KAAK2X,OAASqH,EAAqBC,YACnCjf,KAAKsY,WAAatY,KAAK2X,OAAOtU,WAC9BrD,KAAK2wD,YACH3wD,KAAK2X,SAAWpK,EAAWsjD,WAC3B7wD,KAAK2X,SAAWpK,EAAWujD,eAC3B9wD,KAAK2X,SAAWpK,EAAWwjD,aAC3B/wD,KAAK2X,SAAWpK,EAAWyjD,gBAC3BhxD,KAAK2X,SAAWpK,EAAW0jD,cAC3BjxD,KAAK2X,SAAWpK,EAAW2jD,eAC3BlxD,KAAK2X,SAAWpK,EAAW4jD,gBAC3BnxD,KAAK2X,SAAWpK,EAAW6jD,eAC7BpxD,KAAK4wD,gBACH5wD,KAAK2X,SAAWpK,EAAWa,gBAC3BpO,KAAK2X,SAAWpK,EAAWc,cAC3BrO,KAAK2X,SAAWpK,EAAWe,YAC/B,CAIMyT,kBACJrV,G,0CAEA,MAAMmL,EAAU,IAAI0yB,QAAQ,CAC1B,eAAgB,mDAChB8mB,OAAQ,mBACR,cAAerxD,KAAKsY,aAEM,MAAxBtY,KAAK0wD,iBACP74C,EAAQrR,IAAI,aAAcxG,KAAK0wD,iBAEjChkD,EAAQkL,0BAA0BC,GAElC,MAAMy5C,EACJ5kD,aAAmBgb,GACfhb,EAAQwL,kBACRxL,EAAQwL,gBAAgBlY,KAAKgf,qBAAqBuyC,iBAElDxxD,QAAiBC,KAAK+qC,MAC1B,IAAIL,QAAQ1qC,KAAK8nB,mBAAmB0pC,iBAAmB,iBAAkB,CACvE7mB,KAAM3qC,KAAKyxD,YAAYH,GACvBhtC,YAAatkB,KAAK0xD,iBAClB9mB,MAAO,WACP/yB,QAASA,EACTgzB,OAAQ,UAIZ,IAAI8mB,EAAoB,KAKxB,GAJI3xD,KAAK4xD,eAAe7xD,KACtB4xD,QAAqB5xD,EAASue,QAGZ,MAAhBqzC,EAAsB,CACxB,GAAwB,MAApB5xD,EAAS8M,OACX,OAAO,IAAIiT,GAAsB6xC,GAC5B,GACe,MAApB5xD,EAAS8M,QACT8kD,EAAaE,qBACb1qD,OAAOE,KAAKsqD,EAAaE,qBAAqBnxD,OAG9C,aADMV,KAAKohB,aAAa+Q,sBACjB,IAAIpR,GAA0B4wC,GAChC,GACe,MAApB5xD,EAAS8M,QACT8kD,EAAah+C,kBACbxM,OAAOE,KAAKsqD,EAAah+C,kBAAkBjT,OAE3C,OAAO,IAAI4Y,GAAwBq4C,E,CAIvC,OAAOzoD,QAAQ4oD,OAAO,IAAI1+C,GAAcu+C,EAAc5xD,EAAS8M,QAAQ,GACzE,G,CAEMklD,uB,0CACJ,UACQ/xD,KAAKgyD,e,CACX,MAAOzpD,GACP,OAAOW,QAAQ4oD,OAAO,K,CAE1B,G,CAGMG,gBAAgBvlD,G,0CACpB,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,kBAAmBiB,GAAS,GAAO,GACrE,OAAO,IAAIy0C,GAAoBp8C,EACjC,G,CACMmtD,qBAAqBxlD,G,0CACzB,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,+BAAgCiB,GAAS,GAAM,GACjF,OAAO,IAAIy0C,GAAoBp8C,EACjC,G,CAEMotD,gBAAgBjtD,EAAY8S,G,0CAChC,MAAMo6C,EAAO,kBAAkBltD,mBAAoB8S,IAC7CjT,QAAU/E,KAAKyL,KAAK,MAAO2mD,EAAM,MAAM,GAAO,GACpD,OAAO,IAAIjR,GAAoBp8C,EACjC,G,CAEMmiB,eAAehiB,G,0CACnB,MAAMktD,EAAO,kBAAkBltD,IACzBH,QAAU/E,KAAKyL,KAAK,MAAO2mD,EAAM,MAAM,GAAM,GACnD,OAAO,IAAIjR,GAAoBp8C,EACjC,G,CAEMgmB,eAAe7lB,EAAYwH,G,0CAC/B,MAAM0lD,EAAO,kBAAkBltD,IACzBH,QAAU/E,KAAKyL,KAAK,MAAO2mD,EAAM1lD,GAAS,GAAM,GACtD,OAAO,IAAIy0C,GAAoBp8C,EACjC,G,CAEMstD,kB,0CACJ,MACMttD,QAAU/E,KAAKyL,KAAK,MADb,kBAC0B,MAAM,GAAM,GACnD,OAAO,IAAI7K,EAAamE,EAAGo8C,GAC7B,G,CAEMmR,qB,0CACJ,MACMC,SADiBvyD,KAAKqyD,mBACItxD,KAAKuG,QAAQkrD,IAAOA,EAAEpQ,aAAeoQ,EAAErQ,YAIvE,OAHoBoQ,EAAe3+B,MAAK,CAACjtB,EAAwBC,IAC/DD,EAAEmnB,aAAa/mB,cAAcH,EAAEknB,gBAC/BykC,EAAe7xD,OAAS,EAE5B,G,CAIM+xD,a,0CACJ,MAAM1tD,QAAU/E,KAAKyL,KAAK,MAAO,oBAAqB,MAAM,GAAM,GAClE,OAAO,IAAI88C,GAAgBxjD,EAC7B,G,CAEM2tD,sB,0CACJ,MAAM3tD,QAAU/E,KAAKyL,KAAK,MAAO,yBAA0B,MAAM,GAAM,GACvE,OAAO,IAAIqgD,GAAqB/mD,EAClC,G,CAEM4tD,a,0CACJ,MAAM5tD,QAAU/E,KAAKyL,KAAK,MAAO,gBAAiB,MAAM,GAAM,GAC9D,OAAO,IAAIyhD,GAAgBnoD,EAC7B,G,CAEM6tD,WAAWlmD,G,0CACf,MAAM3H,QAAU/E,KAAKyL,KAAK,MAAO,oBAAqBiB,GAAS,GAAM,GACrE,OAAO,IAAI67C,GAAgBxjD,EAC7B,G,CAEMq4C,UAAU1wC,G,0CACd,MAAM3H,QAAU/E,KAAKyL,KAAK,MAAO,mBAAoBiB,GAAS,GAAM,GACpE,OAAO,IAAI67C,GAAgBxjD,EAC7B,G,CAEA8tD,WAAWnmD,GACT,OAAO1M,KAAKyL,KAAK,MAAO,gBAAiBiB,GAAS,GAAM,EAC1D,CAEMsd,aAAatd,G,0CACjB,MAAM3H,QAAU/E,KAAKyL,KACnB,OACA,qBACAiB,GACA,GACA,EACA1M,KAAK8nB,mBAAmB0pC,kBAE1B,OAAO,IAAIvO,GAAiBl+C,EAC9B,G,CAEA+tD,eAAepmD,GACb,OAAO1M,KAAKyL,KAAK,OAAQ,wBAAyBiB,GAAS,GAAM,EACnE,CAEAqmD,UAAUrmD,GACR,OAAO1M,KAAKyL,KAAK,OAAQ,kBAAmBiB,GAAS,GAAM,EAC7D,CAEAsmD,aAAatmD,GACX,OAAO1M,KAAKyL,KAAK,OAAQ,qBAAsBiB,GAAS,GAAM,EAChE,CAEAumD,YAAYvmD,GACV,OAAO1M,KAAKyL,KAAK,OAAQ,yBAA0BiB,GAAS,GAAM,EACpE,CAEA+jB,uBAAuB/jB,GACrB,OAAO1M,KAAKyL,KAAK,OAAQ,kCAAmCiB,GAAS,GAAM,EAC7E,CAEAwmD,kBAAkBxmD,GAChB,OAAO1M,KAAKyL,KAAK,OAAQ,2BAA4BiB,GAAS,GAAM,EACtE,CAEMymD,yB,0CAEJ,aADgBnzD,KAAKyL,KAAK,MAAO,0BAA2B,MAAM,GAAM,EAE1E,G,CAEA2nD,iBAAiB1mD,GACf,OAAO1M,KAAKyL,KAAK,OAAQ,0BAA2BiB,GAAS,GAAO,EACtE,CAEM2mD,aAAa3mD,G,0CACjB,MAAM3H,QAAU/E,KAAKyL,KACnB,OACA,qBACAiB,GACA,GACA,EACA1M,KAAK8nB,mBAAmB0pC,kBAE1B,OAAO,IAAItO,GAAiBn+C,EAC9B,G,CAEMuuD,YAAYvyD,G,0CAChB,MAAMgE,QAAU/E,KAAKyL,KAAK,OAAQ,oBAAqB1K,GAAM,GAAM,GACnE,OAAO,IAAI+nD,GAAgB/jD,EAC7B,G,CAEMwuD,aAAa7mD,G,0CACjB,OAAO1M,KAAKyL,KAAK,OAAQ,sBAAuBiB,GAAS,GAAM,EACjE,G,CAEA8mD,uBACE,OAAOxzD,KAAKyL,KAAK,OAAQ,8BAA+B,MAAM,GAAM,EACtE,CAEAgoD,oBACE,OAAOzzD,KAAKyL,KAAK,OAAQ,2BAA4B,MAAM,GAAM,EACnE,CAEMioD,mBAAmBhnD,G,0CACvB,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,oBAAqBiB,GAAS,GAAM,GACtE,OAAO,IAAIo8C,GAAgB/jD,EAC7B,G,CAEA4uD,mBAAmBjnD,GACjB,OAAO1M,KAAKyL,KAAK,OAAQ,oBAAqBiB,GAAS,GAAM,EAC/D,CAEAknD,mBAAmB7yD,GACjB,OAAOf,KAAKyL,KAAK,OAAQ,oBAAqB1K,GAAM,GAAM,EAC5D,CAEA8iB,gBAAgBnX,GACd,OAAO1M,KAAKyL,KAAK,OAAQ,iBAAkBiB,GAAS,GAAM,EAC5D,CAEAmnD,eAAennD,GACb,OAAO1M,KAAKyL,KAAK,OAAQ,gBAAiBiB,GAAS,GAAM,EAC3D,CAEAonD,yBACE,OAAO9zD,KAAKyL,KAAK,OAAQ,yBAA0B,MAAM,GAAM,EACjE,CAEAsoD,4BAA4BrnD,GAC1B,OAAO1M,KAAKyL,KAAK,OAAQ,+BAAgCiB,GAAS,GAAO,EAC3E,CAEAsnD,0BACEtnD,GAEA,OAAO1M,KAAKyL,KAAK,OAAQ,4BAA6BiB,GAAS,GAAM,EACvE,CAEAunD,yBAAyBvnD,GACvB,OAAO1M,KAAKyL,KAAK,OAAQ,2BAA4BiB,GAAS,GAAO,EACvE,CAEAwnD,8BAA8BxnD,GAC5B,OAAO1M,KAAKyL,KAAK,OAAQ,iCAAkCiB,GAAS,GAAO,EAC7E,CAEAynD,eAAeznD,GACb,OAAO1M,KAAKyL,KAAK,OAAQ,gBAAiBiB,GAAS,GAAM,EAC3D,CAEM0nD,cAAc5pD,G,0CAClB,OAAOxK,KAAKyL,KAAK,SAAU,iBAAmBjB,EAAgB,MAAM,GAAM,EAC5E,G,CAEM6pD,uB,0CACJ,OAAOr0D,KAAKyL,KAAK,MAAO,gCAAiC,MAAM,GAAM,EACvE,G,CAEM6oD,eAAepvD,EAAYwH,G,0CAC/B,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,oBAAqBiB,GAAS,GAAM,GACtE,OAAO,IAAIu0C,GAAel8C,EAC5B,G,CAEMwvD,qBACJrvD,EACAwH,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,2BAA4BiB,GAAS,GAAM,GAC7E,OAAO,IAAIu0C,GAAel8C,EAC5B,G,CAEAyvD,sBAAsB9nD,GACpB,OAAO1M,KAAKyL,KAAK,MAAO,iCAAkCiB,GAAS,GAAM,EAC3E,CAEAijB,4BACE,OAAO3vB,KAAKyL,KAAK,OAAQ,qCAAsC,MAAM,GAAM,EAC7E,CAIMgpD,wB,0CACJ,MAAM1vD,QAAU/E,KAAKyL,KAAK,MAAO,4BAA6B,MAAM,GAAM,GAC1E,OAAO,IAAIq6C,GAAuB/gD,EACpC,G,CAEM2vD,wB,0CACJ,MAAM3vD,QAAU/E,KAAKyL,KAAK,MAAO,mCAAoC,MAAM,GAAM,GACjF,OAAO,IAAIy6C,GAAuBnhD,EACpC,G,CAIM4vD,UAAUzvD,G,0CACd,MAAMH,QAAU/E,KAAKyL,KAAK,MAAO,YAAcvG,EAAI,MAAM,GAAM,GAC/D,OAAO,IAAIg5C,GAAen5C,EAC5B,G,CAEM6vD,qBAAqB1vD,G,0CACzB,MAAMH,QAAU/E,KAAKyL,KAAK,MAAO,YAAcvG,EAAK,WAAY,MAAM,GAAM,GAC5E,OAAO,IAAIg5C,GAAen5C,EAC5B,G,CAEM8vD,eAAe3vD,G,0CACnB,MAAMH,QAAU/E,KAAKyL,KAAK,MAAO,YAAcvG,EAAK,SAAU,MAAM,GAAM,GAC1E,OAAO,IAAIg5C,GAAen5C,EAC5B,G,CAEM+vD,uBAAuBtqD,G,0CAC3B,MAAMzF,QAAU/E,KAAKyL,KACnB,MACA,gDAAkDjB,EAClD,MACA,GACA,GAEF,OAAO,IAAI5J,EAAamE,EAAGm5C,GAC7B,G,CAEM6W,WAAWroD,G,0CACf,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,WAAYiB,GAAS,GAAM,GAC7D,OAAO,IAAIwxC,GAAen5C,EAC5B,G,CAEMiwD,iBAAiBtoD,G,0CACrB,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,kBAAmBiB,GAAS,GAAM,GACpE,OAAO,IAAIwxC,GAAen5C,EAC5B,G,CAEMkwD,gBAAgBvoD,G,0CACpB,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,iBAAkBiB,GAAS,GAAM,GACnE,OAAO,IAAIwxC,GAAen5C,EAC5B,G,CAEMmwD,UAAUhwD,EAAYwH,G,0CAC1B,MAAM3H,QAAU/E,KAAKyL,KAAK,MAAO,YAAcvG,EAAIwH,GAAS,GAAM,GAClE,OAAO,IAAIwxC,GAAen5C,EAC5B,G,CAEMowD,iBAAiBjwD,EAAYwH,G,0CACjC,MAAM3H,QAAU/E,KAAKyL,KAAK,MAAO,YAAcvG,EAAK,WAAYwH,GAAS,GAAM,GAC/E,OAAO,IAAIwxC,GAAen5C,EAC5B,G,CAEMqwD,eAAelwD,EAAYwH,G,0CAC/B,MAAM3H,QAAU/E,KAAKyL,KAAK,MAAO,YAAcvG,EAAK,SAAUwH,GAAS,GAAM,GAC7E,OAAO,IAAIwxC,GAAen5C,EAC5B,G,CAEAswD,aAAanwD,GACX,OAAOlF,KAAKyL,KAAK,SAAU,YAAcvG,EAAI,MAAM,GAAM,EAC3D,CAEAowD,kBAAkBpwD,GAChB,OAAOlF,KAAKyL,KAAK,SAAU,YAAcvG,EAAK,SAAU,MAAM,GAAM,EACtE,CAEAqwD,kBAAkB7oD,GAChB,OAAO1M,KAAKyL,KAAK,SAAU,WAAYiB,GAAS,GAAM,EACxD,CAEA8oD,uBAAuB9oD,GACrB,OAAO1M,KAAKyL,KAAK,SAAU,iBAAkBiB,GAAS,GAAM,EAC9D,CAEA+oD,eAAe/oD,GACb,OAAO1M,KAAKyL,KAAK,MAAO,gBAAiBiB,GAAS,GAAM,EAC1D,CAEMgpD,eAAexwD,EAAYwH,G,0CAC/B,MAAM3H,QAAU/E,KAAKyL,KAAK,MAAO,YAAcvG,EAAK,SAAUwH,GAAS,GAAM,GAC7E,OAAO,IAAIwxC,GAAen5C,EAC5B,G,CAEA4wD,gBAAgBjpD,GACd,OAAO1M,KAAKyL,KAAK,MAAO,iBAAkBiB,GAAS,GAAM,EAC3D,CAEAkpD,qBAAqB1wD,EAAYwH,GAC/B,OAAO1M,KAAKyL,KAAK,MAAO,YAAcvG,EAAK,eAAgBwH,GAAS,GAAM,EAC5E,CAEAmpD,0BAA0B3wD,EAAYwH,GACpC,OAAO1M,KAAKyL,KAAK,MAAO,YAAcvG,EAAK,qBAAsBwH,GAAS,GAAM,EAClF,CAEAopD,iBACEppD,EACAlC,EAAyB,MAEzB,IAAI4nD,EAAO,iBAIX,OAHsB,MAAlB5nD,IACF4nD,GAAQ,mBAAqB5nD,GAExBxK,KAAKyL,KAAK,OAAQ2mD,EAAM1lD,GAAS,GAAM,EAChD,CAEAqpD,gBAAgB7wD,GACd,OAAOlF,KAAKyL,KAAK,MAAO,YAAcvG,EAAK,UAAW,MAAM,GAAM,EACpE,CAEA8wD,qBAAqB9wD,GACnB,OAAOlF,KAAKyL,KAAK,MAAO,YAAcvG,EAAK,gBAAiB,MAAM,GAAM,EAC1E,CAEA+wD,qBAAqBvpD,GACnB,OAAO1M,KAAKyL,KAAK,MAAO,kBAAmBiB,GAAS,GAAM,EAC5D,CAEAwpD,0BAA0BxpD,GACxB,OAAO1M,KAAKyL,KAAK,MAAO,wBAAyBiB,GAAS,GAAM,EAClE,CAEMypD,iBAAiBjxD,G,0CACrB,MAAMH,QAAU/E,KAAKyL,KAAK,MAAO,YAAcvG,EAAK,WAAY,MAAM,GAAM,GAC5E,OAAO,IAAIg5C,GAAen5C,EAC5B,G,CAEMqxD,sBAAsBlxD,G,0CAC1B,MAAMH,QAAU/E,KAAKyL,KAAK,MAAO,YAAcvG,EAAK,iBAAkB,MAAM,GAAM,GAClF,OAAO,IAAIg5C,GAAen5C,EAC5B,G,CAEMsxD,sBACJ3pD,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KAAK,MAAO,mBAAoBiB,GAAS,GAAM,GACpE,OAAO,IAAI9L,EAA6BmE,EAAGm5C,GAC7C,G,CAEMoY,2BACJ5pD,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KAAK,MAAO,yBAA0BiB,GAAS,GAAM,GAC1E,OAAO,IAAI9L,EAA6BmE,EAAGm5C,GAC7C,G,CAIMqY,kBACJ/H,EACAe,EACAiH,G,0CAEA,MAAMpE,GACkB,MAArBoE,EAA4B,qBAAuBA,EAAoB,IAAM,aAC9EhI,EACA,eACAe,EACIxqD,QAAU/E,KAAKyL,KAAK,MAAO2mD,EAAM,MAAM,GAAM,GACnD,OAAO,IAAIpU,GAAmBj5C,EAChC,G,CAEM0xD,qBACJvxD,EACAwH,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,YAAcvG,EAAK,iBAAkBwH,GAAS,GAAM,GACtF,OAAO,IAAI4iD,GAA6BvqD,EAC1C,G,CAMM2xD,2BAA2BxxD,EAAYnE,G,0CAC3C,MAAMgE,QAAU/E,KAAKyL,KAAK,OAAQ,YAAcvG,EAAK,cAAenE,GAAM,GAAM,GAChF,OAAO,IAAIm9C,GAAen5C,EAC5B,G,CAMM4xD,gCAAgCzxD,EAAYnE,G,0CAChD,MAAMgE,QAAU/E,KAAKyL,KAAK,OAAQ,YAAcvG,EAAK,oBAAqBnE,GAAM,GAAM,GACtF,OAAO,IAAIm9C,GAAen5C,EAC5B,G,CAEA6xD,uBAAuB1xD,EAAYqqD,GACjC,OAAOvvD,KAAKyL,KAAK,SAAU,YAAcvG,EAAK,eAAiBqqD,EAAc,MAAM,GAAM,EAC3F,CAEAsH,4BAA4B3xD,EAAYqqD,GACtC,OAAOvvD,KAAKyL,KACV,SACA,YAAcvG,EAAK,eAAiBqqD,EAAe,SACnD,MACA,GACA,EAEJ,CAEAuH,0BACE5xD,EACAqqD,EACAxuD,EACAyJ,GAEA,OAAOxK,KAAKyL,KACV,OACA,YAAcvG,EAAK,eAAiBqqD,EAAe,yBAA2B/kD,EAC9EzJ,GACA,GACA,EAEJ,CAEMg2D,yBACJ7xD,EACAqqD,G,0CAEA,MAAMxqD,QAAU/E,KAAKyL,KACnB,MACA,YAAcvG,EAAK,eAAiBqqD,EAAe,SACnD,MACA,GACA,GAEF,OAAO,IAAID,GAA6BvqD,EAC1C,G,CAEAiyD,mBAAmB9xD,EAAYqqD,EAAsBxuD,GACnD,OAAOf,KAAKyL,KAAK,OAAQ,YAAcvG,EAAK,eAAiBqqD,EAAcxuD,GAAM,GAAM,EACzF,CAIMk2D,2BACJzsD,EACAtF,G,0CAEA,MAAMH,QAAU/E,KAAKyL,KACnB,MACA,kBAAoBjB,EAAiB,gBAAkBtF,EAAK,WAC5D,MACA,GACA,GAEF,OAAO,IAAIw5C,GAAgC35C,EAC7C,G,CAEMmyD,qB,0CACJ,MAAMnyD,QAAU/E,KAAKyL,KAAK,MAAO,eAAgB,MAAM,GAAM,GAC7D,OAAO,IAAI7K,EAAamE,EAAGw5C,GAC7B,G,CAEM4Y,eAAe3sD,G,0CACnB,MAAMzF,QAAU/E,KAAKyL,KACnB,MACA,kBAAoBjB,EAAiB,eACrC,MACA,GACA,GAEF,OAAO,IAAI5J,EAAamE,EAAGw5C,GAC7B,G,CAEM6Y,oCACJ5sD,G,0CAEA,MAAMzF,QAAU/E,KAAKyL,KACnB,MACA,kBAAoBjB,EAAiB,uBACrC,MACA,GACA,GAEF,OAAO,IAAI5J,EAAamE,EAAG25C,GAC7B,G,CAEM2Y,mBACJ7sD,EACAtF,G,0CASA,aAPgBlF,KAAKyL,KACnB,MACA,kBAAoBjB,EAAiB,gBAAkBtF,EAAK,SAC5D,MACA,GACA,IAEOlE,KAAKC,GAAY,IAAIm9C,GAA0Bn9C,IAC1D,G,CAEMq2D,eACJ9sD,EACAkC,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KACnB,OACA,kBAAoBjB,EAAiB,eACrCkC,GACA,GACA,GAEF,OAAO,IAAI6xC,GAAmBx5C,EAChC,G,CAEMwyD,cACJ/sD,EACAtF,EACAwH,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KACnB,MACA,kBAAoBjB,EAAiB,gBAAkBtF,EACvDwH,GACA,GACA,GAEF,OAAO,IAAI6xC,GAAmBx5C,EAChC,G,CAEMyyD,mBACJhtD,EACAtF,EACAwH,G,gDAEM1M,KAAKyL,KACT,MACA,kBAAoBjB,EAAiB,gBAAkBtF,EAAK,SAC5DwH,GACA,GACA,EAEJ,G,CAEA+qD,iBAAiBjtD,EAAwBtF,GACvC,OAAOlF,KAAKyL,KACV,SACA,kBAAoBjB,EAAiB,gBAAkBtF,EACvD,MACA,GACA,EAEJ,CAEAwyD,sBAAsBhrD,GACpB,OAAO1M,KAAKyL,KACV,SACA,kBAAoBiB,EAAQlC,eAAiB,eAC7CkC,GACA,GACA,EAEJ,CAEAirD,qBACEntD,EACAtF,EACA4G,GAEA,OAAO9L,KAAKyL,KACV,SACA,kBAAoBjB,EAAiB,gBAAkBtF,EAAK,SAAW4G,EACvE,MACA,GACA,EAEJ,CAIM8rD,cAAcptD,EAAwBtF,G,0CAQ1C,aAPgBlF,KAAKyL,KACnB,MACA,kBAAoBjB,EAAiB,WAAatF,EAAK,SACvD,MACA,GACA,EAGJ,G,CAEM2yD,cAAcrtD,EAAwBtF,EAAYwH,G,gDAChD1M,KAAKyL,KACT,MACA,kBAAoBjB,EAAiB,WAAatF,EAAK,SACvDwH,GACA,GACA,EAEJ,G,CAEAorD,gBAAgBttD,EAAwBtF,EAAY4G,GAClD,OAAO9L,KAAKyL,KACV,SACA,kBAAoBjB,EAAiB,WAAatF,EAAK,SAAW4G,EAClE,MACA,GACA,EAEJ,CAIMisD,W,0CACJ,MAAMhzD,QAAU/E,KAAKyL,KAAK,MAAO,aAAc,MAAM,GAAO,GAC5D,OAAO,IAAI7K,EAAamE,EAAGmkD,GAC7B,G,CAEM8O,0BAA0BtrD,G,0CAC9B,OAAO1M,KAAKyL,KAAK,OAAQ,8BAA+BiB,GAAS,GAAM,EACzE,G,CAEMurD,c,0CACJ,MAAMlzD,QAAU/E,KAAKyL,KAAK,MAAO,0BAA2B,MAAM,GAAM,GACxE,OAAO,IAAI7K,EAAamE,EAAGwoD,GAC7B,G,CAIM2K,qB,0CACJ,MAAMnzD,QAAU/E,KAAKyL,KAAK,MAAO,oBAAqB,MAAM,GAAM,GAClE,OAAO,IAAI4iD,GAAgBtpD,EAC7B,G,CAEMozD,mBAAmBzrD,G,0CACvB,MAAM3H,QAAU/E,KAAKyL,KAAK,MAAO,oBAAqBiB,GAAS,GAAM,GACrE,OAAO,IAAI2hD,GAAgBtpD,EAC7B,G,CAIMqzD,U,0CACJ,MAAMhG,EAAOpyD,KAAK4wD,iBAAmB5wD,KAAK2wD,YAAc,4BAA8B,QAChF5rD,QAAU/E,KAAKyL,KAAK,MAAO2mD,EAAM,MAAM,GAAM,GACnD,OAAO,IAAI5B,GAAazrD,EAC1B,G,CAIMszD,wB,0CACJ,MAAMtzD,QAAU/E,KAAKyL,KAAK,MAAO,cAAe,MAAM,GAAM,GAC5D,OAAO,IAAI7K,EAAamE,EAAG0+C,GAC7B,G,CAEM6U,kCACJ9tD,G,0CAEA,MAAMzF,QAAU/E,KAAKyL,KACnB,MACA,kBAAoBjB,EAAiB,cACrC,MACA,GACA,GAEF,OAAO,IAAI5J,EAAamE,EAAG0+C,GAC7B,G,CAEM8U,0BACJ7rD,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,gCAAiCiB,GAAS,GAAM,GAClF,OAAO,IAAI02C,GAA+Br+C,EAC5C,G,CAEMyzD,kBAAkB9rD,G,0CACtB,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,wBAAyBiB,GAAS,GAAM,GAC1E,OAAO,IAAI82C,GAAuBz+C,EACpC,G,CAEM0zD,gBAAgB/rD,G,0CACpB,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,sBAAuBiB,GAAS,GAAM,GACxE,OAAO,IAAI22C,GAAqBt+C,EAClC,G,CAEM2zD,4BACJluD,EACAkC,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KACnB,OACA,kBAAoBjB,EAAiB,sBACrCkC,GACA,GACA,GAEF,OAAO,IAAI22C,GAAqBt+C,EAClC,G,CAEM4zD,oBAAoBjsD,G,0CACxB,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,0BAA2BiB,GAAS,GAAM,GAC5E,OAAO,IAAI83C,GAAyBz/C,EACtC,G,CAEM6zD,qBACJlsD,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,2BAA4BiB,GAAS,GAAM,GAC7E,OAAO,IAAIi3C,GAA0B5+C,EACvC,G,CAEM8zD,8BACJnsD,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,qCAAsCiB,GAAS,GAAM,GACvF,OAAO,IAAIo3C,GAAkB/+C,EAC/B,G,CAEM+zD,oBAAoBpsD,G,0CACxB,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,0BAA2BiB,GAAS,GAAM,GAC5E,OAAO,IAAIg3C,GAAyB3+C,EACtC,G,CAEMg0D,0BACJrsD,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KAAK,MAAO,4BAA6BiB,GAAS,GAAM,GAC7E,OAAO,IAAI02C,GAA+Br+C,EAC5C,G,CAEMi0D,kBAAkBtsD,G,0CACtB,MAAM3H,QAAU/E,KAAKyL,KAAK,MAAO,oBAAqBiB,GAAS,GAAM,GACrE,OAAO,IAAI82C,GAAuBz+C,EACpC,G,CAEMk0D,gBAAgBvsD,G,0CACpB,MAAM3H,QAAU/E,KAAKyL,KAAK,MAAO,kBAAmBiB,GAAS,GAAM,GACnE,OAAO,IAAI22C,GAAqBt+C,EAClC,G,CAEMm0D,4BACJ1uD,EACAkC,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KACnB,MACA,kBAAoBjB,EAAiB,kBACrCkC,GACA,GACA,GAEF,OAAO,IAAI22C,GAAqBt+C,EAClC,G,CAEMo0D,oBACJzsD,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KAAK,MAAO,sBAAuBiB,GAAS,GAAM,GACvE,OAAO,IAAI83C,GAAyBz/C,EACtC,G,CAEMq0D,qBACJ1sD,G,0CAEA,MAAM3M,EAAW2M,EAAQ4f,eAAevsB,SAClCgB,EAAYoG,OAAOC,OAAO,CAAC,EAAGsF,GAEpC3L,EAAKurB,eAAiB,CACpBpnB,GAAIwH,EAAQ4f,eAAepnB,GAC3Bm0D,MAAO31D,KAAKgJ,EAAQ4f,eAAepnB,IACnCuF,KAAMiC,EAAQ4f,eAAe7hB,KAC7B25C,WAAY13C,EAAQ4f,eAAegtC,4BACnCv5D,SAAU,CACRw5D,kBAAmB,EAAM31D,gBAAgB7D,EAASy5D,mBAClDC,eAAgB,EAAM71D,gBAAgB7D,EAAS25D,kBAInD,MAAM30D,QAAU/E,KAAKyL,KAAK,MAAO,uBAAwB1K,GAAM,GAAM,GACrE,OAAO,IAAI4iD,GAA0B5+C,EACvC,G,CAEM40D,wBACJjtD,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KAAK,SAAU,uBAAwBiB,GAAS,GAAM,GAC3E,OAAO,IAAIi3C,GAA0B5+C,EACvC,G,CAEM60D,oBAAoBltD,G,0CACxB,MAAM3H,QAAU/E,KAAKyL,KAAK,MAAO,sBAAuBiB,GAAS,GAAM,GACvE,OAAO,IAAI+2C,GAA0B1+C,EACvC,G,CAEM80D,gCACJrvD,EACAkC,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KACnB,MACA,kBAAoBjB,EAAiB,sBACrCkC,GACA,GACA,GAEF,OAAO,IAAI+2C,GAA0B1+C,EACvC,G,CAEA+0D,qBAAqBptD,GACnB,OAAO1M,KAAKyL,KAAK,OAAQ,sBAAuBiB,GAAS,GAAO,EAClE,CAEAqtD,wBAAwBrtD,GACtB,OAAO1M,KAAKyL,KAAK,OAAQ,yBAA0BiB,GAAS,GAAM,EACpE,CAEAstD,mBAAmBttD,GACjB,OAAO1M,KAAKyL,KAAK,OAAQ,+BAAgCiB,GAAS,GAAO,EAC3E,CAEMutD,gC,0CACJ,MAAMl1D,QAAU/E,KAAKyL,KACnB,MACA,+CACA,MACA,GACA,GAEF,OAAO,IAAI42C,GAA2Bt9C,EACxC,G,CAEMm1D,8BACJxtD,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KACnB,MACA,2CACAiB,GACA,GACA,GAEF,OAAO,IAAI21C,GAA2Bt9C,EACxC,G,CAIMo1D,4B,0CACJ,MAAMp1D,QAAU/E,KAAKyL,KAAK,MAAO,4BAA6B,MAAM,GAAM,GAC1E,OAAO,IAAI7K,EAAamE,EAAGy9C,GAC7B,G,CAEM4X,4B,0CACJ,MAAMr1D,QAAU/E,KAAKyL,KAAK,MAAO,4BAA6B,MAAM,GAAM,GAC1E,OAAO,IAAI7K,EAAamE,EAAG49C,GAC7B,G,CAEM0X,mBAAmBn1D,G,0CACvB,MAAMH,QAAU/E,KAAKyL,KAAK,MAAO,qBAAuBvG,EAAI,MAAM,GAAM,GACxE,OAAO,IAAIs9C,GAAsCz9C,EACnD,G,CAEMu1D,4BAA4Bp1D,G,0CAChC,MAAMH,QAAU/E,KAAKyL,KAAK,MAAO,qBAAuBvG,EAAK,YAAa,MAAM,GAAM,GACtF,OAAO,IAAItE,EAAamE,EAAG4F,EAC7B,G,CAEA4vD,mBAAmBr1D,EAAYwH,GAC7B,OAAO1M,KAAKyL,KAAK,MAAO,qBAAuBvG,EAAIwH,GAAS,GAAM,EACpE,CAEA8tD,sBAAsBt1D,GACpB,OAAOlF,KAAKyL,KAAK,SAAU,qBAAuBvG,EAAI,MAAM,GAAM,EACpE,CAEAu1D,0BAA0B/tD,GACxB,OAAO1M,KAAKyL,KAAK,OAAQ,2BAA4BiB,GAAS,GAAM,EACtE,CAEAguD,4BAA4Bx1D,GAC1B,OAAOlF,KAAKyL,KAAK,OAAQ,qBAAuBvG,EAAK,YAAa,MAAM,GAAM,EAChF,CAEAy1D,0BAA0Bz1D,EAAYwH,GACpC,OAAO1M,KAAKyL,KAAK,OAAQ,qBAAuBvG,EAAK,UAAWwH,GAAS,GAAM,EACjF,CAEAkuD,2BAA2B11D,EAAYwH,GACrC,OAAO1M,KAAKyL,KAAK,OAAQ,qBAAuBvG,EAAK,WAAYwH,GAAS,GAAM,EAClF,CAEAmuD,4BAA4B31D,GAC1B,OAAOlF,KAAKyL,KAAK,OAAQ,qBAAuBvG,EAAK,YAAa,MAAM,GAAM,EAChF,CAEA41D,2BAA2B51D,GACzB,OAAOlF,KAAKyL,KAAK,OAAQ,qBAAuBvG,EAAK,WAAY,MAAM,GAAM,EAC/E,CAEA61D,0BAA0B71D,GACxB,OAAOlF,KAAKyL,KAAK,OAAQ,qBAAuBvG,EAAK,UAAW,MAAM,GAAM,EAC9E,CAEM81D,4BAA4B91D,G,0CAChC,MAAMH,QAAU/E,KAAKyL,KAAK,OAAQ,qBAAuBvG,EAAK,YAAa,MAAM,GAAM,GACvF,OAAO,IAAI29C,GAAgC99C,EAC7C,G,CAEMk2D,4BACJ/1D,EACAwH,G,gDAEM1M,KAAKyL,KAAK,OAAQ,qBAAuBvG,EAAK,YAAawH,GAAS,GAAM,EAClF,G,CAEMwuD,wBAAwBh2D,G,0CAC5B,MAAMH,QAAU/E,KAAKyL,KAAK,OAAQ,qBAAuBvG,EAAK,QAAS,MAAM,GAAM,GACnF,OAAO,IAAI69C,GAA4Bh+C,EACzC,G,CAIMo2D,gC,0CAEJ,aADgBn7D,KAAKyL,KAAK,MAAO,qCAAsC,MAAM,GAAM,EAErF,G,CAEM2vD,0BACJl2D,EACAuF,EACA8yC,G,0CAEA,MAAMx4C,QAAU/E,KAAKyL,KAAK,MAAO,8BAA8BvG,KAAMuF,IAAQ,MAAM,GAAM,GACzF,OAAO,IAAI6yC,GAA+Bv4C,EAAGw4C,EAC/C,G,CAEM8d,6BACJ3uD,EACA6wC,G,0CAEA,MAAMx4C,QAAU/E,KAAKyL,KAAK,OAAQ,8BAA+BiB,GAAS,GAAM,GAChF,OAAO,IAAI4wC,GAA+Bv4C,EAAGw4C,EAC/C,G,CAEM+d,6BACJ5uD,EACA6wC,EACAge,G,0CAEA,MAAMx2D,QAAU/E,KAAKyL,KACnB,MACA,8BAAgC8vD,EAChC7uD,GACA,GACA,GAEF,OAAO,IAAI4wC,GAA+Bv4C,EAAGw4C,EAC/C,G,CAEMie,6BAA6Bt2D,G,0CACjC,OAAOlF,KAAKyL,KAAK,SAAU,8BAAgCvG,EAAI,MAAM,GAAM,EAC7E,G,CAIMu2D,kBAAkBv2D,EAAYwH,G,0CAClC,MAAM3H,QAAU/E,KAAKyL,KAAK,OAAQ,cAAgBvG,EAAK,SAAUwH,GAAS,GAAM,GAChF,OAAO,IAAIo0C,GAAiB/7C,EAC9B,G,CAEM22D,YAAYx2D,G,0CAChB,MAAMH,QAAU/E,KAAKyL,KAAK,MAAO,cAAgBvG,EAAI,MAAM,GAAM,GACjE,OAAO,IAAI47C,GAAiB/7C,EAC9B,G,CAEM42D,YAAYz2D,EAAYwH,G,0CAC5B,MAAM3H,QAAU/E,KAAKyL,KAAK,MAAO,cAAgBvG,EAAIwH,GAAS,GAAM,GACpE,OAAO,IAAIo0C,GAAiB/7C,EAC9B,G,CAIM62D,iBACJ1c,G,0CAEA,MAAMn6C,QAAU/E,KAAKyL,KAAK,MAAO,cAAgByzC,EAAa,SAAU,MAAM,GAAM,GACpF,OAAO,IAAIt+C,EAAamE,EAAG87C,GAC7B,G,CAEMgb,gBAAgB3c,EAAoBh6C,G,0CACxC,MAAMH,QAAU/E,KAAKyL,KAAK,MAAO,cAAgByzC,EAAa,UAAYh6C,EAAI,MAAM,GAAM,GAC1F,OAAO,IAAIy7C,GAAqB57C,EAClC,G,CAEA+2D,uBAAuB5c,EAAoBxyC,GACzC,OAAO1M,KAAKyL,KAAK,OAAQ,cAAgByzC,EAAa,gBAAiBxyC,GAAS,GAAM,EACxF,CAEAqvD,yBAAyB7c,EAAoBh6C,GAC3C,OAAOlF,KAAKyL,KACV,OACA,cAAgByzC,EAAa,UAAYh6C,EAAK,YAC9C,MACA,GACA,EAEJ,CAEM82D,6BACJ9c,EACAxyC,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KACnB,OACA,cAAgByzC,EAAa,kBAC7BxyC,GACA,GACA,GAEF,OAAO,IAAI9L,EAAamE,EAAG26C,GAC7B,G,CAEMuc,4BACJ/c,EACAxyC,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KACnB,OACA,cAAgByzC,EAAa,iBAC7BxyC,GACA,GACA,GAEF,OAAO,IAAI9L,EAAamE,EAAG26C,GAC7B,G,CAEMwc,wBACJhd,EACAxyC,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KAAK,SAAU,cAAgByzC,EAAa,SAAUxyC,GAAS,GAAM,GAC1F,OAAO,IAAI9L,EAAamE,EAAG26C,GAC7B,G,CAEAyc,uBACEjd,EACAh6C,EACAwH,GAEA,OAAO1M,KAAKyL,KACV,OACA,cAAgByzC,EAAa,UAAYh6C,EAAK,UAC9CwH,GACA,GACA,EAEJ,CAEA0vD,wBACEld,EACAh6C,EACAwH,GAEA,OAAO1M,KAAKyL,KACV,OACA,cAAgByzC,EAAa,UAAYh6C,EAAK,WAC9CwH,GACA,GACA,EAEJ,CAEM2vD,2BACJnd,EACAxyC,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KACnB,OACA,cAAgByzC,EAAa,qBAC7BxyC,GACA,GACA,GAEF,OAAO,IAAI9L,EAAamE,EAAG06C,GAC7B,G,CAEA6c,gBACEpd,EACAh6C,EACAwH,GAEA,OAAO1M,KAAKyL,KAAK,MAAO,cAAgByzC,EAAa,UAAYh6C,EAAIwH,GAAS,GAAM,EACtF,CAEA6vD,mBAAmBrd,EAAoBh6C,GACrC,OAAOlF,KAAKyL,KAAK,SAAU,cAAgByzC,EAAa,UAAYh6C,EAAI,MAAM,GAAM,EACtF,CAIMs3D,mBACJtd,G,0CAEA,MAAMn6C,QAAU/E,KAAKyL,KACnB,MACA,cAAgByzC,EAAa,iBAC7B,MACA,GACA,GAEF,OAAO,IAAIt+C,EAAamE,EAAGu6C,GAC7B,G,CAEAmd,4BACEvd,EACAxyC,GAEA,OAAO1M,KAAKyL,KACV,OACA,cAAgByzC,EAAa,qBAC7BxyC,GACA,GACA,EAEJ,CAEMgwD,+BACJxd,EACAxyC,G,0CAEA,MAAM3H,QAAU/E,KAAKyL,KACnB,OACA,cAAgByzC,EAAa,iBAC7BxyC,GACA,GACA,GAEF,OAAO,IAAIuyC,GAA6Bl6C,EAC1C,G,CAEA43D,2BAA2Bzd,EAAoBh6C,GAC7C,OAAOlF,KAAKyL,KACV,SACA,cAAgByzC,EAAa,kBAAoBh6C,EACjD,MACA,GACA,EAEJ,CAIM03D,UAAUhxB,EAAeixB,EAAajxD,G,0CAC1C,MAAM7G,QAAU/E,KAAKyL,KACnB,MACAzL,KAAK88D,mBAAmB,UAAWlxB,EAAOixB,EAAKjxD,GAC/C,MACA,GACA,GAEF,OAAO,IAAIhL,EAAamE,EAAGwpD,GAC7B,G,CAEMwO,gBACJ73D,EACA0mC,EACAixB,EACAjxD,G,0CAEA,MAAM7G,QAAU/E,KAAKyL,KACnB,MACAzL,KAAK88D,mBAAmB,YAAc53D,EAAK,UAAW0mC,EAAOixB,EAAKjxD,GAClE,MACA,GACA,GAEF,OAAO,IAAIhL,EAAamE,EAAGwpD,GAC7B,G,CAEMyO,sBACJ93D,EACA0mC,EACAixB,EACAjxD,G,0CAEA,MAAM7G,QAAU/E,KAAKyL,KACnB,MACAzL,KAAK88D,mBAAmB,kBAAoB53D,EAAK,UAAW0mC,EAAOixB,EAAKjxD,GACxE,MACA,GACA,GAEF,OAAO,IAAIhL,EAAamE,EAAGwpD,GAC7B,G,CAEM0O,0BACJzyD,EACAtF,EACA0mC,EACAixB,EACAjxD,G,0CAEA,MAAM7G,QAAU/E,KAAKyL,KACnB,MACAzL,KAAK88D,mBACH,kBAAoBtyD,EAAiB,UAAYtF,EAAK,UACtD0mC,EACAixB,EACAjxD,GAEF,MACA,GACA,GAEF,OAAO,IAAIhL,EAAamE,EAAGwpD,GAC7B,G,CAEM2O,kBACJh4D,EACA0mC,EACAixB,EACAjxD,G,0CAEA,MAAM7G,QAAU/E,KAAKyL,KACnB,MACAzL,KAAK88D,mBAAmB,cAAgB53D,EAAK,UAAW0mC,EAAOixB,EAAKjxD,GACpE,MACA,GACA,GAEF,OAAO,IAAIhL,EAAamE,EAAGwpD,GAC7B,G,CAEM4O,sBACJje,EACAh6C,EACA0mC,EACAixB,EACAjxD,G,0CAEA,MAAM7G,QAAU/E,KAAKyL,KACnB,MACAzL,KAAK88D,mBACH,cAAgB5d,EAAa,UAAYh6C,EAAK,UAC9C0mC,EACAixB,EACAjxD,GAEF,MACA,GACA,GAEF,OAAO,IAAIhL,EAAamE,EAAGwpD,GAC7B,G,CAEM6O,kBAAkB1wD,G,0CACtB,MAAM2wD,QAAmBr9D,KAAKs9D,uBACxBzlD,EAAU,IAAI0yB,QAAQ,CAC1B,cAAevqC,KAAKsY,WACpBilD,cAAe,UAAYF,EAC3B,eAAgB,oCAEU,MAAxBr9D,KAAK0wD,iBACP74C,EAAQrR,IAAI,aAAcxG,KAAK0wD,iBAWjC,GAAwB,aATD1wD,KAAK+qC,MAC1B,IAAIL,QAAQ1qC,KAAK8nB,mBAAmB01C,eAAiB,WAAY,CAC/D5yB,MAAO,WACPtmB,YAAatkB,KAAK0xD,iBAClB7mB,OAAQ,OACRF,KAAMxZ,KAAKsY,UAAU/8B,GACrBmL,QAASA,MAGAhL,OACX,OAAO3D,QAAQ4oD,OAAO,qBAE1B,G,CAIM2L,iBAAiBv4D,G,0CACrB,MAAMH,QAAU/E,KAAKyL,KAAK,MAAO,UAAYvG,EAAK,cAAe,MAAM,GAAM,GAC7E,OAAO,IAAImqD,GAAgBtqD,EAC7B,G,CAIM24D,cAAcvkD,G,0CAElB,aADgBnZ,KAAKyL,KAAK,MAAO,yBAA2B0N,EAAU,MAAM,GAAM,IACzEnY,KAAK2F,GAAW,IAAI8mD,GAAsB9mD,IACrD,G,CAIMg3D,kBAAkBjxD,G,0CAEtB,aADgB1M,KAAKyL,KAAK,OAAQ,kBAAmBiB,GAAS,GAAM,EAEtE,G,CAEMkxD,mB,0CAEJ,aADgB59D,KAAKyL,KAAK,OAAQ,iBAAkB,MAAM,GAAM,EAElE,G,CAIMokB,6BACJpV,G,0CAEA,MAAM4iD,QAAmBr9D,KAAKs9D,uBAExBv9D,QAAiBC,KAAK+qC,MAC1B,IAAIL,QAAQjwB,EAAkB,aAAc,CAC1CmwB,MAAO,WACPC,OAAQ,MACRhzB,QAAS,IAAI0yB,QAAQ,CACnB8mB,OAAQ,mBACRkM,cAAe,UAAYF,OAKjC,GAAwB,MAApBt9D,EAAS8M,OAAgB,CAC3B,MAAMiX,QAAc9jB,KAAK69D,YAAY99D,GAAU,GAAO,GACtD,OAAOmJ,QAAQ4oD,OAAOhuC,E,CAGxB,OAAO,IAAIk/B,SAAkCjjD,EAASue,OACxD,G,CAEMmR,0BACJhV,EACA/N,G,0CAEA,MAAM2wD,QAAmBr9D,KAAKs9D,uBAExBv9D,QAAiBC,KAAK+qC,MAC1B,IAAIL,QAAQjwB,EAAkB,aAAc,CAC1CmwB,MAAO,WACPC,OAAQ,OACRhzB,QAAS,IAAI0yB,QAAQ,CACnB8mB,OAAQ,mBACRkM,cAAe,UAAYF,EAC3B,eAAgB,oCAElB1yB,KAAMxZ,KAAKsY,UAAU/8B,MAIzB,GAAwB,MAApB3M,EAAS8M,OAAgB,CAC3B,MAAMiX,QAAc9jB,KAAK69D,YAAY99D,GAAU,GAAO,GACtD,OAAOmJ,QAAQ4oD,OAAOhuC,E,CAE1B,G,CAEMg6C,qBAAqBrjD,G,0CACzB,MAAM1a,QAAiBC,KAAK+qC,MAC1B,IAAIL,QAAQjwB,EAAkB,SAAU,CACtCmwB,MAAO,WACPC,OAAQ,MACRhzB,QAAS,IAAI0yB,QAAQ,CACnB8mB,OAAQ,mBACR,eAAgB,uCAKtB,GAAwB,MAApBtxD,EAAS8M,OAAgB,CAC3B,MAAMiX,QAAc9jB,KAAK69D,YAAY99D,GAAU,GAAO,GACtD,OAAOmJ,QAAQ4oD,OAAOhuC,E,CAE1B,G,CAEMi6C,sBAAsBvzD,G,0CAC1B,MAAMzF,QAAU/E,KAAKyL,KACnB,MACA,kBAAoBjB,EAAiB,UACrC,MACA,GACA,GAEF,OAAO,IAAIs0C,GAA2B/5C,EACxC,G,CAIMu4D,uB,0CACJ,IAAIv9C,QAAoB/f,KAAKohB,aAAa4Q,WAK1C,aAJUhyB,KAAKohB,aAAa0R,6BACpB9yB,KAAKgyD,gBACXjyC,QAAoB/f,KAAKohB,aAAa4Q,YAEjCjS,CACT,G,CAEMgrB,MAAMr+B,G,0CAUV,MATuB,QAAnBA,EAAQm+B,SACVn+B,EAAQmL,QAAQrR,IAAI,gBAAiB,YACrCkG,EAAQmL,QAAQrR,IAAI,SAAU,aAEhCkG,EAAQmL,QAAQrR,IAAI,wBAAyBxG,KAAKgf,qBAAqBuyC,iBACvE7kD,EAAQmL,QAAQrR,IACd,iCACMxG,KAAKgf,qBAAqBg/C,+BAE3Bh+D,KAAKi+D,YAAYvxD,EAC1B,G,CAEAuxD,YAAYvxD,GACV,OAAOq+B,MAAMr+B,EACf,CAEMwxD,eAAe1lD,G,0CACnB,GAAkB,MAAdA,GAAqC,KAAfA,EACxB,MAAM,IAAIpY,MAAM,6CAElB,MAAMyX,EAAU,IAAI0yB,QAAQ,CAC1B8mB,OAAQ,mBACR,cAAerxD,KAAKsY,aAEM,MAAxBtY,KAAK0wD,iBACP74C,EAAQrR,IAAI,aAAcxG,KAAK0wD,iBAGjC,MAAM0B,EAAO,mCAAmClvD,mBAAmBsV,KAC7DzY,QAAiBC,KAAK+qC,MAC1B,IAAIL,QAAQ1qC,KAAK8nB,mBAAmB0pC,iBAAmBY,EAAM,CAC3DxnB,MAAO,WACPtmB,YAAatkB,KAAK0xD,iBAClB75C,QAASA,EACTgzB,OAAQ,SAIZ,GAAwB,MAApB9qC,EAAS8M,OAAgB,CAC3B,MAAM89B,QAAa5qC,EAASue,OAC5B,OAAO,IAAI6kC,GAAuBxY,E,CAC7B,CACL,MAAM7mB,QAAc9jB,KAAK69D,YAAY99D,GAAU,GAAO,GACtD,OAAOmJ,QAAQ4oD,OAAOhuC,E,CAE1B,G,CAEMq6C,sBACJC,EACA1xD,G,0CAEA,aAAa1M,KAAKyL,KAChB,OACA,8BACGzL,KAAKgf,qBAAqBq/C,aAAe,eAAiB,IAC3DD,EACA,2BACF1xD,GACA,GACA,EAEJ,G,CAEM4xD,yBACJF,G,0CAEA,MAAMr+D,QAAiBC,KAAKyL,KAC1B,MACA,6BAA+B2yD,EAAiB,eAChD,MACA,GACA,GAEF,OAAO,IAAIrf,GAA0Ch/C,EACvD,G,CAEMw+D,wBAAwBC,G,0CAC5B,aAAax+D,KAAKyL,KAChB,SACA,8BACGzL,KAAKgf,qBAAqBq/C,aAAe,eAAiB,IAC3DG,EACF,MACA,GACA,EAEJ,G,CAEMC,wBAAwBC,G,0CAC5B,aAAa1+D,KAAKyL,KAChB,SACA,uCAAyCizD,EACzC,MACA,GACA,EAEJ,G,CAEMC,gCAAgCC,G,0CASpC,aARgB5+D,KAAKyL,KACnB,OACA,6DACEvI,mBAAmB07D,GACrB,MACA,GACA,EAGJ,G,CAEMC,sBACJD,EACAlyD,G,0CAEA,aAAa1M,KAAKyL,KAChB,OACA,qDAAuDvI,mBAAmB07D,GAC1ElyD,GACA,GACA,EAEJ,G,CAEMoyD,2BAA2BJ,G,0CAC/B,aAAa1+D,KAAKyL,KAChB,OACA,6BAA+BizD,EAAkB,kCACjD,MACA,GACA,EAEJ,G,CAEgB1M,gB,0CACd,MAAM7xC,QAAqBngB,KAAKohB,aAAa8Q,kBAC7C,GAAoB,MAAhB/R,GAAyC,KAAjBA,EAC1B,OAAOngB,KAAK++D,iBAGd,MAAM5mD,QAAiBnY,KAAKohB,aAAauQ,cACnChK,QAAqB3nB,KAAKohB,aAAayQ,kBAC7C,IAAK,EAAMvsB,mBAAmB6S,KAAc,EAAM7S,mBAAmBqiB,GACnE,OAAO3nB,KAAKg/D,oBAGd,MAAM,IAAI5+D,MAAM,gEAClB,G,CAEgB2+D,iB,0CACd,MAAM5+C,QAAqBngB,KAAKohB,aAAa8Q,kBAC7C,GAAoB,MAAhB/R,GAAyC,KAAjBA,EAC1B,MAAM,IAAI/f,MAEZ,MAAMyX,EAAU,IAAI0yB,QAAQ,CAC1B,eAAgB,mDAChB8mB,OAAQ,mBACR,cAAerxD,KAAKsY,aAEM,MAAxBtY,KAAK0wD,iBACP74C,EAAQrR,IAAI,aAAcxG,KAAK0wD,iBAGjC,MAAMrb,QAAqBr1C,KAAKohB,aAAayB,cACvC9iB,QAAiBC,KAAK+qC,MAC1B,IAAIL,QAAQ1qC,KAAK8nB,mBAAmB0pC,iBAAmB,iBAAkB,CACvE7mB,KAAM3qC,KAAKyxD,YAAY,CACrBv4C,WAAY,gBACZb,UAAWg9B,EAAah9B,UACxB+H,cAAeD,IAEjByqB,MAAO,WACPtmB,YAAatkB,KAAK0xD,iBAClB75C,QAASA,EACTgzB,OAAQ,UAIZ,GAAwB,MAApB9qC,EAAS8M,OAQN,CACL,MAAMiX,QAAc9jB,KAAK69D,YAAY99D,GAAU,GAAM,GACrD,OAAOmJ,QAAQ4oD,OAAOhuC,E,CAVK,CAC3B,MAAM6tC,QAAqB5xD,EAASue,OAC9BqE,EAAgB,IAAI7C,GAAsB6xC,SAC1C3xD,KAAKohB,aAAaiQ,UACtB1O,EAAc5C,YACd4C,EAAcxC,aACd,K,CAMN,G,CAEgB6+C,oB,0CACd,MAAM7mD,QAAiBnY,KAAKohB,aAAauQ,cACnChK,QAAqB3nB,KAAKohB,aAAayQ,kBAEvC9S,QAAc/e,KAAKqhB,aAAae,WAChC68C,EAAgB,IAAIngD,GAAcC,EAAO/e,KAAKgf,sBAC9C2C,EAAe,IAAI+F,GACvBvP,EACAwP,EACA,IAAIvI,GACJ6/C,GAGIl/D,QAAiBC,KAAK+hB,kBAAkBJ,GAC9C,KAAM5hB,aAAoB+f,IACxB,MAAM,IAAI1f,MAAM,6DAGZJ,KAAKohB,aAAamQ,SAASxxB,EAASggB,YAC5C,G,CAEMtU,KACJo/B,EACAunB,EACAznB,EACAu0B,EACAC,EACAC,EACAC,G,0CAEAD,EAAS,EAAM95D,mBAAmB85D,GAAUp/D,KAAK8nB,mBAAmBw3C,YAAcF,EAGlF,MAAMG,EAAYnN,EAAKhsD,MAAM,KACvBo5D,EACJJ,EAAS,EAAMK,cAAcF,EAAU,KAAOA,EAAU7+D,OAAS,EAAI,IAAI6+D,EAAU,KAAO,IAEtF1nD,EAAU,IAAI0yB,QAAQ,CAC1B,cAAevqC,KAAKsY,aAEM,MAAxBtY,KAAK0wD,iBACP74C,EAAQrR,IAAI,aAAcxG,KAAK0wD,iBAGjC,MAAMgP,EAA2B,CAC/B90B,MAAO,WACPtmB,YAAatkB,KAAK0xD,iBAClB7mB,OAAQA,GAGV,GAAIq0B,EAAQ,CACV,MAAM7B,QAAmBr9D,KAAKs9D,uBAC9BzlD,EAAQrR,IAAI,gBAAiB,UAAY62D,E,CAE/B,MAAR1yB,IACkB,iBAATA,GACT+0B,EAAY/0B,KAAOA,EACnB9yB,EAAQrR,IAAI,eAAgB,qDACH,iBAATmkC,IACZA,aAAgBwC,SAClBuyB,EAAY/0B,KAAOA,GAEnB9yB,EAAQrR,IAAI,eAAgB,mCAC5Bk5D,EAAY/0B,KAAOxZ,KAAKsY,UAAUkB,MAIpCw0B,GACFtnD,EAAQrR,IAAI,SAAU,oBAEJ,MAAhB64D,GACFA,EAAaxnD,GAGf6nD,EAAY7nD,QAAUA,EACtB,MAAM9X,QAAiBC,KAAK+qC,MAAM,IAAIL,QAAQ80B,EAAYE,IAEpDC,EAAe5/D,EAAS8X,QAAQpK,IAAI,gBACpCmyD,EAAiC,MAAhBD,IAAsE,IAA9CA,EAAal6D,QAAQ,oBACpE,GAAI05D,GAAmC,MAApBp/D,EAAS8M,QAAkB+yD,EAAgB,CAE5D,aAD2B7/D,EAASue,M,CAE/B,GAAwB,MAApBve,EAAS8M,OAAgB,CAClC,MAAMiX,QAAc9jB,KAAK69D,YAAY99D,GAAU,EAAOm/D,GACtD,OAAOh2D,QAAQ4oD,OAAOhuC,E,CAE1B,G,CAEc+5C,YACZ99D,EACA8/D,EACAX,G,0CAEA,IAAIvN,EAAoB,KAOxB,OANI3xD,KAAK4xD,eAAe7xD,GACtB4xD,QAAqB5xD,EAASue,OACrBte,KAAK8/D,eAAe//D,KAC7B4xD,EAAe,CAAEoO,cAAehgE,EAAS6vD,SAGvCsP,IAEoB,MAApBn/D,EAAS8M,QACW,MAApB9M,EAAS8M,QACRgzD,GACqB,MAApB9/D,EAAS8M,QACO,MAAhB8kD,GACuB,kBAAvBA,EAAa7tC,cAET9jB,KAAK4uB,gBAAe,GACnB,MAIJ,IAAIxb,GAAcu+C,EAAc5xD,EAAS8M,OAAQgzD,EAC1D,G,CAEQpO,YAAYuO,GAClB,OAAO74D,OAAOE,KAAK24D,GAChBh/D,KAAK8P,GACG5N,mBAAmB4N,GAAO,IAAM5N,mBAAmB88D,EAAOlvD,MAElEvM,KAAK,IACV,CAEQmtD,iBACN,IAAK1xD,KAAK2wD,aAAe3wD,KAAK8nB,mBAAmBm4C,aAC/C,MAAO,SAGX,CAEQnD,mBAAmB9iD,EAAc4xB,EAAeixB,EAAajxD,GAYnE,OAXa,MAATggC,IACF5xB,GAAQ,UAAY4xB,GAEX,MAAPixB,IACF7iD,GAAQA,EAAKvU,QAAQ,MAAQ,EAAI,IAAM,IACvCuU,GAAQ,OAAS6iD,GAEN,MAATjxD,IACFoO,GAAQA,EAAKvU,QAAQ,MAAQ,EAAI,IAAM,IACvCuU,GAAQ,qBAAuBpO,GAE1BoO,CACT,CAEQ43C,eAAe7xD,GACrB,MAAMmgE,EAAangE,EAAS8X,QAAQpK,IAAI,gBACxC,OAAqB,MAAdyyD,GAAsBA,EAAWz6D,QAAQ,qBAAuB,CACzE,CAEQq6D,eAAe//D,GACrB,MAAMmgE,EAAangE,EAAS8X,QAAQpK,IAAI,gBACxC,OAAqB,MAAdyyD,GAAsBA,EAAWz6D,QAAQ,SAAW,CAC7D,E,kuBC79DK,MAAM06D,GACXrgE,YACU0rB,EACAlgB,GADA,KAAAkgB,sBAAAA,EACA,KAAAlgB,WAAAA,CACP,CAGG80D,eAAehnD,G,0CACnB,MAAMinD,QAAkBrgE,KAAKwrB,sBAAsBvjB,KAAKmR,EAAU,QAC5DnR,EAAO,EAAMq4D,gBAAgBD,GAAW7/D,cACxC+/D,EAAYt4D,EAAKlF,OAAO,EAAG,GAC3By9D,EAAav4D,EAAKlF,OAAO,GAEzBhD,QAAiBC,KAAKsL,WAAW2yD,YAAY,IAAIvzB,QAfjC,wCAe6D61B,IAE7Ev3D,SADqBjJ,EAAS6vD,QACTxpD,MAAM,SAAS2pB,MAAM6c,GACvCA,EAAExmC,MAAM,KAAK,KAAOo6D,IAG7B,OAAgB,MAATx3D,EAAgBlG,SAASkG,EAAM5C,MAAM,KAAK,GAAI,IAAM,CAC7D,G,CAEMq6D,iBAAiBtnD,G,0CACrB,IACE,aAAanZ,KAAKsL,WAAWoyD,cAAcvkD,E,CAC3C,MAAO5Q,GAEP,GAAyB,MADXA,EACJsL,WACR,MAAO,GAET,MAAM,IAAIzT,K,CAEd,G,ECpCK,IAAkBsgE,GAAeC,GDWhC,KCXiBD,GDUb,ICV4BC,GDUvB,IAAM,iBCTd,CACL15D,EACA85B,EACA6/B,KAEA,MAAMC,EAAmCD,EAAWh1C,MAC9Ck1C,EAAe,IAAI36D,IAYzB,MAAO,CACLylB,MAAO,YAAa8K,GAClB,MAAMqqC,EAZW,CAAC/5D,IACpB,IAAI+5D,EAAYD,EAAarzD,IAAIzG,GACjC,OAAiB,MAAb+5D,IAGJA,EAAY,IAAI56D,IAChB26D,EAAat6D,IAAIQ,EAAK+5D,IAHbA,CAIO,EAKIC,CAAahhE,MACzBihE,EAAkBN,GAAYjqC,GACpC,IAAIwqC,EAAQH,EAAUtzD,IAAIwzD,GAM1B,OALa,MAATC,IACFA,EAAQ,GACRH,EAAUv6D,IAAIy6D,EAAiBC,IAG1B,IAAIh4D,SAAW,CAACC,EAAS2oD,KAC9B,MAAMqP,EAAO,KACX,MAAMC,EAAY,KAChBF,EAAMG,OAAOH,EAAMz7D,QAAQ07D,GAAO,GAC9BD,EAAMxgE,QAAUggE,GAClBQ,EAAMR,GAAQ,KACY,IAAjBQ,EAAMxgE,SACfqgE,EAAUtyB,OAAOwyB,GACM,IAAnBF,EAAU/jC,MACZ8jC,EAAaryB,OAAOzuC,M,EAI1B6gE,EACG78D,MAAMhE,KAAM02B,GACZ/f,MAAME,IACLuqD,IACOvqD,KAERyqD,OAAOC,IAEN,MADAH,IACMG,CAAG,IAEV5qD,KAAKxN,EAAS2oD,EAAO,EAE1BoP,EAAMpzD,KAAKqzD,GACPD,EAAMxgE,QAAUggE,IAClBS,G,GAGN,EACD,G,gJC9DE,MAAMK,GASX1hE,YAAYwsB,GACVnlB,OAAOC,OAAOpH,KAAMssB,EACtB,ECCK,MAAMm1C,GACX3hE,YAAoB2rB,GAAA,KAAAA,kBAAAA,CAAkD,CAKtEi2C,cACE,OAAO,EAAAC,GAAA,IAAM,IAAM3hE,KAAKyrB,kBAAkB4C,eAAc9kB,MACtD,SAAKq4D,GACIA,EAAgB7gE,KAAKC,KAAKsrB,GACxB,IAAIk1C,GAAWl1C,OAI9B,CAKAu1C,uBAAuBtpD,GACrB,OAAO,EAAAopD,GAAA,IAAM,IAAM3hE,KAAKyrB,kBAAkB2C,sBAAsB7V,KAAmBhP,MACjF,SAAK+iB,GAAmC,IAAIk1C,GAAWl1C,KAE3D,CAKAw1C,sBAAsBj2D,EAAe0M,GACnC,OAAO,EAAAopD,GAAA,IAAM,IAAM3hE,KAAKyrB,kBAAkB0C,eAAetiB,EAAO0M,IAClE,CAMAwpD,yBACExpD,EACA2T,EACAC,EACAC,GAEA,OAAO,EAAAu1C,GAAA,IAAM,IACX3hE,KAAKyrB,kBAAkBc,wBACrBhU,EACA2T,EACAC,EACAC,KAEF7iB,MAAK,SAAK+iB,GAAmC,IAAIk1C,GAAWl1C,KAChE,EChEK,MAAM01C,I,2SCMN,MAAMC,GACXniE,YACUoiE,EACA32D,EACAojB,EACAwzC,GAHA,KAAAD,cAAAA,EACA,KAAA32D,aAAAA,EACA,KAAAojB,oBAAAA,EACA,KAAAwzC,mBAAAA,CACP,CAEGC,QACJC,EACA7T,EAAmB,KACnB8T,GAAoB,EACpB93D,EAAyB,M,0CAGzB,WADqBxK,KAAKuL,aAAa8d,sBAErC,OAEF,MAAMkpB,QAAsBvyC,KAAK2uB,oBAAoB9gB,SACrD,GAAqB,MAAjB0kC,EACF,OAEF,MAAMgwB,EAAS,IAAIl4D,IAAYkoC,EAAcjrC,QAAQ0oB,GAAMA,EAAEljB,YAAW9L,KAAKgvB,GAAMA,EAAE9qB,MACrF,GAAoB,IAAhBq9D,EAAOvlC,KACT,OAEF,GAAgB,MAAZwxB,EAAkB,CACpB,MAAMgU,QAAexiE,KAAKkiE,cAAcz0D,IAAI+gD,GAC5C,GAAc,MAAVgU,GAA2C,MAAzBA,EAAOh4D,iBAA2B+3D,EAAOjuC,IAAIkuC,EAAOh4D,gBACxE,M,CAGJ,GAAsB,MAAlBA,IACG+3D,EAAOjuC,IAAI9pB,GACd,OAGJ,IAAIwmC,QAAwBhxC,KAAKuL,aAAak3D,qBACvB,MAAnBzxB,IACFA,EAAkB,IAEpB,MAAM0xB,EAAQ,IAAIV,GAClBU,EAAMj4D,KAAO43D,EACbK,EAAMlU,SAAWA,EACjBkU,EAAMrd,MAAO,IAAIz7C,MAAO0R,cACxBonD,EAAMl4D,eAAiBA,EACvBwmC,EAAgBljC,KAAK40D,SACf1iE,KAAKuL,aAAao3D,mBAAmB3xB,GACvCsxB,UACItiE,KAAKmiE,mBAAmBS,eAElC,G,ECzDK,MAAMC,I,2SCIN,MAAMC,GAEXhjE,YACUwL,EACAC,EACAgW,GAFA,KAAAjW,WAAAA,EACA,KAAAC,aAAAA,EACA,KAAAgW,WAAAA,EAJF,KAAAjgB,QAAS,CAKd,CAEHgJ,KAAKy4D,GACC/iE,KAAKsB,SAITtB,KAAKsB,QAAS,EACVyhE,IACF/iE,KAAK4iE,eACLlsB,aAAY,IAAM12C,KAAK4iE,gBAAgB,MAE3C,CAEMA,aAAa32D,G,0CAEjB,WADqBjM,KAAKuL,aAAa8d,mBAAmB,CAAEpd,OAAQA,KAElE,OAEF,MAAM+kC,QAAwBhxC,KAAKuL,aAAak3D,mBAAmB,CAAEx2D,OAAQA,IAC7E,GAAuB,MAAnB+kC,GAAsD,IAA3BA,EAAgBtwC,OAC7C,OAEF,MAAMgM,EAAUskC,EAAgBhwC,KAAKuH,IACnC,MAAMy6D,EAAM,IAAIH,GAKhB,OAJAG,EAAIv4D,KAAOlC,EAAEkC,KACbu4D,EAAIxU,SAAWjmD,EAAEimD,SACjBwU,EAAI3d,KAAO98C,EAAE88C,KACb2d,EAAIx4D,eAAiBjC,EAAEiC,eAChBw4D,CAAG,IAEZ,UACQhjE,KAAKsL,WAAW8xD,kBAAkB1wD,GACxC1M,KAAKijE,YAAYh3D,E,CACjB,MAAO1D,GACPvI,KAAKuhB,WAAWuC,MAAMvb,E,CAE1B,G,CAEc06D,YAAYh3D,G,gDAClBjM,KAAKuL,aAAao3D,mBAAmB,KAAM,CAAE12D,OAAQA,GAC7D,G,0CCjDK,MAAMi3D,WAA6B,EAKxCpjE,YAAYC,GACVe,MAAMf,GACNC,KAAKmjE,UAAYnjE,KAAKC,oBAAoB,aAC1CD,KAAKyK,KAAOzK,KAAKC,oBAAoB,QAErC,MAAMmjE,EAAUpjE,KAAKC,oBAAoB,WACzC,OAAQD,KAAKyK,MACX,KAAK4F,EAAiBgzD,iBACtB,KAAKhzD,EAAiBizD,iBACtB,KAAKjzD,EAAiBkzD,iBACtB,KAAKlzD,EAAiBmzD,gBACpBxjE,KAAKojE,QAAU,IAAIK,GAAuBL,GAC1C,MACF,KAAK/yD,EAAiBqzD,iBACtB,KAAKrzD,EAAiBszD,iBACtB,KAAKtzD,EAAiBuzD,iBACpB5jE,KAAKojE,QAAU,IAAIS,GAAuBT,GAC1C,MACF,KAAK/yD,EAAiByzD,UACtB,KAAKzzD,EAAiB0zD,YACtB,KAAK1zD,EAAiB2zD,YACtB,KAAK3zD,EAAiB4zD,aACtB,KAAK5zD,EAAiB6zD,OACpBlkE,KAAKojE,QAAU,IAAIe,GAAiBf,GACpC,MACF,KAAK/yD,EAAiB+zD,eACtB,KAAK/zD,EAAiBg0D,eACtB,KAAKh0D,EAAiBi0D,eACpBtkE,KAAKojE,QAAU,IAAImB,GAAqBnB,GACxC,MACF,KAAK/yD,EAAiBm0D,YACtB,KAAKn0D,EAAiB8wC,oBACpBnhD,KAAKojE,QAAU,IAAIqB,GAA4BrB,GAKrD,EAGK,MAAMK,WAA+B,EAO1C3jE,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAKiM,OAASjM,KAAKC,oBAAoB,UACvCD,KAAKwK,eAAiBxK,KAAKC,oBAAoB,kBAC/CD,KAAKu/B,cAAgBv/B,KAAKC,oBAAoB,iBAC9CD,KAAK+tB,aAAe,IAAInkB,KAAK5J,KAAKC,oBAAoB,gBACxD,EAGK,MAAM4jE,WAA+B,EAK1C/jE,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAKiM,OAASjM,KAAKC,oBAAoB,UACvCD,KAAK+tB,aAAe,IAAInkB,KAAK5J,KAAKC,oBAAoB,gBACxD,EAGK,MAAMkkE,WAAyB,EAIpCrkE,YAAYC,GACVe,MAAMf,GACNC,KAAKiM,OAASjM,KAAKC,oBAAoB,UACvCD,KAAKqlD,KAAO,IAAIz7C,KAAK5J,KAAKC,oBAAoB,QAChD,EAGK,MAAMskE,WAA6B,EAKxCzkE,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAKiM,OAASjM,KAAKC,oBAAoB,UACvCD,KAAK+tB,aAAe,IAAInkB,KAAK5J,KAAKC,oBAAoB,gBACxD,EAGK,MAAMwkE,WAAoC,EAI/C3kE,YAAYC,GACVe,MAAMf,GACNC,KAAKkF,GAAKlF,KAAKC,oBAAoB,MACnCD,KAAKiM,OAASjM,KAAKC,oBAAoB,SACzC,E,2SC1FK,MAAMykE,GAQX5kE,YACU6kE,EACAtjD,EACA/V,EACAwc,EACA8G,EACArN,EACAhW,EACA2Y,EACA5C,GARA,KAAAqjD,YAAAA,EACA,KAAAtjD,aAAAA,EACA,KAAA/V,WAAAA,EACA,KAAAwc,mBAAAA,EACA,KAAA8G,eAAAA,EACA,KAAArN,WAAAA,EACA,KAAAhW,aAAAA,EACA,KAAA2Y,YAAAA,EACA,KAAA5C,iBAAAA,EAdF,KAAAsjD,WAAY,EACZ,KAAAtjE,QAAS,EACT,KAAAujE,UAAW,EACX,KAAAC,eAAsB,KAa5B9kE,KAAK8nB,mBAAmBiR,KAAKD,WAAU,KAChC94B,KAAKsB,QAIVtB,KAAKsK,MAAM,GAEf,CAEMA,O,0CACJtK,KAAKsB,QAAS,EACdtB,KAAK4F,IAAM5F,KAAK8nB,mBAAmBi9C,sBAIlB,cAAb/kE,KAAK4F,MAIqB,MAA1B5F,KAAKglE,oBACPhlE,KAAKglE,kBAAkBC,IAAI,kBAC3BjlE,KAAKglE,kBAAkBC,IAAI,mBACrBjlE,KAAKglE,kBAAkBE,OAC7BllE,KAAK4kE,WAAY,EACjB5kE,KAAKglE,kBAAoB,MAG3BhlE,KAAKglE,mBAAoB,IAAI,GAAAr9D,GAC1Bw9D,QAAQnlE,KAAK4F,IAAM,OAAQ,CAC1Bw/D,mBAAoB,IAAMplE,KAAKsL,WAAWgyD,uBAC1C+H,iBAAiB,EACjBC,UAAW,KAA0BC,aAEtCC,gBAAgB,IAAI,MAEpBC,QAEHzlE,KAAKglE,kBAAkBU,GAAG,kBAAmB3kE,GAC3Cf,KAAK2lE,oBAAoB,IAAIzC,GAAqBniE,MAGpDf,KAAKglE,kBAAkBU,GAAG,aAAc3kE,IAAD,IAGvCf,KAAKglE,kBAAkBY,SAAQ,KAC7B5lE,KAAK4kE,WAAY,EACjB5kE,KAAK6lE,WAAU,EAAK,IAEtB7lE,KAAKsB,QAAS,SACJtB,KAAK8lE,+BACP9lE,KAAK6lE,WAAU,IAEzB,G,CAEME,iBAAiBC,GAAO,G,0CAC5B,GAAKhmE,KAAKsB,OAGV,WACYtB,KAAK8lE,6BACP9lE,KAAK6lE,UAAUG,SAEfhmE,KAAKglE,kBAAkBE,M,CAE/B,MAAO38D,GACPvI,KAAKuhB,WAAWuC,MAAMvb,EAAElF,W,CAE5B,G,CAEM4iE,wB,0CACJjmE,KAAK6kE,UAAW,EACZ7kE,KAAKsB,SAAWtB,KAAK4kE,kBACjB5kE,KAAK6lE,WAAU,GAEzB,G,CAEMK,2B,0CACJlmE,KAAK6kE,UAAW,EACZ7kE,KAAKsB,QAAUtB,KAAK4kE,kBAChB5kE,KAAKglE,kBAAkBE,OAEjC,G,CAEcS,oBAAoBx7C,G,0CAChC,MAAMpL,QAAc/e,KAAKqhB,aAAae,WACtC,GAAoB,MAAhB+H,GAAwBA,EAAag5C,YAAcpkD,EACrD,OAGF,MAAMonD,QAAwBnmE,KAAKuL,aAAa8d,qBAC1C+8C,EAAgBj8C,EAAai5C,QAAQn3D,QAAUke,EAAai5C,QAAQiD,OACpEC,QAAiBtmE,KAAKuL,aAAaa,YACzC,IAAI+5D,GAAoC,MAAjBC,GAAyBA,IAAkBE,EAIlE,OAAQn8C,EAAa1f,MACnB,KAAK4F,EAAiBgzD,iBACtB,KAAKhzD,EAAiBkzD,uBACdvjE,KAAK2kE,YAAY4B,iBACrBp8C,EAAai5C,QACbj5C,EAAa1f,OAAS4F,EAAiBkzD,kBAEzC,MACF,KAAKlzD,EAAiBizD,iBACtB,KAAKjzD,EAAiBmzD,sBACdxjE,KAAK2kE,YAAY6B,iBAAiBr8C,EAAai5C,SACrD,MACF,KAAK/yD,EAAiBqzD,iBACtB,KAAKrzD,EAAiBuzD,uBACd5jE,KAAK2kE,YAAY8B,iBACrBt8C,EAAai5C,QACbj5C,EAAa1f,OAAS4F,EAAiBuzD,kBAEzC,MACF,KAAKvzD,EAAiBszD,uBACd3jE,KAAK2kE,YAAY+B,iBAAiBv8C,EAAai5C,SACrD,MACF,KAAK/yD,EAAiByzD,UACtB,KAAKzzD,EAAiB0zD,YACtB,KAAK1zD,EAAiB4zD,aAChBkC,UACInmE,KAAK2kE,YAAYgC,UAAS,IAElC,MACF,KAAKt2D,EAAiB2zD,YAChBmC,UACInmE,KAAK2kE,YAAYgC,UAAS,SAE1B3mE,KAAKglE,kBAAkBE,QAE/B,MACF,KAAK70D,EAAiB6zD,OAChBiC,GACFnmE,KAAK4uB,gBAAe,GAEtB,MACF,KAAKve,EAAiB+zD,eACtB,KAAK/zD,EAAiBg0D,qBACdrkE,KAAK2kE,YAAYiC,eACrBz8C,EAAai5C,QACbj5C,EAAa1f,OAAS4F,EAAiBg0D,gBAEzC,MACF,KAAKh0D,EAAiBi0D,qBACdtkE,KAAK2kE,YAAYkC,eAAe18C,EAAai5C,SACnD,MACF,KAAK/yD,EAAiBm0D,mBACVxkE,KAAKuL,aAAau7D,4BAC1B9mE,KAAKshB,iBAAiB7V,KAAK,oBAAqB,CAC9Cs7D,eAAgB58C,EAAai5C,QAAQl+D,KAO/C,G,CAEc2gE,UAAUG,G,0CAKtB,GAJ2B,MAAvBhmE,KAAK8kE,iBACP35C,aAAanrB,KAAK8kE,gBAClB9kE,KAAK8kE,eAAiB,MAEpB9kE,KAAK4kE,YAAc5kE,KAAKsB,QAAUtB,KAAK6kE,SACzC,OAGF,SADgC7kE,KAAK8lE,sBACrC,CAIA,UACQ9lE,KAAKglE,kBAAkBp5B,QAC7B5rC,KAAK4kE,WAAY,EACboB,UACIhmE,KAAK2kE,YAAYgC,UAAS,G,CAElC,MAAOp+D,GACPvI,KAAKuhB,WAAWuC,MAAMvb,E,CAGnBvI,KAAK4kE,YACR5kE,KAAK8kE,eAAiB17D,YAAW,IAAMpJ,KAAK6lE,UAAUG,IAAOhmE,KAAKiF,OAAO,KAAQ,M,CAErF,G,CAEc6gE,sB,0CAEZ,aADyB9lE,KAAKkkB,YAAYkF,kBACrBnW,GAAqB2W,QAC5C,G,CAEQ3kB,OAAO+hE,EAAal9D,GAG1B,OAFAk9D,EAAMhiE,KAAKqmC,KAAK27B,GAChBl9D,EAAM9E,KAAK+E,MAAMD,GACV9E,KAAK+E,MAAM/E,KAAKC,UAAY6E,EAAMk9D,EAAM,IAAMA,CACvD,E,uTClOK,MAAMC,GAUXnnE,YAAoByhB,EAAgC9a,GAAhC,KAAA8a,WAAAA,EAAgC,KAAA9a,YAAAA,EAPpD,KAAAygE,gBAA2B,KACnB,KAAAC,UAAW,EACX,KAAAC,MAAoB,KACX,KAAAC,uBAAmC,CAAC,QAAS,QAAS,KAAM,KAAM,MAClE,KAAAC,2BAAqC,EAC9C,KAAAC,oBAA8BvnE,KAAKsnE,2BAGzCtnE,KAAKyG,YAAY+gE,QAAQ1uC,WAAWuY,KACmB,IAAjDrxC,KAAKqnE,uBAAuB5hE,QAAQ4rC,GACtCrxC,KAAKunE,oBAAsB,EAE3BvnE,KAAKunE,oBAAsBvnE,KAAKsnE,0B,IAM/BL,GAAcQ,qBACjBR,GAAcQ,oBAAqB,EAEnCC,GAAKC,SAASC,iBAAiB5nE,KAAK6nE,iCAAkC,oBAE1E,CAEAC,aACE9nE,KAAKknE,gBAAkB,KACvBlnE,KAAKonE,MAAQ,IACf,CAEAW,aAAaC,GAMX,QAHW,OAFXA,EAAQf,GAAcgB,qBAAqBD,KAG1B,MAAdhoE,KAAKonE,OAAiBY,EAAMtnE,OAASV,KAAKunE,qBAC5B,MAAdvnE,KAAKonE,OAAiBY,EAAMtnE,OAASV,KAAKunE,qBAA8C,IAAvBS,EAAMviE,QAAQ,KAEpF,CAEAyiE,aAAa5rD,EAAuB4qD,GAClC,GAAIlnE,KAAKmnE,SACP,OAGFnnE,KAAKmnE,UAAW,EAChBnnE,KAAKknE,gBAAkBA,EACvBlnE,KAAKonE,MAAQ,KACb,MAAMe,EAAU,IAAIT,GAAKU,QACzBD,EAAQE,SAASviC,IAAI9lC,KAAK6nE,kCAC1BM,EAAQG,IAAI,MACZH,EAAQr/B,MAAM,UAAW,CAAEy/B,MAAO,IAAKC,UAAY1jE,GAAkBA,EAAEI,GAAGnC,OAAO,EAAG,KACpFolE,EAAQr/B,MAAM,OAAQ,CACpBy/B,MAAO,KAETJ,EAAQr/B,MAAM,WAAY,CACxBy/B,MAAO,EACPC,UAAY1jE,GACQ,MAAdA,EAAE88B,UAAoB98B,EAAE2F,OAASmyB,GAAWwD,KACvCt7B,EAAE88B,SAAS99B,QAAQ,MAAO,IAE5BgB,EAAE88B,WAGbumC,EAAQr/B,MAAM,SACdq/B,EAAQr/B,MAAM,iBAAkB,CAC9B0/B,UAAY1jE,GACVA,EAAE2F,OAASmyB,GAAWoD,OAAoB,MAAXl7B,EAAEm7B,MAAgBn7B,EAAEm7B,MAAM9mB,SAAW,OAExEgvD,EAAQr/B,MAAM,aAAc,CAAEy/B,MAAO,EAAGC,UAAY1jE,GAAkB9E,KAAKyoE,aAAa3jE,KACxFqjE,EAAQr/B,MAAM,SAAU,CAAE0/B,UAAY1jE,GAAkB9E,KAAK0oE,eAAe5jE,GAAG,KAC/EqjE,EAAQr/B,MAAM,gBAAiB,CAAE0/B,UAAY1jE,GAAkB9E,KAAK0oE,eAAe5jE,GAAG,KACtFqjE,EAAQr/B,MAAM,cAAe,CAC3B0/B,UAAY1jE,GAAkB9E,KAAK2oE,oBAAoB7jE,GAAG,KAE5DqjE,EAAQr/B,MAAM,qBAAsB,CAClC0/B,UAAY1jE,GAAkB9E,KAAK2oE,oBAAoB7jE,GAAG,KAE5DqjE,EAAQr/B,MAAM,iBAAkB,CAAE0/B,UAAY1jE,GAAkBA,EAAE0F,kBAClE8R,EAAUA,GAAW,IACbjW,SAASvB,GAAMqjE,EAAQriC,IAAIhhC,KACnC9E,KAAKonE,MAAQe,EAAQ1C,QAErBzlE,KAAKmnE,UAAW,EAEhBnnE,KAAKuhB,WAAW0Y,KAAK,2BACvB,CAEM2uC,cACJZ,EACA1gE,EAAkF,KAClFgV,G,0CAEA,MAAMusD,EAAwB,GAkB9B,GAjBa,MAATb,IACFA,EAAQf,GAAcgB,qBAAqBD,EAAMziE,OAAO9E,gBAE5C,KAAVunE,IACFA,EAAQ,MAGK,MAAX1rD,IACFA,EAAU,IAGE,MAAVhV,GAAkBnD,MAAMkvB,QAAQ/rB,IAAWA,EAAO5G,OAAS,EAC7D4b,EAAUA,EAAQhV,QAAQxC,GAAMwC,EAAOwhE,OAAOtoC,GAAW,MAALA,GAAaA,EAAE17B,OAChD,MAAVwC,IACTgV,EAAUA,EAAQhV,OAAOA,KAGtBtH,KAAK+nE,aAAaC,GACrB,OAAO1rD,EAGLtc,KAAKmnE,iBACD,IAAIj+D,SAASnE,GAAMqE,WAAWrE,EAAG,OACnC/E,KAAKmnE,iBACD,IAAIj+D,SAASnE,GAAMqE,WAAWrE,EAAG,SAI3C,MAAMqiE,EAAQpnE,KAAK+oE,oBACnB,GAAa,MAAT3B,EAEF,OAAOpnE,KAAKgpE,mBAAmB1sD,EAAS0rD,GAG1C,MAAMiB,EAAa,IAAI9iE,IACvBmW,EAAQjW,SAASvB,GAAMmkE,EAAWziE,IAAI1B,EAAEI,GAAIJ,KAE5C,IAAIokE,EAAqC,KAEzC,GAD+B,MAATlB,GAAiBA,EAAMtnE,OAAS,GAA4B,IAAvBsnE,EAAMviE,QAAQ,KAEvE,IACEyjE,EAAgB9B,EAAMlhE,OAAO8hE,EAAMjlE,OAAO,GAAGwC,O,CAC7C,MAAOgD,GACPvI,KAAKuhB,WAAWuC,MAAMvb,E,KAEnB,CACL,MAAM4gE,EAASzB,GAAK0B,MAAMC,SAASC,QAAU5B,GAAK0B,MAAMC,SAASE,SACjEL,EAAgB9B,EAAMY,OAAOwB,IAC3B9B,GAAK+B,UAAUzB,GAAO3hE,SAASuF,IAC7B,MAAM/K,EAAI+K,EAAMvI,WAChBmmE,EAAEE,KAAK7oE,EAAG,CAAE0/B,OAAQ,CAAC,QAAS8oC,SAAUF,IACxCK,EAAEE,KAAK7oE,EAAG,CAAE0/B,OAAQ,CAAC,YAAa8oC,SAAUF,IAC5CK,EAAEE,KAAK7oE,EAAG,CAAE0/B,OAAQ,CAAC,cAAe8oC,SAAUF,IAC9CK,EAAEE,KAAK7oE,EAAG,CAAC,EAAE,GACb,G,CAWN,OAPqB,MAAjBqoE,GACFA,EAAc7iE,SAAStB,IACjBkkE,EAAW30C,IAAIvvB,EAAEujE,MACnBO,EAAQ/6D,KAAKm7D,EAAWx7D,IAAI1I,EAAEujE,K,IAI7BO,CACT,G,CAEAG,mBAAmB1sD,EAAuB0rD,EAAe2B,GAAU,GAEjE,OADA3B,EAAQf,GAAcgB,qBAAqBD,EAAMziE,OAAO9E,eACjD6b,EAAQhV,QAAQxC,GACjB6kE,IAAY7kE,EAAEyiC,YAGJ,MAAVziC,EAAEpD,MAAgBoD,EAAEpD,KAAKjB,cAAcgF,QAAQuiE,IAAU,OAGzDA,EAAMtnE,QAAU,GAAKoE,EAAEI,GAAGM,WAAWwiE,MAGvB,MAAdljE,EAAE88B,UAAoB98B,EAAE88B,SAASnhC,cAAcgF,QAAQuiE,IAAU,MAInEljE,EAAEm7B,OACFn7B,EAAEm7B,MAAMuG,SACR1hC,EAAEm7B,MAAMhB,KAAKyH,MAAMkjC,IAAY,MAAC,OAAa,QAAb,EAAAA,aAAQ,EAARA,EAAUhrC,WAAG,eAAEn+B,cAAcgF,QAAQuiE,KAAU,CAAC,SAMtF,CAEA6B,YAAYrtD,EAAmBwrD,GAE7B,GAAc,QADdA,EAAQf,GAAcgB,qBAAqBD,EAAMziE,OAAOukE,sBAEtD,OAAOttD,EAET,MAAMutD,EAA2B,GAC3BC,EAAiC,GAmBvC,OAlBAxtD,EAAMnW,SAASsB,I,UACC,MAAVA,EAAEjG,MAAgBiG,EAAEjG,KAAKjB,cAAcgF,QAAQuiE,IAAU,EAC3D+B,EAAaj8D,KAAKnG,IAElBqgE,EAAMtnE,QAAU,IACfiH,EAAEzC,GAAGM,WAAWwiE,IACfrgE,EAAEooD,SAAS+Z,oBAAoBtkE,WAAWwiE,IAC3B,OAAR,QAAN,EAAArgE,EAAE2oD,YAAI,eAAEprD,KAAcyC,EAAE2oD,KAAKprD,GAAGM,WAAWwiE,KAG1B,MAAXrgE,EAAEk4B,OAAiBl4B,EAAEk4B,MAAMp/B,cAAcgF,QAAQuiE,IAAU,GAE3C,OAAV,QAAN,EAAArgE,EAAEioD,YAAI,eAAEA,OAAgBjoD,EAAEioD,KAAKA,KAAKnvD,cAAcgF,QAAQuiE,IAAU,GAEhD,OAAd,QAAN,EAAArgE,EAAE2oD,YAAI,eAAEvzB,WAAoBp1B,EAAE2oD,KAAKvzB,SAASt8B,cAAcgF,QAAQuiE,IAAU,IALrFgC,EAAmBl8D,KAAKnG,E,IASrBoiE,EAAaE,OAAOD,EAC7B,CAEAjB,oBACE,OAAO/oE,KAAKonE,KACd,CAEQsB,eAAe5jE,EAAeolE,GACpC,IAAKplE,EAAEuiC,UACL,OAAO,KAET,IAAI9G,EAAmB,GAUvB,OATAz7B,EAAEy7B,OAAOl6B,SAASm6B,IACF,MAAVA,EAAE9+B,MACJ6+B,EAAOzyB,KAAK0yB,EAAE9+B,MAEZ8+B,EAAE/1B,OAAS2E,EAAU+6D,MAAmB,MAAX3pC,EAAE5U,OACjC2U,EAAOzyB,KAAK0yB,EAAE5U,M,IAGlB2U,EAASA,EAAOj5B,QAAQk5B,GAAmB,KAAbA,EAAEj7B,SACV,IAAlBg7B,EAAO7/B,OACF,KAEFwpE,EAAS3pC,EAAOh8B,KAAK,KAAOg8B,CACrC,CAEQooC,oBAAoB7jE,EAAeolE,GACzC,IAAKplE,EAAEqiC,eACL,OAAO,KAET,IAAI1G,EAAwB,GAW5B,OAVA37B,EAAE27B,YAAYp6B,SAASM,IACZ,MAALA,GAA2B,MAAdA,EAAEo2B,WACbmtC,GAAUvjE,EAAEo2B,SAASt3B,QAAQ,MAAQ,EACvCg7B,EAAY3yB,KAAKnH,EAAEo2B,SAASh6B,OAAO,EAAG4D,EAAEo2B,SAAS3oB,YAAY,OAE7DqsB,EAAY3yB,KAAKnH,EAAEo2B,U,IAIzB0D,EAAcA,EAAYn5B,QAAQk5B,GAAmB,KAAbA,EAAEj7B,SACf,IAAvBk7B,EAAY//B,OACP,KAEFwpE,EAASzpC,EAAYl8B,KAAK,KAAOk8B,CAC1C,CAEQgoC,aAAa3jE,GACnB,GAAIA,EAAE2F,OAASmyB,GAAWoD,OAAoB,MAAXl7B,EAAEm7B,QAAkBn7B,EAAEm7B,MAAMuG,QAC7D,OAAO,KAET,MAAMvH,EAAiB,GAsBvB,OArBAn6B,EAAEm7B,MAAMhB,KAAK54B,SAAS64B,IACpB,GAAa,MAATA,EAAEN,KAAyB,KAAVM,EAAEN,IACrB,OAEF,GAAkB,MAAdM,EAAEx5B,SAEJ,YADAu5B,EAAKnxB,KAAKoxB,EAAEx5B,UAGd,IAAIk5B,EAAMM,EAAEN,IACZ,GAAIM,EAAEl2B,QAAU4H,GAAam0B,kBAAmB,CAC9C,MAAMqlC,EAAgBxrC,EAAIn5B,QAAQ,OAC9B2kE,GAAiB,IACnBxrC,EAAMA,EAAI77B,OAAOqnE,EAAgB,IAEnC,MAAMC,EAAazrC,EAAI14B,OAAO,UAC1BmkE,GAAc,IAChBzrC,EAAMA,EAAI52B,UAAU,EAAGqiE,G,CAG3BprC,EAAKnxB,KAAK8wB,EAAI,IAETK,EAAKv+B,OAAS,EAAIu+B,EAAO,IAClC,CAEQ4oC,iCAAiCj8D,GACvC,MAAM0+D,EAAmB,CAAC,OAAQ,iBAAkB,WAAY,SAIhE,OAHgB1+D,EAAc2+D,SAAiB,OACpBzB,OAAOpmE,GAAW4nE,EAAiB/2C,SAAS7wB,KAG9DukE,GAAcgB,qBAAqBr8D,EAAMvI,YAG3CuI,CACT,CAGAvK,4BAA4B2mE,GAC1B,OAAOA,aAAK,EAALA,EAAOwC,UAAU,OAAO1mE,QAAQ,mBAAoB,GAC7D,EAlTe,GAAA2jE,oBAAqB,E,2SCNtC,MAAMgD,GAAW,mCACXC,GAAa,6BAEZ,MAAMC,GACX7qE,YACU0rB,EACAjK,GADA,KAAAiK,sBAAAA,EACA,KAAAjK,WAAAA,CACP,CAEGqpD,QAAQ95D,G,0CACZ,GAAW,MAAPA,EACF,OAAO,KAET,IAAI+5D,EAAS,GACThvB,EAAoC,OACpCivB,EAAS,EACTC,EAASj6D,EACb,MAAMk6D,EAAwD,IAA5Cl6D,EAAIrQ,cAAcgF,QAAQ,cACtCwlE,GAAeD,GAAuD,IAA1Cl6D,EAAIrQ,cAAcgF,QAAQ,YAC5D,GAAIulE,EAAW,CACb,MAAMhL,EAAS,EAAMkL,eAAep6D,GACpC,GAAIkvD,EAAO1rC,IAAI,WAAqC,MAAxB0rC,EAAOvyD,IAAI,UACrC,IACE,MAAM09D,EAAcroE,SAASk9D,EAAOvyD,IAAI,UAAUlI,OAAQ,MACtD4lE,EAAc,GAChBL,EAAS,GACAK,EAAc,IACvBL,EAASK,E,CAEX,SACAnrE,KAAKuhB,WAAWuC,MAAM,wB,CAG1B,GAAIk8C,EAAO1rC,IAAI,WAAqC,MAAxB0rC,EAAOvyD,IAAI,UACrC,IACE,MAAM29D,EAActoE,SAASk9D,EAAOvyD,IAAI,UAAUlI,OAAQ,MACtD6lE,EAAc,IAChBP,EAASO,E,CAEX,SACAprE,KAAKuhB,WAAWuC,MAAM,wB,CAM1B,GAHIk8C,EAAO1rC,IAAI,WAAqC,MAAxB0rC,EAAOvyD,IAAI,YACrCs9D,EAAS/K,EAAOvyD,IAAI,WAElBuyD,EAAO1rC,IAAI,cAA2C,MAA3B0rC,EAAOvyD,IAAI,aAAsB,CAC9D,MAAM49D,EAAWrL,EAAOvyD,IAAI,aAAahN,cACxB,SAAb4qE,GAAoC,WAAbA,GAAsC,WAAbA,IAClDxvB,EAAMwvB,E,OAGDJ,IACTF,EAASj6D,EAAI/N,OAAO,GACpB+nE,EAAS,GAGX,MAAMQ,EAAQtmE,KAAK6tB,OAAM,IAAIjpB,MAAOD,UAAY,KAC1C4hE,EAAUvrE,KAAKwrE,QAAQxrE,KAAKyrE,SAASzmE,KAAK+E,MAAMuhE,EAAQT,IAAU,GAAI,KACtEa,EAAY,EAAMC,eAAeJ,GACjCK,EAAW5rE,KAAK6rE,WAAWd,GAEjC,IAAKa,EAASlrE,SAAWgrE,EAAUhrE,OACjC,OAAO,KAGT,MAAMuH,QAAajI,KAAKm6C,KAAKyxB,EAAUF,EAAW7vB,GAClD,GAAoB,IAAhB5zC,EAAKvH,OACP,OAAO,KAGT,MAAMorE,EAAiC,GAAxB7jE,EAAKA,EAAKvH,OAAS,GAC5B4C,GACa,IAAf2E,EAAK6jE,KAAmB,IACL,IAAnB7jE,EAAK6jE,EAAS,KAAc,IACT,IAAnB7jE,EAAK6jE,EAAS,KAAc,EACV,IAAnB7jE,EAAK6jE,EAAS,GAEjB,IAAIj2C,EAAM,GACV,GAAIo1C,EAAa,CACf,IAAIc,EAAoB,WAATzoE,EACf,IAAK,IAAIZ,EAAI,EAAGA,EAAIooE,EAAQpoE,IAC1BmzB,GAAO60C,GAAWqB,EAAWrB,IAC7BqB,EAAW/mE,KAAKgnE,MAAMD,EAAWrB,G,MAGnC70C,GAAOvyB,EAAS0B,KAAKinE,IAAI,GAAInB,IAASznE,WACtCwyB,EAAM71B,KAAKwrE,QAAQ31C,EAAKi1C,EAAQ,KAGlC,OAAOj1C,CACT,G,CAEAq2C,gBAAgBp7D,GACd,IAAI+5D,EAAS,GACb,GAAW,MAAP/5D,GAA2D,IAA5CA,EAAIrQ,cAAcgF,QAAQ,cAAqB,CAChE,MAAMu6D,EAAS,EAAMkL,eAAep6D,GACpC,GAAIkvD,EAAO1rC,IAAI,WAAqC,MAAxB0rC,EAAOvyD,IAAI,UACrC,IACEo9D,EAAS/nE,SAASk9D,EAAOvyD,IAAI,UAAUlI,OAAQ,K,CAC/C,SACAvF,KAAKuhB,WAAWuC,MAAM,wB,EAI5B,OAAO+mD,CACT,CAIQW,QAAQ7jE,EAAW4+B,EAAW7vB,GAIpC,OAHI6vB,EAAI,GAAK5+B,EAAEjH,SACbiH,EAAIxD,MAAMoiC,EAAI,EAAI5+B,EAAEjH,QAAQ6D,KAAKmS,GAAK/O,GAEjCA,CACT,CAEQ8jE,SAASl5C,GACf,OAAQA,EAAI,KAAO,IAAM,IAAMvtB,KAAK6tB,MAAMN,GAAGlvB,SAAS,GACxD,CAEQ8oE,SAASxkE,GACfA,EAAIA,EAAEnH,cACN,IAAI4rE,EAAe,GAEnB,IAAK,IAAI1pE,EAAI,EAAGA,EAAIiF,EAAEjH,OAAQgC,IACxB+nE,GAAShlE,QAAQkC,EAAEjF,IAAM,IAI7B0pE,GAAgBzkE,EAAEjF,IAEpBiF,EAAIykE,EAEJ,IAAIC,EAAO,GACPC,EAAM,GACV,IAAK,IAAI5pE,EAAI,EAAGA,EAAIiF,EAAEjH,OAAQgC,IAAK,CACjC,MAAM6pE,EAAY9B,GAAShlE,QAAQkC,EAAEpH,OAAOmC,IACxC6pE,EAAY,IAGhBF,GAAQrsE,KAAKwrE,QAAQe,EAAUlpE,SAAS,GAAI,EAAG,K,CAEjD,IAAK,IAAIX,EAAI,EAAGA,EAAI,GAAK2pE,EAAK3rE,OAAQgC,GAAK,EAAG,CAC5C,MAAM8pE,EAAQH,EAAKtpE,OAAOL,EAAG,GAC7B4pE,GAAYxpE,SAAS0pE,EAAO,GAAGnpE,SAAS,G,CAE1C,OAAOipE,CACT,CAEQT,WAAWlkE,GACjB,OAAO,EAAMgkE,eAAe3rE,KAAKmsE,SAASxkE,GAC5C,CAEcwyC,KACZyxB,EACAF,EACA7vB,G,0CAEA,MAAM4wB,QAAkBzsE,KAAKwrB,sBAAsB8Q,KAAKovC,EAAWE,EAAU/vB,GAC7E,OAAO,IAAIz5C,WAAWqqE,EACxB,G,ECtKF,IAAYC,IAAZ,SAAYA,GACV,cACA,iBACD,CAHD,CAAYA,KAAAA,GAAkB,K,2SCkBvB,MAAMC,GACX7sE,YACU2R,EACA2P,EACA/V,EACAE,EACAqhE,GAJA,KAAAn7D,cAAAA,EACA,KAAA2P,aAAAA,EACA,KAAA/V,cAAAA,EACA,KAAAE,aAAAA,EACA,KAAAqhE,wBAAAA,CACP,CAEGC,uBAAuB7iC,EAAiB8iC,G,gDACtC9sE,KAAKuL,aAAawhE,gBAAgB/iC,GAIxC,MAAMp+B,QAAc5L,KAAKohB,aAAa4Q,WAChC7R,QAAqBngB,KAAKohB,aAAa8Q,kBACvC/Z,QAAiBnY,KAAKohB,aAAauQ,cACnChK,QAAqB3nB,KAAKohB,aAAayQ,kBAEvCm7C,QAAsBhtE,KAAKuL,aAAa0hE,wBAEhC,MAAXjjC,GAA+B,IAAZA,GACpB8iC,IAAWJ,GAAmBxI,QAC9B4I,IAAWE,UAGLhtE,KAAKohB,aAAagR,oBAGpBpyB,KAAKuL,aAAa2hE,sBAAsBJ,SAExC9sE,KAAKohB,aAAamQ,SAAS3lB,SAC3B5L,KAAKohB,aAAaoQ,gBAAgBrR,SAClCngB,KAAKohB,aAAaqQ,YAAYtZ,SAC9BnY,KAAKohB,aAAasQ,gBAAgB/J,SAElC3nB,KAAKyR,cAAc07D,uBAC3B,G,CAEAC,8BAA8BnhE,GAC5B,OAAO,EAAA01D,GAAA,IAAM,IAAM3hE,KAAKqtE,gCAAgCphE,IAC1D,CAEMqhE,aAAarhE,G,0CAGjB,MAAMshE,WAAwBvtE,KAAKuL,aAAaiiE,gBAAgB,CAAEvhE,YAC5DwhE,WAA4BztE,KAAKuL,aAAamiE,0BAA0B,CAAEzhE,YAC1E0hE,WAAgC3tE,KAAKuL,aAAaqiE,yBAAyB,CAAE3hE,YAEnF,OAAIwhE,GAAoBE,EACf,cACEJ,GAAiBE,GAAqBE,EAGxC,WAFA,WAIX,G,CAEME,mBAAmB5hE,G,0CACvB,aAAajM,KAAKuL,aAAauiE,mBAAmB,CAAE7hE,UACtD,G,CAEM8hE,gBAAgB9hE,G,0CACpB,MAAMkmC,QAAqBnyC,KAAKuL,aAAawiE,gBAAgB,CAAE9hE,WAE/D,SACQjM,KAAKqL,cAAc2iE,oBAAoBhjE,EAAWijE,oBAAqB,KAAMhiE,GACnF,CACA,MAAMsL,QAAevX,KAAKqL,cAAcwC,OAAO7C,EAAWijE,oBAAqBhiE,GAE/E,IAAI+9B,EAAUhlC,KAAKgiE,IAAI70B,EAAc56B,EAAO,GAAGxW,KAAKgyB,SAapD,OAXoB,MAAhBof,GAAwBnI,EAAU,KACpCA,EAAUzyB,EAAO,GAAGxW,KAAKgyB,SAMvBof,IAAiBnI,UACbhqC,KAAKuL,aAAawhE,gBAAgB/iC,EAAS,CAAE/9B,YAG9C+9B,C,CAGT,OAAOmI,CACT,G,CAEA+7B,oBAAoBjiE,GAClB,OAAO,EAAA01D,GAAA,IAAM,IAAM3hE,KAAKitE,sBAAsBhhE,IAChD,CAEMghE,sBAAsBhhE,G,0CAC1B,MAAMkiE,QAAyBnuE,KAAKqtE,kCACpC,GAAgC,IAA5Bc,EAAiBztE,OACnB,OAAOytE,EAAiB,GAG1B,MAAM7wD,QAA2Btd,KAAKuL,aAAa0hE,sBAAsB,CAAEhhE,OAAQA,IAEnF,SACQjM,KAAKqL,cAAc2iE,oBAAoBhjE,EAAWijE,oBAAqB,KAAMhiE,GACnF,CACA,MACM6gE,SADe9sE,KAAKqL,cAAcwC,OAAO7C,EAAWijE,oBAAqBhiE,IACzD,GAAGlL,KAAK+rE,OAK9B,GAHIA,GAAUxvD,IAAuBwvD,UAC7B9sE,KAAKuL,aAAa2hE,sBAAsBJ,EAAQ,CAAE7gE,OAAQA,KAE9D6gE,GAAUqB,EAAiB56C,SAASu5C,GACtC,OAAOA,C,CAIX,GAA0B,MAAtBxvD,EAA4B,CAE9B,MAAM6b,SAAsBn5B,KAAK4sE,wBAAwBhvD,qBACrD8uD,GAAmB0B,KACnB1B,GAAmBxI,OAGvB,aADMlkE,KAAKuL,aAAa2hE,sBAAsB/zC,EAAc,CAAEltB,OAAQA,IAC/DktB,C,CAGT,OAAO7b,IAAuBovD,GAAmBxI,OAC7CwI,GAAmBxI,OACnBwI,GAAmB0B,IACzB,G,CAEcf,gCAAgCphE,G,0CAC5C,MAAMkiE,EAAmB,CAACzB,GAAmBxI,QAW7C,cARSlkE,KAAK4sE,wBAAwBhvD,kBAAkB3R,KAChB,oBAA/BjM,KAAKstE,aAAarhE,YAClBjM,KAAK6tE,mBAAmB5hE,MAG/BkiE,EAAiBrgE,KAAK4+D,GAAmB0B,MAGpCD,CACT,G,CAEMp9C,MAAM9kB,G,gDACJjM,KAAKuL,aAAa8iE,qBAAoB,EAAO,CAAEpiE,OAAQA,UACvDjM,KAAKyR,cAAc68D,aAAariE,EACxC,G,ECrKK,MAAMsiE,WAAuCx4D,GAApD,c,oBACE,KAAAy4D,YAAc,GACd,KAAAv3D,UAAY,EACZ,KAAAw3D,cAAe,EACf,KAAAC,cAAe,EACf,KAAAC,YAAa,EACb,KAAAC,YAAc,EACd,KAAAC,YAAa,EACb,KAAAC,aAAe,EACf,KAAAC,eAAiB,EACjB,KAAAC,YAAa,EACb,KAAAC,eAAgB,CAiBlB,CAfEC,WACE,MACuB,KAArBlvE,KAAKwuE,aACLxuE,KAAKiX,UAAY,GACjBjX,KAAK4uE,YAAc,GACnB5uE,KAAK8uE,aAAe,GACpB9uE,KAAKyuE,cACLzuE,KAAK0uE,cACL1uE,KAAK2uE,YACL3uE,KAAK6uE,YACL7uE,KAAK+uE,eAAiB,GACtB/uE,KAAKgvE,YACLhvE,KAAKivE,aAET,EC5BK,MAAME,GAAkB,CAC7B,SACA,UACA,YACA,QACA,UACA,UACA,SACA,OACA,WACA,WACA,WACA,UACA,UACA,SACA,WACA,UACA,WACA,WACA,WACA,WACA,UACA,UACA,WACA,SACA,SACA,UACA,YACA,YACA,UACA,WACA,WACA,WACA,UACA,WACA,SACA,OACA,QACA,WACA,UACA,OACA,UACA,UACA,SACA,SACA,WACA,YACA,SACA,WACA,WACA,WACA,UACA,OACA,UACA,YACA,WACA,WACA,UACA,YACA,OACA,SACA,WACA,YACA,YACA,YACA,YACA,SACA,QACA,YACA,WACA,SACA,UACA,SACA,SACA,WACA,QACA,SACA,YACA,YACA,YACA,YACA,YACA,OACA,UACA,SACA,SACA,QACA,YACA,SACA,QACA,UACA,QACA,WACA,UACA,YACA,QACA,YACA,YACA,SACA,WACA,YACA,UACA,QACA,OACA,OACA,OACA,MACA,OACA,YACA,QACA,YACA,QACA,UACA,UACA,YACA,QACA,QACA,YACA,WACA,SACA,QACA,QACA,WACA,WACA,UACA,WACA,SACA,OACA,QACA,QACA,QACA,YACA,QACA,WACA,UACA,WACA,WACA,OACA,WACA,SACA,SACA,WACA,QACA,YACA,QACA,WACA,YACA,YACA,WACA,YACA,YACA,SACA,YACA,YACA,SACA,UACA,UACA,WACA,OACA,QACA,QACA,QACA,UACA,WACA,UACA,WACA,QACA,SACA,WACA,QACA,YACA,UACA,QACA,QACA,SACA,WACA,SACA,YACA,SACA,UACA,WACA,YACA,UACA,YACA,UACA,SACA,UACA,UACA,UACA,SACA,SACA,WACA,OACA,YACA,UACA,QACA,SACA,SACA,SACA,UACA,UACA,YACA,YACA,UACA,SACA,UACA,YACA,YACA,WACA,QACA,YACA,QACA,QACA,WACA,YACA,WACA,WACA,UACA,WACA,UACA,YACA,UACA,YACA,WACA,WACA,WACA,SACA,UACA,YACA,WACA,SACA,WACA,WACA,YACA,WACA,YACA,WACA,YACA,YACA,YACA,YACA,SACA,UACA,QACA,QACA,UACA,SACA,UACA,SACA,WACA,WACA,UACA,SACA,WACA,QACA,SACA,UACA,YACA,SACA,UACA,YACA,YACA,WACA,WACA,YACA,UACA,WACA,QACA,YACA,YACA,UACA,QACA,YACA,YACA,YACA,YACA,WACA,WACA,UACA,UACA,QACA,QACA,WACA,QACA,OACA,WACA,YACA,YACA,WACA,OACA,QACA,WACA,WACA,QACA,QACA,YACA,UACA,WACA,QACA,SACA,UACA,SACA,UACA,UACA,UACA,SACA,UACA,OACA,QACA,QACA,SACA,UACA,UACA,QACA,SACA,UACA,SACA,YACA,WACA,QACA,MACA,SACA,YACA,SACA,YACA,UACA,QACA,QACA,OACA,QACA,QACA,SACA,YACA,SACA,WACA,SACA,UACA,WACA,UACA,UACA,YACA,YACA,YACA,SACA,WACA,QACA,OACA,WACA,OACA,SACA,YACA,UACA,SACA,SACA,UACA,YACA,WACA,YACA,YACA,SACA,QACA,SACA,WACA,YACA,YACA,WACA,UACA,YACA,WACA,UACA,UACA,WACA,QACA,WACA,YACA,SACA,YACA,SACA,SACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,SACA,SACA,WACA,SACA,UACA,WACA,QACA,WACA,UACA,OACA,QACA,QACA,SACA,QACA,QACA,SACA,UACA,SACA,QACA,OACA,OACA,SACA,WACA,SACA,SACA,WACA,YACA,YACA,WACA,SACA,SACA,YACA,WACA,WACA,UACA,YACA,WACA,WACA,YACA,UACA,UACA,WACA,YACA,WACA,WACA,YACA,WACA,WACA,YACA,WACA,WACA,YACA,WACA,YACA,SACA,WACA,WACA,YACA,WACA,QACA,WACA,YACA,SACA,QACA,UACA,QACA,UACA,SACA,WACA,QACA,SACA,UACA,SACA,SACA,YACA,UACA,QACA,UACA,WACA,QACA,SACA,WACA,SACA,UACA,YACA,UACA,QACA,WACA,SACA,SACA,SACA,WACA,QACA,WACA,WACA,SACA,SACA,UACA,WACA,WACA,SACA,YACA,UACA,SACA,WACA,SACA,UACA,SACA,UACA,QACA,WACA,UACA,WACA,SACA,UACA,SACA,OACA,YACA,UACA,YACA,SACA,WACA,YACA,UACA,WACA,YACA,WACA,OACA,YACA,SACA,QACA,QACA,QACA,SACA,SACA,QACA,OACA,QACA,OACA,YACA,WACA,YACA,UACA,UACA,SACA,SACA,UACA,UACA,UACA,QACA,OACA,QACA,UACA,YACA,YACA,QACA,YACA,YACA,QACA,WACA,YACA,SACA,UACA,SACA,QACA,QACA,UACA,QACA,QACA,WACA,QACA,QACA,UACA,UACA,WACA,SACA,OACA,WACA,QACA,WACA,UACA,WACA,OACA,OACA,WACA,WACA,UACA,OACA,SACA,UACA,QACA,SACA,YACA,QACA,QACA,UACA,SACA,QACA,QACA,WACA,UACA,WACA,WACA,OACA,SACA,UACA,SACA,SACA,UACA,UACA,YACA,OACA,SACA,SACA,QACA,OACA,MACA,UACA,OACA,UACA,SACA,UACA,WACA,QACA,WACA,WACA,WACA,QACA,UACA,SACA,SACA,QACA,OACA,YACA,YACA,OACA,YACA,SACA,QACA,SACA,UACA,WACA,UACA,QACA,QACA,QACA,SACA,UACA,WACA,YACA,OACA,YACA,WACA,SACA,QACA,OACA,SACA,WACA,SACA,SACA,WACA,SACA,WACA,YACA,YACA,SACA,SACA,QACA,SACA,UACA,OACA,SACA,SACA,WACA,YACA,UACA,WACA,SACA,SACA,WACA,UACA,UACA,QACA,QACA,QACA,QACA,UACA,UACA,SACA,YACA,OACA,QACA,QACA,UACA,UACA,YACA,UACA,UACA,YACA,YACA,UACA,UACA,YACA,YACA,YACA,UACA,WACA,SACA,SACA,YACA,SACA,SACA,WACA,QACA,QACA,UACA,WACA,YACA,SACA,WACA,WACA,SACA,WACA,QACA,QACA,WACA,QACA,YACA,SACA,WACA,SACA,YACA,SACA,SACA,SACA,WACA,WACA,YACA,YACA,WACA,WACA,UACA,QACA,SACA,UACA,SACA,SACA,UACA,UACA,QACA,OACA,QACA,YACA,SACA,OACA,UACA,YACA,YACA,WACA,WACA,UACA,UACA,UACA,WACA,WACA,WACA,QACA,QACA,SACA,SACA,SACA,UACA,YACA,WACA,QACA,OACA,SACA,OACA,SACA,UACA,OACA,WACA,OACA,SACA,UACA,SACA,YACA,QACA,UACA,QACA,SACA,QACA,SACA,SACA,QACA,QACA,WACA,UACA,OACA,UACA,OACA,WACA,WACA,UACA,YACA,WACA,UACA,YACA,OACA,UACA,UACA,UACA,YACA,QACA,SACA,WACA,SACA,WACA,UACA,WACA,SACA,QACA,SACA,SACA,UACA,SACA,QACA,OACA,SACA,WACA,WACA,SACA,UACA,SACA,SACA,SACA,QACA,YACA,SACA,UACA,SACA,UACA,UACA,WACA,OACA,YACA,UACA,UACA,SACA,YACA,UACA,UACA,UACA,YACA,UACA,YACA,UACA,UACA,QACA,UACA,SACA,YACA,SACA,UACA,WACA,WACA,YACA,YACA,YACA,WACA,SACA,YACA,QACA,SACA,UACA,UACA,WACA,UACA,YACA,WACA,YACA,QACA,YACA,YACA,UACA,UACA,UACA,SACA,YACA,QACA,SACA,WACA,SACA,UACA,YACA,YACA,QACA,UACA,UACA,UACA,OACA,OACA,SACA,SACA,SACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,YACA,UACA,YACA,UACA,WACA,SACA,UACA,WACA,WACA,UACA,YACA,WACA,UACA,SACA,SACA,SACA,UACA,YACA,SACA,QACA,UACA,YACA,SACA,SACA,YACA,QACA,UACA,YACA,UACA,WACA,WACA,UACA,SACA,SACA,QACA,SACA,YACA,WACA,WACA,SACA,SACA,SACA,WACA,WACA,YACA,YACA,YACA,UACA,WACA,WACA,QACA,WACA,QACA,QACA,UACA,YACA,UACA,YACA,WACA,SACA,SACA,UACA,QACA,QACA,YACA,WACA,UACA,QACA,UACA,YACA,YACA,WACA,UACA,WACA,UACA,UACA,QACA,UACA,UACA,WACA,QACA,UACA,SACA,WACA,WACA,WACA,UACA,WACA,SACA,WACA,UACA,QACA,QACA,SACA,SACA,OACA,YACA,UACA,QACA,YACA,SACA,QACA,QACA,UACA,QACA,WACA,SACA,UACA,QACA,QACA,YACA,YACA,YACA,WACA,YACA,YACA,QACA,QACA,QACA,OACA,WACA,SACA,WACA,WACA,QACA,WACA,WACA,SACA,YACA,UACA,QACA,UACA,WACA,SACA,OACA,SACA,UACA,WACA,SACA,SACA,QACA,OACA,SACA,QACA,QACA,QACA,QACA,QACA,WACA,QACA,SACA,WACA,SACA,WACA,WACA,YACA,SACA,UACA,UACA,WACA,UACA,SACA,SACA,OACA,QACA,QACA,OACA,QACA,WACA,SACA,SACA,QACA,YACA,QACA,WACA,UACA,UACA,WACA,UACA,WACA,UACA,QACA,QACA,QACA,UACA,SACA,WACA,OACA,OACA,QACA,QACA,QACA,UACA,QACA,SACA,YACA,WACA,QACA,SACA,UACA,SACA,UACA,WACA,QACA,SACA,WACA,OACA,SACA,QACA,UACA,QACA,QACA,UACA,WACA,UACA,UACA,WACA,QACA,SACA,UACA,WACA,YACA,QACA,WACA,SACA,SACA,YACA,SACA,UACA,QACA,YACA,UACA,UACA,WACA,YACA,YACA,OACA,WACA,SACA,UACA,SACA,QACA,UACA,MACA,WACA,SACA,UACA,SACA,YACA,YACA,YACA,WACA,YACA,WACA,WACA,OACA,OACA,OACA,OACA,WACA,WACA,UACA,WACA,SACA,YACA,YACA,UACA,SACA,YACA,WACA,WACA,WACA,SACA,WACA,OACA,OACA,OACA,UACA,QACA,QACA,SACA,QACA,WACA,UACA,UACA,WACA,UACA,YACA,YACA,SACA,YACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,UACA,UACA,SACA,UACA,SACA,YACA,WACA,WACA,YACA,UACA,YACA,WACA,WACA,YACA,WACA,YACA,UACA,UACA,UACA,WACA,UACA,YACA,UACA,QACA,YACA,UACA,WACA,WACA,SACA,WACA,YACA,YACA,UACA,YACA,YACA,UACA,OACA,UACA,WACA,YACA,YACA,WACA,YACA,YACA,WACA,YACA,UACA,WACA,UACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,WACA,WACA,UACA,YACA,UACA,WACA,YACA,YACA,YACA,UACA,UACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,UACA,WACA,YACA,UACA,YACA,WACA,UACA,YACA,YACA,WACA,UACA,UACA,UACA,UACA,WACA,UACA,YACA,UACA,UACA,YACA,OACA,SACA,SACA,UACA,SACA,UACA,SACA,OACA,QACA,OACA,WACA,YACA,UACA,SACA,SACA,SACA,YACA,YACA,WACA,WACA,YACA,QACA,WACA,UACA,WACA,YACA,SACA,UACA,WACA,UACA,YACA,YACA,UACA,SACA,SACA,WACA,YACA,SACA,SACA,YACA,OACA,UACA,SACA,QACA,QACA,QACA,YACA,YACA,WACA,YACA,UACA,SACA,UACA,WACA,QACA,UACA,WACA,UACA,SACA,WACA,OACA,WACA,YACA,WACA,WACA,SACA,WACA,UACA,WACA,YACA,YACA,SACA,QACA,YACA,QACA,UACA,UACA,QACA,QACA,QACA,UACA,WACA,WACA,WACA,WACA,SACA,SACA,UACA,YACA,QACA,UACA,UACA,YACA,SACA,WACA,YACA,SACA,WACA,WACA,WACA,WACA,WACA,SACA,QACA,QACA,SACA,QACA,QACA,WACA,UACA,WACA,YACA,UACA,WACA,UACA,WACA,OACA,UACA,QACA,QACA,QACA,UACA,SACA,WACA,UACA,UACA,UACA,WACA,UACA,YACA,SACA,WACA,UACA,QACA,QACA,QACA,QACA,OACA,QACA,SACA,UACA,UACA,QACA,QACA,UACA,UACA,YACA,UACA,YACA,UACA,QACA,YACA,SACA,UACA,WACA,WACA,YACA,UACA,WACA,YACA,UACA,UACA,WACA,QACA,OACA,SACA,UACA,UACA,YACA,OACA,UACA,UACA,WACA,SACA,SACA,WACA,WACA,YACA,WACA,UACA,YACA,WACA,UACA,YACA,UACA,QACA,SACA,UACA,UACA,UACA,SACA,OACA,SACA,SACA,SACA,SACA,YACA,UACA,QACA,QACA,QACA,UACA,SACA,UACA,SACA,SACA,YACA,QACA,QACA,QACA,OACA,SACA,UACA,YACA,UACA,YACA,WACA,YACA,UACA,MACA,QACA,SACA,UACA,UACA,WACA,SACA,YACA,YACA,MACA,MACA,WACA,SACA,QACA,WACA,SACA,QACA,QACA,WACA,QACA,UACA,YACA,SACA,WACA,QACA,SACA,SACA,WACA,YACA,QACA,WACA,WACA,YACA,UACA,WACA,WACA,UACA,OACA,OACA,YACA,OACA,YACA,OACA,WACA,SACA,WACA,WACA,UACA,OACA,SACA,WACA,UACA,WACA,WACA,UACA,UACA,UACA,UACA,WACA,SACA,YACA,WACA,SACA,UACA,YACA,QACA,OACA,YACA,SACA,WACA,QACA,UACA,WACA,SACA,QACA,SACA,SACA,QACA,QACA,YACA,QACA,WACA,SACA,WACA,YACA,WACA,UACA,SACA,YACA,YACA,UACA,YACA,UACA,YACA,WACA,OACA,WACA,UACA,SACA,YACA,YACA,YACA,QACA,WACA,SACA,WACA,YACA,SACA,SACA,OACA,OACA,SACA,SACA,WACA,SACA,WACA,SACA,UACA,SACA,YACA,YACA,YACA,WACA,UACA,YACA,WACA,WACA,WACA,UACA,SACA,WACA,SACA,WACA,UACA,YACA,WACA,YACA,YACA,QACA,WACA,UACA,UACA,SACA,SACA,OACA,WACA,YACA,WACA,SACA,YACA,QACA,WACA,QACA,WACA,YACA,SACA,WACA,WACA,WACA,YACA,YACA,YACA,WACA,YACA,WACA,UACA,QACA,SACA,WACA,SACA,YACA,YACA,WACA,SACA,YACA,WACA,SACA,WACA,YACA,YACA,WACA,SACA,QACA,SACA,QACA,UACA,SACA,UACA,UACA,OACA,YACA,YACA,WACA,YACA,SACA,UACA,YACA,WACA,SACA,SACA,SACA,WACA,YACA,YACA,UACA,UACA,QACA,WACA,SACA,SACA,WACA,QACA,UACA,YACA,UACA,YACA,YACA,WACA,WACA,YACA,YACA,UACA,WACA,WACA,UACA,UACA,UACA,UACA,YACA,WACA,WACA,SACA,YACA,YACA,WACA,YACA,YACA,SACA,WACA,YACA,WACA,UACA,QACA,UACA,WACA,UACA,UACA,YACA,WACA,SACA,UACA,YACA,UACA,WACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,WACA,YACA,YACA,UACA,OACA,WACA,SACA,YACA,QACA,OACA,SACA,UACA,YACA,WACA,YACA,WACA,WACA,YACA,YACA,MACA,WACA,YACA,WACA,OACA,SACA,OACA,WACA,QACA,SACA,SACA,UACA,SACA,QACA,UACA,SACA,YACA,QACA,QACA,SACA,SACA,UACA,UACA,UACA,SACA,SACA,UACA,WACA,YACA,YACA,WACA,YACA,WACA,YACA,WACA,WACA,WACA,SACA,WACA,WACA,UACA,YACA,WACA,UACA,UACA,YACA,WACA,WACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,WACA,OACA,YACA,UACA,OACA,UACA,YACA,YACA,WACA,WACA,YACA,SACA,UACA,WACA,UACA,WACA,SACA,YACA,YACA,WACA,WACA,YACA,YACA,YACA,WACA,UACA,YACA,WACA,UACA,WACA,UACA,YACA,UACA,WACA,WACA,UACA,WACA,UACA,WACA,UACA,WACA,WACA,WACA,WACA,QACA,QACA,QACA,YACA,UACA,WACA,WACA,WACA,WACA,SACA,WACA,YACA,YACA,WACA,WACA,WACA,YACA,QACA,SACA,SACA,OACA,WACA,WACA,QACA,QACA,QACA,QACA,OACA,SACA,YACA,SACA,QACA,UACA,SACA,WACA,WACA,WACA,WACA,UACA,WACA,UACA,QACA,QACA,SACA,WACA,YACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,UACA,QACA,OACA,YACA,SACA,SACA,OACA,SACA,WACA,SACA,OACA,OACA,QACA,OACA,OACA,WACA,YACA,YACA,WACA,YACA,WACA,UACA,UACA,YACA,WACA,YACA,QACA,UACA,UACA,OACA,UACA,WACA,YACA,YACA,WACA,YACA,YACA,YACA,SACA,SACA,WACA,SACA,SACA,QACA,OACA,UACA,QACA,QACA,QACA,UACA,WACA,YACA,WACA,WACA,SACA,WACA,SACA,SACA,WACA,UACA,UACA,UACA,QACA,QACA,QACA,YACA,UACA,WACA,UACA,UACA,UACA,QACA,QACA,WACA,SACA,OACA,MACA,SACA,YACA,UACA,WACA,UACA,WACA,WACA,QACA,OACA,OACA,SACA,SACA,MACA,OACA,SACA,WACA,OACA,UACA,WACA,WACA,MACA,OACA,SACA,YACA,YACA,UACA,UACA,WACA,SACA,SACA,OACA,OACA,UACA,OACA,QACA,QACA,QACA,UACA,UACA,WACA,UACA,YACA,UACA,WACA,UACA,WACA,WACA,OACA,QACA,UACA,UACA,UACA,SACA,UACA,QACA,UACA,UACA,WACA,WACA,WACA,UACA,UACA,UACA,YACA,YACA,UACA,YACA,SACA,SACA,UACA,QACA,UACA,SACA,WACA,SACA,YACA,YACA,SACA,WACA,UACA,QACA,SACA,SACA,OACA,OACA,QACA,QACA,QACA,YACA,OACA,SACA,UACA,YACA,UACA,WACA,YACA,UACA,YACA,YACA,OACA,WACA,SACA,OACA,UACA,SACA,WACA,YACA,WACA,MACA,YACA,UACA,YACA,SACA,YACA,SACA,SACA,WACA,WACA,YACA,UACA,YACA,SACA,QACA,YACA,UACA,SACA,QACA,YACA,UACA,SACA,YACA,WACA,WACA,WACA,UACA,YACA,YACA,WACA,SACA,MACA,WACA,WACA,YACA,QACA,UACA,SACA,MACA,UACA,WACA,MACA,YACA,QACA,YACA,WACA,YACA,QACA,UACA,QACA,QACA,UACA,SACA,UACA,YACA,YACA,QACA,WACA,UACA,SACA,SACA,WACA,SACA,YACA,QACA,UACA,YACA,WACA,OACA,QACA,WACA,UACA,WACA,UACA,UACA,WACA,WACA,YACA,WACA,YACA,WACA,WACA,WACA,WACA,UACA,UACA,YACA,QACA,MACA,SACA,YACA,SACA,YACA,YACA,WACA,UACA,YACA,SACA,SACA,YACA,YACA,WACA,UACA,UACA,WACA,WACA,YACA,QACA,SACA,UACA,UACA,YACA,YACA,UACA,YACA,WACA,YACA,YACA,WACA,YACA,WACA,SACA,WACA,WACA,UACA,WACA,SACA,UACA,WACA,WACA,YACA,UACA,SACA,UACA,YACA,YACA,YACA,UACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,SACA,SACA,SACA,UACA,UACA,SACA,SACA,YACA,WACA,YACA,WACA,SACA,UACA,SACA,SACA,YACA,SACA,SACA,WACA,UACA,WACA,UACA,YACA,WACA,WACA,WACA,UACA,WACA,QACA,OACA,SACA,OACA,WACA,YACA,YACA,WACA,WACA,YACA,WACA,WACA,UACA,QACA,SACA,WACA,UACA,UACA,YACA,SACA,YACA,YACA,WACA,SACA,SACA,UACA,YACA,SACA,SACA,UACA,QACA,QACA,WACA,YACA,YACA,WACA,WACA,WACA,SACA,YACA,YACA,WACA,UACA,QACA,UACA,YACA,YACA,SACA,WACA,WACA,YACA,YACA,WACA,UACA,UACA,WACA,UACA,QACA,YACA,SACA,YACA,WACA,UACA,QACA,WACA,YACA,YACA,UACA,UACA,OACA,YACA,YACA,YACA,WACA,WACA,QACA,WACA,UACA,OACA,QACA,YACA,SACA,QACA,UACA,UACA,WACA,YACA,YACA,YACA,SACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,SACA,YACA,YACA,YACA,YACA,QACA,OACA,YACA,SACA,UACA,SACA,QACA,WACA,OACA,SACA,YACA,WACA,WACA,SACA,UACA,YACA,YACA,YACA,YACA,YACA,QACA,SACA,WACA,YACA,SACA,SACA,WACA,UACA,YACA,WACA,UACA,UACA,UACA,YACA,WACA,WACA,YACA,SACA,WACA,UACA,YACA,YACA,WACA,YACA,SACA,YACA,WACA,WACA,UACA,YACA,YACA,SACA,YACA,UACA,YACA,YACA,QACA,SACA,WACA,WACA,YACA,WACA,WACA,WACA,YACA,UACA,SACA,WACA,SACA,YACA,UACA,UACA,SACA,YACA,UACA,UACA,OACA,SACA,UACA,SACA,OACA,QACA,UACA,OACA,WACA,SACA,SACA,WACA,UACA,UACA,YACA,QACA,UACA,OACA,UACA,YACA,YACA,UACA,UACA,WACA,SACA,UACA,WACA,SACA,YACA,YACA,UACA,WACA,WACA,MACA,QACA,UACA,SACA,SACA,OACA,OACA,SACA,SACA,WACA,WACA,WACA,WACA,WACA,QACA,QACA,UACA,SACA,UACA,WACA,YACA,WACA,SACA,SACA,QACA,SACA,SACA,WACA,UACA,YACA,QACA,QACA,QACA,QACA,UACA,SACA,WACA,WACA,YACA,UACA,UACA,QACA,WACA,QACA,UACA,SACA,WACA,SACA,SACA,SACA,UACA,OACA,SACA,QACA,WACA,SACA,WACA,WACA,UACA,UACA,YACA,QACA,WACA,QACA,UACA,WACA,WACA,YACA,SACA,UACA,UACA,WACA,MACA,OACA,UACA,UACA,WACA,WACA,YACA,YACA,QACA,UACA,QACA,QACA,YACA,UACA,WACA,WACA,OACA,UACA,YACA,YACA,YACA,WACA,WACA,SACA,QACA,UACA,WACA,SACA,WACA,UACA,YACA,YACA,WACA,UACA,WACA,WACA,WACA,YACA,YACA,WACA,OACA,UACA,SACA,QACA,QACA,SACA,SACA,QACA,QACA,OACA,QACA,QACA,QACA,WACA,OACA,SACA,UACA,QACA,WACA,UACA,UACA,QACA,SACA,UACA,WACA,OACA,MACA,MACA,OACA,QACA,OACA,WACA,SACA,WACA,SACA,WACA,SACA,OACA,OACA,OACA,UACA,WACA,WACA,YACA,SACA,WACA,WACA,WACA,UACA,WACA,UACA,WACA,UACA,WACA,YACA,WACA,UACA,WACA,WACA,WACA,SACA,SACA,UACA,WACA,WACA,MACA,QACA,WACA,WACA,UACA,YACA,WACA,YACA,WACA,QACA,QACA,UACA,UACA,YACA,SACA,UACA,QACA,WACA,WACA,WACA,UACA,UACA,UACA,WACA,WACA,UACA,WACA,SACA,YACA,WACA,YACA,WACA,UACA,WACA,YACA,WACA,UACA,SACA,WACA,SACA,YACA,WACA,QACA,UACA,UACA,WACA,SACA,SACA,QACA,SACA,WACA,YACA,YACA,WACA,QACA,SACA,UACA,QACA,UACA,YACA,SACA,OACA,QACA,YACA,UACA,WACA,WACA,YACA,SACA,QACA,QACA,SACA,WACA,YACA,WACA,QACA,YACA,SACA,MACA,QACA,MACA,YACA,UACA,QACA,OACA,YACA,WACA,UACA,SACA,SACA,UACA,YACA,SACA,YACA,WACA,OACA,SACA,QACA,SACA,SACA,WACA,UACA,MACA,SACA,UACA,SACA,SACA,UACA,SACA,UACA,SACA,UACA,SACA,MACA,WACA,YACA,SACA,UACA,WACA,QACA,OACA,OACA,SACA,OACA,QACA,OACA,SACA,MACA,SACA,UACA,WACA,WACA,QACA,UACA,YACA,SACA,QACA,YACA,WACA,YACA,UACA,YACA,WACA,WACA,SACA,YACA,YACA,YACA,WACA,YACA,UACA,YACA,UACA,UACA,UACA,QACA,QACA,YACA,SACA,UACA,YACA,QACA,OACA,WACA,YACA,WACA,SACA,WACA,SACA,SACA,SACA,QACA,UACA,SACA,WACA,QACA,QACA,SACA,QACA,UACA,UACA,UACA,QACA,YACA,SACA,YACA,UACA,SACA,WACA,YACA,QACA,UACA,QACA,WACA,UACA,WACA,UACA,SACA,UACA,UACA,UACA,UACA,SACA,UACA,SACA,UACA,WACA,WACA,SACA,YACA,YACA,UACA,WACA,QACA,QACA,QACA,UACA,WACA,UACA,OACA,SACA,YACA,UACA,SACA,OACA,OACA,WACA,OACA,UACA,QACA,WACA,WACA,YACA,OACA,UACA,QACA,UACA,OACA,OACA,OACA,QACA,WACA,YACA,QACA,SACA,OACA,SACA,OACA,SACA,WACA,OACA,UACA,SACA,SACA,SACA,OACA,OACA,OACA,WACA,YACA,WACA,YACA,SACA,SACA,WACA,UACA,YACA,WACA,WACA,UACA,WACA,QACA,WACA,WACA,UACA,UACA,UACA,WACA,UACA,SACA,UACA,QACA,WACA,QACA,QACA,UACA,YACA,QACA,QACA,YACA,UACA,UACA,YACA,WACA,SACA,YACA,SACA,YACA,YACA,UACA,QACA,OACA,UACA,WACA,WACA,YACA,SACA,QACA,UACA,WACA,OACA,YACA,OACA,QACA,YACA,WACA,WACA,QACA,UACA,YACA,QACA,YACA,QACA,SACA,WACA,OACA,UACA,OACA,WACA,SACA,QACA,QACA,SACA,WACA,SACA,QACA,SACA,UACA,QACA,QACA,SACA,UACA,QACA,OACA,SACA,WACA,WACA,UACA,UACA,YACA,UACA,WACA,SACA,QACA,YACA,WACA,WACA,QACA,UACA,YACA,QACA,OACA,WACA,QACA,OACA,UACA,UACA,YACA,UACA,QACA,SACA,WACA,OACA,OACA,QACA,QACA,UACA,OACA,SACA,MACA,UACA,WACA,YACA,WACA,UACA,WACA,SACA,SACA,UACA,UACA,MACA,UACA,QACA,OACA,UACA,OACA,SACA,SACA,YACA,SACA,UACA,SACA,UACA,YACA,UACA,WACA,WACA,YACA,WACA,WACA,YACA,YACA,WACA,SACA,UACA,WACA,UACA,WACA,YACA,YACA,YACA,UACA,UACA,WACA,WACA,UACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,YACA,WACA,WACA,YACA,YACA,WACA,WACA,UACA,WACA,SACA,YACA,SACA,QACA,YACA,YACA,UACA,WACA,UACA,YACA,QACA,SACA,WACA,WACA,YACA,WACA,WACA,WACA,YACA,UACA,WACA,YACA,SACA,WACA,WACA,WACA,YACA,WACA,QACA,UACA,WACA,YACA,YACA,YACA,UACA,UACA,UACA,QACA,UACA,OACA,SACA,QACA,UACA,YACA,QACA,SACA,YACA,WACA,UACA,WACA,YACA,OACA,UACA,SACA,QACA,QACA,SACA,WACA,SACA,WACA,SACA,OACA,WACA,WACA,YACA,YACA,YACA,SACA,SACA,YACA,WACA,UACA,WACA,WACA,WACA,YACA,YACA,WACA,WACA,YACA,UACA,WACA,YACA,YACA,UACA,WACA,OACA,OACA,QACA,UACA,YACA,UACA,QACA,UACA,YACA,QACA,SACA,SACA,SACA,UACA,UACA,WACA,WACA,UACA,YACA,QACA,WACA,QACA,SACA,SACA,YACA,QACA,WACA,SACA,UACA,UACA,UACA,UACA,QACA,YACA,WACA,WACA,UACA,WACA,SACA,SACA,WACA,OACA,MACA,OACA,OACA,OACA,QACA,SACA,WACA,SACA,QACA,YACA,WACA,UACA,SACA,YACA,WACA,YACA,WACA,WACA,SACA,SACA,YACA,YACA,SACA,WACA,SACA,OACA,SACA,UACA,WACA,WACA,SACA,SACA,SACA,UACA,SACA,YACA,UACA,QACA,OACA,UACA,OACA,SACA,YACA,MACA,SACA,UACA,WACA,YACA,WACA,YACA,YACA,YACA,SACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,MACA,UACA,QACA,OACA,OACA,MACA,WACA,WACA,WACA,UACA,YACA,YACA,WACA,WACA,WACA,SACA,QACA,OACA,QACA,WACA,SACA,SACA,YACA,WACA,WACA,QACA,YACA,WACA,UACA,WACA,UACA,YACA,WACA,UACA,YACA,WACA,WACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,WACA,SACA,SACA,YACA,UACA,WACA,YACA,YACA,WACA,SACA,UACA,YACA,YACA,WACA,UACA,YACA,YACA,QACA,WACA,YACA,WACA,SACA,WACA,YACA,YACA,WACA,UACA,YACA,UACA,WACA,YACA,WACA,UACA,YACA,YACA,YACA,UACA,YACA,SACA,WACA,SACA,SACA,MACA,OACA,SACA,OACA,QACA,MACA,OACA,YACA,WACA,YACA,YACA,WACA,WACA,UACA,WACA,WACA,YACA,YACA,UACA,QACA,UACA,YACA,UACA,OACA,YACA,SACA,QACA,MACA,MACA,SACA,SACA,YACA,UACA,WACA,YACA,SACA,YACA,WACA,MACA,UACA,UACA,SACA,UACA,UACA,WACA,QACA,OACA,QACA,UACA,UACA,OACA,UACA,YACA,OACA,OACA,YACA,UACA,QACA,SACA,SACA,MACA,QACA,SACA,QACA,SACA,WACA,OACA,UACA,UACA,MACA,SACA,YACA,SACA,UACA,OACA,UACA,WACA,WACA,YACA,QACA,OACA,MACA,SACA,WACA,YACA,SACA,UACA,WACA,YACA,WACA,QACA,YACA,WACA,YACA,OACA,SACA,WACA,UACA,QACA,YACA,QACA,UACA,UACA,OACA,SACA,QACA,OACA,WACA,WACA,OACA,SACA,UACA,SACA,UACA,WACA,SACA,QACA,OACA,UACA,YACA,UACA,SACA,WACA,WACA,QACA,WACA,UACA,SACA,QACA,QACA,SACA,WACA,OACA,MACA,OACA,SACA,OACA,WACA,WACA,SACA,OACA,OACA,WACA,WACA,YACA,WACA,OACA,SACA,SACA,WACA,SACA,WACA,UACA,UACA,UACA,OACA,UACA,UACA,YACA,WACA,SACA,UACA,UACA,OACA,SACA,QACA,OACA,UACA,WACA,OACA,QACA,WACA,QACA,QACA,QACA,SACA,UACA,QACA,OACA,UACA,UACA,WACA,YACA,WACA,SACA,SACA,QACA,UACA,WACA,SACA,UACA,SACA,OACA,OACA,QACA,SACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,YACA,YACA,WACA,YACA,WACA,YACA,QACA,UACA,SACA,QACA,SACA,UACA,SACA,OACA,QACA,OACA,OACA,QACA,OACA,QACA,OACA,SACA,WACA,UACA,SACA,WACA,SACA,UACA,UACA,SACA,WACA,SACA,WACA,SACA,WACA,OACA,WACA,OACA,SACA,QACA,SACA,SACA,WACA,UACA,UACA,YACA,OACA,UACA,SACA,YACA,UACA,QACA,OACA,SACA,OACA,OACA,UACA,SACA,UACA,YACA,WACA,SACA,UACA,QACA,WACA,SACA,WACA,YACA,YACA,SACA,UACA,YACA,UACA,UACA,WACA,MACA,OACA,SACA,UACA,UACA,WACA,SACA,WACA,WACA,SACA,QACA,QACA,OACA,OACA,UACA,YACA,QACA,QACA,UACA,WACA,OACA,QACA,WACA,WACA,SACA,SACA,WACA,UACA,OACA,OACA,MACA,UACA,UACA,SACA,OACA,OACA,WACA,YACA,SACA,SACA,SACA,UACA,QACA,SACA,QACA,YACA,UACA,SACA,SACA,YACA,YACA,QACA,UACA,YACA,WACA,YACA,YACA,SACA,WACA,UACA,SACA,YACA,WACA,YACA,UACA,UACA,SACA,QACA,WACA,WACA,YACA,YACA,OACA,QACA,OACA,YACA,OACA,SACA,WACA,SACA,YACA,UACA,YACA,WACA,QACA,YACA,SACA,QACA,YACA,WACA,WACA,SACA,WACA,WACA,QACA,OACA,UACA,YACA,WACA,UACA,SACA,UACA,WACA,QACA,YACA,WACA,YACA,YACA,YACA,UACA,YACA,WACA,WACA,SACA,WACA,UACA,YACA,WACA,WACA,QACA,YACA,SACA,YACA,OACA,OACA,SACA,UACA,YACA,UACA,WACA,UACA,WACA,UACA,YACA,WACA,SACA,SACA,QACA,QACA,YACA,UACA,UACA,UACA,YACA,WACA,YACA,SACA,UACA,UACA,YACA,QACA,UACA,SACA,UACA,QACA,WACA,SACA,SACA,SACA,OACA,MACA,WACA,YACA,UACA,UACA,WACA,QACA,QACA,YACA,YACA,SACA,WACA,SACA,SACA,UACA,WACA,SACA,YACA,SACA,UACA,SACA,QACA,YACA,SACA,YACA,YACA,UACA,SACA,YACA,SACA,UACA,WACA,SACA,UACA,UACA,UACA,YACA,WACA,UACA,WACA,YACA,WACA,WACA,YACA,OACA,SACA,YACA,YACA,SACA,SACA,SACA,SACA,WACA,WACA,WACA,QACA,WACA,WACA,UACA,QACA,SACA,YACA,SACA,UACA,SACA,WACA,WACA,UACA,QACA,SACA,SACA,WACA,SACA,UACA,YACA,SACA,UACA,YACA,WACA,QACA,WACA,OACA,YACA,WACA,WACA,UACA,MACA,YACA,SACA,WACA,WACA,YACA,YACA,YACA,WACA,UACA,UACA,WACA,WACA,WACA,YACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,YACA,UACA,WACA,UACA,YACA,QACA,SACA,WACA,SACA,YACA,WACA,UACA,WACA,YACA,YACA,YACA,WACA,MACA,SACA,WACA,UACA,YACA,WACA,WACA,WACA,QACA,YACA,WACA,YACA,YACA,UACA,WACA,SACA,QACA,OACA,WACA,YACA,SACA,WACA,YACA,SACA,YACA,QACA,QACA,YACA,WACA,UACA,WACA,UACA,WACA,QACA,YACA,YACA,QACA,QACA,UACA,OACA,QACA,SACA,QACA,SACA,OACA,OACA,MACA,MACA,WACA,QACA,OACA,SACA,UACA,WACA,WACA,YACA,YACA,SACA,WACA,QACA,YACA,UACA,QACA,QACA,WACA,UACA,YACA,SACA,QACA,YACA,QACA,YACA,WACA,SACA,UACA,YACA,WACA,QACA,QACA,SACA,YACA,QACA,UACA,UACA,SACA,YACA,QACA,UACA,SACA,WACA,OACA,YACA,YACA,SACA,OACA,SACA,SACA,SACA,UACA,YACA,UACA,OACA,QACA,MACA,OACA,OACA,SACA,QACA,YACA,OACA,SACA,SACA,UACA,QACA,SACA,UACA,YACA,WACA,SACA,WACA,UACA,SACA,WACA,WACA,WACA,YACA,OACA,SACA,UACA,SACA,WACA,SACA,WACA,SACA,YACA,SACA,SACA,WACA,WACA,YACA,WACA,YACA,YACA,UACA,UACA,OACA,SACA,OACA,UACA,QACA,OACA,MACA,YACA,SACA,WACA,WACA,SACA,UACA,QACA,OACA,SACA,WACA,WACA,QACA,QACA,SACA,SACA,WACA,YACA,QACA,WACA,QACA,UACA,SACA,UACA,SACA,UACA,SACA,UACA,SACA,WACA,UACA,WACA,YACA,UACA,WACA,WACA,UACA,UACA,UACA,UACA,UACA,SACA,WACA,WACA,YACA,QACA,SACA,QACA,MACA,MACA,QACA,MACA,YACA,WACA,WACA,SACA,WACA,UACA,WACA,YACA,SACA,YACA,OACA,UACA,YACA,YACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,YACA,WACA,SACA,YACA,SACA,UACA,YACA,YACA,WACA,WACA,SACA,QACA,SACA,UACA,SACA,UACA,UACA,OACA,MACA,OACA,WACA,OACA,MACA,QACA,WACA,QACA,OACA,UACA,WACA,OACA,WACA,UACA,WACA,UACA,QACA,SACA,WACA,OACA,WACA,QACA,UACA,YACA,UACA,OACA,SACA,OACA,OACA,OACA,OACA,UACA,OACA,OACA,WACA,UACA,YACA,YACA,YACA,WACA,QACA,UACA,WACA,SACA,WACA,WACA,YACA,YACA,MACA,YACA,UACA,QACA,QACA,OACA,QACA,QACA,SACA,UACA,SACA,WACA,WACA,WACA,WACA,UACA,WACA,UACA,WACA,WACA,QACA,WACA,SACA,WACA,WACA,UACA,WACA,SACA,UACA,SACA,UACA,UACA,WACA,WACA,UACA,YACA,YACA,UACA,UACA,SACA,UACA,UACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,UACA,WACA,SACA,OACA,QACA,OACA,UACA,UACA,WACA,UACA,WACA,WACA,YACA,YACA,WACA,YACA,WACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,UACA,YACA,YACA,YACA,UACA,WACA,WACA,WACA,WACA,YACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,YACA,WACA,YACA,WACA,UACA,UACA,WACA,WACA,WACA,YACA,YACA,WACA,UACA,YACA,WACA,YACA,YACA,WACA,YACA,YACA,WACA,WACA,WACA,UACA,YACA,WACA,YACA,YACA,YACA,WACA,YACA,YACA,WACA,WACA,YACA,YACA,YACA,WACA,YACA,WACA,UACA,WACA,WACA,WACA,UACA,YACA,WACA,YACA,MACA,SACA,UACA,YACA,UACA,YACA,SACA,WACA,SACA,QACA,QACA,YACA,UACA,WACA,WACA,WACA,SACA,SACA,UACA,SACA,WACA,UACA,QACA,QACA,SACA,UACA,SACA,YACA,OACA,WACA,YACA,SACA,WACA,WACA,UACA,WACA,SACA,UACA,WACA,QACA,WACA,OACA,YACA,QACA,UACA,WACA,YACA,UACA,YACA,SACA,QACA,YACA,YACA,SACA,QACA,UACA,UACA,WACA,YACA,SACA,UACA,YACA,WACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,WACA,WACA,YACA,SACA,UACA,YACA,SACA,SACA,QACA,UACA,UACA,SACA,WACA,SACA,SACA,UACA,UACA,UACA,SACA,UACA,YACA,SACA,UACA,YACA,QACA,WACA,WACA,UACA,WACA,YACA,WACA,UACA,UACA,UACA,YACA,WACA,WACA,WACA,QACA,SACA,SACA,UACA,SACA,WACA,UACA,QACA,YACA,SACA,WACA,YACA,OACA,WACA,UACA,QACA,YACA,UACA,SACA,YACA,YACA,SACA,WACA,QACA,YACA,WACA,SACA,SACA,UACA,UACA,WACA,SACA,QACA,QACA,SACA,UACA,WACA,UACA,SACA,SACA,QACA,SACA,WACA,WACA,YACA,WACA,WACA,YACA,WACA,UACA,SACA,OACA,SACA,WACA,UACA,SACA,UACA,UACA,YACA,WACA,UACA,YACA,QACA,SACA,UACA,WACA,YACA,MACA,WACA,UACA,QACA,YACA,YACA,YACA,YACA,UACA,YACA,SACA,WACA,UACA,YACA,QACA,OACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,QACA,OACA,YACA,YACA,SACA,YACA,QACA,SACA,WACA,QACA,YACA,SACA,YACA,YACA,QACA,UACA,UACA,SACA,UACA,YACA,SACA,UACA,YACA,QACA,YACA,QACA,SACA,WACA,UACA,UACA,WACA,QACA,UACA,QACA,SACA,UACA,UACA,SACA,WACA,UACA,WACA,WACA,UACA,WACA,YACA,YACA,WACA,WACA,SACA,UACA,YACA,YACA,UACA,WACA,YACA,WACA,UACA,UACA,WACA,UACA,YACA,WACA,QACA,WACA,QACA,SACA,YACA,SACA,WACA,YACA,UACA,OACA,OACA,OACA,OACA,OACA,QACA,OACA,UACA,WACA,SACA,OACA,YACA,UACA,QACA,MACA,OACA,OACA,OACA,UACA,UACA,WACA,YACA,SACA,QACA,SACA,QACA,SACA,QACA,SACA,SACA,QACA,SACA,WACA,QACA,OACA,YACA,UACA,YACA,UACA,SACA,OACA,OACA,UACA,OACA,SACA,SACA,QACA,WACA,WACA,UACA,WACA,YACA,OACA,SACA,WACA,WACA,SACA,YACA,WACA,UACA,SACA,WACA,QACA,OACA,SACA,WACA,WACA,SACA,UACA,SACA,UACA,WACA,SACA,SACA,UACA,YACA,UACA,UACA,QACA,SACA,WACA,QACA,UACA,OACA,WACA,YACA,UACA,QACA,SACA,MACA,WACA,SACA,WACA,UACA,WACA,YACA,SACA,UACA,WACA,YACA,UACA,WACA,WACA,UACA,YACA,UACA,SACA,WACA,YACA,UACA,UACA,SACA,YACA,YACA,UACA,YACA,WACA,YACA,YACA,SACA,UACA,WACA,WACA,UACA,WACA,YACA,WACA,UACA,SACA,UACA,SACA,YACA,YACA,YACA,SACA,UACA,YACA,UACA,QACA,UACA,YACA,UACA,YACA,YACA,WACA,UACA,SACA,UACA,UACA,YACA,UACA,UACA,WACA,SACA,YACA,WACA,QACA,SACA,YACA,UACA,UACA,SACA,QACA,WACA,QACA,QACA,QACA,SACA,SACA,WACA,UACA,UACA,YACA,QACA,YACA,WACA,WACA,YACA,QACA,UACA,YACA,UACA,YACA,UACA,WACA,YACA,WACA,WACA,UACA,UACA,UACA,UACA,YACA,YACA,YACA,UACA,WACA,YACA,UACA,YACA,UACA,WACA,YACA,WACA,YACA,YACA,YACA,WACA,YACA,WACA,WACA,QACA,QACA,YACA,SACA,WACA,YACA,SACA,YACA,WACA,WACA,YACA,WACA,UACA,QACA,UACA,YACA,WACA,SACA,YACA,YACA,WACA,WACA,QACA,WACA,SACA,SACA,WACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,UACA,UACA,WACA,YACA,QACA,SACA,QACA,YACA,QACA,UACA,MACA,UACA,SACA,YACA,SACA,SACA,MACA,OACA,YACA,OACA,UACA,QACA,YACA,OACA,SACA,SACA,QACA,WACA,YACA,YACA,UACA,WACA,OACA,QACA,SACA,QACA,WACA,YACA,WACA,SACA,WACA,YACA,QACA,UACA,WACA,SACA,SACA,UACA,SACA,SACA,WACA,YACA,OACA,QACA,YACA,WACA,UACA,WACA,WACA,YACA,SACA,YACA,UACA,WACA,UACA,SACA,QACA,UACA,OACA,SACA,WACA,UACA,YACA,SACA,QACA,WACA,QACA,WACA,QACA,UACA,YACA,YACA,UACA,UACA,QACA,UACA,UACA,SACA,YACA,YACA,WACA,UACA,SACA,QACA,UACA,UACA,YACA,YACA,YACA,QACA,QACA,QACA,UACA,YACA,QACA,OACA,SACA,YACA,WACA,YACA,QACA,QACA,OACA,SACA,SACA,OACA,SACA,QACA,SACA,WACA,YACA,WACA,YACA,WACA,QACA,SACA,SACA,OACA,OACA,SACA,SACA,UACA,SACA,UACA,UACA,WACA,UACA,SACA,OACA,SACA,QACA,SACA,WACA,OACA,SACA,QACA,YACA,SACA,SACA,SACA,UACA,SACA,UACA,UACA,UACA,QACA,OACA,SACA,SACA,OACA,UACA,SACA,QACA,SACA,SACA,UACA,YACA,WACA,QACA,YACA,WACA,WACA,UACA,WACA,OACA,YACA,WACA,UACA,YACA,YACA,YACA,WACA,SACA,WACA,WACA,WACA,UACA,YACA,SACA,QACA,UACA,SACA,SACA,UACA,SACA,UACA,UACA,WACA,WACA,SACA,SACA,YACA,SACA,SACA,SACA,SACA,YACA,YACA,UACA,SACA,WACA,UACA,WACA,YACA,UACA,YACA,YACA,SACA,YACA,UACA,YACA,YACA,YACA,SACA,SACA,UACA,SACA,WACA,WACA,SACA,YACA,YACA,UACA,WACA,WACA,YACA,WACA,UACA,UACA,UACA,YACA,YACA,UACA,YACA,SACA,YACA,UACA,WACA,WACA,WACA,YACA,YACA,SACA,SACA,UACA,SACA,WACA,WACA,WACA,WACA,YACA,UACA,UACA,WACA,UACA,UACA,YACA,SACA,YACA,YACA,UACA,SACA,WACA,YACA,SACA,SACA,UACA,UACA,SACA,SACA,SACA,WACA,YACA,WACA,UACA,YACA,UACA,UACA,WACA,YACA,QACA,SACA,SACA,YACA,YACA,UACA,YACA,UACA,YACA,SACA,WACA,UACA,YACA,YACA,UACA,WACA,WACA,QACA,QACA,UACA,UACA,YACA,WACA,WACA,WACA,UACA,QACA,UACA,YACA,UACA,SACA,SACA,SACA,WACA,SACA,YACA,OACA,SACA,SACA,UACA,UACA,WACA,SACA,WACA,WACA,YACA,YACA,QACA,UACA,YACA,SACA,UACA,SACA,YACA,UACA,UACA,UACA,WACA,SACA,WACA,YACA,YACA,WACA,YACA,YACA,UACA,UACA,WACA,WACA,YACA,WACA,SACA,SACA,SACA,WACA,UACA,SACA,UACA,YACA,YACA,UACA,SACA,SACA,WACA,YACA,SACA,WACA,WACA,SACA,WACA,UACA,SACA,UACA,QACA,WACA,SACA,YACA,SACA,YACA,YACA,UACA,UACA,WACA,YACA,YACA,YACA,OACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,UACA,UACA,YACA,UACA,QACA,SACA,WACA,UACA,SACA,WACA,WACA,WACA,WACA,SACA,SACA,QACA,UACA,UACA,YACA,YACA,YACA,WACA,WACA,UACA,WACA,YACA,YACA,YACA,SACA,WACA,WACA,WACA,WACA,SACA,WACA,UACA,WACA,SACA,SACA,WACA,YACA,YACA,SACA,WACA,YACA,SACA,YACA,YACA,UACA,UACA,UACA,UACA,WACA,SACA,SACA,WACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YACA,YACA,QACA,SACA,UACA,SACA,UACA,UACA,WACA,QACA,SACA,UACA,UACA,UACA,SACA,UACA,YACA,WACA,WACA,UACA,YACA,YACA,SACA,YACA,SACA,WACA,UACA,YACA,UACA,UACA,WACA,YACA,SACA,SACA,WACA,YACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,UACA,QACA,SACA,UACA,OACA,SACA,SACA,WACA,UACA,UACA,WACA,SACA,OACA,SACA,UACA,OACA,UACA,QACA,QACA,UACA,SACA,OACA,OACA,QACA,UACA,OACA,UACA,WACA,WACA,UACA,SACA,WACA,UACA,OACA,SACA,OACA,UACA,UACA,QACA,QACA,YACA,WACA,YACA,YACA,UACA,WACA,SACA,UACA,QACA,UACA,OACA,QACA,WACA,SACA,WACA,SACA,SACA,WACA,YACA,UACA,WACA,YACA,WACA,QACA,QACA,QACA,OACA,OACA,SACA,SACA,OACA,SACA,UACA,UACA,WACA,WACA,WACA,YACA,UACA,YACA,UACA,UACA,QACA,SACA,QACA,SACA,SACA,UACA,SACA,UACA,OACA,SACA,SACA,MACA,SACA,OACA,SACA,WACA,UACA,QACA,YACA,UACA,SACA,UACA,QACA,OACA,SACA,UACA,QACA,OACA,OACA,OACA,MACA,UACA,WACA,YACA,SACA,YACA,SACA,YACA,UACA,WACA,QACA,UACA,SACA,YACA,YACA,SACA,WACA,UACA,OACA,OACA,UACA,QACA,OACA,QACA,OACA,QACA,SACA,WACA,SACA,SACA,QACA,SACA,QACA,OACA,WACA,SACA,UACA,YACA,YACA,OACA,SACA,WACA,WACA,WACA,YACA,SACA,UACA,WACA,UACA,YACA,UACA,SACA,WACA,UACA,UACA,YACA,UACA,YACA,YACA,WACA,QACA,WACA,YACA,OACA,QACA,UACA,YACA,QACA,UACA,YACA,UACA,OACA,YACA,QACA,UACA,WACA,QACA,YACA,YACA,UACA,WACA,WACA,YACA,QACA,QACA,SACA,UACA,QACA,UACA,SACA,QACA,YACA,MACA,UACA,SACA,UACA,WACA,QACA,UACA,WACA,UACA,WACA,OACA,UACA,UACA,WACA,QACA,YACA,SACA,WACA,YACA,SACA,QACA,UACA,YACA,WACA,QACA,YACA,SACA,WACA,YACA,SACA,WACA,YACA,WACA,UACA,UACA,YACA,QACA,QACA,WACA,QACA,QACA,UACA,QACA,SACA,YACA,YACA,SACA,YACA,SACA,UACA,QACA,WACA,SACA,YACA,UACA,WACA,WACA,SACA,WACA,WACA,WACA,YACA,YACA,QACA,UACA,UACA,SACA,WACA,SACA,WACA,YACA,SACA,SACA,UACA,YACA,WACA,WACA,UACA,UACA,WACA,QACA,QACA,WACA,YACA,SACA,UACA,WACA,YACA,YACA,SACA,UACA,SACA,YACA,SACA,UACA,WACA,WACA,QACA,SACA,WACA,WACA,WACA,SACA,WACA,UACA,UACA,UACA,SACA,WACA,YACA,YACA,WACA,OACA,UACA,WACA,WACA,YACA,YACA,UACA,WACA,YACA,SACA,UACA,OACA,SACA,WACA,YACA,YACA,YACA,YACA,WACA,QACA,YACA,SACA,SACA,SACA,WACA,YACA,SACA,SACA,YACA,UACA,WACA,QACA,UACA,UACA,SACA,WACA,UACA,UACA,SACA,WACA,QACA,YACA,YACA,UACA,UACA,WACA,SACA,QACA,SACA,UACA,YACA,UACA,SACA,QACA,QACA,WACA,UACA,YACA,UACA,QACA,QACA,UACA,UACA,QACA,UACA,WACA,QACA,SACA,QACA,UACA,QACA,YACA,UACA,UACA,UACA,YACA,QACA,SACA,OACA,QACA,QACA,QACA,QACA,UACA,SACA,WACA,SACA,SACA,UACA,WACA,YACA,SACA,UACA,SACA,UACA,QACA,UACA,YACA,UACA,QACA,OACA,QACA,YACA,QACA,QACA,WACA,UACA,WACA,WACA,QACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,UACA,YACA,SACA,YACA,SACA,QACA,QACA,UACA,WACA,WACA,SACA,WACA,UACA,UACA,QACA,UACA,YACA,YACA,WACA,QACA,SACA,WACA,WACA,YACA,WACA,SACA,SACA,SACA,SACA,SACA,UACA,WACA,YACA,SACA,QACA,SACA,WACA,UACA,UACA,YACA,OACA,QACA,OACA,MACA,UACA,WACA,UACA,SACA,SACA,SACA,OACA,UACA,WACA,WACA,SACA,SACA,UACA,OACA,YACA,QACA,OACA,OACA,SACA,YACA,SACA,YACA,SACA,WACA,SACA,UACA,YACA,SACA,UACA,SACA,WACA,WACA,UACA,SACA,UACA,MACA,QACA,SACA,SACA,SACA,UACA,WACA,YACA,UACA,UACA,QACA,UACA,WACA,YACA,UACA,UACA,OACA,SACA,SACA,WACA,SACA,UACA,YACA,WACA,WACA,UACA,SACA,SACA,SACA,OACA,QACA,QACA,QACA,SACA,UACA,UACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,SACA,YACA,UACA,WACA,WACA,QACA,UACA,WACA,WACA,UACA,QACA,YACA,UACA,OACA,UACA,UACA,WACA,YACA,SACA,QACA,OACA,UACA,QACA,WACA,YACA,UACA,WACA,QACA,UACA,OACA,OACA,QACA,QACA,QACA,SACA,QACA,YACA,SACA,SACA,UACA,QACA,SACA,YACA,UACA,WACA,YACA,WACA,WACA,QACA,WACA,YACA,SACA,OACA,OACA,SACA,WACA,SACA,SACA,UACA,WACA,SACA,OACA,YACA,UACA,SACA,OACA,OACA,QACA,QACA,MACA,QACA,UACA,YACA,UACA,WACA,UACA,QACA,WACA,QACA,YACA,QACA,QACA,QACA,UACA,QACA,OACA,SACA,YACA,YACA,UACA,QACA,UACA,SACA,UACA,SACA,SACA,WACA,YACA,SACA,WACA,QACA,UACA,UACA,OACA,QACA,QACA,SACA,QACA,QACA,SACA,WACA,QACA,QACA,UACA,WACA,SACA,UACA,SACA,QACA,UACA,UACA,QACA,QACA,WACA,YACA,YACA,UACA,YACA,WACA,WACA,YACA,YACA,YACA,WACA,UACA,WACA,WACA,YACA,WACA,QACA,OACA,QACA,UACA,SACA,WACA,QACA,YACA,YACA,WACA,YACA,UACA,WACA,UACA,WACA,SACA,YACA,YACA,WACA,YACA,SACA,QACA,YACA,UACA,WACA,YACA,UACA,WACA,QACA,OACA,SACA,YACA,SACA,SACA,QACA,SACA,QACA,QACA,UACA,SACA,UACA,UACA,WACA,UACA,WACA,QACA,SACA,WACA,YACA,UACA,YACA,WACA,YACA,UACA,WACA,SACA,WACA,WACA,SACA,WACA,WACA,WACA,UACA,WACA,UACA,UACA,WACA,SACA,SACA,YACA,SACA,SACA,UACA,QACA,WACA,SACA,QACA,QACA,QACA,WACA,SACA,SACA,WACA,YACA,UACA,UACA,WACA,SACA,UACA,SACA,QACA,SACA,SACA,SACA,QACA,QACA,QACA,SACA,YACA,YACA,SACA,SACA,SACA,SACA,SACA,OACA,OACA,OACA,UACA,WACA,WACA,QACA,SACA,WACA,SACA,WACA,WACA,YACA,SACA,WACA,YACA,YACA,WACA,UACA,YACA,QACA,WACA,WACA,SACA,SACA,SACA,YACA,UACA,YACA,YACA,SACA,QACA,UACA,QACA,QACA,UACA,WACA,WACA,YACA,UACA,WACA,YACA,YACA,YACA,WACA,WACA,UACA,UACA,QACA,QACA,QACA,SACA,WACA,YACA,SACA,UACA,WACA,WACA,YACA,UACA,QACA,WACA,UACA,YACA,UACA,WACA,SACA,WACA,UACA,WACA,UACA,YACA,UACA,UACA,WACA,QACA,QACA,SACA,YACA,SACA,UACA,SACA,UACA,YACA,UACA,QACA,YACA,WACA,WACA,YACA,QACA,QACA,QACA,YACA,WACA,YACA,YACA,UACA,OACA,SACA,UACA,OACA,SACA,UACA,YACA,YACA,WACA,YACA,UACA,OACA,QACA,UACA,UACA,YACA,SACA,WACA,YACA,QACA,YACA,YACA,UACA,WACA,UACA,WACA,WACA,WACA,SACA,WACA,SACA,UACA,YACA,OACA,SACA,QACA,QACA,QACA,QACA,QACA,YACA,YACA,YACA,UACA,QACA,QACA,SACA,QACA,QACA,YACA,YACA,WACA,UACA,UACA,WACA,YACA,WACA,UACA,YACA,YACA,QACA,QACA,QACA,WACA,UACA,WACA,YACA,WACA,WACA,YACA,YACA,WACA,WACA,YACA,WACA,UACA,QACA,QACA,SACA,SACA,SACA,WACA,YACA,QACA,SACA,UACA,SACA,WACA,SACA,SACA,SACA,SACA,WACA,SACA,WACA,SACA,SACA,WACA,YACA,WACA,YACA,SACA,YACA,UACA,WACA,QACA,SACA,QACA,UACA,UACA,UACA,WACA,SACA,QACA,UACA,UACA,SACA,QACA,UACA,WACA,SACA,UACA,YACA,QACA,QACA,UACA,UACA,WACA,QACA,SACA,WACA,SACA,UACA,YACA,UACA,WACA,SACA,QACA,YACA,YACA,YACA,UACA,WACA,WACA,WACA,YACA,UACA,WACA,SACA,WACA,UACA,YACA,WACA,YACA,YACA,WACA,SACA,UACA,WACA,YACA,YACA,YACA,UACA,YACA,YACA,UACA,UACA,WACA,YACA,YACA,UACA,WACA,SACA,WACA,WACA,UACA,SACA,SACA,YACA,UACA,YACA,OACA,UACA,SACA,SACA,OACA,WACA,YACA,UACA,SACA,YACA,WACA,QACA,UACA,QACA,WACA,WACA,WACA,SACA,UACA,UACA,UACA,SACA,OACA,SACA,WACA,YACA,SACA,YACA,YACA,YACA,WACA,WACA,WACA,WACA,YACA,YACA,SACA,WACA,SACA,UACA,YACA,UACA,YACA,SACA,WACA,UACA,YACA,YACA,SACA,UACA,WACA,UACA,UACA,UACA,UACA,WACA,UACA,YACA,YACA,WACA,SACA,WACA,UACA,YACA,WACA,QACA,UACA,UACA,WACA,YACA,YACA,OACA,YACA,UACA,YACA,OACA,WACA,QACA,OACA,QACA,QACA,QACA,QACA,QACA,SACA,UACA,UACA,YACA,YACA,UACA,WACA,WACA,WACA,UACA,WACA,QACA,QACA,SACA,SACA,UACA,UACA,QACA,SACA,QACA,QACA,QACA,WACA,WACA,YACA,WACA,UACA,UACA,WACA,UACA,WACA,WACA,YACA,YACA,QACA,SACA,UACA,UACA,QACA,WACA,SACA,SACA,YACA,UACA,YACA,UACA,SACA,WACA,QACA,OACA,UACA,WACA,UACA,UACA,WACA,UACA,YACA,MACA,UACA,OACA,SACA,SACA,WACA,OACA,QACA,SACA,WACA,QACA,SACA,OACA,SACA,UACA,UACA,UACA,WACA,UACA,WACA,WACA,UACA,UACA,OACA,YACA,SACA,SACA,UACA,QACA,SACA,SACA,WACA,OACA,SACA,QACA,YACA,UACA,QACA,WACA,SACA,WACA,SACA,QACA,SACA,QACA,OACA,OACA,UACA,YACA,OACA,QACA,QACA,WACA,WACA,UACA,UACA,YACA,QACA,SACA,WACA,UACA,UACA,YACA,WACA,WACA,QACA,UACA,QACA,QACA,SACA,UACA,WACA,WACA,YACA,YACA,UACA,WACA,SACA,QACA,QACA,QACA,WACA,SACA,SACA,WACA,YACA,SACA,SACA,SACA,WACA,SACA,YACA,SACA,WACA,YACA,YACA,UACA,WACA,OACA,QACA,WACA,WACA,OACA,YACA,UACA,QACA,QACA,QACA,SACA,WACA,UACA,OACA,QACA,UACA,UACA,YACA,YACA,WACA,UACA,OACA,SACA,OACA,OACA,QACA,SACA,UACA,YACA,UACA,SACA,WACA,SACA,SACA,WACA,SACA,WACA,OACA,UACA,OACA,SACA,SACA,SACA,UACA,YACA,SACA,SACA,SACA,QACA,UACA,QACA,WACA,UACA,QACA,UACA,YACA,UACA,UACA,WACA,YACA,QACA,UACA,SACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,WACA,UACA,YACA,UACA,UACA,WACA,QACA,QACA,SACA,WACA,WACA,OACA,YACA,WACA,YACA,UACA,QACA,SACA,OACA,UACA,UACA,YACA,SACA,SACA,QACA,WACA,SACA,QACA,WACA,YACA,WACA,UACA,YACA,UACA,UACA,WACA,WACA,WACA,UACA,YACA,SACA,WACA,WACA,UACA,QACA,SACA,YACA,WACA,UACA,YACA,UACA,WACA,WACA,UACA,OACA,SACA,WACA,UACA,UACA,UACA,WACA,WACA,SACA,WACA,UACA,UACA,YACA,SACA,WACA,QACA,SACA,QACA,QACA,UACA,QACA,SACA,YACA,UACA,WACA,WACA,YACA,QACA,MACA,QACA,WACA,UACA,UACA,UACA,MACA,UACA,QACA,SACA,WACA,QACA,SACA,UACA,WACA,WACA,YACA,OACA,SACA,UACA,SACA,SACA,OACA,QACA,OACA,MACA,QACA,QACA,QACA,WACA,SACA,YACA,SACA,QACA,QACA,UACA,YACA,OACA,WACA,QACA,QACA,QACA,YACA,UACA,UACA,WACA,SACA,SACA,UACA,SACA,QACA,OACA,QACA,WACA,YACA,QACA,YACA,WACA,SACA,YACA,SACA,YACA,YACA,WACA,UACA,YACA,YACA,YACA,YACA,YACA,UACA,UACA,UACA,YACA,WACA,SACA,SACA,WACA,WACA,YACA,YACA,UACA,WACA,YACA,UACA,YACA,WACA,WACA,YACA,WACA,WACA,WACA,UACA,WACA,WACA,YACA,UACA,YACA,YACA,UACA,UACA,SACA,YACA,YACA,UACA,QACA,SACA,UACA,SACA,YACA,WACA,WACA,YACA,WACA,WACA,WACA,SACA,YACA,YACA,WACA,UACA,UACA,UACA,UACA,YACA,UACA,YACA,WACA,QACA,YACA,UACA,YACA,SACA,YACA,YACA,WACA,WACA,YACA,YACA,WACA,WACA,YACA,WACA,YACA,YACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,YACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,UACA,SACA,YACA,UACA,YACA,WACA,UACA,WACA,UACA,SACA,WACA,SACA,YACA,UACA,WACA,YACA,WACA,YACA,WACA,UACA,YACA,SACA,YACA,YACA,YACA,SACA,WACA,UACA,YACA,UACA,WACA,WACA,YACA,YACA,UACA,WACA,YACA,SACA,YACA,WACA,WACA,YACA,WACA,WACA,WACA,WACA,SACA,UACA,WACA,YACA,YACA,WACA,YACA,UACA,WACA,YACA,UACA,YACA,WACA,YACA,WACA,UACA,YACA,SACA,SACA,UACA,WACA,UACA,UACA,YACA,YACA,QACA,YACA,YACA,YACA,YACA,YACA,QACA,WACA,YACA,SACA,WACA,OACA,YACA,WACA,WACA,UACA,SACA,YACA,YACA,UACA,UACA,UACA,WACA,WACA,YACA,UACA,SACA,YACA,YACA,YACA,YACA,UACA,WACA,WACA,QACA,YACA,WACA,WACA,WACA,YACA,YACA,UACA,WACA,WACA,YACA,UACA,SACA,YACA,WACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,UACA,WACA,UACA,YACA,UACA,WACA,YACA,UACA,YACA,WACA,UACA,YACA,YACA,WACA,YACA,SACA,WACA,SACA,YACA,WACA,UACA,WACA,WACA,YACA,WACA,YACA,YACA,YACA,YACA,WACA,SACA,YACA,WACA,UACA,WACA,UACA,YACA,YACA,SACA,SACA,YACA,YACA,YACA,WACA,SACA,YACA,YACA,WACA,SACA,YACA,YACA,UACA,SACA,YACA,SACA,WACA,WACA,SACA,SACA,WACA,UACA,WACA,YACA,YACA,UACA,WACA,WACA,YACA,WACA,WACA,SACA,WACA,YACA,SACA,YACA,YACA,WACA,WACA,WACA,YACA,YACA,YACA,WACA,YACA,WACA,WACA,SACA,WACA,WACA,SACA,WACA,WACA,YACA,WACA,WACA,YACA,YACA,WACA,YACA,YACA,WACA,YACA,UACA,YACA,YACA,WACA,WACA,WACA,SACA,UACA,WACA,YACA,UACA,UACA,YACA,WACA,UACA,WACA,WACA,SACA,QACA,QACA,UACA,WACA,WACA,YACA,SACA,YACA,YACA,YACA,YACA,UACA,YACA,SACA,UACA,WACA,UACA,UACA,WACA,SACA,UACA,WACA,WACA,YACA,WACA,YACA,WACA,WACA,YACA,UACA,WACA,YACA,SACA,WACA,YACA,UACA,QACA,YACA,SACA,WACA,YACA,SACA,UACA,YACA,YACA,YACA,SACA,YACA,WACA,UACA,UACA,YACA,YACA,QACA,SACA,UACA,WACA,YACA,SACA,UACA,UACA,WACA,SACA,SACA,SACA,WACA,YACA,SACA,OACA,QACA,UACA,WACA,UACA,SACA,SACA,UACA,SACA,UACA,WACA,UACA,UACA,WACA,WACA,UACA,SACA,UACA,SACA,WACA,SACA,SACA,UACA,QACA,SACA,WACA,UACA,SACA,SACA,YACA,UACA,SACA,QACA,UACA,OACA,YACA,OACA,QACA,QACA,UACA,UACA,UACA,SACA,SACA,QACA,UACA,SACA,SACA,WACA,WACA,WACA,YACA,UACA,YACA,UACA,QACA,SACA,SACA,YACA,QACA,UACA,SACA,SACA,WACA,UACA,YACA,WACA,WACA,SACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,WACA,SACA,WACA,OACA,QACA,SACA,YACA,SACA,WACA,SACA,WACA,UACA,SACA,YACA,WACA,WACA,YACA,UACA,QACA,QACA,YACA,WACA,UACA,UACA,SACA,QACA,UACA,SACA,YACA,WACA,UACA,OACA,SACA,OACA,UACA,OACA,WACA,YACA,SACA,QACA,OACA,WACA,UACA,QACA,WACA,SACA,UACA,WACA,YACA,WACA,UACA,UACA,YACA,WACA,UACA,UACA,YACA,WACA,SACA,SACA,QACA,QACA,UACA,WACA,QACA,OACA,YACA,UACA,WACA,UACA,UACA,SACA,WACA,UACA,QACA,QACA,WACA,WACA,UACA,WACA,YACA,UACA,YACA,QACA,WACA,WACA,UACA,WACA,QACA,UACA,OACA,WACA,SACA,UACA,UACA,QACA,SACA,UACA,QACA,QACA,SACA,YACA,MACA,QACA,SACA,QACA,QACA,QACA,SACA,QACA,OACA,SACA,OACA,UACA,SACA,SACA,QACA,OACA,UACA,SACA,UACA,SACA,WACA,YACA,YACA,WACA,YACA,UACA,SACA,SACA,YACA,UACA,UACA,WACA,YACA,UACA,OACA,UACA,QACA,QACA,WACA,SACA,OACA,WACA,SACA,OACA,QACA,QACA,WACA,QACA,YACA,SACA,QACA,WACA,UACA,QACA,WACA,UACA,WACA,SACA,MACA,OACA,SACA,QACA,SACA,QACA,QACA,YACA,UACA,OACA,OACA,YACA,WACA,UACA,SACA,WACA,WACA,WACA,WACA,SACA,WACA,SACA,YACA,UACA,SACA,YACA,OACA,OACA,QACA,UACA,OACA,OACA,UACA,SACA,WACA,SACA,OACA,QACA,WACA,SACA,OACA,SACA,OACA,OACA,WACA,QACA,UACA,SACA,SACA,WACA,SACA,MACA,OACA,YACA,YACA,YACA,YACA,YACA,UACA,OACA,OACA,SACA,OACA,QACA,OACA,OACA,UACA,UACA,YACA,QACA,YACA,YACA,QACA,QACA,QACA,MACA,UACA,QACA,SACA,WACA,UACA,WACA,SACA,UACA,UACA,UACA,UACA,QACA,UACA,UACA,YACA,UACA,WACA,UACA,YACA,UACA,OACA,QACA,QACA,MACA,UACA,UACA,OACA,OACA,OACA,WACA,WACA,SACA,WACA,QACA,UACA,OACA,MACA,YACA,UACA,QACA,MACA,SACA,QACA,QACA,OACA,SACA,SACA,OACA,QACA,MACA,UACA,QACA,MACA,WACA,OACA,YACA,QACA,YACA,UACA,UACA,QACA,OACA,MACA,SACA,SACA,OACA,SACA,YACA,YACA,UACA,QCjmPK,MAAMC,GAIXtvE,YAAYsZ,EAAkBisC,GAC5BrlD,KAAKoZ,SAAWA,EAChBpZ,KAAKqlD,KAAOA,CACd,E,2SCKF,MAAMgqB,GAA2C,CAC/C3uE,OAAQ,GACR4uE,WAAW,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,EAAO04D,G,KAG/C,C,2SEpBO,SAAS+lB,GACdz+E,EACA04D,GAEA,OAAOF,GACLx4D,EACA,4BACA04D,GACA,IAAW,mCACT,WAAItzB,SACIszC,GAAqB14E,EAAO04D,SAC5B0W,GAAqBpvE,EAAO04D,SAC5BoW,GAAoB9uE,EAAO04D,G,KAGzC,CC/Be,MAAMgmB,GAWnBxpH,YAAYypH,GAVZ,KAAAC,OAAuB,GACvB,KAAAD,aAAe,GACf,KAAAE,WAAuC,CAAC,EACxC,KAAAjyG,QAAiC,CAAC,EAClC,KAAA+yD,SAAgB,CAAC,EACjB,KAAAm/C,WAAkB,KAMhB1pH,KAAKupH,aAAeA,CACtB,EC3BK,MAAMI,IACK,GAAAC,mBAA+B,CAE7C,WACA,YACA,QACA,gBACA,SACA,iBACA,SACA,UACA,cACA,WAEA,eACA,gBACA,gBACA,iBACA,aACA,eAGc,GAAAC,eAA2B,CACzC,OACA,MACA,MACA,WACA,UACA,UACA,YACA,iBAGc,GAAAC,wBAAoC,CAClD,kBACA,UACA,eACA,UAGc,GAAAC,sBAAkC,CAChD,QACA,WACA,SACA,OACA,SACA,QACA,QACA,UAIG,MAAMC,IACK,GAAAC,eAA2B,CACzC,mBACA,cACA,WACA,SACA,YACA,cACA,aACA,YACA,gBAGc,GAAAC,uBAAmC,IAC9CF,GAA4BC,eAC/B,eAGc,GAAAE,qBAAiC,CAC/C,UACA,YACA,kBACA,aACA,OACA,OAGc,GAAAC,0BAAsC,CACpD,UACA,YACA,kBACA,aACA,UAGc,GAAAC,qBAAiC,CAC/C,YACA,SACA,cACA,WACA,SACA,KACA,QACA,UACA,cACA,eACA,QACA,eACA,YACA,UAGc,GAAAC,0BAAsC,CACpD,YACA,SACA,cACA,WACA,QACA,UACA,eACA,YACA,UAGc,GAAAC,qBAAiC,CAC/C,SACA,WACA,gBACA,kBACA,QACA,UACA,cACA,cACA,WACA,aACA,SACA,QACA,UACA,QACA,UACA,kBACA,0BACA,mBAGc,GAAAC,0BAAsC,CACpD,QACA,UACA,QACA,UACA,kBACA,2BAGc,GAAAC,sBAAkC,CAChD,YACA,eACA,WACA,aACA,QACA,UACA,SACA,cACA,YACA,wBACA,mBACA,QACA,OACA,UACA,SACA,cACA,YACA,SACA,QACA,eACA,YACA,eACA,YACA,oBACA,iBACA,oBACA,iBACA,gBACA,kBACA,aACA,eACA,0BACA,wBACA,qBACA,UACA,cACA,cACA,eACA,UAGc,GAAAC,qBAAiC,CAC/C,WACA,cACA,UACA,YACA,QACA,UACA,SACA,cACA,YACA,uBACA,kBACA,QACA,OACA,UACA,SACA,cACA,YACA,SACA,QACA,UACA,YACA,gBACA,cACA,cACA,YACA,cACA,YACA,mBACA,iBACA,mBACA,iBACA,cACA,gBACA,iBACA,mBACA,yBACA,uBACA,cACA,qBACA,uBACA,gBACA,gBACA,UAGc,GAAAC,cAA0B,CACxC,MACA,MACA,OACA,SACA,SACA,WACA,WACA,MACA,MACA,OACA,MACA,OACA,UACA,YACA,gBACA,gBACA,SACA,aACA,oBACA,MACA,OAGc,GAAAC,oBAAgC,CAC9C,UACA,YACA,aACA,WACA,WAKc,GAAAC,UAAY,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,MAC3C,GAAAC,cAAgB,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,MAC/C,GAAAC,aAAe,CAAC,OAAQ,OAAQ,OAAQ,KAAM,OAAQ,QAGjE,MAAMC,IACK,GAAAC,mBAA+B,CAC7C,mBACA,cACA,WACA,SACA,YACA,cACA,aACA,YACA,gBAGc,GAAAC,mBAA+B,CAAC,OAAQ,YAAa,aAErD,GAAAC,wBAAoC,CAAC,YAAa,aAElD,GAAAC,gBAA4B,CAC1C,mBACA,SACA,QAEA,UAGc,GAAAC,oBAAgC,CAE9C,SACA,aACA,aACA,UAEA,WAGc,GAAAC,qBAAiC,CAC/C,SACA,cACA,kBACA,iBACA,WACA,YAGc,GAAAC,mBAA+B,CAE7C,SACA,YACA,SACA,UACA,cACA,WACA,SAEA,WACA,gBAGc,GAAAC,gBAA4B,CAAC,SAAU,iBAEvC,GAAAC,kBAA8B,CAC5C,UACA,iBACA,OACA,SACA,eACA,eACA,YACA,YAEA,UACA,WAGc,GAAAC,uBAAmC,CACjD,eACA,eACA,YACA,aAGc,GAAAC,mBAA+B,CAC7C,YACA,iBACA,SACA,YAGc,GAAAC,mBAA+B,CAC7C,YACA,iBACA,SACA,YAGc,GAAAC,mBAA+B,CAC7C,YACA,iBACA,SACA,YAGc,GAAAC,qBAAiC,CAC/C,SACA,MACA,OACA,WACA,cACA,YACA,cACA,iBACA,eACA,sBACA,mBAEA,MACA,gBAGc,GAAAC,eAA2B,CACzC,OACA,OACA,kBACA,eACA,eAEA,MACA,QACA,WAGc,GAAAC,gBAA4B,CAC1C,QACA,WACA,WACA,kBACA,gBACA,mBAEA,cAGc,GAAAC,kBAA8B,CAC5C,UACA,eACA,eACA,kBACA,uBACA,uBAEA,QAGc,GAAAC,gBAA4B,CAC1C,QACA,SACA,eACA,MACA,YACA,eAEA,UACA,gBACA,QACA,SAGc,GAAAC,mBAA+B,CAAC,YAAa,UAAW,eAExD,GAAAC,kBAA8B,CAC5C,UACA,eACA,eACA,oBAEA,SAGc,GAAAC,aAAyC,CACvDC,YAAa,KACb,gBAAiB,KACjBC,QAAS,KACTC,QAAS,KACT,iBAAkB,KAClBC,QAAS,KACTC,OAAQ,KACRC,SAAU,KACVC,WAAY,KACZ,sBAAuB,KACvBC,UAAW,KACXC,QAAS,KACTC,MAAO,KACPC,UAAW,KACXC,QAAS,KACTC,WAAY,KACZC,QAAS,KACTC,QAAS,KACTC,WAAY,KACZC,SAAU,KACVC,QAAS,KACTC,QAAS,KACTC,OAAQ,KACRC,MAAO,KACPC,QAAS,KACTC,OAAQ,KACRC,QAAS,KACT,yBAA0B,KAC1BC,SAAU,KACV,gBAAiB,KACjBC,OAAQ,KACR,iCAAkC,KAClC,oBAAqB,KACrBC,SAAU,KACV,eAAgB,KAChBC,QAAS,KACTC,SAAU,KACVC,SAAU,KACVC,OAAQ,KACR,aAAc,KACd,iBAAkB,KAClB,2BAA4B,KAC5BC,KAAM,KACNC,MAAO,KACPC,MAAO,KACP,mBAAoB,KACpB,0BAA2B,KAC3BC,SAAU,KACVC,QAAS,KACTC,MAAO,KACP,6BAA8B,KAC9B,eAAgB,KAChB,aAAc,KACd,gBAAiB,KACjBC,QAAS,KACTC,KAAM,KACNC,OAAQ,KACR,iBAAkB,KAClBC,QAAS,KACTC,SAAU,KACVC,SAAU,KACV,qBAAsB,KACtBC,QAAS,KACTC,MAAO,KACP,cAAe,KACf,oBAAqB,KACrBC,QAAS,KACTC,QAAS,KACTC,SAAU,KACV,mBAAoB,KACpB,gBAAiB,KACjBC,KAAM,KACNC,QAAS,KACTC,OAAQ,KACR,gBAAiB,KACjB,mBAAoB,KACpB,8BAA+B,KAC/BC,MAAO,KACPC,OAAQ,KACRC,QAAS,KACTC,QAAS,KACTC,MAAO,KACPC,UAAW,KACXC,OAAQ,KACRC,UAAW,KACXC,QAAS,KACTC,WAAY,KACZC,KAAM,KACNC,UAAW,KACXC,SAAU,KACVC,OAAQ,KACR,gBAAiB,KACjBC,OAAQ,KACRC,MAAO,KACP,kCAAmC,KACnC,gCAAiC,KACjCC,SAAU,KACV,YAAa,KACbC,QAAS,KACTC,QAAS,KACTC,MAAO,KACPC,UAAW,KACX,4BAA6B,KAC7BC,KAAM,KACNC,QAAS,KACT,cAAe,KACfC,OAAQ,KACRC,MAAO,KACPC,QAAS,KACTC,MAAO,KACPC,OAAQ,KACRC,OAAQ,KACRC,WAAY,KACZC,MAAO,KACPC,SAAU,KACV,oBAAqB,KACrB,cAAe,KACf,wCAAyC,KACzC,cAAe,KACfC,OAAQ,KACRC,WAAY,KACZ,mCAAoC,KACpCC,OAAQ,KACRC,QAAS,KACTC,QAAS,KACTC,QAAS,KACT,yBAA0B,KAC1BC,cAAe,KACfC,UAAW,KACXC,WAAY,KACZC,MAAO,KACPC,UAAW,KACXC,WAAY,KACZC,OAAQ,KACRC,SAAU,KACVC,SAAU,KACVC,KAAM,KACNC,MAAO,KACP,mBAAoB,KACpBC,WAAY,KACZC,WAAY,KACZC,UAAW,KACXC,QAAS,KACTC,OAAQ,KACR,kCAAmC,KACnCC,QAAS,KACTC,OAAQ,KACRC,SAAU,KACVC,WAAY,KACZC,WAAY,KACZC,QAAS,KACTC,WAAY,KACZC,QAAS,KACTC,QAAS,KACTC,MAAO,KACPC,MAAO,KACPC,YAAa,KACb,uBAAwB,KACxB,gBAAiB,KACjB,cAAe,KACfC,UAAW,KACXC,MAAO,KACPC,QAAS,KACTC,KAAM,KACN,iBAAkB,KAClB,2BAA4B,KAC5BC,OAAQ,KACRC,KAAM,KACNC,SAAU,KACVC,MAAO,KACP,kCAAmC,KACnCC,OAAQ,KACR,mBAAoB,KACpBC,SAAU,KACVC,KAAM,KACNC,YAAa,KACbC,SAAU,KACVC,OAAQ,KACRC,SAAU,KACV,cAAe,KACfC,MAAO,KACPC,QAAS,KACTC,QAAS,KACT,qBAAsB,KACtBC,OAAQ,KACR,mBAAoB,KACpB,eAAgB,KAChB,wBAAyB,KACzB,cAAe,KACf,eAAgB,KAChB,4BAA6B,KAC7B,+BAAgC,KAChCC,MAAO,KACP,aAAc,KACd,wBAAyB,KACzB,eAAgB,KAChBC,QAAS,KACTC,OAAQ,KACRC,WAAY,KACZ,eAAgB,KAChBC,UAAW,KACXC,SAAU,KACVC,SAAU,KACV,kBAAmB,KACnBC,QAAS,KACT,eAAgB,KAChB,kCAAmC,KACnCC,MAAO,KACP,YAAa,KACbC,MAAO,KACPC,SAAU,KACV,yBAA0B,KAC1BC,UAAW,KACXC,OAAQ,KACRC,YAAa,KACb,uBAAwB,KACxBC,OAAQ,KACRC,WAAY,KACZC,SAAU,KACVC,SAAU,KACV,cAAe,KACfC,KAAM,KACNC,QAAS,KACTC,MAAO,KACP,sBAAuB,KACvBC,QAAS,KACTC,OAAQ,KACRC,aAAc,KACd,2BAA4B,KAC5BC,OAAQ,KACRC,OAAQ,KACRC,QAAS,KACT,uBAAwB,KACxB,iBAAkB,KAClB,gBAAiB,KACjB,iCAAkC,KAClCC,QAAS,KACTC,WAAY,KACZC,QAAS,KACTC,UAAW,KACXC,QAAS,KACT,0BAA2B,KAC3B,uBAAwB,KACxB,oBAAqB,KACrB,iBAAkB,KAClBC,MAAO,KACPC,OAAQ,KACRC,SAAU,MAGI,GAAAC,UAAsC,CACpDC,QAAS,KACTC,OAAQ,KACR,iBAAkB,KAClBC,QAAS,KACTC,SAAU,KACVC,WAAY,KACZC,SAAU,KACVC,YAAa,KACbC,SAAU,KACV,uBAAwB,KACxB,iCAAkC,KAClCC,QAAS,KACT/H,QAAS,KACTQ,KAAM,KACNwH,OAAQ,KACRC,MAAO,KACPC,SAAU,KACVC,QAAS,KACTC,KAAM,KACNC,OAAQ,KACRC,SAAU,KACVC,UAAW,KACXC,MAAO,KACP,mBAAoB,KACpBC,SAAU,KACVC,cAAe,KACfC,SAAU,KACVC,UAAW,KACXC,YAAa,KACbC,SAAU,KACVC,QAAS,KACTC,SAAU,KACVC,OAAQ,KACR,gBAAiB,KACjB,aAAc,KACd,aAAc,KACd,WAAY,KACZ,iBAAkB,KAClB,eAAgB,KAChB,2BAA4B,KAC5BC,KAAM,KACNC,SAAU,KACVC,OAAQ,KACR7E,MAAO,KACP8E,aAAc,KACd,cAAe,KACf,eAAgB,KAChB,iBAAkB,KAClB,eAAgB,KAChBC,UAAW,KACXC,MAAO,KACPC,KAAM,KACNC,QAAS,KACT,iBAAkB,KAClBC,SAAU,KACVC,WAAY,KACZ,gBAAiB,KACjBC,UAAW,KACXC,QAAS,MAGK,GAAAC,aAAyC,CACvDC,QAAS,KACT,mBAAoB,KACpBC,SAAU,KACV,gBAAiB,KACjB,4BAA6B,KAC7B,cAAe,KACfC,QAAS,KACT,uBAAwB,KACxBC,OAAQ,KACRC,aAAc,M,2SC7tBH,MAAMC,GACnBj6H,YACUoiE,EACA32D,EACAyuH,EACAC,EACA14G,EACAk7D,EACA7P,GANA,KAAA1K,cAAAA,EACA,KAAA32D,aAAAA,EACA,KAAAyuH,YAAAA,EACA,KAAAC,uBAAAA,EACA,KAAA14G,WAAAA,EACA,KAAAk7D,gBAAAA,EACA,KAAA7P,wBAAAA,CACP,CAEH2yB,2BAA2B26B,GACzB,MAAMC,EAAuB,GAEvBC,EAAiBL,GAAgBM,mBAAmBH,GAAa,GAAM,GAAM,GAAO,GAK1F,GAA8B,IAA1BE,EAAe15H,OACjB,OAAOy5H,EAOT,MAAMG,EAA4BF,EAAe9yH,QAAQizH,QAAmBl6H,IAAZk6H,EAAGC,OAC7DC,EAAWtzH,OAAOE,KAAK6yH,EAAY56B,OACnCo7B,EAAYD,EAAS/5H,OAI3B,GAA8B,IAA1B05H,EAAe15H,QAA6B,GAAbg6H,GAAkBJ,EAA0B55H,OAAS,EAAG,CAEzF,MAAMi6H,EAAcF,EAAS,GAG3BL,EAAe9yH,QAAQizH,GAAmB,OAAZA,EAAGC,MAAiBD,EAAGC,OAASG,IAAaj6H,OAAS,GAKpF45H,EAA0Bj0H,SAASk0H,IACjCA,EAAGC,KAAOG,CAAW,G,CAK3B,IAAK,MAAMC,KAAWV,EAAY56B,MAAO,CAEvC,IAAK46B,EAAY56B,MAAM1xF,eAAegtH,GACpC,SAGF,MAAMC,EAAqBT,EAAe9yH,QAAQizH,GAAOK,IAAYL,EAAGC,OACxE,GAAIK,EAAmBn6H,OAAS,EAAG,CACjC,IAAIo6H,EAAK96H,KAAK+6H,kBAAkBb,EAAaW,EAAmB,IAAI,GAAO,GAAO,GACxE,MAANC,IAEFA,EAAK96H,KAAK+6H,kBAAkBb,EAAaW,EAAmB,IAAI,GAAM,GAAM,IAE9EV,EAASrsH,KAAK,CACZ0sH,KAAMN,EAAY56B,MAAMs7B,GACxBxhH,SAAUyhH,EAAmB,GAC7B1hH,SAAU2hH,EACVE,UAAWH,G,EAKjB,OAAOV,CACT,CAOMc,WAAWzjH,G,gDACf,MAAM2+E,EAAM3+E,EAAQ2+E,IACpB,KAAKA,GAAQ3+E,EAAQgrD,QAAWhrD,EAAQ0iH,aAAgB1iH,EAAQ0iH,YAAYx5H,QAC1E,MAAM,IAAIN,MAAM,yBAGlB,IAAI86H,EAA+B,KAEnC,MAAMC,QAAyBn7H,KAAKuL,aAAai8F,sBAC3C9hE,EAAgE,QAA7C,QAAM1lC,KAAKuL,aAAay0E,4BAAqB,QAAIpvE,GAAamF,OAEvF,IAAIqlH,GAAc,EAoElB,SAnEMlyH,QAAQ4N,IACZU,EAAQ0iH,YAAYl5H,KAAWq6H,GAAO,mCAEpC,GAAIA,EAAGllC,IAAIjxF,KAAOixF,EAAIjxF,IAAMm2H,EAAGllC,IAAIvwF,MAAQuwF,EAAIvwF,IAC7C,OAGF,MAAM01H,QAAmBt7H,KAAKu7H,mBAAmBF,EAAGx1E,QAAS,CAC3D21E,qBAAsBhkH,EAAQgkH,uBAAwB,EACtDC,gBAAiBjkH,EAAQikH,kBAAmB,EAC5CC,kBAAmBlkH,EAAQkkH,oBAAqB,EAChDC,gBAAiBnkH,EAAQmkH,kBAAmB,EAC5CC,kBAAmBpkH,EAAQokH,oBAAqB,EAChDp5D,OAAQhrD,EAAQgrD,OAChBq5D,OAAQ1lC,EAAIvwF,IACZ8/B,gBAAiBA,IAGd41F,GAAeA,EAAW9R,QAAW8R,EAAW9R,OAAO9oH,UAK1D46H,EAAWQ,iBACqBz7H,MAAhCmX,EAAQukH,sBACPvkH,EAAQukH,sBAOXT,EAAW7R,WAAWuS,yBAA2B,GAEjDZ,GAAc,EACT5jH,EAAQykH,cACXj8H,KAAKkiE,cAAcse,mBAAmBhpE,EAAQgrD,OAAOt9D,IAGvDksF,GAAWgF,eACTD,EACA,CACEjF,QAAS,WACToqC,WAAYA,EACZ11H,IAAKuwF,EAAIvwF,KAEX,CAAEs2H,QAASb,EAAGa,UAId1kH,EAAQgrD,OAAO/3D,OAASmyB,GAAWoD,QACnCk7F,GACC1jH,EAAQgrD,OAAOviC,MAAMlB,OACpBo8F,GAAqB3jH,EAAQgrD,OAAO7iC,uBAKxCu7F,EAAcl7H,KAAKuL,aAAai/F,yBAAyB7zF,MAAMk0C,GACxDA,EAGE,KAFE7qD,KAAKg6H,YAAYpvD,QAAQpzD,EAAQgrD,OAAOviC,MAAMlB,UAjCvD/+B,KAAKuhB,WAAW0Y,KAAK,kEAqCzB,OAGEmhG,EAEF,OADAp7H,KAAKi6H,uBAAuB73D,QAAQjzD,EAAUgtH,wBAAyB3kH,EAAQgrD,OAAOt9D,IACnE,MAAfg2H,QACWA,EAEN,KAGT,MAAM,IAAI96H,MAAM,qB,IAWdg8H,gBACJlC,EACA/jC,EACAkmC,G,kDAEA,IAAI75D,EACJ,GAAI65D,EACF75D,QAAexiE,KAAKkiE,cAAcoe,oBAAoB6V,EAAIvwF,SACrD,CACL,MAAM02H,QAA2Bt8H,KAAKkiE,cAAcme,sBAAsB8V,EAAIvwF,KAAK,GAKjF48D,EAHA85D,GACA1yH,KAAKC,MAAM+oB,WAAsD,QAA1C,EAA4B,QAA5B,EAAA0pG,EAAmBr1F,iBAAS,eAAEq0C,oBAAY,eAAE1oD,WAAY,IAEtE0pG,QAEMt8H,KAAKkiE,cAAcie,kBAAkBgW,EAAIvwF,KAAK,E,CAIjE,GAAc,MAAV48D,GAAkBA,EAAOziC,WAAalD,GAAmBne,KAC3D,OAAO,KAGT,MAAM69G,QAAiBv8H,KAAKi7H,WAAW,CACrC9kC,IAAKA,EACL3zB,OAAQA,EACR03D,YAAaA,EACb+B,cAAeI,EACfb,sBAAuBa,EACvBZ,iBAAkBY,EAClBX,mBAAoBW,EACpBV,gBAAiBU,EACjBN,qBAAsBM,EACtBT,kBAAmBS,IAQrB,OAJIA,GACFr8H,KAAKkiE,cAAcqe,0BAA0B4V,EAAIvwF,KAG5C22H,C,IASHC,oBAAoBtC,EAA2BmC,G,0CACnD,MAAMlmC,QAAYn2F,KAAKy8H,eACvB,GAAKtmC,GAAQA,EAAIvwF,IAIjB,aAAa5F,KAAKo8H,gBAAgBlC,EAAa/jC,EAAKkmC,EACtD,G,CAIcI,e,0CACZ,MAAMtmC,QAAY/E,GAAWuO,0BAC7B,IAAKxJ,EACH,MAAM,IAAI/1F,MAAM,iBAGlB,OAAO+1F,CACT,G,CAEcolC,mBACZrB,EACA1iH,G,0CAEA,IAAK0iH,IAAgB1iH,EAAQgrD,OAC3B,OAAO,KAGT,IAAI84D,EAAa,IAAIhS,GAAe4Q,EAAY3Q,cAChD,MAAMmT,EAAgD,CAAC,EACjDn8F,EAAS/oB,EAAQgrD,OAAOjiC,OAE9B,GAAIA,GAAUA,EAAO7/B,OAAQ,CAC3B,MAAMi8H,EAAuB,GAE7Bp8F,EAAOl6B,SAASm6B,IACVu5F,GAAgB6C,SAASp8F,EAAE9+B,OAC7Bi7H,EAAW7uH,KAAK0yB,EAAE9+B,KAAKjB,c,IAI3By5H,EAAY35F,OAAOl6B,SAASyiC,IAE1B,GAAI4zF,EAAa9uH,eAAek7B,EAAM+zF,MACpC,OAGF,IAAK/zF,EAAMg0F,UAA8B,SAAlBh0F,EAAMi0F,QAC3B,OAGF,MAAMC,EAAgBh9H,KAAKi9H,uBAAuBn0F,EAAO6zF,GACzD,GAAIK,GAAiB,EAAG,CACtB,MAAME,EAA2B38F,EAAOy8F,GACxC,IAAInmH,EACAqmH,EAAczyH,OAAS2E,EAAU+tH,OAEnCtmH,EAAMW,EAAQgrD,OAAOh7B,iBAAiB01F,EAAcz/F,WAEpD5mB,EAAMqmH,EAActxG,MACT,MAAP/U,GAAeqmH,EAAczyH,OAAS2E,EAAUmvE,UAClD1nE,EAAM,UAIV6lH,EAAa5zF,EAAM+zF,MAAQ/zF,EAC3BixF,GAAgBqD,WAAW9B,EAAYxyF,EAAOjyB,E,KAKpD,OAAQW,EAAQgrD,OAAO/3D,MACrB,KAAKmyB,GAAWoD,MACds7F,QAAmBt7H,KAAKq9H,wBACtB/B,EACApB,EACAwC,EACAllH,GAEF,MACF,KAAKolB,GAAWwD,KACdk7F,EAAat7H,KAAKs9H,uBAAuBhC,EAAYpB,EAAawC,EAAcllH,GAChF,MACF,KAAKolB,GAAW0D,SACdg7F,EAAat7H,KAAKu9H,2BAChBjC,EACApB,EACAwC,EACAllH,GAEF,MACF,QACE,OAAO,KAGX,OAAO8jH,CACT,G,CAEc+B,wBACZ/B,EACApB,EACAwC,EACAllH,G,kDAEA,IAAKA,EAAQgrD,OAAOviC,MAClB,OAAO,KAGT,MAAM+6F,EAA6B,GAC7BwC,EAA6B,GAC7BC,EAAyB,GAC/B,IAAIlD,EAAoB,KACpBphH,EAA0B,KAC1B4lB,EAAsB,KAC1B,MAAMkB,EAAQzoB,EAAQgrD,OAAOviC,MAC7Bq7F,EAAW9f,UACkE,QAA3E,EAAW,QAAX,EAAAv7E,aAAK,EAALA,EAAOhB,YAAI,eAAE33B,QAAQ43B,GAAMA,EAAEl2B,OAAS4H,GAAaw1B,QAAOplC,KAAKk+B,GAAMA,EAAEN,aAAI,QAAI,GAEjF08F,EAAWQ,gBAAkB97H,KAAK09H,kBAAkBxD,EAAYt0H,IAAK4R,GAErE,IAAI4iH,EAAiBL,GAAgBM,mBACnCH,GACA,GACA,EACA1iH,EAAQikH,gBACRjkH,EAAQmkH,iBAELvB,EAAe15H,QAAW8W,EAAQkkH,oBAErCtB,EAAiBL,GAAgBM,mBAC/BH,GACA,GACA,EACA1iH,EAAQikH,gBACRjkH,EAAQmkH,kBAIZ,IAAK,MAAMf,KAAWV,EAAY56B,MAE3B46B,EAAY56B,MAAM1xF,eAAegtH,IAItCR,EAAe/zH,SAASs3H,IACtBpD,EAAKoD,EACL3C,EAAUltH,KAAKysH,GAEXt6F,EAAM9mB,WACRA,EAAWnZ,KAAK+6H,kBAAkBb,EAAaK,GAAI,GAAO,GAAO,GAE5DphH,GAAa3B,EAAQkkH,oBAExBviH,EAAWnZ,KAAK+6H,kBAAkBb,EAAaK,GAAI,GAAM,GAAM,IAG7DphH,GACFqkH,EAAU1vH,KAAKqL,IAIf3B,EAAQokH,mBAAqB37F,EAAMlB,OACrCA,EAAO/+B,KAAK49H,cAAc1D,EAAaK,GAAI,GAAO,GAAO,GAEpDx7F,GAASvnB,EAAQkkH,oBAEpB38F,EAAO/+B,KAAK49H,cAAc1D,EAAaK,GAAI,GAAM,GAAM,IAGrDx7F,GACF0+F,EAAM3vH,KAAKixB,G,IAmGnB,OA7FIq7F,EAAe15H,SAAWs6H,EAAUt6H,SAItC65H,EAAKH,EAAe,GACpBY,EAAUltH,KAAKysH,GAEXt6F,EAAM9mB,UAAYohH,EAAGsD,cAAgB,IACvC1kH,EAAWnZ,KAAK+6H,kBAAkBb,EAAaK,GAAI,GAAO,GAAO,GAE5DphH,GAAa3B,EAAQkkH,oBAExBviH,EAAWnZ,KAAK+6H,kBAAkBb,EAAaK,GAAI,GAAM,GAAM,IAG7DphH,GACFqkH,EAAU1vH,KAAKqL,IAIf3B,EAAQokH,mBAAqB37F,EAAMlB,MAAQw7F,EAAGsD,cAAgB,IAChE9+F,EAAO/+B,KAAK49H,cAAc1D,EAAaK,GAAI,GAAO,GAAO,GAEpDx7F,GAASvnB,EAAQkkH,oBAEpB38F,EAAO/+B,KAAK49H,cAAc1D,EAAaK,GAAI,GAAM,GAAM,IAGrDx7F,GACF0+F,EAAM3vH,KAAKixB,KAKZq7F,EAAe15H,QAElBw5H,EAAY35F,OAAOl6B,SAASm6B,IAEvBhpB,EAAQgkH,uBACTh7F,EAAEs8F,UACU,SAAXt8F,EAAE/1B,MAA8B,UAAX+1B,EAAE/1B,MAA+B,QAAX+1B,EAAE/1B,OAC9CsvH,GAAgB+D,kBAAkBt9F,EAAGmpF,GAAkBC,qBAEvD4T,EAAU1vH,KAAK0yB,IAIfhpB,EAAQokH,oBACRp7F,EAAEs8F,UACU,SAAXt8F,EAAE/1B,MAA8B,WAAX+1B,EAAE/1B,OACvBsvH,GAAgB+D,kBAAkBt9F,EAAGmpF,GAAkBE,iBAC/B,kBAAvBrpF,EAAEu9F,kBAEJN,EAAM3vH,KAAK0yB,E,IAKjBg9F,EAAUn3H,SAAS64B,IAEbw9F,EAAa9uH,eAAesxB,EAAE29F,QAIlCH,EAAax9F,EAAE29F,MAAQ39F,EACvB66F,GAAgBqD,WAAW9B,EAAYp8F,EAAGe,EAAM9mB,UAAS,IAG3D6hH,EAAU30H,SAASqQ,IAEbgmH,EAAa9uH,eAAe8I,EAAEmmH,QAIlCH,EAAahmH,EAAEmmH,MAAQnmH,EACvBqjH,GAAgBqD,WAAW9B,EAAY5kH,EAAGupB,EAAM7mB,UAAS,IAGvD5B,EAAQokH,0BACJ1yH,QAAQ4N,IACZ2mH,EAAMz8H,KAAWH,GAAM,mCACrB,GAAIsG,OAAO/C,UAAUwJ,eAAevJ,KAAKq4H,EAAc77H,EAAEg8H,MACvD,OAGFH,EAAa77H,EAAEg8H,MAAQh8H,EACvB,MAAMm9H,QAAkBh+H,KAAKg6H,YAAYpvD,QAAQ3qC,EAAMlB,MACvDg7F,GAAgBqD,WAAW9B,EAAYz6H,EAAGm9H,EAC5C,QAIJ1C,EAAavB,GAAgBkE,sBAAsBvB,EAAcpB,E,IAI3DgC,uBACNhC,EACApB,EACAwC,EACAllH,GAEA,IAAKA,EAAQgrD,OAAOniC,KAClB,OAAO,KAGT,MAAM69F,EAA8C,CAAC,EAErDhE,EAAY35F,OAAOl6B,SAASm6B,IAC1B,IAAIu5F,GAAgBoE,oBAAoB39F,KAIpCxgC,KAAKo+H,eAAe59F,EAAE/1B,KAAMk/G,GAAkBI,uBAIlD,IAAK,IAAIrnH,EAAI,EAAGA,EAAIsnH,GAA4BC,eAAevpH,OAAQgC,IAAK,CAC1E,MAAM27H,EAAOrU,GAA4BC,eAAevnH,GAExD,GAAK89B,EAAE5yB,eAAeywH,IAAU79F,EAAE69F,IAAU79F,EAAEs8F,SAA9C,CAMA,IACGoB,EAAW/gG,gBACZ48F,GAAgBuE,aACd99F,EAAE69F,GACFrU,GAA4BG,qBAC5BH,GAA4BI,2BAE9B,CACA8T,EAAW/gG,eAAiBqD,EAC5B,K,CACK,IACJ09F,EAAW7gG,QACZ08F,GAAgBuE,aACd99F,EAAE69F,GACFrU,GAA4BK,qBAC5BL,GAA4BM,2BAE9B,CACA4T,EAAW7gG,OAASmD,EACpB,K,CACK,IACJ09F,EAAW5rG,KACZynG,GAAgBuE,aACd99F,EAAE69F,GACFrU,GAA4BO,qBAC5BP,GAA4BQ,2BAE9B,CACA0T,EAAW5rG,IAAMkO,EACjB,K,CACK,IACJ09F,EAAW5gG,UACZy8F,GAAgBuE,aAAa99F,EAAE69F,GAAOrU,GAA4BS,uBAClE,CACAyT,EAAW5gG,SAAWkD,EACtB,K,CACK,IACJ09F,EAAW3gG,SACZw8F,GAAgBuE,aAAa99F,EAAE69F,GAAOrU,GAA4BU,sBAClE,CACAwT,EAAW3gG,QAAUiD,EACrB,K,CACK,IACJ09F,EAAWn4G,MACZg0G,GAAgBuE,aAAa99F,EAAE69F,GAAOrU,GAA4BW,eAClE,CACAuT,EAAWn4G,KAAOya,EAClB,K,CACK,IACJ09F,EAAW9gG,OACZ28F,GAAgBuE,aAAa99F,EAAE69F,GAAOrU,GAA4BY,qBAClE,CACAsT,EAAW9gG,MAAQoD,EACnB,K,OAKN,MAAMH,EAAO7oB,EAAQgrD,OAAOniC,KAM5B,GALArgC,KAAKu+H,iBAAiBjD,EAAYj7F,EAAM69F,EAAYxB,EAAc,kBAClE18H,KAAKu+H,iBAAiBjD,EAAYj7F,EAAM69F,EAAYxB,EAAc,UAClE18H,KAAKu+H,iBAAiBjD,EAAYj7F,EAAM69F,EAAYxB,EAAc,QAClE18H,KAAKu+H,iBAAiBjD,EAAYj7F,EAAM69F,EAAYxB,EAAc,SAE9DwB,EAAW5gG,UAAYy8F,GAAgB6C,SAASv8F,EAAK/C,UAAW,CAClE,IAAIA,EAAmB+C,EAAK/C,SAE5B,GAAI4gG,EAAW5gG,SAASkhG,YAAcN,EAAW5gG,SAASkhG,WAAWhnH,QAAS,CAC5E,IAAI4vD,EAAgB,KACpB,MAAMq3D,EAAYP,EAAW5gG,SAASkhG,WAAWhnH,QAejD,GAdyB,KAArBinH,EAAU/9H,OACZ0mE,EAAQtkE,SAASu9B,EAAK/C,SAAU,MAAQ,EACV,KAArBmhG,EAAU/9H,SAQjB0mE,EANmB,MAAnBq3D,EAAU,GAAG,IACO,KAApBA,EAAU,GAAG,IACQ,MAApBA,EAAU,IAAI,IAAmC,KAArBA,EAAU,IAAI,GAInC37H,SAASu9B,EAAK/C,SAAU,MAFxBx6B,SAASu9B,EAAK/C,SAAU,MAAQ,GAM/B,MAAT8pC,EAAe,CACjB,MAAMs3D,EAASD,EAAUr3D,GACrBs3D,EAAOh+H,OAAS,IAClB48B,EAAWohG,EAAO,G,OAIrB1+H,KAAK2+H,kBAAkBT,EAAW5gG,SAAU,OACT,IAAlC4gG,EAAW5gG,SAASshG,WACF,IAApBthG,EAAS58B,SAET48B,EAAW,IAAMA,GAGnBo/F,EAAawB,EAAW5gG,SAASu/F,MAAQqB,EAAW5gG,SACpDy8F,GAAgBqD,WAAW9B,EAAY4C,EAAW5gG,SAAUA,E,CAG9D,GAAI4gG,EAAW3gG,SAAWw8F,GAAgB6C,SAASv8F,EAAK9C,SAAU,CAChE,IAAIA,EAAkB8C,EAAK9C,QAC3B,GAAI2gG,EAAW3gG,QAAQihG,YAAcN,EAAW3gG,QAAQihG,WAAWhnH,QACjE,IAAK,IAAI9U,EAAI,EAAGA,EAAIw7H,EAAW3gG,QAAQihG,WAAWhnH,QAAQ9W,OAAQgC,IAAK,CACrE,MAAMstB,EAAsBkuG,EAAW3gG,QAAQihG,WAAWhnH,QAAQ9U,GAClE,GAAIstB,EAAE,KAAOqQ,EAAK9C,SAAWvN,EAAE,KAAOqQ,EAAK9C,QAAS,CAClDA,EAAUvN,EAAE,GACZ,K,CAEF,GACkB,IAAhBA,EAAE,GAAGtvB,QACmB,IAAxB2/B,EAAK9C,QAAQ78B,QACbsvB,EAAE,KAAOqQ,EAAK9C,QAAQv1B,UAAU,GAChC,CACAu1B,EAAUvN,EAAE,GACZ,K,CAEF,MAAM6uG,EAAa7uG,EAAE,GAAGvqB,QAAQ,KAChC,GAAIo5H,GAAc,GAAK7uG,EAAE,GAAGtvB,OAASm+H,EAAa,EAAG,CACnD,MAAMhoH,EAAMmZ,EAAE,GAAGhoB,UAAU62H,EAAa,GACxC,GAAW,MAAPhoH,GAA8B,KAAfA,EAAItR,QAAiBsR,IAAQwpB,EAAK9C,QAAS,CAC5DA,EAAUvN,EAAE,GACZ,K,QAKNhwB,KAAK2+H,kBAAkBT,EAAW3gG,QAAS,SACV,IAAjC2gG,EAAW3gG,QAAQqhG,UAEI,IAAnBrhG,EAAQ78B,SACV68B,EAAU,KAAOA,IAGnBv9B,KAAK2+H,kBAAkBT,EAAW3gG,QAAS,OACV,IAAjC2gG,EAAW3gG,QAAQqhG,YAEI,IAAnBrhG,EAAQ78B,SACV68B,EAAUA,EAAQx6B,OAAO,IAI7B25H,EAAawB,EAAW3gG,QAAQs/F,MAAQqB,EAAW3gG,QACnDw8F,GAAgBqD,WAAW9B,EAAY4C,EAAW3gG,QAASA,E,CAG7D,GACE2gG,EAAW5rG,KACXynG,GAAgB6C,SAASv8F,EAAK/C,WAC9By8F,GAAgB6C,SAASv8F,EAAK9C,SAC9B,CACA,MAAMuhG,GAAa,IAAMz+F,EAAK/C,UAAU38B,OAAO,GAE/C,IAAIo+H,EAAmB1+F,EAAK9C,QACxByhG,EAAmB,KACC,IAApBD,EAASr+H,QACXs+H,EAAWD,EACXA,EAAW,KAAOA,GACW,IAApBA,EAASr+H,SAClBs+H,EAAWD,EAASh8H,OAAO,EAAG,IAGhC,IAAIuvB,EAAc,KAClB,IAAK,IAAI5vB,EAAI,EAAGA,EAAIsnH,GAA4Ba,UAAUnqH,SAEtDV,KAAK2+H,kBACHT,EAAW5rG,IACX03F,GAA4Ba,UAAUnoH,GACpC,IACAsnH,GAA4Be,aAAaroH,IAG7C4vB,EAAMwsG,EAAY,IAAMC,EAExB/+H,KAAK2+H,kBACHT,EAAW5rG,IACX03F,GAA4Ba,UAAUnoH,GACpC,IACAsnH,GAA4Bc,cAAcpoH,KAElC,MAAZs8H,EAEA1sG,EAAMwsG,EAAY,IAAME,EAExBh/H,KAAK2+H,kBACHT,EAAW5rG,IACX03F,GAA4Be,aAAaroH,GACvC,IACAsnH,GAA4Ba,UAAUnoH,IAG1C4vB,EAAMysG,EAAW,IAAMD,EAEvB9+H,KAAK2+H,kBACHT,EAAW5rG,IACX03F,GAA4Bc,cAAcpoH,GACxC,IACAsnH,GAA4Ba,UAAUnoH,KAE9B,MAAZs8H,EAEA1sG,EAAM0sG,EAAW,IAAMF,EAEvB9+H,KAAK2+H,kBACHT,EAAW5rG,IACX03F,GAA4Ba,UAAUnoH,GACpC,IACAsnH,GAA4Be,aAAaroH,IAG7C4vB,EAAMwsG,EAAY,IAAMC,EAExB/+H,KAAK2+H,kBACHT,EAAW5rG,IACX03F,GAA4Ba,UAAUnoH,GACpC,IACAsnH,GAA4Bc,cAAcpoH,KAElC,MAAZs8H,EAEA1sG,EAAMwsG,EAAY,IAAME,EAExBh/H,KAAK2+H,kBACHT,EAAW5rG,IACX03F,GAA4Be,aAAaroH,GACvC,IACAsnH,GAA4Ba,UAAUnoH,IAG1C4vB,EAAMysG,EAAW,IAAMD,EAEvB9+H,KAAK2+H,kBACHT,EAAW5rG,IACX03F,GAA4Bc,cAAcpoH,GACxC,IACAsnH,GAA4Ba,UAAUnoH,KAE9B,MAAZs8H,EAEA1sG,EAAM0sG,EAAW,IAAMF,EAEvB9+H,KAAK2+H,kBACHT,EAAW5rG,IACX03F,GAA4Be,aAAaroH,GAAKsnH,GAA4Ba,UAAUnoH,IAGtF4vB,EAAMysG,EAAWD,EAEjB9+H,KAAK2+H,kBACHT,EAAW5rG,IACX03F,GAA4Bc,cAAcpoH,GAAKsnH,GAA4Ba,UAAUnoH,KAE3E,MAAZs8H,EAEA1sG,EAAM0sG,EAAWF,EAEjB9+H,KAAK2+H,kBACHT,EAAW5rG,IACX03F,GAA4Ba,UAAUnoH,GAAKsnH,GAA4Be,aAAaroH,IAGtF4vB,EAAMwsG,EAAYC,EAElB/+H,KAAK2+H,kBACHT,EAAW5rG,IACX03F,GAA4Ba,UAAUnoH,GAAKsnH,GAA4Bc,cAAcpoH,KAE3E,MAAZs8H,IAEA1sG,EAAMwsG,EAAYE,GAGT,MAAP1sG,GA7G4D5vB,KAkHvD,MAAP4vB,IACFA,EAAMysG,EAAW,IAAMD,GAGzB9+H,KAAKi/H,0BAA0B3D,EAAYhpG,EAAK4rG,EAAW5rG,IAAKoqG,E,CAGlE,OAAOpB,CACT,CAQQoC,kBAAkBwB,EAAiB1nH,GAGzC,GAAI0nH,IAAY1nH,EAAQqkH,OACtB,OAAO,EAMT,MAAMp2F,EAAoBzlC,KAAKy8E,gBAAgBsD,qBAAqBm/C,GAMpE,OALmB1nH,EAAQgrD,OAAOviC,MAAMsF,WACtC25F,EACAz5F,EACAjuB,EAAQkuB,gBAGZ,CAEQi5F,kBAAkB71F,EAAsBq2F,GAC9C,IAAKr2F,EACH,OAAO,EAGT,IAAIs2F,GAAc,EAYlB,OAXApV,GAA4BE,uBAAuB7jH,SAASg4H,IAE1D,GAAIe,IAAgBt2F,EAAMl7B,eAAeywH,KAAUv1F,EAAMu1F,GACvD,OAGF,IAAIxnH,EAAMiyB,EAAMu1F,GAChBxnH,EAAMA,EAAI/S,QAAQ,KAAM,IAAIrD,cAC5B2+H,EAAcvoH,EAAIpR,QAAQ05H,IAAgB,CAAC,IAGtCC,CACT,CAEQ7B,2BACNjC,EACApB,EACAwC,EACAllH,GAEA,IAAKA,EAAQgrD,OAAOtoD,SAClB,OAAO,KAGT,MAAMgkH,EAA8C,CAAC,EAErDhE,EAAY35F,OAAOl6B,SAASm6B,IAC1B,IAAIu5F,GAAgBoE,oBAAoB39F,KAIpCxgC,KAAKo+H,eAAe59F,EAAE/1B,KAAMk/G,GAAkBI,uBAIlD,IAAK,IAAIrnH,EAAI,EAAGA,EAAIsoH,GAA0BC,mBAAmBvqH,OAAQgC,IAAK,CAC5E,MAAM27H,EAAOrT,GAA0BC,mBAAmBvoH,GAE1D,GAAK89B,EAAE5yB,eAAeywH,IAAU79F,EAAE69F,IAAU79F,EAAEs8F,SAA9C,CAMA,IACGoB,EAAWx8H,MACZq4H,GAAgBuE,aACd99F,EAAE69F,GACFrT,GAA0BE,mBAC1BF,GAA0BG,yBAE5B,CACA+S,EAAWx8H,KAAO8+B,EAClB,K,CACK,IACJ09F,EAAWtgG,WACZm8F,GAAgBuE,aAAa99F,EAAE69F,GAAOrT,GAA0BK,qBAChE,CACA6S,EAAWtgG,UAAY4C,EACvB,K,CACK,IACJ09F,EAAWrgG,YACZk8F,GAAgBuE,aAAa99F,EAAE69F,GAAOrT,GAA0BM,sBAChE,CACA4S,EAAWrgG,WAAa2C,EACxB,K,CACK,IACJ09F,EAAWpgG,UACZi8F,GAAgBuE,aAAa99F,EAAE69F,GAAOrT,GAA0BO,oBAChE,CACA2S,EAAWpgG,SAAW0C,EACtB,K,CACK,IACJ09F,EAAWvgG,OACZo8F,GAAgBuE,aAAa99F,EAAE69F,GAAOrT,GAA0BI,iBAChE,CACA8S,EAAWvgG,MAAQ6C,EACnB,K,CACK,IACJ09F,EAAWryH,OACZkuH,GAAgBuE,aAAa99F,EAAE69F,GAAOrT,GAA0BQ,iBAChE,CACA0S,EAAWryH,MAAQ20B,EACnB,K,CACK,IACJ09F,EAAWh7F,SACZ62F,GAAgBuE,aACd99F,EAAE69F,GACFrT,GAA0BS,kBAC1BT,GAA0BU,wBAE5B,CACAwS,EAAWh7F,QAAU1C,EACrB,K,CACK,IACJ09F,EAAWngG,UACZg8F,GAAgBuE,aAAa99F,EAAE69F,GAAOrT,GAA0BW,oBAChE,CACAuS,EAAWngG,SAAWyC,EACtB,K,CACK,IACJ09F,EAAWlgG,UACZ+7F,GAAgBuE,aAAa99F,EAAE69F,GAAOrT,GAA0BY,oBAChE,CACAsS,EAAWlgG,SAAWwC,EACtB,K,CACK,IACJ09F,EAAWjgG,UACZ87F,GAAgBuE,aAAa99F,EAAE69F,GAAOrT,GAA0Ba,oBAChE,CACAqS,EAAWjgG,SAAWuC,EACtB,K,CACK,IACJ09F,EAAW9/F,YACZ27F,GAAgBuE,aAAa99F,EAAE69F,GAAOrT,GAA0Bc,sBAChE,CACAoS,EAAW9/F,WAAaoC,EACxB,K,CACK,IACJ09F,EAAWhgG,MACZ67F,GAAgBuE,aAAa99F,EAAE69F,GAAOrT,GAA0Be,gBAChE,CACAmS,EAAWhgG,KAAOsC,EAClB,K,CACK,IACJ09F,EAAW//F,OACZ47F,GAAgBuE,aAAa99F,EAAE69F,GAAOrT,GAA0BgB,iBAChE,CACAkS,EAAW//F,MAAQqC,EACnB,K,CACK,IACJ09F,EAAW7/F,SACZ07F,GAAgBuE,aAAa99F,EAAE69F,GAAOrT,GAA0BiB,mBAChE,CACAiS,EAAW7/F,QAAUmC,EACrB,K,CACK,IACJ09F,EAAW3/F,OACZw7F,GAAgBuE,aAAa99F,EAAE69F,GAAOrT,GAA0BkB,iBAChE,CACAgS,EAAW3/F,MAAQiC,EACnB,K,CACK,IACJ09F,EAAW/kH,UACZ4gH,GAAgBuE,aAAa99F,EAAE69F,GAAOrT,GAA0BmB,oBAChE,CACA+R,EAAW/kH,SAAWqnB,EACtB,K,CACK,IACJ09F,EAAW5/F,SACZy7F,GAAgBuE,aAAa99F,EAAE69F,GAAOrT,GAA0BoB,mBAChE,CACA8R,EAAW5/F,QAAUkC,EACrB,K,OAKN,MAAMtmB,EAAW1C,EAAQgrD,OAAOtoD,SAChCla,KAAKu+H,iBAAiBjD,EAAYphH,EAAUgkH,EAAYxB,EAAc,SACtE18H,KAAKu+H,iBAAiBjD,EAAYphH,EAAUgkH,EAAYxB,EAAc,aACtE18H,KAAKu+H,iBAAiBjD,EAAYphH,EAAUgkH,EAAYxB,EAAc,cACtE18H,KAAKu+H,iBAAiBjD,EAAYphH,EAAUgkH,EAAYxB,EAAc,YACtE18H,KAAKu+H,iBAAiBjD,EAAYphH,EAAUgkH,EAAYxB,EAAc,YACtE18H,KAAKu+H,iBAAiBjD,EAAYphH,EAAUgkH,EAAYxB,EAAc,YACtE18H,KAAKu+H,iBAAiBjD,EAAYphH,EAAUgkH,EAAYxB,EAAc,YACtE18H,KAAKu+H,iBAAiBjD,EAAYphH,EAAUgkH,EAAYxB,EAAc,QACtE18H,KAAKu+H,iBAAiBjD,EAAYphH,EAAUgkH,EAAYxB,EAAc,cACtE18H,KAAKu+H,iBAAiBjD,EAAYphH,EAAUgkH,EAAYxB,EAAc,WACtE18H,KAAKu+H,iBAAiBjD,EAAYphH,EAAUgkH,EAAYxB,EAAc,SACtE18H,KAAKu+H,iBAAiBjD,EAAYphH,EAAUgkH,EAAYxB,EAAc,SACtE18H,KAAKu+H,iBAAiBjD,EAAYphH,EAAUgkH,EAAYxB,EAAc,YAEtE,IAAI2C,GAAc,EAClB,GAAInB,EAAW//F,OAASjkB,EAASikB,OAASjkB,EAASikB,MAAMz9B,OAAS,EAAG,CACnE,MAAM4+H,EAAaplH,EAASikB,MAAM19B,cAC5B8+H,EACJvU,GAA0BiM,UAAUqI,IACpCtU,GAA0ByO,aAAa6F,GACrCC,IACFF,GAAc,EACdr/H,KAAKi/H,0BAA0B3D,EAAYiE,EAAUrB,EAAW//F,MAAOu+F,G,CAItE2C,GACHr/H,KAAKu+H,iBAAiBjD,EAAYphH,EAAUgkH,EAAYxB,EAAc,SAGxE,IAAI8C,GAAgB,EACpB,GAAItB,EAAW7/F,SAAWnkB,EAASmkB,SAAWnkB,EAASmkB,QAAQ39B,OAAS,EAAG,CACzE,MAAM++H,EAAevlH,EAASmkB,QAAQ59B,cAChCi/H,EAAa1U,GAA0BqB,aAAaoT,GACtDC,IACFF,GAAgB,EAChBx/H,KAAKi/H,0BAA0B3D,EAAYoE,EAAYxB,EAAW7/F,QAASq+F,G,CAQ/E,GAJK8C,GACHx/H,KAAKu+H,iBAAiBjD,EAAYphH,EAAUgkH,EAAYxB,EAAc,WAGpEwB,EAAWx8H,OAASwY,EAAS0jB,WAAa1jB,EAAS4jB,UAAW,CAChE,IAAIkF,EAAW,GACX+2F,GAAgB6C,SAAS1iH,EAAS0jB,aACpCoF,EAAW9oB,EAAS0jB,WAElBm8F,GAAgB6C,SAAS1iH,EAAS2jB,cACnB,KAAbmF,IACFA,GAAY,KAEdA,GAAY9oB,EAAS2jB,YAEnBk8F,GAAgB6C,SAAS1iH,EAAS4jB,YACnB,KAAbkF,IACFA,GAAY,KAEdA,GAAY9oB,EAAS4jB,UAGvB99B,KAAKi/H,0BAA0B3D,EAAYt4F,EAAUk7F,EAAWx8H,KAAMg7H,E,CAGxE,GAAIwB,EAAWh7F,SAAW62F,GAAgB6C,SAAS1iH,EAAS6jB,UAAW,CACrE,IAAImF,EAAU,GACV62F,GAAgB6C,SAAS1iH,EAAS6jB,YACpCmF,EAAUhpB,EAAS6jB,UAEjBg8F,GAAgB6C,SAAS1iH,EAAS8jB,YACpB,KAAZkF,IACFA,GAAW,MAEbA,GAAWhpB,EAAS8jB,UAElB+7F,GAAgB6C,SAAS1iH,EAAS+jB,YACpB,KAAZiF,IACFA,GAAW,MAEbA,GAAWhpB,EAAS+jB,UAGtBj+B,KAAKi/H,0BAA0B3D,EAAYp4F,EAASg7F,EAAWh7F,QAASw5F,E,CAG1E,OAAOpB,CACT,CAEQ8C,eAAe3zH,EAAck1H,GACnC,OAAOA,EAAcl6H,QAAQgF,IAAS,CACxC,CAEQpJ,oBACNuqB,EACApU,EACAooH,GAEAh0G,EAAQA,EACLrmB,OACA9E,cACAqD,QAAQ,iBAAkB,IAC7B,IAAK,IAAIpB,EAAI,EAAGA,EAAI8U,EAAQ9W,OAAQgC,IAAK,CACvC,IAAIg8H,EAASlnH,EAAQ9U,GACrB,MAAMm9H,EAAwC,MAAnBD,GAA2BA,EAAgBn6H,QAAQi5H,IAAW,EAEzF,GADAA,EAASA,EAAOj+H,cAAcqD,QAAQ,KAAM,IACxC8nB,IAAU8yG,GAAWmB,GAAsBj0G,EAAMnmB,QAAQi5H,IAAW,EACtE,OAAO,C,CAIX,OAAO,CACT,CAEQH,iBACNjD,EACAwE,EACA5B,EACAxB,EACAqD,EACAC,GAEAA,EAAYA,GAAaD,EACzB//H,KAAKi/H,0BACH3D,EACAwE,EAAWC,GACX7B,EAAW8B,GACXtD,EAEJ,CAEQuC,0BACN3D,EACA2E,EACAn3F,EACA4zF,GAEA,IAAIwD,GAAS,EACb,GAAInG,GAAgB6C,SAASqD,IAAcn3F,EACzC,GAAmB,eAAfA,EAAMr+B,MAAyBq+B,EAAM01F,YAAc11F,EAAM01F,WAAWhnH,QACtE,IAAK,IAAI9U,EAAI,EAAGA,EAAIomC,EAAM01F,WAAWhnH,QAAQ9W,OAAQgC,IAAK,CACxD,MAAMg8H,EAAS51F,EAAM01F,WAAWhnH,QAAQ9U,GACxC,IAAK,IAAIqwE,EAAI,EAAGA,EAAI2rD,EAAOh+H,OAAQqyE,IACjC,GACEgnD,GAAgB6C,SAAS8B,EAAO3rD,KAChC2rD,EAAO3rD,GAAGtyE,gBAAkBw/H,EAAUx/H,cACtC,CACAy/H,GAAS,EACLxB,EAAOh+H,OAAS,IAClBu/H,EAAYvB,EAAO,IAErB,K,CAIJ,GAAIwB,EACF,K,MAIJA,GAAS,EAITA,IACFxD,EAAa5zF,EAAM+zF,MAAQ/zF,EAC3BixF,GAAgBqD,WAAW9B,EAAYxyF,EAAOm3F,GAElD,CAEA5+H,0BACE64H,EACAiG,EACAC,EACAC,EACA1E,GAEA,MAAMx4H,EAAuB,GAmD7B,OAlDA+2H,EAAY35F,OAAOl6B,SAASm6B,IAC1B,GAAIu5F,GAAgBoE,oBAAoB39F,GACtC,OAGF,MAAM8/F,EAAwB,aAAX9/F,EAAE/1B,KACf81H,EAAuB30G,IAC3B,GAAa,MAATA,EACF,OAAO,EAIT,MAAM40G,EAAe50G,EAAMnrB,cAAcqD,QAAQ,WAAY,IAE7D,QAAI08H,EAAa/6H,QAAQ,YAAc,KAInCkkH,GAAkBG,wBAAwBpjF,MAAMhkC,GAAM89H,EAAa/6H,QAAQ/C,IAAM,GAI1E,EAkBV89B,EAAEqqB,WACFu1E,GAAkB5/F,EAAEigG,YACpBH,GAjBc,SAAX9/F,EAAE/1B,OAGF81H,EAAoB//F,EAAEkgG,SAGtBH,EAAoB//F,EAAEmgG,WAGtBJ,EAAoB//F,EAAEogG,iBASzBT,IAAe3/F,EAAEs8F,UAChBuD,GAA0B,MAAX7/F,EAAE5U,OAAoC,KAAnB4U,EAAE5U,MAAMrmB,SAC3Co2H,GAA0C,iBAAvBn7F,EAAEu9F,kBAEtB56H,EAAI2K,KAAK0yB,E,IAGNr9B,CACT,CAEQ43H,kBACNb,EACA2G,EACAV,EACAC,EACAU,GAEA,IAAIC,EAA+B,KACnC,IAAK,IAAIr+H,EAAI,EAAGA,EAAIw3H,EAAY35F,OAAO7/B,OAAQgC,IAAK,CAClD,MAAM89B,EAAI05F,EAAY35F,OAAO79B,GAC7B,IAAIq3H,GAAgBoE,oBAAoB39F,GAAxC,CAIA,GAAIA,EAAEq9F,eAAiBgD,EAAchD,cACnC,MAGF,IACGr9F,EAAEqqB,WACFu1E,IAAkB5/F,EAAEigG,YACpBK,GAAetgG,EAAEg6F,OAASqG,EAAcrG,QACxC2F,GAAe3/F,EAAEs8F,YACN,SAAXt8F,EAAE/1B,MAA8B,UAAX+1B,EAAE/1B,MAA+B,QAAX+1B,EAAE/1B,QAE9Cs2H,EAAgBvgG,EAEZxgC,KAAKi9H,uBAAuBz8F,EAAGmpF,GAAkBC,qBAAuB,GAE1E,K,EAKN,OAAOmX,CACT,CAEQnD,cACN1D,EACA2G,EACAV,EACAC,EACAU,GAEA,IAAIE,EAA2B,KAC/B,IAAK,IAAIt+H,EAAI,EAAGA,EAAIw3H,EAAY35F,OAAO7/B,OAAQgC,IAAK,CAClD,MAAM89B,EAAI05F,EAAY35F,OAAO79B,GAC7B,IAAIq3H,GAAgBoE,oBAAoB39F,MAKrCA,EAAEqqB,WACFu1E,IAAkB5/F,EAAEigG,YACpBK,GAAetgG,EAAEg6F,OAASqG,EAAcrG,QACxC2F,GAAe3/F,EAAEs8F,YACN,SAAXt8F,EAAE/1B,MAA8B,WAAX+1B,EAAE/1B,OACxBsvH,GAAgB+D,kBAAkBt9F,EAAGmpF,GAAkBE,kBAEvDmX,EAAYxgG,EAGVxgC,KAAKi9H,uBAAuBz8F,EAAGmpF,GAAkBE,iBAAmB,GAC7C,kBAAvBrpF,EAAEu9F,mBAGF,K,CAKN,OAAOiD,CACT,CAEQ/D,uBAAuBn0F,EAAsBm4F,GACnD,IAAK,IAAIv+H,EAAI,EAAGA,EAAIu+H,EAAMvgI,OAAQgC,IAAK,CACrC,GAAIu+H,EAAMv+H,GAAG+C,QAAQ,MAAQ,EAAG,CAC9B,GAAIzF,KAAKkhI,2BAA2Bp4F,EAAO,SAAUm4F,EAAMv+H,GAAI,MAC7D,OAAOA,EAET,GAAI1C,KAAKkhI,2BAA2Bp4F,EAAO,WAAYm4F,EAAMv+H,GAAI,QAC/D,OAAOA,EAET,GAAI1C,KAAKkhI,2BAA2Bp4F,EAAO,aAAcm4F,EAAMv+H,GAAI,SACjE,OAAOA,EAET,GAAI1C,KAAKkhI,2BAA2Bp4F,EAAO,cAAem4F,EAAMv+H,GAAI,SAClE,OAAOA,EAET,GAAI1C,KAAKkhI,2BAA2Bp4F,EAAO,YAAam4F,EAAMv+H,GAAI,SAChE,OAAOA,EAET,GAAI1C,KAAKkhI,2BAA2Bp4F,EAAO,aAAcm4F,EAAMv+H,GAAI,SACjE,OAAOA,EAET,GAAI1C,KAAKkhI,2BAA2Bp4F,EAAO,cAAem4F,EAAMv+H,GAAI,eAClE,OAAOA,C,CAIX,GAAI1C,KAAKmhI,qBAAqBr4F,EAAO,SAAUm4F,EAAMv+H,IACnD,OAAOA,EAET,GAAI1C,KAAKmhI,qBAAqBr4F,EAAO,WAAYm4F,EAAMv+H,IACrD,OAAOA,EAET,GAAI1C,KAAKmhI,qBAAqBr4F,EAAO,aAAcm4F,EAAMv+H,IACvD,OAAOA,EAET,GAAI1C,KAAKmhI,qBAAqBr4F,EAAO,cAAem4F,EAAMv+H,IACxD,OAAOA,EAET,GAAI1C,KAAKmhI,qBAAqBr4F,EAAO,YAAam4F,EAAMv+H,IACtD,OAAOA,EAET,GAAI1C,KAAKmhI,qBAAqBr4F,EAAO,aAAcm4F,EAAMv+H,IACvD,OAAOA,EAET,GAAI1C,KAAKmhI,qBAAqBr4F,EAAO,cAAem4F,EAAMv+H,IACxD,OAAOA,C,CAIX,OAAQ,CACV,CAEQw+H,2BACNp4F,EACAs4F,EACA1/H,EACAwS,EACAmtH,EAAY,KAEZ,GAAyC,IAArC3/H,EAAK+D,QAAQyO,EAASmtH,GAAkB,CAC1C,MAAMC,EAAW5/H,EAAK+D,QAAQ47H,GACxBxqH,EAAMnV,EAAKsG,UAAUs5H,EAAW,GACtC,OAAc,MAAPzqH,GAAe7W,KAAKmhI,qBAAqBr4F,EAAOs4F,EAAUvqH,E,CAEnE,OAAO,CACT,CAEQsqH,qBAAqBr4F,EAAYs4F,EAAkB1/H,GACzD,IAAI6/H,EAAWz4F,EAAMs4F,GACrB,IAAKrH,GAAgB6C,SAAS2E,GAC5B,OAAO,EAIT,GADAA,EAAWA,EAASh8H,OAAOzB,QAAQ,kBAAmB,IAClDpC,EAAK8D,WAAW,UAClB,IACE,MAAMg8H,EAAa9/H,EAAK0E,MAAM,IAAK,GACnC,GAA0B,IAAtBo7H,EAAW9gI,OAAc,CAE3B,OADc,IAAIyE,OAAOq8H,EAAW,GAAI,KAC3Bp8H,KAAKm8H,E,EAEpB,MAAOh5H,GACPvI,KAAKuhB,WAAWuC,MAAMvb,E,MAEnB,GAAI7G,EAAK8D,WAAW,QAAS,CAClC,MAAMi8H,EAAW//H,EAAK0E,MAAM,IAAK,GACjC,GAAwB,IAApBq7H,EAAS/gI,OAAc,CACzB,MAAMghI,EAAUD,EAAS,GAAGr7H,MAAM,KAClC,IAAK,IAAI1D,EAAI,EAAGA,EAAIg/H,EAAQhhI,OAAQgC,IAAK,CACvC,MAAMmU,EAAM6qH,EAAQh/H,GACpB,GAAW,MAAPmU,GAAeA,EAAItR,OAAO9E,gBAAkB8gI,EAAS9gI,cACvD,OAAO,C,CAGX,OAAO,C,EAIX,OAAO8gI,EAAS9gI,gBAAkBiB,CACpC,CAEAL,yBAAyBynC,EAAsBm4F,GAC7C,SAAIlH,GAAgB6C,SAAS9zF,EAAM43F,UAAW1gI,KAAK2hI,WAAWV,EAAOn4F,EAAM43F,cAGvE3G,GAAgB6C,SAAS9zF,EAAM63F,YAAa3gI,KAAK2hI,WAAWV,EAAOn4F,EAAM63F,gBAI3E5G,GAAgB6C,SAAS9zF,EAAM,gBAC/B9oC,KAAK2hI,WAAWV,EAAOn4F,EAAM,oBAI3BixF,GAAgB6C,SAAS9zF,EAAM83F,eAAgB5gI,KAAK2hI,WAAWV,EAAOn4F,EAAM83F,mBAI9E7G,GAAgB6C,SAAS9zF,EAAM,iBAC/B9oC,KAAK2hI,WAAWV,EAAOn4F,EAAM,qBAK7BixF,GAAgB6C,SAAS9zF,EAAM,gBAC/B9oC,KAAK2hI,WAAWV,EAAOn4F,EAAM,mBAK7BixF,GAAgB6C,SAAS9zF,EAAM,iBAC/B9oC,KAAK2hI,WAAWV,EAAOn4F,EAAM,oBAMjC,CAEQznC,kBAAkBmW,EAAmBoU,GAC3C,GAAe,MAAXpU,GAAsC,IAAnBA,EAAQ9W,QAAyB,MAATkrB,GAA2B,KAAVA,EAC9D,OAAO,EAGTA,EAAQA,EACL9nB,QAAQ,kBAAmB,IAC3ByB,OACA9E,cAEH,IAAK,IAAIiC,EAAI,EAAGA,EAAI8U,EAAQ9W,OAAQgC,IAClC,GAAIkpB,EAAMnmB,QAAQ+R,EAAQ9U,KAAO,EAC/B,OAAO,EAIX,OAAO,CACT,CAEArB,gBAAgBc,GACd,OAAOo8E,QAAQp8E,GAAe,KAARA,EACxB,CAEAd,6BACEq7H,EACApB,GAEA,IAAIsG,EAA2B,KAC3BC,EAAmC,KAEvC,IAAK,MAAMhF,KAAQH,EAEbA,EAAa9uH,eAAeivH,IAASH,EAAaG,GAAMC,WAC1D8E,EAAYlF,EAAaG,GAEO,aAA5BH,EAAaG,GAAMpyH,OACrBo3H,EAAoBnF,EAAaG,KAYvC,OANIgF,EACFvG,EAAW9R,OAAO17G,KAAK,CAAC,gBAAiB+zH,EAAkBhF,OAClD+E,GACTtG,EAAW9R,OAAO17G,KAAK,CAAC,gBAAiB8zH,EAAU/E,OAG9CvB,CACT,CAEAj6H,kBAAkBi6H,EAA4BxyF,EAAsBld,GAC9Dkd,EAAM81F,WAAahzG,GAASA,EAAMlrB,OAASooC,EAAM81F,YACnDhzG,EAAQA,EAAM7oB,OAAO,EAAG6oB,EAAMlrB,SAEV,SAAlBooC,EAAMi0F,UACRzB,EAAW9R,OAAO17G,KAAK,CAAC,gBAAiBg7B,EAAM+zF,OAC/CvB,EAAW9R,OAAO17G,KAAK,CAAC,gBAAiBg7B,EAAM+zF,QAEjDvB,EAAW9R,OAAO17G,KAAK,CAAC,eAAgBg7B,EAAM+zF,KAAMjxG,GACtD,CAEAvqB,2BAA2BynC,GACzB,MAAyB,SAAlBA,EAAMi0F,OACf,E,2SCv+CK,SAAS+E,GACdl3F,EACA04D,GAEA,OAAOF,GACLx4D,EACA,kBACA04D,GACA,IAAW,mCACT,WAAIy2B,SACInT,GAAqBh8E,EAAO04D,SAC5BoW,GAAoB9uE,EAAO04D,SAC3B4lB,GAAmBt+E,EAAO04D,SAC1B6lB,GAA8Bv+E,EAAO04D,SACrC0T,GAAkBpsE,EAAO04D,SACzBqjB,GAAuB/7E,EAAO04D,SAC9B0iB,GAA+Bp7E,EAAO04D,G,KAGpD,C,2SChEO,MAAMy+B,GAA0B,iBAEhC,MAAMC,GAOX3gI,a,0CACE,MAAM0nH,QAAmB33B,GAAW43B,gBAC/BD,GAAoC,IAAtBA,EAAWroH,QAI9B0wF,GAAW6wC,gBAAgBlZ,EAAW,GAAG7jH,GAAI,CAC3CgsF,QAAS,kBAEb,G,6SCbK,MAAMj6C,GAAkB,CAAOk/C,EAAsBvmC,IAAiB,qCAC3E,GAAc,MAAVumC,EAAIjxF,GACN,MAAM,IAAI9E,MAAM,sEAGlBgxF,GAAW6wC,gBAAgB9rC,EAAIjxF,GAAI,CACjCgsF,QAAS,WACTthC,KAAMA,GAEV,I,2SCbO,MAAMsyE,GAAY,CAACH,IAKpBI,GAAyB,CAC7BhzF,eAAgB,MAkDlB,SAAeizF,GAAqBC,EAAwB5pF,G,0CACxB,GAA9B24C,GAAWmE,sBACP1C,OAAOujB,QAAQwB,QAAQpxG,IAAI,CAAE,CAAC67H,GAAc5pF,IAElD0pF,GAAWE,GAAe5pF,CAE9B,G,4SCzDO,MAAM6pF,GACXxiI,YACUyiI,EACAh3H,GADA,KAAAg3H,0BAAAA,EACA,KAAAh3H,aAAAA,CACP,CAEGi3H,4BAA4BrsC,G,0CAChC,MAAO3+E,SAAiBxX,KAAKuiI,0BAA0BrxD,aACjD93D,QAAiBpZ,KAAKuiI,0BAA0BtyD,iBAAiBz4D,GAEvEy/B,GAAgBk/C,EAAK/8E,GAErB,MAAM+1B,QAAuBnvC,KAAKuL,aAAasrC,oBAEzB,MAAlB1H,UDmBD,SAA4BkzF,EAAwBI,G,0CACzD,IAAKA,GAAyB,IAAbA,EAEf,kBADMziI,KAAK0iI,eAAeL,IAI5B,MAAM5pF,EAAO7uC,KAAKC,MAAQ44H,QACpBL,GAAqBC,EAAa5pF,EAC1C,G,CC1BYkqF,CAAaZ,GAA0C,IAAjB5yF,GAEhD,G,6SCpBK,MAAMyzF,GACX9iI,YAAoB2+F,GAAA,KAAAA,gBAAAA,CAAmC,CAEjDokC,qBAAqB1sC,G,0CACzB,IAAKA,EAAIjxF,GACP,MAAM,IAAI9E,MAAM,sDAGlB,MAAMylD,QAAgB7lD,KAAK8iI,mBAAmB3sC,EAAIjxF,UAC5ClF,KAAKy+F,gBAAgB29B,gBACzB,CACE,CACEF,QAAS,EACT/lC,IAAKA,EACLtwC,QAASA,IAGbswC,GACA,EAEJ,G,CAEM4sC,+BAA+B5sC,EAAsB3zB,G,0CACzD,IAAK2zB,EAAIjxF,GACP,MAAM,IAAI9E,MAAM,sDAGlB,MAAMylD,QAAgB7lD,KAAK8iI,mBAAmB3sC,EAAIjxF,UAC5ClF,KAAKy+F,gBAAgBw8B,WAAW,CACpC9kC,IAAKA,EACL3zB,OAAQA,EACR03D,YAAa,CACX,CACEgC,QAAS,EACT/lC,IAAKA,EACLtwC,QAASA,IAGbo2E,cAAc,EACdT,sBAAsB,EACtBC,iBAAiB,EACjBC,mBAAmB,EACnBC,iBAAiB,EACjBC,mBAAmB,GAEvB,G,CAEckH,mBAAmB/sC,G,0CAC/B,OAAO,IAAI7sF,SAAQ,CAACC,EAAS2oD,KAC3B+gC,OAAOmD,KAAKK,YACVN,EACA,CACE7E,QAAS,kCAEVnxF,IACK8yF,OAAOpB,QAAQ6E,UACjBxkC,EAAO+gC,OAAOpB,QAAQ6E,WAIxBntF,EAAQpJ,EAAS,GAEpB,GAEL,G,6SCtBF,MAAM,GAAkB,IAAIuoH,IAC1Bp/G,QAAQ4oD,OAAc,sEAEjB,MAAMkxE,GACXljI,YACUm3C,EACAurF,EACAS,EACA/+G,EACAg+C,EACA83D,EACAC,GANA,KAAAhjF,gBAAAA,EACA,KAAAurF,4BAAAA,EACA,KAAAS,eAAAA,EACA,KAAA/+G,YAAAA,EACA,KAAAg+C,cAAAA,EACA,KAAA83D,YAAAA,EACA,KAAAC,uBAAAA,CACP,CAEH54H,iBAAuBgiG,G,0CACrB,MAAM1wD,EAAe,IAAI9b,GAAaM,GAAa6+E,IAC7CyR,EAAoE,CACxEzK,kBAAmB,CACjBpuF,eAAgB,IAElBoqF,6BAA8B,CAC5BtwG,IAAKxG,MAEPg3G,sBAAuB,CACrB/9E,gBAAgB,GAElBoqF,mBAAoB,CAClB/B,eAAgB3wB,OAAOoF,KAAKC,iBAE9BytB,2BAA4B,CAC1B/2F,eAAgB,IAElBqoF,kBAAmB,CACjBr9E,OAAO,GAETkjF,4BAA6B,CAC3BhrB,kBAAmB,GACnBD,uBAAwB,GACxBnpF,IAAKxG,MAEP03G,6BAA8B,CAC5BjnE,aAAcA,GAEhBmnE,oBAAqB,CACnBnnE,aAAcA,IAIZuwF,EAAqC,IAAIZ,SACvCjZ,GAAiChmB,EAAgBokB,SACjD/N,GAAoBrW,EAAgBokB,IAGtCryB,EAAkB,IAAIwtC,SACpBd,GAAuBz+B,EAAgBokB,IAG/C,OAAO,IAAIub,IACRxrH,GAAYy/B,GAAgBz/B,EAAQ2+E,IAAK3+E,EAAQo4C,QACjDumC,GAAQ+sC,EAAmCV,4BAA4BrsC,KACxE,CAACA,EAAK3zB,IAAW4yB,EAAgB2tC,+BAA+B5sC,EAAK3zB,UAC/DkjD,GAAmBriB,EAAgBokB,SACnCb,GAAqBvjB,EAAgBokB,SACrCyB,GAAmB7lB,EAAgBokB,SACnC0B,GAA8B9lB,EAAgBokB,GAExD,G,CAEApmH,yBACE44B,EACAk8D,EACAkN,EAAiC,CAAC,G,0CAElC,MAAMzF,QAAkColC,GAA0Bta,UAAUrlB,SACtEzF,EAA0BG,IAAI9jE,EAAMk8D,EAC5C,G,CAEA90F,uBACEmS,EACAwqF,EACAqF,G,0CAEA,GACsB,oBAApB7vF,EAAQ09E,SACgB,4BAAxB19E,EAAQzS,KAAKkG,OAEb,OAGF,MAAM22F,QAAkColC,GAA0Bta,UAAUrlB,SACtEzF,EAA0BG,IAC9BvqF,EAAQzS,KAAKm9F,eAAexhE,IAAI37B,KAChCyS,EAAQzS,KAAKm9F,eAAeF,OAAO7H,IAEvC,G,CAEM4H,IAAI9jE,EAAuCk8D,G,0CAC/C,OAAQl8D,EAAK4tF,YACX,KAAKT,GACH,IAAKjxB,EACH,aAEIn2F,KAAKwiI,4BAA4BrsC,GACvC,MACF,KAAKgxB,GACH,IAAKhxB,EACH,OAEFn2F,KAAKi3C,gBAAgB,CAAE2Y,WAAY5vD,KAAKmjI,cAAchtC,EAAKl8D,GAAOk8D,IAAKA,IACvE,MACF,cACQn2F,KAAKi+F,aAAahkE,EAAMk8D,GAEpC,G,CAEM8H,aAAahkE,EAAuCk8D,G,0CACxD,UAAWn2F,KAAKkkB,YAAYkF,iBAAmBnW,GAAqB2W,SAAU,CAC5E,MAAMu1E,EAAoD,CACxDjB,eAAgB,CACdxhE,IAAK,CAAEw0D,QAASm2B,GAAqBtmH,KAAMk5B,GAC3C+jE,OAAQ,CAAE7H,IAAKA,IAEjBlvF,OAAQ,2BASV,aAPMmqF,GAAW2N,mBACf5I,EACA,uCACAgJ,cAGI/N,GAAW2N,mBAAmB5I,EAAK,kB,CAM3C,MAAMjxF,EAAM+0B,EAAK4tF,WAAsBzhH,MAAM,KAAK,GAClD,IAAIo8D,EACJ,GAAIt9D,IAAOmiH,GAAqB,CAK9B7kD,SADsBxiE,KAAKkiE,cAAc0d,sBAAsBuW,EAAIvwF,MAClDmqB,MAAMjrB,GAAMA,EAAEi7B,WAAalD,GAAmBne,M,KAC1D,CAEL8jD,SADsBxiE,KAAKkiE,cAAc6c,mBACxBhvD,MAAMjrB,GAAMA,EAAEI,KAAOA,G,CAGxC,GAAc,MAAVs9D,EAIJ,OAAQvoC,EAAKmpG,kBACX,KAAKrc,GACH,GAAW,MAAP5wB,EACF,aAEIn2F,KAAKijI,eAAe9sC,EAAK3zB,GAC/B,MACF,KAAKwkD,GACHhnH,KAAKi3C,gBAAgB,CAAE2Y,KAAM4S,EAAOviC,MAAM9mB,SAAUg9E,IAAKA,IACzD,MACF,KAAK8wB,GACHjnH,KAAKi3C,gBAAgB,CAAE2Y,KAAM4S,EAAOviC,MAAM7mB,SAAU+8E,IAAKA,IACzDn2F,KAAKi6H,uBAAuB73D,QAAQjzD,EAAUk0H,4BAA6B7gE,EAAOt9D,IAClF,MACF,KAAKgiH,GACHlnH,KAAKi3C,gBAAgB,CAAE2Y,WAAY5vD,KAAKg6H,YAAYpvD,QAAQpI,EAAOviC,MAAMlB,MAAOo3D,IAAKA,IAG3F,G,CAEcgtC,cAAchtC,EAAsBl8D,G,0CAChD,OAAO,IAAI/wB,SAAgB,CAACC,EAAS2oD,KACnCs/B,GAAW6wC,gBACT9rC,EAAIjxF,GACJ,CAAEgsF,QAAS,qBACX,CAAEgrC,QAASjiG,EAAKiiG,UACf1jH,IACKq6E,OAAOpB,QAAQ6E,UACjBxkC,EAAO+gC,OAAOpB,QAAQ6E,WAIxBntF,EAAQqP,EAAW,GAEtB,GAEL,G,6SCpNK,MAAM8qH,GAoBXjiI,+BACEqhG,EACAimB,G,gDAEM,IAAI2a,GAAYphI,MAAM67F,IAAI,CAC9BhI,MAAO2M,EAAW3M,MAClBwtC,iBAAkB5a,EAClB/yB,SAAU8M,EAAW9M,UAEzB,G,CAEAv0F,8BACEyhG,EACAC,EACA4lB,G,gDAEM,IAAI2a,GAAYphI,MAAM67F,IAAI,CAAEhI,MAAO+M,EAAYygC,iBAAkB5a,GACzE,G,CAEAtnH,6BACE00F,EACAmN,EACA/M,EACAwyB,G,gDAEM,IAAI2a,GAAYphI,MAAM67F,IAAI,CAC9BhI,QACAwtC,iBAAkB5a,EAClB/yB,SAAUO,EAAIP,UAElB,G,CAEAv0F,uBACEmS,EACAm1G,G,0CAEK2a,GAAYE,mBAAmBjwG,SAAS/f,EAAQ09E,iBAI/C,IAAIoyC,GAAYphI,MAAM67F,IAAI,CAAEwlC,iBAAkB5a,IACtD,G,CAEA7oH,YAAY4I,GAzDJ,KAAApH,QAAS,EA0DftB,KAAKyjI,YAAcryC,GAAWsyC,mBAC9B1jI,KAAK84F,cAAgB1H,GAAWuyC,iBAAiBzhI,MACjDlC,KAAK0I,IAAMA,CACb,CAEMq1F,IAAIuF,G,gDAKFtjG,KAAK4jI,aAAatgC,aAAI,EAAJA,EAAMigC,kBAE9B,MAAM1iC,QAAmB7gG,KAAKkkB,YAAYkF,gBAI1C,aAFMppB,KAAK6jI,0BAEHhjC,GACN,KAAK5tF,GAAqBqW,gBAClBtpB,KAAK8jI,eACX,MAEF,KAAK7wH,GAAqB4W,aAClB7pB,KAAK+jI,YACX,MAEF,KAAK9wH,GAAqB2W,SAAU,CAClC,MAAMusE,QAAYn2F,KAAK6oH,OAAOvlB,aAAI,EAAJA,EAAMvN,MAAOuN,aAAI,EAAJA,EAAM1N,gBAC3C51F,KAAKgkI,YAAY,CAAE7tC,MAAKP,SAAUO,aAAG,EAAHA,EAAKP,WAC7C,K,EAGN,G,CAEMkuC,e,gDACE9jI,KAAKikI,aAAa,eAClBjkI,KAAKkkI,gBACb,G,CAEMH,Y,gDACE/jI,KAAKikI,aAAa,iBAClBjkI,KAAKkkI,gBACb,G,CAEcA,iB,0CACZ,MAAMluC,QAAa5E,GAAW43B,gBAClB,MAARhzB,GACFA,EAAK3vF,SAAe8vF,GAAQ,mCACZ,MAAVA,EAAIjxF,WACAlF,KAAKmkI,aAAa,GAAIhuC,EAAIjxF,IAEpC,KAEJ,G,CAEM8+H,YAAY1gC,G,wDACVtjG,KAAK4jI,qBAEL5jI,KAAKikI,aAAa,IAGxB,SADkCjkI,KAAKuL,aAAam/F,yBAElD,OAGF,MAAMpuF,QAAgBtc,KAAKkiE,cAAc0d,sBAA+B,QAAT,EAAA0jB,aAAI,EAAJA,EAAMnN,WAAG,eAAEvwF,KAC1E,IAAIw+H,EAA8B,GAAlB9nH,EAAQ5b,OAAc,GAAK4b,EAAQ5b,OAAO2C,WACtDiZ,EAAQ5b,OAAS,IACnB0jI,EAAY,YAERpkI,KAAKmkI,aAAaC,EAAoB,QAAT,EAAA9gC,aAAI,EAAJA,EAAMnN,WAAG,eAAEjxF,G,IAGhD2+H,wBAAwB37H,EAAQ,W,OACV,QAAhB,EAAAlI,KAAKyjI,mBAAW,eAAEI,0BACpB7jI,KAAKyjI,YAAYI,wBAAwB,CAAE37H,UAEzClI,KAAKqkI,eAAerkI,KAAK84F,gBAC3B94F,KAAK84F,cAAc+qC,wBAAwB,CAAE37H,SAEjD,CAEAi8H,aAAav0E,EAAcmmC,GACzB/1F,KAAKskI,cAAc10E,EAAMmmC,GACzB/1F,KAAKukI,eAAe30E,EAAMmmC,EAC5B,CAEMkuC,aAAaO,EAAoB5uC,G,0CACrC,MAAMp+E,EAAuB,CAC3B46C,KAAM,CACJ,GAAI,iBAAmBoyE,EAAa,OACpC,GAAI,iBAAmBA,EAAa,SAGpC5uC,GAAYhE,GAA4BI,cAC1Cx6E,EAAQo+E,SAAWA,SAGf51F,KAAKykI,cAAcjtH,SACnBxX,KAAK0kI,qBAAqBltH,EAClC,G,CAEQ8sH,cAAc10E,EAAcmmC,G,OACd,QAAhB,EAAA/1F,KAAKyjI,mBAAW,eAAEU,eACpBnkI,KAAKyjI,YAAYU,aAAa,CAAEv0E,OAAMmmC,SAE1C,CAEQwuC,eAAe30E,EAAcmmC,GACnC,GAAI/1F,KAAKqkI,eAAerkI,KAAK84F,eAC3B94F,KAAK84F,cAAcqrC,aAAa,CAAEv0E,OAAMmmC,eACnC,GAAI/1F,KAAK84F,cAAe,CAE7B,MAAMn7D,EAAQ,aAAY,EAAMuqF,cAAct4D,GAAQ,GAAK,KAAKA,MAChE5vD,KAAK84F,cAAc6rC,SAAS,CAAEhnG,QAAOo4D,S,CAEzC,CAEc0uC,cAAcjtH,G,iDACL,QAAhB,EAAAxX,KAAKyjI,mBAAW,eAAEmB,WAInB5kI,KAAK6kI,gBACP7kI,KAAKyjI,YAAYmB,QAAQptH,SAEnB,IAAItO,SAAeC,GAAYnJ,KAAKyjI,YAAYmB,QAAQptH,GAAS,IAAMrO,Q,IAInEu7H,qBAAqBltH,G,iDACV,QAAlB,EAAAxX,KAAK84F,qBAAa,eAAE8rC,WAIrB5kI,KAAKqkI,eAAerkI,KAAK84F,qBACrB,IAAI5vF,SAAeC,GACtBnJ,KAAK84F,cAAqC8rC,QAAQptH,GAAS,IAAMrO,cAG9DnJ,KAAK84F,cAAc8rC,QAAQptH,G,IAIvBqxG,OAAO9yB,EAAgBH,G,oDACnC,OAK8E,QAJ3E,EAG0E,QAH3E,EAAgC,QAAhC,QAAOxE,GAAWy3B,OAAO9yB,UAAO,QAC/BH,QACSxE,GAAWsE,eAAe,CAAEC,QAAQ,EAAMC,mBAC1CxE,GAAWsE,eAAe,CAAEC,QAAQ,EAAMM,eAAe,WAAQ,cACpE7E,GAAWsE,eAAe,CAAEC,QAAQ,EAAMmvC,mBAAmB,WAAQ,cACrE1zC,GAAWsE,eAAe,CAAEC,QAAQ,G,IAInCkvC,sBACV,OACEjzC,GAA4BI,aAAeJ,GAA4Bc,SAAS1yF,KAAK0I,IAEzF,CAEck7H,aAAamB,G,0CACzB,GAAI/kI,KAAKsB,OACP,OAAOtB,KAGT,MAAM2oH,EAAwCoc,GAAwB,CAAC,EACjEzhC,EAAO,CACX0V,6BAA8B,CAAEtwG,IAAKxG,MACrCg3G,sBAAuB,CAAE/9E,gBAAgB,GACzC87E,kBAAmB,CAAEr9E,OAAO,GAC5BkjF,4BAA6B,CAC3BjrB,uBAAwB,CAACl7C,EAAwBk9C,IAC/C3qF,QAAQ4oD,OAAO,mBACjBggC,kBAAmB,IAAM5oF,QAAQ4oD,OAAO,mBACxCppD,IAAKxG,MAEP43G,oBAAqB,CACnBnnE,aAAc,IAAI9b,GAAaM,GAAa6+E,KAE9C4D,6BAA8B,CAC5BjnE,aAAc,IAAI9b,GAAaM,GAAa6+E,KAE9CgH,kBAAmB,CACjBpuF,eAAgB,IAAM1lB,QAAQ4oD,OAAO,oBAEvC6zD,2BAA4B,CAC1B/2F,eAAgB,IAAM1lB,QAAQ4oD,OAAO,oBAEvCyzD,mBAAoB,CAClB/B,eAAgBpyB,GAAW8G,cAAch2F,QAiB7C,OAdAlC,KAAKuL,mBAAqBmuG,GAAoBiP,EAAcrlB,GAC5DtjG,KAAKkkB,kBAAoBwhG,GAAmBiD,EAAcrlB,GAC1DtjG,KAAKkiE,oBAAsB0kD,GAAqB+B,EAAcrlB,GAGzDphG,KAAKiG,2BACR,IAAIsyB,GACFkuF,EAAal3G,cACbk3G,EAAarzG,gBACbolB,eAAex4B,MAGnBlC,KAAKsB,QAAS,EAEPtB,IACT,G,CAEQqkI,eACNv3D,GAEA,OAAiB,MAAVA,GAAiE,MAA9CA,EAA8Bq3D,YAC1D,EA5QwB,GAAAX,mBAAqB,CAC3C,cACA,WACA,WACA,gBACA,sBACA,eACA,cACA,iB,2bChCG,IAAMwB,GAAN,cAAiC5f,GAItCtlH,YAAY0jH,EAAgCj4G,GAC1CzK,MAAM0iH,GADoC,KAAAj4G,aAAAA,CAE5C,GALA,IAACwvF,GAAY,CAAE9B,YAActxF,GAAcA,I,iBACxB8xF,GAAA,I,+BAFRurC,GAAkB,IAD9BzqC,G,+BAK2DuC,MAJ/CkoC,ICPE,MAAMC,GACnBx5H,KAAKisF,EAAoBC,EAAW,CAAC,GACnC,MAAMnkF,EAAUrM,OAAOC,OAAO,CAAC,EAAG,CAAE8pF,QAASwG,GAAcC,GAC1Dv2F,OAAe8jI,kCAAkC1xH,EACpD,E,2SCEK,MAAM2xH,WAAiBpvH,GAM5BjW,YAAYkH,GACVlG,QACW,MAAPkG,IAIJhH,KAAKg9B,KAAOh2B,EAAIg2B,KAChBh9B,KAAKgW,iBACHhW,KACAgH,EACA,CACE9B,GAAI,KACJ+3B,SAAU,KACVF,SAAU,MAEZ,CAAC,KAAM,aAEX,CAEM5nB,QAAQrE,G,0CASZ,aARmB9Q,KAAKsW,WACtB,IAAIqtF,GAAa3jG,MACjB,CACE+8B,SAAU,MAEZ,KACAjsB,EAGJ,G,CAEAzP,gBAAgB2F,GACd,OAAW,MAAPA,EACK,KAGFG,OAAOC,OAAO,IAAI+9H,GAAYn+H,EAAK,CACxC+1B,SAAU1oB,GAAUoH,SAASzU,EAAI+1B,WAErC,EC7CK,MAAMqoG,WAAiBrvH,GAI5BjW,YAAYkH,GACVlG,QACW,MAAPkG,IAIJhH,KAAK6vD,OAAS7oD,EAAI6oD,OAClB7vD,KAAKgW,iBACHhW,KACAgH,EACA,CACE4oD,KAAM,MAER,IAEJ,CAEAz6C,QAAQrE,GACN,OAAO9Q,KAAKsW,WACV,IAAIstF,GAAa5jG,MACjB,CACE4vD,KAAM,MAER,KACA9+C,EAEJ,CAEAzP,gBAAgB2F,GACd,OAAW,MAAPA,EACK,KAGFG,OAAOC,OAAO,IAAIg+H,GAAYp+H,EAAK,CACxC4oD,KAAMv7C,GAAUoH,SAASzU,EAAI4oD,OAEjC,E,2SCpCK,MAAMy1E,WAAatvH,GAkBxBjW,YAAYkH,GAEV,GADAlG,QACW,MAAPkG,EA2BJ,OAvBAhH,KAAKgW,iBACHhW,KACAgH,EACA,CACE9B,GAAI,KACJ6qD,SAAU,KACVruD,KAAM,KACNm+B,MAAO,KACP/uB,IAAK,MAEP,CAAC,KAAM,aAGT9Q,KAAKyK,KAAOzD,EAAIyD,KAChBzK,KAAKgwD,eAAiBhpD,EAAIgpD,eAC1BhwD,KAAKiwD,YAAcjpD,EAAIipD,YACvBjwD,KAAKoZ,SAAWpS,EAAIoS,SACpBpZ,KAAK6qD,SAAW7jD,EAAI6jD,SACpB7qD,KAAK+tB,aAAmC,MAApB/mB,EAAI+mB,aAAuB,IAAInkB,KAAK5C,EAAI+mB,cAAgB,KAC5E/tB,KAAKmwD,aAAmC,MAApBnpD,EAAImpD,aAAuB,IAAIvmD,KAAK5C,EAAImpD,cAAgB,KAC5EnwD,KAAKkwD,eAAuC,MAAtBlpD,EAAIkpD,eAAyB,IAAItmD,KAAK5C,EAAIkpD,gBAAkB,KAClFlwD,KAAKqwD,UAAYrpD,EAAIqpD,UAEbrwD,KAAKyK,MACX,KAAK8sE,GAASpN,KACZnqE,KAAK4vD,KAAO,IAAIw1E,GAASp+H,EAAI4oD,MAC7B,MACF,KAAK2nB,GAASW,KACZl4E,KAAKswD,KAAO,IAAI60E,GAASn+H,EAAIspD,MAKnC,CAEMn7C,U,0CACJ,MAAMszB,EAAQ,IAAIq7D,GAAS9jG,MAErByR,EAAgB,EAAM8D,sBAAsBG,mBAElD,IACE+yB,EAAM33B,UAAYW,EAAcub,eAAehtB,KAAK8Q,IAAK,MACzD23B,EAAM07D,gBAAkB1yF,EAAcyvG,YAAYz4E,EAAM33B,I,CACxD,MAAOvI,G,CAcT,aAVMvI,KAAKsW,WACTmyB,EACA,CACE/mC,KAAM,KACNm+B,MAAO,MAET,KACA4I,EAAM07D,WAGAnkG,KAAKyK,MACX,KAAK8sE,GAASW,KACZzvC,EAAM6nB,WAAatwD,KAAKswD,KAAKn7C,QAAQszB,EAAM07D,WAC3C,MACF,KAAK5sB,GAASpN,KACZ1hC,EAAMmnB,WAAa5vD,KAAK4vD,KAAKz6C,QAAQszB,EAAM07D,WAM/C,OAAO17D,CACT,G,CAEApnC,gBAAgB2F,GACd,GAAW,MAAPA,EACF,OAAO,KAGT,MAAM+mB,EAAmC,MAApB/mB,EAAI+mB,aAAuB,KAAO,IAAInkB,KAAK5C,EAAI+mB,cAC9DmiC,EAAuC,MAAtBlpD,EAAIkpD,eAAyB,KAAO,IAAItmD,KAAK5C,EAAIkpD,gBAClEC,EAAmC,MAApBnpD,EAAImpD,aAAuB,KAAO,IAAIvmD,KAAK5C,EAAImpD,cAEpE,OAAOhpD,OAAOC,OAAO,IAAIi+H,GAAQr+H,EAAK,CACpC8J,IAAKuD,GAAUoH,SAASzU,EAAI8J,KAC5BpP,KAAM2S,GAAUoH,SAASzU,EAAItF,MAC7Bm+B,MAAOxrB,GAAUoH,SAASzU,EAAI64B,OAC9B+vB,KAAMw1E,GAAS3pH,SAASzU,EAAI4oD,MAC5BU,KAAM60E,GAAS1pH,SAASzU,EAAIspD,MAC5BviC,eACAmiC,iBACAC,gBAEJ,E,2SC1GK,MAAMm1E,GAOXxlI,YACU2R,EACAhL,EACA+kB,EACAjgB,GAHA,KAAAkG,cAAAA,EACA,KAAAhL,YAAAA,EACA,KAAA+kB,sBAAAA,EACA,KAAAjgB,aAAAA,EAVA,KAAAg6H,OAAkC,IAAI9sG,GAAA,EAAgB,IACtD,KAAA+sG,WAA0C,IAAI/sG,GAAA,EAAgB,IAExE,KAAAgtG,OAASzlI,KAAKulI,OAAOj7G,eACrB,KAAAo7G,WAAa1lI,KAAKwlI,WAAWl7G,eAQ3BtqB,KAAKuL,aAAa+kF,uBACf/mF,MACC,EAAAqvB,GAAA,IAAiB23D,GAAa,mCAC5B,GAA8C,MAA1C,EAAMvuF,OAAOmG,0BACf,OAGF,IAAKooF,EAGH,OAFAvwF,KAAKulI,OAAOn7G,KAAK,SACjBpqB,KAAKwlI,WAAWp7G,KAAK,IAIvB,MAAMrpB,QAAaf,KAAKuL,aAAa2iG,0BAE/BluG,KAAKywF,kBAAkB1vF,EAC/B,OAED+3B,WACL,CAEMokD,a,gDACEl9E,KAAKwlI,WAAWp7G,KAAK,GAC7B,G,CAEMiC,QACJoc,EACA6nB,EACAl3C,EACAtI,G,0CAEA,IAAI60H,EAA2B,KAC/B,MAAMl6H,EAAO,IAAI45H,GAUjB,GATA55H,EAAKvG,GAAKujC,EAAMvjC,GAChBuG,EAAKhB,KAAOg+B,EAAMh+B,KAClBgB,EAAKo/C,SAAWpiB,EAAMoiB,SACtBp/C,EAAK4kD,UAAY5nB,EAAM4nB,UACvB5kD,EAAKukD,eAAiBvnB,EAAMunB,eACX,MAAbvnB,EAAM33B,MACR23B,EAAM33B,UAAY9Q,KAAKwrB,sBAAsBiC,YAAY,IACzDgb,EAAM07D,gBAAkBnkG,KAAKyR,cAAcyvG,YAAYz4E,EAAM33B,MAE/C,MAAZsI,EAAkB,CACpB,MAAMwsH,QAAqB5lI,KAAKwrB,sBAAsBksB,OACpDt+B,EACAqvB,EAAM33B,IACN,SxXjE2B,KwXoE7BrF,EAAK2N,SAAW,EAAMxV,gBAAgBgiI,E,CAKxC,GAHAn6H,EAAKqF,UAAY9Q,KAAKyR,cAAc4a,QAAQoc,EAAM33B,IAAKA,GACvDrF,EAAK/J,WAAa1B,KAAKyR,cAAc4a,QAAQoc,EAAM/mC,KAAM+mC,EAAM07D,WAC/D14F,EAAKo0B,YAAc7/B,KAAKyR,cAAc4a,QAAQoc,EAAM5I,MAAO4I,EAAM07D,WAC7D14F,EAAKhB,OAAS8sE,GAASpN,KACzB1+D,EAAKmkD,KAAO,IAAIw1E,GAChB35H,EAAKmkD,KAAKA,WAAa5vD,KAAKyR,cAAc4a,QAAQoc,EAAMmnB,KAAKA,KAAMnnB,EAAM07D,WACzE14F,EAAKmkD,KAAKC,OAASpnB,EAAMmnB,KAAKC,YACzB,GAAIpkD,EAAKhB,OAAS8sE,GAASW,OAChCzsE,EAAK6kD,KAAO,IAAI60E,GACJ,MAAR70E,GACF,GAAIA,aAAgBt0C,YAAa,CAC/B,MAAOta,EAAMX,SAAcf,KAAK6lI,gBAC9Bp9F,EAAM6nB,KAAKvzB,SACXuzB,EACA7nB,EAAM07D,WAER14F,EAAK6kD,KAAKvzB,SAAWr7B,EACrBikI,EAAW5kI,C,MAEX4kI,QAAiB3lI,KAAK8lI,UAAUr6H,EAAM6kD,EAAM7nB,EAAM07D,WAKxD,MAAO,CAAC14F,EAAMk6H,EAChB,G,CAEAl4H,IAAIvI,GAEF,OADclF,KAAKulI,OAAO7rG,WACb3J,MAAMtkB,GAASA,EAAKvG,KAAOA,GAC1C,CAEM4rF,aAAa5rF,G,0CACjB,MAAMsX,QAAcxc,KAAKuL,aAAa2iG,oBAEtC,OAAa,MAAT1xF,GAAkBA,EAAM5O,eAAe1I,GAIpC,IAAImgI,GAAK7oH,EAAMtX,IAHb,IAIX,G,CAEM2I,S,0CACJ,MAAM2O,QAAcxc,KAAKuL,aAAa2iG,oBAChCnuG,EAAmB,GACzB,IAAK,MAAMmF,KAAMsX,EAEXA,EAAM5O,eAAe1I,IACvBnF,EAAS+N,KAAK,IAAIu3H,GAAK7oH,EAAMtX,KAGjC,OAAOnF,CACT,G,CAEMotF,2B,0CACJ,IAAI44C,QAAiB/lI,KAAKuL,aAAa2+F,oBACvC,GAAgB,MAAZ67B,EACF,OAAOA,EAGTA,EAAW,GAEX,WADqB/lI,KAAKyR,cAAcqV,cAEtC,MAAM,IAAI1mB,MAAM,sBAGlB,MAAMoW,EAA2B,GAUjC,aAToBxW,KAAK6N,UACnBxH,SAASoF,IACb+K,EAAS1I,KAAKrC,EAAK0J,UAAUwB,MAAM6pB,GAAMulG,EAASj4H,KAAK0yB,KAAI,UAGvDt3B,QAAQ4N,IAAIN,GAClBuvH,EAASnyG,KAAK,EAAMuyD,gBAAgBnmF,KAAKyG,YAAa,eAEhDzG,KAAKuL,aAAa4+F,kBAAkB47B,GACnCA,CACT,G,CAEMp5H,OAAOlB,G,0CACX,IAAI+Q,QAAcxc,KAAKuL,aAAa2iG,oBAIpC,GAHa,MAAT1xF,IACFA,EAAQ,CAAC,GAEP/Q,aAAgBwsE,GAAU,CAC5B,MAAMtwE,EAAI8D,EACV+Q,EAAM7U,EAAEzC,IAAMyC,C,MAEb8D,EAAoBpF,SAASsB,IAC5B6U,EAAM7U,EAAEzC,IAAMyC,CAAC,UAIb3H,KAAK8D,QAAQ0Y,EACrB,G,CAEMuU,MAAM9kB,G,0CACI,MAAVA,GAAkBA,UAAiBjM,KAAKuL,aAAaa,eACvDpM,KAAKulI,OAAOn7G,KAAK,IACjBpqB,KAAKwlI,WAAWp7G,KAAK,WAEjBpqB,KAAKuL,aAAa4+F,kBAAkB,KAAM,CAAEl+F,OAAQA,UACpDjM,KAAKuL,aAAa4iG,kBAAkB,KAAM,CAAEliG,OAAQA,GAC5D,G,CAEMwiC,OAAOvpC,G,0CACX,MAAMsX,QAAcxc,KAAKuL,aAAa2iG,oBACtC,GAAa,MAAT1xF,EAAJ,CAIA,GAAkB,iBAAPtX,EAAiB,CAC1B,GAAiB,MAAbsX,EAAMtX,GACR,cAEKsX,EAAMtX,E,MAEZA,EAAgBmB,SAAS3D,WACjB8Z,EAAM9Z,EAAE,UAIb1C,KAAK8D,QAAQ0Y,E,CACrB,G,CAEM1Y,QAAQ0Y,G,gDACNxc,KAAKywF,kBAAkBj0E,SACvBxc,KAAKuL,aAAa4iG,kBAAkB3xF,EAC5C,G,CAEQspH,UAAUr6H,EAAY6kD,EAAYx/C,GACxC,OAAO,IAAI5H,SAAQ,CAACC,EAAS2oD,KAC3B,MAAMgwB,EAAS,IAAIC,WACnBD,EAAOE,kBAAkB1xB,GACzBwxB,EAAOG,OAAgBC,GAAQ,mCAC7B,IACE,MAAOxgF,EAAMX,SAAcf,KAAK6lI,gBAC9Bv1E,EAAK5uD,KACLwgF,EAAIj7E,OAAOsc,OACXzS,GAEFrF,EAAK6kD,KAAKvzB,SAAWr7B,EACrByH,EAAQpI,E,CACR,MAAOwH,GACPupD,EAAOvpD,E,CAEX,IACAu5E,EAAOO,QAAU,KACfvwB,EAAO,sBAAsB,CAC9B,GAEL,CAEc+zE,gBACZ9oG,EACAh8B,EACA+P,G,0CAIA,MAAO,OAFmB9Q,KAAKyR,cAAc4a,QAAQ0Q,EAAUjsB,SACrC9Q,KAAKyR,cAAc+pB,eAAe,IAAIp5B,WAAWrB,GAAO+P,GAEpF,G,CAEc2/E,kBAAkBu1C,G,0CAC9B,MAAMxpH,EAAQrV,OAAO6jF,OAAOg7C,GAAY,CAAC,GAAGhlI,KAAKw/B,GAAM,IAAI6kG,GAAK7kG,KAChExgC,KAAKulI,OAAOn7G,KAAK5N,UAEPxc,KAAKyR,cAAcqV,eAC3B9mB,KAAKwlI,WAAWp7G,WAAWpqB,KAAKimI,aAAazpH,GAEjD,G,CAEcypH,aAAazpH,G,0CACzB,MAAM0pH,EAAsB1pH,EAAMxb,KAAK2G,GAAMA,EAAEwN,YACzCgxH,QAAuBj9H,QAAQ4N,IAAIovH,GAGzC,OADAC,EAAevyG,KAAK,EAAMuyD,gBAAgBnmF,KAAKyG,YAAa,SACrD0/H,CACT,G,6bC7PK,IAAMC,GAAN,cAAiCd,KACtC,IAACvqC,GAAY,CAAE9B,YAAaosC,GAAK5pH,SAAUy9E,aAAc,U,iBACvCzgE,GAAA,I,8BAClB,IAACsiE,GAAY,CAAE9B,YAAa6K,GAASroF,SAAUy9E,aAAc,U,iBACvCzgE,GAAA,I,kCAJX2tG,GAAkB,IAD9B7rC,IACY6rC,I,2SCON,MAAM,GAGXtmI,YACUoiE,EACAilB,EACAW,EACAr2E,EACEuN,EACFsC,EACAo7D,EACAnxE,EACA2Y,EACAmiH,EACAC,EAAqD,KACrDC,EAA0E,MAX1E,KAAArkE,cAAAA,EACA,KAAAilB,cAAAA,EACA,KAAAW,kBAAAA,EACA,KAAAr2E,cAAAA,EACE,KAAAuN,qBAAAA,EACF,KAAAsC,iBAAAA,EACA,KAAAo7D,cAAAA,EACA,KAAAnxE,aAAAA,EACA,KAAA2Y,YAAAA,EACA,KAAAmiH,4BAAAA,EACA,KAAAC,eAAAA,EACA,KAAAC,kBAAAA,EAdF,KAAAjlI,QAAS,CAed,CAEGgJ,KAAKy4D,G,0CACL/iE,KAAKsB,eAIHtB,KAAKwmI,iCAEXxmI,KAAKsB,QAAS,EACVyhE,GACF/iE,KAAKymI,aAET,G,CAEAA,aACEzmI,KAAK0mI,oBACLhwF,aAAY,IAAM12C,KAAK0mI,qBAAqB,IAC9C,CAEMA,oB,0CACJ,SAAU1mI,KAAKgf,qBAAqBm0E,aAClC,OAGF,MAAMh9C,QAAiB,EAAA5pC,EAAA,GAAevM,KAAKuL,aAAa6qC,WACxD,IAAK,MAAMnqC,KAAUkqC,EACL,MAAVlqC,UAAyBjM,KAAK2mI,WAAW16H,YACrCjM,KAAK4mI,qBAAqB36H,GAGtC,G,CAEM46H,KAAK56H,G,0CAET,WADqBjM,KAAKuL,aAAa8d,mBAAmB,CAAEpd,OAAQA,KAElE,cAG6B,EAAAM,EAAA,GAC7BvM,KAAKqmI,4BAA4Bj5D,kCAEG75C,SAASm5C,GAAmB0B,cAE1DpuE,KAAK8oB,OAAO7c,IAGN,MAAVA,GAAkBA,WAAkBjM,KAAKuL,aAAaa,eACxDpM,KAAK08E,cAAc5U,mBACb9nE,KAAKmnF,cAAcjK,oBAGrBl9E,KAAKuL,aAAa8iE,qBAAoB,EAAM,CAAEpiE,OAAQA,UACtDjM,KAAKuL,aAAa+8F,qBAAqB,KAAM,CAAEr8F,OAAQA,UACvDjM,KAAKuL,aAAay9F,uBAAuB,KAAM,CAAE/8F,OAAQA,UAEzDjM,KAAKyR,cAAcqsG,cAAa,EAAO7xG,SACvCjM,KAAKyR,cAAc6sG,eAAeryG,SAClCjM,KAAKyR,cAAcguG,cAAa,EAAMxzG,SACtCjM,KAAKyR,cAAcgvG,cAAa,EAAMx0G,SAEtCjM,KAAKkiE,cAAcgb,WAAWjxE,SAC9BjM,KAAK8nF,kBAAkB5K,WAAWjxE,GAExCjM,KAAKshB,iBAAiB7V,KAAK,SAAU,CAAEQ,OAAQA,IAEpB,MAAvBjM,KAAKsmI,uBACDtmI,KAAKsmI,eAAer6H,GAE9B,G,CAEM6c,OAAO7c,G,0CACmB,MAA1BjM,KAAKumI,0BACDvmI,KAAKumI,mBAAkB,EAAOt6H,GAExC,G,CAEc06H,WAAW16H,G,0CACvB,MAAM40F,QAAmB7gG,KAAKkkB,YAAYkF,cAAcnd,GACxD,GACE40F,IAAe5tF,GAAqB4W,QACpCg3E,IAAe5tF,GAAqBqW,UAEpC,OAAO,EAGT,MAAM6oB,QAAqBnyC,KAAKqmI,4BAA4Bt4D,gBAAgB9hE,GAC5E,GAAoB,MAAhBkmC,GAAwBA,EAAe,EACzC,OAAO,EAGT,MAAMf,QAAmBpxC,KAAKuL,aAAagkG,cAAc,CAAEtjG,OAAQA,IACnE,GAAkB,MAAdmlC,EACF,OAAO,EAGT,MAAM01F,EAAqC,GAAf30F,EAE5B,QADqB,IAAIvoC,MAAOD,UAAYynC,GAAc,KACpC01F,CACxB,G,CAEcF,qBAAqB36H,G,iDACL,EAAAM,EAAA,GAC1BvM,KAAKqmI,4BAA4Bn4D,oBAAoBjiE,OAErCygE,GAAmBxI,aAC3BlkE,KAAK8oB,OAAO7c,SACZjM,KAAK6mI,KAAK56H,EACtB,G,CAEcu6H,iC,0CACZ,MAAMrwF,QAAiB,EAAA5pC,EAAA,GAAevM,KAAKuL,aAAa6qC,WACxD,IAAK,MAAMnqC,KAAUkqC,EACL,MAAVlqC,UACIjM,KAAKyR,cAAcoxG,uBAAuB52G,GAGtD,G,6SCjJa,MAAM86H,WAA4B,GAC/CN,aACEzmI,KAAK0mI,oBACD1mI,KAAKgf,qBAAqB0zE,WAC5B1yF,KAAKgnI,cAELtwF,aAAY,IAAM12C,KAAK0mI,qBAAqB,IAEhD,CAKMM,c,0CAEJ,OACE,UACQ/1C,GAAU6C,iBAAiB,SACjC9zF,KAAK0mI,mB,CACL,MAAOn+H,GAEP+xB,QAAQC,IAAI,gCAAiChyB,E,CAGnD,G,6SCdK,MAAM0+H,GAOXnnI,YACU2R,EACAhL,EACAy7D,EACA32D,GAHA,KAAAkG,cAAAA,EACA,KAAAhL,YAAAA,EACA,KAAAy7D,cAAAA,EACA,KAAA32D,aAAAA,EAVA,KAAA27H,SAAsC,IAAIzuG,GAAA,EAAgB,IAC1D,KAAA0uG,aAA8C,IAAI1uG,GAAA,EAAgB,IAE5E,KAAA2uG,SAAWpnI,KAAKknI,SAAS58G,eACzB,KAAA43E,aAAeliG,KAAKmnI,aAAa78G,eAQ/BtqB,KAAKuL,aAAa+kF,uBACf/mF,MACC,EAAAqvB,GAAA,IAAiB23D,GAAa,mCAC5B,GAA8C,MAA1C,EAAMvuF,OAAOmG,0BACf,OAGF,IAAKooF,EAGH,OAFAvwF,KAAKknI,SAAS98G,KAAK,SACnBpqB,KAAKmnI,aAAa/8G,KAAK,IAIzB,MAAMrpB,QAAaf,KAAKuL,aAAakiG,4BAE/BztG,KAAKywF,kBAAkB1vF,EAC/B,OAED+3B,WACL,CAEMokD,a,0CACJl9E,KAAKmnI,aAAa/8G,KAAK,GACzB,G,CAGMiC,QAAQoc,EAAmB33B,G,0CAC/B,MAAM6uE,EAAS,IAAI0L,GAGnB,OAFA1L,EAAOz6E,GAAKujC,EAAMvjC,GAClBy6E,EAAOj+E,WAAa1B,KAAKyR,cAAc4a,QAAQoc,EAAM/mC,KAAMoP,GACpD6uE,CACT,G,CAEMlyE,IAAIvI,G,0CAGR,OAFgBlF,KAAKknI,SAASxtG,WAEf3J,MAAM4vD,GAAWA,EAAOz6E,KAAOA,GAChD,G,CAEMqoF,kB,0CACJ,MAAMhxE,QAAgBvc,KAAKuL,aAAakiG,sBAClC1tG,EAAqB,GAC3B,IAAK,MAAMmF,KAAMqX,EAEXA,EAAQ3O,eAAe1I,IACzBnF,EAAS+N,KAAK,IAAIu9E,GAAO9uE,EAAQrX,KAGrC,OAAOnF,CACT,G,CAMM+wF,aAAa5rF,G,0CACjB,MACMy6E,SADmB3/E,KAAKuL,aAAakiG,uBACjBvoG,GAC1B,OAAc,MAAVy6E,EACK,KAGF,IAAI0L,GAAO1L,EACpB,G,CAKMwN,2B,0CACJ,MAAMpsF,QAAaf,KAAKuL,aAAakiG,sBAC/BlxF,EAAUpV,OAAO6jF,OAAOjqF,GAAQ,CAAC,GAAGC,KAAKw/B,GAAM,IAAI6qD,GAAO7qD,KAEhE,OAAOxgC,KAAKqnI,eAAe9qH,EAC7B,G,CAEM5P,OAAOgzE,G,0CACX,IAAIpjE,QAAgBvc,KAAKuL,aAAakiG,sBAKtC,GAJe,MAAXlxF,IACFA,EAAU,CAAC,GAGTojE,aAAkBqH,GAAY,CAChC,MAAMxmD,EAAIm/C,EACVpjE,EAAQikB,EAAEt7B,IAAMs7B,C,MAEfm/C,EAAwBt5E,SAASm6B,IAChCjkB,EAAQikB,EAAEt7B,IAAMs7B,CAAC,UAIfxgC,KAAKywF,kBAAkBl0E,SACvBvc,KAAKuL,aAAamiG,oBAAoBnxF,EAC9C,G,CAEMzY,QAAQyY,G,gDACNvc,KAAKywF,kBAAkBl0E,SACvBvc,KAAKuL,aAAamiG,oBAAoBnxF,EAC9C,G,CAEMwU,MAAM9kB,G,0CACI,MAAVA,GAAkBA,UAAiBjM,KAAKuL,aAAaa,eACvDpM,KAAKknI,SAAS98G,KAAK,IACnBpqB,KAAKmnI,aAAa/8G,KAAK,WAEnBpqB,KAAKuL,aAAamiG,oBAAoB,KAAM,CAAEzhG,OAAQA,GAC9D,G,CAEMwiC,OAAOvpC,G,0CACX,MAAMqX,QAAgBvc,KAAKuL,aAAakiG,sBACxC,GAAe,MAAXlxF,EACF,OAGF,GAAkB,iBAAPrX,EAAiB,CAC1B,GAAmB,MAAfqX,EAAQrX,GACV,cAEKqX,EAAQrX,E,MAEdA,EAAgBmB,SAAS3D,WACjB6Z,EAAQ7Z,EAAE,UAIf1C,KAAKywF,kBAAkBl0E,SACvBvc,KAAKuL,aAAamiG,oBAAoBnxF,GAG5C,MAAMD,QAAgBtc,KAAKuL,aAAaszE,sBACxC,GAAe,MAAXviE,EAAiB,CACnB,MAAMgrH,EAAwB,GAC9B,IAAK,MAAMC,KAAOjrH,EACZA,EAAQirH,GAAK/nG,WAAat6B,IAC5BoX,EAAQirH,GAAK/nG,SAAW,KACxB8nG,EAAQx5H,KAAKwO,EAAQirH,KAGrBD,EAAQ5mI,OAAS,GACnBV,KAAKkiE,cAAcv1D,OAAO26H,E,CAGhC,G,CAEc72C,kBAAkBrD,G,0CAC9B,MAAM7wE,EAAUpV,OAAO6jF,OAAOoC,GAAc,CAAC,GAAGpsF,KAAKw/B,GAAM,IAAI6qD,GAAO7qD,KAEtExgC,KAAKknI,SAAS98G,KAAK7N,UAETvc,KAAKyR,cAAcqV,eAC3B9mB,KAAKmnI,aAAa/8G,WAAWpqB,KAAKqnI,eAAe9qH,GAErD,G,CAEc8qH,eAAe9qH,G,0CAC3B,MAAMirH,EAAwBjrH,EAAQvb,KAAKw/B,GAAMA,EAAErrB,YAC7CsyH,QAAyBv+H,QAAQ4N,IAAI0wH,GAE3CC,EAAiB7zG,KAAK,EAAMuyD,gBAAgBnmF,KAAKyG,YAAa,SAE9D,MAAMihI,EAAa,IAAIt8C,GAIvB,OAHAs8C,EAAWhmI,KAAO1B,KAAKyG,YAAY5F,EAAE,cACrC4mI,EAAiB35H,KAAK45H,GAEfD,CACT,G,6bCtLK,IAAME,GAAN,cAAmC,KACxC,IAAC5sC,GAAY,CAAE9B,YAAa5N,GAAO5vE,SAAUy9E,aAAc,U,iBACvCzgE,GAAA,I,gCACpB,IAACsiE,GAAY,CAAE9B,YAAa7N,GAAW3vE,SAAUy9E,aAAc,U,iBACvCzgE,GAAA,I,oCAJbkvG,GAAoB,IADhCptC,IACYotC,ICFN,MAAMC,GAWX9nI,YAAYwK,GATZ,KAAAu9H,oBAAqB,EAGrB,KAAAC,gBAAiB,EAGjB,KAAAC,aAAc,EACd,KAAAC,8BAA+B,EAG7B7gI,OAAOC,OAAOpH,KAAMsK,EACtB,CAEA29H,cACEjoI,KAAKkoI,WAAa,KAClBloI,KAAK6M,OAAS,KACd7M,KAAK6nI,oBAAqB,EAC1B7nI,KAAKmoI,qBAAuB,KAC5BnoI,KAAK8nI,gBAAiB,EACtB9nI,KAAKooI,iBAAmB,IAC1B,CAEAC,oBACEroI,KAAK+nI,aAAc,EACnB/nI,KAAKsoI,uBAAyB,KAC9BtoI,KAAKioI,aACP,CAEAM,cACE,OAAQ/lE,IACN,IAAIgmE,GAAqB,EA+BzB,MA9BoB,cAAhBxoI,KAAK6M,QAA0B27H,IACjCA,EAAqBhmE,EAAO5iC,UAEV,UAAhB5/B,KAAK6M,QAAsB27H,IAC7BA,EAAqBhmE,EAAOj7B,WAEP,MAAnBvnC,KAAKkoI,YAAsBM,IAC7BA,EAAqBhmE,EAAO/3D,OAASzK,KAAKkoI,YAExCloI,KAAK8nI,gBAA2C,MAAzB9nI,KAAKooI,kBAA4BI,IAC1DA,EAAwC,MAAnBhmE,EAAOhjC,UAE1Bx/B,KAAK8nI,gBAA2C,MAAzB9nI,KAAKooI,kBAA4BI,IAC1DA,EAAqBhmE,EAAOhjC,WAAax/B,KAAKooI,kBAE5CpoI,KAAK6nI,oBAAmD,MAA7B7nI,KAAKmoI,sBAAgCK,IAClEA,EAC2B,MAAzBhmE,EAAOh4D,iBACkB,MAAxBg4D,EAAOjjC,eAAyD,IAAhCijC,EAAOjjC,cAAc7+B,SAEtDV,KAAK6nI,oBAAmD,MAA7B7nI,KAAKmoI,sBAAgCK,IAClEA,EAC0B,MAAxBhmE,EAAOjjC,eAAyBijC,EAAOjjC,cAAchM,SAASvzB,KAAKmoI,uBAEpC,MAA/BnoI,KAAKsoI,wBAAkCE,IACzCA,EAAqBhmE,EAAOh4D,iBAAmBxK,KAAKsoI,wBAElDtoI,KAAK+nI,aAAeS,IACtBA,EAA+C,OAA1BhmE,EAAOh4D,gBAEvBg+H,CAAkB,CAE7B,E,gBCtEK,MAAMC,GAIXC,MAAMxjI,GACJ,OAAwB,MAAjBlF,KAAK2oI,UAAoB3oI,KAAK2oI,SAASrhI,QAAQ5E,GAASA,EAAEwC,KAAOA,IAAIxE,OAAS,CACvF,CAEAZ,YAAYwK,GACVnD,OAAOC,OAAOpH,KAAMsK,EACtB,E,gBCLK,MAAe,ICEf,MAAe,ICJf,MAAe,ICKf,MAAe,I,2SCef,MAAM,GACXxK,YACYyL,EACAojB,EACAw4D,EACAjlB,EACA4lB,EACAz8E,GALA,KAAAE,aAAAA,EACA,KAAAojB,oBAAAA,EACA,KAAAw4D,cAAAA,EACA,KAAAjlB,cAAAA,EACA,KAAA4lB,kBAAAA,EACA,KAAAz8E,cAAAA,CACT,CAEGu9H,0BAA0BC,G,gDACxB7oI,KAAKuL,aAAaw8F,sBAAsB5jG,MAAM7B,KAAKumI,GAC3D,G,CAEMC,4B,0CACJ,OAAO,IAAIz+H,UAAUrK,KAAKuL,aAAau8F,wBACzC,G,CAEMihC,qB,0CACJ,IAAIx2F,QAAsBvyC,KAAK2uB,oBAAoB9gB,SAKnD,OAJqB,MAAjB0kC,IACFA,EAAgBA,EAAcjrC,OAAOqgF,IAAU/zD,MAAK,CAACjtB,EAAGC,IAAMD,EAAEjF,KAAKqF,cAAcH,EAAElF,SAGhF6wC,CACT,G,CAEAy2F,mBAAmBx+H,GACjB,MAAMy+H,EAAwBC,GAAgC,mCAC5D,IAAI3sH,EAGJ,GAAsB,MAAlB/R,GAA4C,WAAlBA,EAC5B+R,EAAU2sH,MACL,CAEL,MACMC,SADgBnpI,KAAKkiE,cAAc6c,mBACdz3E,QAAQxC,GAAMA,EAAE0F,gBAAkBA,IAC7D+R,EAAU2sH,EAAc5hI,QACrBk5B,GAAM2oG,EAAWziG,MAAM0iG,GAAOA,EAAG5pG,UAAYgB,EAAEt7B,MAAe,MAARs7B,EAAEt7B,I,CAI7D,MAAMmkI,QAAsBrpI,KAAKspI,oBAAoB/sH,GACrD,OAAO,IAAIksH,GAA4B,CACrCE,SAAUpsH,EACVgtH,WAAYF,GAEhB,IAEA,OAAOrpI,KAAKmnF,cAAc+a,aAAa34F,MACrC,EAAAigI,GAAA,IAAUjtH,IAAY,EAAAja,GAAA,GAAK2mI,EAAe1sH,MAE9C,CAEMktH,iBAAiBj/H,G,0CACrB,MAAMk/H,QAA0B1pI,KAAK8nF,kBAAkB/I,kBACvD,IAAItiE,EAEFA,EADoB,MAAlBjS,EACYk/H,EAAkBpiI,QAAQxC,GAAMA,EAAE0F,iBAAmBA,IAErDk/H,EAEhB,MAAMC,QAA0B3pI,KAAK8nF,kBAAkBvB,aAAa9pE,GACpE,OAAO,IAAIgsH,GAAgC,CACzCE,SAAUlsH,EACV8sH,WAAYI,GAEhB,G,CAEMC,mC,0CACJ,aAAa,EAAAr9H,EAAA,GACXvM,KAAKqL,cAAc8wF,2BAA2BnxF,EAAW6+H,WAE7D,G,CAEMC,kC,0CACJ,aAAa,EAAAv9H,EAAA,GACXvM,KAAKqL,cAAc8wF,2BAA2BnxF,EAAWm3F,mBAE7D,G,CAEgBmnC,oBAAoB/sH,G,0CAClC,MAAMiqE,EAAgC,GAQtC,OAPAjqE,EAAQlW,SAASm6B,IACf,MAAMupG,EAAa,IAAI3+C,GACvB2+C,EAAW7kI,GAAKs7B,EAAEt7B,GAClB6kI,EAAWh8G,aAAeyS,EAAEzS,aAC5B,MAAMxnB,EAAkB,MAAVi6B,EAAE9+B,KAAe8+B,EAAE9+B,KAAKoC,QAAQ,aAAc,IAAIsC,MA3F7C,KA2FuE,GAC1F8+E,GAAaK,eAAeiB,EAAO,EAAGjgF,EAAOwjI,EAAY,KA5FtC,IA4F6D,IAE3EvjD,CACT,G,CAEMwjD,gBAAgB9kI,G,0CACpB,MAAMqX,QAAgBvc,KAAKspI,0BACnB,EAAA/8H,EAAA,GAAevM,KAAKmnF,cAAc+a,eAE1C,OAAOhd,GAAaQ,0BAA0BnpE,EAASrX,EACzD,G,oCAnGW,IAAkB,oE,uBAAlB,GAAkB,QAAlB,GAAkB,OCfxB,MAAM+kI,WAA2B,GAMtCnqI,YACEyL,EACAojB,EACAw4D,EACAjlB,EACA4lB,EACAz8E,GAEAvK,MACEyK,EACAojB,EACAw4D,EACAjlB,EACA4lB,EACAz8E,GAnBJ,KAAA6+H,YAA2B,IAAItC,GAE/B,KAAAuC,UAAY,YACZ,KAAAC,QAAU,UAkBRpqI,KAAKkqI,YAAYnC,aAAc,EAC/B/nI,KAAKkqI,YAAY5B,uBAAyB,IAC5C,CAEA+B,iBACE,OAAOrqI,KAAKkqI,WACd,CAEAI,eAAehjI,GACTA,IAAWtH,KAAKmqI,WAClBnqI,KAAKkqI,YAAYnC,aAAc,EAC/B/nI,KAAKkqI,YAAY5B,uBAAyB,MACjChhI,IAAWtH,KAAKoqI,SACzBpqI,KAAKkqI,YAAYnC,aAAc,EAC/B/nI,KAAKkqI,YAAY5B,uBAAyB,OAE1CtoI,KAAKkqI,YAAYnC,aAAc,EAC/B/nI,KAAKkqI,YAAY5B,uBAAyBhhI,EAE9C,CAEAypB,QACE/wB,KAAKsqI,eAAetqI,KAAKmqI,UAC3B,CAEAI,6BAA6B/nE,GAC3B,IAAKxiE,KAAKkqI,YAAY5B,yBAA2BtoI,KAAKkqI,YAAYnC,YAChE,OAAO,EAET,GAAI/nI,KAAKkqI,YAAY5B,wBACnB,GAAI9lE,EAAOh4D,iBAAmBxK,KAAKkqI,YAAY5B,uBAC7C,OAAO,OAEJ,GAAItoI,KAAKkqI,YAAYnC,cACrBvlE,EAAOh4D,eACV,OAAO,EAGX,OAAO,CACT,E,2SC5Da,MAAMggI,GAInB1qI,YACUuiG,EACAkgC,EACAvjH,EACAyrH,EACAvmH,GAJA,KAAAm+E,KAAAA,EACA,KAAAkgC,0BAAAA,EACA,KAAAvjH,qBAAAA,EACA,KAAAyrH,oBAAAA,EACA,KAAAvmH,YAAAA,EAERlkB,KAAK0yF,SAAW1yF,KAAKgf,qBAAqB0zE,WAC1C1yF,KAAKsyF,UAAYtyF,KAAKgf,qBAAqBszE,WAC7C,CAEMhoF,O,0CACJ8mF,GAAW8I,gBACT,uBACA,CAAOx9D,EAAUshE,EAAsCvlB,IAAsB,mCACvD,oBAAhB/7C,EAAIw0D,SAAqD,wBAApBx0D,EAAI37B,KAAKkG,eAC1CjH,KAAK0qI,eACThuG,EAAI37B,KAAKm9F,eAAexhE,IAAIw0D,QAC5Bx0D,EAAI37B,KAAKm9F,eAAeF,QAG9B,MAGEnL,QAAUA,OAAOwC,UACnBxC,OAAOwC,SAASs1C,UAAUj0C,aAAmBxF,GAAoB,yCACzDlxF,KAAK0qI,eAAex5C,EAC5B,KAEJ,G,CAEcw5C,eAAex5C,EAAiB8M,G,0CAC5C,OAAQ9M,GACN,IAAK,0BACGlxF,KAAKwiI,8BACX,MACF,IAAK,uBACGxiI,KAAK4qI,cAAc5sC,EAASA,EAAO7H,IAAM,MAC/C,MACF,IAAK,mBACGn2F,KAAK6qI,YACX,MACF,IAAK,mBACG7qI,KAAKyqI,oBAAoB5D,OAKrC,G,CAEcrE,8B,kDACZ,MAAMhrH,EAAkE,QAAvD,EAAkD,QAAnD,QAAOxX,KAAKuiI,0BAA0BrxD,oBAAa,eAAG,UAAE,QAAI,CAAC,EACvE93D,QAAiBpZ,KAAKuiI,0BAA0BtyD,iBAAiBz4D,GACvExX,KAAKgf,qBAAqBi4B,gBAAgB79B,EAAU,CAAEhY,SACtDpB,KAAKuiI,0BAA0BnwD,WAAWh5D,E,IAG9BwxH,cAAcz0C,G,0CAK1B,GAJKA,IACHA,QAAY/E,GAAW05C,6BAGd,MAAP30C,EAAJ,CAIA,UAAWn2F,KAAKkkB,YAAYkF,iBAAmBnW,GAAqB2W,SAAU,CAC5E,MAAMu1E,EAAoD,CACxDjB,eAAgB,CACdxhE,IAAK,CAAEw0D,QAAS,kBAChB8M,OAAQ,CAAE7H,IAAKA,IAEjBlvF,OAAQ,uBASV,aAPMmqF,GAAW2N,mBACf5I,EACA,uCACAgJ,QAGF/N,GAAW2N,mBAAmB5I,EAAK,iB,OAI/Bn2F,KAAKqiG,KAAK0oC,mCAAmC50C,EAAK,e,CAC1D,G,CAEc00C,Y,0CAEP7qI,KAAK0yF,UAIV1yF,KAAKqiG,KAAKwoC,WACZ,G,6SCrGa,MAAMG,GAKnBlrI,YACU2qI,EACAl/H,EACA0/H,GAFA,KAAAR,oBAAAA,EACA,KAAAl/H,aAAAA,EACA,KAAA0/H,qBAAAA,EANF,KAAAC,UAAoB,KACpB,KAAAC,UAAY,SAOlBnrI,KAAKorI,KAAOv4C,OAAOu4C,OAAoB,MAAX55C,QAAkBA,QAAQ45C,KAAO,KAC/D,CAEM9gI,O,0CACJ,IAAKtK,KAAKorI,KACR,OAGF,MAAMC,EAAeC,IACF,WAAbA,EACFtrI,KAAKirI,qBAAqBhlE,wBAE1BjmE,KAAKirI,qBAAqB/kE,0B,EAG1BlmE,KAAKorI,KAAKG,gBAAkBvrI,KAAKorI,KAAKI,sBACxCxrI,KAAKorI,KAAKI,qBA5BK,KA6BfxrI,KAAKorI,KAAKG,eAAe70C,YAAY20C,IAErCrrI,KAAKyrI,SAASJ,GAGZrrI,KAAKorI,KAAKG,gBACZvrI,KAAKorI,KAAKG,eAAe70C,aAAmB40C,GAAqB,mCAC/D,GAAiB,WAAbA,EAAuB,CAGzB,IAAiB,WADKtrI,KAAKuL,aAAawiE,mBACpB,QAEG/tE,KAAKuL,aAAa0hE,2BACxBP,GAAmBxI,aAC1BlkE,KAAKyqI,oBAAoB3hH,eAEzB9oB,KAAKyqI,oBAAoB5D,M,EAIvC,KAEJ,G,CAEQ4E,SAASC,GACO,MAAlB1rI,KAAKkrI,YACP9pI,OAAO+pB,aAAanrB,KAAKkrI,WACzBlrI,KAAKkrI,UAAY,MAEnBlrI,KAAKorI,KAAKO,WA1DO,KA0DmBxtG,IAC9BA,IAAUn+B,KAAKmrI,YACjBnrI,KAAKmrI,UAAYhtG,EACjButG,EAAQvtG,IAEVn+B,KAAKkrI,UAAY9pI,OAAOgI,YAAW,IAAMpJ,KAAKyrI,SAASC,IAAU,IAAK,GAE1E,E,2SCXK,MAAME,GAaX9rI,YACU2R,EACA+Z,EACAqgH,EACAplI,EACA6a,EACAD,EACArC,EACAzT,EACAgW,EACA2C,G,MATA,KAAAzS,cAAAA,EACA,KAAA+Z,sBAAAA,EACA,KAAAqgH,kBAAAA,EACA,KAAAplI,YAAAA,EACA,KAAA6a,iBAAAA,EACA,KAAAD,aAAAA,EACA,KAAArC,qBAAAA,EACA,KAAAzT,aAAAA,EACA,KAAAgW,WAAAA,EACA,KAAA2C,YAAAA,EAtBF,KAAA0gD,WAAY,EAIZ,KAAAknE,SAAgB,KAChB,KAAAr5H,WAAyB,KACzB,KAAAgH,UAAwB,KACxB,KAAAsyH,mBAA0B,KAiBhC/rI,KAAKuL,aAAa67F,kCAAiC,IAE5B,QAAnB,EAAM,OAANvU,aAAM,IAANA,YAAM,EAANA,OAAQjyC,mBAAW,eAAEorF,UAEvBn5C,OAAOjyC,YAAYorF,QAAQt1C,aAAa91C,IACtCwwC,GAAW66C,gBAAgB,KAAK,GAGtC,CAEMC,U,0CAIJ,OAHAlsI,KAAK+e,YAAc/e,KAAKqhB,aAAae,WACrCpiB,KAAKuL,aAAa67F,kCAAiC,GAE5C,IAAIl+F,SAAc,CAACC,EAAS2oD,KACjC9xD,KAAKmsI,KAAO/6C,GAAWsH,cAAc,sBAErC14F,KAAKosI,YAAa,EAElB,MAAMC,EAAoB,KACxBrsI,KAAK4kE,WAAY,EACjB5kE,KAAKosI,YAAa,EAClBjjI,GAAS,EAKPnJ,KAAKgf,qBAAqB0zE,YAC5B25C,IAGFrsI,KAAKmsI,KAAK90C,UAAUX,aAAmBljF,GAAiC,mCACtE,OAAQA,EAAQ09E,SACd,IAAK,YACHm7C,IACA,MACF,IAAK,eACCrsI,KAAKosI,YACPt6E,EAAO,gBAET9xD,KAAK4kE,WAAY,EACjB5kE,KAAKmsI,KAAKG,aACV,MACF,IAAK,kBAAmB,CAEtB,GAAI94H,EAAQuL,QAAU/e,KAAK+e,MACzB,OAGF,MAAMjD,EAAY,EAAMlZ,eAAe4Q,EAAQ+4H,cACzCxwH,QAAkB/b,KAAKwrB,sBAAsB7Y,WACjDmJ,EACA9b,KAAKyS,WAlHS,QAsHZzS,KAAKwsI,wBACPxsI,KAAKwsI,uBAAwB,EAC7BxsI,KAAKuL,aAAa67F,kCAAiC,IAErDpnG,KAAKusI,aAAe,IAAI17H,GAAmBkL,GAC3C/b,KAAK+rI,qBACL,K,CAEF,IAAK,uBAEH,GAAIv4H,EAAQuL,QAAU/e,KAAK+e,MACzB,OAGF/e,KAAKusI,aAAe,KACpBvsI,KAAKyS,WAAa,KAClBzS,KAAK4kE,WAAY,EAEjB5kE,KAAKshB,iBAAiB7V,KAAK,aAAc,CACvCkyB,MAAO,CAAE7sB,IAAK,yCACdi0G,QAAS,CAAEj0G,IAAK,wCAChB27H,iBAAkB,CAAE37H,IAAK,MACzB47H,iBAAkB,KAClBjiI,KAAM,WAER,MACF,IAAK,oBACsB,MAArBzK,KAAKusI,eACPvsI,KAAKwsI,uBAAwB,EAC7BxsI,KAAK2sI,yBAEP,MAEF,IAAK,cACH3sI,KAAK4sI,sBACL,MACF,QAEE,IAAK5sI,KAAKgf,qBAAqB0zE,YAAcl/E,EAAQuL,QAAU/e,KAAK+e,MAClE,OAGF/e,KAAKq3F,UAAU7jF,EAAQA,SAE7B,MAEAxT,KAAKmsI,KAAKU,aAAan2C,aAAahgF,IAClC,IAAIoN,EAEFA,EADEstE,GAAWyG,mBACLnhF,EAAEoN,MAAMtQ,QAERq/E,OAAOpB,QAAQ6E,UAAU9iF,QAGnCxT,KAAKusI,aAAe,KACpBvsI,KAAKyS,WAAa,KAClBzS,KAAK4kE,WAAY,EAGjB9S,EADwB,MAAThuC,EAAgB,6BAA+B,KAChD,GACd,GAEN,G,CAEA8oH,sBACE5sI,KAAKshB,iBAAiB7V,KAAK,aAAc,CACvCkyB,MAAO,CAAE7sB,IAAK,iCACdi0G,QAAS,CAAEj0G,IAAK,gCAChB27H,iBAAkB,CAAE37H,IAAK,MACzB47H,iBAAkB,KAClBjiI,KAAM,UAEV,CAEMgB,KAAK+H,G,0CACJxT,KAAK4kE,kBACF5kE,KAAKksI,WAGb14H,EAAQvH,aAAejM,KAAKuL,aAAaa,YACzCoH,EAAQs5H,UAAYljI,KAAKC,MAErB7J,KAAKgf,qBAAqB0zE,WAC5B1yF,KAAKwpC,YAAYh2B,GAEjBxT,KAAKwpC,YAAY,CAAEzqB,MAAO/e,KAAK+e,MAAOvL,cAAexT,KAAK+sI,eAAev5H,IAE7E,G,CAEMu5H,eAAev5H,G,0CAKnB,OAJyB,MAArBxT,KAAKusI,qBACDvsI,KAAKgtI,6BAGAhtI,KAAKyR,cAAc4a,QAAQ8E,KAAKsY,UAAUj2B,GAAUxT,KAAKusI,aACxE,G,CAEAU,cACE,OAAO,IAAI/jI,SAAQ,CAACC,EAAS2oD,KAC3B9xD,KAAK8rI,SAAW3iI,CAAO,GAE3B,CAEQqgC,YAAYh2B,GAElB,IACE,MAAMkpB,EAAWlpB,EACbA,EAAQA,mBAAmBa,KAE7BqoB,EAAIlpB,QAAU,CACZsB,gBAAiBtB,EAAQA,QAAQsB,gBACjCC,eAAgBvB,EAAQA,QAAQuB,eAChChU,KAAMyS,EAAQA,QAAQzS,KACtBwT,GAAIf,EAAQA,QAAQe,GACpBC,IAAKhB,EAAQA,QAAQgB,MAGzBxU,KAAKmsI,KAAK3iG,YAAY9M,E,CACtB,MAAOn0B,GACPvI,KAAKuhB,WAAWuC,MAAM,qDAEtB9jB,KAAKusI,aAAe,KACpBvsI,KAAKyS,WAAa,KAClBzS,KAAK4kE,WAAY,EAEjB5kE,KAAKshB,iBAAiB7V,KAAK,aAAc,CACvCkyB,MAAO,CAAE7sB,IAAK,yCACdi0G,QAAS,CAAEj0G,IAAK,wCAChB27H,iBAAkB,CAAE37H,IAAK,MACzB47H,iBAAkB,KAClBjiI,KAAM,U,CAGZ,CAEc4sF,UAAU61C,G,0CACtB,IAAI15H,EAAU05H,EAOd,GANKltI,KAAKgf,qBAAqB0zE,aAC7Bl/E,EAAU2d,KAAKC,YACPpxB,KAAKyR,cAAcgE,cAAcy3H,EAAyBltI,KAAKusI,gBAIrEvnI,KAAKmoI,IAAI35H,EAAQs5H,UAAYljI,KAAKC,OAtQd,IAuQtB7J,KAAKuhB,WAAWuC,MAAM,0CADxB,CAKA,OAAQtQ,EAAQ09E,SACd,IAAK,kBAAmB,CAGtB,SAFMlxF,KAAKuL,aAAa47F,+BAA+B,MAE9B,gBAArB3zF,EAAQzT,SAA4B,CACtCC,KAAKshB,iBAAiB7V,KAAK,aAAc,CACvCkyB,MAAO,CAAE7sB,IAAK,6BACdi0G,QAAS,CAAEj0G,IAAK,4BAChB27H,iBAAkB,CAAE37H,IAAK,MACzB47H,iBAAkB,KAClBjiI,KAAM,WAER,K,CACK,GAAyB,kBAArB+I,EAAQzT,SAA8B,CAC/CC,KAAKshB,iBAAiB7V,KAAK,aAAc,CACvCkyB,MAAO,CAAE7sB,IAAK,+BACdi0G,QAAS,CAAEj0G,IAAK,8BAChB27H,iBAAkB,CAAE37H,IAAK,MACzB47H,iBAAkB,KAClBjiI,KAAM,WAER,K,CAGF,MAAMC,QAAgB1K,KAAKuL,aAAauiE,qBACxC,GAAgB,OAAZpjE,IAAgC,IAAZA,EAAmB,CAChB,aAArB8I,EAAQzT,iBACJC,KAAKuL,aAAag8F,oBAAmB,IAE7C,K,CAIF,UAAWvnG,KAAKkkB,YAAYkF,mBAAqBnW,GAAqB2W,SACpE,MAGF,GAAyB,aAArBpW,EAAQzT,SAAyB,CACnC,IACE,GAAIyT,EAAQ45H,WAAY,CACtB,MAAMv7H,EAAU,IAAIhB,GAClB,EAAMjO,eAAe4Q,EAAQ45H,mBAEzBptI,KAAKyR,cAAcM,WAAWF,E,KAC/B,KAAI2B,EAAQtC,OAkBjB,MAAM,IAAI9Q,MAAM,mBAlBS,CAGzB,IAAIonB,QAAmBxnB,KAAKuL,aAAagiG,iCAEzC,GADA/lF,IAAAA,QAAqBxnB,KAAKuL,aAAa48F,iCAClC3gF,EACH,MAAM,IAAIpnB,MAAM,+BAElB,MAAM6R,EAAY,IAAIpB,GACpB,EAAMjO,eAAe4Q,EAAQtC,SAEzBW,QAAgB7R,KAAKyR,cAAcY,4BACvCJ,EACA,IAAIoC,GAAUmT,UAEVxnB,KAAKyR,cAAca,aAAaL,SAChCjS,KAAKyR,cAAcM,WAAWF,E,GAItC,MAAOtJ,GAcP,OAbAvI,KAAKuhB,WAAWuC,MAAM,sBAAwBvb,GAC9CvI,KAAKshB,iBAAiB7V,KAAK,aAAc,CACvCkyB,MAAO,CAAE7sB,IAAK,yBACdi0G,QAAS,CAAEj0G,IAAK,wBAChB27H,iBAAkB,CAAE37H,IAAK,MACzB47H,iBAAkB,KAClBjiI,KAAM,gBAIJzK,KAAK8rI,UACP9rI,KAAK8rI,SAASt4H,G,CAMlB,UACQxT,KAAKyR,cAAc2uG,qBAAqBpgH,KAAKuL,aAAaa,Y,CAChE,MAAO7D,GASP,OARAvI,KAAKuhB,WAAWuC,MAAM,yBAA2Bvb,SAC3CvI,KAAKyR,cAAc2vG,YACzBphH,KAAK4sI,2BAGD5sI,KAAK8rI,UACP9rI,KAAK8rI,SAASt4H,G,CAKlBxT,KAAK6rI,kBAAkBltC,eAAe,CAAEzN,QAAS,YAAc,KAAM,K,CAEvE,K,CAEF,QACElxF,KAAKuhB,WAAWuC,MAAM,uCAAyCtQ,EAAQ09E,SAIvElxF,KAAK8rI,UACP9rI,KAAK8rI,SAASt4H,E,CAElB,G,CAEcw5H,sB,0CACZ,MAAOvzH,EAAWhH,SAAoBzS,KAAKwrB,sBAAsBS,mBAAmB,MAUpF,OATAjsB,KAAKyZ,UAAYA,EACjBzZ,KAAKyS,WAAaA,EAElBzS,KAAKqtI,gBAAgB,CACnBn8C,QAAS,kBACTz3E,UAAW,EAAM7V,gBAAgB6V,GACjCxN,aAAcjM,KAAKuL,aAAaa,cAG3B,IAAIlD,SAAQ,CAACC,EAAS2oD,IAAY9xD,KAAK+rI,mBAAqB5iI,GACrE,G,CAEckkI,gBAAgB75H,G,0CACvBxT,KAAK4kE,kBACF5kE,KAAKksI,WAGb14H,EAAQs5H,UAAYljI,KAAKC,MAEzB7J,KAAKwpC,YAAY,CAAEzqB,MAAO/e,KAAK+e,MAAOvL,QAASA,GACjD,G,CAEcm5H,wB,0CACZ,MAAMW,SACEttI,KAAKyR,cAAc2uG,qBAAqBpgH,KAAKuL,aAAaa,YAAapM,KAAKyZ,YAClFlV,KAAK,KAEPvE,KAAKshB,iBAAiB7V,KAAK,uCAAwC,CACjE6hI,YAAaA,GAEjB,G,6SC/Za,MAAMC,GAMnBztI,YACUuiG,EACA5D,EACAz/E,EACAvY,EACAwkI,EACAuC,EACA1lH,EACAxG,EACAC,EACAksH,GATA,KAAAprC,KAAAA,EACA,KAAA5D,gBAAAA,EACA,KAAAz/E,qBAAAA,EACA,KAAAvY,YAAAA,EACA,KAAAwkI,qBAAAA,EACA,KAAAuC,cAAAA,EACA,KAAA1lH,mBAAAA,EACA,KAAAxG,iBAAAA,EACA,KAAAC,WAAAA,EACA,KAAAksH,cAAAA,EAdF,KAAAC,sBAA+B,GAC/B,KAAAC,kBAA4B,KAC5B,KAAAC,gCAAyE,GAe/E/6C,OAAOpB,QAAQo8C,YAAYn3C,aAAa7wC,IACtC7lD,KAAK2tI,kBAAoB9nF,EAAQioF,MAAM,GAE3C,CAEMxjI,O,0CACJ,IAAKuoF,OAAOpB,QACV,aAGIzxF,KAAK+tI,mBACX,MAAMC,EAA4B,CAChCtxG,EACAshE,EACAvlB,IACG,yCACGz4E,KAAK2+F,eAAejiE,EAAKshE,EAAQvlB,EACzC,IAEA2Y,GAAW8I,gBAAgB,qBAAsB8zC,GAC7ChuI,KAAKqiG,KAAK4rC,mBACX7sI,OAAe8sI,mCAAqCF,EAEzD,G,CAEMrvC,eAAejiE,EAAUshE,EAAsCvlB,G,oDACnE,OAAQ/7C,EAAIw0D,SACV,IAAK,WACL,IAAK,WAAY,CACf,IAAIj9E,GAEoC,QAApC,EAAAjU,KAAK4tI,uCAA+B,eAAEltI,QAAS,IACjDuT,EAAOjU,KAAK4tI,gCAAgCp7D,MAC5C4e,GAAW+8C,oCAGPnuI,KAAKqiG,KAAKM,qBACV3iG,KAAKqiG,KAAKO,aAAY,GAC5B5iG,KAAKirI,qBAAqBllE,iBAAiC,aAAhBrpC,EAAIw0D,SAC/ClxF,KAAKwtI,cAAcl3F,sBAEfriC,UACIm9E,GAAW8F,YAAYjjF,EAAKiqF,eAAeF,OAAO7H,IAAIP,gBACtDxE,GAAWg9C,SAASn6H,EAAKiqF,eAAeF,OAAO7H,IAAIjxF,UACnDksF,GAAW2N,mBACf9qF,EAAKiqF,eAAeF,OAAO7H,IAC3B,kBACAliF,IAGJ,K,CAEF,IAAK,uCACHjU,KAAK4tI,gCAAgC9/H,KAAK4uB,EAAI37B,MAC9C,MACF,IAAK,eACGf,KAAKqiG,KAAKgsC,OAAO3xG,EAAIunE,QAASvnE,EAAIzwB,QACxC,MACF,IAAK,gBACCywB,EAAIitD,eACNvgF,YAAW,IAAY,yCACfpJ,KAAKqiG,KAAKM,qBACV3iG,KAAKqiG,KAAKO,aAClB,KAAG,KACH5iG,KAAKqiG,KAAKisC,oBAAoBrxF,qBAC9Bj9C,KAAKytI,cAAc50G,qBAErB,MACF,IAAK,kBACG74B,KAAKqiG,KAAKwoC,YAChB,MACF,IAAK,iBACHz5C,GAAWm9C,0BAA0B,oBAAoB,GACzD,MACF,IAAK,oBAAqB,CACxB,MAAMC,EACkB,OAAd,QAAR,EAAA9xG,EAAI37B,YAAI,eAAEytD,UACN,gCACA,0CAA4C9xB,EAAI37B,KAAKytD,SAE3D4iC,GAAWm9C,0BAA0BC,GAAkB,GACvD,K,CAEF,IAAK,WACHplI,YAAW,KACTgoF,GAAW+8C,4BAA4B,GAC7B,QAAT,EAAAzxG,EAAI+xG,aAAK,QAAI,GAChB,MACF,IAAK,6BACGzuI,KAAKqiG,KAAK0oC,mCAAmC/sC,EAAO7H,IAAKz5D,EAAIshE,OAAQA,EAAOk+B,SAClF,MACF,IAAK,sBACL,IAAK,eACL,IAAK,cACL,IAAK,sBACGl8H,KAAKqiG,KAAKM,qBACV3iG,KAAKqiG,KAAKO,cAChB,MACF,IAAK,wBACG5iG,KAAKqiG,KAAKqsC,gBAChB,MACF,IAAK,6BACH,OAAQhyG,EAAIshE,QACV,IAAK,aACL,IAAK,eAAgB,CACnB,MAAMu+B,QAAiBv8H,KAAKy+F,gBAAgB+9B,oBAC1C,CACE,CACEN,QAASl+B,EAAOk+B,QAChB/lC,IAAKz5D,EAAIy5D,IACTtwC,QAASnpB,EAAImpB,UAGF,iBAAfnpB,EAAIshE,QAEU,MAAZu+B,GACFv8H,KAAKgf,qBAAqBi4B,gBAAgBslF,EAAU,CAAEn7H,SAExD,K,CAEF,IAAK,cACH+pB,aAAanrB,KAAK2uI,iBAClB3uI,KAAK0tI,sBAAsB5/H,KAAK,CAC9BouH,QAASl+B,EAAOk+B,QAChB/lC,IAAKz5D,EAAIy5D,IACTtwC,QAASnpB,EAAImpB,UAEf7lD,KAAK2uI,gBAAkBvlI,YAAW,IAAY,gDAAMpJ,KAAK4uI,aAAalyG,EAAIy5D,IAAI,KAAE,KAKpF,MACF,IAAK,aAAc,CACjB,MAAM04C,EAAW7uI,KAAK8nB,mBAAmBu4E,iBAEzC,GAAoB,MAAhB3jE,EAAIoyG,UAAoB,EAAM9pG,YAAY6pG,KAAcnyG,EAAIoyG,SAC9D,OAGF,IACE19C,GAAWmC,aACT,gDACErwF,mBAAmBw5B,EAAI3W,MACvB,UACA7iB,mBAAmBw5B,EAAIyB,O,CAE3B,SACAn+B,KAAKuhB,WAAWuC,MAAM,gC,CAExB,K,CAEF,IAAK,iBAAkB,CACrB,MAAM+qH,EAAW7uI,KAAK8nB,mBAAmBu4E,iBAEzC,GAAoB,MAAhB3jE,EAAIoyG,UAAoB,EAAM9pG,YAAY6pG,KAAcnyG,EAAIoyG,SAC9D,OAGF,MAAM9uE,EACJ,oBAAoB98D,mBAAmBw5B,EAAI37B,kBAC/BmC,mBAAmBw5B,EAAI3jB,YACrCq4E,GAAWm9C,0BAA0B,yBAAyBvuE,KAAU,GACxE,K,CAEF,IAAK,cACHhgE,KAAKshB,iBAAiB7V,KAAK,eAC3B,MACF,IAAK,4BACHzL,KAAKshB,iBAAiB7V,KAAK,aAAc,CACvCkyB,MAAO,CAAE7sB,IAAK,6BACdi0G,QAAS,CAAEj0G,IAAK,iCAChB27H,iBAAkB,CAAE37H,IAAK,MACzB47H,iBAAkB,KAClBjiI,KAAM,SAER,MACF,IAAK,4BACHzK,KAAKgf,qBAAqBi4B,gBAAgBva,EAAIlkB,WAAY,CAAEpX,S,IAOpDwtI,aAAaG,G,0CACzB,MAAMxS,QAAiBv8H,KAAKy+F,gBAAgBw8B,WAAW,CACrD9kC,IAAK44C,EACLvsE,OAAQxiE,KAAKqiG,KAAK2sC,gBAClB9U,YAAal6H,KAAK0tI,sBAClB/R,iBAAiB,EACjBC,mBAAmB,IAGL,MAAZW,GACFv8H,KAAKgf,qBAAqBi4B,gBAAgBslF,EAAU,CAAEn7H,SAIxDpB,KAAKqiG,KAAK2sC,gBAAkB,KAC5BhvI,KAAK0tI,sBAAwB,EAC/B,G,CAEcK,mB,0CACZ3kI,YAAW,IAAY,mCACS,MAA1BpJ,KAAK2tI,oBACwB,YAA3B3tI,KAAK2tI,oBACPv8C,GAAWmC,aAAa,+CAEdvzF,KAAK8nB,mBAAmBs0F,iCAC1Bp8G,KAAK8nB,mBAAmB20F,gCAIlCz8G,KAAK2tI,kBAAoB,KAE7B,KAAG,IACL,G,6SCpPa,MAAMsB,GAKnBnvI,YACEkf,EACQkjD,EACAh+C,GADA,KAAAg+C,cAAAA,EACA,KAAAh+C,YAAAA,EAPF,KAAAgrH,oBAA6B,GASA,IAA/B99C,GAAWmE,kBACbv1F,KAAKmvI,WAAc/tI,OAAeyxF,OAAOs8C,YAE3CnvI,KAAKgyF,UAAYhzE,EAAqBgzE,WACxC,CAEM1nF,O,0CACCtK,KAAKmvI,YAAenvI,KAAKmvI,WAAWC,iBAIzCpvI,KAAKmvI,WAAWC,eAAe14C,aAC7B,CAAO7wC,EAAc98B,IAAkB,mCACrC,GAAK88B,EAAQjgD,MAAgE,IAAzD5F,KAAKkvI,oBAAoBzpI,QAAQogD,EAAQwpF,WAA7D,CASA,GAFArvI,KAAKkvI,oBAAoBphI,KAAK+3C,EAAQwpF,WAElCrvI,KAAKgyF,UAEP,OAAO,IAAI9oF,SAAQ,CAAOC,EAAS2oD,IAAW,yCACtC9xD,KAAKsvI,uBAAuBzpF,EAAQjgD,IAAKuD,EAAS2oD,EAC1D,YAEM9xD,KAAKsvI,uBAAuBzpF,EAAQjgD,IAAKmjB,EAAUA,E,MAdrDA,GACFA,GAeN,KACA,CAAEgQ,KAAM,CAAC,aAAc,gBACvB,CAAC/4B,KAAKgyF,UAAY,WAAa,kBAGjChyF,KAAKmvI,WAAWI,YAAY74C,aAAa7wC,GAAiB7lD,KAAKwvI,oBAAoB3pF,IAAU,CAC3F9sB,KAAM,CAAC,gBAET/4B,KAAKmvI,WAAWM,gBAAgB/4C,aAC7B7wC,GAAiB7lD,KAAKwvI,oBAAoB3pF,IAC3C,CACE9sB,KAAM,CAAC,gBAGb,G,CAGcu2G,uBAAuBrpI,EAAgBgjD,EAAmBnlC,G,0CACtE,UAAW9jB,KAAKkkB,YAAYkF,iBAAmBnW,GAAqB2W,SAClE9F,SAIF,IACE,MAAMxH,QAAgBtc,KAAKkiE,cAAc0d,sBACvC35E,EACA,KACA2K,GAAao1B,MAEf,GAAe,MAAX1pB,GAAsC,IAAnBA,EAAQ5b,OAE7B,YADAojB,IAIFmlC,EAAQ,CACNymF,gBAAiB,CACfv2H,SAAUmD,EAAQ,GAAG2jB,MAAM9mB,SAC3BC,SAAUkD,EAAQ,GAAG2jB,MAAM7mB,W,CAG/B,SACA0K,G,CAEJ,G,CAEQ0rH,oBAAoB3pF,GAC1B,MAAMnjD,EAAI1C,KAAKkvI,oBAAoBzpI,QAAQogD,EAAQwpF,WAC/C3sI,GAAK,GACP1C,KAAKkvI,oBAAoB7tE,OAAO3+D,EAAG,EAEvC,E,2SCgDa,MAAMitI,GAmFnB7vI,YAAmB8vI,GAAyB,GAAzB,KAAAA,cAAAA,EAnBnB,KAAAC,iBAAmBzuI,OAInB,KAAA4tI,gBAA8B,KAgB5BhvI,KAAKiuI,iBAAmB2B,GAAgD,IAA/Bx+C,GAAWmE,gBAGpD,MAYM3mE,EAAiB,CAAOq1E,EAAkBh4F,IAAmB,mCACjE,aAAMjM,KAAKquI,OAAOpqC,EAASh4F,EAAO,IAEpCjM,KAAKshB,iBAAmBthB,KAAKiuI,iBACzB,IAAIhJ,GACJ,IAAItoB,GACR38G,KAAKuhB,WAAa,IAAIoY,IAAkB,GACxC35B,KAAKwrB,sBAAwB,IAAI6rB,GAAyBj2C,QAC1DpB,KAAKy3B,eAAiB,IAAI4/E,GAC1Br3G,KAAK0yC,qBAAuB,IAAI2kE,GAChCr3G,KAAKs5F,qBAC4B,IAA/BlI,GAAWmE,gBACP,IAAIsiB,GACF,IAAI38E,GAA6Bl7B,KAAKwrB,sBAAuBxrB,KAAKuhB,YAAY,GAC9E,IAAI43F,GAAqBn5G,KAAKwrB,wBAEhC,IAAI8iB,GACVtuC,KAAKwkG,sBAAwB,IAAI/xD,GAC/BzyC,KAAKy3B,eACLz3B,KAAK0yC,qBACL,IAAI7b,GAAaM,GAAa6+E,KAEhCh2G,KAAKuL,aAAe,IAAI4qG,GACtBn2G,KAAKy3B,eACLz3B,KAAK0yC,qBACL1yC,KAAKs5F,qBACLt5F,KAAKuhB,WACLvhB,KAAKwkG,sBACL,IAAI3tE,GAAaM,GAAa6+E,KAEhCh2G,KAAKgf,qBAAuB,IAAI4yE,GAC9B5xF,KAAKshB,kBACL,CAACq1B,EAAgBk9C,KACW,MAAtB7zF,KAAKwtI,eACPxtI,KAAKwtI,cAAcr+F,eAAewH,EAAgBk9C,E,IAGtD,IAAY,mCACV,GAAsC,MAAlC7zF,KAAK8vI,0BAAmC,CAC1C,MAAMnnG,EAAU3oC,KAAK8vI,0BAA0B7C,cAE/C,UACQjtI,KAAK8vI,0BAA0BrkI,KAAK,CAAEylF,QAAS,mB,CACrD,MAAO3oF,GACP,OAAOW,QAAQ4oD,OAAOvpD,E,CAGxB,OAAOogC,EAAQhyB,MAAM4M,GAA+B,aAApBA,EAAOxjB,U,CAE3C,KACAqB,QAEFpB,KAAKyG,YAAc,IAAIu+H,GAAmB5zC,GAAW8G,cAAc92F,QAASpB,KAAKuL,cACjFvL,KAAKsV,eAAiB,GAAY,yBAC9B,IAAI6zB,GACFnpC,KAAKwrB,sBACLxrB,KAAKuhB,YACL,GAEF,IAAI2Z,GAA6Bl7B,KAAKwrB,sBAAuBxrB,KAAKuhB,YAAY,GAClFvhB,KAAKyR,cAAgB,IAAI2xG,GACvBpjH,KAAKwrB,sBACLxrB,KAAKsV,eACLtV,KAAKgf,qBACLhf,KAAKuhB,WACLvhB,KAAKuL,cAEPvL,KAAKohB,aAAe,IAAI4P,GAAahxB,KAAKuL,cAC1CvL,KAAKqhB,aAAe,IAAImW,GAAax3B,KAAKy3B,gBAC1Cz3B,KAAK8nB,mBAAqB,IAAIq0F,GAA0Bn8G,KAAKuL,aAAcvL,KAAKuhB,YAChFvhB,KAAKsL,WAAa,IAAImlD,GACpBzwD,KAAKohB,aACLphB,KAAKgf,qBACLhf,KAAK8nB,mBACL9nB,KAAKqhB,cACJ4iF,GAAqBjkG,KAAKquI,OAAOpqC,KAEpCjkG,KAAKy8E,gBAAkB,IAAIiqC,GAAuB1mH,KAAKuL,cACvDvL,KAAK24E,kBAAoB,IAAInrC,GAAkBxtC,KAAKuhB,YACpDvhB,KAAK28E,wBAA0B,IAAIiK,GACjC5mF,KAAKsL,WACLtL,KAAK24E,mBAEP34E,KAAK08E,cAAgB,IAAIzV,GAAcjnE,KAAKuhB,WAAYvhB,KAAKyG,aAE7DzG,KAAKkiE,cAAgB,IAAIsa,GACvBx8E,KAAKyR,cACLzR,KAAKy8E,gBACLz8E,KAAKsL,WACLtL,KAAKyG,YACLzG,KAAK08E,cACL18E,KAAKuL,aACLvL,KAAKsV,eACLtV,KAAK28E,yBAEP38E,KAAKmnF,cAAgB,IAAIwgD,GACvB3nI,KAAKyR,cACLzR,KAAKyG,YACLzG,KAAKkiE,cACLliE,KAAKuL,cAEPvL,KAAKgoF,iBAAmB,IAAId,GAAiBlnF,KAAKmnF,cAAennF,KAAKsL,YACtEtL,KAAK8nF,kBAAoB,IAAIhC,GAC3B9lF,KAAKyR,cACLzR,KAAKyG,YACLzG,KAAKuL,cAEPvL,KAAK+vI,oBAAsB,IAAIxoD,GAC/BvnF,KAAK2uB,oBAAsB,IAAIssE,GAA2Bj7F,KAAKuL,cAC/DvL,KAAKqL,cAAgB,IAAI0xF,GAAqB/8F,KAAKuL,aAAcvL,KAAK2uB,qBACtE3uB,KAAKgwI,iBAAmB,IAAI5kI,EAC1BpL,KAAKqL,cACLrL,KAAKsL,WACLtL,KAAKuL,cAEPvL,KAAKqmB,oBAAsB,IAAIqI,GAC7B1uB,KAAKuL,aACLvL,KAAKyR,cACLzR,KAAKsL,WACLtL,KAAKohB,aACLphB,KAAKuhB,WACLvhB,KAAK2uB,oBACL3uB,KAAKwrB,sBACLoD,GAEF5uB,KAAKiwI,mBAAqB,IAAIhG,GAC5BjqI,KAAKuL,aACLvL,KAAK2uB,oBACL3uB,KAAKmnF,cACLnnF,KAAKkiE,cACLliE,KAAK8nF,kBACL9nF,KAAKqL,eAGPrL,KAAKikB,wBAA0B,IAAIuzD,GAEnCx3E,KAAKuiI,0BAA4B,IAAIvyD,GACnChwE,KAAKyR,cACLzR,KAAKqL,cACLrL,KAAKuL,cAGPvL,KAAKwhB,iBAAmB,IAAI0S,GAAiBl0B,KAAKyG,YAAazG,KAAKgf,sBAGpE,MAAMkxH,EAAOlwI,KACPmwI,EAA6B,IAAI,cAAe75G,GAAd,c,oBAEtC,KAAA7qB,KAAO,CAACisF,EAAoBC,EAAW,CAAC,KACtC,MAAMnkF,EAAUrM,OAAOC,OAAO,CAAC,EAAG,CAAE8pF,QAASwG,GAAcC,GAC3Du4C,EAAKrE,kBAAkBltC,eAAenrF,EAAS08H,EAAa,KAAK,CAErE,GAEAlwI,KAAKyrB,kBAAoB,IAAIyC,GAAgCluB,KAAKsL,YAClEtL,KAAKwlB,yBAA2B,IAAI+F,GAClCvrB,KAAKwrB,sBACLxrB,KAAKyR,cACLzR,KAAKsV,eACLtV,KAAKuL,aACLvL,KAAKqhB,aACLrhB,KAAKyrB,kBACLzrB,KAAKyG,YACLzG,KAAKgf,sBAGPhf,KAAKowI,eAAiB,IAAI3uE,GAA6BzhE,KAAKyrB,mBAE5DzrB,KAAKqwI,yBAA2B,IAAI7+H,GAAuCxR,KAAKyR,eAEhFzR,KAAKkkB,YAAc,IAAIiE,GACrBnoB,KAAKyR,cACLzR,KAAKsL,WACLtL,KAAKohB,aACLphB,KAAKqhB,aACLrhB,KAAKgf,qBACLmxH,EACAnwI,KAAKuhB,WACLvhB,KAAKqmB,oBACLrmB,KAAK8nB,mBACL9nB,KAAKuL,aACLvL,KAAKwhB,iBACLxhB,KAAKyG,YACLzG,KAAKsV,eACLtV,KAAKikB,wBACLjkB,KAAKqL,cACLrL,KAAKwlB,yBACLxlB,KAAKqwI,0BAGPrwI,KAAKu1B,2BAA6B,IAAIN,GAA2Bj1B,KAAKsL,YAEtEtL,KAAK4sE,wBAA0B,IAAIt3C,GACjCt1B,KAAKuL,aACLvL,KAAKyR,cACLzR,KAAKyG,YACLzG,KAAKu1B,4BAGPv1B,KAAKqmI,4BAA8B,IAAI15D,GACrC3sE,KAAKyR,cACLzR,KAAKohB,aACLphB,KAAKqL,cACLrL,KAAKuL,aACLvL,KAAK4sE,yBAGP5sE,KAAKyqI,oBAAsB,IAAI1D,GAC7B/mI,KAAKkiE,cACLliE,KAAKmnF,cACLnnF,KAAK8nF,kBACL9nF,KAAKyR,cACLzR,KAAKgf,qBACLhf,KAAKshB,iBACLthB,KAAK08E,cACL18E,KAAKuL,aACLvL,KAAKkkB,YACLlkB,KAAKqmI,6BArOuBp6H,GAAoB,mCACf,MAA7BjM,KAAKirI,sBACPjrI,KAAKirI,qBAAqBllE,kBAAiB,SAEvC/lE,KAAK2iG,qBACL3iG,KAAK4iG,aAAY,GACG,MAAtB5iG,KAAKwtI,sBACDxtI,KAAKwtI,cAAcr2F,8BACnBn3C,KAAKwtI,cAAct3F,mBAAmBl2C,KAAKkkB,aAErD,KA6NE0K,GAEF5uB,KAAKswI,iBAAmB,IAAI71G,GAAiBz6B,KAAKyR,cAAezR,KAAKsV,gBACtEtV,KAAK44E,YAAc,IAAIwtD,GACrBpmI,KAAKyR,cACLzR,KAAKyG,YACLzG,KAAKwrB,sBACLxrB,KAAKuL,cAEPvL,KAAKioF,eAAiB,IAAIvP,GACxB14E,KAAKsL,WACLtL,KAAK24E,kBACL34E,KAAK44E,aAEP54E,KAAK+nF,gBAAkB,IAAIv6E,EAAgBxN,KAAKuL,cAChDvL,KAAK2kE,YAAc,IAAIkjB,GACrB7nF,KAAKsL,WACLtL,KAAKy8E,gBACLz8E,KAAKmnF,cACLnnF,KAAKkiE,cACLliE,KAAKyR,cACLzR,KAAK8nF,kBACL9nF,KAAKshB,iBACLthB,KAAKqL,cACLrL,KAAK44E,YACL54E,KAAKuhB,WACLvhB,KAAKqmB,oBACLrmB,KAAKuL,aACLvL,KAAK+nF,gBACL/nF,KAAKgoF,iBACLhoF,KAAK2uB,oBACL3uB,KAAKioF,eACLr5D,GAEF5uB,KAAKmiE,mBAAqB,IAAIW,GAC5B9iE,KAAKsL,WACLtL,KAAKuL,aACLvL,KAAKuhB,YAEPvhB,KAAKi6H,uBAAyB,IAAIh4D,GAChCjiE,KAAKkiE,cACLliE,KAAKuL,aACLvL,KAAK2uB,oBACL3uB,KAAKmiE,oBAEPniE,KAAKg6H,YAAc,IAAIrvD,GAAY3qE,KAAKwrB,sBAAuBxrB,KAAKuhB,YAEpEvhB,KAAKy+F,gBAAkB,IAAIs7B,GACzB/5H,KAAKkiE,cACLliE,KAAKuL,aACLvL,KAAKg6H,YACLh6H,KAAKi6H,uBACLj6H,KAAKuhB,WACLvhB,KAAKy8E,gBACLz8E,KAAK4sE,yBAEP5sE,KAAKuwI,aAAe,IAAIpwE,GAAangE,KAAKwrB,sBAAuBxrB,KAAKsL,YACtEtL,KAAKwwI,cAAgB,IAAItkD,GACvBlsF,KAAKmnF,cACLnnF,KAAKkiE,cACLliE,KAAKsL,WACLtL,KAAKyR,cACLzR,KAAKwrB,sBACLxrB,KAAKuL,cAEPvL,KAAKirI,qBAAuB,IAAIvmE,GAC9B1kE,KAAK2kE,YACL3kE,KAAKqhB,aACLrhB,KAAKsL,WACLtL,KAAK8nB,mBACL8G,EACA5uB,KAAKuhB,WACLvhB,KAAKuL,aACLvL,KAAKkkB,YACLlkB,KAAKshB,kBAEPthB,KAAKytI,cAAgB,IAAIn1G,GACvBt4B,KAAKuL,aACLvL,KAAKu4B,iBACLv4B,KAAKkkB,YACLlkB,KAAK8nB,oBAiEP,GArDA9nB,KAAKwtI,cAAgB,IAAI33F,GACvB71C,KAAKshB,iBACLthB,KAAKgf,sBAXkC,KACvC,MAAMyxH,EACJzwI,KAAKgf,qBAAqB0zE,YAC1B1yF,KAAKgf,qBAAqBgzE,aAC1BhyF,KAAKgf,qBAAqBkzE,UAE5B,OADAd,GAAW66C,gBAAgBwE,EAAoBrvI,OAAS,MACjD8H,QAAQC,SAAS,GAOxBnJ,KAAKuL,cAIPvL,KAAK0yF,SAAW1yF,KAAKgf,qBAAqB0zE,WAG1C1yF,KAAK6rI,kBAAoB,IAAI0B,GAC3BvtI,KACAA,KAAKy+F,gBACLz+F,KAAKgf,qBACLhf,KAAKyG,YACLzG,KAAKirI,qBACLjrI,KAAKwtI,cACLxtI,KAAK8nB,mBACL9nB,KAAKshB,iBACLthB,KAAKuhB,WACLvhB,KAAKytI,eAEPztI,KAAK8vI,0BAA4B,IAAIlE,GACnC5rI,KAAKyR,cACLzR,KAAKwrB,sBACLxrB,KAAK6rI,kBACL7rI,KAAKyG,YACLzG,KAAKshB,iBACLthB,KAAKqhB,aACLrhB,KAAKgf,qBACLhf,KAAKuL,aACLvL,KAAKuhB,WACLvhB,KAAKkkB,aAEPlkB,KAAK0wI,mBAAqB,IAAIlG,GAC5BxqI,KACAA,KAAKuiI,0BACLviI,KAAKgf,qBACLhf,KAAKyqI,oBACLzqI,KAAKkkB,aAEPlkB,KAAKsiG,uBAAyB,IAAI9D,GAChCx+F,KAAKy+F,gBACLz+F,KAAKkiE,cACLliE,KAAKkkB,YACLlkB,KAAKqL,cACLrL,KAAKmnF,cACLnnF,KAAKuL,aACLvL,KAAK8nB,oBAGP9nB,KAAK2wI,eAAiB,IAAIvuC,GAAepiG,KAAMA,KAAKsiG,yBAC/CtiG,KAAKiuI,iBAAkB,CAC1B,MAAMrwC,EAA4B,IAAIolC,IACnCxrH,GAAYxX,KAAKgf,qBAAqBi4B,gBAAgBz/B,EAAQo4C,KAAM,CAAExuD,OAAQc,SACxE0uI,GAAS,mC,QACd,MAAMp5H,EAAkE,QAAvD,EAAkD,QAAnD,QAAOxX,KAAKuiI,0BAA0BrxD,oBAAa,eAAG,UAAE,QAAI,CAAC,EACvE93D,QAAiBpZ,KAAKuiI,0BAA0BtyD,iBAAiBz4D,GACvExX,KAAKgf,qBAAqBi4B,gBAAgB79B,EAAU,CAAEhY,SACtDpB,KAAKuiI,0BAA0BnwD,WAAWh5D,EAC5C,MACA,CAAO+8E,EAAK3zB,IAAW,mCACrBxiE,KAAKgvI,gBAAkBxsE,EACZ,MAAP2zB,GAIJ/E,GAAWgF,eAAeD,EAAK,CAC7BjF,QAAS,qBACTiF,IAAKA,EACL6H,OAAQ,eAEZ,KACAh+F,KAAKkkB,YACLlkB,KAAKkiE,cACLliE,KAAKg6H,YACLh6H,KAAKi6H,wBAGPj6H,KAAK6wI,uBAAyB,IAAIlzC,GAAuBC,E,CAG3D59F,KAAK8wI,eAAiB,IAAI9F,GACxBhrI,KAAKyqI,oBACLzqI,KAAKuL,aACLvL,KAAKirI,sBAEPjrI,KAAK+wI,qBAAuB,IAAI9B,GAC9BjvI,KAAKgf,qBACLhf,KAAKkiE,cACLliE,KAAKkkB,aAGPlkB,KAAKgxI,0BAA4B,IAAIr7D,GACnC31E,KAAKyR,cACLzR,KAAKuL,aACLvL,KAAKsL,YAGPtL,KAAKsuI,oBAAsB,IAAIxxF,GAAoB98C,KAAKsL,WAAYtL,KAAKuL,cAEpEvL,KAAKiuI,mBACRjuI,KAAKyoH,uBAAyB,IAAInB,GAChCtnH,KAAKuL,aACLvL,KAAKyG,YACLzG,KAAKuhB,YAGPvhB,KAAK4oH,yBAA2B,IAAIJ,GAClCxoH,KAAKyoH,uBACLzoH,KAAKkkB,YACLlkB,KAAKkiE,cACLliE,KAAK4sE,yBAGX,CAEMqkE,Y,gDAqBJ,GApBAjxI,KAAKswI,iBAAiB51G,eAAet5B,cAE/BpB,KAAKuL,aAAajB,aAElBtK,KAAKyqI,oBAAoBngI,MAAK,SAC7BtK,KAAKyG,YAAmC6D,aACxCtK,KAAKmiE,mBAA0C73D,MAAK,SACrDtK,KAAK6rI,kBAAkBvhI,aACvBtK,KAAKsiG,uBAAuBh4F,aAC5BtK,KAAK0wI,mBAAmBpmI,OAE9BtK,KAAKwhB,iBAAiBlX,aAEhBtK,KAAK2wI,eAAermI,OACrBtK,KAAKiuI,kBACmB,QAA3B,EAAAjuI,KAAK6wI,8BAAsB,SAAEvmI,aAEzBtK,KAAK8wI,eAAexmI,aACpBtK,KAAK+wI,qBAAqBzmI,OAE5BtK,KAAKgf,qBAAqBgzE,cAAgBhyF,KAAK4vI,cAAe,QAEnCx+C,GAAW8/C,yBACzB7qI,SAAeqC,GAAQ,yCAC9B,IAAI46H,GAAYphI,MAAM+hI,aAAa,GAAIv7H,EAAIxD,GACnD,MAEAksF,GAAW+/C,iBAAuBzoI,GAAQ,mCACpCA,EAAI8tF,kBACA,IAAI8sC,GAAYphI,MAAM+hI,aAAa,GAAIv7H,EAAIxD,IAErD,K,CAGF,OAAO,IAAIgE,SAAeC,IACxBC,YAAW,IAAY,yCACfpJ,KAAK8nB,mBAAmB6yF,qBAG9B36G,KAAK8nB,mBAAmBwyF,aAAc,EACjCt6G,KAAK4vI,sBACF5vI,KAAK2iG,gBAEb3iG,KAAK2mE,UAAS,GACdv9D,YAAW,IAAMpJ,KAAKirI,qBAAqB3gI,QAAQ,MACnDnB,GACF,KAAG,IAAI,G,IAILw5F,e,gDACE,IAAI2gC,GAAYphI,MAAM67F,IAAI,CAAEwlC,iBAAkBvjI,MACtD,G,CAEM4iG,YAAYwuC,GAAY,G,oDAC5B,IAAKv+C,OAAOgD,UAAYhD,OAAOgL,aAC7B,OAKF,SAFMypB,GAAuBI,YAEzB0pB,EAGF,aAFiC,QAA3B,EAAApxI,KAAKyoH,8BAAsB,eAAEN,gBACnCnoH,KAAKmjG,aAAenjG,KAAKgjG,eAAgB,SAIV,QAA3B,EAAAhjG,KAAKyoH,8BAAsB,eAAEn+G,OAEnC,MAAM6rF,QAAY/E,GAAWuO,0BACzBxJ,UACiC,QAA7B,EAAAn2F,KAAK4oH,gCAAwB,eAAE7uE,OAAOo8C,EAAIvwF,KAChD5F,KAAKmjG,aAAenjG,KAAKgjG,eAAgB,E,IAIvCqrC,OAAOpqC,EAAkBh4F,G,gDACvBjM,KAAKmiE,mBAAmBS,aAAa32D,SAErC/C,QAAQ4N,IAAI,CAChB9W,KAAK2kE,YAAYyjB,YAAY,IAAIx+E,KAAK,GAAIqC,GAC1CjM,KAAKyR,cAAc2vG,UAAUn1G,GAC7BjM,KAAKy8E,gBAAgB1rD,MAAM9kB,GAC3BjM,KAAKkiE,cAAcnxC,MAAM9kB,GACzBjM,KAAKmnF,cAAcp2D,MAAM9kB,GACzBjM,KAAK8nF,kBAAkB/2D,MAAM9kB,GAC7BjM,KAAKqL,cAAc0lB,MAAM9kB,GACzBjM,KAAKuiI,0BAA0BxxG,MAAM9kB,GACrCjM,KAAKqmI,4BAA4Bt1G,MAAM9kB,GACvCjM,KAAKqmB,oBAAoB0K,QACzB/wB,KAAKiwI,mBAAmBl/G,UAI1B,MAAMsgH,QAA0BrxI,KAAKsxI,2BAE/BtxI,KAAKuL,aAAay6F,MAAM,CAAE/5F,OAAQA,IAE1B,MAAVA,GAAkBA,WAAkBjM,KAAKuL,aAAaa,eACxDpM,KAAK08E,cAAc5U,aACnB9nE,KAAKshB,iBAAiB7V,KAAK,iBAAkB,CAAEw4F,QAASA,EAASh4F,OAAQA,KAGvEolI,UACIrxI,KAAK0uI,iBAGsB,IAA/Bt9C,GAAWmE,iBACbnE,GAAWiF,YAAY,qBAEnBr2F,KAAK2iG,qBACL3iG,KAAKyoH,uBAAuBN,WAClCnoH,KAAKirI,qBAAqBllE,kBAAiB,SACrC/lE,KAAKwtI,cAAcr2F,8BACnBn3C,KAAKwtI,cAAct3F,mBAAmBl2C,KAAKkkB,YACnD,G,CAEcotH,qB,0CAEZ,OAA8B,aADItxI,KAAKuL,aAAawiE,kBAEtD,G,CAEMg9D,mCAAmC50C,EAAU6H,EAAgBk+B,EAAkB,M,0CACnF,GAAW,MAAP/lC,IAAgBA,EAAIjxF,GACtB,OAGF,MAAMsS,EAAe,CAAC,EACP,MAAX0kH,IACF1kH,EAAQ0kH,QAAUA,GAGpB9qC,GAAWgF,eACTD,EACA,CACEjF,QAAS,qBACTiF,IAAKA,EACL6H,OAAQA,GAEVxmF,EAEJ,G,CAEMqzH,Y,0CAIC7qI,KAAK0yF,iBAGJzB,GAAU6C,iBAAiB,cAAe,MAAM,GACxD,G,CAEM46C,gB,0CACJ,IACG1uI,KAAKgf,qBAAqBwzE,aAC1BxyF,KAAKgf,qBAAqBszE,cAC1BtyF,KAAKgf,qBAAqBkzE,UAE3B,OAGF,MAUMkkB,QATJ,IAAIltG,SAASC,IACX0pF,OAAOujB,QAAQkB,MAAM7pG,IAAI,MAAOuiB,GAAW7mB,EAAQ6mB,IAAG,UAIxD,IAAI9mB,SAASC,IACX0pF,OAAOujB,QAAQkB,MAAMvmF,OAAM,IAAM5nB,KAAU,IAM/C,IAAK,MAAM2H,KAAOslG,EAEXA,EAAQxoG,eAAekD,WAGtB9Q,KAAKy3B,eAAe1pB,KAAK+C,EAAKslG,EAAQtlG,IAEhD,G,CAEc61D,SAAS4qE,GAAW,G,0CAChC,MAAMC,EAAe,MACfl/F,QAAiBtyC,KAAK2kE,YAAYwjB,cAExC,IAAIspD,EAAcD,SACF,MAAZl/F,IACFm/F,GAAc,IAAI7nI,MAAOD,UAAY2oC,EAAS3oC,WAG5C4nI,GAAYE,GAAeD,SACvBxxI,KAAK2kE,YAAYgC,SAAS4qE,GAChCvxI,KAAK0xI,oBAEL1xI,KAAK0xI,kBAET,G,CAEQA,mBACF1xI,KAAK2xI,aACPxmH,aAAanrB,KAAK2xI,aAGpB3xI,KAAK2xI,YAAcvoI,YAAW,IAAY,gDAAMpJ,KAAK2mE,UAAU,KAAE,IACnE,E,2SC92BK,MAAMirE,GAAyBC,GAA+B,qCACnE3P,GAAU77H,SAAeyK,GAAQ,qCAC/B,MAAMghI,Q9BgBH,SAA4BzP,G,0CACjC,IAAI0P,EAQJ,OALEA,EAFgC,GAA9B3gD,GAAWmE,uBACkB1C,OAAOujB,QAAQwB,QAAQnqG,IAAI40H,IAC7BA,GAEjBF,GAAWE,GAGlB0P,CACT,G,C8B1BgCC,CAAalhI,GACzC,IAAKghI,EACH,OAIF,KAAIA,EADgBloI,KAAKC,e9B4CtB,SAA8Bw4H,G,gDAC7BD,GAAqBC,EAAa,KAC1C,G,C8BzCUK,CAAe5xH,GAEbA,IACDixH,IACHC,GAAejkC,KAIrB,KACF,I,2SCrBO,MAAMk0C,GAAU,CACrBC,EACAC,EAAmC,CAAC,IAE7B,IAAUz7G,IAAY,qCAC3B,MAAM2sE,EAAiB,OAAH,UAAQ8uC,GAC5B,IAAK,MAAMC,KAAYF,QACfE,KAAgB17G,EAAM2sE,EAEhC,I,2SCKK,MAAMgvC,GAAoB,CAAOnhD,EAAiBiF,IAAyB,qCAChF,OAAQjF,GACN,IAAK,uBACGohD,GAAgBn8C,GACtB,MACF,IAAK,0BACGo8C,GAA8Bp8C,GAG1C,IAEMm8C,GAAyBn8C,GAAwC,qCACrE,MAAMkN,EAAiC,CAAC,EAClCC,EAAO,CACX0V,6BAA8B,CAC5BtwG,IAAKxG,MAEPg3G,sBAAuB,CACrB/9E,gBAAgB,GAElB87E,kBAAmB,CACjBr9E,OAAO,GAETkjF,4BAA6B,CAC3BjrB,uBAAwB,IAAM3oF,QAAQC,UACtC2oF,kBAAmB,IAAM5oF,QAAQC,SAAQ,GACzCT,IAAKxG,MAEP43G,oBAAqB,CACnBnnE,aAAc,IAAI9b,GAAaM,GAAa6+E,KAE9C4D,6BAA8B,CAC5BjnE,aAAc,IAAI9b,GAAaM,GAAa6+E,KAE9CgH,kBAAmB,CACjBpuF,eAAgB,IAAM1lB,QAAQC,WAEhCw8G,2BAA4B,CAC1B/2F,eAAgB,IAAM1lB,QAAQC,WAEhCo8G,mBAAoB,CAClB/B,eAAgBpyB,GAAW8G,cAAch2F,QAGvCqf,QAAmBy1F,GAAkB3T,EAAgBC,GACrDp/E,QAAoBwhG,GAAmBriB,EAAgBC,GACvD7E,QAAwBqjC,GAAuBz+B,EAAgBC,GAGrE,UADyBp/E,EAAYkF,iBACpBnW,GAAqB2W,SAGpC,YADArI,EAAW0Y,KAAK,8EAIlB,MAAMi3D,EAAU,IAAI0xC,GAAmBnkC,SACjCvN,EAAQ2xC,qBAAqB1sC,EACrC,IAEMo8C,GAAuCp8C,GAAwC,qCACnF,MAAMxjD,EAAe,IAAI9b,GAAaM,GAAa6+E,IAE7CprE,EAAQ,CAAC,EACTpzB,EAAgD,CACpDwhG,6BAA8B,CAC5BtwG,IAAKxG,MAEPg3G,sBAAuB,CACrB/9E,gBAAgB,GAElB87E,kBAAmB,CACjBr9E,OAAO,GAETkjF,4BAA6B,CAC3BhrB,kBAAmB,IAAM5oF,QAAQC,SAAQ,GACzC0oF,uBAAwB,IAAM3oF,QAAQC,UACtCT,IAAKxG,MAEP03G,6BAA8B,CAC5BjnE,aAAcA,GAEhBmnE,oBAAqB,CACnBnnE,aAAcA,IAIF,IAAI2vF,SACZjZ,GAAiCz+E,EAAOpzB,SACxCkiG,GAAoB9uE,EAAOpzB,IAE3BgrH,4BAA4BrsC,EACtC,I,2SCrGA,MAAMq8C,GAA0BP,GAAQ,CACtC3O,GAAYkP,wBACZhqB,GAAyBgqB,0BAGrBC,GAAyBR,GAAQ,CACrC3O,GAAYmP,uBACZjqB,GAAyBiqB,yBAGrBC,GAAwBT,GAAQ,CACpC3O,GAAYoP,sBACZlqB,GAAyBkqB,wBAGrBC,GAA8B3P,GAA0B4P,kBAGxDC,GAAyBZ,GAE7B,CACA3O,GAAYppC,gBACZsuB,GAAyBtuB,gBACzB8oC,GAA0B9oC,kBChB5B,GAAmC,IAA/B9I,GAAWmE,gBACb1C,OAAOwC,SAASs1C,UAAUj0C,YAAY27C,IACtCx/C,OAAOpB,QAAQo8C,YAAYn3C,aCPtB,SAAiC7wC,G,0CACtC,MACMy9C,EAAsC,CAC1C4V,sBAAuB,CACrB/9E,gBAAgB,GAElB69E,6BAA8B,CAC5BtwG,IAAKxG,MAEP+0G,kBAAmB,CACjBr9E,OAAO,GAETkgF,oBAAqB,CACnBnnE,aAAc,IAAI9b,GAAaM,GAAa6+E,KAE9C4D,6BAA8B,CAC5BjnE,aAAc,IAAI9b,GAAaM,GAAa6+E,MAG1CluF,QAA2B40F,GAlBnB,CAAC,EAkBmDpZ,GAElEl6F,YAAW,IAAY,mCACC,MAAlBy8C,EAAQioF,QAAkBjoF,EAAQioF,SAAWj7C,OAAOpB,QAAQqhD,kBAAkBC,UAChF3hD,GAAWmC,aAAa,+CAEdzrE,EAAmBs0F,iCACrBt0F,EAAmB20F,+BAG/B,KAAG,IACL,G,IDtBE5pB,OAAOmgD,OAAOC,QAAQv8C,YAAYk7C,IEApC,SAA2BsB,GACzB,MACMpnE,EADgB,IACSonE,EAE/B,IAAIC,EAAyBvpI,KAAKC,MAAQiiE,EAE1C,IAAK,IAAI1E,EAAQ,EAAGA,EAAQ8rE,EAAgB9rE,IAC1CyrB,OAAOmgD,OAAOv8G,OAAO,WAAW2wC,IAAS,CAAEgsE,gBAAiB,EAAGC,KAAMF,IACrEA,GAAkBrnE,CAEtB,CAzBEwnE,CAHuB,GFoBvBzgD,OAAOmD,KAAKyM,YAAY/L,YAAY87C,IACpC3/C,OAAOmD,KAAK6M,WAAWnM,YAAY+7C,IACnC5/C,OAAOmD,KAAKiN,UAAUvM,YAAYg8C,IAClC7/C,OAAOgL,aAAaC,UAAUpH,YAAYi8C,IAC1CvhD,GAAW8I,gBACT,sBACA,CAAC1mF,EAA8BwqF,EAAQvlB,KACrCo6D,GAAuBr/H,EAASwqF,EAAO,QAGtC,EACmB58F,OAAemyI,cAAgB,IAAI5D,IAC7CsB,YAAYt6H,MAAK,Q,8BG/B7B68H,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBrzI,IAAjBszI,EACH,OAAOA,EAAaC,QAGrB,IAAIn3F,EAAS+2F,EAAyBE,GAAY,CACjDxuI,GAAIwuI,EACJG,QAAQ,EACRD,QAAS,CAAC,GAUX,OANAE,EAAoBJ,GAAUrvI,KAAKo4C,EAAOm3F,QAASn3F,EAAQA,EAAOm3F,QAASH,GAG3Eh3F,EAAOo3F,QAAS,EAGTp3F,EAAOm3F,OACf,CAGAH,EAAoBjhF,EAAIshF,EAGxBL,EAAoB3uI,EAAI0uI,Ehb/BpB7zI,EAAW,GACf8zI,EAAoBM,EAAI,CAACxwH,EAAQywH,EAAUC,EAAItgH,KAC9C,IAAGqgH,EAAH,CAMA,IAAIE,EAAeC,IACnB,IAASzxI,EAAI,EAAGA,EAAI/C,EAASe,OAAQgC,IAAK,CAGzC,IAFA,IAAKsxI,EAAUC,EAAItgH,GAAYh0B,EAAS+C,GACpC0xI,GAAY,EACPrhE,EAAI,EAAGA,EAAIihE,EAAStzI,OAAQqyE,MACpB,EAAXp/C,GAAsBugH,GAAgBvgH,IAAaxsB,OAAOE,KAAKosI,EAAoBM,GAAGjrE,OAAOh4D,GAAS2iI,EAAoBM,EAAEjjI,GAAKkjI,EAASjhE,MAC9IihE,EAAS3yE,OAAO0R,IAAK,IAErBqhE,GAAY,EACTzgH,EAAWugH,IAAcA,EAAevgH,IAG7C,GAAGygH,EAAW,CACbz0I,EAAS0hE,OAAO3+D,IAAK,GACrB,IAAIqC,EAAIkvI,SACE5zI,IAAN0E,IAAiBwe,EAASxe,EAC/B,CACD,CACA,OAAOwe,CAnBP,CAJCoQ,EAAWA,GAAY,EACvB,IAAI,IAAIjxB,EAAI/C,EAASe,OAAQgC,EAAI,GAAK/C,EAAS+C,EAAI,GAAG,GAAKixB,EAAUjxB,IAAK/C,EAAS+C,GAAK/C,EAAS+C,EAAI,GACrG/C,EAAS+C,GAAK,CAACsxI,EAAUC,EAAItgH,EAqBjB,EC1BV9zB,EAAWsH,OAAOktI,eAAkBrtI,GAASG,OAAOktI,eAAertI,GAASA,GAASA,EAAa,UAQtGysI,EAAoB5yI,EAAI,SAAS+qB,EAAO0oH,GAEvC,GADU,EAAPA,IAAU1oH,EAAQ5rB,KAAK4rB,IAChB,EAAP0oH,EAAU,OAAO1oH,EACpB,GAAoB,iBAAVA,GAAsBA,EAAO,CACtC,GAAW,EAAP0oH,GAAa1oH,EAAM2oH,WAAY,OAAO3oH,EAC1C,GAAW,GAAP0oH,GAAoC,mBAAf1oH,EAAMjV,KAAqB,OAAOiV,CAC5D,CACA,IAAI4oH,EAAKrtI,OAAOsvB,OAAO,MACvBg9G,EAAoB1uI,EAAEyvI,GACtB,IAAIC,EAAM,CAAC,EACX70I,EAAiBA,GAAkB,CAAC,KAAMC,EAAS,CAAC,GAAIA,EAAS,IAAKA,EAASA,IAC/E,IAAI,IAAI60I,EAAiB,EAAPJ,GAAY1oH,EAAyB,iBAAX8oH,KAAyB90I,EAAe6F,QAAQivI,GAAUA,EAAU70I,EAAS60I,GACxHvtI,OAAOwtI,oBAAoBD,GAASruI,SAASyK,GAAS2jI,EAAI3jI,GAAO,IAAO8a,EAAM9a,KAI/E,OAFA2jI,EAAa,QAAI,IAAM,EACvBhB,EAAoBlhH,EAAEiiH,EAAIC,GACnBD,CACR,EgbxBAf,EAAoBlhH,EAAI,CAACqhH,EAASgB,KACjC,IAAI,IAAI9jI,KAAO8jI,EACXnB,EAAoBzjH,EAAE4kH,EAAY9jI,KAAS2iI,EAAoBzjH,EAAE4jH,EAAS9iI,IAC5E3J,OAAO0tI,eAAejB,EAAS9iI,EAAK,CAAEgkI,YAAY,EAAMrnI,IAAKmnI,EAAW9jI,IAE1E,ECLD2iI,EAAoBv0G,EAAK61G,GAEjB,oBCHRtB,EAAoBxxI,EAAI,WACvB,GAA0B,iBAAf+yI,WAAyB,OAAOA,WAC3C,IACC,OAAOh1I,MAAQ,IAAIi1I,SAAS,cAAb,EAChB,CAAE,MAAO1sI,GACR,GAAsB,iBAAXnH,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxBqyI,EAAoBzjH,EAAI,CAAChpB,EAAKN,IAAUS,OAAO/C,UAAUwJ,eAAevJ,KAAK2C,EAAKN,GCClF+sI,EAAoB1uI,EAAK6uI,IACH,oBAAXsB,QAA0BA,OAAOC,aAC1ChuI,OAAO0tI,eAAejB,EAASsB,OAAOC,YAAa,CAAEvpH,MAAO,WAE7DzkB,OAAO0tI,eAAejB,EAAS,aAAc,CAAEhoH,OAAO,GAAO,ECL9D6nH,EAAoB2B,IAAO34F,IAC1BA,EAAO44F,MAAQ,GACV54F,EAAOwoC,WAAUxoC,EAAOwoC,SAAW,IACjCxoC,G,MCHR,IAAI64F,EACA7B,EAAoBxxI,EAAEszI,gBAAeD,EAAY7B,EAAoBxxI,EAAEk2F,SAAW,IACtF,IAAIvE,EAAW6/C,EAAoBxxI,EAAE2xF,SACrC,IAAK0hD,GAAa1hD,IACbA,EAAS4hD,gBACZF,EAAY1hD,EAAS4hD,cAAcC,MAC/BH,GAAW,CACf,IAAII,EAAU9hD,EAAS+hD,qBAAqB,UAC5C,GAAGD,EAAQh1I,OAEV,IADA,IAAIgC,EAAIgzI,EAAQh1I,OAAS,EAClBgC,GAAK,IAAM4yI,GAAWA,EAAYI,EAAQhzI,KAAK+yI,GAExD,CAID,IAAKH,EAAW,MAAM,IAAIl1I,MAAM,yDAChCk1I,EAAYA,EAAUxxI,QAAQ,OAAQ,IAAIA,QAAQ,QAAS,IAAIA,QAAQ,YAAa,KACpF2vI,EAAoB/8H,EAAI4+H,C,WClBxB7B,EAAoB7sI,EAAIgtF,SAASgiD,SAAW1zI,KAAKi2F,SAASI,KAK1D,IAAIs9C,EAAkB,CACrB,IAAK,GAaNpC,EAAoBM,EAAEhhE,EAAKgiE,GAA0C,IAA7Bc,EAAgBd,GAGxD,IAAIe,EAAuB,CAACC,EAA4Bh1I,KACvD,IAGI2yI,EAAUqB,GAHTf,EAAUgC,EAAavkD,GAAW1wF,EAGhB2B,EAAI,EAC3B,GAAGsxI,EAASttG,MAAMxhC,GAAgC,IAAxB2wI,EAAgB3wI,KAAa,CACtD,IAAIwuI,KAAYsC,EACZvC,EAAoBzjH,EAAEgmH,EAAatC,KACrCD,EAAoBjhF,EAAEkhF,GAAYsC,EAAYtC,IAGhD,GAAGjiD,EAAS,IAAIluE,EAASkuE,EAAQgiD,EAClC,CAEA,IADGsC,GAA4BA,EAA2Bh1I,GACrD2B,EAAIsxI,EAAStzI,OAAQgC,IACzBqyI,EAAUf,EAAStxI,GAChB+wI,EAAoBzjH,EAAE6lH,EAAiBd,IAAYc,EAAgBd,IACrEc,EAAgBd,GAAS,KAE1Bc,EAAgBd,GAAW,EAE5B,OAAOtB,EAAoBM,EAAExwH,EAAO,EAGjC0yH,EAAqB/zI,KAAqC,+BAAIA,KAAqC,gCAAK,GAC5G+zI,EAAmB5vI,QAAQyvI,EAAqB74C,KAAK,KAAM,IAC3Dg5C,EAAmBnoI,KAAOgoI,EAAqB74C,KAAK,KAAMg5C,EAAmBnoI,KAAKmvF,KAAKg5C,G,KC7CvF,IAAIC,EAAsBzC,EAAoBM,OAAE1zI,EAAW,CAAC,MAAM,IAAOozI,EAAoB,SAC7FyC,EAAsBzC,EAAoBM,EAAEmC,E","sources":["webpack:///webpack/runtime/chunk loaded","webpack:///webpack/runtime/create fake namespace object","webpack:///../../libs/common/src/models/response/base.response.ts","webpack:///../../libs/common/src/models/response/list.response.ts","webpack:///../../libs/common/src/platform/misc/utils.ts","webpack:///../../libs/common/src/admin-console/models/data/policy.data.ts","webpack:///../../libs/common/src/admin-console/models/response/policy.response.ts","webpack:///../../libs/common/src/admin-console/enums/organization-api-key-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/organization-connection-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/organization-user-status-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/organization-user-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/policy-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/provider-user-status-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/provider-user-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/scim-provider-type.enum.ts","webpack:///../../libs/common/src/admin-console/services/policy/policy-api.service.ts","webpack:///../../libs/common/src/models/domain/provider.ts","webpack:///../../libs/common/src/enums/client-type.enum.ts","webpack:///../../libs/common/src/enums/device-type.enum.ts","webpack:///../../libs/common/src/admin-console/services/provider.service.ts","webpack:///../../libs/common/src/enums/encrypted-export-type.enum.ts","webpack:///../../libs/common/src/enums/encryption-type.enum.ts","webpack:///../../libs/common/src/enums/event-system-user.enum.ts","webpack:///../../libs/common/src/enums/event-type.enum.ts","webpack:///../../libs/common/src/enums/field-type.enum.ts","webpack:///../../libs/common/src/enums/file-upload-type.enum.ts","webpack:///../../libs/common/src/enums/hash-purpose.enum.ts","webpack:///../../libs/common/src/enums/html-storage-location.enum.ts","webpack:///../../libs/common/src/enums/http-status-code.enum.ts","webpack:///../../libs/common/src/enums/kdf-type.enum.ts","webpack:///../../libs/common/src/auth/models/domain/kdf-config.ts","webpack:///../../libs/common/src/enums/key-suffix-options.enum.ts","webpack:///../../libs/common/src/enums/linked-id-type.enum.ts","webpack:///../../libs/common/src/enums/log-level-type.enum.ts","webpack:///../../libs/common/src/enums/native-messaging-version.enum.ts","webpack:///../../libs/common/src/enums/notification-type.enum.ts","webpack:///../../libs/common/src/enums/product-type.enum.ts","webpack:///../../libs/common/src/enums/provider-type.enum.ts","webpack:///../../libs/common/src/enums/secure-note-type.enum.ts","webpack:///../../libs/common/src/enums/state-version.enum.ts","webpack:///../../libs/common/src/enums/storage-location.enum.ts","webpack:///../../libs/common/src/enums/theme-type.enum.ts","webpack:///../../libs/common/src/enums/uri-match-type.enum.ts","webpack:///../../libs/common/src/platform/models/domain/symmetric-crypto-key.ts","webpack:///../../libs/common/src/auth/services/auth-request-crypto.service.implementation.ts","webpack:///../../libs/common/src/auth/enums/authentication-status.ts","webpack:///../../libs/common/src/auth/enums/authentication-type.ts","webpack:///../../libs/common/src/models/request/prelogin.request.ts","webpack:///../../libs/common/src/models/response/error.response.ts","webpack:///../../libs/common/src/platform/models/domain/enc-string.ts","webpack:///../../libs/common/src/auth/models/domain/force-reset-password-reason.ts","webpack:///../../libs/common/src/auth/enums/two-factor-provider-type.ts","webpack:///../../libs/common/src/platform/models/domain/domain-base.ts","webpack:///../../libs/common/src/admin-console/models/domain/master-password-policy-options.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/token.request.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/password-token.request.ts","webpack:///../../libs/common/src/auth/models/response/identity-captcha.response.ts","webpack:///../../libs/common/src/models/request/keys.request.ts","webpack:///../../libs/common/src/auth/models/domain/admin-auth-req-storable.ts","webpack:///../../libs/common/src/auth/models/domain/environment-urls.ts","webpack:///../../libs/common/src/auth/models/domain/user-decryption-options/key-connector-user-decryption-option.ts","webpack:///../../libs/common/src/auth/models/domain/user-decryption-options/trusted-device-user-decryption-option.ts","webpack:///../../libs/common/src/platform/models/data/server-config.data.ts","webpack:///../../libs/common/src/platform/models/domain/account.ts","webpack:///../../libs/common/src/auth/models/domain/auth-result.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/device.request.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/token-two-factor.request.ts","webpack:///../../libs/common/src/auth/models/response/master-password-policy.response.ts","webpack:///../../libs/common/src/auth/models/response/user-decryption-options/key-connector-user-decryption-option.response.ts","webpack:///../../libs/common/src/auth/models/response/user-decryption-options/trusted-device-user-decryption-option.response.ts","webpack:///../../libs/common/src/auth/models/response/user-decryption-options/user-decryption-options.response.ts","webpack:///../../libs/common/src/auth/models/response/identity-token.response.ts","webpack:///../../libs/common/src/auth/models/response/identity-two-factor.response.ts","webpack:///../../libs/common/src/auth/login-strategies/login.strategy.ts","webpack:///../../libs/common/src/auth/login-strategies/password-login.strategy.ts","webpack:///../../libs/common/src/auth/login-strategies/passwordless-login.strategy.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/sso-token.request.ts","webpack:///../../libs/common/src/auth/login-strategies/sso-login.strategy.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/user-api-token.request.ts","webpack:///../../libs/common/src/auth/login-strategies/user-api-login.strategy.ts","webpack:///../../libs/common/src/auth/models/request/passwordless-auth.request.ts","webpack:///../../libs/common/src/auth/services/auth.service.ts","webpack:///../../libs/common/src/auth/models/request/secret-verification.request.ts","webpack:///../../libs/common/src/auth/models/request/update-devices-trust.request.ts","webpack:///../../libs/common/src/auth/services/device-trust-crypto.service.implementation.ts","webpack:///../../libs/common/src/abstractions/devices/responses/device.response.ts","webpack:///../../libs/common/src/services/devices/requests/trusted-device-keys.request.ts","webpack:///../../libs/common/src/auth/models/response/protected-device.response.ts","webpack:///../../libs/common/src/auth/services/devices-api.service.implementation.ts","webpack:///../../libs/common/src/auth/models/request/key-connector-user-key.request.ts","webpack:///../../libs/common/src/auth/models/request/set-key-connector-key.request.ts","webpack:///../../libs/common/src/auth/services/key-connector.service.ts","webpack:///../../libs/common/src/auth/services/token.service.ts","webpack:///../../libs/common/src/auth/services/two-factor.service.ts","webpack:///../../libs/common/src/auth/enums/verification-type.ts","webpack:///../../libs/common/src/auth/services/user-verification/user-verification-api.service.ts","webpack:///../../libs/common/src/auth/models/request/verify-otp.request.ts","webpack:///../../libs/common/src/auth/services/user-verification/user-verification.service.ts","webpack:///../../libs/common/src/platform/abstractions/messaging.service.ts","webpack:///../../libs/common/src/platform/factories/account-factory.ts","webpack:///../../libs/common/src/platform/factories/global-state-factory.ts","webpack:///../../libs/common/src/platform/factories/state-factory.ts","webpack:///../../libs/common/src/models/domain/window-state.ts","webpack:///../../libs/common/src/platform/models/domain/global-state.ts","webpack:///../../libs/common/src/platform/services/app-id.service.ts","webpack:///../../libs/common/src/platform/abstractions/config/server-config.ts","webpack:///../../libs/common/src/platform/services/config/config.service.ts","webpack:///../../libs/common/src/platform/services/console-log.service.ts","webpack:///../../libs/common/src/platform/services/container.service.ts","webpack:///../../libs/common/src/platform/models/domain/enc-array-buffer.ts","webpack:///../../libs/common/src/platform/models/domain/encrypted-object.ts","webpack:///../../libs/common/src/platform/services/cryptography/encrypt.service.implementation.ts","webpack:///../../libs/common/src/platform/services/cryptography/initializer-key.ts","webpack:///../../libs/common/src/vault/enums/cipher-type.ts","webpack:///../../libs/common/src/vault/enums/cipher-reprompt-type.ts","webpack:///../../libs/common/src/vault/models/data/attachment.data.ts","webpack:///../../libs/common/src/vault/models/data/card.data.ts","webpack:///../../libs/common/src/vault/models/data/field.data.ts","webpack:///../../libs/common/src/vault/models/data/identity.data.ts","webpack:///../../libs/common/src/vault/models/data/login-uri.data.ts","webpack:///../../libs/common/src/vault/models/data/login.data.ts","webpack:///../../libs/common/src/vault/models/data/password-history.data.ts","webpack:///../../libs/common/src/vault/models/data/secure-note.data.ts","webpack:///../../libs/common/src/vault/models/data/cipher.data.ts","webpack:///../../libs/common/src/vault/models/view/attachment.view.ts","webpack:///../../libs/common/src/misc/linkedFieldOption.decorator.ts","webpack:///../../libs/common/src/vault/models/view/item.view.ts","webpack:///../../libs/common/src/vault/models/view/card.view.ts","webpack:///../../libs/common/src/vault/models/view/field.view.ts","webpack:///../../libs/common/src/vault/models/view/identity.view.ts","webpack:///../../libs/common/src/vault/models/view/login-uri.view.ts","webpack:///../../libs/common/src/vault/models/view/login.view.ts","webpack:///../../libs/common/src/vault/models/view/password-history.view.ts","webpack:///../../libs/common/src/vault/models/view/secure-note.view.ts","webpack:///../../libs/common/src/vault/models/view/cipher.view.ts","webpack:///../../libs/common/src/vault/models/domain/attachment.ts","webpack:///../../libs/common/src/vault/models/domain/card.ts","webpack:///../../libs/common/src/vault/models/domain/field.ts","webpack:///../../libs/common/src/vault/models/domain/identity.ts","webpack:///../../libs/common/src/vault/models/domain/login-uri.ts","webpack:///../../libs/common/src/vault/models/domain/login.ts","webpack:///../../libs/common/src/vault/models/domain/password.ts","webpack:///../../libs/common/src/vault/models/domain/secure-note.ts","webpack:///../../libs/common/src/vault/models/domain/cipher.ts","webpack:///../../libs/common/src/platform/services/cryptography/get-class-initializer.ts","webpack:///../../libs/common/src/platform/services/cryptography/multithread-encrypt.service.implementation.ts","webpack:///../../libs/common/src/platform/services/file-upload/azure-file-upload.service.ts","webpack:///../../libs/common/src/platform/services/file-upload/bitwarden-file-upload.service.ts","webpack:///../../libs/common/src/platform/services/file-upload/file-upload.service.ts","webpack:///../../libs/common/src/platform/abstractions/storage.service.ts","webpack:///../../libs/common/src/platform/services/memory-storage.service.ts","webpack:///../../libs/common/src/platform/services/state-migration.service.ts","webpack:///../../libs/common/src/platform/services/system.service.ts","webpack:///../../libs/common/src/platform/models/domain/decrypt-parameters.ts","webpack:///../../libs/common/src/platform/services/web-crypto-function.service.ts","webpack:///../../libs/common/src/models/request/update-avatar.request.ts","webpack:///../../libs/common/src/services/account/avatar-update.service.ts","webpack:///../../libs/common/src/admin-console/models/response/organization-connection.response.ts","webpack:///../../libs/common/src/models/api/card.api.ts","webpack:///../../libs/common/src/models/api/field.api.ts","webpack:///../../libs/common/src/models/api/identity.api.ts","webpack:///../../libs/common/src/models/api/login-uri.api.ts","webpack:///../../libs/common/src/models/api/login.api.ts","webpack:///../../libs/common/src/models/api/secure-note.api.ts","webpack:///../../libs/common/src/vault/models/response/attachment.response.ts","webpack:///../../libs/common/src/vault/models/response/password-history.response.ts","webpack:///../../libs/common/src/vault/models/response/cipher.response.ts","webpack:///../../libs/common/src/admin-console/models/response/selection-read-only.response.ts","webpack:///../../libs/common/src/vault/models/response/collection.response.ts","webpack:///../../libs/common/src/admin-console/models/response/organization-export.response.ts","webpack:///../../libs/common/src/admin-console/models/response/organization-sponsorship-sync-status.response.ts","webpack:///../../libs/common/src/admin-console/models/response/provider/provider-organization.response.ts","webpack:///../../libs/common/src/abstractions/organization-user/responses/organization-user-bulk-public-key.response.ts","webpack:///../../libs/common/src/admin-console/models/response/provider/provider-user-bulk-public-key.response.ts","webpack:///../../libs/common/src/admin-console/models/response/provider/provider-user-bulk.response.ts","webpack:///../../libs/common/src/admin-console/models/api/permissions.api.ts","webpack:///../../libs/common/src/admin-console/models/response/provider/provider-user.response.ts","webpack:///../../libs/common/src/admin-console/models/response/provider/provider.response.ts","webpack:///../../libs/common/src/auth/models/response/api-key.response.ts","webpack:///../../libs/common/src/auth/models/response/auth-request.response.ts","webpack:///../../libs/common/src/auth/models/response/device-verification.response.ts","webpack:///../../libs/common/src/auth/models/response/emergency-access.response.ts","webpack:///../../libs/common/src/auth/models/response/key-connector-user-key.response.ts","webpack:///../../libs/common/src/auth/models/response/prelogin.response.ts","webpack:///../../libs/common/src/auth/models/response/register.response.ts","webpack:///../../libs/common/src/auth/models/response/sso-pre-validate.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-authenticator.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-duo.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-email.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-provider.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-recover.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-web-authn.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-yubi-key.response.ts","webpack:///../../libs/common/src/billing/models/response/billing.response.ts","webpack:///../../libs/common/src/billing/models/response/billing-history.response.ts","webpack:///../../libs/common/src/billing/models/response/billing-payment.response.ts","webpack:///../../libs/common/src/admin-console/models/response/profile-organization.response.ts","webpack:///../../libs/common/src/admin-console/models/response/profile-provider-organization.response.ts","webpack:///../../libs/common/src/admin-console/models/response/profile-provider.response.ts","webpack:///../../libs/common/src/models/response/profile.response.ts","webpack:///../../libs/common/src/billing/models/response/payment.response.ts","webpack:///../../libs/common/src/billing/models/response/plan.response.ts","webpack:///../../libs/common/src/billing/models/response/subscription.response.ts","webpack:///../../libs/common/src/billing/models/response/tax-info.response.ts","webpack:///../../libs/common/src/billing/models/response/tax-rate.response.ts","webpack:///../../libs/common/src/models/response/breach-account.response.ts","webpack:///../../libs/common/src/models/response/global-domain.response.ts","webpack:///../../libs/common/src/models/response/domains.response.ts","webpack:///../../libs/common/src/models/response/event.response.ts","webpack:///../../libs/common/src/models/response/user-key.response.ts","webpack:///../../libs/common/src/vault/models/response/attachment-upload-data.response.ts","webpack:///../../libs/common/src/tools/send/models/api/send-file.api.ts","webpack:///../../libs/common/src/tools/send/models/api/send-text.api.ts","webpack:///../../libs/common/src/tools/send/models/response/send.response.ts","webpack:///../../libs/common/src/vault/models/response/folder.response.ts","webpack:///../../libs/common/src/vault/models/response/sync.response.ts","webpack:///../../libs/common/src/services/api.service.ts","webpack:///../../libs/common/src/services/audit.service.ts","webpack:///../../libs/common/src/platform/misc/throttle.ts","webpack:///../../libs/common/src/abstractions/devices/views/device.view.ts","webpack:///../../libs/common/src/services/devices/devices.service.implementation.ts","webpack:///../../libs/common/src/models/data/event.data.ts","webpack:///../../libs/common/src/services/event/event-collection.service.ts","webpack:///../../libs/common/src/models/request/event.request.ts","webpack:///../../libs/common/src/services/event/event-upload.service.ts","webpack:///../../libs/common/src/models/response/notification.response.ts","webpack:///../../libs/common/src/services/notifications.service.ts","webpack:///../../libs/common/src/services/search.service.ts","webpack:///../../libs/common/src/services/totp.service.ts","webpack:///../../libs/common/src/enums/vault-timeout-action.enum.ts","webpack:///../../libs/common/src/services/vault-timeout/vault-timeout-settings.service.ts","webpack:///../../libs/common/src/admin-console/models/domain/password-generator-policy-options.ts","webpack:///../../libs/common/src/platform/misc/wordlist.ts","webpack:///../../libs/common/src/tools/generator/password/generated-password-history.ts","webpack:///../../libs/common/src/tools/generator/password/password-generation.service.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/anon-addy-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/duck-duck-go-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/fastmail-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/firefox-relay-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/forwarder-options.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/simple-login-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/forward-email-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/username-generation.service.ts","webpack:///../../libs/common/src/tools/send/enums/send-type.ts","webpack:///../../libs/common/src/tools/password-strength/password-strength.service.ts","webpack:///../../libs/common/src/tools/send/models/data/send-file.data.ts","webpack:///../../libs/common/src/tools/send/models/data/send-text.data.ts","webpack:///../../libs/common/src/tools/send/models/data/send.data.ts","webpack:///../../libs/common/src/tools/send/models/request/send.request.ts","webpack:///../../libs/common/src/tools/send/models/response/send-access.response.ts","webpack:///../../libs/common/src/tools/send/models/response/send-file-download-data.response.ts","webpack:///../../libs/common/src/tools/send/models/response/send-file-upload-data.response.ts","webpack:///../../libs/common/src/tools/send/services/send-api.service.ts","webpack:///../../libs/common/src/platform/misc/sequentialize.ts","webpack:///../../libs/common/src/vault/models/domain/sorted-ciphers-cache.ts","webpack:///../../libs/common/src/vault/models/request/cipher-bulk-delete.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-bulk-move.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-bulk-restore.request.ts","webpack:///../../libs/common/src/vault/models/request/attachment.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-with-id.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-bulk-share.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-collections.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-create.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-partial.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-share.request.ts","webpack:///../../libs/common/src/vault/services/cipher.service.ts","webpack:///../../libs/common/src/models/domain/tree-node.ts","webpack:///../../libs/common/src/misc/serviceUtils.ts","webpack:///../../libs/common/src/vault/models/data/collection.data.ts","webpack:///../../libs/common/src/vault/models/view/collection.view.ts","webpack:///../../libs/common/src/vault/models/domain/collection.ts","webpack:///../../libs/common/src/vault/services/collection.service.ts","webpack:///../../libs/common/src/vault/services/file-upload/cipher-file-upload.service.ts","webpack:///../../libs/common/src/vault/models/data/folder.data.ts","webpack:///../../libs/common/src/vault/models/request/folder.request.ts","webpack:///../../libs/common/src/vault/services/folder/folder-api.service.ts","webpack:///../../libs/common/src/vault/services/sync/sync-notifier.service.ts","webpack:///../../libs/common/src/admin-console/models/data/organization.data.ts","webpack:///../../libs/common/src/admin-console/models/data/provider.data.ts","webpack:///../../libs/common/src/vault/services/sync/sync.service.ts","webpack:///../../libs/common/src/models/export/card.export.ts","webpack:///../../libs/common/src/models/export/field.export.ts","webpack:///../../libs/common/src/models/export/identity.export.ts","webpack:///../../libs/common/src/models/export/login-uri.export.ts","webpack:///../../libs/common/src/models/export/login.export.ts","webpack:///../../libs/common/src/models/export/secure-note.export.ts","webpack:///../../libs/common/src/models/export/cipher.export.ts","webpack:///../../libs/common/src/models/export/cipher-with-ids.export.ts","webpack:///../../libs/common/src/models/export/collection.export.ts","webpack:///../../libs/common/src/models/export/collection-with-id.export.ts","webpack:///../../libs/common/src/vault/models/view/folder.view.ts","webpack:///../../libs/common/src/vault/models/domain/folder.ts","webpack:///../../libs/common/src/models/export/folder.export.ts","webpack:///../../libs/common/src/models/export/folder-with-id.export.ts","webpack:///../../libs/exporter/src/export-helper.ts","webpack:///../../libs/exporter/src/vault-export/services/vault-export.service.ts","webpack:///../../libs/common/src/admin-console/models/domain/organization.ts","webpack:///../../libs/common/src/admin-console/abstractions/organization/organization.service.abstraction.ts","webpack:///../../libs/common/src/admin-console/services/organization/organization.service.ts","webpack:///./src/browser/safariApp.ts","webpack:///./src/platform/services/browser-platform-utils.service.ts","webpack:///./src/platform/browser/browser-api.ts","webpack:///./src/platform/decorators/session-sync-observable/sync-item-metadata.ts","webpack:///./src/platform/decorators/session-sync-observable/session-syncer.ts","webpack:///./src/platform/decorators/session-sync-observable/browser-session.decorator.ts","webpack:///./src/platform/decorators/session-sync-observable/session-sync.decorator.ts","webpack:///./src/admin-console/services/browser-organization.service.ts","webpack:///../../libs/common/src/admin-console/models/domain/policy.ts","webpack:///../../libs/common/src/admin-console/models/domain/reset-password-policy-options.ts","webpack:///../../libs/common/src/admin-console/services/policy/policy.service.ts","webpack:///../../libs/common/src/platform/abstractions/state.service.ts","webpack:///./src/admin-console/services/browser-policy.service.ts","webpack:///./src/background/models/notificationQueueMessageType.ts","webpack:///./src/autofill/background/context-menus.background.ts","webpack:///./src/background/models/notificationQueueMessage.ts","webpack:///./src/background/models/addLoginQueueMessage.ts","webpack:///./src/autofill/background/notification.background.ts","webpack:///./src/autofill/background/tabs.background.ts","webpack:///./src/platform/background/service-factories/factory-options.ts","webpack:///../../libs/common/src/tools/send/models/view/send-file.view.ts","webpack:///../../libs/common/src/tools/send/models/view/send-text.view.ts","webpack:///../../libs/common/src/tools/send/models/view/send.view.ts","webpack:///../../libs/common/src/platform/models/domain/state.ts","webpack:///../../libs/common/src/platform/services/state.service.ts","webpack:///./src/models/browserComponentState.ts","webpack:///./src/models/browserGroupingsComponentState.ts","webpack:///./src/models/browserSendComponentState.ts","webpack:///./src/models/account.ts","webpack:///./src/platform/services/browser-state.service.ts","webpack:///./src/platform/background/service-factories/log-service.factory.ts","webpack:///../../libs/common/src/platform/abstractions/log.service.ts","webpack:///../../libs/common/src/platform/abstractions/state-migration.service.ts","webpack:///./src/platform/services/abstractions/abstract-chrome-storage-api.service.ts","webpack:///./src/platform/services/browser-local-storage.service.ts","webpack:///../../libs/common/src/platform/misc/flags.ts","webpack:///./src/platform/flags.ts","webpack:///./src/platform/services/browser-memory-storage.service.ts","webpack:///./src/platform/services/local-backed-session-storage.service.ts","webpack:///./src/platform/background/service-factories/crypto-function-service.factory.ts","webpack:///./src/platform/decorators/dev-flag.decorator.ts","webpack:///./src/platform/background/service-factories/encrypt-service.factory.ts","webpack:///./src/platform/services/key-generation.service.ts","webpack:///./src/platform/background/service-factories/storage-service.factory.ts","webpack:///./src/platform/background/service-factories/key-generation-service.factory.ts","webpack:///./src/platform/background/service-factories/state-service.factory.ts","webpack:///./src/platform/background/service-factories/state-migration-service.factory.ts","webpack:///./src/admin-console/background/service-factories/organization-service.factory.ts","webpack:///./src/admin-console/background/service-factories/policy-service.factory.ts","webpack:///./src/auth/background/service-factories/token-service.factory.ts","webpack:///../../libs/common/src/platform/abstractions/environment.service.ts","webpack:///./src/platform/background/service-factories/app-id-service.factory.ts","webpack:///../../libs/common/src/platform/services/environment.service.ts","webpack:///./src/platform/services/browser-environment.service.ts","webpack:///./src/platform/background/service-factories/environment-service.factory.ts","webpack:///./src/platform/services/browser-messaging.service.ts","webpack:///./src/platform/background/service-factories/messaging-service.factory.ts","webpack:///./src/platform/background/service-factories/platform-utils-service.factory.ts","webpack:///./src/platform/background/service-factories/api-service.factory.ts","webpack:///../../libs/common/src/admin-console/models/domain/encrypted-organization-key.ts","webpack:///../../libs/common/src/platform/services/crypto.service.ts","webpack:///./src/platform/services/browser-crypto.service.ts","webpack:///./src/platform/background/service-factories/crypto-service.factory.ts","webpack:///../../libs/common/src/platform/services/translation.service.ts","webpack:///../../libs/common/src/platform/services/i18n.service.ts","webpack:///./src/platform/services/i18n.service.ts","webpack:///./src/platform/background/service-factories/i18n-service.factory.ts","webpack:///./src/auth/background/service-factories/device-trust-crypto-service.factory.ts","webpack:///./src/background/service-factories/devices-api-service.factory.ts","webpack:///./src/auth/background/service-factories/auth-service.factory.ts","webpack:///./src/auth/background/service-factories/key-connector-service.factory.ts","webpack:///./src/auth/background/service-factories/two-factor-service.factory.ts","webpack:///./src/tools/background/service_factories/password-strength-service.factory.ts","webpack:///./src/auth/background/service-factories/auth-request-crypto-service.factory.ts","webpack:///./src/auth/background/service-factories/user-verification-service.factory.ts","webpack:///./src/auth/background/service-factories/user-verification-api-service.factory.ts","webpack:///./src/background/service-factories/cipher-file-upload-service.factory.ts","webpack:///./src/platform/background/service-factories/file-upload-service.factory.ts","webpack:///../../libs/common/src/services/settings.service.ts","webpack:///./src/services/browser-settings.service.ts","webpack:///./src/background/service-factories/settings-service.factory.ts","webpack:///./src/vault/background/service_factories/cipher-service.factory.ts","webpack:///./src/background/service-factories/search-service.factory.ts","webpack:///./src/autofill/browser/main-context-menu-handler.ts","webpack:///./src/autofill/browser/cipher-context-menu-handler.ts","webpack:///./src/auth/background/service-factories/totp-service.factory.ts","webpack:///./src/background/service-factories/event-collection-service.factory.ts","webpack:///./src/background/service-factories/event-upload-service.factory.ts","webpack:///./src/tools/background/service_factories/password-generation-service.factory.ts","webpack:///./src/autofill/models/autofill-script.ts","webpack:///./src/autofill/services/autofill-constants.ts","webpack:///./src/autofill/services/autofill.service.ts","webpack:///./src/autofill/background/service_factories/autofill-service.factory.ts","webpack:///./src/autofill/clipboard/clear-clipboard.ts","webpack:///./src/autofill/clipboard/copy-to-clipboard-command.ts","webpack:///./src/platform/alarms/alarm-state.ts","webpack:///./src/autofill/clipboard/generate-password-to-clipboard-command.ts","webpack:///./src/autofill/commands/autofill-tab-command.ts","webpack:///./src/autofill/browser/context-menu-clicked-handler.ts","webpack:///./src/platform/listeners/update-badge.ts","webpack:///./src/platform/services/browser-i18n.service.ts","webpack:///./src/platform/services/browser-messaging-private-mode-background.service.ts","webpack:///../../libs/common/src/tools/send/models/domain/send-file.ts","webpack:///../../libs/common/src/tools/send/models/domain/send-text.ts","webpack:///../../libs/common/src/tools/send/models/domain/send.ts","webpack:///../../libs/common/src/tools/send/services/send.service.ts","webpack:///./src/services/browser-send.service.ts","webpack:///../../libs/common/src/services/vault-timeout/vault-timeout.service.ts","webpack:///./src/services/vault-timeout/vault-timeout.service.ts","webpack:///../../libs/common/src/vault/services/folder/folder.service.ts","webpack:///./src/vault/services/browser-folder.service.ts","webpack:///../../libs/angular/src/vault/vault-filter/models/vault-filter.model.ts","webpack:///../../libs/angular/src/vault/vault-filter/models/dynamic-tree-node.model.ts","webpack:///../../libs/common/src/vault/abstractions/folder/folder.service.abstraction.ts","webpack:///../../libs/common/src/vault/abstractions/cipher.service.ts","webpack:///../../libs/common/src/vault/abstractions/collection.service.ts","webpack:///../../libs/common/src/admin-console/abstractions/policy/policy.service.abstraction.ts","webpack:///../../libs/angular/src/vault/vault-filter/services/vault-filter.service.ts","webpack:///./src/vault/services/vault-filter.service.ts","webpack:///./src/background/commands.background.ts","webpack:///./src/background/idle.background.ts","webpack:///./src/background/nativeMessaging.background.ts","webpack:///./src/background/runtime.background.ts","webpack:///./src/background/webRequest.background.ts","webpack:///./src/background/main.background.ts","webpack:///./src/platform/alarms/on-alarm-listener.ts","webpack:///./src/platform/listeners/combine.ts","webpack:///./src/platform/listeners/on-command-listener.ts","webpack:///./src/platform/listeners/index.ts","webpack:///./src/platform/background.ts","webpack:///./src/platform/listeners/on-install-listener.ts","webpack:///./src/platform/alarms/register-alarms.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/get javascript chunk filename","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/node module decorator","webpack:///webpack/runtime/publicPath","webpack:///webpack/runtime/jsonp chunk loading","webpack:///webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","export abstract class BaseResponse {\n  private response: any;\n\n  constructor(response: any) {\n    this.response = response;\n  }\n\n  protected getResponseProperty(\n    propertyName: string,\n    response: any = null,\n    exactName = false\n  ): any {\n    if (propertyName == null || propertyName === \"\") {\n      throw new Error(\"propertyName must not be null/empty.\");\n    }\n    if (response == null && this.response != null) {\n      response = this.response;\n    }\n    if (response == null) {\n      return null;\n    }\n    if (!exactName && response[propertyName] === undefined) {\n      let otherCasePropertyName: string = null;\n      if (propertyName.charAt(0) === propertyName.charAt(0).toUpperCase()) {\n        otherCasePropertyName = propertyName.charAt(0).toLowerCase();\n      } else {\n        otherCasePropertyName = propertyName.charAt(0).toUpperCase();\n      }\n      if (propertyName.length > 1) {\n        otherCasePropertyName += propertyName.slice(1);\n      }\n\n      propertyName = otherCasePropertyName;\n      if (response[propertyName] === undefined) {\n        propertyName = propertyName.toLowerCase();\n      }\n      if (response[propertyName] === undefined) {\n        propertyName = propertyName.toUpperCase();\n      }\n    }\n    return response[propertyName];\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class ListResponse<T> extends BaseResponse {\n  data: T[];\n  continuationToken: string;\n\n  constructor(response: any, t: new (dataResponse: any) => T) {\n    super(response);\n    const data = this.getResponseProperty(\"Data\");\n    this.data = data == null ? [] : data.map((dr: any) => new t(dr));\n    this.continuationToken = this.getResponseProperty(\"ContinuationToken\");\n  }\n}\n","/* eslint-disable no-useless-escape */\nimport * as path from \"path\";\n\nimport { Observable, of, switchMap } from \"rxjs\";\nimport { getHostname, parse } from \"tldts\";\nimport { Merge } from \"type-fest\";\n\nimport { CryptoService } from \"../abstractions/crypto.service\";\nimport { EncryptService } from \"../abstractions/encrypt.service\";\nimport { I18nService } from \"../abstractions/i18n.service\";\n\nconst nodeURL = typeof window === \"undefined\" ? require(\"url\") : null;\n\ndeclare global {\n  /* eslint-disable-next-line no-var */\n  var bitwardenContainerService: BitwardenContainerService;\n}\n\ninterface BitwardenContainerService {\n  getCryptoService: () => CryptoService;\n  getEncryptService: () => EncryptService;\n}\n\nexport class Utils {\n  static inited = false;\n  static isNode = false;\n  static isBrowser = true;\n  static isMobileBrowser = false;\n  static isAppleMobileBrowser = false;\n  static global: typeof global = null;\n  // Transpiled version of /\\p{Emoji_Presentation}/gu using https://mothereff.in/regexpu. Used for compatability in older browsers.\n  static regexpEmojiPresentation =\n    /(?:[\\u231A\\u231B\\u23E9-\\u23EC\\u23F0\\u23F3\\u25FD\\u25FE\\u2614\\u2615\\u2648-\\u2653\\u267F\\u2693\\u26A1\\u26AA\\u26AB\\u26BD\\u26BE\\u26C4\\u26C5\\u26CE\\u26D4\\u26EA\\u26F2\\u26F3\\u26F5\\u26FA\\u26FD\\u2705\\u270A\\u270B\\u2728\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2795-\\u2797\\u27B0\\u27BF\\u2B1B\\u2B1C\\u2B50\\u2B55]|\\uD83C[\\uDC04\\uDCCF\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE1A\\uDE2F\\uDE32-\\uDE36\\uDE38-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF20\\uDF2D-\\uDF35\\uDF37-\\uDF7C\\uDF7E-\\uDF93\\uDFA0-\\uDFCA\\uDFCF-\\uDFD3\\uDFE0-\\uDFF0\\uDFF4\\uDFF8-\\uDFFF]|\\uD83D[\\uDC00-\\uDC3E\\uDC40\\uDC42-\\uDCFC\\uDCFF-\\uDD3D\\uDD4B-\\uDD4E\\uDD50-\\uDD67\\uDD7A\\uDD95\\uDD96\\uDDA4\\uDDFB-\\uDE4F\\uDE80-\\uDEC5\\uDECC\\uDED0-\\uDED2\\uDED5-\\uDED7\\uDEEB\\uDEEC\\uDEF4-\\uDEFC\\uDFE0-\\uDFEB]|\\uD83E[\\uDD0C-\\uDD3A\\uDD3C-\\uDD45\\uDD47-\\uDD78\\uDD7A-\\uDDCB\\uDDCD-\\uDDFF\\uDE70-\\uDE74\\uDE78-\\uDE7A\\uDE80-\\uDE86\\uDE90-\\uDEA8\\uDEB0-\\uDEB6\\uDEC0-\\uDEC2\\uDED0-\\uDED6])/g;\n  static readonly validHosts: string[] = [\"localhost\"];\n  static readonly minimumPasswordLength = 12;\n  static readonly DomainMatchBlacklist = new Map<string, Set<string>>([\n    [\"google.com\", new Set([\"script.google.com\"])],\n  ]);\n\n  static init() {\n    if (Utils.inited) {\n      return;\n    }\n\n    Utils.inited = true;\n    Utils.isNode =\n      typeof process !== \"undefined\" &&\n      (process as any).release != null &&\n      (process as any).release.name === \"node\";\n    Utils.isBrowser = typeof window !== \"undefined\";\n\n    Utils.isMobileBrowser = Utils.isBrowser && this.isMobile(window);\n    Utils.isAppleMobileBrowser = Utils.isBrowser && this.isAppleMobile(window);\n\n    if (Utils.isNode) {\n      Utils.global = global;\n    } else if (Utils.isBrowser) {\n      Utils.global = window;\n    } else {\n      // If it's not browser or node then it must be a service worker\n      Utils.global = self;\n    }\n  }\n\n  static fromB64ToArray(str: string): Uint8Array {\n    if (str == null) {\n      return null;\n    }\n\n    if (Utils.isNode) {\n      return new Uint8Array(Buffer.from(str, \"base64\"));\n    } else {\n      const binaryString = Utils.global.atob(str);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      return bytes;\n    }\n  }\n\n  static fromUrlB64ToArray(str: string): Uint8Array {\n    return Utils.fromB64ToArray(Utils.fromUrlB64ToB64(str));\n  }\n\n  static fromHexToArray(str: string): Uint8Array {\n    if (Utils.isNode) {\n      return new Uint8Array(Buffer.from(str, \"hex\"));\n    } else {\n      const bytes = new Uint8Array(str.length / 2);\n      for (let i = 0; i < str.length; i += 2) {\n        bytes[i / 2] = parseInt(str.substr(i, 2), 16);\n      }\n      return bytes;\n    }\n  }\n\n  static fromUtf8ToArray(str: string): Uint8Array {\n    if (Utils.isNode) {\n      return new Uint8Array(Buffer.from(str, \"utf8\"));\n    } else {\n      const strUtf8 = unescape(encodeURIComponent(str));\n      const arr = new Uint8Array(strUtf8.length);\n      for (let i = 0; i < strUtf8.length; i++) {\n        arr[i] = strUtf8.charCodeAt(i);\n      }\n      return arr;\n    }\n  }\n\n  static fromByteStringToArray(str: string): Uint8Array {\n    if (str == null) {\n      return null;\n    }\n    const arr = new Uint8Array(str.length);\n    for (let i = 0; i < str.length; i++) {\n      arr[i] = str.charCodeAt(i);\n    }\n    return arr;\n  }\n\n  static fromBufferToB64(buffer: ArrayBuffer): string {\n    if (buffer == null) {\n      return null;\n    }\n    if (Utils.isNode) {\n      return Buffer.from(buffer).toString(\"base64\");\n    } else {\n      let binary = \"\";\n      const bytes = new Uint8Array(buffer);\n      for (let i = 0; i < bytes.byteLength; i++) {\n        binary += String.fromCharCode(bytes[i]);\n      }\n      return Utils.global.btoa(binary);\n    }\n  }\n\n  static fromBufferToUrlB64(buffer: ArrayBuffer): string {\n    return Utils.fromB64toUrlB64(Utils.fromBufferToB64(buffer));\n  }\n\n  static fromB64toUrlB64(b64Str: string) {\n    return b64Str.replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n  }\n\n  static fromBufferToUtf8(buffer: ArrayBuffer): string {\n    if (Utils.isNode) {\n      return Buffer.from(buffer).toString(\"utf8\");\n    } else {\n      const bytes = new Uint8Array(buffer);\n      const encodedString = String.fromCharCode.apply(null, bytes);\n      return decodeURIComponent(escape(encodedString));\n    }\n  }\n\n  static fromBufferToByteString(buffer: ArrayBuffer): string {\n    return String.fromCharCode.apply(null, new Uint8Array(buffer));\n  }\n\n  // ref: https://stackoverflow.com/a/40031979/1090359\n  static fromBufferToHex(buffer: ArrayBuffer): string {\n    if (Utils.isNode) {\n      return Buffer.from(buffer).toString(\"hex\");\n    } else {\n      const bytes = new Uint8Array(buffer);\n      return Array.prototype.map\n        .call(bytes, (x: number) => (\"00\" + x.toString(16)).slice(-2))\n        .join(\"\");\n    }\n  }\n\n  static fromUrlB64ToB64(urlB64Str: string): string {\n    let output = urlB64Str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n      case 0:\n        break;\n      case 2:\n        output += \"==\";\n        break;\n      case 3:\n        output += \"=\";\n        break;\n      default:\n        throw new Error(\"Illegal base64url string!\");\n    }\n\n    return output;\n  }\n\n  static fromUrlB64ToUtf8(urlB64Str: string): string {\n    return Utils.fromB64ToUtf8(Utils.fromUrlB64ToB64(urlB64Str));\n  }\n\n  static fromUtf8ToB64(utfStr: string): string {\n    if (Utils.isNode) {\n      return Buffer.from(utfStr, \"utf8\").toString(\"base64\");\n    } else {\n      return decodeURIComponent(escape(Utils.global.btoa(utfStr)));\n    }\n  }\n\n  static fromUtf8ToUrlB64(utfStr: string): string {\n    return Utils.fromBufferToUrlB64(Utils.fromUtf8ToArray(utfStr));\n  }\n\n  static fromB64ToUtf8(b64Str: string): string {\n    if (Utils.isNode) {\n      return Buffer.from(b64Str, \"base64\").toString(\"utf8\");\n    } else {\n      return decodeURIComponent(escape(Utils.global.atob(b64Str)));\n    }\n  }\n\n  // ref: http://stackoverflow.com/a/2117523/1090359\n  static newGuid(): string {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n      const r = (Math.random() * 16) | 0;\n      const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  }\n\n  static isGuid(id: string) {\n    return RegExp(\n      /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/,\n      \"i\"\n    ).test(id);\n  }\n\n  static getHostname(uriString: string): string {\n    if (Utils.isNullOrWhitespace(uriString)) {\n      return null;\n    }\n\n    uriString = uriString.trim();\n\n    if (uriString.startsWith(\"data:\")) {\n      return null;\n    }\n\n    if (uriString.startsWith(\"about:\")) {\n      return null;\n    }\n\n    if (uriString.startsWith(\"file:\")) {\n      return null;\n    }\n\n    // Does uriString contain invalid characters\n    // TODO Needs to possibly be extended, although '!' is a reserved character\n    if (uriString.indexOf(\"!\") > 0) {\n      return null;\n    }\n\n    try {\n      const hostname = getHostname(uriString, { validHosts: this.validHosts });\n      if (hostname != null) {\n        return hostname;\n      }\n    } catch {\n      return null;\n    }\n    return null;\n  }\n\n  static getHost(uriString: string): string {\n    const url = Utils.getUrl(uriString);\n    try {\n      return url != null && url.host !== \"\" ? url.host : null;\n    } catch {\n      return null;\n    }\n  }\n\n  static getDomain(uriString: string): string {\n    if (Utils.isNullOrWhitespace(uriString)) {\n      return null;\n    }\n\n    uriString = uriString.trim();\n\n    if (uriString.startsWith(\"data:\")) {\n      return null;\n    }\n\n    if (uriString.startsWith(\"about:\")) {\n      return null;\n    }\n\n    try {\n      const parseResult = parse(uriString, { validHosts: this.validHosts });\n      if (parseResult != null && parseResult.hostname != null) {\n        if (parseResult.hostname === \"localhost\" || parseResult.isIp) {\n          return parseResult.hostname;\n        }\n\n        if (parseResult.domain != null) {\n          return parseResult.domain;\n        }\n        return null;\n      }\n    } catch {\n      return null;\n    }\n    return null;\n  }\n\n  static getQueryParams(uriString: string): Map<string, string> {\n    const url = Utils.getUrl(uriString);\n    if (url == null || url.search == null || url.search === \"\") {\n      return null;\n    }\n    const map = new Map<string, string>();\n    const pairs = (url.search[0] === \"?\" ? url.search.substr(1) : url.search).split(\"&\");\n    pairs.forEach((pair) => {\n      const parts = pair.split(\"=\");\n      if (parts.length < 1) {\n        return;\n      }\n      map.set(\n        decodeURIComponent(parts[0]).toLowerCase(),\n        parts[1] == null ? \"\" : decodeURIComponent(parts[1])\n      );\n    });\n    return map;\n  }\n\n  static getSortFunction<T>(\n    i18nService: I18nService,\n    prop: { [K in keyof T]: T[K] extends string ? K : never }[keyof T]\n  ): (a: T, b: T) => number {\n    return (a, b) => {\n      if (a[prop] == null && b[prop] != null) {\n        return -1;\n      }\n      if (a[prop] != null && b[prop] == null) {\n        return 1;\n      }\n      if (a[prop] == null && b[prop] == null) {\n        return 0;\n      }\n\n      // The `as unknown as string` here is unfortunate because typescript doesn't property understand that the return of T[prop] will be a string\n      return i18nService.collator\n        ? i18nService.collator.compare(a[prop] as unknown as string, b[prop] as unknown as string)\n        : (a[prop] as unknown as string).localeCompare(b[prop] as unknown as string);\n    };\n  }\n\n  static isNullOrWhitespace(str: string): boolean {\n    return str == null || typeof str !== \"string\" || str.trim() === \"\";\n  }\n\n  static isNullOrEmpty(str: string): boolean {\n    return str == null || typeof str !== \"string\" || str == \"\";\n  }\n\n  static isPromise(obj: any): obj is Promise<unknown> {\n    return (\n      obj != undefined && typeof obj[\"then\"] === \"function\" && typeof obj[\"catch\"] === \"function\"\n    );\n  }\n\n  static nameOf<T>(name: string & keyof T) {\n    return name;\n  }\n\n  static assign<T>(target: T, source: Partial<T>): T {\n    return Object.assign(target, source);\n  }\n\n  static iterateEnum<O extends object, K extends keyof O = keyof O>(obj: O) {\n    return (Object.keys(obj).filter((k) => Number.isNaN(+k)) as K[]).map((k) => obj[k]);\n  }\n\n  static getUrl(uriString: string): URL {\n    if (this.isNullOrWhitespace(uriString)) {\n      return null;\n    }\n\n    uriString = uriString.trim();\n\n    return Utils.getUrlObject(uriString);\n  }\n\n  static camelToPascalCase(s: string) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  }\n\n  /**\n   * There are a few ways to calculate text color for contrast, this one seems to fit accessibility guidelines best.\n   * https://stackoverflow.com/a/3943023/6869691\n   *\n   * @param {string} bgColor\n   * @param {number} [threshold] see stackoverflow link above\n   * @param {boolean} [svgTextFill]\n   * Indicates if this method is performed on an SVG <text> 'fill' attribute (e.g. <text fill=\"black\"></text>).\n   * This check is necessary because the '!important' tag cannot be used in a 'fill' attribute.\n   */\n  static pickTextColorBasedOnBgColor(bgColor: string, threshold = 186, svgTextFill = false) {\n    const bgColorHexNums = bgColor.charAt(0) === \"#\" ? bgColor.substring(1, 7) : bgColor;\n    const r = parseInt(bgColorHexNums.substring(0, 2), 16); // hexToR\n    const g = parseInt(bgColorHexNums.substring(2, 4), 16); // hexToG\n    const b = parseInt(bgColorHexNums.substring(4, 6), 16); // hexToB\n    const blackColor = svgTextFill ? \"black\" : \"black !important\";\n    const whiteColor = svgTextFill ? \"white\" : \"white !important\";\n    return r * 0.299 + g * 0.587 + b * 0.114 > threshold ? blackColor : whiteColor;\n  }\n\n  static stringToColor(str: string): string {\n    let hash = 0;\n    for (let i = 0; i < str.length; i++) {\n      hash = str.charCodeAt(i) + ((hash << 5) - hash);\n    }\n    let color = \"#\";\n    for (let i = 0; i < 3; i++) {\n      const value = (hash >> (i * 8)) & 0xff;\n      color += (\"00\" + value.toString(16)).substr(-2);\n    }\n    return color;\n  }\n\n  /**\n   * @throws Will throw an error if the ContainerService has not been attached to the window object\n   */\n  static getContainerService(): BitwardenContainerService {\n    if (this.global.bitwardenContainerService == null) {\n      throw new Error(\"global bitwardenContainerService not initialized.\");\n    }\n    return this.global.bitwardenContainerService;\n  }\n\n  static validateHexColor(color: string) {\n    return /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(color);\n  }\n\n  /**\n   * Converts map to a Record<string, V> with the same data. Inverse of recordToMap\n   * Useful in toJSON methods, since Maps are not serializable\n   * @param map\n   * @returns\n   */\n  static mapToRecord<K extends string | number, V>(map: Map<K, V>): Record<string, V> {\n    if (map == null) {\n      return null;\n    }\n    if (!(map instanceof Map)) {\n      return map;\n    }\n    return Object.fromEntries(map);\n  }\n\n  /**\n   * Converts record to a Map<string, V> with the same data. Inverse of mapToRecord\n   * Useful in fromJSON methods, since Maps are not serializable\n   *\n   * Warning: If the record has string keys that are numbers, they will be converted to numbers in the map\n   * @param record\n   * @returns\n   */\n  static recordToMap<K extends string | number, V>(record: Record<K, V>): Map<K, V> {\n    if (record == null) {\n      return null;\n    } else if (record instanceof Map) {\n      return record;\n    }\n\n    const entries = Object.entries(record);\n    if (entries.length === 0) {\n      return new Map();\n    }\n\n    if (isNaN(Number(entries[0][0]))) {\n      return new Map(entries) as Map<K, V>;\n    } else {\n      return new Map(entries.map((e) => [Number(e[0]), e[1]])) as Map<K, V>;\n    }\n  }\n\n  /** Applies Object.assign, but converts the type nicely using Type-Fest Merge<Destination, Source> */\n  static merge<Destination, Source>(\n    destination: Destination,\n    source: Source\n  ): Merge<Destination, Source> {\n    return Object.assign(destination, source) as unknown as Merge<Destination, Source>;\n  }\n\n  /**\n   * encodeURIComponent escapes all characters except the following:\n   * alphabetic, decimal digits, - _ . ! ~ * ' ( )\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent#encoding_for_rfc3986\n   */\n  static encodeRFC3986URIComponent(str: string): string {\n    return encodeURIComponent(str).replace(\n      /[!'()*]/g,\n      (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`\n    );\n  }\n\n  /**\n   * Normalizes a path for defense against attacks like traversals\n   * @param denormalizedPath\n   * @returns\n   */\n  static normalizePath(denormalizedPath: string): string {\n    return path.normalize(decodeURIComponent(denormalizedPath)).replace(/^(\\.\\.(\\/|\\\\|$))+/, \"\");\n  }\n\n  private static isMobile(win: Window) {\n    let mobile = false;\n    ((a) => {\n      if (\n        /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n          a\n        ) ||\n        /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n          a.substr(0, 4)\n        )\n      ) {\n        mobile = true;\n      }\n    })(win.navigator.userAgent || win.navigator.vendor || (win as any).opera);\n    return mobile || win.navigator.userAgent.match(/iPad/i) != null;\n  }\n\n  static delay(ms: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Generate an observable from a function that returns a promise.\n   * Similar to the rxjs function {@link from} with one big exception:\n   * {@link from} will not re-execute the function when observers resubscribe.\n   * {@link Util.asyncToObservable} will execute `generator` for every\n   * subscribe, making it ideal if the value ever needs to be refreshed.\n   * */\n  static asyncToObservable<T>(generator: () => Promise<T>): Observable<T> {\n    return of(undefined).pipe(switchMap(() => generator()));\n  }\n\n  /**\n   * Return the number of days remaining before a target date arrives.\n   * Returns 0 if the day has already passed.\n   */\n  static daysRemaining(targetDate: Date): number {\n    const diffTime = targetDate.getTime() - Date.now();\n    const msPerDay = 86400000;\n    return Math.max(0, Math.floor(diffTime / msPerDay));\n  }\n\n  private static isAppleMobile(win: Window) {\n    return (\n      win.navigator.userAgent.match(/iPhone/i) != null ||\n      win.navigator.userAgent.match(/iPad/i) != null\n    );\n  }\n\n  private static getUrlObject(uriString: string): URL {\n    // All the methods below require a protocol to properly parse a URL string\n    // Assume http if no other protocol is present\n    const hasProtocol = uriString.indexOf(\"://\") > -1;\n    if (!hasProtocol && uriString.indexOf(\".\") > -1) {\n      uriString = \"http://\" + uriString;\n    } else if (!hasProtocol) {\n      return null;\n    }\n\n    try {\n      if (nodeURL != null) {\n        return new nodeURL.URL(uriString);\n      }\n\n      return new URL(uriString);\n    } catch (e) {\n      // Ignore error\n    }\n\n    return null;\n  }\n}\n\nUtils.init();\n","import { PolicyType } from \"../../enums\";\nimport { PolicyResponse } from \"../response/policy.response\";\n\nexport class PolicyData {\n  id: string;\n  organizationId: string;\n  type: PolicyType;\n  data: any;\n  enabled: boolean;\n\n  constructor(response: PolicyResponse) {\n    this.id = response.id;\n    this.organizationId = response.organizationId;\n    this.type = response.type;\n    this.data = response.data;\n    this.enabled = response.enabled;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { PolicyType } from \"../../enums\";\n\nexport class PolicyResponse extends BaseResponse {\n  id: string;\n  organizationId: string;\n  type: PolicyType;\n  data: any;\n  enabled: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.data = this.getResponseProperty(\"Data\");\n    this.enabled = this.getResponseProperty(\"Enabled\");\n  }\n}\n","export enum OrganizationApiKeyType {\n  Default = 0,\n  BillingSync = 1,\n  Scim = 2,\n}\n","export enum OrganizationConnectionType {\n  CloudBillingSync = 1,\n  Scim = 2,\n}\n","export enum OrganizationUserStatusType {\n  Invited = 0,\n  Accepted = 1,\n  Confirmed = 2,\n  Revoked = -1,\n}\n","export enum OrganizationUserType {\n  Owner = 0,\n  Admin = 1,\n  User = 2,\n  Manager = 3,\n  Custom = 4,\n}\n","export enum PolicyType {\n  TwoFactorAuthentication = 0, // Requires users to have 2fa enabled\n  MasterPassword = 1, // Sets minimum requirements for master password complexity\n  PasswordGenerator = 2, // Sets minimum requirements/default type for generated passwords/passphrases\n  SingleOrg = 3, // Allows users to only be apart of one organization\n  RequireSso = 4, // Requires users to authenticate with SSO\n  PersonalOwnership = 5, // Disables personal vault ownership for adding/cloning items\n  DisableSend = 6, // Disables the ability to create and edit Bitwarden Sends\n  SendOptions = 7, // Sets restrictions or defaults for Bitwarden Sends\n  ResetPassword = 8, // Allows orgs to use reset password : also can enable auto-enrollment during invite flow\n  MaximumVaultTimeout = 9, // Sets the maximum allowed vault timeout\n  DisablePersonalVaultExport = 10, // Disable personal vault export\n  ActivateAutofill = 11, // Activates autofill with page load on the browser extension\n}\n","export enum ProviderUserStatusType {\n  Invited = 0,\n  Accepted = 1,\n  Confirmed = 2,\n  Revoked = -1, // Not used, compile-time support only\n}\n","export enum ProviderUserType {\n  ProviderAdmin = 0,\n  ServiceUser = 1,\n}\n","export enum ScimProviderType {\n  Default = 0,\n  AzureAd = 1,\n  Okta = 2,\n  OneLogin = 3,\n  JumpCloud = 4,\n  GoogleWorkspace = 5,\n  Rippling = 6,\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { ApiService } from \"../../../abstractions/api.service\";\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { PolicyApiServiceAbstraction } from \"../../abstractions/policy/policy-api.service.abstraction\";\nimport { InternalPolicyService } from \"../../abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"../../enums\";\nimport { PolicyData } from \"../../models/data/policy.data\";\nimport { MasterPasswordPolicyOptions } from \"../../models/domain/master-password-policy-options\";\nimport { PolicyRequest } from \"../../models/request/policy.request\";\nimport { PolicyResponse } from \"../../models/response/policy.response\";\n\nexport class PolicyApiService implements PolicyApiServiceAbstraction {\n  constructor(\n    private policyService: InternalPolicyService,\n    private apiService: ApiService,\n    private stateService: StateService\n  ) {}\n\n  async getPolicy(organizationId: string, type: PolicyType): Promise<PolicyResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/policies/\" + type,\n      null,\n      true,\n      true\n    );\n    return new PolicyResponse(r);\n  }\n\n  async getPolicies(organizationId: string): Promise<ListResponse<PolicyResponse>> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/policies\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, PolicyResponse);\n  }\n\n  async getPoliciesByToken(\n    organizationId: string,\n    token: string,\n    email: string,\n    organizationUserId: string\n  ): Promise<ListResponse<PolicyResponse>> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" +\n        organizationId +\n        \"/policies/token?\" +\n        \"token=\" +\n        encodeURIComponent(token) +\n        \"&email=\" +\n        Utils.encodeRFC3986URIComponent(email) +\n        \"&organizationUserId=\" +\n        organizationUserId,\n      null,\n      false,\n      true\n    );\n    return new ListResponse(r, PolicyResponse);\n  }\n\n  async getPoliciesByInvitedUser(\n    organizationId: string,\n    userId: string\n  ): Promise<ListResponse<PolicyResponse>> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/policies/invited-user?\" + \"userId=\" + userId,\n      null,\n      false,\n      true\n    );\n    return new ListResponse(r, PolicyResponse);\n  }\n\n  async getMasterPasswordPoliciesForInvitedUsers(\n    orgId: string\n  ): Promise<MasterPasswordPolicyOptions> {\n    const userId = await this.stateService.getUserId();\n    const response = await this.getPoliciesByInvitedUser(orgId, userId);\n    const policies = await this.policyService.mapPoliciesFromToken(response);\n    return await firstValueFrom(this.policyService.masterPasswordPolicyOptions$(policies));\n  }\n\n  async putPolicy(organizationId: string, type: PolicyType, request: PolicyRequest): Promise<any> {\n    const r = await this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/policies/\" + type,\n      request,\n      true,\n      true\n    );\n    const response = new PolicyResponse(r);\n    const data = new PolicyData(response);\n    await this.policyService.upsert(data);\n  }\n}\n","import { ProviderUserStatusType, ProviderUserType } from \"../../admin-console/enums\";\nimport { ProviderData } from \"../../admin-console/models/data/provider.data\";\n\nexport class Provider {\n  id: string;\n  name: string;\n  status: ProviderUserStatusType;\n  type: ProviderUserType;\n  enabled: boolean;\n  userId: string;\n  useEvents: boolean;\n\n  constructor(obj?: ProviderData) {\n    if (obj == null) {\n      return;\n    }\n\n    this.id = obj.id;\n    this.name = obj.name;\n    this.status = obj.status;\n    this.type = obj.type;\n    this.enabled = obj.enabled;\n    this.userId = obj.userId;\n    this.useEvents = obj.useEvents;\n  }\n\n  get canAccess() {\n    if (this.isProviderAdmin) {\n      return true;\n    }\n    return this.enabled && this.status === ProviderUserStatusType.Confirmed;\n  }\n\n  get canCreateOrganizations() {\n    return this.enabled && this.isProviderAdmin;\n  }\n\n  get canManageUsers() {\n    return this.isProviderAdmin;\n  }\n\n  get canAccessEventLogs() {\n    return this.isProviderAdmin;\n  }\n\n  get isProviderAdmin() {\n    return this.type === ProviderUserType.ProviderAdmin;\n  }\n}\n","export enum ClientType {\n  Web = \"web\",\n  Browser = \"browser\",\n  Desktop = \"desktop\",\n  Mobile = \"mobile\",\n  Cli = \"cli\",\n  DirectoryConnector = \"connector\",\n}\n","export enum DeviceType {\n  Android = 0,\n  iOS = 1,\n  ChromeExtension = 2,\n  FirefoxExtension = 3,\n  OperaExtension = 4,\n  EdgeExtension = 5,\n  WindowsDesktop = 6,\n  MacOsDesktop = 7,\n  LinuxDesktop = 8,\n  ChromeBrowser = 9,\n  FirefoxBrowser = 10,\n  OperaBrowser = 11,\n  EdgeBrowser = 12,\n  IEBrowser = 13,\n  UnknownBrowser = 14,\n  AndroidAmazon = 15,\n  UWP = 16,\n  SafariBrowser = 17,\n  VivaldiBrowser = 18,\n  VivaldiExtension = 19,\n  SafariExtension = 20,\n  SDK = 21,\n  Server = 22,\n}\n\nexport const MobileDeviceTypes: Set<DeviceType> = new Set([\n  DeviceType.Android,\n  DeviceType.iOS,\n  DeviceType.AndroidAmazon,\n]);\n\nexport const DesktopDeviceTypes: Set<DeviceType> = new Set([\n  DeviceType.WindowsDesktop,\n  DeviceType.MacOsDesktop,\n  DeviceType.LinuxDesktop,\n  DeviceType.UWP,\n]);\n","import { Provider } from \"../../models/domain/provider\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { ProviderService as ProviderServiceAbstraction } from \"../abstractions/provider.service\";\nimport { ProviderData } from \"../models/data/provider.data\";\n\nexport class ProviderService implements ProviderServiceAbstraction {\n  constructor(private stateService: StateService) {}\n\n  async get(id: string): Promise<Provider> {\n    const providers = await this.stateService.getProviders();\n    // eslint-disable-next-line\n    if (providers == null || !providers.hasOwnProperty(id)) {\n      return null;\n    }\n\n    return new Provider(providers[id]);\n  }\n\n  async getAll(): Promise<Provider[]> {\n    const providers = await this.stateService.getProviders();\n    const response: Provider[] = [];\n    for (const id in providers) {\n      // eslint-disable-next-line\n      if (providers.hasOwnProperty(id)) {\n        response.push(new Provider(providers[id]));\n      }\n    }\n    return response;\n  }\n\n  async save(providers: { [id: string]: ProviderData }) {\n    await this.stateService.setProviders(providers);\n  }\n}\n","export enum EncryptedExportType {\n  AccountEncrypted = 0,\n  FileEncrypted = 1,\n}\n","export enum EncryptionType {\n  AesCbc256_B64 = 0,\n  AesCbc128_HmacSha256_B64 = 1,\n  AesCbc256_HmacSha256_B64 = 2,\n  Rsa2048_OaepSha256_B64 = 3,\n  Rsa2048_OaepSha1_B64 = 4,\n  Rsa2048_OaepSha256_HmacSha256_B64 = 5,\n  Rsa2048_OaepSha1_HmacSha256_B64 = 6,\n}\n\n/** The expected number of parts to a serialized EncString of the given encryption type.\n * For example, an EncString of type AesCbc256_B64 will have 2 parts, and an EncString of type\n * AesCbc128_HmacSha256_B64 will have 3 parts.\n *\n * Example of annotated serialized EncStrings:\n * 0.iv|data\n * 1.iv|data|mac\n * 2.iv|data|mac\n * 3.data\n * 4.data\n *\n * @see EncString\n * @see EncryptionType\n * @see EncString.parseEncryptedString\n */\nexport const EXPECTED_NUM_PARTS_BY_ENCRYPTION_TYPE = {\n  [EncryptionType.AesCbc256_B64]: 2,\n  [EncryptionType.AesCbc128_HmacSha256_B64]: 3,\n  [EncryptionType.AesCbc256_HmacSha256_B64]: 3,\n  [EncryptionType.Rsa2048_OaepSha256_B64]: 1,\n  [EncryptionType.Rsa2048_OaepSha1_B64]: 1,\n  [EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64]: 2,\n  [EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64]: 2,\n};\n","// Note: the enum key is used to describe the EventSystemUser in the UI. Be careful about changing it.\nexport enum EventSystemUser {\n  SCIM = 1,\n  DomainVerification = 2,\n}\n","// Increment by 100 for each new set of events\nexport enum EventType {\n  User_LoggedIn = 1000,\n  User_ChangedPassword = 1001,\n  User_Updated2fa = 1002,\n  User_Disabled2fa = 1003,\n  User_Recovered2fa = 1004,\n  User_FailedLogIn = 1005,\n  User_FailedLogIn2fa = 1006,\n  User_ClientExportedVault = 1007,\n  User_UpdatedTempPassword = 1008,\n  User_MigratedKeyToKeyConnector = 1009,\n  User_RequestedDeviceApproval = 1010,\n\n  Cipher_Created = 1100,\n  Cipher_Updated = 1101,\n  Cipher_Deleted = 1102,\n  Cipher_AttachmentCreated = 1103,\n  Cipher_AttachmentDeleted = 1104,\n  Cipher_Shared = 1105,\n  Cipher_UpdatedCollections = 1106,\n  Cipher_ClientViewed = 1107,\n  Cipher_ClientToggledPasswordVisible = 1108,\n  Cipher_ClientToggledHiddenFieldVisible = 1109,\n  Cipher_ClientToggledCardCodeVisible = 1110,\n  Cipher_ClientCopiedPassword = 1111,\n  Cipher_ClientCopiedHiddenField = 1112,\n  Cipher_ClientCopiedCardCode = 1113,\n  Cipher_ClientAutofilled = 1114,\n  Cipher_SoftDeleted = 1115,\n  Cipher_Restored = 1116,\n  Cipher_ClientToggledCardNumberVisible = 1117,\n\n  Collection_Created = 1300,\n  Collection_Updated = 1301,\n  Collection_Deleted = 1302,\n\n  Group_Created = 1400,\n  Group_Updated = 1401,\n  Group_Deleted = 1402,\n\n  OrganizationUser_Invited = 1500,\n  OrganizationUser_Confirmed = 1501,\n  OrganizationUser_Updated = 1502,\n  OrganizationUser_Removed = 1503,\n  OrganizationUser_UpdatedGroups = 1504,\n  OrganizationUser_UnlinkedSso = 1505,\n  OrganizationUser_ResetPassword_Enroll = 1506,\n  OrganizationUser_ResetPassword_Withdraw = 1507,\n  OrganizationUser_AdminResetPassword = 1508,\n  OrganizationUser_ResetSsoLink = 1509,\n  OrganizationUser_FirstSsoLogin = 1510,\n  OrganizationUser_Revoked = 1511,\n  OrganizationUser_Restored = 1512,\n  OrganizationUser_ApprovedAuthRequest = 1513,\n  OrganizationUser_RejectedAuthRequest = 1514,\n\n  Organization_Updated = 1600,\n  Organization_PurgedVault = 1601,\n  Organization_ClientExportedVault = 1602,\n  Organization_VaultAccessed = 1603,\n  Organization_EnabledSso = 1604,\n  Organization_DisabledSso = 1605,\n  Organization_EnabledKeyConnector = 1606,\n  Organization_DisabledKeyConnector = 1607,\n  Organization_SponsorshipsSynced = 1608,\n\n  Policy_Updated = 1700,\n\n  ProviderUser_Invited = 1800,\n  ProviderUser_Confirmed = 1801,\n  ProviderUser_Updated = 1802,\n  ProviderUser_Removed = 1803,\n\n  ProviderOrganization_Created = 1900,\n  ProviderOrganization_Added = 1901,\n  ProviderOrganization_Removed = 1902,\n  ProviderOrganization_VaultAccessed = 1903,\n\n  OrganizationDomain_Added = 2000,\n  OrganizationDomain_Removed = 2001,\n  OrganizationDomain_Verified = 2002,\n  OrganizationDomain_NotVerified = 2003,\n\n  Secret_Retrieved = 2100,\n}\n","export enum FieldType {\n  Text = 0,\n  Hidden = 1,\n  Boolean = 2,\n  Linked = 3,\n}\n","export enum FileUploadType {\n  Direct = 0,\n  Azure = 1,\n}\n","export enum HashPurpose {\n  ServerAuthorization = 1,\n  LocalAuthorization = 2,\n}\n","export enum HtmlStorageLocation {\n  Local = \"local\",\n  Memory = \"memory\",\n  Session = \"session\",\n}\n","/**\n * Hypertext Transfer Protocol (HTTP) response status codes.\n *\n * @see {@link https://en.wikipedia.org/wiki/List_of_HTTP_status_codes}\n * src: https://gist.github.com/RWOverdijk/6cef816cfdf5722228e01cc05fd4b094\n */\nexport enum HttpStatusCode {\n  /**\n   * The server has received the request headers and the client should proceed to send the request body\n   * (in the case of a request for which a body needs to be sent; for example, a POST request).\n   * Sending a large request body to a server after a request has been rejected for inappropriate headers would be inefficient.\n   * To have a server check the request's headers, a client must send Expect: 100-continue as a header in its initial request\n   * and receive a 100 Continue status code in response before sending the body. The response 417 Expectation Failed indicates the request should not be continued.\n   */\n  Continue = 100,\n\n  /**\n   * The requester has asked the server to switch protocols and the server has agreed to do so.\n   */\n  SwitchingProtocols = 101,\n\n  /**\n   * A WebDAV request may contain many sub-requests involving file operations, requiring a long time to complete the request.\n   * This code indicates that the server has received and is processing the request, but no response is available yet.\n   * This prevents the client from timing out and assuming the request was lost.\n   */\n  Processing = 102,\n\n  // **********************************************************************************************************\n  // 200s - SUCCESS\n  // **********************************************************************************************************\n\n  /**\n   * Standard response for successful HTTP requests.\n   * The actual response will depend on the request method used.\n   * In a GET request, the response will contain an entity corresponding to the requested resource.\n   * In a POST request, the response will contain an entity describing or containing the result of the action.\n   */\n  Ok = 200,\n\n  /**\n   * The request has been fulfilled, resulting in the creation of a new resource.\n   */\n  Created = 201,\n\n  /**\n   * The request has been accepted for processing, but the processing has not been completed.\n   * The request might or might not be eventually acted upon, and may be disallowed when processing occurs.\n   */\n  Accepted = 202,\n\n  /**\n   * SINCE HTTP/1.1\n   * The server is a transforming proxy that received a 200 OK from its origin,\n   * but is returning a modified version of the origin's response.\n   */\n  NonAuthoritativeInformation = 203,\n\n  /**\n   * The server successfully processed the request and is not returning any content.\n   */\n  NoContent = 204,\n\n  /**\n   * The server successfully processed the request, but is not returning any content.\n   * Unlike a 204 response, this response requires that the requester reset the document view.\n   */\n  ResetContent = 205,\n\n  /**\n   * The server is delivering only part of the resource (byte serving) due to a range header sent by the client.\n   * The range header is used by HTTP clients to enable resuming of interrupted downloads,\n   * or split a download into multiple simultaneous streams.\n   */\n  PartialContent = 206,\n\n  /**\n   * The message body that follows is an XML message and can contain a number of separate response codes,\n   * depending on how many sub-requests were made.\n   */\n  MultiStatus = 207,\n\n  /**\n   * The members of a DAV binding have already been enumerated in a preceding part of the (multistatus) response,\n   * and are not being included again.\n   */\n  AlreadyReported = 208,\n\n  /**\n   * The server has fulfilled a request for the resource,\n   * and the response is a representation of the result of one or more instance-manipulations applied to the current instance.\n   */\n  ImUsed = 226,\n\n  // **********************************************************************************************************\n  // 300s - Redirections\n  // **********************************************************************************************************\n\n  /**\n   * Indicates multiple options for the resource from which the client may choose (via agent-driven content negotiation).\n   * For example, this code could be used to present multiple video format options,\n   * to list files with different filename extensions, or to suggest word-sense disambiguation.\n   */\n  MultipleChoices = 300,\n\n  /**\n   * This and all future requests should be directed to the given URI.\n   */\n  MovedPermanently = 301,\n\n  /**\n   * This is an example of industry practice contradicting the standard.\n   * The HTTP/1.0 specification (RFC 1945) required the client to perform a temporary redirect\n   * (the original describing phrase was \"Moved Temporarily\"), but popular browsers implemented 302\n   * with the functionality of a 303 See Other. Therefore, HTTP/1.1 added status codes 303 and 307\n   * to distinguish between the two behaviours. However, some Web applications and frameworks\n   * use the 302 status code as if it were the 303.\n   */\n  Found = 302,\n\n  /**\n   * SINCE HTTP/1.1\n   * The response to the request can be found under another URI using a GET method.\n   * When received in response to a POST (or PUT/DELETE), the client should presume that\n   * the server has received the data and should issue a redirect with a separate GET message.\n   */\n  SeeOther = 303,\n\n  /**\n   * Indicates that the resource has not been modified since the version specified by the request headers If-Modified-Since or If-None-Match.\n   * In such case, there is no need to retransmit the resource since the client still has a previously-downloaded copy.\n   */\n  NotModified = 304,\n\n  /**\n   * SINCE HTTP/1.1\n   * The requested resource is available only through a proxy, the address for which is provided in the response.\n   * Many HTTP clients (such as Mozilla and Internet Explorer) do not correctly handle responses with this status code, primarily for security reasons.\n   */\n  UseProxy = 305,\n\n  /**\n   * No longer used. Originally meant \"Subsequent requests should use the specified proxy.\"\n   */\n  SwitchProxy = 306,\n\n  /**\n   * SINCE HTTP/1.1\n   * In this case, the request should be repeated with another URI; however, future requests should still use the original URI.\n   * In contrast to how 302 was historically implemented, the request method is not allowed to be changed when reissuing the original request.\n   * For example, a POST request should be repeated using another POST request.\n   */\n  TemporaryRedirect = 307,\n\n  /**\n   * The request and all future requests should be repeated using another URI.\n   * 307 and 308 parallel the behaviors of 302 and 301, but do not allow the HTTP method to change.\n   * So, for example, submitting a form to a permanently redirected resource may continue smoothly.\n   */\n  PermanentRedirect = 308,\n\n  // **********************************************************************************************************\n  // 400s - Client / User messed up\n  // **********************************************************************************************************\n\n  /**\n   * The server cannot or will not process the request due to an apparent client error\n   * (e.g., malformed request syntax, too large size, invalid request message framing, or deceptive request routing).\n   */\n  BadRequest = 400,\n\n  /**\n   * Similar to 403 Forbidden, but specifically for use when authentication is required and has failed or has not yet\n   * been provided. The response must include a WWW-Authenticate header field containing a challenge applicable to the\n   * requested resource. See Basic access authentication and Digest access authentication. 401 semantically means\n   * \"unauthenticated\",i.e. the user does not have the necessary credentials.\n   */\n  Unauthorized = 401,\n\n  /**\n   * Reserved for future use. The original intention was that this code might be used as part of some form of digital\n   * cash or micro payment scheme, but that has not happened, and this code is not usually used.\n   * Google Developers API uses this status if a particular developer has exceeded the daily limit on requests.\n   */\n  PaymentRequired = 402,\n\n  /**\n   * The request was valid, but the server is refusing action.\n   * The user might not have the necessary permissions for a resource.\n   */\n  Forbidden = 403,\n\n  /**\n   * The requested resource could not be found but may be available in the future.\n   * Subsequent requests by the client are permissible.\n   */\n  NotFound = 404,\n\n  /**\n   * A request method is not supported for the requested resource;\n   * for example, a GET request on a form that requires data to be presented via POST, or a PUT request on a read-only resource.\n   */\n  MethodNotAllowed = 405,\n\n  /**\n   * The requested resource is capable of generating only content not acceptable according to the Accept headers sent in the request.\n   */\n  NotAcceptable = 406,\n\n  /**\n   * The client must first authenticate itself with the proxy.\n   */\n  ProxyAuthenticationRequired = 407,\n\n  /**\n   * The server timed out waiting for the request.\n   * According to HTTP specifications:\n   * \"The client did not produce a request within the time that the server was prepared to wait. The client MAY repeat the request without modifications at any later time.\"\n   */\n  RequestTimeout = 408,\n\n  /**\n   * Indicates that the request could not be processed because of conflict in the request,\n   * such as an edit conflict between multiple simultaneous updates.\n   */\n  Conflict = 409,\n\n  /**\n   * Indicates that the resource requested is no longer available and will not be available again.\n   * This should be used when a resource has been intentionally removed and the resource should be purged.\n   * Upon receiving a 410 status code, the client should not request the resource in the future.\n   * Clients such as search engines should remove the resource from their indices.\n   * Most use cases do not require clients and search engines to purge the resource, and a \"404 Not Found\" may be used instead.\n   */\n  Gone = 410,\n\n  /**\n   * The request did not specify the length of its content, which is required by the requested resource.\n   */\n  LengthRequired = 411,\n\n  /**\n   * The server does not meet one of the preconditions that the requester put on the request.\n   */\n  PreconditionFailed = 412,\n\n  /**\n   * The request is larger than the server is willing or able to process. Previously called \"Request Entity Too Large\".\n   */\n  PayloadTooLarge = 413,\n\n  /**\n   * The URI provided was too long for the server to process. Often the result of too much data being encoded as a query-string of a GET request,\n   * in which case it should be converted to a POST request.\n   * Called \"Request-URI Too Long\" previously.\n   */\n  UriTooLong = 414,\n\n  /**\n   * The request entity has a media type which the server or resource does not support.\n   * For example, the client uploads an image as image/svg+xml, but the server requires that images use a different format.\n   */\n  UnsupportedMediaType = 415,\n\n  /**\n   * The client has asked for a portion of the file (byte serving), but the server cannot supply that portion.\n   * For example, if the client asked for a part of the file that lies beyond the end of the file.\n   * Called \"Requested Range Not Satisfiable\" previously.\n   */\n  RangeNotSatisfiable = 416,\n\n  /**\n   * The server cannot meet the requirements of the Expect request-header field.\n   */\n  ExpectationFailed = 417,\n\n  /**\n   * This code was defined in 1998 as one of the traditional IETF April Fools' jokes, in RFC 2324, Hyper Text Coffee Pot Control Protocol,\n   * and is not expected to be implemented by actual HTTP servers. The RFC specifies this code should be returned by\n   * teapots requested to brew coffee. This HTTP status is used as an Easter egg in some websites, including Google.com.\n   */\n  IAmATeapot = 418,\n\n  /**\n   * The request was directed at a server that is not able to produce a response (for example because a connection reuse).\n   */\n  MisdirectedRequest = 421,\n\n  /**\n   * The request was well-formed but was unable to be followed due to semantic errors.\n   */\n  UnprocessableEntity = 422,\n\n  /**\n   * The resource that is being accessed is locked.\n   */\n  Locked = 423,\n\n  /**\n   * The request failed due to failure of a previous request (e.g., a PROPPATCH).\n   */\n  FailedDependency = 424,\n\n  /**\n   * The client should switch to a different protocol such as TLS/1.0, given in the Upgrade header field.\n   */\n  UpgradeRequired = 426,\n\n  /**\n   * The origin server requires the request to be conditional.\n   * Intended to prevent \"the 'lost update' problem, where a client\n   * GETs a resource's state, modifies it, and PUTs it back to the server,\n   * when meanwhile a third party has modified the state on the server, leading to a conflict.\"\n   */\n  PreconditionRequired = 428,\n\n  /**\n   * The user has sent too many requests in a given amount of time. Intended for use with rate-limiting schemes.\n   */\n  TooManyRequests = 429,\n\n  /**\n   * The server is unwilling to process the request because either an individual header field,\n   * or all the header fields collectively, are too large.\n   */\n  RequestHeaderFieldsTooLarge = 431,\n\n  /**\n   * A server operator has received a legal demand to deny access to a resource or to a set of resources\n   * that includes the requested resource. The code 451 was chosen as a reference to the novel Fahrenheit 451.\n   */\n  UnavailableForLegalReasons = 451,\n\n  // **********************************************************************************************************\n  // 500s - Server messed up\n  // **********************************************************************************************************\n\n  /**\n   * A generic error message, given when an unexpected condition was encountered and no more specific message is suitable.\n   */\n  InternalServerError = 500,\n\n  /**\n   * The server either does not recognize the request method, or it lacks the ability to fulfill the request.\n   * Usually this implies future availability (e.g., a new feature of a web-service API).\n   */\n  NotImplemented = 501,\n\n  /**\n   * The server was acting as a gateway or proxy and received an invalid response from the upstream server.\n   */\n  BadGateway = 502,\n\n  /**\n   * The server is currently unavailable (because it is overloaded or down for maintenance).\n   * Generally, this is a temporary state.\n   */\n  ServiceUnavailable = 503,\n\n  /**\n   * The server was acting as a gateway or proxy and did not receive a timely response from the upstream server.\n   */\n  GatewayTimeout = 504,\n\n  /**\n   * The server does not support the HTTP protocol version used in the request\n   */\n  HttpVersionNotSupported = 505,\n\n  /**\n   * Transparent content negotiation for the request results in a circular reference.\n   */\n  VariantAlsoNegotiates = 506,\n\n  /**\n   * The server is unable to store the representation needed to complete the request.\n   */\n  InsufficientStorage = 507,\n\n  /**\n   * The server detected an infinite loop while processing the request.\n   */\n  LoopDetected = 508,\n\n  /**\n   * Further extensions to the request are required for the server to fulfill it.\n   */\n  NotExtended = 510,\n\n  /**\n   * The client needs to authenticate to gain network access.\n   * Intended for use by intercepting proxies used to control access to the network (e.g., \"captive portals\" used\n   * to require agreement to Terms of Service before granting full Internet access via a Wi-Fi hotspot).\n   */\n  NetworkAuthenticationRequired = 511,\n}\n","import { KdfConfig } from \"../auth/models/domain/kdf-config\";\n\nexport enum KdfType {\n  PBKDF2_SHA256 = 0,\n  Argon2id = 1,\n}\n\nexport const DEFAULT_ARGON2_MEMORY = 64;\nexport const DEFAULT_ARGON2_PARALLELISM = 4;\nexport const DEFAULT_ARGON2_ITERATIONS = 3;\n\nexport const DEFAULT_KDF_TYPE = KdfType.PBKDF2_SHA256;\nexport const DEFAULT_PBKDF2_ITERATIONS = 600000;\nexport const DEFAULT_KDF_CONFIG = new KdfConfig(DEFAULT_PBKDF2_ITERATIONS);\nexport const SEND_KDF_ITERATIONS = 100000;\n","export class KdfConfig {\n  iterations: number;\n  memory?: number;\n  parallelism?: number;\n\n  constructor(iterations: number, memory?: number, parallelism?: number) {\n    this.iterations = iterations;\n    this.memory = memory;\n    this.parallelism = parallelism;\n  }\n}\n","export enum KeySuffixOptions {\n  Auto = \"auto\",\n  Biometric = \"biometric\",\n  Pin = \"pin\",\n}\n","export type LinkedIdType = LoginLinkedId | CardLinkedId | IdentityLinkedId;\n\n// LoginView\nexport enum LoginLinkedId {\n  Username = 100,\n  Password = 101,\n}\n\n// CardView\nexport enum CardLinkedId {\n  CardholderName = 300,\n  ExpMonth = 301,\n  ExpYear = 302,\n  Code = 303,\n  Brand = 304,\n  Number = 305,\n}\n\n// IdentityView\nexport enum IdentityLinkedId {\n  Title = 400,\n  MiddleName = 401,\n  Address1 = 402,\n  Address2 = 403,\n  Address3 = 404,\n  City = 405,\n  State = 406,\n  PostalCode = 407,\n  Country = 408,\n  Company = 409,\n  Email = 410,\n  Phone = 411,\n  Ssn = 412,\n  Username = 413,\n  PassportNumber = 414,\n  LicenseNumber = 415,\n  FirstName = 416,\n  LastName = 417,\n  FullName = 418,\n}\n","export enum LogLevelType {\n  Debug,\n  Info,\n  Warning,\n  Error,\n}\n","export enum NativeMessagingVersion {\n  One = 1, // Original implementation\n  Latest = One,\n}\n","export enum NotificationType {\n  SyncCipherUpdate = 0,\n  SyncCipherCreate = 1,\n  SyncLoginDelete = 2,\n  SyncFolderDelete = 3,\n  SyncCiphers = 4,\n\n  SyncVault = 5,\n  SyncOrgKeys = 6,\n  SyncFolderCreate = 7,\n  SyncFolderUpdate = 8,\n  SyncCipherDelete = 9,\n  SyncSettings = 10,\n\n  LogOut = 11,\n\n  SyncSendCreate = 12,\n  SyncSendUpdate = 13,\n  SyncSendDelete = 14,\n\n  AuthRequest = 15,\n  AuthRequestResponse = 16,\n}\n","export enum ProductType {\n  Free = 0,\n  Families = 1,\n  Teams = 2,\n  Enterprise = 3,\n}\n","export enum ProviderType {\n  Msp = 0,\n  Reseller = 1,\n}\n","export enum SecureNoteType {\n  Generic = 0,\n}\n","export enum StateVersion {\n  One = 1, // Original flat key/value pair store\n  Two = 2, // Move to a typed State object\n  Three = 3, // Fix migration of users' premium status\n  Four = 4, // Fix 'Never Lock' option by removing stale data\n  Five = 5, // Migrate to new storage of encrypted organization keys\n  Six = 6, // Delete account.keys.legacyEtmKey property\n  Seven = 7, // Remove global desktop auto prompt setting, move to account\n  Latest = Seven,\n}\n","export enum StorageLocation {\n  Both = \"both\",\n  Disk = \"disk\",\n  Memory = \"memory\",\n}\n","export enum ThemeType {\n  System = \"system\",\n  Light = \"light\",\n  Dark = \"dark\",\n  Nord = \"nord\",\n  SolarizedDark = \"solarizedDark\",\n}\n","export enum UriMatchType {\n  Domain = 0,\n  Host = 1,\n  StartsWith = 2,\n  Exact = 3,\n  RegularExpression = 4,\n  Never = 5,\n}\n","import { Jsonify, Opaque } from \"type-fest\";\n\nimport { EncryptionType } from \"../../../enums\";\nimport { Utils } from \"../../../platform/misc/utils\";\n\nexport class SymmetricCryptoKey {\n  key: Uint8Array;\n  encKey?: Uint8Array;\n  macKey?: Uint8Array;\n  encType: EncryptionType;\n\n  keyB64: string;\n  encKeyB64: string;\n  macKeyB64: string;\n\n  meta: any;\n\n  constructor(key: Uint8Array, encType?: EncryptionType) {\n    if (key == null) {\n      throw new Error(\"Must provide key\");\n    }\n\n    if (encType == null) {\n      if (key.byteLength === 32) {\n        encType = EncryptionType.AesCbc256_B64;\n      } else if (key.byteLength === 64) {\n        encType = EncryptionType.AesCbc256_HmacSha256_B64;\n      } else {\n        throw new Error(\"Unable to determine encType.\");\n      }\n    }\n\n    this.key = key;\n    this.encType = encType;\n\n    if (encType === EncryptionType.AesCbc256_B64 && key.byteLength === 32) {\n      this.encKey = key;\n      this.macKey = null;\n    } else if (encType === EncryptionType.AesCbc128_HmacSha256_B64 && key.byteLength === 32) {\n      this.encKey = key.slice(0, 16);\n      this.macKey = key.slice(16, 32);\n    } else if (encType === EncryptionType.AesCbc256_HmacSha256_B64 && key.byteLength === 64) {\n      this.encKey = key.slice(0, 32);\n      this.macKey = key.slice(32, 64);\n    } else {\n      throw new Error(\"Unsupported encType/key length.\");\n    }\n\n    if (this.key != null) {\n      this.keyB64 = Utils.fromBufferToB64(this.key);\n    }\n    if (this.encKey != null) {\n      this.encKeyB64 = Utils.fromBufferToB64(this.encKey);\n    }\n    if (this.macKey != null) {\n      this.macKeyB64 = Utils.fromBufferToB64(this.macKey);\n    }\n  }\n\n  toJSON() {\n    // The whole object is constructed from the initial key, so just store the B64 key\n    return { keyB64: this.keyB64 };\n  }\n\n  static fromString(s: string): SymmetricCryptoKey {\n    if (s == null) {\n      return null;\n    }\n\n    const arrayBuffer = Utils.fromB64ToArray(s);\n    return new SymmetricCryptoKey(arrayBuffer);\n  }\n\n  static fromJSON(obj: Jsonify<SymmetricCryptoKey>): SymmetricCryptoKey {\n    return SymmetricCryptoKey.fromString(obj?.keyB64);\n  }\n}\n\n// Setup all separate key types as opaque types\nexport type DeviceKey = Opaque<SymmetricCryptoKey, \"DeviceKey\">;\nexport type UserKey = Opaque<SymmetricCryptoKey, \"UserKey\">;\nexport type MasterKey = Opaque<SymmetricCryptoKey, \"MasterKey\">;\nexport type PinKey = Opaque<SymmetricCryptoKey, \"PinKey\">;\nexport type OrgKey = Opaque<SymmetricCryptoKey, \"OrgKey\">;\nexport type ProviderKey = Opaque<SymmetricCryptoKey, \"ProviderKey\">;\n","import { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport {\n  UserKey,\n  SymmetricCryptoKey,\n  MasterKey,\n} from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { AuthRequestCryptoServiceAbstraction } from \"../abstractions/auth-request-crypto.service.abstraction\";\nimport { AuthRequestResponse } from \"../models/response/auth-request.response\";\n\nexport class AuthRequestCryptoServiceImplementation implements AuthRequestCryptoServiceAbstraction {\n  constructor(private cryptoService: CryptoService) {}\n\n  async setUserKeyAfterDecryptingSharedUserKey(\n    authReqResponse: AuthRequestResponse,\n    authReqPrivateKey: Uint8Array\n  ) {\n    const userKey = await this.decryptPubKeyEncryptedUserKey(\n      authReqResponse.key,\n      authReqPrivateKey\n    );\n    await this.cryptoService.setUserKey(userKey);\n  }\n\n  async setKeysAfterDecryptingSharedMasterKeyAndHash(\n    authReqResponse: AuthRequestResponse,\n    authReqPrivateKey: Uint8Array\n  ) {\n    const { masterKey, masterKeyHash } = await this.decryptPubKeyEncryptedMasterKeyAndHash(\n      authReqResponse.key,\n      authReqResponse.masterPasswordHash,\n      authReqPrivateKey\n    );\n\n    // Decrypt and set user key in state\n    const userKey = await this.cryptoService.decryptUserKeyWithMasterKey(masterKey);\n\n    // Set masterKey + masterKeyHash in state after decryption (in case decryption fails)\n    await this.cryptoService.setMasterKey(masterKey);\n    await this.cryptoService.setMasterKeyHash(masterKeyHash);\n\n    await this.cryptoService.setUserKey(userKey);\n  }\n\n  // Decryption helpers\n  async decryptPubKeyEncryptedUserKey(\n    pubKeyEncryptedUserKey: string,\n    privateKey: Uint8Array\n  ): Promise<UserKey> {\n    const decryptedUserKeyBytes = await this.cryptoService.rsaDecrypt(\n      pubKeyEncryptedUserKey,\n      privateKey\n    );\n\n    return new SymmetricCryptoKey(decryptedUserKeyBytes) as UserKey;\n  }\n\n  async decryptPubKeyEncryptedMasterKeyAndHash(\n    pubKeyEncryptedMasterKey: string,\n    pubKeyEncryptedMasterKeyHash: string,\n    privateKey: Uint8Array\n  ): Promise<{ masterKey: MasterKey; masterKeyHash: string }> {\n    const decryptedMasterKeyArrayBuffer = await this.cryptoService.rsaDecrypt(\n      pubKeyEncryptedMasterKey,\n      privateKey\n    );\n\n    const decryptedMasterKeyHashArrayBuffer = await this.cryptoService.rsaDecrypt(\n      pubKeyEncryptedMasterKeyHash,\n      privateKey\n    );\n\n    const masterKey = new SymmetricCryptoKey(decryptedMasterKeyArrayBuffer) as MasterKey;\n    const masterKeyHash = Utils.fromBufferToUtf8(decryptedMasterKeyHashArrayBuffer);\n\n    return {\n      masterKey,\n      masterKeyHash,\n    };\n  }\n}\n","export enum AuthenticationStatus {\n  LoggedOut = 0,\n  Locked = 1,\n  Unlocked = 2,\n}\n","export enum AuthenticationType {\n  Password = 0,\n  Sso = 1,\n  UserApi = 2,\n  Passwordless = 3,\n}\n","export class PreloginRequest {\n  email: string;\n\n  constructor(email: string) {\n    this.email = email;\n  }\n}\n","import { Utils } from \"../../platform/misc/utils\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class ErrorResponse extends BaseResponse {\n  message: string;\n  validationErrors: { [key: string]: string[] };\n  statusCode: number;\n  captchaRequired: boolean;\n  captchaSiteKey: string;\n\n  constructor(response: any, status: number, identityResponse?: boolean) {\n    super(response);\n    let errorModel = null;\n    if (response != null) {\n      const responseErrorModel = this.getResponseProperty(\"ErrorModel\");\n      if (responseErrorModel && identityResponse) {\n        errorModel = responseErrorModel;\n      } else {\n        errorModel = response;\n      }\n    }\n\n    if (status === 429) {\n      this.message = \"Rate limit exceeded. Try again later.\";\n    } else if (errorModel) {\n      this.message = this.getResponseProperty(\"Message\", errorModel);\n      this.validationErrors = this.getResponseProperty(\"ValidationErrors\", errorModel);\n      this.captchaSiteKey = this.validationErrors?.HCaptcha_SiteKey?.[0];\n      this.captchaRequired = !Utils.isNullOrWhitespace(this.captchaSiteKey);\n    }\n    this.statusCode = status;\n  }\n\n  getSingleMessage(): string {\n    if (this.validationErrors == null) {\n      return this.message;\n    }\n    for (const key in this.validationErrors) {\n      // eslint-disable-next-line\n      if (!this.validationErrors.hasOwnProperty(key)) {\n        continue;\n      }\n      if (this.validationErrors[key].length) {\n        return this.validationErrors[key][0];\n      }\n    }\n    return this.message;\n  }\n\n  getAllMessages(): string[] {\n    const messages: string[] = [];\n    if (this.validationErrors == null) {\n      return messages;\n    }\n    for (const key in this.validationErrors) {\n      // eslint-disable-next-line\n      if (!this.validationErrors.hasOwnProperty(key)) {\n        continue;\n      }\n      this.validationErrors[key].forEach((item: string) => {\n        let prefix = \"\";\n        if (key.indexOf(\"[\") > -1 && key.indexOf(\"]\") > -1) {\n          const lastSep = key.lastIndexOf(\".\");\n          prefix = key.substr(0, lastSep > -1 ? lastSep : key.length) + \": \";\n        }\n        messages.push(prefix + item);\n      });\n    }\n    return messages;\n  }\n}\n","import { Jsonify, Opaque } from \"type-fest\";\n\nimport { EncryptionType, EXPECTED_NUM_PARTS_BY_ENCRYPTION_TYPE } from \"../../../enums\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { Encrypted } from \"../../interfaces/encrypted\";\n\nimport { SymmetricCryptoKey } from \"./symmetric-crypto-key\";\n\nexport class EncString implements Encrypted {\n  encryptedString?: EncryptedString;\n  encryptionType?: EncryptionType;\n  decryptedValue?: string;\n  data?: string;\n  iv?: string;\n  mac?: string;\n\n  constructor(\n    encryptedStringOrType: string | EncryptionType,\n    data?: string,\n    iv?: string,\n    mac?: string\n  ) {\n    if (data != null) {\n      this.initFromData(encryptedStringOrType as EncryptionType, data, iv, mac);\n    } else {\n      this.initFromEncryptedString(encryptedStringOrType as string);\n    }\n  }\n\n  get ivBytes(): Uint8Array {\n    return this.iv == null ? null : Utils.fromB64ToArray(this.iv);\n  }\n\n  get macBytes(): Uint8Array {\n    return this.mac == null ? null : Utils.fromB64ToArray(this.mac);\n  }\n\n  get dataBytes(): Uint8Array {\n    return this.data == null ? null : Utils.fromB64ToArray(this.data);\n  }\n\n  toJSON() {\n    return this.encryptedString;\n  }\n\n  static fromJSON(obj: Jsonify<EncString>): EncString {\n    if (obj == null) {\n      return null;\n    }\n\n    return new EncString(obj);\n  }\n\n  private initFromData(encType: EncryptionType, data: string, iv: string, mac: string) {\n    if (iv != null) {\n      this.encryptedString = (encType + \".\" + iv + \"|\" + data) as EncryptedString;\n    } else {\n      this.encryptedString = (encType + \".\" + data) as EncryptedString;\n    }\n\n    // mac\n    if (mac != null) {\n      this.encryptedString = (this.encryptedString + \"|\" + mac) as EncryptedString;\n    }\n\n    this.encryptionType = encType;\n    this.data = data;\n    this.iv = iv;\n    this.mac = mac;\n  }\n\n  private initFromEncryptedString(encryptedString: string) {\n    this.encryptedString = encryptedString as EncryptedString;\n    if (!this.encryptedString) {\n      return;\n    }\n\n    const { encType, encPieces } = EncString.parseEncryptedString(this.encryptedString);\n    this.encryptionType = encType;\n\n    if (encPieces.length !== EXPECTED_NUM_PARTS_BY_ENCRYPTION_TYPE[encType]) {\n      return;\n    }\n\n    switch (encType) {\n      case EncryptionType.AesCbc128_HmacSha256_B64:\n      case EncryptionType.AesCbc256_HmacSha256_B64:\n        this.iv = encPieces[0];\n        this.data = encPieces[1];\n        this.mac = encPieces[2];\n        break;\n      case EncryptionType.AesCbc256_B64:\n        this.iv = encPieces[0];\n        this.data = encPieces[1];\n        break;\n      case EncryptionType.Rsa2048_OaepSha256_B64:\n      case EncryptionType.Rsa2048_OaepSha1_B64:\n        this.data = encPieces[0];\n        break;\n      default:\n        return;\n    }\n  }\n\n  private static parseEncryptedString(encryptedString: string): {\n    encType: EncryptionType;\n    encPieces: string[];\n  } {\n    const headerPieces = encryptedString.split(\".\");\n    let encType: EncryptionType;\n    let encPieces: string[] = null;\n\n    if (headerPieces.length === 2) {\n      try {\n        encType = parseInt(headerPieces[0], null);\n        encPieces = headerPieces[1].split(\"|\");\n      } catch (e) {\n        return;\n      }\n    } else {\n      encPieces = encryptedString.split(\"|\");\n      encType =\n        encPieces.length === 3\n          ? EncryptionType.AesCbc128_HmacSha256_B64\n          : EncryptionType.AesCbc256_B64;\n    }\n\n    return {\n      encType,\n      encPieces,\n    };\n  }\n\n  static isSerializedEncString(s: string): boolean {\n    const { encType, encPieces } = this.parseEncryptedString(s);\n\n    return EXPECTED_NUM_PARTS_BY_ENCRYPTION_TYPE[encType] === encPieces.length;\n  }\n\n  async decrypt(orgId: string, key: SymmetricCryptoKey = null): Promise<string> {\n    if (this.decryptedValue != null) {\n      return this.decryptedValue;\n    }\n\n    try {\n      if (key == null) {\n        key = await this.getKeyForDecryption(orgId);\n      }\n      if (key == null) {\n        throw new Error(\"No key to decrypt EncString with orgId \" + orgId);\n      }\n\n      const encryptService = Utils.getContainerService().getEncryptService();\n      this.decryptedValue = await encryptService.decryptToUtf8(this, key);\n    } catch (e) {\n      this.decryptedValue = \"[error: cannot decrypt]\";\n    }\n    return this.decryptedValue;\n  }\n\n  private async getKeyForDecryption(orgId: string) {\n    const cryptoService = Utils.getContainerService().getCryptoService();\n    return orgId != null\n      ? await cryptoService.getOrgKey(orgId)\n      : await cryptoService.getUserKeyWithLegacySupport();\n  }\n}\n\nexport type EncryptedString = Opaque<string, \"EncString\">;\n","export enum ForceResetPasswordReason {\n  /**\n   * A password reset should not be forced.\n   */\n  None,\n\n  /**\n   * Occurs when an organization admin forces a user to reset their password.\n   */\n  AdminForcePasswordReset,\n\n  /**\n   * Occurs when a user logs in / unlocks their vault with a master password that does not meet an organization's\n   * master password policy that is enforced on login/unlock.\n   */\n  WeakMasterPassword,\n}\n","export enum TwoFactorProviderType {\n  Authenticator = 0,\n  Email = 1,\n  Duo = 2,\n  Yubikey = 3,\n  U2f = 4,\n  Remember = 5,\n  OrganizationDuo = 6,\n  WebAuthn = 7,\n}\n","import { View } from \"../../../models/view/view\";\n\nimport { EncString } from \"./enc-string\";\nimport { SymmetricCryptoKey } from \"./symmetric-crypto-key\";\n\n// https://contributing.bitwarden.com/architecture/clients/data-model#domain\nexport default class Domain {\n  protected buildDomainModel<D extends Domain>(\n    domain: D,\n    dataObj: any,\n    map: any,\n    notEncList: any[] = []\n  ) {\n    for (const prop in map) {\n      // eslint-disable-next-line\n      if (!map.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      const objProp = dataObj[map[prop] || prop];\n      if (notEncList.indexOf(prop) > -1) {\n        (domain as any)[prop] = objProp ? objProp : null;\n      } else {\n        (domain as any)[prop] = objProp ? new EncString(objProp) : null;\n      }\n    }\n  }\n  protected buildDataModel<D extends Domain>(\n    domain: D,\n    dataObj: any,\n    map: any,\n    notEncStringList: any[] = []\n  ) {\n    for (const prop in map) {\n      // eslint-disable-next-line\n      if (!map.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      const objProp = (domain as any)[map[prop] || prop];\n      if (notEncStringList.indexOf(prop) > -1) {\n        (dataObj as any)[prop] = objProp != null ? objProp : null;\n      } else {\n        (dataObj as any)[prop] = objProp != null ? (objProp as EncString).encryptedString : null;\n      }\n    }\n  }\n\n  protected async decryptObj<T extends View>(\n    viewModel: T,\n    map: any,\n    orgId: string,\n    key: SymmetricCryptoKey = null\n  ): Promise<T> {\n    const promises = [];\n    const self: any = this;\n\n    for (const prop in map) {\n      // eslint-disable-next-line\n      if (!map.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      (function (theProp) {\n        const p = Promise.resolve()\n          .then(() => {\n            const mapProp = map[theProp] || theProp;\n            if (self[mapProp]) {\n              return self[mapProp].decrypt(orgId, key);\n            }\n            return null;\n          })\n          .then((val: any) => {\n            (viewModel as any)[theProp] = val;\n          });\n        promises.push(p);\n      })(prop);\n    }\n\n    await Promise.all(promises);\n    return viewModel;\n  }\n}\n","import { MasterPasswordPolicyResponse } from \"../../../auth/models/response/master-password-policy.response\";\nimport Domain from \"../../../platform/models/domain/domain-base\";\n\nexport class MasterPasswordPolicyOptions extends Domain {\n  minComplexity = 0;\n  minLength = 0;\n  requireUpper = false;\n  requireLower = false;\n  requireNumbers = false;\n  requireSpecial = false;\n\n  /**\n   * Flag to indicate if the policy should be enforced on login.\n   * If true, and the user's password does not meet the policy requirements,\n   * the user will be forced to update their password.\n   */\n  enforceOnLogin = false;\n\n  static fromResponse(policy: MasterPasswordPolicyResponse): MasterPasswordPolicyOptions {\n    if (policy == null) {\n      return null;\n    }\n    const options = new MasterPasswordPolicyOptions();\n    options.minComplexity = policy.minComplexity;\n    options.minLength = policy.minLength;\n    options.requireUpper = policy.requireUpper;\n    options.requireLower = policy.requireLower;\n    options.requireNumbers = policy.requireNumbers;\n    options.requireSpecial = policy.requireSpecial;\n    options.enforceOnLogin = policy.enforceOnLogin;\n    return options;\n  }\n}\n","import { DeviceRequest } from \"./device.request\";\nimport { TokenTwoFactorRequest } from \"./token-two-factor.request\";\n\nexport abstract class TokenRequest {\n  protected device?: DeviceRequest;\n  protected passwordlessAuthRequest: string;\n\n  constructor(protected twoFactor: TokenTwoFactorRequest, device?: DeviceRequest) {\n    this.device = device != null ? device : null;\n  }\n\n  // eslint-disable-next-line\n  alterIdentityTokenHeaders(headers: Headers) {\n    // Implemented in subclass if required\n  }\n\n  setTwoFactor(twoFactor: TokenTwoFactorRequest) {\n    this.twoFactor = twoFactor;\n  }\n\n  setPasswordlessAccessCode(accessCode: string) {\n    this.passwordlessAuthRequest = accessCode;\n  }\n\n  protected toIdentityToken(clientId: string) {\n    const obj: any = {\n      scope: \"api offline_access\",\n      client_id: clientId,\n    };\n\n    if (this.device) {\n      obj.deviceType = this.device.type;\n      obj.deviceIdentifier = this.device.identifier;\n      obj.deviceName = this.device.name;\n      // no push tokens for browser apps yet\n      // obj.devicePushToken = this.device.pushToken;\n    }\n\n    //passswordless login\n    if (this.passwordlessAuthRequest) {\n      obj.authRequest = this.passwordlessAuthRequest;\n    }\n\n    if (this.twoFactor) {\n      if (this.twoFactor.token && this.twoFactor.provider != null) {\n        obj.twoFactorToken = this.twoFactor.token;\n        obj.twoFactorProvider = this.twoFactor.provider;\n        obj.twoFactorRemember = this.twoFactor.remember ? \"1\" : \"0\";\n      }\n    }\n\n    return obj;\n  }\n}\n","import { ClientType } from \"../../../../enums\";\nimport { Utils } from \"../../../../platform/misc/utils\";\nimport { CaptchaProtectedRequest } from \"../captcha-protected.request\";\n\nimport { DeviceRequest } from \"./device.request\";\nimport { TokenTwoFactorRequest } from \"./token-two-factor.request\";\nimport { TokenRequest } from \"./token.request\";\n\nexport class PasswordTokenRequest extends TokenRequest implements CaptchaProtectedRequest {\n  constructor(\n    public email: string,\n    public masterPasswordHash: string,\n    public captchaResponse: string,\n    protected twoFactor: TokenTwoFactorRequest,\n    device?: DeviceRequest\n  ) {\n    super(twoFactor, device);\n  }\n\n  toIdentityToken(clientId: ClientType) {\n    const obj = super.toIdentityToken(clientId);\n\n    obj.grant_type = \"password\";\n    obj.username = this.email;\n    obj.password = this.masterPasswordHash;\n\n    if (this.captchaResponse != null) {\n      obj.captchaResponse = this.captchaResponse;\n    }\n\n    return obj;\n  }\n\n  alterIdentityTokenHeaders(headers: Headers) {\n    headers.set(\"Auth-Email\", Utils.fromUtf8ToUrlB64(this.email));\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class IdentityCaptchaResponse extends BaseResponse {\n  siteKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.siteKey = this.getResponseProperty(\"HCaptcha_SiteKey\");\n  }\n}\n","export class KeysRequest {\n  publicKey: string;\n  encryptedPrivateKey: string;\n\n  constructor(publicKey: string, encryptedPrivateKey: string) {\n    this.publicKey = publicKey;\n    this.encryptedPrivateKey = encryptedPrivateKey;\n  }\n}\n","import { Utils } from \"../../../platform/misc/utils\";\n\n// TODO: Tech Debt: potentially create a type Storage shape vs using a class here in the future\n// type StorageShape {\n//   id: string;\n//   privateKey: string;\n// }\n// so we can get rid of the any type passed into fromJSON and coming out of ToJSON\nexport class AdminAuthRequestStorable {\n  id: string;\n  privateKey: Uint8Array;\n\n  constructor(init?: Partial<AdminAuthRequestStorable>) {\n    if (init) {\n      Object.assign(this, init);\n    }\n  }\n\n  toJSON() {\n    return {\n      id: this.id,\n      privateKey: Utils.fromBufferToByteString(this.privateKey),\n    };\n  }\n\n  static fromJSON(obj: any): AdminAuthRequestStorable {\n    if (obj == null) {\n      return null;\n    }\n\n    let privateKeyBuffer = null;\n    if (obj.privateKey) {\n      privateKeyBuffer = Utils.fromByteStringToArray(obj.privateKey);\n    }\n\n    return new AdminAuthRequestStorable({\n      id: obj.id,\n      privateKey: privateKeyBuffer,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nexport class EnvironmentUrls {\n  base: string = null;\n  api: string = null;\n  identity: string = null;\n  icons: string = null;\n  notifications: string = null;\n  events: string = null;\n  webVault: string = null;\n  keyConnector: string = null;\n\n  static fromJSON(obj: Jsonify<EnvironmentUrls>): EnvironmentUrls {\n    return Object.assign(new EnvironmentUrls(), obj);\n  }\n}\n","export class KeyConnectorUserDecryptionOption {\n  constructor(public keyConnectorUrl: string) {}\n}\n","export class TrustedDeviceUserDecryptionOption {\n  constructor(\n    public hasAdminApproval: boolean,\n    public hasLoginApprovingDevice: boolean,\n    public hasManageResetPasswordPermission: boolean\n  ) {}\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Region } from \"../../abstractions/environment.service\";\nimport {\n  ServerConfigResponse,\n  ThirdPartyServerConfigResponse,\n  EnvironmentServerConfigResponse,\n} from \"../response/server-config.response\";\n\nexport class ServerConfigData {\n  version: string;\n  gitHash: string;\n  server?: ThirdPartyServerConfigData;\n  environment?: EnvironmentServerConfigData;\n  utcDate: string;\n  featureStates: { [key: string]: string } = {};\n\n  constructor(serverConfigResponse: Partial<ServerConfigResponse>) {\n    this.version = serverConfigResponse?.version;\n    this.gitHash = serverConfigResponse?.gitHash;\n    this.server = serverConfigResponse?.server\n      ? new ThirdPartyServerConfigData(serverConfigResponse.server)\n      : null;\n    this.utcDate = new Date().toISOString();\n    this.environment = serverConfigResponse?.environment\n      ? new EnvironmentServerConfigData(serverConfigResponse.environment)\n      : null;\n    this.featureStates = serverConfigResponse?.featureStates;\n  }\n\n  static fromJSON(obj: Jsonify<ServerConfigData>): ServerConfigData {\n    return Object.assign(new ServerConfigData({}), obj, {\n      server: obj?.server ? ThirdPartyServerConfigData.fromJSON(obj.server) : null,\n      environment: obj?.environment ? EnvironmentServerConfigData.fromJSON(obj.environment) : null,\n    });\n  }\n}\n\nexport class ThirdPartyServerConfigData {\n  name: string;\n  url: string;\n\n  constructor(response: Partial<ThirdPartyServerConfigResponse>) {\n    this.name = response.name;\n    this.url = response.url;\n  }\n\n  static fromJSON(obj: Jsonify<ThirdPartyServerConfigData>): ThirdPartyServerConfigData {\n    return Object.assign(new ThirdPartyServerConfigData({}), obj);\n  }\n}\n\nexport class EnvironmentServerConfigData {\n  cloudRegion: Region;\n  vault: string;\n  api: string;\n  identity: string;\n  notifications: string;\n  sso: string;\n\n  constructor(response: Partial<EnvironmentServerConfigResponse>) {\n    this.cloudRegion = response.cloudRegion;\n    this.vault = response.vault;\n    this.api = response.api;\n    this.identity = response.identity;\n    this.notifications = response.notifications;\n    this.sso = response.sso;\n  }\n\n  static fromJSON(obj: Jsonify<EnvironmentServerConfigData>): EnvironmentServerConfigData {\n    return Object.assign(new EnvironmentServerConfigData({}), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { EncryptedOrganizationKeyData } from \"../../../admin-console/models/data/encrypted-organization-key.data\";\nimport { OrganizationData } from \"../../../admin-console/models/data/organization.data\";\nimport { PolicyData } from \"../../../admin-console/models/data/policy.data\";\nimport { ProviderData } from \"../../../admin-console/models/data/provider.data\";\nimport { Policy } from \"../../../admin-console/models/domain/policy\";\nimport { AuthenticationStatus } from \"../../../auth/enums/authentication-status\";\nimport { AdminAuthRequestStorable } from \"../../../auth/models/domain/admin-auth-req-storable\";\nimport { EnvironmentUrls } from \"../../../auth/models/domain/environment-urls\";\nimport { ForceResetPasswordReason } from \"../../../auth/models/domain/force-reset-password-reason\";\nimport { KeyConnectorUserDecryptionOption } from \"../../../auth/models/domain/user-decryption-options/key-connector-user-decryption-option\";\nimport { TrustedDeviceUserDecryptionOption } from \"../../../auth/models/domain/user-decryption-options/trusted-device-user-decryption-option\";\nimport { UserDecryptionOptionsResponse } from \"../../../auth/models/response/user-decryption-options/user-decryption-options.response\";\nimport { KdfType, UriMatchType } from \"../../../enums\";\nimport { EventData } from \"../../../models/data/event.data\";\nimport { GeneratedPasswordHistory } from \"../../../tools/generator/password\";\nimport { SendData } from \"../../../tools/send/models/data/send.data\";\nimport { SendView } from \"../../../tools/send/models/view/send.view\";\nimport { DeepJsonify } from \"../../../types/deep-jsonify\";\nimport { CipherData } from \"../../../vault/models/data/cipher.data\";\nimport { CollectionData } from \"../../../vault/models/data/collection.data\";\nimport { FolderData } from \"../../../vault/models/data/folder.data\";\nimport { CipherView } from \"../../../vault/models/view/cipher.view\";\nimport { CollectionView } from \"../../../vault/models/view/collection.view\";\nimport { Utils } from \"../../misc/utils\";\nimport { ServerConfigData } from \"../../models/data/server-config.data\";\n\nimport { EncryptedString, EncString } from \"./enc-string\";\nimport { MasterKey, SymmetricCryptoKey, UserKey } from \"./symmetric-crypto-key\";\n\nexport class EncryptionPair<TEncrypted, TDecrypted> {\n  encrypted?: TEncrypted;\n  decrypted?: TDecrypted;\n\n  toJSON() {\n    return {\n      encrypted: this.encrypted,\n      decrypted:\n        this.decrypted instanceof ArrayBuffer\n          ? Utils.fromBufferToByteString(this.decrypted)\n          : this.decrypted,\n    };\n  }\n\n  static fromJSON<TEncrypted, TDecrypted>(\n    obj: { encrypted?: Jsonify<TEncrypted>; decrypted?: string | Jsonify<TDecrypted> },\n    decryptedFromJson?: (decObj: Jsonify<TDecrypted> | string) => TDecrypted,\n    encryptedFromJson?: (encObj: Jsonify<TEncrypted>) => TEncrypted\n  ) {\n    if (obj == null) {\n      return null;\n    }\n\n    const pair = new EncryptionPair<TEncrypted, TDecrypted>();\n    if (obj?.encrypted != null) {\n      pair.encrypted = encryptedFromJson\n        ? encryptedFromJson(obj.encrypted)\n        : (obj.encrypted as TEncrypted);\n    }\n    if (obj?.decrypted != null) {\n      pair.decrypted = decryptedFromJson\n        ? decryptedFromJson(obj.decrypted)\n        : (obj.decrypted as TDecrypted);\n    }\n    return pair;\n  }\n}\n\nexport class DataEncryptionPair<TEncrypted, TDecrypted> {\n  encrypted?: { [id: string]: TEncrypted };\n  decrypted?: TDecrypted[];\n}\n\n// This is a temporary structure to handle migrated `DataEncryptionPair` to\n//  avoid needing a data migration at this stage. It should be replaced with\n//  proper data migrations when `DataEncryptionPair` is deprecated.\nexport class TemporaryDataEncryption<TEncrypted> {\n  encrypted?: { [id: string]: TEncrypted };\n}\n\nexport class AccountData {\n  ciphers?: DataEncryptionPair<CipherData, CipherView> = new DataEncryptionPair<\n    CipherData,\n    CipherView\n  >();\n  folders? = new TemporaryDataEncryption<FolderData>();\n  localData?: any;\n  sends?: DataEncryptionPair<SendData, SendView> = new DataEncryptionPair<SendData, SendView>();\n  collections?: DataEncryptionPair<CollectionData, CollectionView> = new DataEncryptionPair<\n    CollectionData,\n    CollectionView\n  >();\n  policies?: DataEncryptionPair<PolicyData, Policy> = new DataEncryptionPair<PolicyData, Policy>();\n  passwordGenerationHistory?: EncryptionPair<\n    GeneratedPasswordHistory[],\n    GeneratedPasswordHistory[]\n  > = new EncryptionPair<GeneratedPasswordHistory[], GeneratedPasswordHistory[]>();\n  addEditCipherInfo?: any;\n  eventCollection?: EventData[];\n  organizations?: { [id: string]: OrganizationData };\n  providers?: { [id: string]: ProviderData };\n}\n\nexport class AccountKeys {\n  userKey?: UserKey;\n  masterKey?: MasterKey;\n  masterKeyEncryptedUserKey?: string;\n  deviceKey?: ReturnType<SymmetricCryptoKey[\"toJSON\"]>;\n  organizationKeys?: EncryptionPair<\n    { [orgId: string]: EncryptedOrganizationKeyData },\n    Record<string, SymmetricCryptoKey>\n  > = new EncryptionPair<\n    { [orgId: string]: EncryptedOrganizationKeyData },\n    Record<string, SymmetricCryptoKey>\n  >();\n  providerKeys?: EncryptionPair<any, Record<string, SymmetricCryptoKey>> = new EncryptionPair<\n    any,\n    Record<string, SymmetricCryptoKey>\n  >();\n  privateKey?: EncryptionPair<string, Uint8Array> = new EncryptionPair<string, Uint8Array>();\n  publicKey?: Uint8Array;\n  apiKeyClientSecret?: string;\n\n  /** @deprecated July 2023, left for migration purposes*/\n  cryptoMasterKey?: SymmetricCryptoKey;\n  /** @deprecated July 2023, left for migration purposes*/\n  cryptoMasterKeyAuto?: string;\n  /** @deprecated July 2023, left for migration purposes*/\n  cryptoMasterKeyBiometric?: string;\n  /** @deprecated July 2023, left for migration purposes*/\n  cryptoSymmetricKey?: EncryptionPair<string, SymmetricCryptoKey> = new EncryptionPair<\n    string,\n    SymmetricCryptoKey\n  >();\n\n  toJSON() {\n    return Utils.merge(this, {\n      publicKey: Utils.fromBufferToByteString(this.publicKey),\n    });\n  }\n\n  static fromJSON(obj: DeepJsonify<AccountKeys>): AccountKeys {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountKeys(), {\n      userKey: SymmetricCryptoKey.fromJSON(obj?.userKey),\n      masterKey: SymmetricCryptoKey.fromJSON(obj?.masterKey),\n      deviceKey: obj?.deviceKey,\n      cryptoMasterKey: SymmetricCryptoKey.fromJSON(obj?.cryptoMasterKey),\n      cryptoSymmetricKey: EncryptionPair.fromJSON(\n        obj?.cryptoSymmetricKey,\n        SymmetricCryptoKey.fromJSON\n      ),\n      organizationKeys: AccountKeys.initRecordEncryptionPairsFromJSON(obj?.organizationKeys),\n      providerKeys: AccountKeys.initRecordEncryptionPairsFromJSON(obj?.providerKeys),\n      privateKey: EncryptionPair.fromJSON<string, Uint8Array>(obj?.privateKey, (decObj: string) =>\n        Utils.fromByteStringToArray(decObj)\n      ),\n      publicKey: Utils.fromByteStringToArray(obj?.publicKey),\n    });\n  }\n\n  static initRecordEncryptionPairsFromJSON(obj: any) {\n    return EncryptionPair.fromJSON(obj, (decObj: any) => {\n      if (obj == null) {\n        return null;\n      }\n\n      const record: Record<string, SymmetricCryptoKey> = {};\n      for (const id in decObj) {\n        record[id] = SymmetricCryptoKey.fromJSON(decObj[id]);\n      }\n      return record;\n    });\n  }\n}\n\nexport class AccountProfile {\n  apiKeyClientId?: string;\n  authenticationStatus?: AuthenticationStatus;\n  convertAccountToKeyConnector?: boolean;\n  name?: string;\n  email?: string;\n  emailVerified?: boolean;\n  entityId?: string;\n  entityType?: string;\n  everHadUserKey?: boolean;\n  everBeenUnlocked?: boolean;\n  forcePasswordResetReason?: ForceResetPasswordReason;\n  hasPremiumPersonally?: boolean;\n  hasPremiumFromOrganization?: boolean;\n  lastSync?: string;\n  userId?: string;\n  usesKeyConnector?: boolean;\n  keyHash?: string;\n  kdfIterations?: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  kdfType?: KdfType;\n\n  static fromJSON(obj: Jsonify<AccountProfile>): AccountProfile {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountProfile(), obj);\n  }\n}\n\nexport class AccountSettings {\n  autoConfirmFingerPrints?: boolean;\n  autoFillOnPageLoadDefault?: boolean;\n  biometricUnlock?: boolean;\n  clearClipboard?: number;\n  collapsedGroupings?: string[];\n  defaultUriMatch?: UriMatchType;\n  disableAddLoginNotification?: boolean;\n  disableAutoBiometricsPrompt?: boolean;\n  disableAutoTotpCopy?: boolean;\n  disableBadgeCounter?: boolean;\n  disableChangedPasswordNotification?: boolean;\n  disableContextMenuItem?: boolean;\n  disableGa?: boolean;\n  dismissedAutoFillOnPageLoadCallout?: boolean;\n  dontShowCardsCurrentTab?: boolean;\n  dontShowIdentitiesCurrentTab?: boolean;\n  enableAlwaysOnTop?: boolean;\n  enableAutoFillOnPageLoad?: boolean;\n  enableBiometric?: boolean;\n  enableFullWidth?: boolean;\n  environmentUrls: EnvironmentUrls = new EnvironmentUrls();\n  equivalentDomains?: any;\n  minimizeOnCopyToClipboard?: boolean;\n  neverDomains?: { [id: string]: any };\n  passwordGenerationOptions?: any;\n  usernameGenerationOptions?: any;\n  generatorOptions?: any;\n  pinKeyEncryptedUserKey?: EncryptedString;\n  pinKeyEncryptedUserKeyEphemeral?: EncryptedString;\n  protectedPin?: string;\n  settings?: AccountSettingsSettings; // TODO: Merge whatever is going on here into the AccountSettings model properly\n  vaultTimeout?: number;\n  vaultTimeoutAction?: string = \"lock\";\n  serverConfig?: ServerConfigData;\n  approveLoginRequests?: boolean;\n  avatarColor?: string;\n  activateAutoFillOnPageLoadFromPolicy?: boolean;\n  region?: string;\n  smOnboardingTasks?: Record<string, Record<string, boolean>>;\n  trustDeviceChoiceForDecryption?: boolean;\n\n  /** @deprecated July 2023, left for migration purposes*/\n  pinProtected?: EncryptionPair<string, EncString> = new EncryptionPair<string, EncString>();\n\n  static fromJSON(obj: Jsonify<AccountSettings>): AccountSettings {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountSettings(), obj, {\n      environmentUrls: EnvironmentUrls.fromJSON(obj?.environmentUrls),\n      pinProtected: EncryptionPair.fromJSON<string, EncString>(\n        obj?.pinProtected,\n        EncString.fromJSON\n      ),\n      serverConfig: ServerConfigData.fromJSON(obj?.serverConfig),\n    });\n  }\n}\n\nexport type AccountSettingsSettings = {\n  equivalentDomains?: string[][];\n};\n\nexport class AccountTokens {\n  accessToken?: string;\n  refreshToken?: string;\n  securityStamp?: string;\n\n  static fromJSON(obj: Jsonify<AccountTokens>): AccountTokens {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountTokens(), obj);\n  }\n}\n\nexport class AccountDecryptionOptions {\n  hasMasterPassword: boolean;\n  trustedDeviceOption?: TrustedDeviceUserDecryptionOption;\n  keyConnectorOption?: KeyConnectorUserDecryptionOption;\n\n  constructor(init?: Partial<AccountDecryptionOptions>) {\n    if (init) {\n      Object.assign(this, init);\n    }\n  }\n\n  // TODO: these nice getters don't work because the Account object is not properly being deserialized out of\n  // JSON (the Account static fromJSON method is not running) so these getters don't exist on the\n  // account decryptions options object when pulled out of state.  This is a bug that needs to be fixed later on\n  // get hasTrustedDeviceOption(): boolean {\n  //   return this.trustedDeviceOption !== null && this.trustedDeviceOption !== undefined;\n  // }\n\n  // get hasKeyConnectorOption(): boolean {\n  //   return this.keyConnectorOption !== null && this.keyConnectorOption !== undefined;\n  // }\n\n  static fromResponse(response: UserDecryptionOptionsResponse): AccountDecryptionOptions {\n    if (response == null) {\n      return null;\n    }\n\n    const accountDecryptionOptions = new AccountDecryptionOptions();\n    accountDecryptionOptions.hasMasterPassword = response.hasMasterPassword;\n\n    if (response.trustedDeviceOption) {\n      accountDecryptionOptions.trustedDeviceOption = new TrustedDeviceUserDecryptionOption(\n        response.trustedDeviceOption.hasAdminApproval,\n        response.trustedDeviceOption.hasLoginApprovingDevice,\n        response.trustedDeviceOption.hasManageResetPasswordPermission\n      );\n    }\n\n    if (response.keyConnectorOption) {\n      accountDecryptionOptions.keyConnectorOption = new KeyConnectorUserDecryptionOption(\n        response.keyConnectorOption.keyConnectorUrl\n      );\n    }\n\n    return accountDecryptionOptions;\n  }\n\n  static fromJSON(obj: Jsonify<AccountDecryptionOptions>): AccountDecryptionOptions {\n    if (obj == null) {\n      return null;\n    }\n\n    const accountDecryptionOptions = Object.assign(new AccountDecryptionOptions(), obj);\n\n    if (obj.trustedDeviceOption) {\n      accountDecryptionOptions.trustedDeviceOption = new TrustedDeviceUserDecryptionOption(\n        obj.trustedDeviceOption.hasAdminApproval,\n        obj.trustedDeviceOption.hasLoginApprovingDevice,\n        obj.trustedDeviceOption.hasManageResetPasswordPermission\n      );\n    }\n\n    if (obj.keyConnectorOption) {\n      accountDecryptionOptions.keyConnectorOption = new KeyConnectorUserDecryptionOption(\n        obj.keyConnectorOption.keyConnectorUrl\n      );\n    }\n\n    return accountDecryptionOptions;\n  }\n}\n\nexport class LoginState {\n  ssoOrganizationIdentifier?: string;\n\n  constructor(init?: Partial<LoginState>) {\n    if (init) {\n      Object.assign(this, init);\n    }\n  }\n\n  static fromJSON(obj: Jsonify<LoginState>): LoginState {\n    if (obj == null) {\n      return null;\n    }\n\n    const loginState = Object.assign(new LoginState(), obj);\n    return loginState;\n  }\n}\n\nexport class Account {\n  data?: AccountData = new AccountData();\n  keys?: AccountKeys = new AccountKeys();\n  profile?: AccountProfile = new AccountProfile();\n  settings?: AccountSettings = new AccountSettings();\n  tokens?: AccountTokens = new AccountTokens();\n  decryptionOptions?: AccountDecryptionOptions = new AccountDecryptionOptions();\n  loginState?: LoginState = new LoginState();\n  adminAuthRequest?: Jsonify<AdminAuthRequestStorable> = null;\n\n  constructor(init: Partial<Account>) {\n    Object.assign(this, {\n      data: {\n        ...new AccountData(),\n        ...init?.data,\n      },\n      keys: {\n        ...new AccountKeys(),\n        ...init?.keys,\n      },\n      profile: {\n        ...new AccountProfile(),\n        ...init?.profile,\n      },\n      settings: {\n        ...new AccountSettings(),\n        ...init?.settings,\n      },\n      tokens: {\n        ...new AccountTokens(),\n        ...init?.tokens,\n      },\n      decryptionOptions: {\n        ...new AccountDecryptionOptions(),\n        ...init?.decryptionOptions,\n      },\n      loginState: {\n        ...new LoginState(),\n        ...init?.loginState,\n      },\n      adminAuthRequest: init?.adminAuthRequest,\n    });\n  }\n\n  static fromJSON(json: Jsonify<Account>): Account {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new Account({}), json, {\n      keys: AccountKeys.fromJSON(json?.keys),\n      profile: AccountProfile.fromJSON(json?.profile),\n      settings: AccountSettings.fromJSON(json?.settings),\n      tokens: AccountTokens.fromJSON(json?.tokens),\n      decryptionOptions: AccountDecryptionOptions.fromJSON(json?.decryptionOptions),\n      loginState: LoginState.fromJSON(json?.loginState),\n      adminAuthRequest: AdminAuthRequestStorable.fromJSON(json?.adminAuthRequest),\n    });\n  }\n}\n","import { Utils } from \"../../../platform/misc/utils\";\nimport { TwoFactorProviderType } from \"../../enums/two-factor-provider-type\";\n\nimport { ForceResetPasswordReason } from \"./force-reset-password-reason\";\n\nexport class AuthResult {\n  captchaSiteKey = \"\";\n  // TODO: PM-3287 - Remove this after 3 releases of backwards compatibility. - Target release 2023.12 for removal\n  /**\n   * @deprecated\n   * Replace with using AccountDecryptionOptions to determine if the user does\n   * not have a master password and is not using Key Connector.\n   * */\n  resetMasterPassword = false;\n\n  forcePasswordReset: ForceResetPasswordReason = ForceResetPasswordReason.None;\n  twoFactorProviders: Map<TwoFactorProviderType, { [key: string]: string }> = null;\n  ssoEmail2FaSessionToken?: string;\n  email: string;\n\n  get requiresCaptcha() {\n    return !Utils.isNullOrWhitespace(this.captchaSiteKey);\n  }\n\n  get requiresTwoFactor() {\n    return this.twoFactorProviders != null;\n  }\n}\n","import { DeviceType } from \"../../../../enums\";\nimport { PlatformUtilsService } from \"../../../../platform/abstractions/platform-utils.service\";\n\nexport class DeviceRequest {\n  type: DeviceType;\n  name: string;\n  identifier: string;\n  pushToken?: string;\n\n  constructor(appId: string, platformUtilsService: PlatformUtilsService) {\n    this.type = platformUtilsService.getDevice();\n    this.name = platformUtilsService.getDeviceString();\n    this.identifier = appId;\n    this.pushToken = null;\n  }\n}\n","import { TwoFactorProviderType } from \"../../../enums/two-factor-provider-type\";\n\nexport class TokenTwoFactorRequest {\n  constructor(\n    public provider: TwoFactorProviderType = null,\n    public token: string = null,\n    public remember: boolean = false\n  ) {}\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class MasterPasswordPolicyResponse extends BaseResponse {\n  minComplexity: number;\n  minLength: number;\n  requireUpper: boolean;\n  requireLower: boolean;\n  requireNumbers: boolean;\n  requireSpecial: boolean;\n\n  /**\n   * Flag to indicate if the policy should be enforced on login.\n   * If true, and the user's password does not meet the policy requirements,\n   * the user will be forced to update their password.\n   */\n  enforceOnLogin: boolean;\n\n  constructor(response: any) {\n    super(response);\n\n    this.minComplexity = this.getResponseProperty(\"MinComplexity\");\n    this.minLength = this.getResponseProperty(\"MinLength\");\n    this.requireUpper = this.getResponseProperty(\"RequireUpper\");\n    this.requireLower = this.getResponseProperty(\"RequireLower\");\n    this.requireNumbers = this.getResponseProperty(\"RequireNumbers\");\n    this.requireSpecial = this.getResponseProperty(\"RequireSpecial\");\n    this.enforceOnLogin = this.getResponseProperty(\"EnforceOnLogin\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport interface IKeyConnectorUserDecryptionOptionServerResponse {\n  KeyConnectorUrl: string;\n}\n\nexport class KeyConnectorUserDecryptionOptionResponse extends BaseResponse {\n  keyConnectorUrl: string;\n\n  constructor(response: IKeyConnectorUserDecryptionOptionServerResponse) {\n    super(response);\n    this.keyConnectorUrl = this.getResponseProperty(\"KeyConnectorUrl\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\nimport { EncString } from \"../../../../platform/models/domain/enc-string\";\n\nexport interface ITrustedDeviceUserDecryptionOptionServerResponse {\n  HasAdminApproval: boolean;\n  HasLoginApprovingDevice: boolean;\n  HasManageResetPasswordPermission: boolean;\n  EncryptedPrivateKey?: string;\n  EncryptedUserKey?: string;\n}\n\nexport class TrustedDeviceUserDecryptionOptionResponse extends BaseResponse {\n  hasAdminApproval: boolean;\n  hasLoginApprovingDevice: boolean;\n  hasManageResetPasswordPermission: boolean;\n  encryptedPrivateKey: EncString;\n  encryptedUserKey: EncString;\n\n  constructor(response: any) {\n    super(response);\n    this.hasAdminApproval = this.getResponseProperty(\"HasAdminApproval\");\n\n    this.hasLoginApprovingDevice = this.getResponseProperty(\"HasLoginApprovingDevice\");\n    this.hasManageResetPasswordPermission = this.getResponseProperty(\n      \"HasManageResetPasswordPermission\"\n    );\n\n    if (response.EncryptedPrivateKey) {\n      this.encryptedPrivateKey = new EncString(this.getResponseProperty(\"EncryptedPrivateKey\"));\n    }\n    if (response.EncryptedUserKey) {\n      this.encryptedUserKey = new EncString(this.getResponseProperty(\"EncryptedUserKey\"));\n    }\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nimport {\n  IKeyConnectorUserDecryptionOptionServerResponse,\n  KeyConnectorUserDecryptionOptionResponse,\n} from \"./key-connector-user-decryption-option.response\";\nimport {\n  ITrustedDeviceUserDecryptionOptionServerResponse,\n  TrustedDeviceUserDecryptionOptionResponse,\n} from \"./trusted-device-user-decryption-option.response\";\n\nexport interface IUserDecryptionOptionsServerResponse {\n  HasMasterPassword: boolean;\n  TrustedDeviceOption?: ITrustedDeviceUserDecryptionOptionServerResponse;\n  KeyConnectorOption?: IKeyConnectorUserDecryptionOptionServerResponse;\n}\n\nexport class UserDecryptionOptionsResponse extends BaseResponse {\n  hasMasterPassword: boolean;\n  trustedDeviceOption?: TrustedDeviceUserDecryptionOptionResponse;\n  keyConnectorOption?: KeyConnectorUserDecryptionOptionResponse;\n\n  constructor(response: IUserDecryptionOptionsServerResponse) {\n    super(response);\n\n    this.hasMasterPassword = this.getResponseProperty(\"HasMasterPassword\");\n\n    if (response.TrustedDeviceOption) {\n      this.trustedDeviceOption = new TrustedDeviceUserDecryptionOptionResponse(\n        this.getResponseProperty(\"TrustedDeviceOption\")\n      );\n    }\n    if (response.KeyConnectorOption) {\n      this.keyConnectorOption = new KeyConnectorUserDecryptionOptionResponse(\n        this.getResponseProperty(\"KeyConnectorOption\")\n      );\n    }\n  }\n}\n","import { KdfType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { MasterPasswordPolicyResponse } from \"./master-password-policy.response\";\nimport { UserDecryptionOptionsResponse } from \"./user-decryption-options/user-decryption-options.response\";\n\nexport class IdentityTokenResponse extends BaseResponse {\n  accessToken: string;\n  expiresIn: number;\n  refreshToken: string;\n  tokenType: string;\n\n  resetMasterPassword: boolean;\n  privateKey: string;\n  key: string;\n  twoFactorToken: string;\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  forcePasswordReset: boolean;\n  masterPasswordPolicy: MasterPasswordPolicyResponse;\n  apiUseKeyConnector: boolean;\n  keyConnectorUrl: string;\n\n  userDecryptionOptions: UserDecryptionOptionsResponse;\n\n  constructor(response: any) {\n    super(response);\n    this.accessToken = response.access_token;\n    this.expiresIn = response.expires_in;\n    this.refreshToken = response.refresh_token;\n    this.tokenType = response.token_type;\n\n    this.resetMasterPassword = this.getResponseProperty(\"ResetMasterPassword\");\n    this.privateKey = this.getResponseProperty(\"PrivateKey\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.twoFactorToken = this.getResponseProperty(\"TwoFactorToken\");\n    this.kdf = this.getResponseProperty(\"Kdf\");\n    this.kdfIterations = this.getResponseProperty(\"KdfIterations\");\n    this.kdfMemory = this.getResponseProperty(\"KdfMemory\");\n    this.kdfParallelism = this.getResponseProperty(\"KdfParallelism\");\n    this.forcePasswordReset = this.getResponseProperty(\"ForcePasswordReset\");\n    this.apiUseKeyConnector = this.getResponseProperty(\"ApiUseKeyConnector\");\n    this.keyConnectorUrl = this.getResponseProperty(\"KeyConnectorUrl\");\n    this.masterPasswordPolicy = new MasterPasswordPolicyResponse(\n      this.getResponseProperty(\"MasterPasswordPolicy\")\n    );\n\n    if (response.UserDecryptionOptions) {\n      this.userDecryptionOptions = new UserDecryptionOptionsResponse(\n        this.getResponseProperty(\"UserDecryptionOptions\")\n      );\n    }\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { TwoFactorProviderType } from \"../../enums/two-factor-provider-type\";\n\nimport { MasterPasswordPolicyResponse } from \"./master-password-policy.response\";\n\nexport class IdentityTwoFactorResponse extends BaseResponse {\n  twoFactorProviders: TwoFactorProviderType[];\n  twoFactorProviders2 = new Map<TwoFactorProviderType, { [key: string]: string }>();\n  captchaToken: string;\n  ssoEmail2faSessionToken: string;\n  email?: string;\n  masterPasswordPolicy?: MasterPasswordPolicyResponse;\n\n  constructor(response: any) {\n    super(response);\n    this.captchaToken = this.getResponseProperty(\"CaptchaBypassToken\");\n    this.twoFactorProviders = this.getResponseProperty(\"TwoFactorProviders\");\n    const twoFactorProviders2 = this.getResponseProperty(\"TwoFactorProviders2\");\n    if (twoFactorProviders2 != null) {\n      for (const prop in twoFactorProviders2) {\n        // eslint-disable-next-line\n        if (twoFactorProviders2.hasOwnProperty(prop)) {\n          this.twoFactorProviders2.set(parseInt(prop, null), twoFactorProviders2[prop]);\n        }\n      }\n    }\n    this.masterPasswordPolicy = new MasterPasswordPolicyResponse(\n      this.getResponseProperty(\"MasterPasswordPolicy\")\n    );\n\n    this.ssoEmail2faSessionToken = this.getResponseProperty(\"SsoEmail2faSessionToken\");\n    this.email = this.getResponseProperty(\"Email\");\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { KeysRequest } from \"../../models/request/keys.request\";\nimport { AppIdService } from \"../../platform/abstractions/app-id.service\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { MessagingService } from \"../../platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport {\n  Account,\n  AccountDecryptionOptions,\n  AccountKeys,\n  AccountProfile,\n  AccountTokens,\n} from \"../../platform/models/domain/account\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { TwoFactorService } from \"../abstractions/two-factor.service\";\nimport { TwoFactorProviderType } from \"../enums/two-factor-provider-type\";\nimport { AuthResult } from \"../models/domain/auth-result\";\nimport { ForceResetPasswordReason } from \"../models/domain/force-reset-password-reason\";\nimport {\n  PasswordlessLogInCredentials,\n  PasswordLogInCredentials,\n  SsoLogInCredentials,\n  UserApiLogInCredentials,\n} from \"../models/domain/log-in-credentials\";\nimport { DeviceRequest } from \"../models/request/identity-token/device.request\";\nimport { PasswordTokenRequest } from \"../models/request/identity-token/password-token.request\";\nimport { SsoTokenRequest } from \"../models/request/identity-token/sso-token.request\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\nimport { UserApiTokenRequest } from \"../models/request/identity-token/user-api-token.request\";\nimport { IdentityCaptchaResponse } from \"../models/response/identity-captcha.response\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\nimport { IdentityTwoFactorResponse } from \"../models/response/identity-two-factor.response\";\n\ntype IdentityResponse = IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse;\n\nexport abstract class LogInStrategy {\n  protected abstract tokenRequest: UserApiTokenRequest | PasswordTokenRequest | SsoTokenRequest;\n  protected captchaBypassToken: string = null;\n\n  constructor(\n    protected cryptoService: CryptoService,\n    protected apiService: ApiService,\n    protected tokenService: TokenService,\n    protected appIdService: AppIdService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected messagingService: MessagingService,\n    protected logService: LogService,\n    protected stateService: StateService,\n    protected twoFactorService: TwoFactorService\n  ) {}\n\n  abstract logIn(\n    credentials:\n      | UserApiLogInCredentials\n      | PasswordLogInCredentials\n      | SsoLogInCredentials\n      | PasswordlessLogInCredentials\n  ): Promise<AuthResult>;\n\n  async logInTwoFactor(\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string = null\n  ): Promise<AuthResult> {\n    this.tokenRequest.setTwoFactor(twoFactor);\n    const [authResult] = await this.startLogIn();\n    return authResult;\n  }\n\n  protected async startLogIn(): Promise<[AuthResult, IdentityResponse]> {\n    this.twoFactorService.clearSelectedProvider();\n\n    const response = await this.apiService.postIdentityToken(this.tokenRequest);\n\n    if (response instanceof IdentityTwoFactorResponse) {\n      return [await this.processTwoFactorResponse(response), response];\n    } else if (response instanceof IdentityCaptchaResponse) {\n      return [await this.processCaptchaResponse(response), response];\n    } else if (response instanceof IdentityTokenResponse) {\n      return [await this.processTokenResponse(response), response];\n    }\n\n    throw new Error(\"Invalid response object.\");\n  }\n\n  protected async buildDeviceRequest() {\n    const appId = await this.appIdService.getAppId();\n    return new DeviceRequest(appId, this.platformUtilsService);\n  }\n\n  protected async buildTwoFactor(userProvidedTwoFactor?: TokenTwoFactorRequest) {\n    if (userProvidedTwoFactor != null) {\n      return userProvidedTwoFactor;\n    }\n\n    const storedTwoFactorToken = await this.tokenService.getTwoFactorToken();\n    if (storedTwoFactorToken != null) {\n      return new TokenTwoFactorRequest(TwoFactorProviderType.Remember, storedTwoFactorToken, false);\n    }\n\n    return new TokenTwoFactorRequest();\n  }\n\n  protected async saveAccountInformation(tokenResponse: IdentityTokenResponse) {\n    const accountInformation = await this.tokenService.decodeToken(tokenResponse.accessToken);\n\n    // Must persist existing device key if it exists for trusted device decryption to work\n    // However, we must provide a user id so that the device key can be retrieved\n    // as the state service won't have an active account at this point in time\n    // even though the data exists in local storage.\n    const userId = accountInformation.sub;\n\n    const deviceKey = await this.stateService.getDeviceKey({ userId });\n    const accountKeys = new AccountKeys();\n    if (deviceKey) {\n      accountKeys.deviceKey = deviceKey;\n    }\n\n    // If you don't persist existing admin auth requests on login, they will get deleted.\n    const adminAuthRequest = await this.stateService.getAdminAuthRequest({ userId });\n\n    await this.stateService.addAccount(\n      new Account({\n        profile: {\n          ...new AccountProfile(),\n          ...{\n            userId,\n            name: accountInformation.name,\n            email: accountInformation.email,\n            hasPremiumPersonally: accountInformation.premium,\n            kdfIterations: tokenResponse.kdfIterations,\n            kdfMemory: tokenResponse.kdfMemory,\n            kdfParallelism: tokenResponse.kdfParallelism,\n            kdfType: tokenResponse.kdf,\n          },\n        },\n        tokens: {\n          ...new AccountTokens(),\n          ...{\n            accessToken: tokenResponse.accessToken,\n            refreshToken: tokenResponse.refreshToken,\n          },\n        },\n        keys: accountKeys,\n        decryptionOptions: AccountDecryptionOptions.fromResponse(\n          tokenResponse.userDecryptionOptions\n        ),\n        adminAuthRequest: adminAuthRequest?.toJSON(),\n      })\n    );\n  }\n\n  protected async processTokenResponse(response: IdentityTokenResponse): Promise<AuthResult> {\n    const result = new AuthResult();\n    result.resetMasterPassword = response.resetMasterPassword;\n\n    if (response.forcePasswordReset) {\n      result.forcePasswordReset = ForceResetPasswordReason.AdminForcePasswordReset;\n    }\n\n    // Must come before setting keys, user key needs email to update additional keys\n    await this.saveAccountInformation(response);\n\n    if (response.twoFactorToken != null) {\n      await this.tokenService.setTwoFactorToken(response);\n    }\n\n    await this.setMasterKey(response);\n\n    await this.setUserKey(response);\n\n    await this.setPrivateKey(response);\n\n    this.messagingService.send(\"loggedIn\");\n\n    return result;\n  }\n\n  // The keys comes from different sources depending on the login strategy\n  protected abstract setMasterKey(response: IdentityTokenResponse): Promise<void>;\n\n  protected abstract setUserKey(response: IdentityTokenResponse): Promise<void>;\n\n  protected abstract setPrivateKey(response: IdentityTokenResponse): Promise<void>;\n\n  protected async createKeyPairForOldAccount() {\n    try {\n      const [publicKey, privateKey] = await this.cryptoService.makeKeyPair();\n      await this.apiService.postAccountKeys(new KeysRequest(publicKey, privateKey.encryptedString));\n      return privateKey.encryptedString;\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  private async processTwoFactorResponse(response: IdentityTwoFactorResponse): Promise<AuthResult> {\n    const result = new AuthResult();\n    result.twoFactorProviders = response.twoFactorProviders2;\n\n    this.twoFactorService.setProviders(response);\n    this.captchaBypassToken = response.captchaToken ?? null;\n    result.ssoEmail2FaSessionToken = response.ssoEmail2faSessionToken;\n    result.email = response.email;\n    return result;\n  }\n\n  private async processCaptchaResponse(response: IdentityCaptchaResponse): Promise<AuthResult> {\n    const result = new AuthResult();\n    result.captchaSiteKey = response.siteKey;\n    return result;\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { PolicyService } from \"../../admin-console/abstractions/policy/policy.service.abstraction\";\nimport { MasterPasswordPolicyOptions } from \"../../admin-console/models/domain/master-password-policy-options\";\nimport { HashPurpose } from \"../../enums\";\nimport { AppIdService } from \"../../platform/abstractions/app-id.service\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { MessagingService } from \"../../platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { MasterKey } from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { PasswordStrengthServiceAbstraction } from \"../../tools/password-strength\";\nimport { AuthService } from \"../abstractions/auth.service\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { TwoFactorService } from \"../abstractions/two-factor.service\";\nimport { AuthResult } from \"../models/domain/auth-result\";\nimport { ForceResetPasswordReason } from \"../models/domain/force-reset-password-reason\";\nimport { PasswordLogInCredentials } from \"../models/domain/log-in-credentials\";\nimport { PasswordTokenRequest } from \"../models/request/identity-token/password-token.request\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\nimport { IdentityCaptchaResponse } from \"../models/response/identity-captcha.response\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\nimport { IdentityTwoFactorResponse } from \"../models/response/identity-two-factor.response\";\n\nimport { LogInStrategy } from \"./login.strategy\";\n\nexport class PasswordLogInStrategy extends LogInStrategy {\n  get email() {\n    return this.tokenRequest.email;\n  }\n\n  get masterPasswordHash() {\n    return this.tokenRequest.masterPasswordHash;\n  }\n\n  tokenRequest: PasswordTokenRequest;\n\n  private localMasterKeyHash: string;\n  private masterKey: MasterKey;\n\n  /**\n   * Options to track if the user needs to update their password due to a password that does not meet an organization's\n   * master password policy.\n   */\n  private forcePasswordResetReason: ForceResetPasswordReason = ForceResetPasswordReason.None;\n\n  constructor(\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    tokenService: TokenService,\n    appIdService: AppIdService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    logService: LogService,\n    protected stateService: StateService,\n    twoFactorService: TwoFactorService,\n    private passwordStrengthService: PasswordStrengthServiceAbstraction,\n    private policyService: PolicyService,\n    private authService: AuthService\n  ) {\n    super(\n      cryptoService,\n      apiService,\n      tokenService,\n      appIdService,\n      platformUtilsService,\n      messagingService,\n      logService,\n      stateService,\n      twoFactorService\n    );\n  }\n\n  override async logInTwoFactor(\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string\n  ): Promise<AuthResult> {\n    this.tokenRequest.captchaResponse = captchaResponse ?? this.captchaBypassToken;\n    const result = await super.logInTwoFactor(twoFactor);\n\n    // 2FA was successful, save the force update password options with the state service if defined\n    if (\n      !result.requiresTwoFactor &&\n      !result.requiresCaptcha &&\n      this.forcePasswordResetReason != ForceResetPasswordReason.None\n    ) {\n      await this.stateService.setForcePasswordResetReason(this.forcePasswordResetReason);\n      result.forcePasswordReset = this.forcePasswordResetReason;\n    }\n\n    return result;\n  }\n\n  override async logIn(credentials: PasswordLogInCredentials) {\n    const { email, masterPassword, captchaToken, twoFactor } = credentials;\n\n    this.masterKey = await this.authService.makePreloginKey(masterPassword, email);\n\n    // Hash the password early (before authentication) so we don't persist it in memory in plaintext\n    this.localMasterKeyHash = await this.cryptoService.hashMasterKey(\n      masterPassword,\n      this.masterKey,\n      HashPurpose.LocalAuthorization\n    );\n    const masterKeyHash = await this.cryptoService.hashMasterKey(masterPassword, this.masterKey);\n\n    this.tokenRequest = new PasswordTokenRequest(\n      email,\n      masterKeyHash,\n      captchaToken,\n      await this.buildTwoFactor(twoFactor),\n      await this.buildDeviceRequest()\n    );\n\n    const [authResult, identityResponse] = await this.startLogIn();\n\n    const masterPasswordPolicyOptions =\n      this.getMasterPasswordPolicyOptionsFromResponse(identityResponse);\n\n    // The identity result can contain master password policies for the user's organizations\n    if (masterPasswordPolicyOptions?.enforceOnLogin) {\n      // If there is a policy active, evaluate the supplied password before its no longer in memory\n      const meetsRequirements = this.evaluateMasterPassword(\n        credentials,\n        masterPasswordPolicyOptions\n      );\n\n      if (!meetsRequirements) {\n        if (authResult.requiresCaptcha || authResult.requiresTwoFactor) {\n          // Save the flag to this strategy for later use as the master password is about to pass out of scope\n          this.forcePasswordResetReason = ForceResetPasswordReason.WeakMasterPassword;\n        } else {\n          // Authentication was successful, save the force update password options with the state service\n          await this.stateService.setForcePasswordResetReason(\n            ForceResetPasswordReason.WeakMasterPassword\n          );\n          authResult.forcePasswordReset = ForceResetPasswordReason.WeakMasterPassword;\n        }\n      }\n    }\n    return authResult;\n  }\n\n  protected override async setMasterKey(response: IdentityTokenResponse) {\n    await this.cryptoService.setMasterKey(this.masterKey);\n    await this.cryptoService.setMasterKeyHash(this.localMasterKeyHash);\n  }\n\n  protected override async setUserKey(response: IdentityTokenResponse): Promise<void> {\n    await this.cryptoService.setMasterKeyEncryptedUserKey(response.key);\n\n    const masterKey = await this.cryptoService.getMasterKey();\n    if (masterKey) {\n      const userKey = await this.cryptoService.decryptUserKeyWithMasterKey(masterKey);\n      await this.cryptoService.setUserKey(userKey);\n    }\n  }\n\n  protected override async setPrivateKey(response: IdentityTokenResponse): Promise<void> {\n    await this.cryptoService.setPrivateKey(\n      response.privateKey ?? (await this.createKeyPairForOldAccount())\n    );\n  }\n\n  private getMasterPasswordPolicyOptionsFromResponse(\n    response: IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse\n  ): MasterPasswordPolicyOptions {\n    if (response == null || response instanceof IdentityCaptchaResponse) {\n      return null;\n    }\n    return MasterPasswordPolicyOptions.fromResponse(response.masterPasswordPolicy);\n  }\n\n  private evaluateMasterPassword(\n    { masterPassword, email }: PasswordLogInCredentials,\n    options: MasterPasswordPolicyOptions\n  ): boolean {\n    const passwordStrength = this.passwordStrengthService.getPasswordStrength(\n      masterPassword,\n      email\n    )?.score;\n\n    return this.policyService.evaluateMasterPassword(passwordStrength, masterPassword, options);\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { AppIdService } from \"../../platform/abstractions/app-id.service\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { MessagingService } from \"../../platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"../abstractions/device-trust-crypto.service.abstraction\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { TwoFactorService } from \"../abstractions/two-factor.service\";\nimport { AuthResult } from \"../models/domain/auth-result\";\nimport { PasswordlessLogInCredentials } from \"../models/domain/log-in-credentials\";\nimport { PasswordTokenRequest } from \"../models/request/identity-token/password-token.request\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nimport { LogInStrategy } from \"./login.strategy\";\n\nexport class PasswordlessLogInStrategy extends LogInStrategy {\n  get email() {\n    return this.tokenRequest.email;\n  }\n\n  get accessCode() {\n    return this.passwordlessCredentials.accessCode;\n  }\n\n  get authRequestId() {\n    return this.passwordlessCredentials.authRequestId;\n  }\n\n  tokenRequest: PasswordTokenRequest;\n  private passwordlessCredentials: PasswordlessLogInCredentials;\n\n  constructor(\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    tokenService: TokenService,\n    appIdService: AppIdService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    logService: LogService,\n    stateService: StateService,\n    twoFactorService: TwoFactorService,\n    private deviceTrustCryptoService: DeviceTrustCryptoServiceAbstraction\n  ) {\n    super(\n      cryptoService,\n      apiService,\n      tokenService,\n      appIdService,\n      platformUtilsService,\n      messagingService,\n      logService,\n      stateService,\n      twoFactorService\n    );\n  }\n\n  override async logIn(credentials: PasswordlessLogInCredentials) {\n    this.passwordlessCredentials = credentials;\n\n    this.tokenRequest = new PasswordTokenRequest(\n      credentials.email,\n      credentials.accessCode,\n      null,\n      await this.buildTwoFactor(credentials.twoFactor),\n      await this.buildDeviceRequest()\n    );\n\n    this.tokenRequest.setPasswordlessAccessCode(credentials.authRequestId);\n    const [authResult] = await this.startLogIn();\n    return authResult;\n  }\n\n  override async logInTwoFactor(\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string\n  ): Promise<AuthResult> {\n    this.tokenRequest.captchaResponse = captchaResponse ?? this.captchaBypassToken;\n    return super.logInTwoFactor(twoFactor);\n  }\n\n  protected override async setMasterKey(response: IdentityTokenResponse) {\n    if (\n      this.passwordlessCredentials.decryptedMasterKey &&\n      this.passwordlessCredentials.decryptedMasterKeyHash\n    ) {\n      await this.cryptoService.setMasterKey(this.passwordlessCredentials.decryptedMasterKey);\n      await this.cryptoService.setMasterKeyHash(\n        this.passwordlessCredentials.decryptedMasterKeyHash\n      );\n    }\n  }\n\n  protected override async setUserKey(response: IdentityTokenResponse): Promise<void> {\n    // User now may or may not have a master password\n    // but set the master key encrypted user key if it exists regardless\n    await this.cryptoService.setMasterKeyEncryptedUserKey(response.key);\n\n    if (this.passwordlessCredentials.decryptedUserKey) {\n      await this.cryptoService.setUserKey(this.passwordlessCredentials.decryptedUserKey);\n    } else {\n      await this.trySetUserKeyWithMasterKey();\n      // Establish trust if required after setting user key\n      await this.deviceTrustCryptoService.trustDeviceIfRequired();\n    }\n  }\n\n  private async trySetUserKeyWithMasterKey(): Promise<void> {\n    const masterKey = await this.cryptoService.getMasterKey();\n    if (masterKey) {\n      const userKey = await this.cryptoService.decryptUserKeyWithMasterKey(masterKey);\n      await this.cryptoService.setUserKey(userKey);\n    }\n  }\n\n  protected override async setPrivateKey(response: IdentityTokenResponse): Promise<void> {\n    await this.cryptoService.setPrivateKey(\n      response.privateKey ?? (await this.createKeyPairForOldAccount())\n    );\n  }\n}\n","import { DeviceRequest } from \"./device.request\";\nimport { TokenTwoFactorRequest } from \"./token-two-factor.request\";\nimport { TokenRequest } from \"./token.request\";\n\nexport class SsoTokenRequest extends TokenRequest {\n  constructor(\n    public code: string,\n    public codeVerifier: string,\n    public redirectUri: string,\n    protected twoFactor: TokenTwoFactorRequest,\n    device?: DeviceRequest\n  ) {\n    super(twoFactor, device);\n  }\n\n  toIdentityToken(clientId: string) {\n    const obj = super.toIdentityToken(clientId);\n\n    obj.grant_type = \"authorization_code\";\n    obj.code = this.code;\n    obj.code_verifier = this.codeVerifier;\n    obj.redirect_uri = this.redirectUri;\n\n    return obj;\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { AuthRequestResponse } from \"../../auth/models/response/auth-request.response\";\nimport { HttpStatusCode } from \"../../enums\";\nimport { ErrorResponse } from \"../../models/response/error.response\";\nimport { AppIdService } from \"../../platform/abstractions/app-id.service\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { I18nService } from \"../../platform/abstractions/i18n.service\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { MessagingService } from \"../../platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { AuthRequestCryptoServiceAbstraction } from \"../abstractions/auth-request-crypto.service.abstraction\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"../abstractions/device-trust-crypto.service.abstraction\";\nimport { KeyConnectorService } from \"../abstractions/key-connector.service\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { TwoFactorService } from \"../abstractions/two-factor.service\";\nimport { SsoLogInCredentials } from \"../models/domain/log-in-credentials\";\nimport { SsoTokenRequest } from \"../models/request/identity-token/sso-token.request\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nimport { LogInStrategy } from \"./login.strategy\";\n\nexport class SsoLogInStrategy extends LogInStrategy {\n  tokenRequest: SsoTokenRequest;\n  orgId: string;\n\n  // A session token server side to serve as an authentication factor for the user\n  // in order to send email OTPs to the user's configured 2FA email address\n  // as we don't have a master password hash or other verifiable secret when using SSO.\n  ssoEmail2FaSessionToken?: string;\n  email?: string; // email not preserved through SSO process so get from server\n\n  constructor(\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    tokenService: TokenService,\n    appIdService: AppIdService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    logService: LogService,\n    stateService: StateService,\n    twoFactorService: TwoFactorService,\n    private keyConnectorService: KeyConnectorService,\n    private deviceTrustCryptoService: DeviceTrustCryptoServiceAbstraction,\n    private authReqCryptoService: AuthRequestCryptoServiceAbstraction,\n    private i18nService: I18nService\n  ) {\n    super(\n      cryptoService,\n      apiService,\n      tokenService,\n      appIdService,\n      platformUtilsService,\n      messagingService,\n      logService,\n      stateService,\n      twoFactorService\n    );\n  }\n\n  async logIn(credentials: SsoLogInCredentials) {\n    this.orgId = credentials.orgId;\n    this.tokenRequest = new SsoTokenRequest(\n      credentials.code,\n      credentials.codeVerifier,\n      credentials.redirectUrl,\n      await this.buildTwoFactor(credentials.twoFactor),\n      await this.buildDeviceRequest()\n    );\n\n    const [ssoAuthResult] = await this.startLogIn();\n\n    this.email = ssoAuthResult.email;\n    this.ssoEmail2FaSessionToken = ssoAuthResult.ssoEmail2FaSessionToken;\n\n    return ssoAuthResult;\n  }\n\n  protected override async setMasterKey(tokenResponse: IdentityTokenResponse) {\n    // TODO: discuss how this is no longer true with TDE\n    // eventually we’ll need to support migration of existing TDE users to Key Connector\n    const newSsoUser = tokenResponse.key == null;\n\n    if (tokenResponse.keyConnectorUrl != null) {\n      if (!newSsoUser) {\n        await this.keyConnectorService.setMasterKeyFromUrl(tokenResponse.keyConnectorUrl);\n      } else {\n        await this.keyConnectorService.convertNewSsoUserToKeyConnector(tokenResponse, this.orgId);\n      }\n    }\n  }\n\n  // TODO: future passkey login strategy will need to support setting user key (decrypting via TDE or admin approval request)\n  // so might be worth moving this logic to a common place (base login strategy or a separate service?)\n  protected override async setUserKey(tokenResponse: IdentityTokenResponse): Promise<void> {\n    const masterKeyEncryptedUserKey = tokenResponse.key;\n\n    // Note: masterKeyEncryptedUserKey is undefined for SSO JIT provisioned users\n    // on account creation and subsequent logins (confirmed or unconfirmed)\n    // but that is fine for TDE so we cannot return if it is undefined\n\n    if (masterKeyEncryptedUserKey) {\n      // set the master key encrypted user key if it exists\n      await this.cryptoService.setMasterKeyEncryptedUserKey(masterKeyEncryptedUserKey);\n    }\n\n    const userDecryptionOptions = tokenResponse?.userDecryptionOptions;\n\n    // Note: TDE and key connector are mutually exclusive\n    if (userDecryptionOptions?.trustedDeviceOption) {\n      await this.trySetUserKeyWithApprovedAdminRequestIfExists();\n\n      const hasUserKey = await this.cryptoService.hasUserKey();\n\n      // Only try to set user key with device key if admin approval request was not successful\n      if (!hasUserKey) {\n        await this.trySetUserKeyWithDeviceKey(tokenResponse);\n      }\n    } else if (\n      // TODO: remove tokenResponse.keyConnectorUrl when it's deprecated\n      masterKeyEncryptedUserKey != null &&\n      (tokenResponse.keyConnectorUrl || userDecryptionOptions?.keyConnectorOption?.keyConnectorUrl)\n    ) {\n      // Key connector enabled for user\n      await this.trySetUserKeyWithMasterKey();\n    }\n\n    // Note: In the traditional SSO flow with MP without key connector, the lock component\n    // is responsible for deriving master key from MP entry and then decrypting the user key\n  }\n\n  private async trySetUserKeyWithApprovedAdminRequestIfExists(): Promise<void> {\n    // At this point a user could have an admin auth request that has been approved\n    const adminAuthReqStorable = await this.stateService.getAdminAuthRequest();\n\n    if (!adminAuthReqStorable) {\n      return;\n    }\n\n    // Call server to see if admin auth request has been approved\n    let adminAuthReqResponse: AuthRequestResponse;\n\n    try {\n      adminAuthReqResponse = await this.apiService.getAuthRequest(adminAuthReqStorable.id);\n    } catch (error) {\n      if (error instanceof ErrorResponse && error.statusCode === HttpStatusCode.NotFound) {\n        // if we get a 404, it means the auth request has been deleted so clear it from storage\n        await this.stateService.setAdminAuthRequest(null);\n      }\n\n      // Always return on an error here as we don't want to block the user from logging in\n      return;\n    }\n\n    if (adminAuthReqResponse?.requestApproved) {\n      // if masterPasswordHash has a value, we will always receive authReqResponse.key\n      // as authRequestPublicKey(masterKey) + authRequestPublicKey(masterPasswordHash)\n      if (adminAuthReqResponse.masterPasswordHash) {\n        await this.authReqCryptoService.setKeysAfterDecryptingSharedMasterKeyAndHash(\n          adminAuthReqResponse,\n          adminAuthReqStorable.privateKey\n        );\n      } else {\n        // if masterPasswordHash is null, we will always receive authReqResponse.key\n        // as authRequestPublicKey(userKey)\n        await this.authReqCryptoService.setUserKeyAfterDecryptingSharedUserKey(\n          adminAuthReqResponse,\n          adminAuthReqStorable.privateKey\n        );\n      }\n\n      if (await this.cryptoService.hasUserKey()) {\n        // Now that we have a decrypted user key in memory, we can check if we\n        // need to establish trust on the current device\n        await this.deviceTrustCryptoService.trustDeviceIfRequired();\n\n        // if we successfully decrypted the user key, we can delete the admin auth request out of state\n        // TODO: eventually we post and clean up DB as well once consumed on client\n        await this.stateService.setAdminAuthRequest(null);\n\n        this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"loginApproved\"));\n      }\n    }\n  }\n\n  private async trySetUserKeyWithDeviceKey(tokenResponse: IdentityTokenResponse): Promise<void> {\n    const trustedDeviceOption = tokenResponse.userDecryptionOptions?.trustedDeviceOption;\n\n    const deviceKey = await this.deviceTrustCryptoService.getDeviceKey();\n    const encDevicePrivateKey = trustedDeviceOption?.encryptedPrivateKey;\n    const encUserKey = trustedDeviceOption?.encryptedUserKey;\n\n    if (!deviceKey || !encDevicePrivateKey || !encUserKey) {\n      return;\n    }\n\n    const userKey = await this.deviceTrustCryptoService.decryptUserKeyWithDeviceKey(\n      encDevicePrivateKey,\n      encUserKey,\n      deviceKey\n    );\n\n    if (userKey) {\n      await this.cryptoService.setUserKey(userKey);\n    }\n  }\n\n  private async trySetUserKeyWithMasterKey(): Promise<void> {\n    const masterKey = await this.cryptoService.getMasterKey();\n\n    if (!masterKey) {\n      throw new Error(\"Master key not found\");\n    }\n\n    const userKey = await this.cryptoService.decryptUserKeyWithMasterKey(masterKey);\n\n    await this.cryptoService.setUserKey(userKey);\n  }\n\n  protected override async setPrivateKey(tokenResponse: IdentityTokenResponse): Promise<void> {\n    const newSsoUser = tokenResponse.key == null;\n\n    if (!newSsoUser) {\n      await this.cryptoService.setPrivateKey(\n        tokenResponse.privateKey ?? (await this.createKeyPairForOldAccount())\n      );\n    }\n  }\n}\n","import { DeviceRequest } from \"./device.request\";\nimport { TokenTwoFactorRequest } from \"./token-two-factor.request\";\nimport { TokenRequest } from \"./token.request\";\n\nexport class UserApiTokenRequest extends TokenRequest {\n  constructor(\n    public clientId: string,\n    public clientSecret: string,\n    protected twoFactor: TokenTwoFactorRequest,\n    device?: DeviceRequest\n  ) {\n    super(twoFactor, device);\n  }\n\n  toIdentityToken() {\n    const obj = super.toIdentityToken(this.clientId);\n\n    obj.scope = this.clientId.startsWith(\"organization\") ? \"api.organization\" : \"api\";\n    obj.grant_type = \"client_credentials\";\n    obj.client_secret = this.clientSecret;\n\n    return obj;\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { TokenService } from \"../../auth/abstractions/token.service\";\nimport { TwoFactorService } from \"../../auth/abstractions/two-factor.service\";\nimport { AppIdService } from \"../../platform/abstractions/app-id.service\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { EnvironmentService } from \"../../platform/abstractions/environment.service\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { MessagingService } from \"../../platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { KeyConnectorService } from \"../abstractions/key-connector.service\";\nimport { UserApiLogInCredentials } from \"../models/domain/log-in-credentials\";\nimport { UserApiTokenRequest } from \"../models/request/identity-token/user-api-token.request\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nimport { LogInStrategy } from \"./login.strategy\";\n\nexport class UserApiLogInStrategy extends LogInStrategy {\n  tokenRequest: UserApiTokenRequest;\n\n  constructor(\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    tokenService: TokenService,\n    appIdService: AppIdService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    logService: LogService,\n    stateService: StateService,\n    twoFactorService: TwoFactorService,\n    private environmentService: EnvironmentService,\n    private keyConnectorService: KeyConnectorService\n  ) {\n    super(\n      cryptoService,\n      apiService,\n      tokenService,\n      appIdService,\n      platformUtilsService,\n      messagingService,\n      logService,\n      stateService,\n      twoFactorService\n    );\n  }\n\n  override async logIn(credentials: UserApiLogInCredentials) {\n    this.tokenRequest = new UserApiTokenRequest(\n      credentials.clientId,\n      credentials.clientSecret,\n      await this.buildTwoFactor(),\n      await this.buildDeviceRequest()\n    );\n\n    const [authResult] = await this.startLogIn();\n    return authResult;\n  }\n\n  protected override async setMasterKey(response: IdentityTokenResponse) {\n    if (response.apiUseKeyConnector) {\n      const keyConnectorUrl = this.environmentService.getKeyConnectorUrl();\n      await this.keyConnectorService.setMasterKeyFromUrl(keyConnectorUrl);\n    }\n  }\n\n  protected override async setUserKey(response: IdentityTokenResponse): Promise<void> {\n    await this.cryptoService.setMasterKeyEncryptedUserKey(response.key);\n\n    if (response.apiUseKeyConnector) {\n      const masterKey = await this.cryptoService.getMasterKey();\n      if (masterKey) {\n        const userKey = await this.cryptoService.decryptUserKeyWithMasterKey(masterKey);\n        await this.cryptoService.setUserKey(userKey);\n      }\n    }\n  }\n\n  protected override async setPrivateKey(response: IdentityTokenResponse): Promise<void> {\n    await this.cryptoService.setPrivateKey(\n      response.privateKey ?? (await this.createKeyPairForOldAccount())\n    );\n  }\n\n  protected async saveAccountInformation(tokenResponse: IdentityTokenResponse) {\n    await super.saveAccountInformation(tokenResponse);\n    await this.stateService.setApiKeyClientId(this.tokenRequest.clientId);\n    await this.stateService.setApiKeyClientSecret(this.tokenRequest.clientSecret);\n  }\n}\n","export class PasswordlessAuthRequest {\n  constructor(\n    readonly key: string,\n    readonly masterPasswordHash: string,\n    readonly deviceIdentifier: string,\n    readonly requestApproved: boolean\n  ) {}\n}\n","import { Observable, Subject } from \"rxjs\";\n\nimport { ApiService } from \"../../abstractions/api.service\";\nimport { PolicyService } from \"../../admin-console/abstractions/policy/policy.service.abstraction\";\nimport { KdfType, KeySuffixOptions } from \"../../enums\";\nimport { PreloginRequest } from \"../../models/request/prelogin.request\";\nimport { ErrorResponse } from \"../../models/response/error.response\";\nimport { AuthRequestPushNotification } from \"../../models/response/notification.response\";\nimport { AppIdService } from \"../../platform/abstractions/app-id.service\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { EncryptService } from \"../../platform/abstractions/encrypt.service\";\nimport { EnvironmentService } from \"../../platform/abstractions/environment.service\";\nimport { I18nService } from \"../../platform/abstractions/i18n.service\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { MessagingService } from \"../../platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport { MasterKey } from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { PasswordStrengthServiceAbstraction } from \"../../tools/password-strength\";\nimport { AuthRequestCryptoServiceAbstraction } from \"../abstractions/auth-request-crypto.service.abstraction\";\nimport { AuthService as AuthServiceAbstraction } from \"../abstractions/auth.service\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"../abstractions/device-trust-crypto.service.abstraction\";\nimport { KeyConnectorService } from \"../abstractions/key-connector.service\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { TwoFactorService } from \"../abstractions/two-factor.service\";\nimport { AuthenticationStatus } from \"../enums/authentication-status\";\nimport { AuthenticationType } from \"../enums/authentication-type\";\nimport { PasswordLogInStrategy } from \"../login-strategies/password-login.strategy\";\nimport { PasswordlessLogInStrategy } from \"../login-strategies/passwordless-login.strategy\";\nimport { SsoLogInStrategy } from \"../login-strategies/sso-login.strategy\";\nimport { UserApiLogInStrategy } from \"../login-strategies/user-api-login.strategy\";\nimport { AuthResult } from \"../models/domain/auth-result\";\nimport { KdfConfig } from \"../models/domain/kdf-config\";\nimport {\n  PasswordlessLogInCredentials,\n  PasswordLogInCredentials,\n  SsoLogInCredentials,\n  UserApiLogInCredentials,\n} from \"../models/domain/log-in-credentials\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\nimport { PasswordlessAuthRequest } from \"../models/request/passwordless-auth.request\";\nimport { AuthRequestResponse } from \"../models/response/auth-request.response\";\n\nconst sessionTimeoutLength = 2 * 60 * 1000; // 2 minutes\n\nexport class AuthService implements AuthServiceAbstraction {\n  get email(): string {\n    if (\n      this.logInStrategy instanceof PasswordLogInStrategy ||\n      this.logInStrategy instanceof PasswordlessLogInStrategy ||\n      this.logInStrategy instanceof SsoLogInStrategy\n    ) {\n      return this.logInStrategy.email;\n    }\n\n    return null;\n  }\n\n  get masterPasswordHash(): string {\n    return this.logInStrategy instanceof PasswordLogInStrategy\n      ? this.logInStrategy.masterPasswordHash\n      : null;\n  }\n\n  get accessCode(): string {\n    return this.logInStrategy instanceof PasswordlessLogInStrategy\n      ? this.logInStrategy.accessCode\n      : null;\n  }\n\n  get authRequestId(): string {\n    return this.logInStrategy instanceof PasswordlessLogInStrategy\n      ? this.logInStrategy.authRequestId\n      : null;\n  }\n\n  get ssoEmail2FaSessionToken(): string {\n    return this.logInStrategy instanceof SsoLogInStrategy\n      ? this.logInStrategy.ssoEmail2FaSessionToken\n      : null;\n  }\n\n  private logInStrategy:\n    | UserApiLogInStrategy\n    | PasswordLogInStrategy\n    | SsoLogInStrategy\n    | PasswordlessLogInStrategy;\n  private sessionTimeout: any;\n\n  private pushNotificationSubject = new Subject<string>();\n\n  constructor(\n    protected cryptoService: CryptoService,\n    protected apiService: ApiService,\n    protected tokenService: TokenService,\n    protected appIdService: AppIdService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected messagingService: MessagingService,\n    protected logService: LogService,\n    protected keyConnectorService: KeyConnectorService,\n    protected environmentService: EnvironmentService,\n    protected stateService: StateService,\n    protected twoFactorService: TwoFactorService,\n    protected i18nService: I18nService,\n    protected encryptService: EncryptService,\n    protected passwordStrengthService: PasswordStrengthServiceAbstraction,\n    protected policyService: PolicyService,\n    protected deviceTrustCryptoService: DeviceTrustCryptoServiceAbstraction,\n    protected authReqCryptoService: AuthRequestCryptoServiceAbstraction\n  ) {}\n\n  async logIn(\n    credentials:\n      | UserApiLogInCredentials\n      | PasswordLogInCredentials\n      | SsoLogInCredentials\n      | PasswordlessLogInCredentials\n  ): Promise<AuthResult> {\n    this.clearState();\n\n    let strategy:\n      | UserApiLogInStrategy\n      | PasswordLogInStrategy\n      | SsoLogInStrategy\n      | PasswordlessLogInStrategy;\n\n    switch (credentials.type) {\n      case AuthenticationType.Password:\n        strategy = new PasswordLogInStrategy(\n          this.cryptoService,\n          this.apiService,\n          this.tokenService,\n          this.appIdService,\n          this.platformUtilsService,\n          this.messagingService,\n          this.logService,\n          this.stateService,\n          this.twoFactorService,\n          this.passwordStrengthService,\n          this.policyService,\n          this\n        );\n        break;\n      case AuthenticationType.Sso:\n        strategy = new SsoLogInStrategy(\n          this.cryptoService,\n          this.apiService,\n          this.tokenService,\n          this.appIdService,\n          this.platformUtilsService,\n          this.messagingService,\n          this.logService,\n          this.stateService,\n          this.twoFactorService,\n          this.keyConnectorService,\n          this.deviceTrustCryptoService,\n          this.authReqCryptoService,\n          this.i18nService\n        );\n        break;\n      case AuthenticationType.UserApi:\n        strategy = new UserApiLogInStrategy(\n          this.cryptoService,\n          this.apiService,\n          this.tokenService,\n          this.appIdService,\n          this.platformUtilsService,\n          this.messagingService,\n          this.logService,\n          this.stateService,\n          this.twoFactorService,\n          this.environmentService,\n          this.keyConnectorService\n        );\n        break;\n      case AuthenticationType.Passwordless:\n        strategy = new PasswordlessLogInStrategy(\n          this.cryptoService,\n          this.apiService,\n          this.tokenService,\n          this.appIdService,\n          this.platformUtilsService,\n          this.messagingService,\n          this.logService,\n          this.stateService,\n          this.twoFactorService,\n          this.deviceTrustCryptoService\n        );\n        break;\n    }\n\n    const result = await strategy.logIn(credentials as any);\n\n    if (result?.requiresTwoFactor) {\n      this.saveState(strategy);\n    }\n    return result;\n  }\n\n  async logInTwoFactor(\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string\n  ): Promise<AuthResult> {\n    if (this.logInStrategy == null) {\n      throw new Error(this.i18nService.t(\"sessionTimeout\"));\n    }\n\n    try {\n      const result = await this.logInStrategy.logInTwoFactor(twoFactor, captchaResponse);\n\n      // Only clear state if 2FA token has been accepted, otherwise we need to be able to try again\n      if (!result.requiresTwoFactor && !result.requiresCaptcha) {\n        this.clearState();\n      }\n      return result;\n    } catch (e) {\n      // API exceptions are okay, but if there are any unhandled client-side errors then clear state to be safe\n      if (!(e instanceof ErrorResponse)) {\n        this.clearState();\n      }\n      throw e;\n    }\n  }\n\n  logOut(callback: () => void) {\n    callback();\n    this.messagingService.send(\"loggedOut\");\n  }\n\n  authingWithUserApiKey(): boolean {\n    return this.logInStrategy instanceof UserApiLogInStrategy;\n  }\n\n  authingWithSso(): boolean {\n    return this.logInStrategy instanceof SsoLogInStrategy;\n  }\n\n  authingWithPassword(): boolean {\n    return this.logInStrategy instanceof PasswordLogInStrategy;\n  }\n\n  authingWithPasswordless(): boolean {\n    return this.logInStrategy instanceof PasswordlessLogInStrategy;\n  }\n\n  async getAuthStatus(userId?: string): Promise<AuthenticationStatus> {\n    // If we don't have an access token or userId, we're logged out\n    const isAuthenticated = await this.stateService.getIsAuthenticated({ userId: userId });\n    if (!isAuthenticated) {\n      return AuthenticationStatus.LoggedOut;\n    }\n\n    // If we don't have a user key in memory, we're locked\n    if (!(await this.cryptoService.hasUserKeyInMemory(userId))) {\n      // Check if the user has vault timeout set to never and verify that\n      // they've never unlocked their vault\n      const neverLock =\n        (await this.cryptoService.hasUserKeyStored(KeySuffixOptions.Auto, userId)) &&\n        !(await this.stateService.getEverBeenUnlocked({ userId: userId }));\n\n      if (neverLock) {\n        // Attempt to get the key from storage and set it in memory\n        const userKey = await this.cryptoService.getUserKeyFromStorage(\n          KeySuffixOptions.Auto,\n          userId\n        );\n        await this.cryptoService.setUserKey(userKey, userId);\n      }\n    }\n\n    // We do another check here in case setting the auto key failed\n    const hasKeyInMemory = await this.cryptoService.hasUserKeyInMemory(userId);\n    if (!hasKeyInMemory) {\n      return AuthenticationStatus.Locked;\n    }\n\n    return AuthenticationStatus.Unlocked;\n  }\n\n  async makePreloginKey(masterPassword: string, email: string): Promise<MasterKey> {\n    email = email.trim().toLowerCase();\n    let kdf: KdfType = null;\n    let kdfConfig: KdfConfig = null;\n    try {\n      const preloginResponse = await this.apiService.postPrelogin(new PreloginRequest(email));\n      if (preloginResponse != null) {\n        kdf = preloginResponse.kdf;\n        kdfConfig = new KdfConfig(\n          preloginResponse.kdfIterations,\n          preloginResponse.kdfMemory,\n          preloginResponse.kdfParallelism\n        );\n      }\n    } catch (e) {\n      if (e == null || e.statusCode !== 404) {\n        throw e;\n      }\n    }\n    return await this.cryptoService.makeMasterKey(masterPassword, email, kdf, kdfConfig);\n  }\n\n  async authResponsePushNotification(notification: AuthRequestPushNotification): Promise<any> {\n    this.pushNotificationSubject.next(notification.id);\n  }\n\n  getPushNotificationObs$(): Observable<any> {\n    return this.pushNotificationSubject.asObservable();\n  }\n\n  async passwordlessLogin(\n    id: string,\n    key: string,\n    requestApproved: boolean\n  ): Promise<AuthRequestResponse> {\n    const pubKey = Utils.fromB64ToArray(key);\n\n    const masterKey = await this.cryptoService.getMasterKey();\n    let keyToEncrypt;\n    let encryptedMasterKeyHash = null;\n\n    if (masterKey) {\n      keyToEncrypt = masterKey.encKey;\n\n      // Only encrypt the master password hash if masterKey exists as\n      // we won't have a masterKeyHash without a masterKey\n      const masterKeyHash = await this.stateService.getKeyHash();\n      if (masterKeyHash != null) {\n        encryptedMasterKeyHash = await this.cryptoService.rsaEncrypt(\n          Utils.fromUtf8ToArray(masterKeyHash),\n          pubKey\n        );\n      }\n    } else {\n      const userKey = await this.cryptoService.getUserKey();\n      keyToEncrypt = userKey.key;\n    }\n\n    const encryptedKey = await this.cryptoService.rsaEncrypt(keyToEncrypt, pubKey);\n\n    const request = new PasswordlessAuthRequest(\n      encryptedKey.encryptedString,\n      encryptedMasterKeyHash?.encryptedString,\n      await this.appIdService.getAppId(),\n      requestApproved\n    );\n    return await this.apiService.putAuthRequest(id, request);\n  }\n\n  private saveState(\n    strategy:\n      | UserApiLogInStrategy\n      | PasswordLogInStrategy\n      | SsoLogInStrategy\n      | PasswordlessLogInStrategy\n  ) {\n    this.logInStrategy = strategy;\n    this.startSessionTimeout();\n  }\n\n  private clearState() {\n    this.logInStrategy = null;\n    this.clearSessionTimeout();\n  }\n\n  private startSessionTimeout() {\n    this.clearSessionTimeout();\n    this.sessionTimeout = setTimeout(() => this.clearState(), sessionTimeoutLength);\n  }\n\n  private clearSessionTimeout() {\n    if (this.sessionTimeout != null) {\n      clearTimeout(this.sessionTimeout);\n    }\n  }\n}\n","export class SecretVerificationRequest {\n  masterPasswordHash: string;\n  otp: string;\n  authRequestAccessCode: string;\n}\n","import { SecretVerificationRequest } from \"./secret-verification.request\";\n\nexport class UpdateDevicesTrustRequest extends SecretVerificationRequest {\n  currentDevice: DeviceKeysUpdateRequest;\n  otherDevices: OtherDeviceKeysUpdateRequest[];\n}\n\nexport class DeviceKeysUpdateRequest {\n  encryptedPublicKey: string;\n  encryptedUserKey: string;\n}\n\nexport class OtherDeviceKeysUpdateRequest extends DeviceKeysUpdateRequest {\n  id: string;\n}\n","import { DeviceResponse } from \"../../abstractions/devices/responses/device.response\";\nimport { AppIdService } from \"../../platform/abstractions/app-id.service\";\nimport { CryptoFunctionService } from \"../../platform/abstractions/crypto-function.service\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { EncryptService } from \"../../platform/abstractions/encrypt.service\";\nimport { I18nService } from \"../../platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { EncString } from \"../../platform/models/domain/enc-string\";\nimport {\n  SymmetricCryptoKey,\n  DeviceKey,\n  UserKey,\n} from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { CsprngArray } from \"../../types/csprng\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"../abstractions/device-trust-crypto.service.abstraction\";\nimport { DevicesApiServiceAbstraction } from \"../abstractions/devices-api.service.abstraction\";\nimport { SecretVerificationRequest } from \"../models/request/secret-verification.request\";\nimport {\n  DeviceKeysUpdateRequest,\n  UpdateDevicesTrustRequest,\n} from \"../models/request/update-devices-trust.request\";\n\nexport class DeviceTrustCryptoService implements DeviceTrustCryptoServiceAbstraction {\n  constructor(\n    private cryptoFunctionService: CryptoFunctionService,\n    private cryptoService: CryptoService,\n    private encryptService: EncryptService,\n    private stateService: StateService,\n    private appIdService: AppIdService,\n    private devicesApiService: DevicesApiServiceAbstraction,\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService\n  ) {}\n\n  /**\n   * @description Retrieves the users choice to trust the device which can only happen after decryption\n   * Note: this value should only be used once and then reset\n   */\n  async getShouldTrustDevice(): Promise<boolean> {\n    return await this.stateService.getShouldTrustDevice();\n  }\n\n  async setShouldTrustDevice(value: boolean): Promise<void> {\n    await this.stateService.setShouldTrustDevice(value);\n  }\n\n  async trustDeviceIfRequired(): Promise<void> {\n    const shouldTrustDevice = await this.getShouldTrustDevice();\n    if (shouldTrustDevice) {\n      await this.trustDevice();\n      // reset the trust choice\n      await this.setShouldTrustDevice(false);\n    }\n  }\n\n  async trustDevice(): Promise<DeviceResponse> {\n    // Attempt to get user key\n    const userKey: UserKey = await this.cryptoService.getUserKey();\n\n    // If user key is not found, throw error\n    if (!userKey) {\n      throw new Error(\"User symmetric key not found\");\n    }\n\n    // Generate deviceKey\n    const deviceKey = await this.makeDeviceKey();\n\n    // Generate asymmetric RSA key pair: devicePrivateKey, devicePublicKey\n    const [devicePublicKey, devicePrivateKey] = await this.cryptoFunctionService.rsaGenerateKeyPair(\n      2048\n    );\n\n    const [\n      devicePublicKeyEncryptedUserKey,\n      userKeyEncryptedDevicePublicKey,\n      deviceKeyEncryptedDevicePrivateKey,\n    ] = await Promise.all([\n      // Encrypt user key with the DevicePublicKey\n      this.cryptoService.rsaEncrypt(userKey.key, devicePublicKey),\n\n      // Encrypt devicePublicKey with user key\n      this.encryptService.encrypt(devicePublicKey, userKey),\n\n      // Encrypt devicePrivateKey with deviceKey\n      this.encryptService.encrypt(devicePrivateKey, deviceKey),\n    ]);\n\n    // Send encrypted keys to server\n    const deviceIdentifier = await this.appIdService.getAppId();\n    const deviceResponse = await this.devicesApiService.updateTrustedDeviceKeys(\n      deviceIdentifier,\n      devicePublicKeyEncryptedUserKey.encryptedString,\n      userKeyEncryptedDevicePublicKey.encryptedString,\n      deviceKeyEncryptedDevicePrivateKey.encryptedString\n    );\n\n    // store device key in local/secure storage if enc keys posted to server successfully\n    await this.setDeviceKey(deviceKey);\n\n    this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"deviceTrusted\"));\n\n    return deviceResponse;\n  }\n\n  async rotateDevicesTrust(newUserKey: UserKey, masterPasswordHash: string): Promise<void> {\n    const currentDeviceKey = await this.getDeviceKey();\n    if (currentDeviceKey == null) {\n      // If the current device doesn't have a device key available to it, then we can't\n      // rotate any trust at all, so early return.\n      return;\n    }\n\n    // At this point of rotating their keys, they should still have their old user key in state\n    const oldUserKey = await this.stateService.getUserKey();\n\n    const deviceIdentifier = await this.appIdService.getAppId();\n    const secretVerificationRequest = new SecretVerificationRequest();\n    secretVerificationRequest.masterPasswordHash = masterPasswordHash;\n\n    // Get the keys that are used in rotating a devices keys from the server\n    const currentDeviceKeys = await this.devicesApiService.getDeviceKeys(\n      deviceIdentifier,\n      secretVerificationRequest\n    );\n\n    // Decrypt the existing device public key with the old user key\n    const decryptedDevicePublicKey = await this.encryptService.decryptToBytes(\n      currentDeviceKeys.encryptedPublicKey,\n      oldUserKey\n    );\n\n    // Encrypt the brand new user key with the now-decrypted public key for the device\n    const encryptedNewUserKey = await this.cryptoService.rsaEncrypt(\n      newUserKey.key,\n      decryptedDevicePublicKey\n    );\n\n    // Re-encrypt the device public key with the new user key\n    const encryptedDevicePublicKey = await this.encryptService.encrypt(\n      decryptedDevicePublicKey,\n      newUserKey\n    );\n\n    const currentDeviceUpdateRequest = new DeviceKeysUpdateRequest();\n    currentDeviceUpdateRequest.encryptedUserKey = encryptedNewUserKey.encryptedString;\n    currentDeviceUpdateRequest.encryptedPublicKey = encryptedDevicePublicKey.encryptedString;\n\n    // TODO: For device management, allow this method to take an array of device ids that can be looped over and individually rotated\n    // then it can be added to trustRequest.otherDevices.\n\n    const trustRequest = new UpdateDevicesTrustRequest();\n    trustRequest.masterPasswordHash = masterPasswordHash;\n    trustRequest.currentDevice = currentDeviceUpdateRequest;\n    trustRequest.otherDevices = [];\n\n    await this.devicesApiService.updateTrust(trustRequest);\n  }\n\n  async getDeviceKey(): Promise<DeviceKey> {\n    return await this.stateService.getDeviceKey();\n  }\n\n  private async setDeviceKey(deviceKey: DeviceKey | null): Promise<void> {\n    await this.stateService.setDeviceKey(deviceKey);\n  }\n\n  private async makeDeviceKey(): Promise<DeviceKey> {\n    // Create 512-bit device key\n    const randomBytes: CsprngArray = await this.cryptoFunctionService.randomBytes(64);\n    const deviceKey = new SymmetricCryptoKey(randomBytes) as DeviceKey;\n\n    return deviceKey;\n  }\n\n  async decryptUserKeyWithDeviceKey(\n    encryptedDevicePrivateKey: EncString,\n    encryptedUserKey: EncString,\n    deviceKey?: DeviceKey\n  ): Promise<UserKey | null> {\n    // If device key provided use it, otherwise try to retrieve from storage\n    deviceKey ||= await this.getDeviceKey();\n\n    if (!deviceKey) {\n      // User doesn't have a device key anymore so device is untrusted\n      return null;\n    }\n\n    try {\n      // attempt to decrypt encryptedDevicePrivateKey with device key\n      const devicePrivateKey = await this.encryptService.decryptToBytes(\n        encryptedDevicePrivateKey,\n        deviceKey\n      );\n\n      // Attempt to decrypt encryptedUserDataKey with devicePrivateKey\n      const userKey = await this.cryptoService.rsaDecrypt(\n        encryptedUserKey.encryptedString,\n        devicePrivateKey\n      );\n\n      return new SymmetricCryptoKey(userKey) as UserKey;\n    } catch (e) {\n      // If either decryption effort fails, we want to remove the device key\n      await this.setDeviceKey(null);\n\n      return null;\n    }\n  }\n\n  async supportsDeviceTrust(): Promise<boolean> {\n    const decryptionOptions = await this.stateService.getAccountDecryptionOptions();\n    return decryptionOptions?.trustedDeviceOption != null;\n  }\n}\n","import { DeviceType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class DeviceResponse extends BaseResponse {\n  id: string;\n  userId: string;\n  name: string;\n  identifier: string;\n  type: DeviceType;\n  creationDate: string;\n  revisionDate: string;\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.identifier = this.getResponseProperty(\"Identifier\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n  }\n}\n","export class TrustedDeviceKeysRequest {\n  constructor(\n    public encryptedUserKey: string,\n    public encryptedPublicKey: string,\n    public encryptedPrivateKey: string\n  ) {}\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { DeviceType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\n\nexport class ProtectedDeviceResponse extends BaseResponse {\n  constructor(response: Jsonify<ProtectedDeviceResponse>) {\n    super(response);\n    this.id = this.getResponseProperty(\"id\");\n    this.name = this.getResponseProperty(\"name\");\n    this.identifier = this.getResponseProperty(\"identifier\");\n    this.type = this.getResponseProperty(\"type\");\n    this.creationDate = new Date(this.getResponseProperty(\"creationDate\"));\n    if (response.encryptedUserKey) {\n      this.encryptedUserKey = new EncString(this.getResponseProperty(\"encryptedUserKey\"));\n    }\n    if (response.encryptedPublicKey) {\n      this.encryptedPublicKey = new EncString(this.getResponseProperty(\"encryptedPublicKey\"));\n    }\n  }\n\n  id: string;\n  name: string;\n  type: DeviceType;\n  identifier: string;\n  creationDate: Date;\n  /**\n   * Intended to be the users symmetric key that is encrypted in some form, the current way to encrypt this is with\n   * the devices public key.\n   */\n  encryptedUserKey: EncString;\n  /**\n   * Intended to be the public key that was generated for a device upon trust and encrypted. Currenly encrypted using\n   * a users symmetric key so that when trusted and unlocked a user can decrypt the public key for all their devices.\n   * This enabled a user to rotate the keys for all of their devices.\n   */\n  encryptedPublicKey: EncString;\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { DeviceResponse } from \"../../abstractions/devices/responses/device.response\";\nimport { ListResponse } from \"../../models/response/list.response\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport { TrustedDeviceKeysRequest } from \"../../services/devices/requests/trusted-device-keys.request\";\nimport { DevicesApiServiceAbstraction } from \"../abstractions/devices-api.service.abstraction\";\nimport { SecretVerificationRequest } from \"../models/request/secret-verification.request\";\nimport { UpdateDevicesTrustRequest } from \"../models/request/update-devices-trust.request\";\nimport { ProtectedDeviceResponse } from \"../models/response/protected-device.response\";\n\nexport class DevicesApiServiceImplementation implements DevicesApiServiceAbstraction {\n  constructor(private apiService: ApiService) {}\n\n  async getKnownDevice(email: string, deviceIdentifier: string): Promise<boolean> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/devices/knowndevice\",\n      null,\n      false,\n      true,\n      null,\n      (headers) => {\n        headers.set(\"X-Device-Identifier\", deviceIdentifier);\n        headers.set(\"X-Request-Email\", Utils.fromUtf8ToUrlB64(email));\n      }\n    );\n    return r as boolean;\n  }\n\n  /**\n   * Get device by identifier\n   * @param deviceIdentifier - client generated id (not device id in DB)\n   */\n  async getDeviceByIdentifier(deviceIdentifier: string): Promise<DeviceResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      `/devices/identifier/${deviceIdentifier}`,\n      null,\n      true,\n      true\n    );\n    return new DeviceResponse(r);\n  }\n\n  async getDevices(): Promise<ListResponse<DeviceResponse>> {\n    const r = await this.apiService.send(\"GET\", \"/devices\", null, true, true, null);\n    return new ListResponse(r, DeviceResponse);\n  }\n\n  async updateTrustedDeviceKeys(\n    deviceIdentifier: string,\n    devicePublicKeyEncryptedUserKey: string,\n    userKeyEncryptedDevicePublicKey: string,\n    deviceKeyEncryptedDevicePrivateKey: string\n  ): Promise<DeviceResponse> {\n    const request = new TrustedDeviceKeysRequest(\n      devicePublicKeyEncryptedUserKey,\n      userKeyEncryptedDevicePublicKey,\n      deviceKeyEncryptedDevicePrivateKey\n    );\n\n    const result = await this.apiService.send(\n      \"PUT\",\n      `/devices/${deviceIdentifier}/keys`,\n      request,\n      true,\n      true\n    );\n\n    return new DeviceResponse(result);\n  }\n\n  async updateTrust(updateDevicesTrustRequestModel: UpdateDevicesTrustRequest): Promise<void> {\n    await this.apiService.send(\n      \"POST\",\n      \"/devices/update-trust\",\n      updateDevicesTrustRequestModel,\n      true,\n      false\n    );\n  }\n\n  async getDeviceKeys(\n    deviceIdentifier: string,\n    secretVerificationRequest: SecretVerificationRequest\n  ): Promise<ProtectedDeviceResponse> {\n    const result = await this.apiService.send(\n      \"POST\",\n      `/devices/${deviceIdentifier}/retrieve-keys`,\n      secretVerificationRequest,\n      true,\n      true\n    );\n    return new ProtectedDeviceResponse(result);\n  }\n}\n","export class KeyConnectorUserKeyRequest {\n  key: string;\n\n  constructor(key: string) {\n    this.key = key;\n  }\n}\n","import { KdfType } from \"../../../enums\";\nimport { KeysRequest } from \"../../../models/request/keys.request\";\nimport { KdfConfig } from \"../domain/kdf-config\";\n\nexport class SetKeyConnectorKeyRequest {\n  key: string;\n  keys: KeysRequest;\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  orgIdentifier: string;\n\n  constructor(\n    key: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    orgIdentifier: string,\n    keys: KeysRequest\n  ) {\n    this.key = key;\n    this.kdf = kdf;\n    this.kdfIterations = kdfConfig.iterations;\n    this.kdfMemory = kdfConfig.memory;\n    this.kdfParallelism = kdfConfig.parallelism;\n    this.orgIdentifier = orgIdentifier;\n    this.keys = keys;\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { OrganizationService } from \"../../admin-console/abstractions/organization/organization.service.abstraction\";\nimport { OrganizationUserType } from \"../../admin-console/enums\";\nimport { KeysRequest } from \"../../models/request/keys.request\";\nimport { CryptoFunctionService } from \"../../platform/abstractions/crypto-function.service\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport { MasterKey, SymmetricCryptoKey } from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { KeyConnectorService as KeyConnectorServiceAbstraction } from \"../abstractions/key-connector.service\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { KdfConfig } from \"../models/domain/kdf-config\";\nimport { KeyConnectorUserKeyRequest } from \"../models/request/key-connector-user-key.request\";\nimport { SetKeyConnectorKeyRequest } from \"../models/request/set-key-connector-key.request\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nexport class KeyConnectorService implements KeyConnectorServiceAbstraction {\n  constructor(\n    private stateService: StateService,\n    private cryptoService: CryptoService,\n    private apiService: ApiService,\n    private tokenService: TokenService,\n    private logService: LogService,\n    private organizationService: OrganizationService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private logoutCallback: (expired: boolean, userId?: string) => void\n  ) {}\n\n  setUsesKeyConnector(usesKeyConnector: boolean) {\n    return this.stateService.setUsesKeyConnector(usesKeyConnector);\n  }\n\n  async getUsesKeyConnector(): Promise<boolean> {\n    return await this.stateService.getUsesKeyConnector();\n  }\n\n  async userNeedsMigration() {\n    const loggedInUsingSso = await this.tokenService.getIsExternal();\n    const requiredByOrganization = (await this.getManagingOrganization()) != null;\n    const userIsNotUsingKeyConnector = !(await this.getUsesKeyConnector());\n\n    return loggedInUsingSso && requiredByOrganization && userIsNotUsingKeyConnector;\n  }\n\n  async migrateUser() {\n    const organization = await this.getManagingOrganization();\n    const masterKey = await this.cryptoService.getMasterKey();\n    const keyConnectorRequest = new KeyConnectorUserKeyRequest(masterKey.encKeyB64);\n\n    try {\n      await this.apiService.postUserKeyToKeyConnector(\n        organization.keyConnectorUrl,\n        keyConnectorRequest\n      );\n    } catch (e) {\n      this.handleKeyConnectorError(e);\n    }\n\n    await this.apiService.postConvertToKeyConnector();\n  }\n\n  // TODO: UserKey should be renamed to MasterKey and typed accordingly\n  async setMasterKeyFromUrl(url: string) {\n    try {\n      const masterKeyResponse = await this.apiService.getMasterKeyFromKeyConnector(url);\n      const keyArr = Utils.fromB64ToArray(masterKeyResponse.key);\n      const masterKey = new SymmetricCryptoKey(keyArr) as MasterKey;\n      await this.cryptoService.setMasterKey(masterKey);\n    } catch (e) {\n      this.handleKeyConnectorError(e);\n    }\n  }\n\n  async getManagingOrganization() {\n    const orgs = await this.organizationService.getAll();\n    return orgs.find(\n      (o) =>\n        o.keyConnectorEnabled &&\n        o.type !== OrganizationUserType.Admin &&\n        o.type !== OrganizationUserType.Owner &&\n        !o.isProviderUser\n    );\n  }\n\n  async convertNewSsoUserToKeyConnector(tokenResponse: IdentityTokenResponse, orgId: string) {\n    const { kdf, kdfIterations, kdfMemory, kdfParallelism, keyConnectorUrl } = tokenResponse;\n    const password = await this.cryptoFunctionService.randomBytes(64);\n    const kdfConfig = new KdfConfig(kdfIterations, kdfMemory, kdfParallelism);\n\n    const masterKey = await this.cryptoService.makeMasterKey(\n      Utils.fromBufferToB64(password),\n      await this.tokenService.getEmail(),\n      kdf,\n      kdfConfig\n    );\n    const keyConnectorRequest = new KeyConnectorUserKeyRequest(masterKey.encKeyB64);\n    await this.cryptoService.setMasterKey(masterKey);\n\n    const userKey = await this.cryptoService.makeUserKey(masterKey);\n    await this.cryptoService.setUserKey(userKey[0]);\n    await this.cryptoService.setMasterKeyEncryptedUserKey(userKey[1].encryptedString);\n\n    const [pubKey, privKey] = await this.cryptoService.makeKeyPair();\n\n    try {\n      await this.apiService.postUserKeyToKeyConnector(keyConnectorUrl, keyConnectorRequest);\n    } catch (e) {\n      this.handleKeyConnectorError(e);\n    }\n\n    const keys = new KeysRequest(pubKey, privKey.encryptedString);\n    const setPasswordRequest = new SetKeyConnectorKeyRequest(\n      userKey[1].encryptedString,\n      kdf,\n      kdfConfig,\n      orgId,\n      keys\n    );\n    await this.apiService.postSetKeyConnectorKey(setPasswordRequest);\n  }\n\n  async setConvertAccountRequired(status: boolean) {\n    await this.stateService.setConvertAccountToKeyConnector(status);\n  }\n\n  async getConvertAccountRequired(): Promise<boolean> {\n    return await this.stateService.getConvertAccountToKeyConnector();\n  }\n\n  async removeConvertAccountRequired() {\n    await this.stateService.setConvertAccountToKeyConnector(null);\n  }\n\n  async clear() {\n    await this.removeConvertAccountRequired();\n  }\n\n  private handleKeyConnectorError(e: any) {\n    this.logService.error(e);\n    if (this.logoutCallback != null) {\n      this.logoutCallback(false);\n    }\n    throw new Error(\"Key Connector error\");\n  }\n}\n","import { StateService } from \"../../platform/abstractions/state.service\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport { TokenService as TokenServiceAbstraction } from \"../abstractions/token.service\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nexport class TokenService implements TokenServiceAbstraction {\n  static decodeToken(token: string): Promise<any> {\n    if (token == null) {\n      throw new Error(\"Token not provided.\");\n    }\n\n    const parts = token.split(\".\");\n    if (parts.length !== 3) {\n      throw new Error(\"JWT must have 3 parts\");\n    }\n\n    const decoded = Utils.fromUrlB64ToUtf8(parts[1]);\n    if (decoded == null) {\n      throw new Error(\"Cannot decode the token\");\n    }\n\n    const decodedToken = JSON.parse(decoded);\n    return decodedToken;\n  }\n\n  constructor(private stateService: StateService) {}\n\n  async setTokens(\n    accessToken: string,\n    refreshToken: string,\n    clientIdClientSecret: [string, string]\n  ): Promise<any> {\n    await this.setToken(accessToken);\n    await this.setRefreshToken(refreshToken);\n    if (clientIdClientSecret != null) {\n      await this.setClientId(clientIdClientSecret[0]);\n      await this.setClientSecret(clientIdClientSecret[1]);\n    }\n  }\n\n  async setClientId(clientId: string): Promise<any> {\n    return await this.stateService.setApiKeyClientId(clientId);\n  }\n\n  async getClientId(): Promise<string> {\n    return await this.stateService.getApiKeyClientId();\n  }\n\n  async setClientSecret(clientSecret: string): Promise<any> {\n    return await this.stateService.setApiKeyClientSecret(clientSecret);\n  }\n\n  async getClientSecret(): Promise<string> {\n    return await this.stateService.getApiKeyClientSecret();\n  }\n\n  async setToken(token: string): Promise<void> {\n    await this.stateService.setAccessToken(token);\n  }\n\n  async getToken(): Promise<string> {\n    return await this.stateService.getAccessToken();\n  }\n\n  async setRefreshToken(refreshToken: string): Promise<any> {\n    return await this.stateService.setRefreshToken(refreshToken);\n  }\n\n  async getRefreshToken(): Promise<string> {\n    return await this.stateService.getRefreshToken();\n  }\n\n  async setTwoFactorToken(tokenResponse: IdentityTokenResponse): Promise<any> {\n    return await this.stateService.setTwoFactorToken(tokenResponse.twoFactorToken);\n  }\n\n  async getTwoFactorToken(): Promise<string> {\n    return await this.stateService.getTwoFactorToken();\n  }\n\n  async clearTwoFactorToken(): Promise<any> {\n    return await this.stateService.setTwoFactorToken(null);\n  }\n\n  async clearToken(userId?: string): Promise<any> {\n    await this.stateService.setAccessToken(null, { userId: userId });\n    await this.stateService.setRefreshToken(null, { userId: userId });\n    await this.stateService.setApiKeyClientId(null, { userId: userId });\n    await this.stateService.setApiKeyClientSecret(null, { userId: userId });\n  }\n\n  // jwthelper methods\n  // ref https://github.com/auth0/angular-jwt/blob/master/src/angularJwt/services/jwt.js\n\n  async decodeToken(token?: string): Promise<any> {\n    token = token ?? (await this.stateService.getAccessToken());\n\n    if (token == null) {\n      throw new Error(\"Token not found.\");\n    }\n\n    return TokenService.decodeToken(token);\n  }\n\n  async getTokenExpirationDate(): Promise<Date> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.exp === \"undefined\") {\n      return null;\n    }\n\n    const d = new Date(0); // The 0 here is the key, which sets the date to the epoch\n    d.setUTCSeconds(decoded.exp);\n    return d;\n  }\n\n  async tokenSecondsRemaining(offsetSeconds = 0): Promise<number> {\n    const d = await this.getTokenExpirationDate();\n    if (d == null) {\n      return 0;\n    }\n\n    const msRemaining = d.valueOf() - (new Date().valueOf() + offsetSeconds * 1000);\n    return Math.round(msRemaining / 1000);\n  }\n\n  async tokenNeedsRefresh(minutes = 5): Promise<boolean> {\n    const sRemaining = await this.tokenSecondsRemaining();\n    return sRemaining < 60 * minutes;\n  }\n\n  async getUserId(): Promise<string> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.sub === \"undefined\") {\n      throw new Error(\"No user id found\");\n    }\n\n    return decoded.sub as string;\n  }\n\n  async getEmail(): Promise<string> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.email === \"undefined\") {\n      throw new Error(\"No email found\");\n    }\n\n    return decoded.email as string;\n  }\n\n  async getEmailVerified(): Promise<boolean> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.email_verified === \"undefined\") {\n      throw new Error(\"No email verification found\");\n    }\n\n    return decoded.email_verified as boolean;\n  }\n\n  async getName(): Promise<string> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.name === \"undefined\") {\n      return null;\n    }\n\n    return decoded.name as string;\n  }\n\n  async getIssuer(): Promise<string> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.iss === \"undefined\") {\n      throw new Error(\"No issuer found\");\n    }\n\n    return decoded.iss as string;\n  }\n\n  async getIsExternal(): Promise<boolean> {\n    const decoded = await this.decodeToken();\n\n    return Array.isArray(decoded.amr) && decoded.amr.includes(\"external\");\n  }\n}\n","import { I18nService } from \"../../platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport {\n  TwoFactorProviderDetails,\n  TwoFactorService as TwoFactorServiceAbstraction,\n} from \"../abstractions/two-factor.service\";\nimport { TwoFactorProviderType } from \"../enums/two-factor-provider-type\";\nimport { IdentityTwoFactorResponse } from \"../models/response/identity-two-factor.response\";\n\nexport const TwoFactorProviders: Partial<Record<TwoFactorProviderType, TwoFactorProviderDetails>> =\n  {\n    [TwoFactorProviderType.Authenticator]: {\n      type: TwoFactorProviderType.Authenticator,\n      name: null as string,\n      description: null as string,\n      priority: 1,\n      sort: 1,\n      premium: false,\n    },\n    [TwoFactorProviderType.Yubikey]: {\n      type: TwoFactorProviderType.Yubikey,\n      name: null as string,\n      description: null as string,\n      priority: 3,\n      sort: 2,\n      premium: true,\n    },\n    [TwoFactorProviderType.Duo]: {\n      type: TwoFactorProviderType.Duo,\n      name: \"Duo\",\n      description: null as string,\n      priority: 2,\n      sort: 3,\n      premium: true,\n    },\n    [TwoFactorProviderType.OrganizationDuo]: {\n      type: TwoFactorProviderType.OrganizationDuo,\n      name: \"Duo (Organization)\",\n      description: null as string,\n      priority: 10,\n      sort: 4,\n      premium: false,\n    },\n    [TwoFactorProviderType.Email]: {\n      type: TwoFactorProviderType.Email,\n      name: null as string,\n      description: null as string,\n      priority: 0,\n      sort: 6,\n      premium: false,\n    },\n    [TwoFactorProviderType.WebAuthn]: {\n      type: TwoFactorProviderType.WebAuthn,\n      name: null as string,\n      description: null as string,\n      priority: 4,\n      sort: 5,\n      premium: true,\n    },\n  };\n\nexport class TwoFactorService implements TwoFactorServiceAbstraction {\n  private twoFactorProvidersData: Map<TwoFactorProviderType, { [key: string]: string }>;\n  private selectedTwoFactorProviderType: TwoFactorProviderType = null;\n\n  constructor(\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService\n  ) {}\n\n  init() {\n    TwoFactorProviders[TwoFactorProviderType.Email].name = this.i18nService.t(\"emailTitle\");\n    TwoFactorProviders[TwoFactorProviderType.Email].description = this.i18nService.t(\"emailDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.Authenticator].name =\n      this.i18nService.t(\"authenticatorAppTitle\");\n    TwoFactorProviders[TwoFactorProviderType.Authenticator].description =\n      this.i18nService.t(\"authenticatorAppDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.Duo].description = this.i18nService.t(\"duoDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.OrganizationDuo].name =\n      \"Duo (\" + this.i18nService.t(\"organization\") + \")\";\n    TwoFactorProviders[TwoFactorProviderType.OrganizationDuo].description =\n      this.i18nService.t(\"duoOrganizationDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.WebAuthn].name = this.i18nService.t(\"webAuthnTitle\");\n    TwoFactorProviders[TwoFactorProviderType.WebAuthn].description =\n      this.i18nService.t(\"webAuthnDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.Yubikey].name = this.i18nService.t(\"yubiKeyTitle\");\n    TwoFactorProviders[TwoFactorProviderType.Yubikey].description =\n      this.i18nService.t(\"yubiKeyDesc\");\n  }\n\n  getSupportedProviders(win: Window): TwoFactorProviderDetails[] {\n    const providers: any[] = [];\n    if (this.twoFactorProvidersData == null) {\n      return providers;\n    }\n\n    if (\n      this.twoFactorProvidersData.has(TwoFactorProviderType.OrganizationDuo) &&\n      this.platformUtilsService.supportsDuo()\n    ) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.OrganizationDuo]);\n    }\n\n    if (this.twoFactorProvidersData.has(TwoFactorProviderType.Authenticator)) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.Authenticator]);\n    }\n\n    if (this.twoFactorProvidersData.has(TwoFactorProviderType.Yubikey)) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.Yubikey]);\n    }\n\n    if (\n      this.twoFactorProvidersData.has(TwoFactorProviderType.Duo) &&\n      this.platformUtilsService.supportsDuo()\n    ) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.Duo]);\n    }\n\n    if (\n      this.twoFactorProvidersData.has(TwoFactorProviderType.WebAuthn) &&\n      this.platformUtilsService.supportsWebAuthn(win)\n    ) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.WebAuthn]);\n    }\n\n    if (this.twoFactorProvidersData.has(TwoFactorProviderType.Email)) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.Email]);\n    }\n\n    return providers;\n  }\n\n  getDefaultProvider(webAuthnSupported: boolean): TwoFactorProviderType {\n    if (this.twoFactorProvidersData == null) {\n      return null;\n    }\n\n    if (\n      this.selectedTwoFactorProviderType != null &&\n      this.twoFactorProvidersData.has(this.selectedTwoFactorProviderType)\n    ) {\n      return this.selectedTwoFactorProviderType;\n    }\n\n    let providerType: TwoFactorProviderType = null;\n    let providerPriority = -1;\n    this.twoFactorProvidersData.forEach((_value, type) => {\n      const provider = (TwoFactorProviders as any)[type];\n      if (provider != null && provider.priority > providerPriority) {\n        if (type === TwoFactorProviderType.WebAuthn && !webAuthnSupported) {\n          return;\n        }\n\n        providerType = type;\n        providerPriority = provider.priority;\n      }\n    });\n\n    return providerType;\n  }\n\n  setSelectedProvider(type: TwoFactorProviderType) {\n    this.selectedTwoFactorProviderType = type;\n  }\n\n  clearSelectedProvider() {\n    this.selectedTwoFactorProviderType = null;\n  }\n\n  setProviders(response: IdentityTwoFactorResponse) {\n    this.twoFactorProvidersData = response.twoFactorProviders2;\n  }\n\n  clearProviders() {\n    this.twoFactorProvidersData = null;\n  }\n\n  getProviders() {\n    return this.twoFactorProvidersData;\n  }\n}\n","export enum VerificationType {\n  MasterPassword = 0,\n  OTP = 1,\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { UserVerificationApiServiceAbstraction } from \"../../abstractions/user-verification/user-verification-api.service.abstraction\";\nimport { VerifyOTPRequest } from \"../../models/request/verify-otp.request\";\n\nexport class UserVerificationApiService implements UserVerificationApiServiceAbstraction {\n  constructor(private apiService: ApiService) {}\n\n  postAccountVerifyOTP(request: VerifyOTPRequest): Promise<void> {\n    return this.apiService.send(\"POST\", \"/accounts/verify-otp\", request, true, false);\n  }\n  async postAccountRequestOTP(): Promise<void> {\n    return this.apiService.send(\"POST\", \"/accounts/request-otp\", null, true, false);\n  }\n}\n","export class VerifyOTPRequest {\n  OTP: string;\n\n  constructor(OTP: string) {\n    this.OTP = OTP;\n  }\n}\n","import { CryptoService } from \"../../../platform/abstractions/crypto.service\";\nimport { I18nService } from \"../../../platform/abstractions/i18n.service\";\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport { Verification } from \"../../../types/verification\";\nimport { UserVerificationApiServiceAbstraction } from \"../../abstractions/user-verification/user-verification-api.service.abstraction\";\nimport { UserVerificationService as UserVerificationServiceAbstraction } from \"../../abstractions/user-verification/user-verification.service.abstraction\";\nimport { VerificationType } from \"../../enums/verification-type\";\nimport { SecretVerificationRequest } from \"../../models/request/secret-verification.request\";\nimport { VerifyOTPRequest } from \"../../models/request/verify-otp.request\";\n\n/**\n * Used for general-purpose user verification throughout the app.\n * Use it to verify the input collected by UserVerificationComponent.\n */\nexport class UserVerificationService implements UserVerificationServiceAbstraction {\n  constructor(\n    private stateService: StateService,\n    private cryptoService: CryptoService,\n    private i18nService: I18nService,\n    private userVerificationApiService: UserVerificationApiServiceAbstraction\n  ) {}\n\n  /**\n   * Create a new request model to be used for server-side verification\n   * @param verification User-supplied verification data (Master Password or OTP)\n   * @param requestClass The request model to create\n   * @param alreadyHashed Whether the master password is already hashed\n   */\n  async buildRequest<T extends SecretVerificationRequest>(\n    verification: Verification,\n    requestClass?: new () => T,\n    alreadyHashed?: boolean\n  ) {\n    this.validateInput(verification);\n\n    const request =\n      requestClass != null ? new requestClass() : (new SecretVerificationRequest() as T);\n\n    if (verification.type === VerificationType.OTP) {\n      request.otp = verification.secret;\n    } else {\n      let masterKey = await this.cryptoService.getMasterKey();\n      if (!masterKey && !alreadyHashed) {\n        masterKey = await this.cryptoService.makeMasterKey(\n          verification.secret,\n          await this.stateService.getEmail(),\n          await this.stateService.getKdfType(),\n          await this.stateService.getKdfConfig()\n        );\n      }\n      request.masterPasswordHash = alreadyHashed\n        ? verification.secret\n        : await this.cryptoService.hashMasterKey(verification.secret, masterKey);\n    }\n\n    return request;\n  }\n\n  /**\n   * Used to verify the Master Password client-side, or send the OTP to the server for verification (with no other data)\n   * Generally used for client-side verification only.\n   * @param verification User-supplied verification data (Master Password or OTP)\n   */\n  async verifyUser(verification: Verification): Promise<boolean> {\n    this.validateInput(verification);\n\n    if (verification.type === VerificationType.OTP) {\n      const request = new VerifyOTPRequest(verification.secret);\n      try {\n        await this.userVerificationApiService.postAccountVerifyOTP(request);\n      } catch (e) {\n        throw new Error(this.i18nService.t(\"invalidVerificationCode\"));\n      }\n    } else {\n      let masterKey = await this.cryptoService.getMasterKey();\n      if (!masterKey) {\n        masterKey = await this.cryptoService.makeMasterKey(\n          verification.secret,\n          await this.stateService.getEmail(),\n          await this.stateService.getKdfType(),\n          await this.stateService.getKdfConfig()\n        );\n      }\n      const passwordValid = await this.cryptoService.compareAndUpdateKeyHash(\n        verification.secret,\n        masterKey\n      );\n      if (!passwordValid) {\n        throw new Error(this.i18nService.t(\"invalidMasterPassword\"));\n      }\n      this.cryptoService.setMasterKey(masterKey);\n    }\n    return true;\n  }\n\n  async requestOTP() {\n    await this.userVerificationApiService.postAccountRequestOTP();\n  }\n\n  /**\n   * Check if user has master password or can only use passwordless technologies to log in\n   * Note: This only checks the server, not the local state\n   * @param userId The user id to check. If not provided, the current user is used\n   * @returns True if the user has a master password\n   */\n  async hasMasterPassword(userId?: string): Promise<boolean> {\n    const decryptionOptions = await this.stateService.getAccountDecryptionOptions({ userId });\n\n    if (decryptionOptions?.hasMasterPassword != undefined) {\n      return decryptionOptions.hasMasterPassword;\n    }\n\n    // TODO: PM-3518 - Left for backwards compatibility, remove after 2023.12.0\n    return !(await this.stateService.getUsesKeyConnector({ userId }));\n  }\n\n  async hasMasterPasswordAndMasterKeyHash(userId?: string): Promise<boolean> {\n    return (\n      (await this.hasMasterPassword(userId)) &&\n      (await this.cryptoService.getMasterKeyHash()) != null\n    );\n  }\n\n  private validateInput(verification: Verification) {\n    if (verification?.secret == null || verification.secret === \"\") {\n      if (verification.type === VerificationType.OTP) {\n        throw new Error(this.i18nService.t(\"verificationCodeRequired\"));\n      } else {\n        throw new Error(this.i18nService.t(\"masterPasswordRequired\"));\n      }\n    }\n  }\n}\n","export abstract class MessagingService {\n  send: (subscriber: string, arg?: any) => void;\n}\n","import { Account } from \"../models/domain/account\";\n\nexport class AccountFactory<T extends Account = Account> {\n  private accountConstructor: new (init: Partial<T>) => T;\n\n  constructor(accountConstructor: new (init: Partial<T>) => T) {\n    this.accountConstructor = accountConstructor;\n  }\n\n  create(args: Partial<T>) {\n    return new this.accountConstructor(args);\n  }\n}\n","import { GlobalState } from \"../models/domain/global-state\";\n\nexport class GlobalStateFactory<T extends GlobalState = GlobalState> {\n  private globalStateConstructor: new (init: Partial<T>) => T;\n\n  constructor(globalStateConstructor: new (init: Partial<T>) => T) {\n    this.globalStateConstructor = globalStateConstructor;\n  }\n\n  create(args?: Partial<T>) {\n    return new this.globalStateConstructor(args);\n  }\n}\n","import { Account } from \"../models/domain/account\";\nimport { GlobalState } from \"../models/domain/global-state\";\n\nimport { AccountFactory } from \"./account-factory\";\nimport { GlobalStateFactory } from \"./global-state-factory\";\n\nexport class StateFactory<\n  TGlobal extends GlobalState = GlobalState,\n  TAccount extends Account = Account\n> {\n  private globalStateFactory: GlobalStateFactory<TGlobal>;\n  private accountFactory: AccountFactory<TAccount>;\n\n  constructor(\n    globalStateConstructor: new (init: Partial<TGlobal>) => TGlobal,\n    accountConstructor: new (init: Partial<TAccount>) => TAccount\n  ) {\n    this.globalStateFactory = new GlobalStateFactory(globalStateConstructor);\n    this.accountFactory = new AccountFactory(accountConstructor);\n  }\n\n  createGlobal(args: Partial<TGlobal>): TGlobal {\n    return this.globalStateFactory.create(args);\n  }\n\n  createAccount(args: Partial<TAccount>): TAccount {\n    return this.accountFactory.create(args);\n  }\n}\n","export class WindowState {\n  width?: number;\n  height?: number;\n  isMaximized?: boolean;\n  // TODO: displayBounds is an Electron.Rectangle.\n  // We need to establish some kind of client-specific global state, similar to the way we already extend a base Account.\n  displayBounds: any;\n  x?: number;\n  y?: number;\n  zoomFactor?: number;\n}\n","import { EnvironmentUrls } from \"../../../auth/models/domain/environment-urls\";\nimport { StateVersion, ThemeType } from \"../../../enums\";\nimport { WindowState } from \"../../../models/domain/window-state\";\n\nexport class GlobalState {\n  enableAlwaysOnTop?: boolean;\n  installedVersion?: string;\n  locale?: string;\n  organizationInvitation?: any;\n  emergencyAccessInvitation?: any;\n  ssoCodeVerifier?: string;\n  ssoOrganizationIdentifier?: string;\n  ssoState?: string;\n  rememberedEmail?: string;\n  theme?: ThemeType = ThemeType.System;\n  window?: WindowState = new WindowState();\n  twoFactorToken?: string;\n  disableFavicon?: boolean;\n  biometricAwaitingAcceptance?: boolean;\n  biometricFingerprintValidated?: boolean;\n  vaultTimeout?: number;\n  vaultTimeoutAction?: string;\n  loginRedirect?: any;\n  mainWindowSize?: number;\n  enableBiometrics?: boolean;\n  biometricText?: string;\n  noAutoPromptBiometricsText?: string;\n  stateVersion: StateVersion = StateVersion.One;\n  environmentUrls: EnvironmentUrls = new EnvironmentUrls();\n  enableTray?: boolean;\n  enableMinimizeToTray?: boolean;\n  enableCloseToTray?: boolean;\n  enableStartToTray?: boolean;\n  openAtLogin?: boolean;\n  alwaysShowDock?: boolean;\n  enableBrowserIntegration?: boolean;\n  enableBrowserIntegrationFingerprint?: boolean;\n  enableDuckDuckGoBrowserIntegration?: boolean;\n  region?: string;\n}\n","import { HtmlStorageLocation } from \"../../enums\";\nimport { AppIdService as AppIdServiceAbstraction } from \"../abstractions/app-id.service\";\nimport { AbstractStorageService } from \"../abstractions/storage.service\";\nimport { Utils } from \"../misc/utils\";\n\nexport class AppIdService implements AppIdServiceAbstraction {\n  constructor(private storageService: AbstractStorageService) {}\n\n  getAppId(): Promise<string> {\n    return this.makeAndGetAppId(\"appId\");\n  }\n\n  getAnonymousAppId(): Promise<string> {\n    return this.makeAndGetAppId(\"anonymousAppId\");\n  }\n\n  private async makeAndGetAppId(key: string) {\n    const existingId = await this.storageService.get<string>(key, {\n      htmlStorageLocation: HtmlStorageLocation.Local,\n    });\n    if (existingId != null) {\n      return existingId;\n    }\n\n    const guid = Utils.newGuid();\n    await this.storageService.save(key, guid, {\n      htmlStorageLocation: HtmlStorageLocation.Local,\n    });\n    return guid;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport {\n  ServerConfigData,\n  ThirdPartyServerConfigData,\n  EnvironmentServerConfigData,\n} from \"../../models/data/server-config.data\";\n\nconst dayInMilliseconds = 24 * 3600 * 1000;\nconst eighteenHoursInMilliseconds = 18 * 3600 * 1000;\n\nexport class ServerConfig {\n  version: string;\n  gitHash: string;\n  server?: ThirdPartyServerConfigData;\n  environment?: EnvironmentServerConfigData;\n  utcDate: Date;\n  featureStates: { [key: string]: string } = {};\n\n  constructor(serverConfigData: ServerConfigData) {\n    this.version = serverConfigData.version;\n    this.gitHash = serverConfigData.gitHash;\n    this.server = serverConfigData.server;\n    this.utcDate = new Date(serverConfigData.utcDate);\n    this.environment = serverConfigData.environment;\n    this.featureStates = serverConfigData.featureStates;\n\n    if (this.server?.name == null && this.server?.url == null) {\n      this.server = null;\n    }\n  }\n\n  private getAgeInMilliseconds(): number {\n    return new Date().getTime() - this.utcDate?.getTime();\n  }\n\n  isValid(): boolean {\n    return this.getAgeInMilliseconds() <= dayInMilliseconds;\n  }\n\n  expiresSoon(): boolean {\n    return this.getAgeInMilliseconds() >= eighteenHoursInMilliseconds;\n  }\n\n  static fromJSON(obj: Jsonify<ServerConfig>): ServerConfig {\n    if (obj == null) {\n      return null;\n    }\n\n    return new ServerConfig(obj);\n  }\n}\n","import { BehaviorSubject, concatMap, from, timer } from \"rxjs\";\n\nimport { AuthService } from \"../../../auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"../../../auth/enums/authentication-status\";\nimport { FeatureFlag } from \"../../../enums/feature-flag.enum\";\nimport { ConfigApiServiceAbstraction } from \"../../abstractions/config/config-api.service.abstraction\";\nimport { ConfigServiceAbstraction } from \"../../abstractions/config/config.service.abstraction\";\nimport { ServerConfig } from \"../../abstractions/config/server-config\";\nimport { EnvironmentService } from \"../../abstractions/environment.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { ServerConfigData } from \"../../models/data/server-config.data\";\n\nexport class ConfigService implements ConfigServiceAbstraction {\n  protected _serverConfig = new BehaviorSubject<ServerConfig | null>(null);\n  serverConfig$ = this._serverConfig.asObservable();\n\n  constructor(\n    private stateService: StateService,\n    private configApiService: ConfigApiServiceAbstraction,\n    private authService: AuthService,\n    private environmentService: EnvironmentService\n  ) {\n    // Re-fetch the server config every hour\n    timer(0, 1000 * 3600)\n      .pipe(concatMap(() => from(this.fetchServerConfig())))\n      .subscribe((serverConfig) => {\n        this._serverConfig.next(serverConfig);\n      });\n\n    this.environmentService.urls.subscribe(() => {\n      this.fetchServerConfig();\n    });\n  }\n\n  async fetchServerConfig(): Promise<ServerConfig> {\n    try {\n      const response = await this.configApiService.get();\n\n      if (response == null) {\n        return;\n      }\n\n      const data = new ServerConfigData(response);\n      const serverConfig = new ServerConfig(data);\n      this._serverConfig.next(serverConfig);\n\n      const userAuthStatus = await this.authService.getAuthStatus();\n      if (userAuthStatus !== AuthenticationStatus.LoggedOut) {\n        // Store the config for offline use if the user is logged in\n        await this.stateService.setServerConfig(data);\n        this.environmentService.setCloudWebVaultUrl(data.environment?.cloudRegion);\n      }\n      // Always return new server config from server to calling method\n      // to ensure up to date information\n      // This change is specifically for the getFeatureFlag > buildServerConfig flow\n      // for locked or logged in users.\n      return serverConfig;\n    } catch {\n      return null;\n    }\n  }\n\n  async getFeatureFlagBool(key: FeatureFlag, defaultValue = false): Promise<boolean> {\n    return await this.getFeatureFlag(key, defaultValue);\n  }\n\n  async getFeatureFlagString(key: FeatureFlag, defaultValue = \"\"): Promise<string> {\n    return await this.getFeatureFlag(key, defaultValue);\n  }\n\n  async getFeatureFlagNumber(key: FeatureFlag, defaultValue = 0): Promise<number> {\n    return await this.getFeatureFlag(key, defaultValue);\n  }\n\n  async getCloudRegion(defaultValue = \"US\"): Promise<string> {\n    const serverConfig = await this.buildServerConfig();\n    return serverConfig.environment?.cloudRegion ?? defaultValue;\n  }\n\n  private async getFeatureFlag<T>(key: FeatureFlag, defaultValue: T): Promise<T> {\n    const serverConfig = await this.buildServerConfig();\n    if (\n      serverConfig == null ||\n      serverConfig.featureStates == null ||\n      serverConfig.featureStates[key] == null\n    ) {\n      return defaultValue;\n    }\n    return serverConfig.featureStates[key] as T;\n  }\n\n  private async buildServerConfig(): Promise<ServerConfig> {\n    const data = await this.stateService.getServerConfig();\n    const domain = data ? new ServerConfig(data) : this._serverConfig.getValue();\n\n    if (domain == null || !domain.isValid() || domain.expiresSoon()) {\n      const value = await this.fetchServerConfig();\n      return value ?? domain;\n    }\n\n    return domain;\n  }\n}\n","import { LogLevelType } from \"../../enums\";\nimport { LogService as LogServiceAbstraction } from \"../abstractions/log.service\";\n\nexport class ConsoleLogService implements LogServiceAbstraction {\n  protected timersMap: Map<string, [number, number]> = new Map();\n\n  constructor(\n    protected isDev: boolean,\n    protected filter: (level: LogLevelType) => boolean = null\n  ) {}\n\n  debug(message: string) {\n    if (!this.isDev) {\n      return;\n    }\n    this.write(LogLevelType.Debug, message);\n  }\n\n  info(message: string) {\n    this.write(LogLevelType.Info, message);\n  }\n\n  warning(message: string) {\n    this.write(LogLevelType.Warning, message);\n  }\n\n  error(message: string) {\n    this.write(LogLevelType.Error, message);\n  }\n\n  write(level: LogLevelType, message: string) {\n    if (this.filter != null && this.filter(level)) {\n      return;\n    }\n\n    switch (level) {\n      case LogLevelType.Debug:\n        // eslint-disable-next-line\n        console.log(message);\n        break;\n      case LogLevelType.Info:\n        // eslint-disable-next-line\n        console.log(message);\n        break;\n      case LogLevelType.Warning:\n        // eslint-disable-next-line\n        console.warn(message);\n        break;\n      case LogLevelType.Error:\n        // eslint-disable-next-line\n        console.error(message);\n        break;\n      default:\n        break;\n    }\n  }\n}\n","import { CryptoService } from \"../abstractions/crypto.service\";\nimport { EncryptService } from \"../abstractions/encrypt.service\";\n\nexport class ContainerService {\n  constructor(private cryptoService: CryptoService, private encryptService: EncryptService) {}\n\n  attachToGlobal(global: any) {\n    if (!global.bitwardenContainerService) {\n      global.bitwardenContainerService = this;\n    }\n  }\n\n  /**\n   * @throws Will throw if CryptoService was not instantiated and provided to the ContainerService constructor\n   */\n  getCryptoService(): CryptoService {\n    if (this.cryptoService == null) {\n      throw new Error(\"ContainerService.cryptoService not initialized.\");\n    }\n    return this.cryptoService;\n  }\n\n  /**\n   * @throws Will throw if EncryptService was not instantiated and provided to the ContainerService constructor\n   */\n  getEncryptService(): EncryptService {\n    if (this.encryptService == null) {\n      throw new Error(\"ContainerService.encryptService not initialized.\");\n    }\n    return this.encryptService;\n  }\n}\n","import { EncryptionType } from \"../../../enums\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { Encrypted } from \"../../interfaces/encrypted\";\n\nconst ENC_TYPE_LENGTH = 1;\nconst IV_LENGTH = 16;\nconst MAC_LENGTH = 32;\nconst MIN_DATA_LENGTH = 1;\n\nexport class EncArrayBuffer implements Encrypted {\n  readonly encryptionType: EncryptionType = null;\n  readonly dataBytes: Uint8Array = null;\n  readonly ivBytes: Uint8Array = null;\n  readonly macBytes: Uint8Array = null;\n\n  constructor(readonly buffer: Uint8Array) {\n    const encBytes = buffer;\n    const encType = encBytes[0];\n\n    switch (encType) {\n      case EncryptionType.AesCbc128_HmacSha256_B64:\n      case EncryptionType.AesCbc256_HmacSha256_B64: {\n        const minimumLength = ENC_TYPE_LENGTH + IV_LENGTH + MAC_LENGTH + MIN_DATA_LENGTH;\n        if (encBytes.length < minimumLength) {\n          this.throwDecryptionError();\n        }\n\n        this.ivBytes = encBytes.slice(ENC_TYPE_LENGTH, ENC_TYPE_LENGTH + IV_LENGTH);\n        this.macBytes = encBytes.slice(\n          ENC_TYPE_LENGTH + IV_LENGTH,\n          ENC_TYPE_LENGTH + IV_LENGTH + MAC_LENGTH\n        );\n        this.dataBytes = encBytes.slice(ENC_TYPE_LENGTH + IV_LENGTH + MAC_LENGTH);\n        break;\n      }\n      case EncryptionType.AesCbc256_B64: {\n        const minimumLength = ENC_TYPE_LENGTH + IV_LENGTH + MIN_DATA_LENGTH;\n        if (encBytes.length < minimumLength) {\n          this.throwDecryptionError();\n        }\n\n        this.ivBytes = encBytes.slice(ENC_TYPE_LENGTH, ENC_TYPE_LENGTH + IV_LENGTH);\n        this.dataBytes = encBytes.slice(ENC_TYPE_LENGTH + IV_LENGTH);\n        break;\n      }\n      default:\n        this.throwDecryptionError();\n    }\n\n    this.encryptionType = encType;\n  }\n\n  private throwDecryptionError() {\n    throw new Error(\n      \"Error parsing encrypted ArrayBuffer: data is corrupted or has an invalid format.\"\n    );\n  }\n\n  static async fromResponse(response: {\n    arrayBuffer: () => Promise<ArrayBuffer>;\n  }): Promise<EncArrayBuffer> {\n    const buffer = await response.arrayBuffer();\n    if (buffer == null) {\n      throw new Error(\"Cannot create EncArrayBuffer from Response - Response is empty\");\n    }\n    return new EncArrayBuffer(new Uint8Array(buffer));\n  }\n\n  static fromB64(b64: string) {\n    const buffer = Utils.fromB64ToArray(b64);\n    return new EncArrayBuffer(buffer);\n  }\n}\n","import { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\n\nexport class EncryptedObject {\n  iv: Uint8Array;\n  data: Uint8Array;\n  mac: Uint8Array;\n  key: SymmetricCryptoKey;\n}\n","import { EncryptionType } from \"../../../enums\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { CryptoFunctionService } from \"../../abstractions/crypto-function.service\";\nimport { EncryptService } from \"../../abstractions/encrypt.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { Decryptable } from \"../../interfaces/decryptable.interface\";\nimport { Encrypted } from \"../../interfaces/encrypted\";\nimport { InitializerMetadata } from \"../../interfaces/initializer-metadata.interface\";\nimport { EncArrayBuffer } from \"../../models/domain/enc-array-buffer\";\nimport { EncString } from \"../../models/domain/enc-string\";\nimport { EncryptedObject } from \"../../models/domain/encrypted-object\";\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\n\nexport class EncryptServiceImplementation implements EncryptService {\n  constructor(\n    protected cryptoFunctionService: CryptoFunctionService,\n    protected logService: LogService,\n    protected logMacFailures: boolean\n  ) {}\n\n  async encrypt(plainValue: string | Uint8Array, key: SymmetricCryptoKey): Promise<EncString> {\n    if (key == null) {\n      throw new Error(\"No encryption key provided.\");\n    }\n\n    if (plainValue == null) {\n      return Promise.resolve(null);\n    }\n\n    let plainBuf: Uint8Array;\n    if (typeof plainValue === \"string\") {\n      plainBuf = Utils.fromUtf8ToArray(plainValue);\n    } else {\n      plainBuf = plainValue;\n    }\n\n    const encObj = await this.aesEncrypt(plainBuf, key);\n    const iv = Utils.fromBufferToB64(encObj.iv);\n    const data = Utils.fromBufferToB64(encObj.data);\n    const mac = encObj.mac != null ? Utils.fromBufferToB64(encObj.mac) : null;\n    return new EncString(encObj.key.encType, data, iv, mac);\n  }\n\n  async encryptToBytes(plainValue: Uint8Array, key: SymmetricCryptoKey): Promise<EncArrayBuffer> {\n    if (key == null) {\n      throw new Error(\"No encryption key provided.\");\n    }\n\n    const encValue = await this.aesEncrypt(plainValue, key);\n    let macLen = 0;\n    if (encValue.mac != null) {\n      macLen = encValue.mac.byteLength;\n    }\n\n    const encBytes = new Uint8Array(1 + encValue.iv.byteLength + macLen + encValue.data.byteLength);\n    encBytes.set([encValue.key.encType]);\n    encBytes.set(new Uint8Array(encValue.iv), 1);\n    if (encValue.mac != null) {\n      encBytes.set(new Uint8Array(encValue.mac), 1 + encValue.iv.byteLength);\n    }\n\n    encBytes.set(new Uint8Array(encValue.data), 1 + encValue.iv.byteLength + macLen);\n    return new EncArrayBuffer(encBytes);\n  }\n\n  async decryptToUtf8(encString: EncString, key: SymmetricCryptoKey): Promise<string> {\n    if (key == null) {\n      throw new Error(\"No key provided for decryption.\");\n    }\n\n    key = this.resolveLegacyKey(key, encString);\n\n    if (key.macKey != null && encString?.mac == null) {\n      this.logService.error(\"mac required.\");\n      return null;\n    }\n\n    if (key.encType !== encString.encryptionType) {\n      this.logService.error(\"encType unavailable.\");\n      return null;\n    }\n\n    const fastParams = this.cryptoFunctionService.aesDecryptFastParameters(\n      encString.data,\n      encString.iv,\n      encString.mac,\n      key\n    );\n    if (fastParams.macKey != null && fastParams.mac != null) {\n      const computedMac = await this.cryptoFunctionService.hmacFast(\n        fastParams.macData,\n        fastParams.macKey,\n        \"sha256\"\n      );\n      const macsEqual = await this.cryptoFunctionService.compareFast(fastParams.mac, computedMac);\n      if (!macsEqual) {\n        this.logMacFailed(\"mac failed.\");\n        return null;\n      }\n    }\n\n    return await this.cryptoFunctionService.aesDecryptFast(fastParams);\n  }\n\n  async decryptToBytes(encThing: Encrypted, key: SymmetricCryptoKey): Promise<Uint8Array> {\n    if (key == null) {\n      throw new Error(\"No encryption key provided.\");\n    }\n\n    if (encThing == null) {\n      throw new Error(\"Nothing provided for decryption.\");\n    }\n\n    key = this.resolveLegacyKey(key, encThing);\n\n    if (key.macKey != null && encThing.macBytes == null) {\n      return null;\n    }\n\n    if (key.encType !== encThing.encryptionType) {\n      return null;\n    }\n\n    if (key.macKey != null && encThing.macBytes != null) {\n      const macData = new Uint8Array(encThing.ivBytes.byteLength + encThing.dataBytes.byteLength);\n      macData.set(new Uint8Array(encThing.ivBytes), 0);\n      macData.set(new Uint8Array(encThing.dataBytes), encThing.ivBytes.byteLength);\n      const computedMac = await this.cryptoFunctionService.hmac(macData, key.macKey, \"sha256\");\n      if (computedMac === null) {\n        return null;\n      }\n\n      const macsMatch = await this.cryptoFunctionService.compare(encThing.macBytes, computedMac);\n      if (!macsMatch) {\n        this.logMacFailed(\"mac failed.\");\n        return null;\n      }\n    }\n\n    const result = await this.cryptoFunctionService.aesDecrypt(\n      encThing.dataBytes,\n      encThing.ivBytes,\n      key.encKey\n    );\n\n    return result ?? null;\n  }\n\n  async decryptItems<T extends InitializerMetadata>(\n    items: Decryptable<T>[],\n    key: SymmetricCryptoKey\n  ): Promise<T[]> {\n    if (items == null || items.length < 1) {\n      return [];\n    }\n\n    return await Promise.all(items.map((item) => item.decrypt(key)));\n  }\n\n  private async aesEncrypt(data: Uint8Array, key: SymmetricCryptoKey): Promise<EncryptedObject> {\n    const obj = new EncryptedObject();\n    obj.key = key;\n    obj.iv = await this.cryptoFunctionService.randomBytes(16);\n    obj.data = await this.cryptoFunctionService.aesEncrypt(data, obj.iv, obj.key.encKey);\n\n    if (obj.key.macKey != null) {\n      const macData = new Uint8Array(obj.iv.byteLength + obj.data.byteLength);\n      macData.set(new Uint8Array(obj.iv), 0);\n      macData.set(new Uint8Array(obj.data), obj.iv.byteLength);\n      obj.mac = await this.cryptoFunctionService.hmac(macData, obj.key.macKey, \"sha256\");\n    }\n\n    return obj;\n  }\n\n  private logMacFailed(msg: string) {\n    if (this.logMacFailures) {\n      this.logService.error(msg);\n    }\n  }\n\n  /**\n   * Transform into new key for the old encrypt-then-mac scheme if required, otherwise return the current key unchanged\n   * @param encThing The encrypted object (e.g. encString or encArrayBuffer) that you want to decrypt\n   */\n  resolveLegacyKey(key: SymmetricCryptoKey, encThing: Encrypted): SymmetricCryptoKey {\n    if (\n      encThing.encryptionType === EncryptionType.AesCbc128_HmacSha256_B64 &&\n      key.encType === EncryptionType.AesCbc256_B64\n    ) {\n      return new SymmetricCryptoKey(key.key, EncryptionType.AesCbc128_HmacSha256_B64);\n    }\n\n    return key;\n  }\n}\n","export enum InitializerKey {\n  Cipher = 0,\n  CipherView = 1,\n}\n","export enum CipherType {\n  Login = 1,\n  SecureNote = 2,\n  Card = 3,\n  Identity = 4,\n}\n","export enum CipherRepromptType {\n  None = 0,\n  Password = 1,\n}\n","import { AttachmentResponse } from \"../response/attachment.response\";\n\nexport class AttachmentData {\n  id: string;\n  url: string;\n  fileName: string;\n  key: string;\n  size: string;\n  sizeName: string;\n\n  constructor(response?: AttachmentResponse) {\n    if (response == null) {\n      return;\n    }\n    this.id = response.id;\n    this.url = response.url;\n    this.fileName = response.fileName;\n    this.key = response.key;\n    this.size = response.size;\n    this.sizeName = response.sizeName;\n  }\n}\n","import { CardApi } from \"../../../models/api/card.api\";\n\nexport class CardData {\n  cardholderName: string;\n  brand: string;\n  number: string;\n  expMonth: string;\n  expYear: string;\n  code: string;\n\n  constructor(data?: CardApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.cardholderName = data.cardholderName;\n    this.brand = data.brand;\n    this.number = data.number;\n    this.expMonth = data.expMonth;\n    this.expYear = data.expYear;\n    this.code = data.code;\n  }\n}\n","import { FieldType, LinkedIdType } from \"../../../enums\";\nimport { FieldApi } from \"../../../models/api/field.api\";\n\nexport class FieldData {\n  type: FieldType;\n  name: string;\n  value: string;\n  linkedId: LinkedIdType;\n\n  constructor(response?: FieldApi) {\n    if (response == null) {\n      return;\n    }\n    this.type = response.type;\n    this.name = response.name;\n    this.value = response.value;\n    this.linkedId = response.linkedId;\n  }\n}\n","import { IdentityApi } from \"../../../models/api/identity.api\";\n\nexport class IdentityData {\n  title: string;\n  firstName: string;\n  middleName: string;\n  lastName: string;\n  address1: string;\n  address2: string;\n  address3: string;\n  city: string;\n  state: string;\n  postalCode: string;\n  country: string;\n  company: string;\n  email: string;\n  phone: string;\n  ssn: string;\n  username: string;\n  passportNumber: string;\n  licenseNumber: string;\n\n  constructor(data?: IdentityApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.title = data.title;\n    this.firstName = data.firstName;\n    this.middleName = data.middleName;\n    this.lastName = data.lastName;\n    this.address1 = data.address1;\n    this.address2 = data.address2;\n    this.address3 = data.address3;\n    this.city = data.city;\n    this.state = data.state;\n    this.postalCode = data.postalCode;\n    this.country = data.country;\n    this.company = data.company;\n    this.email = data.email;\n    this.phone = data.phone;\n    this.ssn = data.ssn;\n    this.username = data.username;\n    this.passportNumber = data.passportNumber;\n    this.licenseNumber = data.licenseNumber;\n  }\n}\n","import { UriMatchType } from \"../../../enums\";\nimport { LoginUriApi } from \"../../../models/api/login-uri.api\";\n\nexport class LoginUriData {\n  uri: string;\n  match: UriMatchType = null;\n\n  constructor(data?: LoginUriApi) {\n    if (data == null) {\n      return;\n    }\n    this.uri = data.uri;\n    this.match = data.match;\n  }\n}\n","import { LoginApi } from \"../../../models/api/login.api\";\n\nimport { LoginUriData } from \"./login-uri.data\";\n\nexport class LoginData {\n  uris: LoginUriData[];\n  username: string;\n  password: string;\n  passwordRevisionDate: string;\n  totp: string;\n  autofillOnPageLoad: boolean;\n\n  constructor(data?: LoginApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.username = data.username;\n    this.password = data.password;\n    this.passwordRevisionDate = data.passwordRevisionDate;\n    this.totp = data.totp;\n    this.autofillOnPageLoad = data.autofillOnPageLoad;\n\n    if (data.uris) {\n      this.uris = data.uris.map((u) => new LoginUriData(u));\n    }\n  }\n}\n","import { PasswordHistoryResponse } from \"../response/password-history.response\";\n\nexport class PasswordHistoryData {\n  password: string;\n  lastUsedDate: string;\n\n  constructor(response?: PasswordHistoryResponse) {\n    if (response == null) {\n      return;\n    }\n\n    this.password = response.password;\n    this.lastUsedDate = response.lastUsedDate;\n  }\n}\n","import { SecureNoteType } from \"../../../enums\";\nimport { SecureNoteApi } from \"../../../models/api/secure-note.api\";\n\nexport class SecureNoteData {\n  type: SecureNoteType;\n\n  constructor(data?: SecureNoteApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.type = data.type;\n  }\n}\n","import { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../enums/cipher-type\";\nimport { CipherResponse } from \"../response/cipher.response\";\n\nimport { AttachmentData } from \"./attachment.data\";\nimport { CardData } from \"./card.data\";\nimport { FieldData } from \"./field.data\";\nimport { IdentityData } from \"./identity.data\";\nimport { LoginData } from \"./login.data\";\nimport { PasswordHistoryData } from \"./password-history.data\";\nimport { SecureNoteData } from \"./secure-note.data\";\n\nexport class CipherData {\n  id: string;\n  organizationId: string;\n  folderId: string;\n  edit: boolean;\n  viewPassword: boolean;\n  organizationUseTotp: boolean;\n  favorite: boolean;\n  revisionDate: string;\n  type: CipherType;\n  name: string;\n  notes: string;\n  login?: LoginData;\n  secureNote?: SecureNoteData;\n  card?: CardData;\n  identity?: IdentityData;\n  fields?: FieldData[];\n  attachments?: AttachmentData[];\n  passwordHistory?: PasswordHistoryData[];\n  collectionIds?: string[];\n  creationDate: string;\n  deletedDate: string;\n  reprompt: CipherRepromptType;\n\n  constructor(response?: CipherResponse, collectionIds?: string[]) {\n    if (response == null) {\n      return;\n    }\n\n    this.id = response.id;\n    this.organizationId = response.organizationId;\n    this.folderId = response.folderId;\n    this.edit = response.edit;\n    this.viewPassword = response.viewPassword;\n    this.organizationUseTotp = response.organizationUseTotp;\n    this.favorite = response.favorite;\n    this.revisionDate = response.revisionDate;\n    this.type = response.type;\n    this.name = response.name;\n    this.notes = response.notes;\n    this.collectionIds = collectionIds != null ? collectionIds : response.collectionIds;\n    this.creationDate = response.creationDate;\n    this.deletedDate = response.deletedDate;\n    this.reprompt = response.reprompt;\n\n    switch (this.type) {\n      case CipherType.Login:\n        this.login = new LoginData(response.login);\n        break;\n      case CipherType.SecureNote:\n        this.secureNote = new SecureNoteData(response.secureNote);\n        break;\n      case CipherType.Card:\n        this.card = new CardData(response.card);\n        break;\n      case CipherType.Identity:\n        this.identity = new IdentityData(response.identity);\n        break;\n      default:\n        break;\n    }\n\n    if (response.fields != null) {\n      this.fields = response.fields.map((f) => new FieldData(f));\n    }\n    if (response.attachments != null) {\n      this.attachments = response.attachments.map((a) => new AttachmentData(a));\n    }\n    if (response.passwordHistory != null) {\n      this.passwordHistory = response.passwordHistory.map((ph) => new PasswordHistoryData(ph));\n    }\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { View } from \"../../../models/view/view\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { Attachment } from \"../domain/attachment\";\n\nexport class AttachmentView implements View {\n  id: string = null;\n  url: string = null;\n  size: string = null;\n  sizeName: string = null;\n  fileName: string = null;\n  key: SymmetricCryptoKey = null;\n\n  constructor(a?: Attachment) {\n    if (!a) {\n      return;\n    }\n\n    this.id = a.id;\n    this.url = a.url;\n    this.size = a.size;\n    this.sizeName = a.sizeName;\n  }\n\n  get fileSize(): number {\n    try {\n      if (this.size != null) {\n        return parseInt(this.size, null);\n      }\n    } catch {\n      // Invalid file size.\n    }\n    return 0;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<AttachmentView>>): AttachmentView {\n    const key = obj.key == null ? null : SymmetricCryptoKey.fromJSON(obj.key);\n    return Object.assign(new AttachmentView(), obj, { key: key });\n  }\n}\n","import { LinkedIdType } from \"../enums\";\nimport { ItemView } from \"../vault/models/view/item.view\";\n\nexport class LinkedMetadata {\n  constructor(readonly propertyKey: string, private readonly _i18nKey?: string) {}\n\n  get i18nKey() {\n    return this._i18nKey ?? this.propertyKey;\n  }\n}\n\n/**\n * A decorator used to set metadata used by Linked custom fields. Apply it to a class property or getter to make it\n *    available as a Linked custom field option.\n * @param id - A unique value that is saved in the Field model. It is used to look up the decorated class property.\n * @param i18nKey - The i18n key used to describe the decorated class property in the UI. If it is null, then the name\n *    of the class property will be used as the i18n key.\n */\nexport function linkedFieldOption(id: LinkedIdType, i18nKey?: string) {\n  return (prototype: ItemView, propertyKey: string) => {\n    if (prototype.linkedFieldOptions == null) {\n      prototype.linkedFieldOptions = new Map<LinkedIdType, LinkedMetadata>();\n    }\n\n    prototype.linkedFieldOptions.set(id, new LinkedMetadata(propertyKey, i18nKey));\n  };\n}\n","import { LinkedMetadata } from \"../../../misc/linkedFieldOption.decorator\";\nimport { View } from \"../../../models/view/view\";\n\nexport abstract class ItemView implements View {\n  linkedFieldOptions: Map<number, LinkedMetadata>;\n  abstract get subTitle(): string;\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { CardLinkedId as LinkedId } from \"../../../enums\";\nimport { linkedFieldOption } from \"../../../misc/linkedFieldOption.decorator\";\n\nimport { ItemView } from \"./item.view\";\n\nexport class CardView extends ItemView {\n  @linkedFieldOption(LinkedId.CardholderName)\n  cardholderName: string = null;\n  @linkedFieldOption(LinkedId.ExpMonth, \"expirationMonth\")\n  expMonth: string = null;\n  @linkedFieldOption(LinkedId.ExpYear, \"expirationYear\")\n  expYear: string = null;\n  @linkedFieldOption(LinkedId.Code, \"securityCode\")\n  code: string = null;\n\n  private _brand: string = null;\n  private _number: string = null;\n  private _subTitle: string = null;\n\n  get maskedCode(): string {\n    return this.code != null ? \"•\".repeat(this.code.length) : null;\n  }\n\n  get maskedNumber(): string {\n    return this.number != null ? \"•\".repeat(this.number.length) : null;\n  }\n\n  @linkedFieldOption(LinkedId.Brand)\n  get brand(): string {\n    return this._brand;\n  }\n  set brand(value: string) {\n    this._brand = value;\n    this._subTitle = null;\n  }\n\n  @linkedFieldOption(LinkedId.Number)\n  get number(): string {\n    return this._number;\n  }\n  set number(value: string) {\n    this._number = value;\n    this._subTitle = null;\n  }\n\n  get subTitle(): string {\n    if (this._subTitle == null) {\n      this._subTitle = this.brand;\n      if (this.number != null && this.number.length >= 4) {\n        if (this._subTitle != null && this._subTitle !== \"\") {\n          this._subTitle += \", \";\n        } else {\n          this._subTitle = \"\";\n        }\n\n        // Show last 5 on amex, last 4 for all others\n        const count =\n          this.number.length >= 5 && this.number.match(new RegExp(\"^3[47]\")) != null ? 5 : 4;\n        this._subTitle += \"*\" + this.number.substr(this.number.length - count);\n      }\n    }\n    return this._subTitle;\n  }\n\n  get expiration(): string {\n    if (!this.expMonth && !this.expYear) {\n      return null;\n    }\n\n    let exp = this.expMonth != null ? (\"0\" + this.expMonth).slice(-2) : \"__\";\n    exp += \" / \" + (this.expYear != null ? this.formatYear(this.expYear) : \"____\");\n    return exp;\n  }\n\n  private formatYear(year: string): string {\n    return year.length === 2 ? \"20\" + year : year;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<CardView>>): CardView {\n    return Object.assign(new CardView(), obj);\n  }\n\n  // ref https://stackoverflow.com/a/5911300\n  static getCardBrandByPatterns(cardNum: string): string {\n    if (cardNum == null || typeof cardNum !== \"string\" || cardNum.trim() === \"\") {\n      return null;\n    }\n\n    // Visa\n    let re = new RegExp(\"^4\");\n    if (cardNum.match(re) != null) {\n      return \"Visa\";\n    }\n\n    // Mastercard\n    // Updated for Mastercard 2017 BINs expansion\n    if (\n      /^(5[1-5][0-9]{14}|2(22[1-9][0-9]{12}|2[3-9][0-9]{13}|[3-6][0-9]{14}|7[0-1][0-9]{13}|720[0-9]{12}))$/.test(\n        cardNum\n      )\n    ) {\n      return \"Mastercard\";\n    }\n\n    // AMEX\n    re = new RegExp(\"^3[47]\");\n    if (cardNum.match(re) != null) {\n      return \"Amex\";\n    }\n\n    // Discover\n    re = new RegExp(\n      \"^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)\"\n    );\n    if (cardNum.match(re) != null) {\n      return \"Discover\";\n    }\n\n    // Diners\n    re = new RegExp(\"^36\");\n    if (cardNum.match(re) != null) {\n      return \"Diners Club\";\n    }\n\n    // Diners - Carte Blanche\n    re = new RegExp(\"^30[0-5]\");\n    if (cardNum.match(re) != null) {\n      return \"Diners Club\";\n    }\n\n    // JCB\n    re = new RegExp(\"^35(2[89]|[3-8][0-9])\");\n    if (cardNum.match(re) != null) {\n      return \"JCB\";\n    }\n\n    // Visa Electron\n    re = new RegExp(\"^(4026|417500|4508|4844|491(3|7))\");\n    if (cardNum.match(re) != null) {\n      return \"Visa\";\n    }\n\n    return null;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { FieldType, LinkedIdType } from \"../../../enums\";\nimport { View } from \"../../../models/view/view\";\nimport { Field } from \"../domain/field\";\n\nexport class FieldView implements View {\n  name: string = null;\n  value: string = null;\n  type: FieldType = null;\n  newField = false; // Marks if the field is new and hasn't been saved\n  showValue = false;\n  showCount = false;\n  linkedId: LinkedIdType = null;\n\n  constructor(f?: Field) {\n    if (!f) {\n      return;\n    }\n\n    this.type = f.type;\n    this.linkedId = f.linkedId;\n  }\n\n  get maskedValue(): string {\n    return this.value != null ? \"••••••••\" : null;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<FieldView>>): FieldView {\n    return Object.assign(new FieldView(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { IdentityLinkedId as LinkedId } from \"../../../enums\";\nimport { linkedFieldOption } from \"../../../misc/linkedFieldOption.decorator\";\nimport { Utils } from \"../../../platform/misc/utils\";\n\nimport { ItemView } from \"./item.view\";\n\nexport class IdentityView extends ItemView {\n  @linkedFieldOption(LinkedId.Title)\n  title: string = null;\n  @linkedFieldOption(LinkedId.MiddleName)\n  middleName: string = null;\n  @linkedFieldOption(LinkedId.Address1)\n  address1: string = null;\n  @linkedFieldOption(LinkedId.Address2)\n  address2: string = null;\n  @linkedFieldOption(LinkedId.Address3)\n  address3: string = null;\n  @linkedFieldOption(LinkedId.City, \"cityTown\")\n  city: string = null;\n  @linkedFieldOption(LinkedId.State, \"stateProvince\")\n  state: string = null;\n  @linkedFieldOption(LinkedId.PostalCode, \"zipPostalCode\")\n  postalCode: string = null;\n  @linkedFieldOption(LinkedId.Country)\n  country: string = null;\n  @linkedFieldOption(LinkedId.Company)\n  company: string = null;\n  @linkedFieldOption(LinkedId.Email)\n  email: string = null;\n  @linkedFieldOption(LinkedId.Phone)\n  phone: string = null;\n  @linkedFieldOption(LinkedId.Ssn)\n  ssn: string = null;\n  @linkedFieldOption(LinkedId.Username)\n  username: string = null;\n  @linkedFieldOption(LinkedId.PassportNumber)\n  passportNumber: string = null;\n  @linkedFieldOption(LinkedId.LicenseNumber)\n  licenseNumber: string = null;\n\n  private _firstName: string = null;\n  private _lastName: string = null;\n  private _subTitle: string = null;\n\n  constructor() {\n    super();\n  }\n\n  @linkedFieldOption(LinkedId.FirstName)\n  get firstName(): string {\n    return this._firstName;\n  }\n  set firstName(value: string) {\n    this._firstName = value;\n    this._subTitle = null;\n  }\n\n  @linkedFieldOption(LinkedId.LastName)\n  get lastName(): string {\n    return this._lastName;\n  }\n  set lastName(value: string) {\n    this._lastName = value;\n    this._subTitle = null;\n  }\n\n  get subTitle(): string {\n    if (this._subTitle == null && (this.firstName != null || this.lastName != null)) {\n      this._subTitle = \"\";\n      if (this.firstName != null) {\n        this._subTitle = this.firstName;\n      }\n      if (this.lastName != null) {\n        if (this._subTitle !== \"\") {\n          this._subTitle += \" \";\n        }\n        this._subTitle += this.lastName;\n      }\n    }\n\n    return this._subTitle;\n  }\n\n  @linkedFieldOption(LinkedId.FullName)\n  get fullName(): string {\n    if (\n      this.title != null ||\n      this.firstName != null ||\n      this.middleName != null ||\n      this.lastName != null\n    ) {\n      let name = \"\";\n      if (this.title != null) {\n        name += this.title + \" \";\n      }\n      if (this.firstName != null) {\n        name += this.firstName + \" \";\n      }\n      if (this.middleName != null) {\n        name += this.middleName + \" \";\n      }\n      if (this.lastName != null) {\n        name += this.lastName;\n      }\n      return name.trim();\n    }\n\n    return null;\n  }\n\n  get fullAddress(): string {\n    let address = this.address1;\n    if (!Utils.isNullOrWhitespace(this.address2)) {\n      if (!Utils.isNullOrWhitespace(address)) {\n        address += \", \";\n      }\n      address += this.address2;\n    }\n    if (!Utils.isNullOrWhitespace(this.address3)) {\n      if (!Utils.isNullOrWhitespace(address)) {\n        address += \", \";\n      }\n      address += this.address3;\n    }\n    return address;\n  }\n\n  get fullAddressPart2(): string {\n    if (this.city == null && this.state == null && this.postalCode == null) {\n      return null;\n    }\n    const city = this.city || \"-\";\n    const state = this.state;\n    const postalCode = this.postalCode || \"-\";\n    let addressPart2 = city;\n    if (!Utils.isNullOrWhitespace(state)) {\n      addressPart2 += \", \" + state;\n    }\n    addressPart2 += \", \" + postalCode;\n    return addressPart2;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<IdentityView>>): IdentityView {\n    return Object.assign(new IdentityView(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { UriMatchType } from \"../../../enums\";\nimport { View } from \"../../../models/view/view\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { LoginUri } from \"../domain/login-uri\";\n\nconst CanLaunchWhitelist = [\n  \"https://\",\n  \"http://\",\n  \"ssh://\",\n  \"ftp://\",\n  \"sftp://\",\n  \"irc://\",\n  \"vnc://\",\n  // https://docs.microsoft.com/en-us/windows-server/remote/remote-desktop-services/clients/remote-desktop-uri\n  \"rdp://\", // Legacy RDP URI scheme\n  \"ms-rd:\", // Preferred RDP URI scheme\n  \"chrome://\",\n  \"iosapp://\",\n  \"androidapp://\",\n];\n\nexport class LoginUriView implements View {\n  match: UriMatchType = null;\n\n  private _uri: string = null;\n  private _domain: string = null;\n  private _hostname: string = null;\n  private _host: string = null;\n  private _canLaunch: boolean = null;\n\n  constructor(u?: LoginUri) {\n    if (!u) {\n      return;\n    }\n\n    this.match = u.match;\n  }\n\n  get uri(): string {\n    return this._uri;\n  }\n  set uri(value: string) {\n    this._uri = value;\n    this._domain = null;\n    this._canLaunch = null;\n  }\n\n  get domain(): string {\n    if (this._domain == null && this.uri != null) {\n      this._domain = Utils.getDomain(this.uri);\n      if (this._domain === \"\") {\n        this._domain = null;\n      }\n    }\n\n    return this._domain;\n  }\n\n  get hostname(): string {\n    if (this.match === UriMatchType.RegularExpression) {\n      return null;\n    }\n    if (this._hostname == null && this.uri != null) {\n      this._hostname = Utils.getHostname(this.uri);\n      if (this._hostname === \"\") {\n        this._hostname = null;\n      }\n    }\n\n    return this._hostname;\n  }\n\n  get host(): string {\n    if (this.match === UriMatchType.RegularExpression) {\n      return null;\n    }\n    if (this._host == null && this.uri != null) {\n      this._host = Utils.getHost(this.uri);\n      if (this._host === \"\") {\n        this._host = null;\n      }\n    }\n\n    return this._host;\n  }\n\n  get hostnameOrUri(): string {\n    return this.hostname != null ? this.hostname : this.uri;\n  }\n\n  get hostOrUri(): string {\n    return this.host != null ? this.host : this.uri;\n  }\n\n  get isWebsite(): boolean {\n    return (\n      this.uri != null &&\n      (this.uri.indexOf(\"http://\") === 0 ||\n        this.uri.indexOf(\"https://\") === 0 ||\n        (this.uri.indexOf(\"://\") < 0 && !Utils.isNullOrWhitespace(Utils.getDomain(this.uri))))\n    );\n  }\n\n  get canLaunch(): boolean {\n    if (this._canLaunch != null) {\n      return this._canLaunch;\n    }\n    if (this.uri != null && this.match !== UriMatchType.RegularExpression) {\n      const uri = this.launchUri;\n      for (let i = 0; i < CanLaunchWhitelist.length; i++) {\n        if (uri.indexOf(CanLaunchWhitelist[i]) === 0) {\n          this._canLaunch = true;\n          return this._canLaunch;\n        }\n      }\n    }\n    this._canLaunch = false;\n    return this._canLaunch;\n  }\n\n  get launchUri(): string {\n    return this.uri.indexOf(\"://\") < 0 && !Utils.isNullOrWhitespace(Utils.getDomain(this.uri))\n      ? \"http://\" + this.uri\n      : this.uri;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<LoginUriView>>): LoginUriView {\n    return Object.assign(new LoginUriView(), obj);\n  }\n\n  matchesUri(\n    targetUri: string,\n    equivalentDomains: Set<string>,\n    defaultUriMatch: UriMatchType = null\n  ): boolean {\n    if (!this.uri || !targetUri) {\n      return false;\n    }\n\n    let matchType = this.match ?? defaultUriMatch;\n    matchType ??= UriMatchType.Domain;\n\n    const targetDomain = Utils.getDomain(targetUri);\n    const matchDomains = equivalentDomains.add(targetDomain);\n\n    switch (matchType) {\n      case UriMatchType.Domain:\n        return this.matchesDomain(targetUri, matchDomains);\n      case UriMatchType.Host: {\n        const urlHost = Utils.getHost(targetUri);\n        return urlHost != null && urlHost === Utils.getHost(this.uri);\n      }\n      case UriMatchType.Exact:\n        return targetUri === this.uri;\n      case UriMatchType.StartsWith:\n        return targetUri.startsWith(this.uri);\n      case UriMatchType.RegularExpression:\n        try {\n          const regex = new RegExp(this.uri, \"i\");\n          return regex.test(targetUri);\n        } catch (e) {\n          // Invalid regex\n          return false;\n        }\n      case UriMatchType.Never:\n        return false;\n      default:\n        break;\n    }\n\n    return false;\n  }\n\n  private matchesDomain(targetUri: string, matchDomains: Set<string>) {\n    if (targetUri == null || this.domain == null || !matchDomains.has(this.domain)) {\n      return false;\n    }\n\n    if (Utils.DomainMatchBlacklist.has(this.domain)) {\n      const domainUrlHost = Utils.getHost(targetUri);\n      return !Utils.DomainMatchBlacklist.get(this.domain).has(domainUrlHost);\n    }\n\n    return true;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { LoginLinkedId as LinkedId, UriMatchType } from \"../../../enums\";\nimport { linkedFieldOption } from \"../../../misc/linkedFieldOption.decorator\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { Login } from \"../domain/login\";\n\nimport { ItemView } from \"./item.view\";\nimport { LoginUriView } from \"./login-uri.view\";\n\nexport class LoginView extends ItemView {\n  @linkedFieldOption(LinkedId.Username)\n  username: string = null;\n  @linkedFieldOption(LinkedId.Password)\n  password: string = null;\n\n  passwordRevisionDate?: Date = null;\n  totp: string = null;\n  uris: LoginUriView[] = null;\n  autofillOnPageLoad: boolean = null;\n\n  constructor(l?: Login) {\n    super();\n    if (!l) {\n      return;\n    }\n\n    this.passwordRevisionDate = l.passwordRevisionDate;\n    this.autofillOnPageLoad = l.autofillOnPageLoad;\n  }\n\n  get uri(): string {\n    return this.hasUris ? this.uris[0].uri : null;\n  }\n\n  get maskedPassword(): string {\n    return this.password != null ? \"••••••••\" : null;\n  }\n\n  get subTitle(): string {\n    return this.username;\n  }\n\n  get canLaunch(): boolean {\n    return this.hasUris && this.uris.some((u) => u.canLaunch);\n  }\n\n  get hasTotp(): boolean {\n    return !Utils.isNullOrWhitespace(this.totp);\n  }\n\n  get launchUri(): string {\n    if (this.hasUris) {\n      const uri = this.uris.find((u) => u.canLaunch);\n      if (uri != null) {\n        return uri.launchUri;\n      }\n    }\n    return null;\n  }\n\n  get hasUris(): boolean {\n    return this.uris != null && this.uris.length > 0;\n  }\n\n  matchesUri(\n    targetUri: string,\n    equivalentDomains: Set<string>,\n    defaultUriMatch: UriMatchType = null\n  ): boolean {\n    if (this.uris == null) {\n      return false;\n    }\n\n    return this.uris.some((uri) => uri.matchesUri(targetUri, equivalentDomains, defaultUriMatch));\n  }\n\n  static fromJSON(obj: Partial<Jsonify<LoginView>>): LoginView {\n    const passwordRevisionDate =\n      obj.passwordRevisionDate == null ? null : new Date(obj.passwordRevisionDate);\n    const uris = obj.uris?.map((uri: any) => LoginUriView.fromJSON(uri));\n\n    return Object.assign(new LoginView(), obj, {\n      passwordRevisionDate: passwordRevisionDate,\n      uris: uris,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { View } from \"../../../models/view/view\";\nimport { Password } from \"../domain/password\";\n\nexport class PasswordHistoryView implements View {\n  password: string = null;\n  lastUsedDate: Date = null;\n\n  constructor(ph?: Password) {\n    if (!ph) {\n      return;\n    }\n\n    this.lastUsedDate = ph.lastUsedDate;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<PasswordHistoryView>>): PasswordHistoryView {\n    const lastUsedDate = obj.lastUsedDate == null ? null : new Date(obj.lastUsedDate);\n\n    return Object.assign(new PasswordHistoryView(), obj, {\n      lastUsedDate: lastUsedDate,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { SecureNoteType } from \"../../../enums\";\nimport { SecureNote } from \"../domain/secure-note\";\n\nimport { ItemView } from \"./item.view\";\n\nexport class SecureNoteView extends ItemView {\n  type: SecureNoteType = null;\n\n  constructor(n?: SecureNote) {\n    super();\n    if (!n) {\n      return;\n    }\n\n    this.type = n.type;\n  }\n\n  get subTitle(): string {\n    return null;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<SecureNoteView>>): SecureNoteView {\n    return Object.assign(new SecureNoteView(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { LinkedIdType } from \"../../../enums\";\nimport { View } from \"../../../models/view/view\";\nimport { InitializerMetadata } from \"../../../platform/interfaces/initializer-metadata.interface\";\nimport { InitializerKey } from \"../../../platform/services/cryptography/initializer-key\";\nimport { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../enums/cipher-type\";\nimport { LocalData } from \"../data/local.data\";\nimport { Cipher } from \"../domain/cipher\";\n\nimport { AttachmentView } from \"./attachment.view\";\nimport { CardView } from \"./card.view\";\nimport { FieldView } from \"./field.view\";\nimport { IdentityView } from \"./identity.view\";\nimport { LoginView } from \"./login.view\";\nimport { PasswordHistoryView } from \"./password-history.view\";\nimport { SecureNoteView } from \"./secure-note.view\";\n\nexport class CipherView implements View, InitializerMetadata {\n  readonly initializerKey = InitializerKey.CipherView;\n\n  id: string = null;\n  organizationId: string = null;\n  folderId: string = null;\n  name: string = null;\n  notes: string = null;\n  type: CipherType = null;\n  favorite = false;\n  organizationUseTotp = false;\n  edit = false;\n  viewPassword = true;\n  localData: LocalData;\n  login = new LoginView();\n  identity = new IdentityView();\n  card = new CardView();\n  secureNote = new SecureNoteView();\n  attachments: AttachmentView[] = null;\n  fields: FieldView[] = null;\n  passwordHistory: PasswordHistoryView[] = null;\n  collectionIds: string[] = null;\n  revisionDate: Date = null;\n  creationDate: Date = null;\n  deletedDate: Date = null;\n  reprompt: CipherRepromptType = CipherRepromptType.None;\n\n  constructor(c?: Cipher) {\n    if (!c) {\n      return;\n    }\n\n    this.id = c.id;\n    this.organizationId = c.organizationId;\n    this.folderId = c.folderId;\n    this.favorite = c.favorite;\n    this.organizationUseTotp = c.organizationUseTotp;\n    this.edit = c.edit;\n    this.viewPassword = c.viewPassword;\n    this.type = c.type;\n    this.localData = c.localData;\n    this.collectionIds = c.collectionIds;\n    this.revisionDate = c.revisionDate;\n    this.creationDate = c.creationDate;\n    this.deletedDate = c.deletedDate;\n    // Old locally stored ciphers might have reprompt == null. If so set it to None.\n    this.reprompt = c.reprompt ?? CipherRepromptType.None;\n  }\n\n  private get item() {\n    switch (this.type) {\n      case CipherType.Login:\n        return this.login;\n      case CipherType.SecureNote:\n        return this.secureNote;\n      case CipherType.Card:\n        return this.card;\n      case CipherType.Identity:\n        return this.identity;\n      default:\n        break;\n    }\n\n    return null;\n  }\n\n  get subTitle(): string {\n    return this.item.subTitle;\n  }\n\n  get hasPasswordHistory(): boolean {\n    return this.passwordHistory && this.passwordHistory.length > 0;\n  }\n\n  get hasAttachments(): boolean {\n    return this.attachments && this.attachments.length > 0;\n  }\n\n  get hasOldAttachments(): boolean {\n    if (this.hasAttachments) {\n      for (let i = 0; i < this.attachments.length; i++) {\n        if (this.attachments[i].key == null) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  get hasFields(): boolean {\n    return this.fields && this.fields.length > 0;\n  }\n\n  get passwordRevisionDisplayDate(): Date {\n    if (this.type !== CipherType.Login || this.login == null) {\n      return null;\n    } else if (this.login.password == null || this.login.password === \"\") {\n      return null;\n    }\n    return this.login.passwordRevisionDate;\n  }\n\n  get isDeleted(): boolean {\n    return this.deletedDate != null;\n  }\n\n  get linkedFieldOptions() {\n    return this.item.linkedFieldOptions;\n  }\n\n  linkedFieldValue(id: LinkedIdType) {\n    const linkedFieldOption = this.linkedFieldOptions?.get(id);\n    if (linkedFieldOption == null) {\n      return null;\n    }\n\n    const item = this.item;\n    return this.item[linkedFieldOption.propertyKey as keyof typeof item];\n  }\n\n  linkedFieldI18nKey(id: LinkedIdType): string {\n    return this.linkedFieldOptions.get(id)?.i18nKey;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<CipherView>>): CipherView {\n    const view = new CipherView();\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    const deletedDate = obj.deletedDate == null ? null : new Date(obj.deletedDate);\n    const attachments = obj.attachments?.map((a: any) => AttachmentView.fromJSON(a));\n    const fields = obj.fields?.map((f: any) => FieldView.fromJSON(f));\n    const passwordHistory = obj.passwordHistory?.map((ph: any) => PasswordHistoryView.fromJSON(ph));\n\n    Object.assign(view, obj, {\n      revisionDate: revisionDate,\n      deletedDate: deletedDate,\n      attachments: attachments,\n      fields: fields,\n      passwordHistory: passwordHistory,\n    });\n\n    switch (obj.type) {\n      case CipherType.Card:\n        view.card = CardView.fromJSON(obj.card);\n        break;\n      case CipherType.Identity:\n        view.identity = IdentityView.fromJSON(obj.identity);\n        break;\n      case CipherType.Login:\n        view.login = LoginView.fromJSON(obj.login);\n        break;\n      case CipherType.SecureNote:\n        view.secureNote = SecureNoteView.fromJSON(obj.secureNote);\n        break;\n      default:\n        break;\n    }\n\n    return view;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Utils } from \"../../../platform/misc/utils\";\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { AttachmentData } from \"../data/attachment.data\";\nimport { AttachmentView } from \"../view/attachment.view\";\n\nexport class Attachment extends Domain {\n  id: string;\n  url: string;\n  size: string;\n  sizeName: string; // Readable size, ex: \"4.2 KB\" or \"1.43 GB\"\n  key: EncString;\n  fileName: EncString;\n\n  constructor(obj?: AttachmentData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.size = obj.size;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        url: null,\n        sizeName: null,\n        fileName: null,\n        key: null,\n      },\n      [\"id\", \"url\", \"sizeName\"]\n    );\n  }\n\n  async decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<AttachmentView> {\n    const view = await this.decryptObj(\n      new AttachmentView(this),\n      {\n        fileName: null,\n      },\n      orgId,\n      encKey\n    );\n\n    if (this.key != null) {\n      view.key = await this.decryptAttachmentKey(orgId, encKey);\n    }\n\n    return view;\n  }\n\n  private async decryptAttachmentKey(orgId: string, encKey?: SymmetricCryptoKey) {\n    try {\n      if (encKey == null) {\n        encKey = await this.getKeyForDecryption(orgId);\n      }\n\n      const encryptService = Utils.getContainerService().getEncryptService();\n      const decValue = await encryptService.decryptToBytes(this.key, encKey);\n      return new SymmetricCryptoKey(decValue);\n    } catch (e) {\n      // TODO: error?\n    }\n  }\n\n  private async getKeyForDecryption(orgId: string) {\n    const cryptoService = Utils.getContainerService().getCryptoService();\n    return orgId != null\n      ? await cryptoService.getOrgKey(orgId)\n      : await cryptoService.getUserKeyWithLegacySupport();\n  }\n\n  toAttachmentData(): AttachmentData {\n    const a = new AttachmentData();\n    a.size = this.size;\n    this.buildDataModel(\n      this,\n      a,\n      {\n        id: null,\n        url: null,\n        sizeName: null,\n        fileName: null,\n        key: null,\n      },\n      [\"id\", \"url\", \"sizeName\"]\n    );\n    return a;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Attachment>>): Attachment {\n    if (obj == null) {\n      return null;\n    }\n\n    const key = EncString.fromJSON(obj.key);\n    const fileName = EncString.fromJSON(obj.fileName);\n\n    return Object.assign(new Attachment(), obj, {\n      key,\n      fileName,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { CardData } from \"../data/card.data\";\nimport { CardView } from \"../view/card.view\";\n\nexport class Card extends Domain {\n  cardholderName: EncString;\n  brand: EncString;\n  number: EncString;\n  expMonth: EncString;\n  expYear: EncString;\n  code: EncString;\n\n  constructor(obj?: CardData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        cardholderName: null,\n        brand: null,\n        number: null,\n        expMonth: null,\n        expYear: null,\n        code: null,\n      },\n      []\n    );\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<CardView> {\n    return this.decryptObj(\n      new CardView(),\n      {\n        cardholderName: null,\n        brand: null,\n        number: null,\n        expMonth: null,\n        expYear: null,\n        code: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toCardData(): CardData {\n    const c = new CardData();\n    this.buildDataModel(this, c, {\n      cardholderName: null,\n      brand: null,\n      number: null,\n      expMonth: null,\n      expYear: null,\n      code: null,\n    });\n    return c;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Card>>): Card {\n    if (obj == null) {\n      return null;\n    }\n\n    const cardholderName = EncString.fromJSON(obj.cardholderName);\n    const brand = EncString.fromJSON(obj.brand);\n    const number = EncString.fromJSON(obj.number);\n    const expMonth = EncString.fromJSON(obj.expMonth);\n    const expYear = EncString.fromJSON(obj.expYear);\n    const code = EncString.fromJSON(obj.code);\n    return Object.assign(new Card(), obj, {\n      cardholderName,\n      brand,\n      number,\n      expMonth,\n      expYear,\n      code,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { FieldType, LinkedIdType } from \"../../../enums\";\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { FieldData } from \"../data/field.data\";\nimport { FieldView } from \"../view/field.view\";\n\nexport class Field extends Domain {\n  name: EncString;\n  value: EncString;\n  type: FieldType;\n  linkedId: LinkedIdType;\n\n  constructor(obj?: FieldData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.type = obj.type;\n    this.linkedId = obj.linkedId;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        name: null,\n        value: null,\n      },\n      []\n    );\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<FieldView> {\n    return this.decryptObj(\n      new FieldView(this),\n      {\n        name: null,\n        value: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toFieldData(): FieldData {\n    const f = new FieldData();\n    this.buildDataModel(\n      this,\n      f,\n      {\n        name: null,\n        value: null,\n        type: null,\n        linkedId: null,\n      },\n      [\"type\", \"linkedId\"]\n    );\n    return f;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Field>>): Field {\n    if (obj == null) {\n      return null;\n    }\n\n    const name = EncString.fromJSON(obj.name);\n    const value = EncString.fromJSON(obj.value);\n\n    return Object.assign(new Field(), obj, {\n      name,\n      value,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { IdentityData } from \"../data/identity.data\";\nimport { IdentityView } from \"../view/identity.view\";\n\nexport class Identity extends Domain {\n  title: EncString;\n  firstName: EncString;\n  middleName: EncString;\n  lastName: EncString;\n  address1: EncString;\n  address2: EncString;\n  address3: EncString;\n  city: EncString;\n  state: EncString;\n  postalCode: EncString;\n  country: EncString;\n  company: EncString;\n  email: EncString;\n  phone: EncString;\n  ssn: EncString;\n  username: EncString;\n  passportNumber: EncString;\n  licenseNumber: EncString;\n\n  constructor(obj?: IdentityData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        title: null,\n        firstName: null,\n        middleName: null,\n        lastName: null,\n        address1: null,\n        address2: null,\n        address3: null,\n        city: null,\n        state: null,\n        postalCode: null,\n        country: null,\n        company: null,\n        email: null,\n        phone: null,\n        ssn: null,\n        username: null,\n        passportNumber: null,\n        licenseNumber: null,\n      },\n      []\n    );\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<IdentityView> {\n    return this.decryptObj(\n      new IdentityView(),\n      {\n        title: null,\n        firstName: null,\n        middleName: null,\n        lastName: null,\n        address1: null,\n        address2: null,\n        address3: null,\n        city: null,\n        state: null,\n        postalCode: null,\n        country: null,\n        company: null,\n        email: null,\n        phone: null,\n        ssn: null,\n        username: null,\n        passportNumber: null,\n        licenseNumber: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toIdentityData(): IdentityData {\n    const i = new IdentityData();\n    this.buildDataModel(this, i, {\n      title: null,\n      firstName: null,\n      middleName: null,\n      lastName: null,\n      address1: null,\n      address2: null,\n      address3: null,\n      city: null,\n      state: null,\n      postalCode: null,\n      country: null,\n      company: null,\n      email: null,\n      phone: null,\n      ssn: null,\n      username: null,\n      passportNumber: null,\n      licenseNumber: null,\n    });\n    return i;\n  }\n\n  static fromJSON(obj: Jsonify<Identity>): Identity {\n    if (obj == null) {\n      return null;\n    }\n\n    const title = EncString.fromJSON(obj.title);\n    const firstName = EncString.fromJSON(obj.firstName);\n    const middleName = EncString.fromJSON(obj.middleName);\n    const lastName = EncString.fromJSON(obj.lastName);\n    const address1 = EncString.fromJSON(obj.address1);\n    const address2 = EncString.fromJSON(obj.address2);\n    const address3 = EncString.fromJSON(obj.address3);\n    const city = EncString.fromJSON(obj.city);\n    const state = EncString.fromJSON(obj.state);\n    const postalCode = EncString.fromJSON(obj.postalCode);\n    const country = EncString.fromJSON(obj.country);\n    const company = EncString.fromJSON(obj.company);\n    const email = EncString.fromJSON(obj.email);\n    const phone = EncString.fromJSON(obj.phone);\n    const ssn = EncString.fromJSON(obj.ssn);\n    const username = EncString.fromJSON(obj.username);\n    const passportNumber = EncString.fromJSON(obj.passportNumber);\n    const licenseNumber = EncString.fromJSON(obj.licenseNumber);\n\n    return Object.assign(new Identity(), obj, {\n      title,\n      firstName,\n      middleName,\n      lastName,\n      address1,\n      address2,\n      address3,\n      city,\n      state,\n      postalCode,\n      country,\n      company,\n      email,\n      phone,\n      ssn,\n      username,\n      passportNumber,\n      licenseNumber,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { UriMatchType } from \"../../../enums\";\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { LoginUriData } from \"../data/login-uri.data\";\nimport { LoginUriView } from \"../view/login-uri.view\";\n\nexport class LoginUri extends Domain {\n  uri: EncString;\n  match: UriMatchType;\n\n  constructor(obj?: LoginUriData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.match = obj.match;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        uri: null,\n      },\n      []\n    );\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<LoginUriView> {\n    return this.decryptObj(\n      new LoginUriView(this),\n      {\n        uri: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toLoginUriData(): LoginUriData {\n    const u = new LoginUriData();\n    this.buildDataModel(\n      this,\n      u,\n      {\n        uri: null,\n        match: null,\n      },\n      [\"match\"]\n    );\n    return u;\n  }\n\n  static fromJSON(obj: Jsonify<LoginUri>): LoginUri {\n    if (obj == null) {\n      return null;\n    }\n\n    const uri = EncString.fromJSON(obj.uri);\n    return Object.assign(new LoginUri(), obj, {\n      uri,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { LoginData } from \"../data/login.data\";\nimport { LoginView } from \"../view/login.view\";\n\nimport { LoginUri } from \"./login-uri\";\n\nexport class Login extends Domain {\n  uris: LoginUri[];\n  username: EncString;\n  password: EncString;\n  passwordRevisionDate?: Date;\n  totp: EncString;\n  autofillOnPageLoad: boolean;\n\n  constructor(obj?: LoginData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.passwordRevisionDate =\n      obj.passwordRevisionDate != null ? new Date(obj.passwordRevisionDate) : null;\n    this.autofillOnPageLoad = obj.autofillOnPageLoad;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        username: null,\n        password: null,\n        totp: null,\n      },\n      []\n    );\n\n    if (obj.uris) {\n      this.uris = [];\n      obj.uris.forEach((u) => {\n        this.uris.push(new LoginUri(u));\n      });\n    }\n  }\n\n  async decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<LoginView> {\n    const view = await this.decryptObj(\n      new LoginView(this),\n      {\n        username: null,\n        password: null,\n        totp: null,\n      },\n      orgId,\n      encKey\n    );\n\n    if (this.uris != null) {\n      view.uris = [];\n      for (let i = 0; i < this.uris.length; i++) {\n        const uri = await this.uris[i].decrypt(orgId, encKey);\n        view.uris.push(uri);\n      }\n    }\n\n    return view;\n  }\n\n  toLoginData(): LoginData {\n    const l = new LoginData();\n    l.passwordRevisionDate =\n      this.passwordRevisionDate != null ? this.passwordRevisionDate.toISOString() : null;\n    l.autofillOnPageLoad = this.autofillOnPageLoad;\n    this.buildDataModel(this, l, {\n      username: null,\n      password: null,\n      totp: null,\n    });\n\n    if (this.uris != null && this.uris.length > 0) {\n      l.uris = [];\n      this.uris.forEach((u) => {\n        l.uris.push(u.toLoginUriData());\n      });\n    }\n\n    return l;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Login>>): Login {\n    if (obj == null) {\n      return null;\n    }\n\n    const username = EncString.fromJSON(obj.username);\n    const password = EncString.fromJSON(obj.password);\n    const totp = EncString.fromJSON(obj.totp);\n    const passwordRevisionDate =\n      obj.passwordRevisionDate == null ? null : new Date(obj.passwordRevisionDate);\n    const uris = obj.uris?.map((uri: any) => LoginUri.fromJSON(uri));\n\n    return Object.assign(new Login(), obj, {\n      username,\n      password,\n      totp,\n      passwordRevisionDate: passwordRevisionDate,\n      uris: uris,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { PasswordHistoryData } from \"../data/password-history.data\";\nimport { PasswordHistoryView } from \"../view/password-history.view\";\n\nexport class Password extends Domain {\n  password: EncString;\n  lastUsedDate: Date;\n\n  constructor(obj?: PasswordHistoryData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(this, obj, {\n      password: null,\n    });\n    this.lastUsedDate = new Date(obj.lastUsedDate);\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<PasswordHistoryView> {\n    return this.decryptObj(\n      new PasswordHistoryView(this),\n      {\n        password: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toPasswordHistoryData(): PasswordHistoryData {\n    const ph = new PasswordHistoryData();\n    ph.lastUsedDate = this.lastUsedDate.toISOString();\n    this.buildDataModel(this, ph, {\n      password: null,\n    });\n    return ph;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Password>>): Password {\n    if (obj == null) {\n      return null;\n    }\n\n    const password = EncString.fromJSON(obj.password);\n    const lastUsedDate = obj.lastUsedDate == null ? null : new Date(obj.lastUsedDate);\n\n    return Object.assign(new Password(), obj, {\n      password,\n      lastUsedDate,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { SecureNoteType } from \"../../../enums\";\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { SecureNoteData } from \"../data/secure-note.data\";\nimport { SecureNoteView } from \"../view/secure-note.view\";\n\nexport class SecureNote extends Domain {\n  type: SecureNoteType;\n\n  constructor(obj?: SecureNoteData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.type = obj.type;\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<SecureNoteView> {\n    return Promise.resolve(new SecureNoteView(this));\n  }\n\n  toSecureNoteData(): SecureNoteData {\n    const n = new SecureNoteData();\n    n.type = this.type;\n    return n;\n  }\n\n  static fromJSON(obj: Jsonify<SecureNote>): SecureNote {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new SecureNote(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Decryptable } from \"../../../platform/interfaces/decryptable.interface\";\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { InitializerKey } from \"../../../platform/services/cryptography/initializer-key\";\nimport { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../enums/cipher-type\";\nimport { CipherData } from \"../data/cipher.data\";\nimport { LocalData } from \"../data/local.data\";\nimport { CipherView } from \"../view/cipher.view\";\n\nimport { Attachment } from \"./attachment\";\nimport { Card } from \"./card\";\nimport { Field } from \"./field\";\nimport { Identity } from \"./identity\";\nimport { Login } from \"./login\";\nimport { Password } from \"./password\";\nimport { SecureNote } from \"./secure-note\";\n\nexport class Cipher extends Domain implements Decryptable<CipherView> {\n  readonly initializerKey = InitializerKey.Cipher;\n\n  id: string;\n  organizationId: string;\n  folderId: string;\n  name: EncString;\n  notes: EncString;\n  type: CipherType;\n  favorite: boolean;\n  organizationUseTotp: boolean;\n  edit: boolean;\n  viewPassword: boolean;\n  revisionDate: Date;\n  localData: LocalData;\n  login: Login;\n  identity: Identity;\n  card: Card;\n  secureNote: SecureNote;\n  attachments: Attachment[];\n  fields: Field[];\n  passwordHistory: Password[];\n  collectionIds: string[];\n  creationDate: Date;\n  deletedDate: Date;\n  reprompt: CipherRepromptType;\n\n  constructor(obj?: CipherData, localData: LocalData = null) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        organizationId: null,\n        folderId: null,\n        name: null,\n        notes: null,\n      },\n      [\"id\", \"organizationId\", \"folderId\"]\n    );\n\n    this.type = obj.type;\n    this.favorite = obj.favorite;\n    this.organizationUseTotp = obj.organizationUseTotp;\n    this.edit = obj.edit;\n    if (obj.viewPassword != null) {\n      this.viewPassword = obj.viewPassword;\n    } else {\n      this.viewPassword = true; // Default for already synced Ciphers without viewPassword\n    }\n    this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;\n    this.collectionIds = obj.collectionIds;\n    this.localData = localData;\n    this.creationDate = obj.creationDate != null ? new Date(obj.creationDate) : null;\n    this.deletedDate = obj.deletedDate != null ? new Date(obj.deletedDate) : null;\n    this.reprompt = obj.reprompt;\n\n    switch (this.type) {\n      case CipherType.Login:\n        this.login = new Login(obj.login);\n        break;\n      case CipherType.SecureNote:\n        this.secureNote = new SecureNote(obj.secureNote);\n        break;\n      case CipherType.Card:\n        this.card = new Card(obj.card);\n        break;\n      case CipherType.Identity:\n        this.identity = new Identity(obj.identity);\n        break;\n      default:\n        break;\n    }\n\n    if (obj.attachments != null) {\n      this.attachments = obj.attachments.map((a) => new Attachment(a));\n    } else {\n      this.attachments = null;\n    }\n\n    if (obj.fields != null) {\n      this.fields = obj.fields.map((f) => new Field(f));\n    } else {\n      this.fields = null;\n    }\n\n    if (obj.passwordHistory != null) {\n      this.passwordHistory = obj.passwordHistory.map((ph) => new Password(ph));\n    } else {\n      this.passwordHistory = null;\n    }\n  }\n\n  async decrypt(encKey?: SymmetricCryptoKey): Promise<CipherView> {\n    const model = new CipherView(this);\n\n    await this.decryptObj(\n      model,\n      {\n        name: null,\n        notes: null,\n      },\n      this.organizationId,\n      encKey\n    );\n\n    switch (this.type) {\n      case CipherType.Login:\n        model.login = await this.login.decrypt(this.organizationId, encKey);\n        break;\n      case CipherType.SecureNote:\n        model.secureNote = await this.secureNote.decrypt(this.organizationId, encKey);\n        break;\n      case CipherType.Card:\n        model.card = await this.card.decrypt(this.organizationId, encKey);\n        break;\n      case CipherType.Identity:\n        model.identity = await this.identity.decrypt(this.organizationId, encKey);\n        break;\n      default:\n        break;\n    }\n\n    const orgId = this.organizationId;\n\n    if (this.attachments != null && this.attachments.length > 0) {\n      const attachments: any[] = [];\n      await this.attachments.reduce((promise, attachment) => {\n        return promise\n          .then(() => {\n            return attachment.decrypt(orgId, encKey);\n          })\n          .then((decAttachment) => {\n            attachments.push(decAttachment);\n          });\n      }, Promise.resolve());\n      model.attachments = attachments;\n    }\n\n    if (this.fields != null && this.fields.length > 0) {\n      const fields: any[] = [];\n      await this.fields.reduce((promise, field) => {\n        return promise\n          .then(() => {\n            return field.decrypt(orgId, encKey);\n          })\n          .then((decField) => {\n            fields.push(decField);\n          });\n      }, Promise.resolve());\n      model.fields = fields;\n    }\n\n    if (this.passwordHistory != null && this.passwordHistory.length > 0) {\n      const passwordHistory: any[] = [];\n      await this.passwordHistory.reduce((promise, ph) => {\n        return promise\n          .then(() => {\n            return ph.decrypt(orgId, encKey);\n          })\n          .then((decPh) => {\n            passwordHistory.push(decPh);\n          });\n      }, Promise.resolve());\n      model.passwordHistory = passwordHistory;\n    }\n\n    return model;\n  }\n\n  toCipherData(): CipherData {\n    const c = new CipherData();\n    c.id = this.id;\n    c.organizationId = this.organizationId;\n    c.folderId = this.folderId;\n    c.edit = this.edit;\n    c.viewPassword = this.viewPassword;\n    c.organizationUseTotp = this.organizationUseTotp;\n    c.favorite = this.favorite;\n    c.revisionDate = this.revisionDate != null ? this.revisionDate.toISOString() : null;\n    c.type = this.type;\n    c.collectionIds = this.collectionIds;\n    c.creationDate = this.creationDate != null ? this.creationDate.toISOString() : null;\n    c.deletedDate = this.deletedDate != null ? this.deletedDate.toISOString() : null;\n    c.reprompt = this.reprompt;\n\n    this.buildDataModel(this, c, {\n      name: null,\n      notes: null,\n    });\n\n    switch (c.type) {\n      case CipherType.Login:\n        c.login = this.login.toLoginData();\n        break;\n      case CipherType.SecureNote:\n        c.secureNote = this.secureNote.toSecureNoteData();\n        break;\n      case CipherType.Card:\n        c.card = this.card.toCardData();\n        break;\n      case CipherType.Identity:\n        c.identity = this.identity.toIdentityData();\n        break;\n      default:\n        break;\n    }\n\n    if (this.fields != null) {\n      c.fields = this.fields.map((f) => f.toFieldData());\n    }\n    if (this.attachments != null) {\n      c.attachments = this.attachments.map((a) => a.toAttachmentData());\n    }\n    if (this.passwordHistory != null) {\n      c.passwordHistory = this.passwordHistory.map((ph) => ph.toPasswordHistoryData());\n    }\n    return c;\n  }\n\n  static fromJSON(obj: Jsonify<Cipher>) {\n    if (obj == null) {\n      return null;\n    }\n\n    const domain = new Cipher();\n    const name = EncString.fromJSON(obj.name);\n    const notes = EncString.fromJSON(obj.notes);\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    const deletedDate = obj.deletedDate == null ? null : new Date(obj.deletedDate);\n    const attachments = obj.attachments?.map((a: any) => Attachment.fromJSON(a));\n    const fields = obj.fields?.map((f: any) => Field.fromJSON(f));\n    const passwordHistory = obj.passwordHistory?.map((ph: any) => Password.fromJSON(ph));\n\n    Object.assign(domain, obj, {\n      name,\n      notes,\n      revisionDate,\n      deletedDate,\n      attachments,\n      fields,\n      passwordHistory,\n    });\n\n    switch (obj.type) {\n      case CipherType.Card:\n        domain.card = Card.fromJSON(obj.card);\n        break;\n      case CipherType.Identity:\n        domain.identity = Identity.fromJSON(obj.identity);\n        break;\n      case CipherType.Login:\n        domain.login = Login.fromJSON(obj.login);\n        break;\n      case CipherType.SecureNote:\n        domain.secureNote = SecureNote.fromJSON(obj.secureNote);\n        break;\n      default:\n        break;\n    }\n\n    return domain;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Cipher } from \"../../../vault/models/domain/cipher\";\nimport { CipherView } from \"../../../vault/models/view/cipher.view\";\nimport { InitializerMetadata } from \"../../interfaces/initializer-metadata.interface\";\n\nimport { InitializerKey } from \"./initializer-key\";\n\n/**\n * Internal reference of classes so we can reconstruct objects properly.\n * Each entry should be keyed using the Decryptable.initializerKey property\n */\nconst classInitializers: Record<InitializerKey, (obj: any) => any> = {\n  [InitializerKey.Cipher]: Cipher.fromJSON,\n  [InitializerKey.CipherView]: CipherView.fromJSON,\n};\n\nexport function getClassInitializer<T extends InitializerMetadata>(\n  className: InitializerKey\n): (obj: Jsonify<T>) => T {\n  return classInitializers[className];\n}\n","import { defaultIfEmpty, filter, firstValueFrom, fromEvent, map, Subject, takeUntil } from \"rxjs\";\nimport { Jsonify } from \"type-fest\";\n\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { Decryptable } from \"../../interfaces/decryptable.interface\";\nimport { InitializerMetadata } from \"../../interfaces/initializer-metadata.interface\";\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\n\nimport { EncryptServiceImplementation } from \"./encrypt.service.implementation\";\nimport { getClassInitializer } from \"./get-class-initializer\";\n\n// TTL (time to live) is not strictly required but avoids tying up memory resources if inactive\nconst workerTTL = 3 * 60000; // 3 minutes\n\nexport class MultithreadEncryptServiceImplementation extends EncryptServiceImplementation {\n  private worker: Worker;\n  private timeout: any;\n\n  private clear$ = new Subject<void>();\n\n  /**\n   * Sends items to a web worker to decrypt them.\n   * This utilises multithreading to decrypt items faster without interrupting other operations (e.g. updating UI).\n   */\n  async decryptItems<T extends InitializerMetadata>(\n    items: Decryptable<T>[],\n    key: SymmetricCryptoKey\n  ): Promise<T[]> {\n    if (items == null || items.length < 1) {\n      return [];\n    }\n\n    this.logService.info(\"Starting decryption using multithreading\");\n\n    this.worker ??= new Worker(\n      new URL(\n        /* webpackChunkName: 'encrypt-worker' */\n        \"@bitwarden/common/platform/services/cryptography/encrypt.worker.ts\",\n        import.meta.url\n      )\n    );\n\n    this.restartTimeout();\n\n    const request = {\n      id: Utils.newGuid(),\n      items: items,\n      key: key,\n    };\n\n    this.worker.postMessage(JSON.stringify(request));\n\n    return await firstValueFrom(\n      fromEvent(this.worker, \"message\").pipe(\n        filter((response: MessageEvent) => response.data?.id === request.id),\n        map((response) => JSON.parse(response.data.items)),\n        map((items) =>\n          items.map((jsonItem: Jsonify<T>) => {\n            const initializer = getClassInitializer<T>(jsonItem.initializerKey);\n            return initializer(jsonItem);\n          })\n        ),\n        takeUntil(this.clear$),\n        defaultIfEmpty([])\n      )\n    );\n  }\n\n  private clear() {\n    this.clear$.next();\n    this.worker?.terminate();\n    this.worker = null;\n    this.clearTimeout();\n  }\n\n  private restartTimeout() {\n    this.clearTimeout();\n    this.timeout = setTimeout(() => this.clear(), workerTTL);\n  }\n\n  private clearTimeout() {\n    if (this.timeout != null) {\n      clearTimeout(this.timeout);\n    }\n  }\n}\n","import { LogService } from \"../../abstractions/log.service\";\nimport { Utils } from \"../../misc/utils\";\nimport { EncArrayBuffer } from \"../../models/domain/enc-array-buffer\";\n\nconst MAX_SINGLE_BLOB_UPLOAD_SIZE = 256 * 1024 * 1024; // 256 MiB\nconst MAX_BLOCKS_PER_BLOB = 50000;\n\nexport class AzureFileUploadService {\n  constructor(private logService: LogService) {}\n\n  async upload(url: string, data: EncArrayBuffer, renewalCallback: () => Promise<string>) {\n    if (data.buffer.byteLength <= MAX_SINGLE_BLOB_UPLOAD_SIZE) {\n      return await this.azureUploadBlob(url, data);\n    } else {\n      return await this.azureUploadBlocks(url, data, renewalCallback);\n    }\n  }\n  private async azureUploadBlob(url: string, data: EncArrayBuffer) {\n    const urlObject = Utils.getUrl(url);\n    const headers = new Headers({\n      \"x-ms-date\": new Date().toUTCString(),\n      \"x-ms-version\": urlObject.searchParams.get(\"sv\"),\n      \"Content-Length\": data.buffer.byteLength.toString(),\n      \"x-ms-blob-type\": \"BlockBlob\",\n    });\n\n    const request = new Request(url, {\n      body: data.buffer,\n      cache: \"no-store\",\n      method: \"PUT\",\n      headers: headers,\n    });\n\n    const blobResponse = await fetch(request);\n\n    if (blobResponse.status !== 201) {\n      throw new Error(`Failed to create Azure blob: ${blobResponse.status}`);\n    }\n  }\n  private async azureUploadBlocks(\n    url: string,\n    data: EncArrayBuffer,\n    renewalCallback: () => Promise<string>\n  ) {\n    const baseUrl = Utils.getUrl(url);\n    const blockSize = this.getMaxBlockSize(baseUrl.searchParams.get(\"sv\"));\n    let blockIndex = 0;\n    const numBlocks = Math.ceil(data.buffer.byteLength / blockSize);\n    const blocksStaged: string[] = [];\n\n    if (numBlocks > MAX_BLOCKS_PER_BLOB) {\n      throw new Error(\n        `Cannot upload file, exceeds maximum size of ${blockSize * MAX_BLOCKS_PER_BLOB}`\n      );\n    }\n\n    // eslint-disable-next-line\n    try {\n      while (blockIndex < numBlocks) {\n        url = await this.renewUrlIfNecessary(url, renewalCallback);\n        const blockUrl = Utils.getUrl(url);\n        const blockId = this.encodedBlockId(blockIndex);\n        blockUrl.searchParams.append(\"comp\", \"block\");\n        blockUrl.searchParams.append(\"blockid\", blockId);\n        const start = blockIndex * blockSize;\n        const blockData = data.buffer.slice(start, start + blockSize);\n        const blockHeaders = new Headers({\n          \"x-ms-date\": new Date().toUTCString(),\n          \"x-ms-version\": blockUrl.searchParams.get(\"sv\"),\n          \"Content-Length\": blockData.byteLength.toString(),\n        });\n\n        const blockRequest = new Request(blockUrl.toString(), {\n          body: blockData,\n          cache: \"no-store\",\n          method: \"PUT\",\n          headers: blockHeaders,\n        });\n\n        const blockResponse = await fetch(blockRequest);\n\n        if (blockResponse.status !== 201) {\n          const message = `Unsuccessful block PUT. Received status ${blockResponse.status}`;\n          this.logService.error(message + \"\\n\" + (await blockResponse.json()));\n          throw new Error(message);\n        }\n\n        blocksStaged.push(blockId);\n        blockIndex++;\n      }\n\n      url = await this.renewUrlIfNecessary(url, renewalCallback);\n      const blockListUrl = Utils.getUrl(url);\n      const blockListXml = this.blockListXml(blocksStaged);\n      blockListUrl.searchParams.append(\"comp\", \"blocklist\");\n      const headers = new Headers({\n        \"x-ms-date\": new Date().toUTCString(),\n        \"x-ms-version\": blockListUrl.searchParams.get(\"sv\"),\n        \"Content-Length\": blockListXml.length.toString(),\n      });\n\n      const request = new Request(blockListUrl.toString(), {\n        body: blockListXml,\n        cache: \"no-store\",\n        method: \"PUT\",\n        headers: headers,\n      });\n\n      const response = await fetch(request);\n\n      if (response.status !== 201) {\n        const message = `Unsuccessful block list PUT. Received status ${response.status}`;\n        this.logService.error(message + \"\\n\" + (await response.json()));\n        throw new Error(message);\n      }\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  private async renewUrlIfNecessary(\n    url: string,\n    renewalCallback: () => Promise<string>\n  ): Promise<string> {\n    const urlObject = Utils.getUrl(url);\n    const expiry = new Date(urlObject.searchParams.get(\"se\") ?? \"\");\n\n    if (isNaN(expiry.getTime())) {\n      expiry.setTime(Date.now() + 3600000);\n    }\n\n    if (expiry.getTime() < Date.now() + 1000) {\n      return await renewalCallback();\n    }\n    return url;\n  }\n\n  private encodedBlockId(blockIndex: number) {\n    // Encoded blockId max size is 64, so pre-encoding max size is 48\n    const utfBlockId = (\n      \"000000000000000000000000000000000000000000000000\" + blockIndex.toString()\n    ).slice(-48);\n    return Utils.fromUtf8ToB64(utfBlockId);\n  }\n\n  private blockListXml(blockIdList: string[]) {\n    let xml = '<?xml version=\"1.0\" encoding=\"utf-8\"?><BlockList>';\n    blockIdList.forEach((blockId) => {\n      xml += `<Latest>${blockId}</Latest>`;\n    });\n    xml += \"</BlockList>\";\n    return xml;\n  }\n\n  private getMaxBlockSize(version: string) {\n    if (Version.compare(version, \"2019-12-12\") >= 0) {\n      return 4000 * 1024 * 1024; // 4000 MiB\n    } else if (Version.compare(version, \"2016-05-31\") >= 0) {\n      return 100 * 1024 * 1024; // 100 MiB\n    } else {\n      return 4 * 1024 * 1024; // 4 MiB\n    }\n  }\n}\n\nclass Version {\n  /**\n   * Compares two Azure Versions against each other\n   * @param a Version to compare\n   * @param b Version to compare\n   * @returns a number less than zero if b is newer than a, 0 if equal,\n   * and greater than zero if a is newer than b\n   */\n  static compare(a: Required<Version> | string, b: Required<Version> | string) {\n    if (typeof a === \"string\") {\n      a = new Version(a);\n    }\n\n    if (typeof b === \"string\") {\n      b = new Version(b);\n    }\n\n    return a.year !== b.year\n      ? a.year - b.year\n      : a.month !== b.month\n      ? a.month - b.month\n      : a.day !== b.day\n      ? a.day - b.day\n      : 0;\n  }\n  year = 0;\n  month = 0;\n  day = 0;\n\n  constructor(version: string) {\n    try {\n      const parts = version.split(\"-\").map((v) => Number.parseInt(v, 10));\n      this.year = parts[0];\n      this.month = parts[1];\n      this.day = parts[2];\n    } catch {\n      // Ignore error\n    }\n  }\n  /**\n   * Compares two Azure Versions against each other\n   * @param compareTo Version to compare against\n   * @returns a number less than zero if compareTo is newer, 0 if equal,\n   * and greater than zero if this is greater than compareTo\n   */\n  compare(compareTo: Required<Version> | string) {\n    return Version.compare(this, compareTo);\n  }\n}\n","import { Utils } from \"../../misc/utils\";\nimport { EncArrayBuffer } from \"../../models/domain/enc-array-buffer\";\n\nexport class BitwardenFileUploadService {\n  async upload(\n    encryptedFileName: string,\n    encryptedFileData: EncArrayBuffer,\n    apiCall: (fd: FormData) => Promise<any>\n  ) {\n    const fd = new FormData();\n    try {\n      const blob = new Blob([encryptedFileData.buffer], { type: \"application/octet-stream\" });\n      fd.append(\"data\", blob, encryptedFileName);\n    } catch (e) {\n      if (Utils.isNode && !Utils.isBrowser) {\n        fd.append(\n          \"data\",\n          Buffer.from(encryptedFileData.buffer) as any,\n          {\n            filepath: encryptedFileName,\n            contentType: \"application/octet-stream\",\n          } as any\n        );\n      } else {\n        throw e;\n      }\n    }\n\n    await apiCall(fd);\n  }\n}\n","import { FileUploadType } from \"../../../enums\";\nimport {\n  FileUploadApiMethods,\n  FileUploadService as FileUploadServiceAbstraction,\n} from \"../../abstractions/file-upload/file-upload.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { EncArrayBuffer } from \"../../models/domain/enc-array-buffer\";\nimport { EncString } from \"../../models/domain/enc-string\";\n\nimport { AzureFileUploadService } from \"./azure-file-upload.service\";\nimport { BitwardenFileUploadService } from \"./bitwarden-file-upload.service\";\n\nexport class FileUploadService implements FileUploadServiceAbstraction {\n  private azureFileUploadService: AzureFileUploadService;\n  private bitwardenFileUploadService: BitwardenFileUploadService;\n\n  constructor(protected logService: LogService) {\n    this.azureFileUploadService = new AzureFileUploadService(logService);\n    this.bitwardenFileUploadService = new BitwardenFileUploadService();\n  }\n\n  async upload(\n    uploadData: { url: string; fileUploadType: FileUploadType },\n    fileName: EncString,\n    encryptedFileData: EncArrayBuffer,\n    fileUploadMethods: FileUploadApiMethods\n  ) {\n    try {\n      switch (uploadData.fileUploadType) {\n        case FileUploadType.Direct:\n          await this.bitwardenFileUploadService.upload(\n            fileName.encryptedString,\n            encryptedFileData,\n            (fd) => fileUploadMethods.postDirect(fd)\n          );\n          break;\n        case FileUploadType.Azure: {\n          await this.azureFileUploadService.upload(\n            uploadData.url,\n            encryptedFileData,\n            fileUploadMethods.renewFileUploadUrl\n          );\n          break;\n        }\n        default:\n          throw new Error(\"Unknown file upload type\");\n      }\n    } catch (e) {\n      await fileUploadMethods.rollback();\n      throw e;\n    }\n  }\n}\n","import { MemoryStorageOptions, StorageOptions } from \"../models/domain/storage-options\";\n\nexport abstract class AbstractStorageService {\n  abstract get<T>(key: string, options?: StorageOptions): Promise<T>;\n  abstract has(key: string, options?: StorageOptions): Promise<boolean>;\n  abstract save<T>(key: string, obj: T, options?: StorageOptions): Promise<void>;\n  abstract remove(key: string, options?: StorageOptions): Promise<void>;\n}\n\nexport abstract class AbstractMemoryStorageService extends AbstractStorageService {\n  // Used to identify the service in the session sync decorator framework\n  static readonly TYPE = \"MemoryStorageService\";\n  readonly type = AbstractMemoryStorageService.TYPE;\n\n  abstract get<T>(key: string, options?: MemoryStorageOptions<T>): Promise<T>;\n  abstract getBypassCache<T>(key: string, options?: MemoryStorageOptions<T>): Promise<T>;\n}\n","import { AbstractMemoryStorageService } from \"../abstractions/storage.service\";\n\nexport class MemoryStorageService extends AbstractMemoryStorageService {\n  private store = new Map<string, any>();\n\n  get<T>(key: string): Promise<T> {\n    if (this.store.has(key)) {\n      const obj = this.store.get(key);\n      return Promise.resolve(obj as T);\n    }\n    return Promise.resolve(null);\n  }\n\n  async has(key: string): Promise<boolean> {\n    return (await this.get(key)) != null;\n  }\n\n  save(key: string, obj: any): Promise<any> {\n    if (obj == null) {\n      return this.remove(key);\n    }\n    this.store.set(key, obj);\n    return Promise.resolve();\n  }\n\n  remove(key: string): Promise<any> {\n    this.store.delete(key);\n    return Promise.resolve();\n  }\n\n  getBypassCache<T>(key: string): Promise<T> {\n    return this.get<T>(key);\n  }\n}\n","import { OrganizationData } from \"../../admin-console/models/data/organization.data\";\nimport { PolicyData } from \"../../admin-console/models/data/policy.data\";\nimport { ProviderData } from \"../../admin-console/models/data/provider.data\";\nimport { EnvironmentUrls } from \"../../auth/models/domain/environment-urls\";\nimport { TokenService } from \"../../auth/services/token.service\";\nimport { StateVersion, ThemeType, KdfType, HtmlStorageLocation } from \"../../enums\";\nimport { EventData } from \"../../models/data/event.data\";\nimport { GeneratedPasswordHistory } from \"../../tools/generator/password\";\nimport { SendData } from \"../../tools/send/models/data/send.data\";\nimport { CipherData } from \"../../vault/models/data/cipher.data\";\nimport { CollectionData } from \"../../vault/models/data/collection.data\";\nimport { FolderData } from \"../../vault/models/data/folder.data\";\nimport { AbstractStorageService } from \"../abstractions/storage.service\";\nimport { StateFactory } from \"../factories/state-factory\";\nimport {\n  Account,\n  AccountSettings,\n  EncryptionPair,\n  AccountSettingsSettings,\n} from \"../models/domain/account\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { GlobalState } from \"../models/domain/global-state\";\nimport { StorageOptions } from \"../models/domain/storage-options\";\n\n// Originally (before January 2022) storage was handled as a flat key/value pair store.\n// With the move to a typed object for state storage these keys should no longer be in use anywhere outside of this migration.\nconst v1Keys: { [key: string]: string } = {\n  accessToken: \"accessToken\",\n  alwaysShowDock: \"alwaysShowDock\",\n  autoConfirmFingerprints: \"autoConfirmFingerprints\",\n  autoFillOnPageLoadDefault: \"autoFillOnPageLoadDefault\",\n  biometricAwaitingAcceptance: \"biometricAwaitingAcceptance\",\n  biometricFingerprintValidated: \"biometricFingerprintValidated\",\n  biometricText: \"biometricText\",\n  biometricUnlock: \"biometric\",\n  clearClipboard: \"clearClipboardKey\",\n  clientId: \"apikey_clientId\",\n  clientSecret: \"apikey_clientSecret\",\n  collapsedGroupings: \"collapsedGroupings\",\n  convertAccountToKeyConnector: \"convertAccountToKeyConnector\",\n  defaultUriMatch: \"defaultUriMatch\",\n  disableAddLoginNotification: \"disableAddLoginNotification\",\n  disableAutoBiometricsPrompt: \"noAutoPromptBiometrics\",\n  disableAutoTotpCopy: \"disableAutoTotpCopy\",\n  disableBadgeCounter: \"disableBadgeCounter\",\n  disableChangedPasswordNotification: \"disableChangedPasswordNotification\",\n  disableContextMenuItem: \"disableContextMenuItem\",\n  disableFavicon: \"disableFavicon\",\n  disableGa: \"disableGa\",\n  dontShowCardsCurrentTab: \"dontShowCardsCurrentTab\",\n  dontShowIdentitiesCurrentTab: \"dontShowIdentitiesCurrentTab\",\n  emailVerified: \"emailVerified\",\n  enableAlwaysOnTop: \"enableAlwaysOnTopKey\",\n  enableAutoFillOnPageLoad: \"enableAutoFillOnPageLoad\",\n  enableBiometric: \"enabledBiometric\",\n  enableBrowserIntegration: \"enableBrowserIntegration\",\n  enableBrowserIntegrationFingerprint: \"enableBrowserIntegrationFingerprint\",\n  enableCloseToTray: \"enableCloseToTray\",\n  enableFullWidth: \"enableFullWidth\",\n  enableMinimizeToTray: \"enableMinimizeToTray\",\n  enableStartToTray: \"enableStartToTrayKey\",\n  enableTray: \"enableTray\",\n  encKey: \"encKey\", // Generated Symmetric Key\n  encOrgKeys: \"encOrgKeys\",\n  encPrivate: \"encPrivateKey\",\n  encProviderKeys: \"encProviderKeys\",\n  entityId: \"entityId\",\n  entityType: \"entityType\",\n  environmentUrls: \"environmentUrls\",\n  equivalentDomains: \"equivalentDomains\",\n  eventCollection: \"eventCollection\",\n  forcePasswordReset: \"forcePasswordReset\",\n  history: \"generatedPasswordHistory\",\n  installedVersion: \"installedVersion\",\n  kdf: \"kdf\",\n  kdfIterations: \"kdfIterations\",\n  key: \"key\", // Master Key\n  keyHash: \"keyHash\",\n  lastActive: \"lastActive\",\n  localData: \"sitesLocalData\",\n  locale: \"locale\",\n  mainWindowSize: \"mainWindowSize\",\n  minimizeOnCopyToClipboard: \"minimizeOnCopyToClipboardKey\",\n  neverDomains: \"neverDomains\",\n  noAutoPromptBiometricsText: \"noAutoPromptBiometricsText\",\n  openAtLogin: \"openAtLogin\",\n  passwordGenerationOptions: \"passwordGenerationOptions\",\n  pinProtected: \"pinProtectedKey\",\n  protectedPin: \"protectedPin\",\n  refreshToken: \"refreshToken\",\n  ssoCodeVerifier: \"ssoCodeVerifier\",\n  ssoIdentifier: \"ssoOrgIdentifier\",\n  ssoState: \"ssoState\",\n  stamp: \"securityStamp\",\n  theme: \"theme\",\n  userEmail: \"userEmail\",\n  userId: \"userId\",\n  usesConnector: \"usesKeyConnector\",\n  vaultTimeoutAction: \"vaultTimeoutAction\",\n  vaultTimeout: \"lockOption\",\n  rememberedEmail: \"rememberedEmail\",\n};\n\nconst v1KeyPrefixes: { [key: string]: string } = {\n  ciphers: \"ciphers_\",\n  collections: \"collections_\",\n  folders: \"folders_\",\n  lastSync: \"lastSync_\",\n  policies: \"policies_\",\n  twoFactorToken: \"twoFactorToken_\",\n  organizations: \"organizations_\",\n  providers: \"providers_\",\n  sends: \"sends_\",\n  settings: \"settings_\",\n};\n\nconst keys = {\n  global: \"global\",\n  authenticatedAccounts: \"authenticatedAccounts\",\n  activeUserId: \"activeUserId\",\n  tempAccountSettings: \"tempAccountSettings\", // used to hold account specific settings (i.e clear clipboard) between initial migration and first account authentication\n  accountActivity: \"accountActivity\",\n};\n\nconst partialKeys = {\n  autoKey: \"_masterkey_auto\",\n  biometricKey: \"_masterkey_biometric\",\n  masterKey: \"_masterkey\",\n};\n\nexport class StateMigrationService<\n  TGlobalState extends GlobalState = GlobalState,\n  TAccount extends Account = Account\n> {\n  constructor(\n    protected storageService: AbstractStorageService,\n    protected secureStorageService: AbstractStorageService,\n    protected stateFactory: StateFactory<TGlobalState, TAccount>\n  ) {}\n\n  async needsMigration(): Promise<boolean> {\n    const currentStateVersion = await this.getCurrentStateVersion();\n    return currentStateVersion == null || currentStateVersion < StateVersion.Latest;\n  }\n\n  async migrate(): Promise<void> {\n    let currentStateVersion = await this.getCurrentStateVersion();\n    while (currentStateVersion < StateVersion.Latest) {\n      switch (currentStateVersion) {\n        case StateVersion.One:\n          await this.migrateStateFrom1To2();\n          break;\n        case StateVersion.Two:\n          await this.migrateStateFrom2To3();\n          break;\n        case StateVersion.Three:\n          await this.migrateStateFrom3To4();\n          break;\n        case StateVersion.Four: {\n          const authenticatedAccounts = await this.getAuthenticatedAccounts();\n          for (const account of authenticatedAccounts) {\n            const migratedAccount = await this.migrateAccountFrom4To5(account);\n            await this.set(account.profile.userId, migratedAccount);\n          }\n          await this.setCurrentStateVersion(StateVersion.Five);\n          break;\n        }\n        case StateVersion.Five: {\n          const authenticatedAccounts = await this.getAuthenticatedAccounts();\n          for (const account of authenticatedAccounts) {\n            const migratedAccount = await this.migrateAccountFrom5To6(account);\n            await this.set(account.profile.userId, migratedAccount);\n          }\n          await this.setCurrentStateVersion(StateVersion.Six);\n          break;\n        }\n        case StateVersion.Six: {\n          const authenticatedAccounts = await this.getAuthenticatedAccounts();\n          const globals = (await this.getGlobals()) as any;\n          for (const account of authenticatedAccounts) {\n            const migratedAccount = await this.migrateAccountFrom6To7(\n              globals?.noAutoPromptBiometrics,\n              account\n            );\n            await this.set(account.profile.userId, migratedAccount);\n          }\n          if (globals) {\n            delete globals.noAutoPromptBiometrics;\n          }\n          await this.set(keys.global, globals);\n          await this.setCurrentStateVersion(StateVersion.Seven);\n        }\n      }\n\n      currentStateVersion += 1;\n    }\n  }\n\n  protected async migrateStateFrom1To2(): Promise<void> {\n    const clearV1Keys = async (clearingUserId?: string) => {\n      for (const key in v1Keys) {\n        if (key == null) {\n          continue;\n        }\n        await this.set(v1Keys[key], null);\n      }\n      if (clearingUserId != null) {\n        for (const keyPrefix in v1KeyPrefixes) {\n          if (keyPrefix == null) {\n            continue;\n          }\n          await this.set(v1KeyPrefixes[keyPrefix] + userId, null);\n        }\n      }\n    };\n\n    // Some processes, like biometrics, may have already defined a value before migrations are run.\n    // We don't want to null out those values if they don't exist in the old storage scheme (like for new installs)\n    // So, the OOO for migration is that we:\n    // 1. Check for an existing storage value from the old storage structure OR\n    // 2. Check for a value already set by processes that run before migration OR\n    // 3. Assign the default value\n    const globals: any =\n      (await this.get<GlobalState>(keys.global)) ?? this.stateFactory.createGlobal(null);\n    globals.stateVersion = StateVersion.Two;\n    globals.environmentUrls =\n      (await this.get<EnvironmentUrls>(v1Keys.environmentUrls)) ?? globals.environmentUrls;\n    globals.locale = (await this.get<string>(v1Keys.locale)) ?? globals.locale;\n    globals.noAutoPromptBiometrics =\n      (await this.get<boolean>(v1Keys.disableAutoBiometricsPrompt)) ??\n      globals.noAutoPromptBiometrics;\n    globals.noAutoPromptBiometricsText =\n      (await this.get<string>(v1Keys.noAutoPromptBiometricsText)) ??\n      globals.noAutoPromptBiometricsText;\n    globals.ssoCodeVerifier =\n      (await this.get<string>(v1Keys.ssoCodeVerifier)) ?? globals.ssoCodeVerifier;\n    globals.ssoOrganizationIdentifier =\n      (await this.get<string>(v1Keys.ssoIdentifier)) ?? globals.ssoOrganizationIdentifier;\n    globals.ssoState = (await this.get<any>(v1Keys.ssoState)) ?? globals.ssoState;\n    globals.rememberedEmail =\n      (await this.get<string>(v1Keys.rememberedEmail)) ?? globals.rememberedEmail;\n    globals.theme = (await this.get<ThemeType>(v1Keys.theme)) ?? globals.theme;\n    globals.vaultTimeout = (await this.get<number>(v1Keys.vaultTimeout)) ?? globals.vaultTimeout;\n    globals.vaultTimeoutAction =\n      (await this.get<string>(v1Keys.vaultTimeoutAction)) ?? globals.vaultTimeoutAction;\n    globals.window = (await this.get<any>(v1Keys.mainWindowSize)) ?? globals.window;\n    globals.enableTray = (await this.get<boolean>(v1Keys.enableTray)) ?? globals.enableTray;\n    globals.enableMinimizeToTray =\n      (await this.get<boolean>(v1Keys.enableMinimizeToTray)) ?? globals.enableMinimizeToTray;\n    globals.enableCloseToTray =\n      (await this.get<boolean>(v1Keys.enableCloseToTray)) ?? globals.enableCloseToTray;\n    globals.enableStartToTray =\n      (await this.get<boolean>(v1Keys.enableStartToTray)) ?? globals.enableStartToTray;\n    globals.openAtLogin = (await this.get<boolean>(v1Keys.openAtLogin)) ?? globals.openAtLogin;\n    globals.alwaysShowDock =\n      (await this.get<boolean>(v1Keys.alwaysShowDock)) ?? globals.alwaysShowDock;\n    globals.enableBrowserIntegration =\n      (await this.get<boolean>(v1Keys.enableBrowserIntegration)) ??\n      globals.enableBrowserIntegration;\n    globals.enableBrowserIntegrationFingerprint =\n      (await this.get<boolean>(v1Keys.enableBrowserIntegrationFingerprint)) ??\n      globals.enableBrowserIntegrationFingerprint;\n\n    const userId =\n      (await this.get<string>(v1Keys.userId)) ?? (await this.get<string>(v1Keys.entityId));\n\n    const defaultAccount = this.stateFactory.createAccount(null);\n    const accountSettings: AccountSettings = {\n      autoConfirmFingerPrints:\n        (await this.get<boolean>(v1Keys.autoConfirmFingerprints)) ??\n        defaultAccount.settings.autoConfirmFingerPrints,\n      autoFillOnPageLoadDefault:\n        (await this.get<boolean>(v1Keys.autoFillOnPageLoadDefault)) ??\n        defaultAccount.settings.autoFillOnPageLoadDefault,\n      biometricUnlock:\n        (await this.get<boolean>(v1Keys.biometricUnlock)) ??\n        defaultAccount.settings.biometricUnlock,\n      clearClipboard:\n        (await this.get<number>(v1Keys.clearClipboard)) ?? defaultAccount.settings.clearClipboard,\n      defaultUriMatch:\n        (await this.get<any>(v1Keys.defaultUriMatch)) ?? defaultAccount.settings.defaultUriMatch,\n      disableAddLoginNotification:\n        (await this.get<boolean>(v1Keys.disableAddLoginNotification)) ??\n        defaultAccount.settings.disableAddLoginNotification,\n      disableAutoBiometricsPrompt:\n        (await this.get<boolean>(v1Keys.disableAutoBiometricsPrompt)) ??\n        defaultAccount.settings.disableAutoBiometricsPrompt,\n      disableAutoTotpCopy:\n        (await this.get<boolean>(v1Keys.disableAutoTotpCopy)) ??\n        defaultAccount.settings.disableAutoTotpCopy,\n      disableBadgeCounter:\n        (await this.get<boolean>(v1Keys.disableBadgeCounter)) ??\n        defaultAccount.settings.disableBadgeCounter,\n      disableChangedPasswordNotification:\n        (await this.get<boolean>(v1Keys.disableChangedPasswordNotification)) ??\n        defaultAccount.settings.disableChangedPasswordNotification,\n      disableContextMenuItem:\n        (await this.get<boolean>(v1Keys.disableContextMenuItem)) ??\n        defaultAccount.settings.disableContextMenuItem,\n      disableGa: (await this.get<boolean>(v1Keys.disableGa)) ?? defaultAccount.settings.disableGa,\n      dontShowCardsCurrentTab:\n        (await this.get<boolean>(v1Keys.dontShowCardsCurrentTab)) ??\n        defaultAccount.settings.dontShowCardsCurrentTab,\n      dontShowIdentitiesCurrentTab:\n        (await this.get<boolean>(v1Keys.dontShowIdentitiesCurrentTab)) ??\n        defaultAccount.settings.dontShowIdentitiesCurrentTab,\n      enableAlwaysOnTop:\n        (await this.get<boolean>(v1Keys.enableAlwaysOnTop)) ??\n        defaultAccount.settings.enableAlwaysOnTop,\n      enableAutoFillOnPageLoad:\n        (await this.get<boolean>(v1Keys.enableAutoFillOnPageLoad)) ??\n        defaultAccount.settings.enableAutoFillOnPageLoad,\n      enableBiometric:\n        (await this.get<boolean>(v1Keys.enableBiometric)) ??\n        defaultAccount.settings.enableBiometric,\n      enableFullWidth:\n        (await this.get<boolean>(v1Keys.enableFullWidth)) ??\n        defaultAccount.settings.enableFullWidth,\n      environmentUrls: globals.environmentUrls ?? defaultAccount.settings.environmentUrls,\n      equivalentDomains:\n        (await this.get<any>(v1Keys.equivalentDomains)) ??\n        defaultAccount.settings.equivalentDomains,\n      minimizeOnCopyToClipboard:\n        (await this.get<boolean>(v1Keys.minimizeOnCopyToClipboard)) ??\n        defaultAccount.settings.minimizeOnCopyToClipboard,\n      neverDomains:\n        (await this.get<any>(v1Keys.neverDomains)) ?? defaultAccount.settings.neverDomains,\n      passwordGenerationOptions:\n        (await this.get<any>(v1Keys.passwordGenerationOptions)) ??\n        defaultAccount.settings.passwordGenerationOptions,\n      pinProtected: Object.assign(new EncryptionPair<string, EncString>(), {\n        decrypted: null,\n        encrypted: await this.get<string>(v1Keys.pinProtected),\n      }),\n      protectedPin: await this.get<string>(v1Keys.protectedPin),\n      settings:\n        userId == null\n          ? null\n          : await this.get<AccountSettingsSettings>(v1KeyPrefixes.settings + userId),\n      vaultTimeout:\n        (await this.get<number>(v1Keys.vaultTimeout)) ?? defaultAccount.settings.vaultTimeout,\n      vaultTimeoutAction:\n        (await this.get<string>(v1Keys.vaultTimeoutAction)) ??\n        defaultAccount.settings.vaultTimeoutAction,\n    };\n\n    // (userId == null) = no logged in user (so no known userId) and we need to temporarily store account specific settings in state to migrate on first auth\n    // (userId != null) = we have a currently authed user (so known userId) with encrypted data and other key settings we can move, no need to temporarily store account settings\n    if (userId == null) {\n      await this.set(keys.tempAccountSettings, accountSettings);\n      await this.set(keys.global, globals);\n      await this.set(keys.authenticatedAccounts, []);\n      await this.set(keys.activeUserId, null);\n      await clearV1Keys();\n      return;\n    }\n\n    globals.twoFactorToken = await this.get<string>(v1KeyPrefixes.twoFactorToken + userId);\n    await this.set(keys.global, globals);\n    await this.set(userId, {\n      data: {\n        addEditCipherInfo: null,\n        ciphers: {\n          decrypted: null,\n          encrypted: await this.get<{ [id: string]: CipherData }>(v1KeyPrefixes.ciphers + userId),\n        },\n        collapsedGroupings: null,\n        collections: {\n          decrypted: null,\n          encrypted: await this.get<{ [id: string]: CollectionData }>(\n            v1KeyPrefixes.collections + userId\n          ),\n        },\n        eventCollection: await this.get<EventData[]>(v1Keys.eventCollection),\n        folders: {\n          decrypted: null,\n          encrypted: await this.get<{ [id: string]: FolderData }>(v1KeyPrefixes.folders + userId),\n        },\n        localData: null,\n        organizations: await this.get<{ [id: string]: OrganizationData }>(\n          v1KeyPrefixes.organizations + userId\n        ),\n        passwordGenerationHistory: {\n          decrypted: null,\n          encrypted: await this.get<GeneratedPasswordHistory[]>(v1Keys.history),\n        },\n        policies: {\n          decrypted: null,\n          encrypted: await this.get<{ [id: string]: PolicyData }>(v1KeyPrefixes.policies + userId),\n        },\n        providers: await this.get<{ [id: string]: ProviderData }>(v1KeyPrefixes.providers + userId),\n        sends: {\n          decrypted: null,\n          encrypted: await this.get<{ [id: string]: SendData }>(v1KeyPrefixes.sends + userId),\n        },\n      },\n      keys: {\n        apiKeyClientSecret: await this.get<string>(v1Keys.clientSecret),\n        cryptoMasterKey: null,\n        cryptoMasterKeyAuto: null,\n        cryptoMasterKeyB64: null,\n        cryptoMasterKeyBiometric: null,\n        cryptoSymmetricKey: {\n          encrypted: await this.get<string>(v1Keys.encKey),\n          decrypted: null,\n        },\n        legacyEtmKey: null,\n        organizationKeys: {\n          decrypted: null,\n          encrypted: await this.get<any>(v1Keys.encOrgKeys),\n        },\n        privateKey: {\n          decrypted: null,\n          encrypted: await this.get<string>(v1Keys.encPrivate),\n        },\n        providerKeys: {\n          decrypted: null,\n          encrypted: await this.get<any>(v1Keys.encProviderKeys),\n        },\n        publicKey: null,\n      },\n      profile: {\n        apiKeyClientId: await this.get<string>(v1Keys.clientId),\n        authenticationStatus: null,\n        convertAccountToKeyConnector: await this.get<boolean>(v1Keys.convertAccountToKeyConnector),\n        email: await this.get<string>(v1Keys.userEmail),\n        emailVerified: await this.get<boolean>(v1Keys.emailVerified),\n        entityId: null,\n        entityType: null,\n        everBeenUnlocked: null,\n        forcePasswordReset: null,\n        hasPremiumPersonally: null,\n        kdfIterations: await this.get<number>(v1Keys.kdfIterations),\n        kdfType: await this.get<KdfType>(v1Keys.kdf),\n        keyHash: await this.get<string>(v1Keys.keyHash),\n        lastSync: null,\n        userId: userId,\n        usesKeyConnector: null,\n      },\n      settings: accountSettings,\n      tokens: {\n        accessToken: await this.get<string>(v1Keys.accessToken),\n        decodedToken: null,\n        refreshToken: await this.get<string>(v1Keys.refreshToken),\n        securityStamp: null,\n      },\n    });\n\n    await this.set(keys.authenticatedAccounts, [userId]);\n    await this.set(keys.activeUserId, userId);\n\n    const accountActivity: { [userId: string]: number } = {\n      [userId]: await this.get<number>(v1Keys.lastActive),\n    };\n    accountActivity[userId] = await this.get<number>(v1Keys.lastActive);\n    await this.set(keys.accountActivity, accountActivity);\n\n    await clearV1Keys(userId);\n\n    if (await this.secureStorageService.has(v1Keys.key, { keySuffix: \"biometric\" })) {\n      await this.secureStorageService.save(\n        `${userId}${partialKeys.biometricKey}`,\n        await this.secureStorageService.get(v1Keys.key, { keySuffix: \"biometric\" }),\n        { keySuffix: \"biometric\" }\n      );\n      await this.secureStorageService.remove(v1Keys.key, { keySuffix: \"biometric\" });\n    }\n\n    if (await this.secureStorageService.has(v1Keys.key, { keySuffix: \"auto\" })) {\n      await this.secureStorageService.save(\n        `${userId}${partialKeys.autoKey}`,\n        await this.secureStorageService.get(v1Keys.key, { keySuffix: \"auto\" }),\n        { keySuffix: \"auto\" }\n      );\n      await this.secureStorageService.remove(v1Keys.key, { keySuffix: \"auto\" });\n    }\n\n    if (await this.secureStorageService.has(v1Keys.key)) {\n      await this.secureStorageService.save(\n        `${userId}${partialKeys.masterKey}`,\n        await this.secureStorageService.get(v1Keys.key)\n      );\n      await this.secureStorageService.remove(v1Keys.key);\n    }\n  }\n\n  protected async migrateStateFrom2To3(): Promise<void> {\n    const authenticatedUserIds = await this.get<string[]>(keys.authenticatedAccounts);\n    await Promise.all(\n      authenticatedUserIds.map(async (userId) => {\n        const account = await this.get<TAccount>(userId);\n        if (\n          account?.profile?.hasPremiumPersonally === null &&\n          account.tokens?.accessToken != null\n        ) {\n          const decodedToken = await TokenService.decodeToken(account.tokens.accessToken);\n          account.profile.hasPremiumPersonally = decodedToken.premium;\n          await this.set(userId, account);\n        }\n      })\n    );\n\n    const globals = await this.getGlobals();\n    globals.stateVersion = StateVersion.Three;\n    await this.set(keys.global, globals);\n  }\n\n  protected async migrateStateFrom3To4(): Promise<void> {\n    const authenticatedUserIds = await this.get<string[]>(keys.authenticatedAccounts);\n    await Promise.all(\n      authenticatedUserIds.map(async (userId) => {\n        const account = await this.get<TAccount>(userId);\n        if (account?.profile?.everBeenUnlocked != null) {\n          delete account.profile.everBeenUnlocked;\n          return this.set(userId, account);\n        }\n      })\n    );\n\n    const globals = await this.getGlobals();\n    globals.stateVersion = StateVersion.Four;\n    await this.set(keys.global, globals);\n  }\n\n  protected async migrateAccountFrom4To5(account: TAccount): Promise<TAccount> {\n    const encryptedOrgKeys = account.keys?.organizationKeys?.encrypted;\n    if (encryptedOrgKeys != null) {\n      for (const [orgId, encKey] of Object.entries(encryptedOrgKeys)) {\n        encryptedOrgKeys[orgId] = {\n          type: \"organization\",\n          key: encKey as unknown as string, // Account v4 does not reflect the current account model so we have to cast\n        };\n      }\n    }\n\n    return account;\n  }\n\n  protected async migrateAccountFrom5To6(account: TAccount): Promise<TAccount> {\n    delete (account as any).keys?.legacyEtmKey;\n    return account;\n  }\n\n  protected async migrateAccountFrom6To7(\n    globalSetting: boolean,\n    account: TAccount\n  ): Promise<TAccount> {\n    if (globalSetting) {\n      account.settings = Object.assign({}, account.settings, { disableAutoBiometricsPrompt: true });\n    }\n    return account;\n  }\n\n  protected get options(): StorageOptions {\n    return { htmlStorageLocation: HtmlStorageLocation.Local };\n  }\n\n  protected get<T>(key: string): Promise<T> {\n    return this.storageService.get<T>(key, this.options);\n  }\n\n  protected set(key: string, value: any): Promise<any> {\n    if (value == null) {\n      return this.storageService.remove(key, this.options);\n    }\n    return this.storageService.save(key, value, this.options);\n  }\n\n  protected async getGlobals(): Promise<TGlobalState> {\n    return await this.get<TGlobalState>(keys.global);\n  }\n\n  protected async getCurrentStateVersion(): Promise<StateVersion> {\n    return (await this.getGlobals())?.stateVersion ?? StateVersion.One;\n  }\n\n  protected async setCurrentStateVersion(newVersion: StateVersion): Promise<void> {\n    const globals = await this.getGlobals();\n    globals.stateVersion = newVersion;\n    await this.set(keys.global, globals);\n  }\n\n  protected async getAuthenticatedAccounts(): Promise<TAccount[]> {\n    const authenticatedUserIds = await this.get<string[]>(keys.authenticatedAccounts);\n    return Promise.all(authenticatedUserIds.map((id) => this.get<TAccount>(id)));\n  }\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { AuthService } from \"../../auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"../../auth/enums/authentication-status\";\nimport { MessagingService } from \"../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../abstractions/platform-utils.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { SystemService as SystemServiceAbstraction } from \"../abstractions/system.service\";\nimport { Utils } from \"../misc/utils\";\n\nexport class SystemService implements SystemServiceAbstraction {\n  private reloadInterval: any = null;\n  private clearClipboardTimeout: any = null;\n  private clearClipboardTimeoutFunction: () => Promise<any> = null;\n\n  constructor(\n    private messagingService: MessagingService,\n    private platformUtilsService: PlatformUtilsService,\n    private reloadCallback: () => Promise<void> = null,\n    private stateService: StateService\n  ) {}\n\n  async startProcessReload(authService: AuthService): Promise<void> {\n    const accounts = await firstValueFrom(this.stateService.accounts$);\n    if (accounts != null) {\n      const keys = Object.keys(accounts);\n      if (keys.length > 0) {\n        for (const userId of keys) {\n          if ((await authService.getAuthStatus(userId)) === AuthenticationStatus.Unlocked) {\n            return;\n          }\n        }\n      }\n    }\n\n    // A reloadInterval has already been set and is executing\n    if (this.reloadInterval != null) {\n      return;\n    }\n\n    // User has set a PIN, with ask for master password on restart, to protect their vault\n    const ephemeralPin = await this.stateService.getPinKeyEncryptedUserKeyEphemeral();\n    if (ephemeralPin != null) {\n      return;\n    }\n\n    this.cancelProcessReload();\n    await this.executeProcessReload();\n  }\n\n  private async executeProcessReload() {\n    const biometricLockedFingerprintValidated =\n      await this.stateService.getBiometricFingerprintValidated();\n    if (!biometricLockedFingerprintValidated) {\n      clearInterval(this.reloadInterval);\n      this.reloadInterval = null;\n      this.messagingService.send(\"reloadProcess\");\n      if (this.reloadCallback != null) {\n        await this.reloadCallback();\n      }\n      return;\n    }\n    if (this.reloadInterval == null) {\n      this.reloadInterval = setInterval(async () => await this.executeProcessReload(), 1000);\n    }\n  }\n\n  cancelProcessReload(): void {\n    if (this.reloadInterval != null) {\n      clearInterval(this.reloadInterval);\n      this.reloadInterval = null;\n    }\n  }\n\n  async clearClipboard(clipboardValue: string, timeoutMs: number = null): Promise<void> {\n    if (this.clearClipboardTimeout != null) {\n      clearTimeout(this.clearClipboardTimeout);\n      this.clearClipboardTimeout = null;\n    }\n    if (Utils.isNullOrWhitespace(clipboardValue)) {\n      return;\n    }\n    await this.stateService.getClearClipboard().then((clearSeconds) => {\n      if (clearSeconds == null) {\n        return;\n      }\n      if (timeoutMs == null) {\n        timeoutMs = clearSeconds * 1000;\n      }\n      this.clearClipboardTimeoutFunction = async () => {\n        const clipboardValueNow = await this.platformUtilsService.readFromClipboard();\n        if (clipboardValue === clipboardValueNow) {\n          this.platformUtilsService.copyToClipboard(\"\", { clearing: true });\n        }\n      };\n      this.clearClipboardTimeout = setTimeout(async () => {\n        await this.clearPendingClipboard();\n      }, timeoutMs);\n    });\n  }\n\n  async clearPendingClipboard() {\n    if (this.clearClipboardTimeoutFunction != null) {\n      await this.clearClipboardTimeoutFunction();\n      this.clearClipboardTimeoutFunction = null;\n    }\n  }\n}\n","export class DecryptParameters<T> {\n  encKey: T;\n  data: T;\n  iv: T;\n  macKey: T;\n  mac: T;\n  macData: T;\n}\n","import * as argon2 from \"argon2-browser\";\nimport * as forge from \"node-forge\";\n\nimport { Utils } from \"../../platform/misc/utils\";\nimport { CsprngArray } from \"../../types/csprng\";\nimport { CryptoFunctionService } from \"../abstractions/crypto-function.service\";\nimport { DecryptParameters } from \"../models/domain/decrypt-parameters\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\n\nexport class WebCryptoFunctionService implements CryptoFunctionService {\n  private crypto: Crypto;\n  private subtle: SubtleCrypto;\n  private wasmSupported: boolean;\n\n  constructor(win: Window | typeof global) {\n    this.crypto = typeof win.crypto !== \"undefined\" ? win.crypto : null;\n    this.subtle =\n      !!this.crypto && typeof win.crypto.subtle !== \"undefined\" ? win.crypto.subtle : null;\n    this.wasmSupported = this.checkIfWasmSupported();\n  }\n\n  async pbkdf2(\n    password: string | Uint8Array,\n    salt: string | Uint8Array,\n    algorithm: \"sha256\" | \"sha512\",\n    iterations: number\n  ): Promise<Uint8Array> {\n    const wcLen = algorithm === \"sha256\" ? 256 : 512;\n    const passwordBuf = this.toBuf(password);\n    const saltBuf = this.toBuf(salt);\n\n    const pbkdf2Params: Pbkdf2Params = {\n      name: \"PBKDF2\",\n      salt: saltBuf,\n      iterations: iterations,\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n\n    const impKey = await this.subtle.importKey(\n      \"raw\",\n      passwordBuf,\n      { name: \"PBKDF2\" } as any,\n      false,\n      [\"deriveBits\"]\n    );\n    const buffer = await this.subtle.deriveBits(pbkdf2Params as any, impKey, wcLen);\n    return new Uint8Array(buffer);\n  }\n\n  async argon2(\n    password: string | Uint8Array,\n    salt: string | Uint8Array,\n    iterations: number,\n    memory: number,\n    parallelism: number\n  ): Promise<Uint8Array> {\n    if (!this.wasmSupported) {\n      throw \"Webassembly support is required for the Argon2 KDF feature.\";\n    }\n\n    const passwordArr = new Uint8Array(this.toBuf(password));\n    const saltArr = new Uint8Array(this.toBuf(salt));\n\n    const result = await argon2.hash({\n      pass: passwordArr,\n      salt: saltArr,\n      time: iterations,\n      mem: memory,\n      parallelism: parallelism,\n      hashLen: 32,\n      type: argon2.ArgonType.Argon2id,\n    });\n    argon2.unloadRuntime();\n    return result.hash;\n  }\n\n  async hkdf(\n    ikm: Uint8Array,\n    salt: string | Uint8Array,\n    info: string | Uint8Array,\n    outputByteSize: number,\n    algorithm: \"sha256\" | \"sha512\"\n  ): Promise<Uint8Array> {\n    const saltBuf = this.toBuf(salt);\n    const infoBuf = this.toBuf(info);\n\n    const hkdfParams: HkdfParams = {\n      name: \"HKDF\",\n      salt: saltBuf,\n      info: infoBuf,\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n\n    const impKey = await this.subtle.importKey(\"raw\", ikm, { name: \"HKDF\" } as any, false, [\n      \"deriveBits\",\n    ]);\n    const buffer = await this.subtle.deriveBits(hkdfParams as any, impKey, outputByteSize * 8);\n    return new Uint8Array(buffer);\n  }\n\n  // ref: https://tools.ietf.org/html/rfc5869\n  async hkdfExpand(\n    prk: Uint8Array,\n    info: string | Uint8Array,\n    outputByteSize: number,\n    algorithm: \"sha256\" | \"sha512\"\n  ): Promise<Uint8Array> {\n    const hashLen = algorithm === \"sha256\" ? 32 : 64;\n    if (outputByteSize > 255 * hashLen) {\n      throw new Error(\"outputByteSize is too large.\");\n    }\n    const prkArr = new Uint8Array(prk);\n    if (prkArr.length < hashLen) {\n      throw new Error(\"prk is too small.\");\n    }\n    const infoBuf = this.toBuf(info);\n    const infoArr = new Uint8Array(infoBuf);\n    let runningOkmLength = 0;\n    let previousT = new Uint8Array(0);\n    const n = Math.ceil(outputByteSize / hashLen);\n    const okm = new Uint8Array(n * hashLen);\n    for (let i = 0; i < n; i++) {\n      const t = new Uint8Array(previousT.length + infoArr.length + 1);\n      t.set(previousT);\n      t.set(infoArr, previousT.length);\n      t.set([i + 1], t.length - 1);\n      previousT = new Uint8Array(await this.hmac(t, prk, algorithm));\n      okm.set(previousT, runningOkmLength);\n      runningOkmLength += previousT.length;\n      if (runningOkmLength >= outputByteSize) {\n        break;\n      }\n    }\n    return okm.slice(0, outputByteSize);\n  }\n\n  async hash(\n    value: string | Uint8Array,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\" | \"md5\"\n  ): Promise<Uint8Array> {\n    if (algorithm === \"md5\") {\n      const md = algorithm === \"md5\" ? forge.md.md5.create() : forge.md.sha1.create();\n      const valueBytes = this.toByteString(value);\n      md.update(valueBytes, \"raw\");\n      return Utils.fromByteStringToArray(md.digest().data);\n    }\n\n    const valueBuf = this.toBuf(value);\n    const buffer = await this.subtle.digest(\n      { name: this.toWebCryptoAlgorithm(algorithm) },\n      valueBuf\n    );\n    return new Uint8Array(buffer);\n  }\n\n  async hmac(\n    value: Uint8Array,\n    key: Uint8Array,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\"\n  ): Promise<Uint8Array> {\n    const signingAlgorithm = {\n      name: \"HMAC\",\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n\n    const impKey = await this.subtle.importKey(\"raw\", key, signingAlgorithm, false, [\"sign\"]);\n    const buffer = await this.subtle.sign(signingAlgorithm, impKey, value);\n    return new Uint8Array(buffer);\n  }\n\n  // Safely compare two values in a way that protects against timing attacks (Double HMAC Verification).\n  // ref: https://www.nccgroup.trust/us/about-us/newsroom-and-events/blog/2011/february/double-hmac-verification/\n  // ref: https://paragonie.com/blog/2015/11/preventing-timing-attacks-on-string-comparison-with-double-hmac-strategy\n  async compare(a: Uint8Array, b: Uint8Array): Promise<boolean> {\n    const macKey = await this.randomBytes(32);\n    const signingAlgorithm = {\n      name: \"HMAC\",\n      hash: { name: \"SHA-256\" },\n    };\n    const impKey = await this.subtle.importKey(\"raw\", macKey, signingAlgorithm, false, [\"sign\"]);\n    const mac1 = await this.subtle.sign(signingAlgorithm, impKey, a);\n    const mac2 = await this.subtle.sign(signingAlgorithm, impKey, b);\n\n    if (mac1.byteLength !== mac2.byteLength) {\n      return false;\n    }\n\n    const arr1 = new Uint8Array(mac1);\n    const arr2 = new Uint8Array(mac2);\n    for (let i = 0; i < arr2.length; i++) {\n      if (arr1[i] !== arr2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  hmacFast(value: string, key: string, algorithm: \"sha1\" | \"sha256\" | \"sha512\"): Promise<string> {\n    const hmac = forge.hmac.create();\n    hmac.start(algorithm, key);\n    hmac.update(value);\n    const bytes = hmac.digest().getBytes();\n    return Promise.resolve(bytes);\n  }\n\n  async compareFast(a: string, b: string): Promise<boolean> {\n    const rand = await this.randomBytes(32);\n    const bytes = new Uint32Array(rand);\n    const buffer = forge.util.createBuffer();\n    for (let i = 0; i < bytes.length; i++) {\n      buffer.putInt32(bytes[i]);\n    }\n    const macKey = buffer.getBytes();\n\n    const hmac = forge.hmac.create();\n    hmac.start(\"sha256\", macKey);\n    hmac.update(a);\n    const mac1 = hmac.digest().getBytes();\n\n    hmac.start(null, null);\n    hmac.update(b);\n    const mac2 = hmac.digest().getBytes();\n\n    const equals = mac1 === mac2;\n    return equals;\n  }\n\n  async aesEncrypt(data: Uint8Array, iv: Uint8Array, key: Uint8Array): Promise<Uint8Array> {\n    const impKey = await this.subtle.importKey(\"raw\", key, { name: \"AES-CBC\" } as any, false, [\n      \"encrypt\",\n    ]);\n    const buffer = await this.subtle.encrypt({ name: \"AES-CBC\", iv: iv }, impKey, data);\n    return new Uint8Array(buffer);\n  }\n\n  aesDecryptFastParameters(\n    data: string,\n    iv: string,\n    mac: string,\n    key: SymmetricCryptoKey\n  ): DecryptParameters<string> {\n    const p = new DecryptParameters<string>();\n    if (key.meta != null) {\n      p.encKey = key.meta.encKeyByteString;\n      p.macKey = key.meta.macKeyByteString;\n    }\n\n    if (p.encKey == null) {\n      p.encKey = forge.util.decode64(key.encKeyB64);\n    }\n    p.data = forge.util.decode64(data);\n    p.iv = forge.util.decode64(iv);\n    p.macData = p.iv + p.data;\n    if (p.macKey == null && key.macKeyB64 != null) {\n      p.macKey = forge.util.decode64(key.macKeyB64);\n    }\n    if (mac != null) {\n      p.mac = forge.util.decode64(mac);\n    }\n\n    // cache byte string keys for later\n    if (key.meta == null) {\n      key.meta = {};\n    }\n    if (key.meta.encKeyByteString == null) {\n      key.meta.encKeyByteString = p.encKey;\n    }\n    if (p.macKey != null && key.meta.macKeyByteString == null) {\n      key.meta.macKeyByteString = p.macKey;\n    }\n\n    return p;\n  }\n\n  aesDecryptFast(parameters: DecryptParameters<string>): Promise<string> {\n    const dataBuffer = forge.util.createBuffer(parameters.data);\n    const decipher = forge.cipher.createDecipher(\"AES-CBC\", parameters.encKey);\n    decipher.start({ iv: parameters.iv });\n    decipher.update(dataBuffer);\n    decipher.finish();\n    const val = decipher.output.toString();\n    return Promise.resolve(val);\n  }\n\n  async aesDecrypt(data: Uint8Array, iv: Uint8Array, key: Uint8Array): Promise<Uint8Array> {\n    const impKey = await this.subtle.importKey(\"raw\", key, { name: \"AES-CBC\" } as any, false, [\n      \"decrypt\",\n    ]);\n    const buffer = await this.subtle.decrypt({ name: \"AES-CBC\", iv: iv }, impKey, data);\n    return new Uint8Array(buffer);\n  }\n\n  async rsaEncrypt(\n    data: Uint8Array,\n    publicKey: Uint8Array,\n    algorithm: \"sha1\" | \"sha256\"\n  ): Promise<Uint8Array> {\n    // Note: Edge browser requires that we specify name and hash for both key import and decrypt.\n    // We cannot use the proper types here.\n    const rsaParams = {\n      name: \"RSA-OAEP\",\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n    const impKey = await this.subtle.importKey(\"spki\", publicKey, rsaParams, false, [\"encrypt\"]);\n    const buffer = await this.subtle.encrypt(rsaParams, impKey, data);\n    return new Uint8Array(buffer);\n  }\n\n  async rsaDecrypt(\n    data: Uint8Array,\n    privateKey: Uint8Array,\n    algorithm: \"sha1\" | \"sha256\"\n  ): Promise<Uint8Array> {\n    // Note: Edge browser requires that we specify name and hash for both key import and decrypt.\n    // We cannot use the proper types here.\n    const rsaParams = {\n      name: \"RSA-OAEP\",\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n    const impKey = await this.subtle.importKey(\"pkcs8\", privateKey, rsaParams, false, [\"decrypt\"]);\n    const buffer = await this.subtle.decrypt(rsaParams, impKey, data);\n    return new Uint8Array(buffer);\n  }\n\n  async rsaExtractPublicKey(privateKey: Uint8Array): Promise<Uint8Array> {\n    const rsaParams = {\n      name: \"RSA-OAEP\",\n      // Have to specify some algorithm\n      hash: { name: this.toWebCryptoAlgorithm(\"sha1\") },\n    };\n    const impPrivateKey = await this.subtle.importKey(\"pkcs8\", privateKey, rsaParams, true, [\n      \"decrypt\",\n    ]);\n    const jwkPrivateKey = await this.subtle.exportKey(\"jwk\", impPrivateKey);\n    const jwkPublicKeyParams = {\n      kty: \"RSA\",\n      e: jwkPrivateKey.e,\n      n: jwkPrivateKey.n,\n      alg: \"RSA-OAEP\",\n      ext: true,\n    };\n    const impPublicKey = await this.subtle.importKey(\"jwk\", jwkPublicKeyParams, rsaParams, true, [\n      \"encrypt\",\n    ]);\n    const buffer = await this.subtle.exportKey(\"spki\", impPublicKey);\n    return new Uint8Array(buffer);\n  }\n\n  async rsaGenerateKeyPair(length: 1024 | 2048 | 4096): Promise<[Uint8Array, Uint8Array]> {\n    const rsaParams = {\n      name: \"RSA-OAEP\",\n      modulusLength: length,\n      publicExponent: new Uint8Array([0x01, 0x00, 0x01]), // 65537\n      // Have to specify some algorithm\n      hash: { name: this.toWebCryptoAlgorithm(\"sha1\") },\n    };\n    const keyPair = (await this.subtle.generateKey(rsaParams, true, [\n      \"encrypt\",\n      \"decrypt\",\n    ])) as CryptoKeyPair;\n    const publicKey = await this.subtle.exportKey(\"spki\", keyPair.publicKey);\n    const privateKey = await this.subtle.exportKey(\"pkcs8\", keyPair.privateKey);\n    return [new Uint8Array(publicKey), new Uint8Array(privateKey)];\n  }\n\n  randomBytes(length: number): Promise<CsprngArray> {\n    const arr = new Uint8Array(length);\n    this.crypto.getRandomValues(arr);\n    return Promise.resolve(arr as CsprngArray);\n  }\n\n  private toBuf(value: string | Uint8Array): Uint8Array {\n    let buf: Uint8Array;\n    if (typeof value === \"string\") {\n      buf = Utils.fromUtf8ToArray(value);\n    } else {\n      buf = value;\n    }\n    return buf;\n  }\n\n  private toByteString(value: string | Uint8Array): string {\n    let bytes: string;\n    if (typeof value === \"string\") {\n      bytes = forge.util.encodeUtf8(value);\n    } else {\n      bytes = Utils.fromBufferToByteString(value);\n    }\n    return bytes;\n  }\n\n  private toWebCryptoAlgorithm(algorithm: \"sha1\" | \"sha256\" | \"sha512\" | \"md5\"): string {\n    if (algorithm === \"md5\") {\n      throw new Error(\"MD5 is not supported in WebCrypto.\");\n    }\n    return algorithm === \"sha1\" ? \"SHA-1\" : algorithm === \"sha256\" ? \"SHA-256\" : \"SHA-512\";\n  }\n\n  // ref: https://stackoverflow.com/a/47880734/1090359\n  private checkIfWasmSupported(): boolean {\n    try {\n      if (typeof WebAssembly === \"object\" && typeof WebAssembly.instantiate === \"function\") {\n        const module = new WebAssembly.Module(\n          Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00)\n        );\n        if (module instanceof WebAssembly.Module) {\n          return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;\n        }\n      }\n    } catch {\n      return false;\n    }\n    return false;\n  }\n}\n","export class UpdateAvatarRequest {\n  avatarColor: string;\n\n  constructor(avatarColor: string) {\n    this.avatarColor = avatarColor;\n  }\n}\n","import { BehaviorSubject, Observable } from \"rxjs\";\n\nimport { AvatarUpdateService as AvatarUpdateServiceAbstraction } from \"../../abstractions/account/avatar-update.service\";\nimport { ApiService } from \"../../abstractions/api.service\";\nimport { UpdateAvatarRequest } from \"../../models/request/update-avatar.request\";\nimport { ProfileResponse } from \"../../models/response/profile.response\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\n\nexport class AvatarUpdateService implements AvatarUpdateServiceAbstraction {\n  private _avatarUpdate$ = new BehaviorSubject<string | null>(null);\n  avatarUpdate$: Observable<string | null> = this._avatarUpdate$.asObservable();\n\n  constructor(private apiService: ApiService, private stateService: StateService) {\n    this.loadColorFromState();\n  }\n\n  loadColorFromState(): Promise<string | null> {\n    return this.stateService.getAvatarColor().then((color) => {\n      this._avatarUpdate$.next(color);\n      return color;\n    });\n  }\n\n  pushUpdate(color: string | null): Promise<ProfileResponse | void> {\n    return this.apiService.putAvatar(new UpdateAvatarRequest(color)).then((response) => {\n      this.stateService.setAvatarColor(response.avatarColor);\n      this._avatarUpdate$.next(response.avatarColor);\n    });\n  }\n}\n","import { BillingSyncConfigApi } from \"../../../billing/models/api/billing-sync-config.api\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { OrganizationConnectionType } from \"../../enums\";\nimport { ScimConfigApi } from \"../api/scim-config.api\";\n\n/**API response config types for OrganizationConnectionResponse */\nexport type OrganizationConnectionConfigApis = BillingSyncConfigApi | ScimConfigApi;\n\nexport class OrganizationConnectionResponse<\n  TConfig extends OrganizationConnectionConfigApis\n> extends BaseResponse {\n  id: string;\n  type: OrganizationConnectionType;\n  organizationId: string;\n  enabled: boolean;\n  config: TConfig;\n\n  constructor(response: any, configType: { new (response: any): TConfig }) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    const rawConfig = this.getResponseProperty(\"Config\");\n    this.config = rawConfig == null ? null : new configType(rawConfig);\n  }\n}\n","import { BaseResponse } from \"../response/base.response\";\n\nexport class CardApi extends BaseResponse {\n  cardholderName: string;\n  brand: string;\n  number: string;\n  expMonth: string;\n  expYear: string;\n  code: string;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.cardholderName = this.getResponseProperty(\"CardholderName\");\n    this.brand = this.getResponseProperty(\"Brand\");\n    this.number = this.getResponseProperty(\"Number\");\n    this.expMonth = this.getResponseProperty(\"ExpMonth\");\n    this.expYear = this.getResponseProperty(\"ExpYear\");\n    this.code = this.getResponseProperty(\"Code\");\n  }\n}\n","import { FieldType, LinkedIdType } from \"../../enums\";\nimport { BaseResponse } from \"../response/base.response\";\n\nexport class FieldApi extends BaseResponse {\n  name: string;\n  value: string;\n  type: FieldType;\n  linkedId: LinkedIdType;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.type = this.getResponseProperty(\"Type\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.value = this.getResponseProperty(\"Value\");\n    this.linkedId = this.getResponseProperty(\"linkedId\");\n  }\n}\n","import { BaseResponse } from \"../response/base.response\";\n\nexport class IdentityApi extends BaseResponse {\n  title: string;\n  firstName: string;\n  middleName: string;\n  lastName: string;\n  address1: string;\n  address2: string;\n  address3: string;\n  city: string;\n  state: string;\n  postalCode: string;\n  country: string;\n  company: string;\n  email: string;\n  phone: string;\n  ssn: string;\n  username: string;\n  passportNumber: string;\n  licenseNumber: string;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.title = this.getResponseProperty(\"Title\");\n    this.firstName = this.getResponseProperty(\"FirstName\");\n    this.middleName = this.getResponseProperty(\"MiddleName\");\n    this.lastName = this.getResponseProperty(\"LastName\");\n    this.address1 = this.getResponseProperty(\"Address1\");\n    this.address2 = this.getResponseProperty(\"Address2\");\n    this.address3 = this.getResponseProperty(\"Address3\");\n    this.city = this.getResponseProperty(\"City\");\n    this.state = this.getResponseProperty(\"State\");\n    this.postalCode = this.getResponseProperty(\"PostalCode\");\n    this.country = this.getResponseProperty(\"Country\");\n    this.company = this.getResponseProperty(\"Company\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.phone = this.getResponseProperty(\"Phone\");\n    this.ssn = this.getResponseProperty(\"SSN\");\n    this.username = this.getResponseProperty(\"Username\");\n    this.passportNumber = this.getResponseProperty(\"PassportNumber\");\n    this.licenseNumber = this.getResponseProperty(\"LicenseNumber\");\n  }\n}\n","import { UriMatchType } from \"../../enums\";\nimport { BaseResponse } from \"../response/base.response\";\n\nexport class LoginUriApi extends BaseResponse {\n  uri: string;\n  match: UriMatchType = null;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.uri = this.getResponseProperty(\"Uri\");\n    const match = this.getResponseProperty(\"Match\");\n    this.match = match != null ? match : null;\n  }\n}\n","import { BaseResponse } from \"../response/base.response\";\n\nimport { LoginUriApi } from \"./login-uri.api\";\n\nexport class LoginApi extends BaseResponse {\n  uris: LoginUriApi[];\n  username: string;\n  password: string;\n  passwordRevisionDate: string;\n  totp: string;\n  autofillOnPageLoad: boolean;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.username = this.getResponseProperty(\"Username\");\n    this.password = this.getResponseProperty(\"Password\");\n    this.passwordRevisionDate = this.getResponseProperty(\"PasswordRevisionDate\");\n    this.totp = this.getResponseProperty(\"Totp\");\n    this.autofillOnPageLoad = this.getResponseProperty(\"AutofillOnPageLoad\");\n\n    const uris = this.getResponseProperty(\"Uris\");\n    if (uris != null) {\n      this.uris = uris.map((u: any) => new LoginUriApi(u));\n    }\n  }\n}\n","import { SecureNoteType } from \"../../enums\";\nimport { BaseResponse } from \"../response/base.response\";\n\nexport class SecureNoteApi extends BaseResponse {\n  type: SecureNoteType;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.type = this.getResponseProperty(\"Type\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class AttachmentResponse extends BaseResponse {\n  id: string;\n  url: string;\n  fileName: string;\n  key: string;\n  size: string;\n  sizeName: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.url = this.getResponseProperty(\"Url\");\n    this.fileName = this.getResponseProperty(\"FileName\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.size = this.getResponseProperty(\"Size\");\n    this.sizeName = this.getResponseProperty(\"SizeName\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class PasswordHistoryResponse extends BaseResponse {\n  password: string;\n  lastUsedDate: string;\n\n  constructor(response: any) {\n    super(response);\n    this.password = this.getResponseProperty(\"Password\");\n    this.lastUsedDate = this.getResponseProperty(\"LastUsedDate\");\n  }\n}\n","import { CardApi } from \"../../../models/api/card.api\";\nimport { FieldApi } from \"../../../models/api/field.api\";\nimport { IdentityApi } from \"../../../models/api/identity.api\";\nimport { LoginApi } from \"../../../models/api/login.api\";\nimport { SecureNoteApi } from \"../../../models/api/secure-note.api\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\n\nimport { AttachmentResponse } from \"./attachment.response\";\nimport { PasswordHistoryResponse } from \"./password-history.response\";\n\nexport class CipherResponse extends BaseResponse {\n  id: string;\n  organizationId: string;\n  folderId: string;\n  type: number;\n  name: string;\n  notes: string;\n  fields: FieldApi[];\n  login: LoginApi;\n  card: CardApi;\n  identity: IdentityApi;\n  secureNote: SecureNoteApi;\n  favorite: boolean;\n  edit: boolean;\n  viewPassword: boolean;\n  organizationUseTotp: boolean;\n  revisionDate: string;\n  attachments: AttachmentResponse[];\n  passwordHistory: PasswordHistoryResponse[];\n  collectionIds: string[];\n  creationDate: string;\n  deletedDate: string;\n  reprompt: CipherRepromptType;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.folderId = this.getResponseProperty(\"FolderId\") || null;\n    this.type = this.getResponseProperty(\"Type\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.notes = this.getResponseProperty(\"Notes\");\n    this.favorite = this.getResponseProperty(\"Favorite\") || false;\n    this.edit = !!this.getResponseProperty(\"Edit\");\n    if (this.getResponseProperty(\"ViewPassword\") == null) {\n      this.viewPassword = true;\n    } else {\n      this.viewPassword = this.getResponseProperty(\"ViewPassword\");\n    }\n    this.organizationUseTotp = this.getResponseProperty(\"OrganizationUseTotp\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n    this.collectionIds = this.getResponseProperty(\"CollectionIds\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.deletedDate = this.getResponseProperty(\"DeletedDate\");\n\n    const login = this.getResponseProperty(\"Login\");\n    if (login != null) {\n      this.login = new LoginApi(login);\n    }\n\n    const card = this.getResponseProperty(\"Card\");\n    if (card != null) {\n      this.card = new CardApi(card);\n    }\n\n    const identity = this.getResponseProperty(\"Identity\");\n    if (identity != null) {\n      this.identity = new IdentityApi(identity);\n    }\n\n    const secureNote = this.getResponseProperty(\"SecureNote\");\n    if (secureNote != null) {\n      this.secureNote = new SecureNoteApi(secureNote);\n    }\n\n    const fields = this.getResponseProperty(\"Fields\");\n    if (fields != null) {\n      this.fields = fields.map((f: any) => new FieldApi(f));\n    }\n\n    const attachments = this.getResponseProperty(\"Attachments\");\n    if (attachments != null) {\n      this.attachments = attachments.map((a: any) => new AttachmentResponse(a));\n    }\n\n    const passwordHistory = this.getResponseProperty(\"PasswordHistory\");\n    if (passwordHistory != null) {\n      this.passwordHistory = passwordHistory.map((h: any) => new PasswordHistoryResponse(h));\n    }\n\n    this.reprompt = this.getResponseProperty(\"Reprompt\") || CipherRepromptType.None;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class SelectionReadOnlyResponse extends BaseResponse {\n  id: string;\n  readOnly: boolean;\n  hidePasswords: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.readOnly = this.getResponseProperty(\"ReadOnly\");\n    this.hidePasswords = this.getResponseProperty(\"HidePasswords\");\n  }\n}\n","import { SelectionReadOnlyResponse } from \"../../../admin-console/models/response/selection-read-only.response\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class CollectionResponse extends BaseResponse {\n  id: string;\n  organizationId: string;\n  name: string;\n  externalId: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.externalId = this.getResponseProperty(\"ExternalId\");\n  }\n}\n\nexport class CollectionDetailsResponse extends CollectionResponse {\n  readOnly: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.readOnly = this.getResponseProperty(\"ReadOnly\") || false;\n  }\n}\n\nexport class CollectionAccessDetailsResponse extends CollectionResponse {\n  groups: SelectionReadOnlyResponse[] = [];\n  users: SelectionReadOnlyResponse[] = [];\n\n  /**\n   * Flag indicating the user has been explicitly assigned to this Collection\n   */\n  assigned: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.assigned = this.getResponseProperty(\"Assigned\") || false;\n\n    const groups = this.getResponseProperty(\"Groups\");\n    if (groups != null) {\n      this.groups = groups.map((g: any) => new SelectionReadOnlyResponse(g));\n    }\n\n    const users = this.getResponseProperty(\"Users\");\n    if (users != null) {\n      this.users = users.map((g: any) => new SelectionReadOnlyResponse(g));\n    }\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { CipherResponse } from \"../../../vault/models/response/cipher.response\";\nimport { CollectionResponse } from \"../../../vault/models/response/collection.response\";\n\nexport class OrganizationExportResponse extends BaseResponse {\n  collections: CollectionResponse[];\n  ciphers: CipherResponse[];\n\n  constructor(response: any) {\n    super(response);\n    const collections = this.getResponseProperty(\"Collections\");\n    if (collections != null) {\n      this.collections = collections.map((c: any) => new CollectionResponse(c));\n    }\n    const ciphers = this.getResponseProperty(\"Ciphers\");\n    if (ciphers != null) {\n      this.ciphers = ciphers.map((c: any) => new CipherResponse(c));\n    }\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationSponsorshipSyncStatusResponse extends BaseResponse {\n  lastSyncDate?: Date;\n\n  constructor(response: any) {\n    super(response);\n    const lastSyncDate = this.getResponseProperty(\"LastSyncDate\");\n    if (lastSyncDate) {\n      this.lastSyncDate = new Date(lastSyncDate);\n    }\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class ProviderOrganizationResponse extends BaseResponse {\n  id: string;\n  providerId: string;\n  organizationId: string;\n  key: string;\n  settings: string;\n  creationDate: string;\n  revisionDate: string;\n  userCount: number;\n  seats?: number;\n  plan?: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.providerId = this.getResponseProperty(\"ProviderId\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.settings = this.getResponseProperty(\"Settings\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n    this.userCount = this.getResponseProperty(\"UserCount\");\n    this.seats = this.getResponseProperty(\"Seats\");\n    this.plan = this.getResponseProperty(\"Plan\");\n  }\n}\n\nexport class ProviderOrganizationOrganizationDetailsResponse extends ProviderOrganizationResponse {\n  organizationName: string;\n\n  constructor(response: any) {\n    super(response);\n    this.organizationName = this.getResponseProperty(\"OrganizationName\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationUserBulkPublicKeyResponse extends BaseResponse {\n  id: string;\n  userId: string;\n  key: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.key = this.getResponseProperty(\"Key\");\n  }\n}\n","import { OrganizationUserBulkPublicKeyResponse } from \"../../../../abstractions/organization-user/responses\";\n\nexport class ProviderUserBulkPublicKeyResponse extends OrganizationUserBulkPublicKeyResponse {}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class ProviderUserBulkResponse extends BaseResponse {\n  id: string;\n  error: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.error = this.getResponseProperty(\"Error\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class PermissionsApi extends BaseResponse {\n  accessEventLogs: boolean;\n  accessImportExport: boolean;\n  accessReports: boolean;\n  createNewCollections: boolean;\n  editAnyCollection: boolean;\n  deleteAnyCollection: boolean;\n  editAssignedCollections: boolean;\n  deleteAssignedCollections: boolean;\n  manageCiphers: boolean;\n  manageGroups: boolean;\n  manageSso: boolean;\n  managePolicies: boolean;\n  manageUsers: boolean;\n  manageResetPassword: boolean;\n  manageScim: boolean;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return this;\n    }\n    this.accessEventLogs = this.getResponseProperty(\"AccessEventLogs\");\n    this.accessImportExport = this.getResponseProperty(\"AccessImportExport\");\n    this.accessReports = this.getResponseProperty(\"AccessReports\");\n\n    this.createNewCollections = this.getResponseProperty(\"CreateNewCollections\");\n    this.editAnyCollection = this.getResponseProperty(\"EditAnyCollection\");\n    this.deleteAnyCollection = this.getResponseProperty(\"DeleteAnyCollection\");\n    this.editAssignedCollections = this.getResponseProperty(\"EditAssignedCollections\");\n    this.deleteAssignedCollections = this.getResponseProperty(\"DeleteAssignedCollections\");\n\n    this.manageCiphers = this.getResponseProperty(\"ManageCiphers\");\n    this.manageGroups = this.getResponseProperty(\"ManageGroups\");\n    this.manageSso = this.getResponseProperty(\"ManageSso\");\n    this.managePolicies = this.getResponseProperty(\"ManagePolicies\");\n    this.manageUsers = this.getResponseProperty(\"ManageUsers\");\n    this.manageResetPassword = this.getResponseProperty(\"ManageResetPassword\");\n    this.manageScim = this.getResponseProperty(\"ManageScim\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\nimport { ProviderUserStatusType, ProviderUserType } from \"../../../enums\";\nimport { PermissionsApi } from \"../../api/permissions.api\";\n\nexport class ProviderUserResponse extends BaseResponse {\n  id: string;\n  userId: string;\n  type: ProviderUserType;\n  status: ProviderUserStatusType;\n  permissions: PermissionsApi;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.permissions = new PermissionsApi(this.getResponseProperty(\"Permissions\"));\n  }\n}\n\nexport class ProviderUserUserDetailsResponse extends ProviderUserResponse {\n  name: string;\n  email: string;\n\n  constructor(response: any) {\n    super(response);\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class ProviderResponse extends BaseResponse {\n  id: string;\n  name: string;\n  businessName: string;\n  billingEmail: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.businessName = this.getResponseProperty(\"BusinessName\");\n    this.billingEmail = this.getResponseProperty(\"BillingEmail\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class ApiKeyResponse extends BaseResponse {\n  apiKey: string;\n  revisionDate: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.apiKey = this.getResponseProperty(\"ApiKey\");\n    this.revisionDate = new Date(this.getResponseProperty(\"RevisionDate\"));\n  }\n}\n","import { DeviceType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nconst RequestTimeOut = 60000 * 15; //15 Minutes\n\nexport class AuthRequestResponse extends BaseResponse {\n  id: string;\n  publicKey: string;\n  requestDeviceType: DeviceType;\n  requestIpAddress: string;\n  key: string;\n  masterPasswordHash: string;\n  creationDate: string;\n  requestApproved?: boolean;\n  responseDate?: string;\n  isAnswered: boolean;\n  isExpired: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.publicKey = this.getResponseProperty(\"PublicKey\");\n    this.requestDeviceType = this.getResponseProperty(\"RequestDeviceType\");\n    this.requestIpAddress = this.getResponseProperty(\"RequestIpAddress\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.masterPasswordHash = this.getResponseProperty(\"MasterPasswordHash\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.requestApproved = this.getResponseProperty(\"RequestApproved\");\n    this.responseDate = this.getResponseProperty(\"ResponseDate\");\n\n    const requestDate = new Date(this.creationDate);\n    const requestDateUTC = Date.UTC(\n      requestDate.getUTCFullYear(),\n      requestDate.getUTCMonth(),\n      requestDate.getDate(),\n      requestDate.getUTCHours(),\n      requestDate.getUTCMinutes(),\n      requestDate.getUTCSeconds(),\n      requestDate.getUTCMilliseconds()\n    );\n\n    const dateNow = new Date(Date.now());\n    const dateNowUTC = Date.UTC(\n      dateNow.getUTCFullYear(),\n      dateNow.getUTCMonth(),\n      dateNow.getDate(),\n      dateNow.getUTCHours(),\n      dateNow.getUTCMinutes(),\n      dateNow.getUTCSeconds(),\n      dateNow.getUTCMilliseconds()\n    );\n\n    this.isExpired = dateNowUTC - requestDateUTC >= RequestTimeOut;\n    this.isAnswered = this.requestApproved != null && this.responseDate != null;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class DeviceVerificationResponse extends BaseResponse {\n  isDeviceVerificationSectionEnabled: boolean;\n  unknownDeviceVerificationEnabled: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.isDeviceVerificationSectionEnabled = this.getResponseProperty(\n      \"IsDeviceVerificationSectionEnabled\"\n    );\n    this.unknownDeviceVerificationEnabled = this.getResponseProperty(\n      \"UnknownDeviceVerificationEnabled\"\n    );\n  }\n}\n","import { KdfType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { CipherResponse } from \"../../../vault/models/response/cipher.response\";\nimport { EmergencyAccessStatusType } from \"../../enums/emergency-access-status-type\";\nimport { EmergencyAccessType } from \"../../enums/emergency-access-type\";\n\nexport class EmergencyAccessGranteeDetailsResponse extends BaseResponse {\n  id: string;\n  granteeId: string;\n  name: string;\n  email: string;\n  type: EmergencyAccessType;\n  status: EmergencyAccessStatusType;\n  waitTimeDays: number;\n  creationDate: string;\n  avatarColor: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.granteeId = this.getResponseProperty(\"GranteeId\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.waitTimeDays = this.getResponseProperty(\"WaitTimeDays\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.avatarColor = this.getResponseProperty(\"AvatarColor\");\n  }\n}\n\nexport class EmergencyAccessGrantorDetailsResponse extends BaseResponse {\n  id: string;\n  grantorId: string;\n  name: string;\n  email: string;\n  type: EmergencyAccessType;\n  status: EmergencyAccessStatusType;\n  waitTimeDays: number;\n  creationDate: string;\n  avatarColor: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.grantorId = this.getResponseProperty(\"GrantorId\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.waitTimeDays = this.getResponseProperty(\"WaitTimeDays\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.avatarColor = this.getResponseProperty(\"AvatarColor\");\n  }\n}\n\nexport class EmergencyAccessTakeoverResponse extends BaseResponse {\n  keyEncrypted: string;\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n\n  constructor(response: any) {\n    super(response);\n\n    this.keyEncrypted = this.getResponseProperty(\"KeyEncrypted\");\n    this.kdf = this.getResponseProperty(\"Kdf\");\n    this.kdfIterations = this.getResponseProperty(\"KdfIterations\");\n    this.kdfMemory = this.getResponseProperty(\"KdfMemory\");\n    this.kdfParallelism = this.getResponseProperty(\"KdfParallelism\");\n  }\n}\n\nexport class EmergencyAccessViewResponse extends BaseResponse {\n  keyEncrypted: string;\n  ciphers: CipherResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n\n    this.keyEncrypted = this.getResponseProperty(\"KeyEncrypted\");\n\n    const ciphers = this.getResponseProperty(\"Ciphers\");\n    if (ciphers != null) {\n      this.ciphers = ciphers.map((c: any) => new CipherResponse(c));\n    }\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class KeyConnectorUserKeyResponse extends BaseResponse {\n  key: string;\n\n  constructor(response: any) {\n    super(response);\n    this.key = this.getResponseProperty(\"Key\");\n  }\n}\n","import { KdfType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class PreloginResponse extends BaseResponse {\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n\n  constructor(response: any) {\n    super(response);\n    this.kdf = this.getResponseProperty(\"Kdf\");\n    this.kdfIterations = this.getResponseProperty(\"KdfIterations\");\n    this.kdfMemory = this.getResponseProperty(\"KdfMemory\");\n    this.kdfParallelism = this.getResponseProperty(\"KdfParallelism\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { ICaptchaProtectedResponse } from \"./captcha-protected.response\";\n\nexport class RegisterResponse extends BaseResponse implements ICaptchaProtectedResponse {\n  captchaBypassToken: string;\n\n  constructor(response: any) {\n    super(response);\n    this.captchaBypassToken = this.getResponseProperty(\"CaptchaBypassToken\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class SsoPreValidateResponse extends BaseResponse {\n  token: string;\n\n  constructor(response: any) {\n    super(response);\n    this.token = this.getResponseProperty(\"Token\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TwoFactorAuthenticatorResponse extends BaseResponse {\n  enabled: boolean;\n  key: string;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.key = this.getResponseProperty(\"Key\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TwoFactorDuoResponse extends BaseResponse {\n  enabled: boolean;\n  host: string;\n  secretKey: string;\n  integrationKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.host = this.getResponseProperty(\"Host\");\n    this.secretKey = this.getResponseProperty(\"SecretKey\");\n    this.integrationKey = this.getResponseProperty(\"IntegrationKey\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TwoFactorEmailResponse extends BaseResponse {\n  enabled: boolean;\n  email: string;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.email = this.getResponseProperty(\"Email\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { TwoFactorProviderType } from \"../../enums/two-factor-provider-type\";\n\nexport class TwoFactorProviderResponse extends BaseResponse {\n  enabled: boolean;\n  type: TwoFactorProviderType;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.type = this.getResponseProperty(\"Type\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TwoFactorRecoverResponse extends BaseResponse {\n  code: string;\n\n  constructor(response: any) {\n    super(response);\n    this.code = this.getResponseProperty(\"Code\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { Utils } from \"../../../platform/misc/utils\";\n\nexport class TwoFactorWebAuthnResponse extends BaseResponse {\n  enabled: boolean;\n  keys: KeyResponse[];\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    const keys = this.getResponseProperty(\"Keys\");\n    this.keys = keys == null ? null : keys.map((k: any) => new KeyResponse(k));\n  }\n}\n\nexport class KeyResponse extends BaseResponse {\n  name: string;\n  id: number;\n  migrated: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.name = this.getResponseProperty(\"Name\");\n    this.id = this.getResponseProperty(\"Id\");\n    this.migrated = this.getResponseProperty(\"Migrated\");\n  }\n}\n\nexport class ChallengeResponse extends BaseResponse implements PublicKeyCredentialCreationOptions {\n  attestation?: AttestationConveyancePreference;\n  authenticatorSelection?: AuthenticatorSelectionCriteria;\n  challenge: BufferSource;\n  excludeCredentials?: PublicKeyCredentialDescriptor[];\n  extensions?: AuthenticationExtensionsClientInputs;\n  pubKeyCredParams: PublicKeyCredentialParameters[];\n  rp: PublicKeyCredentialRpEntity;\n  timeout?: number;\n  user: PublicKeyCredentialUserEntity;\n\n  constructor(response: any) {\n    super(response);\n    this.attestation = this.getResponseProperty(\"attestation\");\n    this.authenticatorSelection = this.getResponseProperty(\"authenticatorSelection\");\n    this.challenge = Utils.fromUrlB64ToArray(this.getResponseProperty(\"challenge\"));\n    this.excludeCredentials = this.getResponseProperty(\"excludeCredentials\").map((c: any) => {\n      c.id = Utils.fromUrlB64ToArray(c.id).buffer;\n      return c;\n    });\n    this.extensions = this.getResponseProperty(\"extensions\");\n    this.pubKeyCredParams = this.getResponseProperty(\"pubKeyCredParams\");\n    this.rp = this.getResponseProperty(\"rp\");\n    this.timeout = this.getResponseProperty(\"timeout\");\n\n    const user = this.getResponseProperty(\"user\");\n    user.id = Utils.fromUrlB64ToArray(user.id);\n\n    this.user = user;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TwoFactorYubiKeyResponse extends BaseResponse {\n  enabled: boolean;\n  key1: string;\n  key2: string;\n  key3: string;\n  key4: string;\n  key5: string;\n  nfc: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.key1 = this.getResponseProperty(\"Key1\");\n    this.key2 = this.getResponseProperty(\"Key2\");\n    this.key3 = this.getResponseProperty(\"Key3\");\n    this.key4 = this.getResponseProperty(\"Key4\");\n    this.key5 = this.getResponseProperty(\"Key5\");\n    this.nfc = this.getResponseProperty(\"Nfc\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { PaymentMethodType, TransactionType } from \"../../enums\";\n\nexport class BillingResponse extends BaseResponse {\n  balance: number;\n  paymentSource: BillingSourceResponse;\n  invoices: BillingInvoiceResponse[] = [];\n  transactions: BillingTransactionResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.balance = this.getResponseProperty(\"Balance\");\n    const paymentSource = this.getResponseProperty(\"PaymentSource\");\n    const transactions = this.getResponseProperty(\"Transactions\");\n    const invoices = this.getResponseProperty(\"Invoices\");\n    this.paymentSource = paymentSource == null ? null : new BillingSourceResponse(paymentSource);\n    if (transactions != null) {\n      this.transactions = transactions.map((t: any) => new BillingTransactionResponse(t));\n    }\n    if (invoices != null) {\n      this.invoices = invoices.map((i: any) => new BillingInvoiceResponse(i));\n    }\n  }\n\n  get hasNoHistory() {\n    return this.invoices.length == 0 && this.transactions.length == 0;\n  }\n}\n\nexport class BillingSourceResponse extends BaseResponse {\n  type: PaymentMethodType;\n  cardBrand: string;\n  description: string;\n  needsVerification: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.type = this.getResponseProperty(\"Type\");\n    this.cardBrand = this.getResponseProperty(\"CardBrand\");\n    this.description = this.getResponseProperty(\"Description\");\n    this.needsVerification = this.getResponseProperty(\"NeedsVerification\");\n  }\n}\n\nexport class BillingInvoiceResponse extends BaseResponse {\n  url: string;\n  pdfUrl: string;\n  number: string;\n  paid: boolean;\n  date: string;\n  amount: number;\n\n  constructor(response: any) {\n    super(response);\n    this.url = this.getResponseProperty(\"Url\");\n    this.pdfUrl = this.getResponseProperty(\"PdfUrl\");\n    this.number = this.getResponseProperty(\"Number\");\n    this.paid = this.getResponseProperty(\"Paid\");\n    this.date = this.getResponseProperty(\"Date\");\n    this.amount = this.getResponseProperty(\"Amount\");\n  }\n}\n\nexport class BillingTransactionResponse extends BaseResponse {\n  createdDate: string;\n  amount: number;\n  refunded: boolean;\n  partiallyRefunded: boolean;\n  refundedAmount: number;\n  type: TransactionType;\n  paymentMethodType: PaymentMethodType;\n  details: string;\n\n  constructor(response: any) {\n    super(response);\n    this.createdDate = this.getResponseProperty(\"CreatedDate\");\n    this.amount = this.getResponseProperty(\"Amount\");\n    this.refunded = this.getResponseProperty(\"Refunded\");\n    this.partiallyRefunded = this.getResponseProperty(\"PartiallyRefunded\");\n    this.refundedAmount = this.getResponseProperty(\"RefundedAmount\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.paymentMethodType = this.getResponseProperty(\"PaymentMethodType\");\n    this.details = this.getResponseProperty(\"Details\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { BillingInvoiceResponse, BillingTransactionResponse } from \"./billing.response\";\n\nexport class BillingHistoryResponse extends BaseResponse {\n  invoices: BillingInvoiceResponse[] = [];\n  transactions: BillingTransactionResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    const transactions = this.getResponseProperty(\"Transactions\");\n    const invoices = this.getResponseProperty(\"Invoices\");\n    if (transactions != null) {\n      this.transactions = transactions.map((t: any) => new BillingTransactionResponse(t));\n    }\n    if (invoices != null) {\n      this.invoices = invoices.map((i: any) => new BillingInvoiceResponse(i));\n    }\n  }\n\n  get hasNoHistory() {\n    return this.invoices.length == 0 && this.transactions.length == 0;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { BillingSourceResponse } from \"./billing.response\";\n\nexport class BillingPaymentResponse extends BaseResponse {\n  balance: number;\n  paymentSource: BillingSourceResponse;\n\n  constructor(response: any) {\n    super(response);\n    this.balance = this.getResponseProperty(\"Balance\");\n    const paymentSource = this.getResponseProperty(\"PaymentSource\");\n    this.paymentSource = paymentSource == null ? null : new BillingSourceResponse(paymentSource);\n  }\n}\n","import { ProductType, ProviderType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { OrganizationUserStatusType, OrganizationUserType } from \"../../enums\";\nimport { PermissionsApi } from \"../api/permissions.api\";\n\nexport class ProfileOrganizationResponse extends BaseResponse {\n  id: string;\n  name: string;\n  usePolicies: boolean;\n  useGroups: boolean;\n  useDirectory: boolean;\n  useEvents: boolean;\n  useTotp: boolean;\n  use2fa: boolean;\n  useApi: boolean;\n  useSso: boolean;\n  useKeyConnector: boolean;\n  useScim: boolean;\n  useCustomPermissions: boolean;\n  useResetPassword: boolean;\n  useSecretsManager: boolean;\n  usePasswordManager: boolean;\n  useActivateAutofillPolicy: boolean;\n  selfHost: boolean;\n  usersGetPremium: boolean;\n  seats: number;\n  maxCollections: number;\n  maxStorageGb?: number;\n  key: string;\n  hasPublicAndPrivateKeys: boolean;\n  status: OrganizationUserStatusType;\n  type: OrganizationUserType;\n  enabled: boolean;\n  ssoBound: boolean;\n  identifier: string;\n  permissions: PermissionsApi;\n  resetPasswordEnrolled: boolean;\n  userId: string;\n  providerId: string;\n  providerName: string;\n  providerType?: ProviderType;\n  familySponsorshipFriendlyName: string;\n  familySponsorshipAvailable: boolean;\n  planProductType: ProductType;\n  keyConnectorEnabled: boolean;\n  keyConnectorUrl: string;\n  familySponsorshipLastSyncDate?: Date;\n  familySponsorshipValidUntil?: Date;\n  familySponsorshipToDelete?: boolean;\n  accessSecretsManager: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.usePolicies = this.getResponseProperty(\"UsePolicies\");\n    this.useGroups = this.getResponseProperty(\"UseGroups\");\n    this.useDirectory = this.getResponseProperty(\"UseDirectory\");\n    this.useEvents = this.getResponseProperty(\"UseEvents\");\n    this.useTotp = this.getResponseProperty(\"UseTotp\");\n    this.use2fa = this.getResponseProperty(\"Use2fa\");\n    this.useApi = this.getResponseProperty(\"UseApi\");\n    this.useSso = this.getResponseProperty(\"UseSso\");\n    this.useKeyConnector = this.getResponseProperty(\"UseKeyConnector\") ?? false;\n    this.useScim = this.getResponseProperty(\"UseScim\") ?? false;\n    this.useCustomPermissions = this.getResponseProperty(\"UseCustomPermissions\") ?? false;\n    this.useResetPassword = this.getResponseProperty(\"UseResetPassword\");\n    this.useSecretsManager = this.getResponseProperty(\"UseSecretsManager\");\n    this.usePasswordManager = this.getResponseProperty(\"UsePasswordManager\");\n    this.useActivateAutofillPolicy = this.getResponseProperty(\"UseActivateAutofillPolicy\");\n    this.selfHost = this.getResponseProperty(\"SelfHost\");\n    this.usersGetPremium = this.getResponseProperty(\"UsersGetPremium\");\n    this.seats = this.getResponseProperty(\"Seats\");\n    this.maxCollections = this.getResponseProperty(\"MaxCollections\");\n    this.maxStorageGb = this.getResponseProperty(\"MaxStorageGb\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.hasPublicAndPrivateKeys = this.getResponseProperty(\"HasPublicAndPrivateKeys\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.ssoBound = this.getResponseProperty(\"SsoBound\");\n    this.identifier = this.getResponseProperty(\"Identifier\");\n    this.permissions = new PermissionsApi(this.getResponseProperty(\"permissions\"));\n    this.resetPasswordEnrolled = this.getResponseProperty(\"ResetPasswordEnrolled\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.providerId = this.getResponseProperty(\"ProviderId\");\n    this.providerName = this.getResponseProperty(\"ProviderName\");\n    this.providerType = this.getResponseProperty(\"ProviderType\");\n    this.familySponsorshipFriendlyName = this.getResponseProperty(\"FamilySponsorshipFriendlyName\");\n    this.familySponsorshipAvailable = this.getResponseProperty(\"FamilySponsorshipAvailable\");\n    this.planProductType = this.getResponseProperty(\"PlanProductType\");\n    this.keyConnectorEnabled = this.getResponseProperty(\"KeyConnectorEnabled\") ?? false;\n    this.keyConnectorUrl = this.getResponseProperty(\"KeyConnectorUrl\");\n    const familySponsorshipLastSyncDateString = this.getResponseProperty(\n      \"FamilySponsorshipLastSyncDate\"\n    );\n    if (familySponsorshipLastSyncDateString) {\n      this.familySponsorshipLastSyncDate = new Date(familySponsorshipLastSyncDateString);\n    }\n    const familySponsorshipValidUntilString = this.getResponseProperty(\n      \"FamilySponsorshipValidUntil\"\n    );\n    if (familySponsorshipValidUntilString) {\n      this.familySponsorshipValidUntil = new Date(familySponsorshipValidUntilString);\n    }\n    this.familySponsorshipToDelete = this.getResponseProperty(\"FamilySponsorshipToDelete\");\n    this.accessSecretsManager = this.getResponseProperty(\"AccessSecretsManager\");\n  }\n}\n","import { ProfileOrganizationResponse } from \"./profile-organization.response\";\n\nexport class ProfileProviderOrganizationResponse extends ProfileOrganizationResponse {\n  constructor(response: any) {\n    super(response);\n    this.keyConnectorEnabled = false;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { ProviderUserStatusType, ProviderUserType } from \"../../enums\";\nimport { PermissionsApi } from \"../api/permissions.api\";\n\nexport class ProfileProviderResponse extends BaseResponse {\n  id: string;\n  name: string;\n  key: string;\n  status: ProviderUserStatusType;\n  type: ProviderUserType;\n  enabled: boolean;\n  permissions: PermissionsApi;\n  userId: string;\n  useEvents: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.permissions = new PermissionsApi(this.getResponseProperty(\"permissions\"));\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.useEvents = this.getResponseProperty(\"UseEvents\");\n  }\n}\n","import { ProfileOrganizationResponse } from \"../../admin-console/models/response/profile-organization.response\";\nimport { ProfileProviderOrganizationResponse } from \"../../admin-console/models/response/profile-provider-organization.response\";\nimport { ProfileProviderResponse } from \"../../admin-console/models/response/profile-provider.response\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class ProfileResponse extends BaseResponse {\n  id: string;\n  name: string;\n  email: string;\n  emailVerified: boolean;\n  masterPasswordHint: string;\n  premiumPersonally: boolean;\n  premiumFromOrganization: boolean;\n  culture: string;\n  twoFactorEnabled: boolean;\n  key: string;\n  avatarColor: string;\n  privateKey: string;\n  securityStamp: string;\n  forcePasswordReset: boolean;\n  usesKeyConnector: boolean;\n  organizations: ProfileOrganizationResponse[] = [];\n  providers: ProfileProviderResponse[] = [];\n  providerOrganizations: ProfileProviderOrganizationResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.emailVerified = this.getResponseProperty(\"EmailVerified\");\n    this.masterPasswordHint = this.getResponseProperty(\"MasterPasswordHint\");\n    this.premiumPersonally = this.getResponseProperty(\"Premium\");\n    this.premiumFromOrganization = this.getResponseProperty(\"PremiumFromOrganization\");\n    this.culture = this.getResponseProperty(\"Culture\");\n    this.twoFactorEnabled = this.getResponseProperty(\"TwoFactorEnabled\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.avatarColor = this.getResponseProperty(\"AvatarColor\");\n    this.privateKey = this.getResponseProperty(\"PrivateKey\");\n    this.securityStamp = this.getResponseProperty(\"SecurityStamp\");\n    this.forcePasswordReset = this.getResponseProperty(\"ForcePasswordReset\") ?? false;\n    this.usesKeyConnector = this.getResponseProperty(\"UsesKeyConnector\") ?? false;\n\n    const organizations = this.getResponseProperty(\"Organizations\");\n    if (organizations != null) {\n      this.organizations = organizations.map((o: any) => new ProfileOrganizationResponse(o));\n    }\n    const providers = this.getResponseProperty(\"Providers\");\n    if (providers != null) {\n      this.providers = providers.map((o: any) => new ProfileProviderResponse(o));\n    }\n    const providerOrganizations = this.getResponseProperty(\"ProviderOrganizations\");\n    if (providerOrganizations != null) {\n      this.providerOrganizations = providerOrganizations.map(\n        (o: any) => new ProfileProviderOrganizationResponse(o)\n      );\n    }\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { ProfileResponse } from \"../../../models/response/profile.response\";\n\nexport class PaymentResponse extends BaseResponse {\n  userProfile: ProfileResponse;\n  paymentIntentClientSecret: string;\n  success: boolean;\n\n  constructor(response: any) {\n    super(response);\n    const userProfile = this.getResponseProperty(\"UserProfile\");\n    if (userProfile != null) {\n      this.userProfile = new ProfileResponse(userProfile);\n    }\n    this.paymentIntentClientSecret = this.getResponseProperty(\"PaymentIntentClientSecret\");\n    this.success = this.getResponseProperty(\"Success\");\n  }\n}\n","import { ProductType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { BitwardenProductType, PlanType } from \"../../enums\";\n\nexport class PlanResponse extends BaseResponse {\n  type: PlanType;\n  product: ProductType;\n  bitwardenProduct: BitwardenProductType;\n  name: string;\n  isAnnual: boolean;\n  nameLocalizationKey: string;\n  descriptionLocalizationKey: string;\n  canBeUsedByBusiness: boolean;\n  baseSeats: number;\n  baseStorageGb: number;\n  maxCollections: number;\n  maxUsers: number;\n\n  hasAdditionalSeatsOption: boolean;\n  maxAdditionalSeats: number;\n  hasAdditionalStorageOption: boolean;\n  maxAdditionalStorage: number;\n  hasPremiumAccessOption: boolean;\n  trialPeriodDays: number;\n\n  hasSelfHost: boolean;\n  hasPolicies: boolean;\n  hasGroups: boolean;\n  hasDirectory: boolean;\n  hasEvents: boolean;\n  hasTotp: boolean;\n  has2fa: boolean;\n  hasApi: boolean;\n  hasSso: boolean;\n  hasResetPassword: boolean;\n  usersGetPremium: boolean;\n\n  upgradeSortOrder: number;\n  displaySortOrder: number;\n  legacyYear: number;\n  disabled: boolean;\n\n  stripePlanId: string;\n  stripeSeatPlanId: string;\n  stripeStoragePlanId: string;\n  stripePremiumAccessPlanId: string;\n  basePrice: number;\n  seatPrice: number;\n  additionalStoragePricePerGb: number;\n  premiumAccessOptionPrice: number;\n\n  // SM only\n  additionalPricePerServiceAccount: number;\n  baseServiceAccount: number;\n  maxServiceAccount: number;\n  hasAdditionalServiceAccountOption: boolean;\n  maxProjects: number;\n  maxAdditionalServiceAccounts: number;\n  stripeServiceAccountPlanId: string;\n\n  constructor(response: any) {\n    super(response);\n    this.type = this.getResponseProperty(\"Type\");\n    this.product = this.getResponseProperty(\"Product\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.isAnnual = this.getResponseProperty(\"IsAnnual\");\n    this.nameLocalizationKey = this.getResponseProperty(\"NameLocalizationKey\");\n    this.descriptionLocalizationKey = this.getResponseProperty(\"DescriptionLocalizationKey\");\n    this.canBeUsedByBusiness = this.getResponseProperty(\"CanBeUsedByBusiness\");\n    this.baseSeats = this.getResponseProperty(\"BaseSeats\");\n    this.baseStorageGb = this.getResponseProperty(\"BaseStorageGb\");\n    this.maxCollections = this.getResponseProperty(\"MaxCollections\");\n    this.maxUsers = this.getResponseProperty(\"MaxUsers\");\n    this.hasAdditionalSeatsOption = this.getResponseProperty(\"HasAdditionalSeatsOption\");\n    this.maxAdditionalSeats = this.getResponseProperty(\"MaxAdditionalSeats\");\n    this.hasAdditionalStorageOption = this.getResponseProperty(\"HasAdditionalStorageOption\");\n    this.maxAdditionalStorage = this.getResponseProperty(\"MaxAdditionalStorage\");\n    this.hasPremiumAccessOption = this.getResponseProperty(\"HasPremiumAccessOption\");\n    this.trialPeriodDays = this.getResponseProperty(\"TrialPeriodDays\");\n    this.hasSelfHost = this.getResponseProperty(\"HasSelfHost\");\n    this.hasPolicies = this.getResponseProperty(\"HasPolicies\");\n    this.hasGroups = this.getResponseProperty(\"HasGroups\");\n    this.hasDirectory = this.getResponseProperty(\"HasDirectory\");\n    this.hasEvents = this.getResponseProperty(\"HasEvents\");\n    this.hasTotp = this.getResponseProperty(\"HasTotp\");\n    this.has2fa = this.getResponseProperty(\"Has2fa\");\n    this.hasApi = this.getResponseProperty(\"HasApi\");\n    this.hasSso = this.getResponseProperty(\"HasSso\");\n    this.hasResetPassword = this.getResponseProperty(\"HasResetPassword\");\n    this.usersGetPremium = this.getResponseProperty(\"UsersGetPremium\");\n    this.upgradeSortOrder = this.getResponseProperty(\"UpgradeSortOrder\");\n    this.displaySortOrder = this.getResponseProperty(\"SortOrder\");\n    this.legacyYear = this.getResponseProperty(\"LegacyYear\");\n    this.disabled = this.getResponseProperty(\"Disabled\");\n    this.stripePlanId = this.getResponseProperty(\"StripePlanId\");\n    this.stripeSeatPlanId = this.getResponseProperty(\"StripeSeatPlanId\");\n    this.stripeStoragePlanId = this.getResponseProperty(\"StripeStoragePlanId\");\n    this.stripePremiumAccessPlanId = this.getResponseProperty(\"StripePremiumAccessPlanId\");\n    this.basePrice = this.getResponseProperty(\"BasePrice\");\n    this.seatPrice = this.getResponseProperty(\"SeatPrice\");\n    this.additionalStoragePricePerGb = this.getResponseProperty(\"AdditionalStoragePricePerGb\");\n    this.premiumAccessOptionPrice = this.getResponseProperty(\"PremiumAccessOptionPrice\");\n\n    this.bitwardenProduct = this.getResponseProperty(\"BitwardenProduct\");\n    this.additionalPricePerServiceAccount = this.getResponseProperty(\n      \"AdditionalPricePerServiceAccount\"\n    );\n    this.baseServiceAccount = this.getResponseProperty(\"BaseServiceAccount\");\n    this.maxServiceAccount = this.getResponseProperty(\"MaxServiceAccount\");\n    this.hasAdditionalServiceAccountOption = this.getResponseProperty(\n      \"HasAdditionalServiceAccountOption\"\n    );\n    this.maxProjects = this.getResponseProperty(\"MaxProjects\");\n    this.maxAdditionalServiceAccounts = this.getResponseProperty(\"MaxAdditionalServiceAccounts\");\n    this.stripeServiceAccountPlanId = this.getResponseProperty(\"StripeServiceAccountPlanId\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { BitwardenProductType } from \"../../enums\";\n\nexport class SubscriptionResponse extends BaseResponse {\n  storageName: string;\n  storageGb: number;\n  maxStorageGb: number;\n  subscription: BillingSubscriptionResponse;\n  upcomingInvoice: BillingSubscriptionUpcomingInvoiceResponse;\n  license: any;\n  expiration: string;\n  usingInAppPurchase: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.storageName = this.getResponseProperty(\"StorageName\");\n    this.storageGb = this.getResponseProperty(\"StorageGb\");\n    this.maxStorageGb = this.getResponseProperty(\"MaxStorageGb\");\n    this.license = this.getResponseProperty(\"License\");\n    this.expiration = this.getResponseProperty(\"Expiration\");\n    this.usingInAppPurchase = this.getResponseProperty(\"UsingInAppPurchase\");\n    const subscription = this.getResponseProperty(\"Subscription\");\n    const upcomingInvoice = this.getResponseProperty(\"UpcomingInvoice\");\n    this.subscription = subscription == null ? null : new BillingSubscriptionResponse(subscription);\n    this.upcomingInvoice =\n      upcomingInvoice == null\n        ? null\n        : new BillingSubscriptionUpcomingInvoiceResponse(upcomingInvoice);\n  }\n}\n\nexport class BillingSubscriptionResponse extends BaseResponse {\n  trialStartDate: string;\n  trialEndDate: string;\n  periodStartDate: string;\n  periodEndDate: string;\n  cancelledDate: string;\n  cancelAtEndDate: boolean;\n  status: string;\n  cancelled: boolean;\n  items: BillingSubscriptionItemResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.trialEndDate = this.getResponseProperty(\"TrialStartDate\");\n    this.trialEndDate = this.getResponseProperty(\"TrialEndDate\");\n    this.periodStartDate = this.getResponseProperty(\"PeriodStartDate\");\n    this.periodEndDate = this.getResponseProperty(\"PeriodEndDate\");\n    this.cancelledDate = this.getResponseProperty(\"CancelledDate\");\n    this.cancelAtEndDate = this.getResponseProperty(\"CancelAtEndDate\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.cancelled = this.getResponseProperty(\"Cancelled\");\n    const items = this.getResponseProperty(\"Items\");\n    if (items != null) {\n      this.items = items.map((i: any) => new BillingSubscriptionItemResponse(i));\n    }\n  }\n}\n\nexport class BillingSubscriptionItemResponse extends BaseResponse {\n  name: string;\n  amount: number;\n  quantity: number;\n  interval: string;\n  sponsoredSubscriptionItem: boolean;\n  addonSubscriptionItem: boolean;\n  bitwardenProduct: BitwardenProductType;\n\n  constructor(response: any) {\n    super(response);\n    this.name = this.getResponseProperty(\"Name\");\n    this.amount = this.getResponseProperty(\"Amount\");\n    this.quantity = this.getResponseProperty(\"Quantity\");\n    this.interval = this.getResponseProperty(\"Interval\");\n    this.sponsoredSubscriptionItem = this.getResponseProperty(\"SponsoredSubscriptionItem\");\n    this.addonSubscriptionItem = this.getResponseProperty(\"AddonSubscriptionItem\");\n    this.bitwardenProduct = this.getResponseProperty(\"BitwardenProduct\");\n  }\n}\n\nexport class BillingSubscriptionUpcomingInvoiceResponse extends BaseResponse {\n  date: string;\n  amount?: number;\n\n  constructor(response: any) {\n    super(response);\n    this.date = this.getResponseProperty(\"Date\");\n    this.amount = this.getResponseProperty(\"Amount\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TaxInfoResponse extends BaseResponse {\n  taxId: string;\n  taxIdType: string;\n  line1: string;\n  line2: string;\n  city: string;\n  state: string;\n  country: string;\n  postalCode: string;\n\n  constructor(response: any) {\n    super(response);\n    this.taxId = this.getResponseProperty(\"TaxIdNumber\");\n    this.taxIdType = this.getResponseProperty(\"TaxIdType\");\n    this.line1 = this.getResponseProperty(\"Line1\");\n    this.line2 = this.getResponseProperty(\"Line2\");\n    this.city = this.getResponseProperty(\"City\");\n    this.state = this.getResponseProperty(\"State\");\n    this.postalCode = this.getResponseProperty(\"PostalCode\");\n    this.country = this.getResponseProperty(\"Country\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TaxRateResponse extends BaseResponse {\n  id: string;\n  country: string;\n  state: string;\n  postalCode: string;\n  rate: number;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.country = this.getResponseProperty(\"Country\");\n    this.state = this.getResponseProperty(\"State\");\n    this.postalCode = this.getResponseProperty(\"PostalCode\");\n    this.rate = this.getResponseProperty(\"Rate\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class BreachAccountResponse extends BaseResponse {\n  addedDate: string;\n  breachDate: string;\n  dataClasses: string[];\n  description: string;\n  domain: string;\n  isActive: boolean;\n  isVerified: boolean;\n  logoPath: string;\n  modifiedDate: string;\n  name: string;\n  pwnCount: number;\n  title: string;\n\n  constructor(response: any) {\n    super(response);\n    this.addedDate = this.getResponseProperty(\"AddedDate\");\n    this.breachDate = this.getResponseProperty(\"BreachDate\");\n    this.dataClasses = this.getResponseProperty(\"DataClasses\");\n    this.description = this.getResponseProperty(\"Description\");\n    this.domain = this.getResponseProperty(\"Domain\");\n    this.isActive = this.getResponseProperty(\"IsActive\");\n    this.isVerified = this.getResponseProperty(\"IsVerified\");\n    this.logoPath = this.getResponseProperty(\"LogoPath\");\n    this.modifiedDate = this.getResponseProperty(\"ModifiedDate\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.pwnCount = this.getResponseProperty(\"PwnCount\");\n    this.title = this.getResponseProperty(\"Title\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class GlobalDomainResponse extends BaseResponse {\n  type: number;\n  domains: string[];\n  excluded: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.type = this.getResponseProperty(\"Type\");\n    this.domains = this.getResponseProperty(\"Domains\");\n    this.excluded = this.getResponseProperty(\"Excluded\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\nimport { GlobalDomainResponse } from \"./global-domain.response\";\n\nexport class DomainsResponse extends BaseResponse {\n  equivalentDomains: string[][];\n  globalEquivalentDomains: GlobalDomainResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.equivalentDomains = this.getResponseProperty(\"EquivalentDomains\");\n    const globalEquivalentDomains = this.getResponseProperty(\"GlobalEquivalentDomains\");\n    if (globalEquivalentDomains != null) {\n      this.globalEquivalentDomains = globalEquivalentDomains.map(\n        (d: any) => new GlobalDomainResponse(d)\n      );\n    } else {\n      this.globalEquivalentDomains = [];\n    }\n  }\n}\n","import { DeviceType, EventSystemUser, EventType } from \"../../enums\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class EventResponse extends BaseResponse {\n  type: EventType;\n  userId: string;\n  organizationId: string;\n  providerId: string;\n  cipherId: string;\n  collectionId: string;\n  groupId: string;\n  policyId: string;\n  organizationUserId: string;\n  providerUserId: string;\n  providerOrganizationId: string;\n  actingUserId: string;\n  date: string;\n  deviceType: DeviceType;\n  ipAddress: string;\n  installationId: string;\n  systemUser: EventSystemUser;\n  domainName: string;\n  secretId: string;\n  serviceAccountId: string;\n\n  constructor(response: any) {\n    super(response);\n    this.type = this.getResponseProperty(\"Type\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.providerId = this.getResponseProperty(\"ProviderId\");\n    this.cipherId = this.getResponseProperty(\"CipherId\");\n    this.collectionId = this.getResponseProperty(\"CollectionId\");\n    this.groupId = this.getResponseProperty(\"GroupId\");\n    this.policyId = this.getResponseProperty(\"PolicyId\");\n    this.organizationUserId = this.getResponseProperty(\"OrganizationUserId\");\n    this.providerUserId = this.getResponseProperty(\"ProviderUserId\");\n    this.providerOrganizationId = this.getResponseProperty(\"ProviderOrganizationId\");\n    this.actingUserId = this.getResponseProperty(\"ActingUserId\");\n    this.date = this.getResponseProperty(\"Date\");\n    this.deviceType = this.getResponseProperty(\"DeviceType\");\n    this.ipAddress = this.getResponseProperty(\"IpAddress\");\n    this.installationId = this.getResponseProperty(\"InstallationId\");\n    this.systemUser = this.getResponseProperty(\"SystemUser\");\n    this.domainName = this.getResponseProperty(\"DomainName\");\n    this.secretId = this.getResponseProperty(\"SecretId\");\n    this.serviceAccountId = this.getResponseProperty(\"ServiceAccountId\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class UserKeyResponse extends BaseResponse {\n  userId: string;\n  publicKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.publicKey = this.getResponseProperty(\"PublicKey\");\n  }\n}\n","import { FileUploadType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { CipherResponse } from \"./cipher.response\";\n\nexport class AttachmentUploadDataResponse extends BaseResponse {\n  attachmentId: string;\n  fileUploadType: FileUploadType;\n  cipherResponse: CipherResponse;\n  cipherMiniResponse: CipherResponse;\n  url: string = null;\n  constructor(response: any) {\n    super(response);\n    this.attachmentId = this.getResponseProperty(\"AttachmentId\");\n    this.fileUploadType = this.getResponseProperty(\"FileUploadType\");\n    const cipherResponse = this.getResponseProperty(\"CipherResponse\");\n    const cipherMiniResponse = this.getResponseProperty(\"CipherMiniResponse\");\n    this.cipherResponse = cipherResponse == null ? null : new CipherResponse(cipherResponse);\n    this.cipherMiniResponse =\n      cipherMiniResponse == null ? null : new CipherResponse(cipherMiniResponse);\n    this.url = this.getResponseProperty(\"Url\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class SendFileApi extends BaseResponse {\n  id: string;\n  fileName: string;\n  size: string;\n  sizeName: string;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.id = this.getResponseProperty(\"Id\");\n    this.fileName = this.getResponseProperty(\"FileName\");\n    this.size = this.getResponseProperty(\"Size\");\n    this.sizeName = this.getResponseProperty(\"SizeName\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class SendTextApi extends BaseResponse {\n  text: string;\n  hidden: boolean;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.text = this.getResponseProperty(\"Text\");\n    this.hidden = this.getResponseProperty(\"Hidden\") || false;\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\nimport { SendType } from \"../../enums/send-type\";\nimport { SendFileApi } from \"../api/send-file.api\";\nimport { SendTextApi } from \"../api/send-text.api\";\n\nexport class SendResponse extends BaseResponse {\n  id: string;\n  accessId: string;\n  type: SendType;\n  name: string;\n  notes: string;\n  file: SendFileApi;\n  text: SendTextApi;\n  key: string;\n  maxAccessCount?: number;\n  accessCount: number;\n  revisionDate: string;\n  expirationDate: string;\n  deletionDate: string;\n  password: string;\n  disable: boolean;\n  hideEmail: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.accessId = this.getResponseProperty(\"AccessId\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.notes = this.getResponseProperty(\"Notes\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.maxAccessCount = this.getResponseProperty(\"MaxAccessCount\");\n    this.accessCount = this.getResponseProperty(\"AccessCount\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n    this.expirationDate = this.getResponseProperty(\"ExpirationDate\");\n    this.deletionDate = this.getResponseProperty(\"DeletionDate\");\n    this.password = this.getResponseProperty(\"Password\");\n    this.disable = this.getResponseProperty(\"Disabled\") || false;\n    this.hideEmail = this.getResponseProperty(\"HideEmail\") || false;\n\n    const text = this.getResponseProperty(\"Text\");\n    if (text != null) {\n      this.text = new SendTextApi(text);\n    }\n\n    const file = this.getResponseProperty(\"File\");\n    if (file != null) {\n      this.file = new SendFileApi(file);\n    }\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class FolderResponse extends BaseResponse {\n  id: string;\n  name: string;\n  revisionDate: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n  }\n}\n","import { PolicyResponse } from \"../../../admin-console/models/response/policy.response\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { DomainsResponse } from \"../../../models/response/domains.response\";\nimport { ProfileResponse } from \"../../../models/response/profile.response\";\nimport { SendResponse } from \"../../../tools/send/models/response/send.response\";\n\nimport { CipherResponse } from \"./cipher.response\";\nimport { CollectionDetailsResponse } from \"./collection.response\";\nimport { FolderResponse } from \"./folder.response\";\n\nexport class SyncResponse extends BaseResponse {\n  profile?: ProfileResponse;\n  folders: FolderResponse[] = [];\n  collections: CollectionDetailsResponse[] = [];\n  ciphers: CipherResponse[] = [];\n  domains?: DomainsResponse;\n  policies?: PolicyResponse[] = [];\n  sends: SendResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n\n    const profile = this.getResponseProperty(\"Profile\");\n    if (profile != null) {\n      this.profile = new ProfileResponse(profile);\n    }\n\n    const folders = this.getResponseProperty(\"Folders\");\n    if (folders != null) {\n      this.folders = folders.map((f: any) => new FolderResponse(f));\n    }\n\n    const collections = this.getResponseProperty(\"Collections\");\n    if (collections != null) {\n      this.collections = collections.map((c: any) => new CollectionDetailsResponse(c));\n    }\n\n    const ciphers = this.getResponseProperty(\"Ciphers\");\n    if (ciphers != null) {\n      this.ciphers = ciphers.map((c: any) => new CipherResponse(c));\n    }\n\n    const domains = this.getResponseProperty(\"Domains\");\n    if (domains != null) {\n      this.domains = new DomainsResponse(domains);\n    }\n\n    const policies = this.getResponseProperty(\"Policies\");\n    if (policies != null) {\n      this.policies = policies.map((p: any) => new PolicyResponse(p));\n    }\n\n    const sends = this.getResponseProperty(\"Sends\");\n    if (sends != null) {\n      this.sends = sends.map((s: any) => new SendResponse(s));\n    }\n  }\n}\n","import { ApiService as ApiServiceAbstraction } from \"../abstractions/api.service\";\nimport { OrganizationConnectionType } from \"../admin-console/enums\";\nimport { OrganizationSponsorshipCreateRequest } from \"../admin-console/models/request/organization/organization-sponsorship-create.request\";\nimport { OrganizationSponsorshipRedeemRequest } from \"../admin-console/models/request/organization/organization-sponsorship-redeem.request\";\nimport { OrganizationConnectionRequest } from \"../admin-console/models/request/organization-connection.request\";\nimport { ProviderAddOrganizationRequest } from \"../admin-console/models/request/provider/provider-add-organization.request\";\nimport { ProviderOrganizationCreateRequest } from \"../admin-console/models/request/provider/provider-organization-create.request\";\nimport { ProviderSetupRequest } from \"../admin-console/models/request/provider/provider-setup.request\";\nimport { ProviderUpdateRequest } from \"../admin-console/models/request/provider/provider-update.request\";\nimport { ProviderUserAcceptRequest } from \"../admin-console/models/request/provider/provider-user-accept.request\";\nimport { ProviderUserBulkConfirmRequest } from \"../admin-console/models/request/provider/provider-user-bulk-confirm.request\";\nimport { ProviderUserBulkRequest } from \"../admin-console/models/request/provider/provider-user-bulk.request\";\nimport { ProviderUserConfirmRequest } from \"../admin-console/models/request/provider/provider-user-confirm.request\";\nimport { ProviderUserInviteRequest } from \"../admin-console/models/request/provider/provider-user-invite.request\";\nimport { ProviderUserUpdateRequest } from \"../admin-console/models/request/provider/provider-user-update.request\";\nimport { SelectionReadOnlyRequest } from \"../admin-console/models/request/selection-read-only.request\";\nimport {\n  OrganizationConnectionConfigApis,\n  OrganizationConnectionResponse,\n} from \"../admin-console/models/response/organization-connection.response\";\nimport { OrganizationExportResponse } from \"../admin-console/models/response/organization-export.response\";\nimport { OrganizationSponsorshipSyncStatusResponse } from \"../admin-console/models/response/organization-sponsorship-sync-status.response\";\nimport { PolicyResponse } from \"../admin-console/models/response/policy.response\";\nimport {\n  ProviderOrganizationOrganizationDetailsResponse,\n  ProviderOrganizationResponse,\n} from \"../admin-console/models/response/provider/provider-organization.response\";\nimport { ProviderUserBulkPublicKeyResponse } from \"../admin-console/models/response/provider/provider-user-bulk-public-key.response\";\nimport { ProviderUserBulkResponse } from \"../admin-console/models/response/provider/provider-user-bulk.response\";\nimport {\n  ProviderUserResponse,\n  ProviderUserUserDetailsResponse,\n} from \"../admin-console/models/response/provider/provider-user.response\";\nimport { ProviderResponse } from \"../admin-console/models/response/provider/provider.response\";\nimport { SelectionReadOnlyResponse } from \"../admin-console/models/response/selection-read-only.response\";\nimport { TokenService } from \"../auth/abstractions/token.service\";\nimport { DeviceVerificationRequest } from \"../auth/models/request/device-verification.request\";\nimport { EmailTokenRequest } from \"../auth/models/request/email-token.request\";\nimport { EmailRequest } from \"../auth/models/request/email.request\";\nimport { EmergencyAccessAcceptRequest } from \"../auth/models/request/emergency-access-accept.request\";\nimport { EmergencyAccessConfirmRequest } from \"../auth/models/request/emergency-access-confirm.request\";\nimport { EmergencyAccessInviteRequest } from \"../auth/models/request/emergency-access-invite.request\";\nimport { EmergencyAccessPasswordRequest } from \"../auth/models/request/emergency-access-password.request\";\nimport { EmergencyAccessUpdateRequest } from \"../auth/models/request/emergency-access-update.request\";\nimport { DeviceRequest } from \"../auth/models/request/identity-token/device.request\";\nimport { PasswordTokenRequest } from \"../auth/models/request/identity-token/password-token.request\";\nimport { SsoTokenRequest } from \"../auth/models/request/identity-token/sso-token.request\";\nimport { TokenTwoFactorRequest } from \"../auth/models/request/identity-token/token-two-factor.request\";\nimport { UserApiTokenRequest } from \"../auth/models/request/identity-token/user-api-token.request\";\nimport { KeyConnectorUserKeyRequest } from \"../auth/models/request/key-connector-user-key.request\";\nimport { PasswordHintRequest } from \"../auth/models/request/password-hint.request\";\nimport { PasswordRequest } from \"../auth/models/request/password.request\";\nimport { PasswordlessAuthRequest } from \"../auth/models/request/passwordless-auth.request\";\nimport { PasswordlessCreateAuthRequest } from \"../auth/models/request/passwordless-create-auth.request\";\nimport { SecretVerificationRequest } from \"../auth/models/request/secret-verification.request\";\nimport { SetKeyConnectorKeyRequest } from \"../auth/models/request/set-key-connector-key.request\";\nimport { SetPasswordRequest } from \"../auth/models/request/set-password.request\";\nimport { TwoFactorEmailRequest } from \"../auth/models/request/two-factor-email.request\";\nimport { TwoFactorProviderRequest } from \"../auth/models/request/two-factor-provider.request\";\nimport { TwoFactorRecoveryRequest } from \"../auth/models/request/two-factor-recovery.request\";\nimport { UpdateProfileRequest } from \"../auth/models/request/update-profile.request\";\nimport { UpdateTempPasswordRequest } from \"../auth/models/request/update-temp-password.request\";\nimport { UpdateTwoFactorAuthenticatorRequest } from \"../auth/models/request/update-two-factor-authenticator.request\";\nimport { UpdateTwoFactorDuoRequest } from \"../auth/models/request/update-two-factor-duo.request\";\nimport { UpdateTwoFactorEmailRequest } from \"../auth/models/request/update-two-factor-email.request\";\nimport { UpdateTwoFactorWebAuthnDeleteRequest } from \"../auth/models/request/update-two-factor-web-authn-delete.request\";\nimport { UpdateTwoFactorWebAuthnRequest } from \"../auth/models/request/update-two-factor-web-authn.request\";\nimport { UpdateTwoFactorYubioOtpRequest } from \"../auth/models/request/update-two-factor-yubio-otp.request\";\nimport { ApiKeyResponse } from \"../auth/models/response/api-key.response\";\nimport { AuthRequestResponse } from \"../auth/models/response/auth-request.response\";\nimport { DeviceVerificationResponse } from \"../auth/models/response/device-verification.response\";\nimport {\n  EmergencyAccessGranteeDetailsResponse,\n  EmergencyAccessGrantorDetailsResponse,\n  EmergencyAccessTakeoverResponse,\n  EmergencyAccessViewResponse,\n} from \"../auth/models/response/emergency-access.response\";\nimport { IdentityCaptchaResponse } from \"../auth/models/response/identity-captcha.response\";\nimport { IdentityTokenResponse } from \"../auth/models/response/identity-token.response\";\nimport { IdentityTwoFactorResponse } from \"../auth/models/response/identity-two-factor.response\";\nimport { KeyConnectorUserKeyResponse } from \"../auth/models/response/key-connector-user-key.response\";\nimport { MasterPasswordPolicyResponse } from \"../auth/models/response/master-password-policy.response\";\nimport { PreloginResponse } from \"../auth/models/response/prelogin.response\";\nimport { RegisterResponse } from \"../auth/models/response/register.response\";\nimport { SsoPreValidateResponse } from \"../auth/models/response/sso-pre-validate.response\";\nimport { TwoFactorAuthenticatorResponse } from \"../auth/models/response/two-factor-authenticator.response\";\nimport { TwoFactorDuoResponse } from \"../auth/models/response/two-factor-duo.response\";\nimport { TwoFactorEmailResponse } from \"../auth/models/response/two-factor-email.response\";\nimport { TwoFactorProviderResponse } from \"../auth/models/response/two-factor-provider.response\";\nimport { TwoFactorRecoverResponse } from \"../auth/models/response/two-factor-recover.response\";\nimport {\n  ChallengeResponse,\n  TwoFactorWebAuthnResponse,\n} from \"../auth/models/response/two-factor-web-authn.response\";\nimport { TwoFactorYubiKeyResponse } from \"../auth/models/response/two-factor-yubi-key.response\";\nimport { BitPayInvoiceRequest } from \"../billing/models/request/bit-pay-invoice.request\";\nimport { PaymentRequest } from \"../billing/models/request/payment.request\";\nimport { TaxInfoUpdateRequest } from \"../billing/models/request/tax-info-update.request\";\nimport { BillingHistoryResponse } from \"../billing/models/response/billing-history.response\";\nimport { BillingPaymentResponse } from \"../billing/models/response/billing-payment.response\";\nimport { PaymentResponse } from \"../billing/models/response/payment.response\";\nimport { PlanResponse } from \"../billing/models/response/plan.response\";\nimport { SubscriptionResponse } from \"../billing/models/response/subscription.response\";\nimport { TaxInfoResponse } from \"../billing/models/response/tax-info.response\";\nimport { TaxRateResponse } from \"../billing/models/response/tax-rate.response\";\nimport { DeviceType } from \"../enums\";\nimport { CollectionBulkDeleteRequest } from \"../models/request/collection-bulk-delete.request\";\nimport { DeleteRecoverRequest } from \"../models/request/delete-recover.request\";\nimport { EventRequest } from \"../models/request/event.request\";\nimport { IapCheckRequest } from \"../models/request/iap-check.request\";\nimport { KdfRequest } from \"../models/request/kdf.request\";\nimport { KeysRequest } from \"../models/request/keys.request\";\nimport { OrganizationImportRequest } from \"../models/request/organization-import.request\";\nimport { PreloginRequest } from \"../models/request/prelogin.request\";\nimport { RegisterRequest } from \"../models/request/register.request\";\nimport { StorageRequest } from \"../models/request/storage.request\";\nimport { UpdateAvatarRequest } from \"../models/request/update-avatar.request\";\nimport { UpdateDomainsRequest } from \"../models/request/update-domains.request\";\nimport { UpdateKeyRequest } from \"../models/request/update-key.request\";\nimport { VerifyDeleteRecoverRequest } from \"../models/request/verify-delete-recover.request\";\nimport { VerifyEmailRequest } from \"../models/request/verify-email.request\";\nimport { BreachAccountResponse } from \"../models/response/breach-account.response\";\nimport { DomainsResponse } from \"../models/response/domains.response\";\nimport { ErrorResponse } from \"../models/response/error.response\";\nimport { EventResponse } from \"../models/response/event.response\";\nimport { ListResponse } from \"../models/response/list.response\";\nimport { ProfileResponse } from \"../models/response/profile.response\";\nimport { UserKeyResponse } from \"../models/response/user-key.response\";\nimport { AppIdService } from \"../platform/abstractions/app-id.service\";\nimport { EnvironmentService } from \"../platform/abstractions/environment.service\";\nimport { PlatformUtilsService } from \"../platform/abstractions/platform-utils.service\";\nimport { Utils } from \"../platform/misc/utils\";\nimport { AttachmentRequest } from \"../vault/models/request/attachment.request\";\nimport { CipherBulkDeleteRequest } from \"../vault/models/request/cipher-bulk-delete.request\";\nimport { CipherBulkMoveRequest } from \"../vault/models/request/cipher-bulk-move.request\";\nimport { CipherBulkRestoreRequest } from \"../vault/models/request/cipher-bulk-restore.request\";\nimport { CipherBulkShareRequest } from \"../vault/models/request/cipher-bulk-share.request\";\nimport { CipherCollectionsRequest } from \"../vault/models/request/cipher-collections.request\";\nimport { CipherCreateRequest } from \"../vault/models/request/cipher-create.request\";\nimport { CipherPartialRequest } from \"../vault/models/request/cipher-partial.request\";\nimport { CipherShareRequest } from \"../vault/models/request/cipher-share.request\";\nimport { CipherRequest } from \"../vault/models/request/cipher.request\";\nimport { CollectionRequest } from \"../vault/models/request/collection.request\";\nimport { AttachmentUploadDataResponse } from \"../vault/models/response/attachment-upload-data.response\";\nimport { AttachmentResponse } from \"../vault/models/response/attachment.response\";\nimport { CipherResponse } from \"../vault/models/response/cipher.response\";\nimport {\n  CollectionAccessDetailsResponse,\n  CollectionResponse,\n} from \"../vault/models/response/collection.response\";\nimport { SyncResponse } from \"../vault/models/response/sync.response\";\n\n/**\n * @deprecated The `ApiService` class is deprecated and calls should be extracted into individual\n * api services. The `send` method is still allowed to be used within api services. For background\n * of this decision please read https://contributing.bitwarden.com/architecture/adr/refactor-api-service.\n */\nexport class ApiService implements ApiServiceAbstraction {\n  private device: DeviceType;\n  private deviceType: string;\n  private isWebClient = false;\n  private isDesktopClient = false;\n\n  constructor(\n    private tokenService: TokenService,\n    private platformUtilsService: PlatformUtilsService,\n    private environmentService: EnvironmentService,\n    private appIdService: AppIdService,\n    private logoutCallback: (expired: boolean) => Promise<void>,\n    private customUserAgent: string = null\n  ) {\n    this.device = platformUtilsService.getDevice();\n    this.deviceType = this.device.toString();\n    this.isWebClient =\n      this.device === DeviceType.IEBrowser ||\n      this.device === DeviceType.ChromeBrowser ||\n      this.device === DeviceType.EdgeBrowser ||\n      this.device === DeviceType.FirefoxBrowser ||\n      this.device === DeviceType.OperaBrowser ||\n      this.device === DeviceType.SafariBrowser ||\n      this.device === DeviceType.UnknownBrowser ||\n      this.device === DeviceType.VivaldiBrowser;\n    this.isDesktopClient =\n      this.device === DeviceType.WindowsDesktop ||\n      this.device === DeviceType.MacOsDesktop ||\n      this.device === DeviceType.LinuxDesktop;\n  }\n\n  // Auth APIs\n\n  async postIdentityToken(\n    request: UserApiTokenRequest | PasswordTokenRequest | SsoTokenRequest\n  ): Promise<IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse> {\n    const headers = new Headers({\n      \"Content-Type\": \"application/x-www-form-urlencoded; charset=utf-8\",\n      Accept: \"application/json\",\n      \"Device-Type\": this.deviceType,\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n    request.alterIdentityTokenHeaders(headers);\n\n    const identityToken =\n      request instanceof UserApiTokenRequest\n        ? request.toIdentityToken()\n        : request.toIdentityToken(this.platformUtilsService.getClientType());\n\n    const response = await this.fetch(\n      new Request(this.environmentService.getIdentityUrl() + \"/connect/token\", {\n        body: this.qsStringify(identityToken),\n        credentials: this.getCredentials(),\n        cache: \"no-store\",\n        headers: headers,\n        method: \"POST\",\n      })\n    );\n\n    let responseJson: any = null;\n    if (this.isJsonResponse(response)) {\n      responseJson = await response.json();\n    }\n\n    if (responseJson != null) {\n      if (response.status === 200) {\n        return new IdentityTokenResponse(responseJson);\n      } else if (\n        response.status === 400 &&\n        responseJson.TwoFactorProviders2 &&\n        Object.keys(responseJson.TwoFactorProviders2).length\n      ) {\n        await this.tokenService.clearTwoFactorToken();\n        return new IdentityTwoFactorResponse(responseJson);\n      } else if (\n        response.status === 400 &&\n        responseJson.HCaptcha_SiteKey &&\n        Object.keys(responseJson.HCaptcha_SiteKey).length\n      ) {\n        return new IdentityCaptchaResponse(responseJson);\n      }\n    }\n\n    return Promise.reject(new ErrorResponse(responseJson, response.status, true));\n  }\n\n  async refreshIdentityToken(): Promise<any> {\n    try {\n      await this.doAuthRefresh();\n    } catch (e) {\n      return Promise.reject(null);\n    }\n  }\n\n  // TODO: PM-3519: Create and move to AuthRequest Api service\n  async postAuthRequest(request: PasswordlessCreateAuthRequest): Promise<AuthRequestResponse> {\n    const r = await this.send(\"POST\", \"/auth-requests/\", request, false, true);\n    return new AuthRequestResponse(r);\n  }\n  async postAdminAuthRequest(request: PasswordlessCreateAuthRequest): Promise<AuthRequestResponse> {\n    const r = await this.send(\"POST\", \"/auth-requests/admin-request\", request, true, true);\n    return new AuthRequestResponse(r);\n  }\n\n  async getAuthResponse(id: string, accessCode: string): Promise<AuthRequestResponse> {\n    const path = `/auth-requests/${id}/response?code=${accessCode}`;\n    const r = await this.send(\"GET\", path, null, false, true);\n    return new AuthRequestResponse(r);\n  }\n\n  async getAuthRequest(id: string): Promise<AuthRequestResponse> {\n    const path = `/auth-requests/${id}`;\n    const r = await this.send(\"GET\", path, null, true, true);\n    return new AuthRequestResponse(r);\n  }\n\n  async putAuthRequest(id: string, request: PasswordlessAuthRequest): Promise<AuthRequestResponse> {\n    const path = `/auth-requests/${id}`;\n    const r = await this.send(\"PUT\", path, request, true, true);\n    return new AuthRequestResponse(r);\n  }\n\n  async getAuthRequests(): Promise<ListResponse<AuthRequestResponse>> {\n    const path = `/auth-requests/`;\n    const r = await this.send(\"GET\", path, null, true, true);\n    return new ListResponse(r, AuthRequestResponse);\n  }\n\n  async getLastAuthRequest(): Promise<AuthRequestResponse> {\n    const requests = await this.getAuthRequests();\n    const activeRequests = requests.data.filter((m) => !m.isAnswered && !m.isExpired);\n    const lastRequest = activeRequests.sort((a: AuthRequestResponse, b: AuthRequestResponse) =>\n      a.creationDate.localeCompare(b.creationDate)\n    )[activeRequests.length - 1];\n    return lastRequest;\n  }\n\n  // Account APIs\n\n  async getProfile(): Promise<ProfileResponse> {\n    const r = await this.send(\"GET\", \"/accounts/profile\", null, true, true);\n    return new ProfileResponse(r);\n  }\n\n  async getUserSubscription(): Promise<SubscriptionResponse> {\n    const r = await this.send(\"GET\", \"/accounts/subscription\", null, true, true);\n    return new SubscriptionResponse(r);\n  }\n\n  async getTaxInfo(): Promise<TaxInfoResponse> {\n    const r = await this.send(\"GET\", \"/accounts/tax\", null, true, true);\n    return new TaxInfoResponse(r);\n  }\n\n  async putProfile(request: UpdateProfileRequest): Promise<ProfileResponse> {\n    const r = await this.send(\"PUT\", \"/accounts/profile\", request, true, true);\n    return new ProfileResponse(r);\n  }\n\n  async putAvatar(request: UpdateAvatarRequest): Promise<ProfileResponse> {\n    const r = await this.send(\"PUT\", \"/accounts/avatar\", request, true, true);\n    return new ProfileResponse(r);\n  }\n\n  putTaxInfo(request: TaxInfoUpdateRequest): Promise<any> {\n    return this.send(\"PUT\", \"/accounts/tax\", request, true, false);\n  }\n\n  async postPrelogin(request: PreloginRequest): Promise<PreloginResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/accounts/prelogin\",\n      request,\n      false,\n      true,\n      this.environmentService.getIdentityUrl()\n    );\n    return new PreloginResponse(r);\n  }\n\n  postEmailToken(request: EmailTokenRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/email-token\", request, true, false);\n  }\n\n  postEmail(request: EmailRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/email\", request, true, false);\n  }\n\n  postPassword(request: PasswordRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/password\", request, true, false);\n  }\n\n  setPassword(request: SetPasswordRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/set-password\", request, true, false);\n  }\n\n  postSetKeyConnectorKey(request: SetKeyConnectorKeyRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/set-key-connector-key\", request, true, false);\n  }\n\n  postSecurityStamp(request: SecretVerificationRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/security-stamp\", request, true, false);\n  }\n\n  async getAccountRevisionDate(): Promise<number> {\n    const r = await this.send(\"GET\", \"/accounts/revision-date\", null, true, true);\n    return r as number;\n  }\n\n  postPasswordHint(request: PasswordHintRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/password-hint\", request, false, false);\n  }\n\n  async postRegister(request: RegisterRequest): Promise<RegisterResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/accounts/register\",\n      request,\n      false,\n      true,\n      this.environmentService.getIdentityUrl()\n    );\n    return new RegisterResponse(r);\n  }\n\n  async postPremium(data: FormData): Promise<PaymentResponse> {\n    const r = await this.send(\"POST\", \"/accounts/premium\", data, true, true);\n    return new PaymentResponse(r);\n  }\n\n  async postIapCheck(request: IapCheckRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/iap-check\", request, true, false);\n  }\n\n  postReinstatePremium(): Promise<any> {\n    return this.send(\"POST\", \"/accounts/reinstate-premium\", null, true, false);\n  }\n\n  postCancelPremium(): Promise<any> {\n    return this.send(\"POST\", \"/accounts/cancel-premium\", null, true, false);\n  }\n\n  async postAccountStorage(request: StorageRequest): Promise<PaymentResponse> {\n    const r = await this.send(\"POST\", \"/accounts/storage\", request, true, true);\n    return new PaymentResponse(r);\n  }\n\n  postAccountPayment(request: PaymentRequest): Promise<void> {\n    return this.send(\"POST\", \"/accounts/payment\", request, true, false);\n  }\n\n  postAccountLicense(data: FormData): Promise<any> {\n    return this.send(\"POST\", \"/accounts/license\", data, true, false);\n  }\n\n  postAccountKeys(request: KeysRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/keys\", request, true, false);\n  }\n\n  postAccountKey(request: UpdateKeyRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/key\", request, true, false);\n  }\n\n  postAccountVerifyEmail(): Promise<any> {\n    return this.send(\"POST\", \"/accounts/verify-email\", null, true, false);\n  }\n\n  postAccountVerifyEmailToken(request: VerifyEmailRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/verify-email-token\", request, false, false);\n  }\n\n  postAccountVerifyPassword(\n    request: SecretVerificationRequest\n  ): Promise<MasterPasswordPolicyResponse> {\n    return this.send(\"POST\", \"/accounts/verify-password\", request, true, true);\n  }\n\n  postAccountRecoverDelete(request: DeleteRecoverRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/delete-recover\", request, false, false);\n  }\n\n  postAccountRecoverDeleteToken(request: VerifyDeleteRecoverRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/delete-recover-token\", request, false, false);\n  }\n\n  postAccountKdf(request: KdfRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/kdf\", request, true, false);\n  }\n\n  async deleteSsoUser(organizationId: string): Promise<void> {\n    return this.send(\"DELETE\", \"/accounts/sso/\" + organizationId, null, true, false);\n  }\n\n  async getSsoUserIdentifier(): Promise<string> {\n    return this.send(\"GET\", \"/accounts/sso/user-identifier\", null, true, true);\n  }\n\n  async postUserApiKey(id: string, request: SecretVerificationRequest): Promise<ApiKeyResponse> {\n    const r = await this.send(\"POST\", \"/accounts/api-key\", request, true, true);\n    return new ApiKeyResponse(r);\n  }\n\n  async postUserRotateApiKey(\n    id: string,\n    request: SecretVerificationRequest\n  ): Promise<ApiKeyResponse> {\n    const r = await this.send(\"POST\", \"/accounts/rotate-api-key\", request, true, true);\n    return new ApiKeyResponse(r);\n  }\n\n  putUpdateTempPassword(request: UpdateTempPasswordRequest): Promise<any> {\n    return this.send(\"PUT\", \"/accounts/update-temp-password\", request, true, false);\n  }\n\n  postConvertToKeyConnector(): Promise<void> {\n    return this.send(\"POST\", \"/accounts/convert-to-key-connector\", null, true, false);\n  }\n\n  // Account Billing APIs\n\n  async getUserBillingHistory(): Promise<BillingHistoryResponse> {\n    const r = await this.send(\"GET\", \"/accounts/billing/history\", null, true, true);\n    return new BillingHistoryResponse(r);\n  }\n\n  async getUserBillingPayment(): Promise<BillingPaymentResponse> {\n    const r = await this.send(\"GET\", \"/accounts/billing/payment-method\", null, true, true);\n    return new BillingPaymentResponse(r);\n  }\n\n  // Cipher APIs\n\n  async getCipher(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"GET\", \"/ciphers/\" + id, null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async getFullCipherDetails(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"GET\", \"/ciphers/\" + id + \"/details\", null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async getCipherAdmin(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"GET\", \"/ciphers/\" + id + \"/admin\", null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async getCiphersOrganization(organizationId: string): Promise<ListResponse<CipherResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/ciphers/organization-details?organizationId=\" + organizationId,\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, CipherResponse);\n  }\n\n  async postCipher(request: CipherRequest): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async postCipherCreate(request: CipherCreateRequest): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/create\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async postCipherAdmin(request: CipherCreateRequest): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/admin\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putCipher(id: string, request: CipherRequest): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id, request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putPartialCipher(id: string, request: CipherPartialRequest): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/partial\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putCipherAdmin(id: string, request: CipherRequest): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/admin\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  deleteCipher(id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers/\" + id, null, true, false);\n  }\n\n  deleteCipherAdmin(id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers/\" + id + \"/admin\", null, true, false);\n  }\n\n  deleteManyCiphers(request: CipherBulkDeleteRequest): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers\", request, true, false);\n  }\n\n  deleteManyCiphersAdmin(request: CipherBulkDeleteRequest): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers/admin\", request, true, false);\n  }\n\n  putMoveCiphers(request: CipherBulkMoveRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/move\", request, true, false);\n  }\n\n  async putShareCipher(id: string, request: CipherShareRequest): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/share\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  putShareCiphers(request: CipherBulkShareRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/share\", request, true, false);\n  }\n\n  putCipherCollections(id: string, request: CipherCollectionsRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/\" + id + \"/collections\", request, true, false);\n  }\n\n  putCipherCollectionsAdmin(id: string, request: CipherCollectionsRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/\" + id + \"/collections-admin\", request, true, false);\n  }\n\n  postPurgeCiphers(\n    request: SecretVerificationRequest,\n    organizationId: string = null\n  ): Promise<any> {\n    let path = \"/ciphers/purge\";\n    if (organizationId != null) {\n      path += \"?organizationId=\" + organizationId;\n    }\n    return this.send(\"POST\", path, request, true, false);\n  }\n\n  putDeleteCipher(id: string): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/\" + id + \"/delete\", null, true, false);\n  }\n\n  putDeleteCipherAdmin(id: string): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/\" + id + \"/delete-admin\", null, true, false);\n  }\n\n  putDeleteManyCiphers(request: CipherBulkDeleteRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/delete\", request, true, false);\n  }\n\n  putDeleteManyCiphersAdmin(request: CipherBulkDeleteRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/delete-admin\", request, true, false);\n  }\n\n  async putRestoreCipher(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/restore\", null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putRestoreCipherAdmin(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/restore-admin\", null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putRestoreManyCiphers(\n    request: CipherBulkRestoreRequest\n  ): Promise<ListResponse<CipherResponse>> {\n    const r = await this.send(\"PUT\", \"/ciphers/restore\", request, true, true);\n    return new ListResponse<CipherResponse>(r, CipherResponse);\n  }\n\n  async putRestoreManyCiphersAdmin(\n    request: CipherBulkRestoreRequest\n  ): Promise<ListResponse<CipherResponse>> {\n    const r = await this.send(\"PUT\", \"/ciphers/restore-admin\", request, true, true);\n    return new ListResponse<CipherResponse>(r, CipherResponse);\n  }\n\n  // Attachments APIs\n\n  async getAttachmentData(\n    cipherId: string,\n    attachmentId: string,\n    emergencyAccessId?: string\n  ): Promise<AttachmentResponse> {\n    const path =\n      (emergencyAccessId != null ? \"/emergency-access/\" + emergencyAccessId + \"/\" : \"/ciphers/\") +\n      cipherId +\n      \"/attachment/\" +\n      attachmentId;\n    const r = await this.send(\"GET\", path, null, true, true);\n    return new AttachmentResponse(r);\n  }\n\n  async postCipherAttachment(\n    id: string,\n    request: AttachmentRequest\n  ): Promise<AttachmentUploadDataResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/\" + id + \"/attachment/v2\", request, true, true);\n    return new AttachmentUploadDataResponse(r);\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async postCipherAttachmentLegacy(id: string, data: FormData): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/\" + id + \"/attachment\", data, true, true);\n    return new CipherResponse(r);\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async postCipherAttachmentAdminLegacy(id: string, data: FormData): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/\" + id + \"/attachment-admin\", data, true, true);\n    return new CipherResponse(r);\n  }\n\n  deleteCipherAttachment(id: string, attachmentId: string): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers/\" + id + \"/attachment/\" + attachmentId, null, true, false);\n  }\n\n  deleteCipherAttachmentAdmin(id: string, attachmentId: string): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/ciphers/\" + id + \"/attachment/\" + attachmentId + \"/admin\",\n      null,\n      true,\n      false\n    );\n  }\n\n  postShareCipherAttachment(\n    id: string,\n    attachmentId: string,\n    data: FormData,\n    organizationId: string\n  ): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/ciphers/\" + id + \"/attachment/\" + attachmentId + \"/share?organizationId=\" + organizationId,\n      data,\n      true,\n      false\n    );\n  }\n\n  async renewAttachmentUploadUrl(\n    id: string,\n    attachmentId: string\n  ): Promise<AttachmentUploadDataResponse> {\n    const r = await this.send(\n      \"GET\",\n      \"/ciphers/\" + id + \"/attachment/\" + attachmentId + \"/renew\",\n      null,\n      true,\n      true\n    );\n    return new AttachmentUploadDataResponse(r);\n  }\n\n  postAttachmentFile(id: string, attachmentId: string, data: FormData): Promise<any> {\n    return this.send(\"POST\", \"/ciphers/\" + id + \"/attachment/\" + attachmentId, data, true, false);\n  }\n\n  // Collections APIs\n\n  async getCollectionAccessDetails(\n    organizationId: string,\n    id: string\n  ): Promise<CollectionAccessDetailsResponse> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id + \"/details\",\n      null,\n      true,\n      true\n    );\n    return new CollectionAccessDetailsResponse(r);\n  }\n\n  async getUserCollections(): Promise<ListResponse<CollectionResponse>> {\n    const r = await this.send(\"GET\", \"/collections\", null, true, true);\n    return new ListResponse(r, CollectionResponse);\n  }\n\n  async getCollections(organizationId: string): Promise<ListResponse<CollectionResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/collections\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, CollectionResponse);\n  }\n\n  async getManyCollectionsWithAccessDetails(\n    organizationId: string\n  ): Promise<ListResponse<CollectionAccessDetailsResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/collections/details\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, CollectionAccessDetailsResponse);\n  }\n\n  async getCollectionUsers(\n    organizationId: string,\n    id: string\n  ): Promise<SelectionReadOnlyResponse[]> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id + \"/users\",\n      null,\n      true,\n      true\n    );\n    return r.map((dr: any) => new SelectionReadOnlyResponse(dr));\n  }\n\n  async postCollection(\n    organizationId: string,\n    request: CollectionRequest\n  ): Promise<CollectionResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/collections\",\n      request,\n      true,\n      true\n    );\n    return new CollectionResponse(r);\n  }\n\n  async putCollection(\n    organizationId: string,\n    id: string,\n    request: CollectionRequest\n  ): Promise<CollectionResponse> {\n    const r = await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id,\n      request,\n      true,\n      true\n    );\n    return new CollectionResponse(r);\n  }\n\n  async putCollectionUsers(\n    organizationId: string,\n    id: string,\n    request: SelectionReadOnlyRequest[]\n  ): Promise<any> {\n    await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id + \"/users\",\n      request,\n      true,\n      false\n    );\n  }\n\n  deleteCollection(organizationId: string, id: string): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id,\n      null,\n      true,\n      false\n    );\n  }\n\n  deleteManyCollections(request: CollectionBulkDeleteRequest): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/organizations/\" + request.organizationId + \"/collections\",\n      request,\n      true,\n      false\n    );\n  }\n\n  deleteCollectionUser(\n    organizationId: string,\n    id: string,\n    organizationUserId: string\n  ): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id + \"/user/\" + organizationUserId,\n      null,\n      true,\n      false\n    );\n  }\n\n  // Groups APIs\n\n  async getGroupUsers(organizationId: string, id: string): Promise<string[]> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/groups/\" + id + \"/users\",\n      null,\n      true,\n      true\n    );\n    return r;\n  }\n\n  async putGroupUsers(organizationId: string, id: string, request: string[]): Promise<any> {\n    await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/groups/\" + id + \"/users\",\n      request,\n      true,\n      false\n    );\n  }\n\n  deleteGroupUser(organizationId: string, id: string, organizationUserId: string): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/groups/\" + id + \"/user/\" + organizationUserId,\n      null,\n      true,\n      false\n    );\n  }\n\n  // Plan APIs\n\n  async getPlans(): Promise<ListResponse<PlanResponse>> {\n    const r = await this.send(\"GET\", \"/plans/all\", null, false, true);\n    return new ListResponse(r, PlanResponse);\n  }\n\n  async postPublicImportDirectory(request: OrganizationImportRequest): Promise<any> {\n    return this.send(\"POST\", \"/public/organization/import\", request, true, false);\n  }\n\n  async getTaxRates(): Promise<ListResponse<TaxRateResponse>> {\n    const r = await this.send(\"GET\", \"/plans/sales-tax-rates/\", null, true, true);\n    return new ListResponse(r, TaxRateResponse);\n  }\n\n  // Settings APIs\n\n  async getSettingsDomains(): Promise<DomainsResponse> {\n    const r = await this.send(\"GET\", \"/settings/domains\", null, true, true);\n    return new DomainsResponse(r);\n  }\n\n  async putSettingsDomains(request: UpdateDomainsRequest): Promise<DomainsResponse> {\n    const r = await this.send(\"PUT\", \"/settings/domains\", request, true, true);\n    return new DomainsResponse(r);\n  }\n\n  // Sync APIs\n\n  async getSync(): Promise<SyncResponse> {\n    const path = this.isDesktopClient || this.isWebClient ? \"/sync?excludeDomains=true\" : \"/sync\";\n    const r = await this.send(\"GET\", path, null, true, true);\n    return new SyncResponse(r);\n  }\n\n  // Two-factor APIs\n\n  async getTwoFactorProviders(): Promise<ListResponse<TwoFactorProviderResponse>> {\n    const r = await this.send(\"GET\", \"/two-factor\", null, true, true);\n    return new ListResponse(r, TwoFactorProviderResponse);\n  }\n\n  async getTwoFactorOrganizationProviders(\n    organizationId: string\n  ): Promise<ListResponse<TwoFactorProviderResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/two-factor\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, TwoFactorProviderResponse);\n  }\n\n  async getTwoFactorAuthenticator(\n    request: SecretVerificationRequest\n  ): Promise<TwoFactorAuthenticatorResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-authenticator\", request, true, true);\n    return new TwoFactorAuthenticatorResponse(r);\n  }\n\n  async getTwoFactorEmail(request: SecretVerificationRequest): Promise<TwoFactorEmailResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-email\", request, true, true);\n    return new TwoFactorEmailResponse(r);\n  }\n\n  async getTwoFactorDuo(request: SecretVerificationRequest): Promise<TwoFactorDuoResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-duo\", request, true, true);\n    return new TwoFactorDuoResponse(r);\n  }\n\n  async getTwoFactorOrganizationDuo(\n    organizationId: string,\n    request: SecretVerificationRequest\n  ): Promise<TwoFactorDuoResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/two-factor/get-duo\",\n      request,\n      true,\n      true\n    );\n    return new TwoFactorDuoResponse(r);\n  }\n\n  async getTwoFactorYubiKey(request: SecretVerificationRequest): Promise<TwoFactorYubiKeyResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-yubikey\", request, true, true);\n    return new TwoFactorYubiKeyResponse(r);\n  }\n\n  async getTwoFactorWebAuthn(\n    request: SecretVerificationRequest\n  ): Promise<TwoFactorWebAuthnResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-webauthn\", request, true, true);\n    return new TwoFactorWebAuthnResponse(r);\n  }\n\n  async getTwoFactorWebAuthnChallenge(\n    request: SecretVerificationRequest\n  ): Promise<ChallengeResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-webauthn-challenge\", request, true, true);\n    return new ChallengeResponse(r);\n  }\n\n  async getTwoFactorRecover(request: SecretVerificationRequest): Promise<TwoFactorRecoverResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-recover\", request, true, true);\n    return new TwoFactorRecoverResponse(r);\n  }\n\n  async putTwoFactorAuthenticator(\n    request: UpdateTwoFactorAuthenticatorRequest\n  ): Promise<TwoFactorAuthenticatorResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/authenticator\", request, true, true);\n    return new TwoFactorAuthenticatorResponse(r);\n  }\n\n  async putTwoFactorEmail(request: UpdateTwoFactorEmailRequest): Promise<TwoFactorEmailResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/email\", request, true, true);\n    return new TwoFactorEmailResponse(r);\n  }\n\n  async putTwoFactorDuo(request: UpdateTwoFactorDuoRequest): Promise<TwoFactorDuoResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/duo\", request, true, true);\n    return new TwoFactorDuoResponse(r);\n  }\n\n  async putTwoFactorOrganizationDuo(\n    organizationId: string,\n    request: UpdateTwoFactorDuoRequest\n  ): Promise<TwoFactorDuoResponse> {\n    const r = await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/two-factor/duo\",\n      request,\n      true,\n      true\n    );\n    return new TwoFactorDuoResponse(r);\n  }\n\n  async putTwoFactorYubiKey(\n    request: UpdateTwoFactorYubioOtpRequest\n  ): Promise<TwoFactorYubiKeyResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/yubikey\", request, true, true);\n    return new TwoFactorYubiKeyResponse(r);\n  }\n\n  async putTwoFactorWebAuthn(\n    request: UpdateTwoFactorWebAuthnRequest\n  ): Promise<TwoFactorWebAuthnResponse> {\n    const response = request.deviceResponse.response as AuthenticatorAttestationResponse;\n    const data: any = Object.assign({}, request);\n\n    data.deviceResponse = {\n      id: request.deviceResponse.id,\n      rawId: btoa(request.deviceResponse.id),\n      type: request.deviceResponse.type,\n      extensions: request.deviceResponse.getClientExtensionResults(),\n      response: {\n        AttestationObject: Utils.fromBufferToB64(response.attestationObject),\n        clientDataJson: Utils.fromBufferToB64(response.clientDataJSON),\n      },\n    };\n\n    const r = await this.send(\"PUT\", \"/two-factor/webauthn\", data, true, true);\n    return new TwoFactorWebAuthnResponse(r);\n  }\n\n  async deleteTwoFactorWebAuthn(\n    request: UpdateTwoFactorWebAuthnDeleteRequest\n  ): Promise<TwoFactorWebAuthnResponse> {\n    const r = await this.send(\"DELETE\", \"/two-factor/webauthn\", request, true, true);\n    return new TwoFactorWebAuthnResponse(r);\n  }\n\n  async putTwoFactorDisable(request: TwoFactorProviderRequest): Promise<TwoFactorProviderResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/disable\", request, true, true);\n    return new TwoFactorProviderResponse(r);\n  }\n\n  async putTwoFactorOrganizationDisable(\n    organizationId: string,\n    request: TwoFactorProviderRequest\n  ): Promise<TwoFactorProviderResponse> {\n    const r = await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/two-factor/disable\",\n      request,\n      true,\n      true\n    );\n    return new TwoFactorProviderResponse(r);\n  }\n\n  postTwoFactorRecover(request: TwoFactorRecoveryRequest): Promise<any> {\n    return this.send(\"POST\", \"/two-factor/recover\", request, false, false);\n  }\n\n  postTwoFactorEmailSetup(request: TwoFactorEmailRequest): Promise<any> {\n    return this.send(\"POST\", \"/two-factor/send-email\", request, true, false);\n  }\n\n  postTwoFactorEmail(request: TwoFactorEmailRequest): Promise<any> {\n    return this.send(\"POST\", \"/two-factor/send-email-login\", request, false, false);\n  }\n\n  async getDeviceVerificationSettings(): Promise<DeviceVerificationResponse> {\n    const r = await this.send(\n      \"GET\",\n      \"/two-factor/get-device-verification-settings\",\n      null,\n      true,\n      true\n    );\n    return new DeviceVerificationResponse(r);\n  }\n\n  async putDeviceVerificationSettings(\n    request: DeviceVerificationRequest\n  ): Promise<DeviceVerificationResponse> {\n    const r = await this.send(\n      \"PUT\",\n      \"/two-factor/device-verification-settings\",\n      request,\n      true,\n      true\n    );\n    return new DeviceVerificationResponse(r);\n  }\n\n  // Emergency Access APIs\n\n  async getEmergencyAccessTrusted(): Promise<ListResponse<EmergencyAccessGranteeDetailsResponse>> {\n    const r = await this.send(\"GET\", \"/emergency-access/trusted\", null, true, true);\n    return new ListResponse(r, EmergencyAccessGranteeDetailsResponse);\n  }\n\n  async getEmergencyAccessGranted(): Promise<ListResponse<EmergencyAccessGrantorDetailsResponse>> {\n    const r = await this.send(\"GET\", \"/emergency-access/granted\", null, true, true);\n    return new ListResponse(r, EmergencyAccessGrantorDetailsResponse);\n  }\n\n  async getEmergencyAccess(id: string): Promise<EmergencyAccessGranteeDetailsResponse> {\n    const r = await this.send(\"GET\", \"/emergency-access/\" + id, null, true, true);\n    return new EmergencyAccessGranteeDetailsResponse(r);\n  }\n\n  async getEmergencyGrantorPolicies(id: string): Promise<ListResponse<PolicyResponse>> {\n    const r = await this.send(\"GET\", \"/emergency-access/\" + id + \"/policies\", null, true, true);\n    return new ListResponse(r, PolicyResponse);\n  }\n\n  putEmergencyAccess(id: string, request: EmergencyAccessUpdateRequest): Promise<any> {\n    return this.send(\"PUT\", \"/emergency-access/\" + id, request, true, false);\n  }\n\n  deleteEmergencyAccess(id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/emergency-access/\" + id, null, true, false);\n  }\n\n  postEmergencyAccessInvite(request: EmergencyAccessInviteRequest): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/invite\", request, true, false);\n  }\n\n  postEmergencyAccessReinvite(id: string): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/reinvite\", null, true, false);\n  }\n\n  postEmergencyAccessAccept(id: string, request: EmergencyAccessAcceptRequest): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/accept\", request, true, false);\n  }\n\n  postEmergencyAccessConfirm(id: string, request: EmergencyAccessConfirmRequest): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/confirm\", request, true, false);\n  }\n\n  postEmergencyAccessInitiate(id: string): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/initiate\", null, true, false);\n  }\n\n  postEmergencyAccessApprove(id: string): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/approve\", null, true, false);\n  }\n\n  postEmergencyAccessReject(id: string): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/reject\", null, true, false);\n  }\n\n  async postEmergencyAccessTakeover(id: string): Promise<EmergencyAccessTakeoverResponse> {\n    const r = await this.send(\"POST\", \"/emergency-access/\" + id + \"/takeover\", null, true, true);\n    return new EmergencyAccessTakeoverResponse(r);\n  }\n\n  async postEmergencyAccessPassword(\n    id: string,\n    request: EmergencyAccessPasswordRequest\n  ): Promise<any> {\n    await this.send(\"POST\", \"/emergency-access/\" + id + \"/password\", request, true, true);\n  }\n\n  async postEmergencyAccessView(id: string): Promise<EmergencyAccessViewResponse> {\n    const r = await this.send(\"POST\", \"/emergency-access/\" + id + \"/view\", null, true, true);\n    return new EmergencyAccessViewResponse(r);\n  }\n\n  // Organization APIs\n\n  async getCloudCommunicationsEnabled(): Promise<boolean> {\n    const r = await this.send(\"GET\", \"/organizations/connections/enabled\", null, true, true);\n    return r as boolean;\n  }\n\n  async getOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    id: string,\n    type: OrganizationConnectionType,\n    configType: { new (response: any): TConfig }\n  ): Promise<OrganizationConnectionResponse<TConfig>> {\n    const r = await this.send(\"GET\", `/organizations/connections/${id}/${type}`, null, true, true);\n    return new OrganizationConnectionResponse(r, configType);\n  }\n\n  async createOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    request: OrganizationConnectionRequest,\n    configType: { new (response: any): TConfig }\n  ): Promise<OrganizationConnectionResponse<TConfig>> {\n    const r = await this.send(\"POST\", \"/organizations/connections/\", request, true, true);\n    return new OrganizationConnectionResponse(r, configType);\n  }\n\n  async updateOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    request: OrganizationConnectionRequest,\n    configType: { new (response: any): TConfig },\n    organizationConnectionId?: string\n  ): Promise<OrganizationConnectionResponse<TConfig>> {\n    const r = await this.send(\n      \"PUT\",\n      \"/organizations/connections/\" + organizationConnectionId,\n      request,\n      true,\n      true\n    );\n    return new OrganizationConnectionResponse(r, configType);\n  }\n\n  async deleteOrganizationConnection(id: string): Promise<void> {\n    return this.send(\"DELETE\", \"/organizations/connections/\" + id, null, true, false);\n  }\n\n  // Provider APIs\n\n  async postProviderSetup(id: string, request: ProviderSetupRequest) {\n    const r = await this.send(\"POST\", \"/providers/\" + id + \"/setup\", request, true, true);\n    return new ProviderResponse(r);\n  }\n\n  async getProvider(id: string) {\n    const r = await this.send(\"GET\", \"/providers/\" + id, null, true, true);\n    return new ProviderResponse(r);\n  }\n\n  async putProvider(id: string, request: ProviderUpdateRequest) {\n    const r = await this.send(\"PUT\", \"/providers/\" + id, request, true, true);\n    return new ProviderResponse(r);\n  }\n\n  // Provider User APIs\n\n  async getProviderUsers(\n    providerId: string\n  ): Promise<ListResponse<ProviderUserUserDetailsResponse>> {\n    const r = await this.send(\"GET\", \"/providers/\" + providerId + \"/users\", null, true, true);\n    return new ListResponse(r, ProviderUserUserDetailsResponse);\n  }\n\n  async getProviderUser(providerId: string, id: string): Promise<ProviderUserResponse> {\n    const r = await this.send(\"GET\", \"/providers/\" + providerId + \"/users/\" + id, null, true, true);\n    return new ProviderUserResponse(r);\n  }\n\n  postProviderUserInvite(providerId: string, request: ProviderUserInviteRequest): Promise<any> {\n    return this.send(\"POST\", \"/providers/\" + providerId + \"/users/invite\", request, true, false);\n  }\n\n  postProviderUserReinvite(providerId: string, id: string): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/\" + id + \"/reinvite\",\n      null,\n      true,\n      false\n    );\n  }\n\n  async postManyProviderUserReinvite(\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ): Promise<ListResponse<ProviderUserBulkResponse>> {\n    const r = await this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/reinvite\",\n      request,\n      true,\n      true\n    );\n    return new ListResponse(r, ProviderUserBulkResponse);\n  }\n\n  async postProviderUserBulkConfirm(\n    providerId: string,\n    request: ProviderUserBulkConfirmRequest\n  ): Promise<ListResponse<ProviderUserBulkResponse>> {\n    const r = await this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/confirm\",\n      request,\n      true,\n      true\n    );\n    return new ListResponse(r, ProviderUserBulkResponse);\n  }\n\n  async deleteManyProviderUsers(\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ): Promise<ListResponse<ProviderUserBulkResponse>> {\n    const r = await this.send(\"DELETE\", \"/providers/\" + providerId + \"/users\", request, true, true);\n    return new ListResponse(r, ProviderUserBulkResponse);\n  }\n\n  postProviderUserAccept(\n    providerId: string,\n    id: string,\n    request: ProviderUserAcceptRequest\n  ): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/\" + id + \"/accept\",\n      request,\n      true,\n      false\n    );\n  }\n\n  postProviderUserConfirm(\n    providerId: string,\n    id: string,\n    request: ProviderUserConfirmRequest\n  ): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/\" + id + \"/confirm\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async postProviderUsersPublicKey(\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ): Promise<ListResponse<ProviderUserBulkPublicKeyResponse>> {\n    const r = await this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/public-keys\",\n      request,\n      true,\n      true\n    );\n    return new ListResponse(r, ProviderUserBulkPublicKeyResponse);\n  }\n\n  putProviderUser(\n    providerId: string,\n    id: string,\n    request: ProviderUserUpdateRequest\n  ): Promise<any> {\n    return this.send(\"PUT\", \"/providers/\" + providerId + \"/users/\" + id, request, true, false);\n  }\n\n  deleteProviderUser(providerId: string, id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/providers/\" + providerId + \"/users/\" + id, null, true, false);\n  }\n\n  // Provider Organization APIs\n\n  async getProviderClients(\n    providerId: string\n  ): Promise<ListResponse<ProviderOrganizationOrganizationDetailsResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/providers/\" + providerId + \"/organizations\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, ProviderOrganizationOrganizationDetailsResponse);\n  }\n\n  postProviderAddOrganization(\n    providerId: string,\n    request: ProviderAddOrganizationRequest\n  ): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/organizations/add\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async postProviderCreateOrganization(\n    providerId: string,\n    request: ProviderOrganizationCreateRequest\n  ): Promise<ProviderOrganizationResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/organizations\",\n      request,\n      true,\n      true\n    );\n    return new ProviderOrganizationResponse(r);\n  }\n\n  deleteProviderOrganization(providerId: string, id: string): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/providers/\" + providerId + \"/organizations/\" + id,\n      null,\n      true,\n      false\n    );\n  }\n\n  // Event APIs\n\n  async getEvents(start: string, end: string, token: string): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\"/events\", start, end, token),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsCipher(\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\"/ciphers/\" + id + \"/events\", start, end, token),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsOrganization(\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\"/organizations/\" + id + \"/events\", start, end, token),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsOrganizationUser(\n    organizationId: string,\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\n        \"/organizations/\" + organizationId + \"/users/\" + id + \"/events\",\n        start,\n        end,\n        token\n      ),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsProvider(\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\"/providers/\" + id + \"/events\", start, end, token),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsProviderUser(\n    providerId: string,\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\n        \"/providers/\" + providerId + \"/users/\" + id + \"/events\",\n        start,\n        end,\n        token\n      ),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async postEventsCollect(request: EventRequest[]): Promise<any> {\n    const authHeader = await this.getActiveBearerToken();\n    const headers = new Headers({\n      \"Device-Type\": this.deviceType,\n      Authorization: \"Bearer \" + authHeader,\n      \"Content-Type\": \"application/json; charset=utf-8\",\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n    const response = await this.fetch(\n      new Request(this.environmentService.getEventsUrl() + \"/collect\", {\n        cache: \"no-store\",\n        credentials: this.getCredentials(),\n        method: \"POST\",\n        body: JSON.stringify(request),\n        headers: headers,\n      })\n    );\n    if (response.status !== 200) {\n      return Promise.reject(\"Event post failed.\");\n    }\n  }\n\n  // User APIs\n\n  async getUserPublicKey(id: string): Promise<UserKeyResponse> {\n    const r = await this.send(\"GET\", \"/users/\" + id + \"/public-key\", null, true, true);\n    return new UserKeyResponse(r);\n  }\n\n  // HIBP APIs\n\n  async getHibpBreach(username: string): Promise<BreachAccountResponse[]> {\n    const r = await this.send(\"GET\", \"/hibp/breach?username=\" + username, null, true, true);\n    return r.map((a: any) => new BreachAccountResponse(a));\n  }\n\n  // Misc\n\n  async postBitPayInvoice(request: BitPayInvoiceRequest): Promise<string> {\n    const r = await this.send(\"POST\", \"/bitpay-invoice\", request, true, true);\n    return r as string;\n  }\n\n  async postSetupPayment(): Promise<string> {\n    const r = await this.send(\"POST\", \"/setup-payment\", null, true, true);\n    return r as string;\n  }\n\n  // Key Connector\n\n  async getMasterKeyFromKeyConnector(\n    keyConnectorUrl: string\n  ): Promise<KeyConnectorUserKeyResponse> {\n    const authHeader = await this.getActiveBearerToken();\n\n    const response = await this.fetch(\n      new Request(keyConnectorUrl + \"/user-keys\", {\n        cache: \"no-store\",\n        method: \"GET\",\n        headers: new Headers({\n          Accept: \"application/json\",\n          Authorization: \"Bearer \" + authHeader,\n        }),\n      })\n    );\n\n    if (response.status !== 200) {\n      const error = await this.handleError(response, false, true);\n      return Promise.reject(error);\n    }\n\n    return new KeyConnectorUserKeyResponse(await response.json());\n  }\n\n  async postUserKeyToKeyConnector(\n    keyConnectorUrl: string,\n    request: KeyConnectorUserKeyRequest\n  ): Promise<void> {\n    const authHeader = await this.getActiveBearerToken();\n\n    const response = await this.fetch(\n      new Request(keyConnectorUrl + \"/user-keys\", {\n        cache: \"no-store\",\n        method: \"POST\",\n        headers: new Headers({\n          Accept: \"application/json\",\n          Authorization: \"Bearer \" + authHeader,\n          \"Content-Type\": \"application/json; charset=utf-8\",\n        }),\n        body: JSON.stringify(request),\n      })\n    );\n\n    if (response.status !== 200) {\n      const error = await this.handleError(response, false, true);\n      return Promise.reject(error);\n    }\n  }\n\n  async getKeyConnectorAlive(keyConnectorUrl: string) {\n    const response = await this.fetch(\n      new Request(keyConnectorUrl + \"/alive\", {\n        cache: \"no-store\",\n        method: \"GET\",\n        headers: new Headers({\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json; charset=utf-8\",\n        }),\n      })\n    );\n\n    if (response.status !== 200) {\n      const error = await this.handleError(response, false, true);\n      return Promise.reject(error);\n    }\n  }\n\n  async getOrganizationExport(organizationId: string): Promise<OrganizationExportResponse> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/export\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationExportResponse(r);\n  }\n\n  // Helpers\n\n  async getActiveBearerToken(): Promise<string> {\n    let accessToken = await this.tokenService.getToken();\n    if (await this.tokenService.tokenNeedsRefresh()) {\n      await this.doAuthRefresh();\n      accessToken = await this.tokenService.getToken();\n    }\n    return accessToken;\n  }\n\n  async fetch(request: Request): Promise<Response> {\n    if (request.method === \"GET\") {\n      request.headers.set(\"Cache-Control\", \"no-store\");\n      request.headers.set(\"Pragma\", \"no-cache\");\n    }\n    request.headers.set(\"Bitwarden-Client-Name\", this.platformUtilsService.getClientType());\n    request.headers.set(\n      \"Bitwarden-Client-Version\",\n      await this.platformUtilsService.getApplicationVersionNumber()\n    );\n    return this.nativeFetch(request);\n  }\n\n  nativeFetch(request: Request): Promise<Response> {\n    return fetch(request);\n  }\n\n  async preValidateSso(identifier: string): Promise<SsoPreValidateResponse> {\n    if (identifier == null || identifier === \"\") {\n      throw new Error(\"Organization Identifier was not provided.\");\n    }\n    const headers = new Headers({\n      Accept: \"application/json\",\n      \"Device-Type\": this.deviceType,\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n\n    const path = `/account/prevalidate?domainHint=${encodeURIComponent(identifier)}`;\n    const response = await this.fetch(\n      new Request(this.environmentService.getIdentityUrl() + path, {\n        cache: \"no-store\",\n        credentials: this.getCredentials(),\n        headers: headers,\n        method: \"GET\",\n      })\n    );\n\n    if (response.status === 200) {\n      const body = await response.json();\n      return new SsoPreValidateResponse(body);\n    } else {\n      const error = await this.handleError(response, false, true);\n      return Promise.reject(error);\n    }\n  }\n\n  async postCreateSponsorship(\n    sponsoredOrgId: string,\n    request: OrganizationSponsorshipCreateRequest\n  ): Promise<void> {\n    return await this.send(\n      \"POST\",\n      \"/organization/sponsorship/\" +\n        (this.platformUtilsService.isSelfHost() ? \"self-hosted/\" : \"\") +\n        sponsoredOrgId +\n        \"/families-for-enterprise\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async getSponsorshipSyncStatus(\n    sponsoredOrgId: string\n  ): Promise<OrganizationSponsorshipSyncStatusResponse> {\n    const response = await this.send(\n      \"GET\",\n      \"/organization/sponsorship/\" + sponsoredOrgId + \"/sync-status\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationSponsorshipSyncStatusResponse(response);\n  }\n\n  async deleteRevokeSponsorship(sponsoringOrganizationId: string): Promise<void> {\n    return await this.send(\n      \"DELETE\",\n      \"/organization/sponsorship/\" +\n        (this.platformUtilsService.isSelfHost() ? \"self-hosted/\" : \"\") +\n        sponsoringOrganizationId,\n      null,\n      true,\n      false\n    );\n  }\n\n  async deleteRemoveSponsorship(sponsoringOrgId: string): Promise<void> {\n    return await this.send(\n      \"DELETE\",\n      \"/organization/sponsorship/sponsored/\" + sponsoringOrgId,\n      null,\n      true,\n      false\n    );\n  }\n\n  async postPreValidateSponsorshipToken(sponsorshipToken: string): Promise<boolean> {\n    const r = await this.send(\n      \"POST\",\n      \"/organization/sponsorship/validate-token?sponsorshipToken=\" +\n        encodeURIComponent(sponsorshipToken),\n      null,\n      true,\n      true\n    );\n    return r as boolean;\n  }\n\n  async postRedeemSponsorship(\n    sponsorshipToken: string,\n    request: OrganizationSponsorshipRedeemRequest\n  ): Promise<void> {\n    return await this.send(\n      \"POST\",\n      \"/organization/sponsorship/redeem?sponsorshipToken=\" + encodeURIComponent(sponsorshipToken),\n      request,\n      true,\n      false\n    );\n  }\n\n  async postResendSponsorshipOffer(sponsoringOrgId: string): Promise<void> {\n    return await this.send(\n      \"POST\",\n      \"/organization/sponsorship/\" + sponsoringOrgId + \"/families-for-enterprise/resend\",\n      null,\n      true,\n      false\n    );\n  }\n\n  protected async doAuthRefresh(): Promise<void> {\n    const refreshToken = await this.tokenService.getRefreshToken();\n    if (refreshToken != null && refreshToken !== \"\") {\n      return this.doRefreshToken();\n    }\n\n    const clientId = await this.tokenService.getClientId();\n    const clientSecret = await this.tokenService.getClientSecret();\n    if (!Utils.isNullOrWhitespace(clientId) && !Utils.isNullOrWhitespace(clientSecret)) {\n      return this.doApiTokenRefresh();\n    }\n\n    throw new Error(\"Cannot refresh token, no refresh token or api keys are stored\");\n  }\n\n  protected async doRefreshToken(): Promise<void> {\n    const refreshToken = await this.tokenService.getRefreshToken();\n    if (refreshToken == null || refreshToken === \"\") {\n      throw new Error();\n    }\n    const headers = new Headers({\n      \"Content-Type\": \"application/x-www-form-urlencoded; charset=utf-8\",\n      Accept: \"application/json\",\n      \"Device-Type\": this.deviceType,\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n\n    const decodedToken = await this.tokenService.decodeToken();\n    const response = await this.fetch(\n      new Request(this.environmentService.getIdentityUrl() + \"/connect/token\", {\n        body: this.qsStringify({\n          grant_type: \"refresh_token\",\n          client_id: decodedToken.client_id,\n          refresh_token: refreshToken,\n        }),\n        cache: \"no-store\",\n        credentials: this.getCredentials(),\n        headers: headers,\n        method: \"POST\",\n      })\n    );\n\n    if (response.status === 200) {\n      const responseJson = await response.json();\n      const tokenResponse = new IdentityTokenResponse(responseJson);\n      await this.tokenService.setTokens(\n        tokenResponse.accessToken,\n        tokenResponse.refreshToken,\n        null\n      );\n    } else {\n      const error = await this.handleError(response, true, true);\n      return Promise.reject(error);\n    }\n  }\n\n  protected async doApiTokenRefresh(): Promise<void> {\n    const clientId = await this.tokenService.getClientId();\n    const clientSecret = await this.tokenService.getClientSecret();\n\n    const appId = await this.appIdService.getAppId();\n    const deviceRequest = new DeviceRequest(appId, this.platformUtilsService);\n    const tokenRequest = new UserApiTokenRequest(\n      clientId,\n      clientSecret,\n      new TokenTwoFactorRequest(),\n      deviceRequest\n    );\n\n    const response = await this.postIdentityToken(tokenRequest);\n    if (!(response instanceof IdentityTokenResponse)) {\n      throw new Error(\"Invalid response received when refreshing api token\");\n    }\n\n    await this.tokenService.setToken(response.accessToken);\n  }\n\n  async send(\n    method: \"GET\" | \"POST\" | \"PUT\" | \"DELETE\",\n    path: string,\n    body: any,\n    authed: boolean,\n    hasResponse: boolean,\n    apiUrl?: string,\n    alterHeaders?: (headers: Headers) => void\n  ): Promise<any> {\n    apiUrl = Utils.isNullOrWhitespace(apiUrl) ? this.environmentService.getApiUrl() : apiUrl;\n\n    // Prevent directory traversal from malicious paths\n    const pathParts = path.split(\"?\");\n    const requestUrl =\n      apiUrl + Utils.normalizePath(pathParts[0]) + (pathParts.length > 1 ? `?${pathParts[1]}` : \"\");\n\n    const headers = new Headers({\n      \"Device-Type\": this.deviceType,\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n\n    const requestInit: RequestInit = {\n      cache: \"no-store\",\n      credentials: this.getCredentials(),\n      method: method,\n    };\n\n    if (authed) {\n      const authHeader = await this.getActiveBearerToken();\n      headers.set(\"Authorization\", \"Bearer \" + authHeader);\n    }\n    if (body != null) {\n      if (typeof body === \"string\") {\n        requestInit.body = body;\n        headers.set(\"Content-Type\", \"application/x-www-form-urlencoded; charset=utf-8\");\n      } else if (typeof body === \"object\") {\n        if (body instanceof FormData) {\n          requestInit.body = body;\n        } else {\n          headers.set(\"Content-Type\", \"application/json; charset=utf-8\");\n          requestInit.body = JSON.stringify(body);\n        }\n      }\n    }\n    if (hasResponse) {\n      headers.set(\"Accept\", \"application/json\");\n    }\n    if (alterHeaders != null) {\n      alterHeaders(headers);\n    }\n\n    requestInit.headers = headers;\n    const response = await this.fetch(new Request(requestUrl, requestInit));\n\n    const responseType = response.headers.get(\"content-type\");\n    const responseIsJson = responseType != null && responseType.indexOf(\"application/json\") !== -1;\n    if (hasResponse && response.status === 200 && responseIsJson) {\n      const responseJson = await response.json();\n      return responseJson;\n    } else if (response.status !== 200) {\n      const error = await this.handleError(response, false, authed);\n      return Promise.reject(error);\n    }\n  }\n\n  private async handleError(\n    response: Response,\n    tokenError: boolean,\n    authed: boolean\n  ): Promise<ErrorResponse> {\n    let responseJson: any = null;\n    if (this.isJsonResponse(response)) {\n      responseJson = await response.json();\n    } else if (this.isTextResponse(response)) {\n      responseJson = { Message: await response.text() };\n    }\n\n    if (authed) {\n      if (\n        response.status === 401 ||\n        response.status === 403 ||\n        (tokenError &&\n          response.status === 400 &&\n          responseJson != null &&\n          responseJson.error === \"invalid_grant\")\n      ) {\n        await this.logoutCallback(true);\n        return null;\n      }\n    }\n\n    return new ErrorResponse(responseJson, response.status, tokenError);\n  }\n\n  private qsStringify(params: any): string {\n    return Object.keys(params)\n      .map((key) => {\n        return encodeURIComponent(key) + \"=\" + encodeURIComponent(params[key]);\n      })\n      .join(\"&\");\n  }\n\n  private getCredentials(): RequestCredentials {\n    if (!this.isWebClient || this.environmentService.hasBaseUrl()) {\n      return \"include\";\n    }\n    return undefined;\n  }\n\n  private addEventParameters(base: string, start: string, end: string, token: string) {\n    if (start != null) {\n      base += \"?start=\" + start;\n    }\n    if (end != null) {\n      base += base.indexOf(\"?\") > -1 ? \"&\" : \"?\";\n      base += \"end=\" + end;\n    }\n    if (token != null) {\n      base += base.indexOf(\"?\") > -1 ? \"&\" : \"?\";\n      base += \"continuationToken=\" + token;\n    }\n    return base;\n  }\n\n  private isJsonResponse(response: Response): boolean {\n    const typeHeader = response.headers.get(\"content-type\");\n    return typeHeader != null && typeHeader.indexOf(\"application/json\") > -1;\n  }\n\n  private isTextResponse(response: Response): boolean {\n    const typeHeader = response.headers.get(\"content-type\");\n    return typeHeader != null && typeHeader.indexOf(\"text\") > -1;\n  }\n}\n","import { ApiService } from \"../abstractions/api.service\";\nimport { AuditService as AuditServiceAbstraction } from \"../abstractions/audit.service\";\nimport { BreachAccountResponse } from \"../models/response/breach-account.response\";\nimport { ErrorResponse } from \"../models/response/error.response\";\nimport { CryptoFunctionService } from \"../platform/abstractions/crypto-function.service\";\nimport { throttle } from \"../platform/misc/throttle\";\nimport { Utils } from \"../platform/misc/utils\";\n\nconst PwnedPasswordsApi = \"https://api.pwnedpasswords.com/range/\";\n\nexport class AuditService implements AuditServiceAbstraction {\n  constructor(\n    private cryptoFunctionService: CryptoFunctionService,\n    private apiService: ApiService\n  ) {}\n\n  @throttle(100, () => \"passwordLeaked\")\n  async passwordLeaked(password: string): Promise<number> {\n    const hashBytes = await this.cryptoFunctionService.hash(password, \"sha1\");\n    const hash = Utils.fromBufferToHex(hashBytes).toUpperCase();\n    const hashStart = hash.substr(0, 5);\n    const hashEnding = hash.substr(5);\n\n    const response = await this.apiService.nativeFetch(new Request(PwnedPasswordsApi + hashStart));\n    const leakedHashes = await response.text();\n    const match = leakedHashes.split(/\\r?\\n/).find((v) => {\n      return v.split(\":\")[0] === hashEnding;\n    });\n\n    return match != null ? parseInt(match.split(\":\")[1], 10) : 0;\n  }\n\n  async breachedAccounts(username: string): Promise<BreachAccountResponse[]> {\n    try {\n      return await this.apiService.getHibpBreach(username);\n    } catch (e) {\n      const error = e as ErrorResponse;\n      if (error.statusCode === 404) {\n        return [];\n      }\n      throw new Error();\n    }\n  }\n}\n","/**\n * Use as a Decorator on async functions, it will limit how many times the function can be\n * in-flight at a time.\n *\n * Calls beyond the limit will be queued, and run when one of the active calls finishes\n */\nexport function throttle(limit: number, throttleKey: (args: any[]) => string) {\n  return <T>(\n    target: any,\n    propertyKey: string | symbol,\n    descriptor: TypedPropertyDescriptor<(...args: any[]) => Promise<T>>\n  ) => {\n    const originalMethod: () => Promise<T> = descriptor.value;\n    const allThrottles = new Map<any, Map<string, (() => void)[]>>();\n\n    const getThrottles = (obj: any) => {\n      let throttles = allThrottles.get(obj);\n      if (throttles != null) {\n        return throttles;\n      }\n      throttles = new Map<string, (() => void)[]>();\n      allThrottles.set(obj, throttles);\n      return throttles;\n    };\n\n    return {\n      value: function (...args: any[]) {\n        const throttles = getThrottles(this);\n        const argsThrottleKey = throttleKey(args);\n        let queue = throttles.get(argsThrottleKey);\n        if (queue == null) {\n          queue = [];\n          throttles.set(argsThrottleKey, queue);\n        }\n\n        return new Promise<T>((resolve, reject) => {\n          const exec = () => {\n            const onFinally = () => {\n              queue.splice(queue.indexOf(exec), 1);\n              if (queue.length >= limit) {\n                queue[limit - 1]();\n              } else if (queue.length === 0) {\n                throttles.delete(argsThrottleKey);\n                if (throttles.size === 0) {\n                  allThrottles.delete(this);\n                }\n              }\n            };\n            originalMethod\n              .apply(this, args)\n              .then((val: any) => {\n                onFinally();\n                return val;\n              })\n              .catch((err: any) => {\n                onFinally();\n                throw err;\n              })\n              .then(resolve, reject);\n          };\n          queue.push(exec);\n          if (queue.length <= limit) {\n            exec();\n          }\n        });\n      },\n    };\n  };\n}\n","import { DeviceType } from \"../../../enums\";\nimport { View } from \"../../../models/view/view\";\nimport { DeviceResponse } from \"../responses/device.response\";\n\nexport class DeviceView implements View {\n  id: string;\n  userId: string;\n  name: string;\n  identifier: string;\n  type: DeviceType;\n  creationDate: string;\n  revisionDate: string;\n\n  constructor(deviceResponse: DeviceResponse) {\n    Object.assign(this, deviceResponse);\n  }\n}\n","import { Observable, defer, map } from \"rxjs\";\n\nimport { DevicesServiceAbstraction } from \"../../abstractions/devices/devices.service.abstraction\";\nimport { DeviceResponse } from \"../../abstractions/devices/responses/device.response\";\nimport { DeviceView } from \"../../abstractions/devices/views/device.view\";\nimport { DevicesApiServiceAbstraction } from \"../../auth/abstractions/devices-api.service.abstraction\";\nimport { ListResponse } from \"../../models/response/list.response\";\n\n/**\n * @class DevicesServiceImplementation\n * @implements {DevicesServiceAbstraction}\n * @description Observable based data store service for Devices.\n * note: defer is used to convert the promises to observables and to ensure\n * that observables are created for each subscription\n * (i.e., promsise --> observables are cold until subscribed to)\n */\nexport class DevicesServiceImplementation implements DevicesServiceAbstraction {\n  constructor(private devicesApiService: DevicesApiServiceAbstraction) {}\n\n  /**\n   * @description Gets the list of all devices.\n   */\n  getDevices$(): Observable<Array<DeviceView>> {\n    return defer(() => this.devicesApiService.getDevices()).pipe(\n      map((deviceResponses: ListResponse<DeviceResponse>) => {\n        return deviceResponses.data.map((deviceResponse: DeviceResponse) => {\n          return new DeviceView(deviceResponse);\n        });\n      })\n    );\n  }\n\n  /**\n   * @description Gets the device with the specified identifier.\n   */\n  getDeviceByIdentifier$(deviceIdentifier: string): Observable<DeviceView> {\n    return defer(() => this.devicesApiService.getDeviceByIdentifier(deviceIdentifier)).pipe(\n      map((deviceResponse: DeviceResponse) => new DeviceView(deviceResponse))\n    );\n  }\n\n  /**\n   * @description Checks if a device is known for a user by user's email and device's identifier.\n   */\n  isDeviceKnownForUser$(email: string, deviceIdentifier: string): Observable<boolean> {\n    return defer(() => this.devicesApiService.getKnownDevice(email, deviceIdentifier));\n  }\n\n  /**\n   * @description Updates the keys for the specified device.\n   */\n\n  updateTrustedDeviceKeys$(\n    deviceIdentifier: string,\n    devicePublicKeyEncryptedUserKey: string,\n    userKeyEncryptedDevicePublicKey: string,\n    deviceKeyEncryptedDevicePrivateKey: string\n  ): Observable<DeviceView> {\n    return defer(() =>\n      this.devicesApiService.updateTrustedDeviceKeys(\n        deviceIdentifier,\n        devicePublicKeyEncryptedUserKey,\n        userKeyEncryptedDevicePublicKey,\n        deviceKeyEncryptedDevicePrivateKey\n      )\n    ).pipe(map((deviceResponse: DeviceResponse) => new DeviceView(deviceResponse)));\n  }\n}\n","import { EventType } from \"../../enums\";\n\nexport class EventData {\n  type: EventType;\n  cipherId: string;\n  date: string;\n  organizationId: string;\n}\n","import { EventCollectionService as EventCollectionServiceAbstraction } from \"../../abstractions/event/event-collection.service\";\nimport { EventUploadService } from \"../../abstractions/event/event-upload.service\";\nimport { OrganizationService } from \"../../admin-console/abstractions/organization/organization.service.abstraction\";\nimport { EventType } from \"../../enums\";\nimport { EventData } from \"../../models/data/event.data\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { CipherService } from \"../../vault/abstractions/cipher.service\";\n\nexport class EventCollectionService implements EventCollectionServiceAbstraction {\n  constructor(\n    private cipherService: CipherService,\n    private stateService: StateService,\n    private organizationService: OrganizationService,\n    private eventUploadService: EventUploadService\n  ) {}\n\n  async collect(\n    eventType: EventType,\n    cipherId: string = null,\n    uploadImmediately = false,\n    organizationId: string = null\n  ): Promise<any> {\n    const authed = await this.stateService.getIsAuthenticated();\n    if (!authed) {\n      return;\n    }\n    const organizations = await this.organizationService.getAll();\n    if (organizations == null) {\n      return;\n    }\n    const orgIds = new Set<string>(organizations.filter((o) => o.useEvents).map((o) => o.id));\n    if (orgIds.size === 0) {\n      return;\n    }\n    if (cipherId != null) {\n      const cipher = await this.cipherService.get(cipherId);\n      if (cipher == null || cipher.organizationId == null || !orgIds.has(cipher.organizationId)) {\n        return;\n      }\n    }\n    if (organizationId != null) {\n      if (!orgIds.has(organizationId)) {\n        return;\n      }\n    }\n    let eventCollection = await this.stateService.getEventCollection();\n    if (eventCollection == null) {\n      eventCollection = [];\n    }\n    const event = new EventData();\n    event.type = eventType;\n    event.cipherId = cipherId;\n    event.date = new Date().toISOString();\n    event.organizationId = organizationId;\n    eventCollection.push(event);\n    await this.stateService.setEventCollection(eventCollection);\n    if (uploadImmediately) {\n      await this.eventUploadService.uploadEvents();\n    }\n  }\n}\n","import { EventType } from \"../../enums\";\n\nexport class EventRequest {\n  type: EventType;\n  cipherId: string;\n  date: string;\n  organizationId: string;\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { EventUploadService as EventUploadServiceAbstraction } from \"../../abstractions/event/event-upload.service\";\nimport { EventRequest } from \"../../models/request/event.request\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\n\nexport class EventUploadService implements EventUploadServiceAbstraction {\n  private inited = false;\n  constructor(\n    private apiService: ApiService,\n    private stateService: StateService,\n    private logService: LogService\n  ) {}\n\n  init(checkOnInterval: boolean) {\n    if (this.inited) {\n      return;\n    }\n\n    this.inited = true;\n    if (checkOnInterval) {\n      this.uploadEvents();\n      setInterval(() => this.uploadEvents(), 60 * 1000); // check every 60 seconds\n    }\n  }\n\n  async uploadEvents(userId?: string): Promise<void> {\n    const authed = await this.stateService.getIsAuthenticated({ userId: userId });\n    if (!authed) {\n      return;\n    }\n    const eventCollection = await this.stateService.getEventCollection({ userId: userId });\n    if (eventCollection == null || eventCollection.length === 0) {\n      return;\n    }\n    const request = eventCollection.map((e) => {\n      const req = new EventRequest();\n      req.type = e.type;\n      req.cipherId = e.cipherId;\n      req.date = e.date;\n      req.organizationId = e.organizationId;\n      return req;\n    });\n    try {\n      await this.apiService.postEventsCollect(request);\n      this.clearEvents(userId);\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  private async clearEvents(userId?: string): Promise<any> {\n    await this.stateService.setEventCollection(null, { userId: userId });\n  }\n}\n","import { NotificationType } from \"../../enums\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class NotificationResponse extends BaseResponse {\n  contextId: string;\n  type: NotificationType;\n  payload: any;\n\n  constructor(response: any) {\n    super(response);\n    this.contextId = this.getResponseProperty(\"ContextId\");\n    this.type = this.getResponseProperty(\"Type\");\n\n    const payload = this.getResponseProperty(\"Payload\");\n    switch (this.type) {\n      case NotificationType.SyncCipherCreate:\n      case NotificationType.SyncCipherDelete:\n      case NotificationType.SyncCipherUpdate:\n      case NotificationType.SyncLoginDelete:\n        this.payload = new SyncCipherNotification(payload);\n        break;\n      case NotificationType.SyncFolderCreate:\n      case NotificationType.SyncFolderDelete:\n      case NotificationType.SyncFolderUpdate:\n        this.payload = new SyncFolderNotification(payload);\n        break;\n      case NotificationType.SyncVault:\n      case NotificationType.SyncCiphers:\n      case NotificationType.SyncOrgKeys:\n      case NotificationType.SyncSettings:\n      case NotificationType.LogOut:\n        this.payload = new UserNotification(payload);\n        break;\n      case NotificationType.SyncSendCreate:\n      case NotificationType.SyncSendUpdate:\n      case NotificationType.SyncSendDelete:\n        this.payload = new SyncSendNotification(payload);\n        break;\n      case NotificationType.AuthRequest:\n      case NotificationType.AuthRequestResponse:\n        this.payload = new AuthRequestPushNotification(payload);\n        break;\n      default:\n        break;\n    }\n  }\n}\n\nexport class SyncCipherNotification extends BaseResponse {\n  id: string;\n  userId: string;\n  organizationId: string;\n  collectionIds: string[];\n  revisionDate: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.collectionIds = this.getResponseProperty(\"CollectionIds\");\n    this.revisionDate = new Date(this.getResponseProperty(\"RevisionDate\"));\n  }\n}\n\nexport class SyncFolderNotification extends BaseResponse {\n  id: string;\n  userId: string;\n  revisionDate: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.revisionDate = new Date(this.getResponseProperty(\"RevisionDate\"));\n  }\n}\n\nexport class UserNotification extends BaseResponse {\n  userId: string;\n  date: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.date = new Date(this.getResponseProperty(\"Date\"));\n  }\n}\n\nexport class SyncSendNotification extends BaseResponse {\n  id: string;\n  userId: string;\n  revisionDate: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.revisionDate = new Date(this.getResponseProperty(\"RevisionDate\"));\n  }\n}\n\nexport class AuthRequestPushNotification extends BaseResponse {\n  id: string;\n  userId: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n  }\n}\n","import * as signalR from \"@microsoft/signalr\";\nimport * as signalRMsgPack from \"@microsoft/signalr-protocol-msgpack\";\n\nimport { ApiService } from \"../abstractions/api.service\";\nimport { NotificationsService as NotificationsServiceAbstraction } from \"../abstractions/notifications.service\";\nimport { AuthService } from \"../auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"../auth/enums/authentication-status\";\nimport { NotificationType } from \"../enums\";\nimport {\n  NotificationResponse,\n  SyncCipherNotification,\n  SyncFolderNotification,\n  SyncSendNotification,\n} from \"../models/response/notification.response\";\nimport { AppIdService } from \"../platform/abstractions/app-id.service\";\nimport { EnvironmentService } from \"../platform/abstractions/environment.service\";\nimport { LogService } from \"../platform/abstractions/log.service\";\nimport { MessagingService } from \"../platform/abstractions/messaging.service\";\nimport { StateService } from \"../platform/abstractions/state.service\";\nimport { SyncService } from \"../vault/abstractions/sync/sync.service.abstraction\";\n\nexport class NotificationsService implements NotificationsServiceAbstraction {\n  private signalrConnection: signalR.HubConnection;\n  private url: string;\n  private connected = false;\n  private inited = false;\n  private inactive = false;\n  private reconnectTimer: any = null;\n\n  constructor(\n    private syncService: SyncService,\n    private appIdService: AppIdService,\n    private apiService: ApiService,\n    private environmentService: EnvironmentService,\n    private logoutCallback: (expired: boolean) => Promise<void>,\n    private logService: LogService,\n    private stateService: StateService,\n    private authService: AuthService,\n    private messagingService: MessagingService\n  ) {\n    this.environmentService.urls.subscribe(() => {\n      if (!this.inited) {\n        return;\n      }\n\n      this.init();\n    });\n  }\n\n  async init(): Promise<void> {\n    this.inited = false;\n    this.url = this.environmentService.getNotificationsUrl();\n\n    // Set notifications server URL to `https://-` to effectively disable communication\n    // with the notifications server from the client app\n    if (this.url === \"https://-\") {\n      return;\n    }\n\n    if (this.signalrConnection != null) {\n      this.signalrConnection.off(\"ReceiveMessage\");\n      this.signalrConnection.off(\"Heartbeat\");\n      await this.signalrConnection.stop();\n      this.connected = false;\n      this.signalrConnection = null;\n    }\n\n    this.signalrConnection = new signalR.HubConnectionBuilder()\n      .withUrl(this.url + \"/hub\", {\n        accessTokenFactory: () => this.apiService.getActiveBearerToken(),\n        skipNegotiation: true,\n        transport: signalR.HttpTransportType.WebSockets,\n      })\n      .withHubProtocol(new signalRMsgPack.MessagePackHubProtocol() as signalR.IHubProtocol)\n      // .configureLogging(signalR.LogLevel.Trace)\n      .build();\n\n    this.signalrConnection.on(\"ReceiveMessage\", (data: any) =>\n      this.processNotification(new NotificationResponse(data))\n    );\n    // eslint-disable-next-line\n    this.signalrConnection.on(\"Heartbeat\", (data: any) => {\n      /*console.log('Heartbeat!');*/\n    });\n    this.signalrConnection.onclose(() => {\n      this.connected = false;\n      this.reconnect(true);\n    });\n    this.inited = true;\n    if (await this.isAuthedAndUnlocked()) {\n      await this.reconnect(false);\n    }\n  }\n\n  async updateConnection(sync = false): Promise<void> {\n    if (!this.inited) {\n      return;\n    }\n    try {\n      if (await this.isAuthedAndUnlocked()) {\n        await this.reconnect(sync);\n      } else {\n        await this.signalrConnection.stop();\n      }\n    } catch (e) {\n      this.logService.error(e.toString());\n    }\n  }\n\n  async reconnectFromActivity(): Promise<void> {\n    this.inactive = false;\n    if (this.inited && !this.connected) {\n      await this.reconnect(true);\n    }\n  }\n\n  async disconnectFromInactivity(): Promise<void> {\n    this.inactive = true;\n    if (this.inited && this.connected) {\n      await this.signalrConnection.stop();\n    }\n  }\n\n  private async processNotification(notification: NotificationResponse) {\n    const appId = await this.appIdService.getAppId();\n    if (notification == null || notification.contextId === appId) {\n      return;\n    }\n\n    const isAuthenticated = await this.stateService.getIsAuthenticated();\n    const payloadUserId = notification.payload.userId || notification.payload.UserId;\n    const myUserId = await this.stateService.getUserId();\n    if (isAuthenticated && payloadUserId != null && payloadUserId !== myUserId) {\n      return;\n    }\n\n    switch (notification.type) {\n      case NotificationType.SyncCipherCreate:\n      case NotificationType.SyncCipherUpdate:\n        await this.syncService.syncUpsertCipher(\n          notification.payload as SyncCipherNotification,\n          notification.type === NotificationType.SyncCipherUpdate\n        );\n        break;\n      case NotificationType.SyncCipherDelete:\n      case NotificationType.SyncLoginDelete:\n        await this.syncService.syncDeleteCipher(notification.payload as SyncCipherNotification);\n        break;\n      case NotificationType.SyncFolderCreate:\n      case NotificationType.SyncFolderUpdate:\n        await this.syncService.syncUpsertFolder(\n          notification.payload as SyncFolderNotification,\n          notification.type === NotificationType.SyncFolderUpdate\n        );\n        break;\n      case NotificationType.SyncFolderDelete:\n        await this.syncService.syncDeleteFolder(notification.payload as SyncFolderNotification);\n        break;\n      case NotificationType.SyncVault:\n      case NotificationType.SyncCiphers:\n      case NotificationType.SyncSettings:\n        if (isAuthenticated) {\n          await this.syncService.fullSync(false);\n        }\n        break;\n      case NotificationType.SyncOrgKeys:\n        if (isAuthenticated) {\n          await this.syncService.fullSync(true);\n          // Stop so a reconnect can be made\n          await this.signalrConnection.stop();\n        }\n        break;\n      case NotificationType.LogOut:\n        if (isAuthenticated) {\n          this.logoutCallback(true);\n        }\n        break;\n      case NotificationType.SyncSendCreate:\n      case NotificationType.SyncSendUpdate:\n        await this.syncService.syncUpsertSend(\n          notification.payload as SyncSendNotification,\n          notification.type === NotificationType.SyncSendUpdate\n        );\n        break;\n      case NotificationType.SyncSendDelete:\n        await this.syncService.syncDeleteSend(notification.payload as SyncSendNotification);\n        break;\n      case NotificationType.AuthRequest:\n        if (await this.stateService.getApproveLoginRequests()) {\n          this.messagingService.send(\"openLoginApproval\", {\n            notificationId: notification.payload.id,\n          });\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  private async reconnect(sync: boolean) {\n    if (this.reconnectTimer != null) {\n      clearTimeout(this.reconnectTimer);\n      this.reconnectTimer = null;\n    }\n    if (this.connected || !this.inited || this.inactive) {\n      return;\n    }\n    const authedAndUnlocked = await this.isAuthedAndUnlocked();\n    if (!authedAndUnlocked) {\n      return;\n    }\n\n    try {\n      await this.signalrConnection.start();\n      this.connected = true;\n      if (sync) {\n        await this.syncService.fullSync(false);\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    if (!this.connected) {\n      this.reconnectTimer = setTimeout(() => this.reconnect(sync), this.random(120000, 300000));\n    }\n  }\n\n  private async isAuthedAndUnlocked() {\n    const authStatus = await this.authService.getAuthStatus();\n    return authStatus >= AuthenticationStatus.Unlocked;\n  }\n\n  private random(min: number, max: number) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n  }\n}\n","import * as lunr from \"lunr\";\n\nimport { SearchService as SearchServiceAbstraction } from \"../abstractions/search.service\";\nimport { FieldType, UriMatchType } from \"../enums\";\nimport { I18nService } from \"../platform/abstractions/i18n.service\";\nimport { LogService } from \"../platform/abstractions/log.service\";\nimport { SendView } from \"../tools/send/models/view/send.view\";\nimport { CipherType } from \"../vault/enums/cipher-type\";\nimport { CipherView } from \"../vault/models/view/cipher.view\";\n\nexport class SearchService implements SearchServiceAbstraction {\n  private static registeredPipeline = false;\n\n  indexedEntityId?: string = null;\n  private indexing = false;\n  private index: lunr.Index = null;\n  private readonly immediateSearchLocales: string[] = [\"zh-CN\", \"zh-TW\", \"ja\", \"ko\", \"vi\"];\n  private readonly defaultSearchableMinLength: number = 2;\n  private searchableMinLength: number = this.defaultSearchableMinLength;\n\n  constructor(private logService: LogService, private i18nService: I18nService) {\n    this.i18nService.locale$.subscribe((locale) => {\n      if (this.immediateSearchLocales.indexOf(locale) !== -1) {\n        this.searchableMinLength = 1;\n      } else {\n        this.searchableMinLength = this.defaultSearchableMinLength;\n      }\n    });\n\n    // Currently have to ensure this is only done a single time. Lunr allows you to register a function\n    // multiple times but they will add a warning message to the console. The way they do that breaks when ran on a service worker.\n    if (!SearchService.registeredPipeline) {\n      SearchService.registeredPipeline = true;\n      //register lunr pipeline function\n      lunr.Pipeline.registerFunction(this.normalizeAccentsPipelineFunction, \"normalizeAccents\");\n    }\n  }\n\n  clearIndex(): void {\n    this.indexedEntityId = null;\n    this.index = null;\n  }\n\n  isSearchable(query: string): boolean {\n    query = SearchService.normalizeSearchQuery(query);\n    const notSearchable =\n      query == null ||\n      (this.index == null && query.length < this.searchableMinLength) ||\n      (this.index != null && query.length < this.searchableMinLength && query.indexOf(\">\") !== 0);\n    return !notSearchable;\n  }\n\n  indexCiphers(ciphers: CipherView[], indexedEntityId?: string): void {\n    if (this.indexing) {\n      return;\n    }\n\n    this.indexing = true;\n    this.indexedEntityId = indexedEntityId;\n    this.index = null;\n    const builder = new lunr.Builder();\n    builder.pipeline.add(this.normalizeAccentsPipelineFunction);\n    builder.ref(\"id\");\n    builder.field(\"shortid\", { boost: 100, extractor: (c: CipherView) => c.id.substr(0, 8) });\n    builder.field(\"name\", {\n      boost: 10,\n    });\n    builder.field(\"subtitle\", {\n      boost: 5,\n      extractor: (c: CipherView) => {\n        if (c.subTitle != null && c.type === CipherType.Card) {\n          return c.subTitle.replace(/\\*/g, \"\");\n        }\n        return c.subTitle;\n      },\n    });\n    builder.field(\"notes\");\n    builder.field(\"login.username\", {\n      extractor: (c: CipherView) =>\n        c.type === CipherType.Login && c.login != null ? c.login.username : null,\n    });\n    builder.field(\"login.uris\", { boost: 2, extractor: (c: CipherView) => this.uriExtractor(c) });\n    builder.field(\"fields\", { extractor: (c: CipherView) => this.fieldExtractor(c, false) });\n    builder.field(\"fields_joined\", { extractor: (c: CipherView) => this.fieldExtractor(c, true) });\n    builder.field(\"attachments\", {\n      extractor: (c: CipherView) => this.attachmentExtractor(c, false),\n    });\n    builder.field(\"attachments_joined\", {\n      extractor: (c: CipherView) => this.attachmentExtractor(c, true),\n    });\n    builder.field(\"organizationid\", { extractor: (c: CipherView) => c.organizationId });\n    ciphers = ciphers || [];\n    ciphers.forEach((c) => builder.add(c));\n    this.index = builder.build();\n\n    this.indexing = false;\n\n    this.logService.info(\"Finished search indexing\");\n  }\n\n  async searchCiphers(\n    query: string,\n    filter: ((cipher: CipherView) => boolean) | ((cipher: CipherView) => boolean)[] = null,\n    ciphers: CipherView[]\n  ): Promise<CipherView[]> {\n    const results: CipherView[] = [];\n    if (query != null) {\n      query = SearchService.normalizeSearchQuery(query.trim().toLowerCase());\n    }\n    if (query === \"\") {\n      query = null;\n    }\n\n    if (ciphers == null) {\n      ciphers = [];\n    }\n\n    if (filter != null && Array.isArray(filter) && filter.length > 0) {\n      ciphers = ciphers.filter((c) => filter.every((f) => f == null || f(c)));\n    } else if (filter != null) {\n      ciphers = ciphers.filter(filter as (cipher: CipherView) => boolean);\n    }\n\n    if (!this.isSearchable(query)) {\n      return ciphers;\n    }\n\n    if (this.indexing) {\n      await new Promise((r) => setTimeout(r, 250));\n      if (this.indexing) {\n        await new Promise((r) => setTimeout(r, 500));\n      }\n    }\n\n    const index = this.getIndexForSearch();\n    if (index == null) {\n      // Fall back to basic search if index is not available\n      return this.searchCiphersBasic(ciphers, query);\n    }\n\n    const ciphersMap = new Map<string, CipherView>();\n    ciphers.forEach((c) => ciphersMap.set(c.id, c));\n\n    let searchResults: lunr.Index.Result[] = null;\n    const isQueryString = query != null && query.length > 1 && query.indexOf(\">\") === 0;\n    if (isQueryString) {\n      try {\n        searchResults = index.search(query.substr(1).trim());\n      } catch (e) {\n        this.logService.error(e);\n      }\n    } else {\n      const soWild = lunr.Query.wildcard.LEADING | lunr.Query.wildcard.TRAILING;\n      searchResults = index.query((q) => {\n        lunr.tokenizer(query).forEach((token) => {\n          const t = token.toString();\n          q.term(t, { fields: [\"name\"], wildcard: soWild });\n          q.term(t, { fields: [\"subtitle\"], wildcard: soWild });\n          q.term(t, { fields: [\"login.uris\"], wildcard: soWild });\n          q.term(t, {});\n        });\n      });\n    }\n\n    if (searchResults != null) {\n      searchResults.forEach((r) => {\n        if (ciphersMap.has(r.ref)) {\n          results.push(ciphersMap.get(r.ref));\n        }\n      });\n    }\n    return results;\n  }\n\n  searchCiphersBasic(ciphers: CipherView[], query: string, deleted = false) {\n    query = SearchService.normalizeSearchQuery(query.trim().toLowerCase());\n    return ciphers.filter((c) => {\n      if (deleted !== c.isDeleted) {\n        return false;\n      }\n      if (c.name != null && c.name.toLowerCase().indexOf(query) > -1) {\n        return true;\n      }\n      if (query.length >= 8 && c.id.startsWith(query)) {\n        return true;\n      }\n      if (c.subTitle != null && c.subTitle.toLowerCase().indexOf(query) > -1) {\n        return true;\n      }\n      if (\n        c.login &&\n        c.login.hasUris &&\n        c.login.uris.some((loginUri) => loginUri?.uri?.toLowerCase().indexOf(query) > -1)\n      ) {\n        return true;\n      }\n      return false;\n    });\n  }\n\n  searchSends(sends: SendView[], query: string) {\n    query = SearchService.normalizeSearchQuery(query.trim().toLocaleLowerCase());\n    if (query === null) {\n      return sends;\n    }\n    const sendsMatched: SendView[] = [];\n    const lowPriorityMatched: SendView[] = [];\n    sends.forEach((s) => {\n      if (s.name != null && s.name.toLowerCase().indexOf(query) > -1) {\n        sendsMatched.push(s);\n      } else if (\n        query.length >= 8 &&\n        (s.id.startsWith(query) ||\n          s.accessId.toLocaleLowerCase().startsWith(query) ||\n          (s.file?.id != null && s.file.id.startsWith(query)))\n      ) {\n        lowPriorityMatched.push(s);\n      } else if (s.notes != null && s.notes.toLowerCase().indexOf(query) > -1) {\n        lowPriorityMatched.push(s);\n      } else if (s.text?.text != null && s.text.text.toLowerCase().indexOf(query) > -1) {\n        lowPriorityMatched.push(s);\n      } else if (s.file?.fileName != null && s.file.fileName.toLowerCase().indexOf(query) > -1) {\n        lowPriorityMatched.push(s);\n      }\n    });\n    return sendsMatched.concat(lowPriorityMatched);\n  }\n\n  getIndexForSearch(): lunr.Index {\n    return this.index;\n  }\n\n  private fieldExtractor(c: CipherView, joined: boolean) {\n    if (!c.hasFields) {\n      return null;\n    }\n    let fields: string[] = [];\n    c.fields.forEach((f) => {\n      if (f.name != null) {\n        fields.push(f.name);\n      }\n      if (f.type === FieldType.Text && f.value != null) {\n        fields.push(f.value);\n      }\n    });\n    fields = fields.filter((f) => f.trim() !== \"\");\n    if (fields.length === 0) {\n      return null;\n    }\n    return joined ? fields.join(\" \") : fields;\n  }\n\n  private attachmentExtractor(c: CipherView, joined: boolean) {\n    if (!c.hasAttachments) {\n      return null;\n    }\n    let attachments: string[] = [];\n    c.attachments.forEach((a) => {\n      if (a != null && a.fileName != null) {\n        if (joined && a.fileName.indexOf(\".\") > -1) {\n          attachments.push(a.fileName.substr(0, a.fileName.lastIndexOf(\".\")));\n        } else {\n          attachments.push(a.fileName);\n        }\n      }\n    });\n    attachments = attachments.filter((f) => f.trim() !== \"\");\n    if (attachments.length === 0) {\n      return null;\n    }\n    return joined ? attachments.join(\" \") : attachments;\n  }\n\n  private uriExtractor(c: CipherView) {\n    if (c.type !== CipherType.Login || c.login == null || !c.login.hasUris) {\n      return null;\n    }\n    const uris: string[] = [];\n    c.login.uris.forEach((u) => {\n      if (u.uri == null || u.uri === \"\") {\n        return;\n      }\n      if (u.hostname != null) {\n        uris.push(u.hostname);\n        return;\n      }\n      let uri = u.uri;\n      if (u.match !== UriMatchType.RegularExpression) {\n        const protocolIndex = uri.indexOf(\"://\");\n        if (protocolIndex > -1) {\n          uri = uri.substr(protocolIndex + 3);\n        }\n        const queryIndex = uri.search(/\\?|&|#/);\n        if (queryIndex > -1) {\n          uri = uri.substring(0, queryIndex);\n        }\n      }\n      uris.push(uri);\n    });\n    return uris.length > 0 ? uris : null;\n  }\n\n  private normalizeAccentsPipelineFunction(token: lunr.Token): any {\n    const searchableFields = [\"name\", \"login.username\", \"subtitle\", \"notes\"];\n    const fields = (token as any).metadata[\"fields\"];\n    const checkFields = fields.every((i: any) => searchableFields.includes(i));\n\n    if (checkFields) {\n      return SearchService.normalizeSearchQuery(token.toString());\n    }\n\n    return token;\n  }\n\n  // Remove accents/diacritics characters from text. This regex is equivalent to the Diacritic unicode property escape, i.e. it will match all diacritic characters.\n  static normalizeSearchQuery(query: string): string {\n    return query?.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n  }\n}\n","import { TotpService as TotpServiceAbstraction } from \"../abstractions/totp.service\";\nimport { CryptoFunctionService } from \"../platform/abstractions/crypto-function.service\";\nimport { LogService } from \"../platform/abstractions/log.service\";\nimport { Utils } from \"../platform/misc/utils\";\n\nconst B32Chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\";\nconst SteamChars = \"23456789BCDFGHJKMNPQRTVWXY\";\n\nexport class TotpService implements TotpServiceAbstraction {\n  constructor(\n    private cryptoFunctionService: CryptoFunctionService,\n    private logService: LogService\n  ) {}\n\n  async getCode(key: string): Promise<string> {\n    if (key == null) {\n      return null;\n    }\n    let period = 30;\n    let alg: \"sha1\" | \"sha256\" | \"sha512\" = \"sha1\";\n    let digits = 6;\n    let keyB32 = key;\n    const isOtpAuth = key.toLowerCase().indexOf(\"otpauth://\") === 0;\n    const isSteamAuth = !isOtpAuth && key.toLowerCase().indexOf(\"steam://\") === 0;\n    if (isOtpAuth) {\n      const params = Utils.getQueryParams(key);\n      if (params.has(\"digits\") && params.get(\"digits\") != null) {\n        try {\n          const digitParams = parseInt(params.get(\"digits\").trim(), null);\n          if (digitParams > 10) {\n            digits = 10;\n          } else if (digitParams > 0) {\n            digits = digitParams;\n          }\n        } catch {\n          this.logService.error(\"Invalid digits param.\");\n        }\n      }\n      if (params.has(\"period\") && params.get(\"period\") != null) {\n        try {\n          const periodParam = parseInt(params.get(\"period\").trim(), null);\n          if (periodParam > 0) {\n            period = periodParam;\n          }\n        } catch {\n          this.logService.error(\"Invalid period param.\");\n        }\n      }\n      if (params.has(\"secret\") && params.get(\"secret\") != null) {\n        keyB32 = params.get(\"secret\");\n      }\n      if (params.has(\"algorithm\") && params.get(\"algorithm\") != null) {\n        const algParam = params.get(\"algorithm\").toLowerCase();\n        if (algParam === \"sha1\" || algParam === \"sha256\" || algParam === \"sha512\") {\n          alg = algParam;\n        }\n      }\n    } else if (isSteamAuth) {\n      keyB32 = key.substr(\"steam://\".length);\n      digits = 5;\n    }\n\n    const epoch = Math.round(new Date().getTime() / 1000.0);\n    const timeHex = this.leftPad(this.decToHex(Math.floor(epoch / period)), 16, \"0\");\n    const timeBytes = Utils.fromHexToArray(timeHex);\n    const keyBytes = this.b32ToBytes(keyB32);\n\n    if (!keyBytes.length || !timeBytes.length) {\n      return null;\n    }\n\n    const hash = await this.sign(keyBytes, timeBytes, alg);\n    if (hash.length === 0) {\n      return null;\n    }\n\n    const offset = hash[hash.length - 1] & 0xf;\n    const binary =\n      ((hash[offset] & 0x7f) << 24) |\n      ((hash[offset + 1] & 0xff) << 16) |\n      ((hash[offset + 2] & 0xff) << 8) |\n      (hash[offset + 3] & 0xff);\n\n    let otp = \"\";\n    if (isSteamAuth) {\n      let fullCode = binary & 0x7fffffff;\n      for (let i = 0; i < digits; i++) {\n        otp += SteamChars[fullCode % SteamChars.length];\n        fullCode = Math.trunc(fullCode / SteamChars.length);\n      }\n    } else {\n      otp = (binary % Math.pow(10, digits)).toString();\n      otp = this.leftPad(otp, digits, \"0\");\n    }\n\n    return otp;\n  }\n\n  getTimeInterval(key: string): number {\n    let period = 30;\n    if (key != null && key.toLowerCase().indexOf(\"otpauth://\") === 0) {\n      const params = Utils.getQueryParams(key);\n      if (params.has(\"period\") && params.get(\"period\") != null) {\n        try {\n          period = parseInt(params.get(\"period\").trim(), null);\n        } catch {\n          this.logService.error(\"Invalid period param.\");\n        }\n      }\n    }\n    return period;\n  }\n\n  // Helpers\n\n  private leftPad(s: string, l: number, p: string): string {\n    if (l + 1 >= s.length) {\n      s = Array(l + 1 - s.length).join(p) + s;\n    }\n    return s;\n  }\n\n  private decToHex(d: number): string {\n    return (d < 15.5 ? \"0\" : \"\") + Math.round(d).toString(16);\n  }\n\n  private b32ToHex(s: string): string {\n    s = s.toUpperCase();\n    let cleanedInput = \"\";\n\n    for (let i = 0; i < s.length; i++) {\n      if (B32Chars.indexOf(s[i]) < 0) {\n        continue;\n      }\n\n      cleanedInput += s[i];\n    }\n    s = cleanedInput;\n\n    let bits = \"\";\n    let hex = \"\";\n    for (let i = 0; i < s.length; i++) {\n      const byteIndex = B32Chars.indexOf(s.charAt(i));\n      if (byteIndex < 0) {\n        continue;\n      }\n      bits += this.leftPad(byteIndex.toString(2), 5, \"0\");\n    }\n    for (let i = 0; i + 4 <= bits.length; i += 4) {\n      const chunk = bits.substr(i, 4);\n      hex = hex + parseInt(chunk, 2).toString(16);\n    }\n    return hex;\n  }\n\n  private b32ToBytes(s: string): Uint8Array {\n    return Utils.fromHexToArray(this.b32ToHex(s));\n  }\n\n  private async sign(\n    keyBytes: Uint8Array,\n    timeBytes: Uint8Array,\n    alg: \"sha1\" | \"sha256\" | \"sha512\"\n  ) {\n    const signature = await this.cryptoFunctionService.hmac(timeBytes, keyBytes, alg);\n    return new Uint8Array(signature);\n  }\n}\n","export enum VaultTimeoutAction {\n  Lock = \"lock\",\n  LogOut = \"logOut\",\n}\n","import { defer } from \"rxjs\";\n\nimport { VaultTimeoutSettingsService as VaultTimeoutSettingsServiceAbstraction } from \"../../abstractions/vault-timeout/vault-timeout-settings.service\";\nimport { PolicyService } from \"../../admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"../../admin-console/enums\";\nimport { TokenService } from \"../../auth/abstractions/token.service\";\nimport { UserVerificationService } from \"../../auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { VaultTimeoutAction } from \"../../enums/vault-timeout-action.enum\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\n\n/**\n * - DISABLED: No Pin set\n * - PERSISTENT: Pin is set and survives client reset\n * - TRANSIENT: Pin is set and requires password unlock after client reset\n */\nexport type PinLockType = \"DISABLED\" | \"PERSISTANT\" | \"TRANSIENT\";\n\nexport class VaultTimeoutSettingsService implements VaultTimeoutSettingsServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private tokenService: TokenService,\n    private policyService: PolicyService,\n    private stateService: StateService,\n    private userVerificationService: UserVerificationService\n  ) {}\n\n  async setVaultTimeoutOptions(timeout: number, action: VaultTimeoutAction): Promise<void> {\n    await this.stateService.setVaultTimeout(timeout);\n\n    // We swap these tokens from being on disk for lock actions, and in memory for logout actions\n    // Get them here to set them to their new location after changing the timeout action and clearing if needed\n    const token = await this.tokenService.getToken();\n    const refreshToken = await this.tokenService.getRefreshToken();\n    const clientId = await this.tokenService.getClientId();\n    const clientSecret = await this.tokenService.getClientSecret();\n\n    const currentAction = await this.stateService.getVaultTimeoutAction();\n    if (\n      (timeout != null || timeout === 0) &&\n      action === VaultTimeoutAction.LogOut &&\n      action !== currentAction\n    ) {\n      // if we have a vault timeout and the action is log out, reset tokens\n      await this.tokenService.clearToken();\n    }\n\n    await this.stateService.setVaultTimeoutAction(action);\n\n    await this.tokenService.setToken(token);\n    await this.tokenService.setRefreshToken(refreshToken);\n    await this.tokenService.setClientId(clientId);\n    await this.tokenService.setClientSecret(clientSecret);\n\n    await this.cryptoService.refreshAdditionalKeys();\n  }\n\n  availableVaultTimeoutActions$(userId?: string) {\n    return defer(() => this.getAvailableVaultTimeoutActions(userId));\n  }\n\n  async isPinLockSet(userId?: string): Promise<PinLockType> {\n    // we can't check the protected pin for both because old accounts only\n    // used it for MP on Restart\n    const pinIsEnabled = !!(await this.stateService.getProtectedPin({ userId }));\n    const aUserKeyPinIsSet = !!(await this.stateService.getPinKeyEncryptedUserKey({ userId }));\n    const anOldUserKeyPinIsSet = !!(await this.stateService.getEncryptedPinProtected({ userId }));\n\n    if (aUserKeyPinIsSet || anOldUserKeyPinIsSet) {\n      return \"PERSISTANT\";\n    } else if (pinIsEnabled && !aUserKeyPinIsSet && !anOldUserKeyPinIsSet) {\n      return \"TRANSIENT\";\n    } else {\n      return \"DISABLED\";\n    }\n  }\n\n  async isBiometricLockSet(userId?: string): Promise<boolean> {\n    return await this.stateService.getBiometricUnlock({ userId });\n  }\n\n  async getVaultTimeout(userId?: string): Promise<number> {\n    const vaultTimeout = await this.stateService.getVaultTimeout({ userId });\n\n    if (\n      await this.policyService.policyAppliesToUser(PolicyType.MaximumVaultTimeout, null, userId)\n    ) {\n      const policy = await this.policyService.getAll(PolicyType.MaximumVaultTimeout, userId);\n      // Remove negative values, and ensure it's smaller than maximum allowed value according to policy\n      let timeout = Math.min(vaultTimeout, policy[0].data.minutes);\n\n      if (vaultTimeout == null || timeout < 0) {\n        timeout = policy[0].data.minutes;\n      }\n\n      // TODO @jlf0dev: Can we move this somwhere else? Maybe add it to the initialization process?\n      // ( Apparently I'm the one that reviewed the original PR that added this :) )\n      // We really shouldn't need to set the value here, but multiple services relies on this value being correct.\n      if (vaultTimeout !== timeout) {\n        await this.stateService.setVaultTimeout(timeout, { userId });\n      }\n\n      return timeout;\n    }\n\n    return vaultTimeout;\n  }\n\n  vaultTimeoutAction$(userId?: string) {\n    return defer(() => this.getVaultTimeoutAction(userId));\n  }\n\n  async getVaultTimeoutAction(userId?: string): Promise<VaultTimeoutAction> {\n    const availableActions = await this.getAvailableVaultTimeoutActions();\n    if (availableActions.length === 1) {\n      return availableActions[0];\n    }\n\n    const vaultTimeoutAction = await this.stateService.getVaultTimeoutAction({ userId: userId });\n\n    if (\n      await this.policyService.policyAppliesToUser(PolicyType.MaximumVaultTimeout, null, userId)\n    ) {\n      const policy = await this.policyService.getAll(PolicyType.MaximumVaultTimeout, userId);\n      const action = policy[0].data.action;\n      // We really shouldn't need to set the value here, but multiple services relies on this value being correct.\n      if (action && vaultTimeoutAction !== action) {\n        await this.stateService.setVaultTimeoutAction(action, { userId: userId });\n      }\n      if (action && availableActions.includes(action)) {\n        return action;\n      }\n    }\n\n    if (vaultTimeoutAction == null) {\n      // Depends on whether or not the user has a master password\n      const defaultValue = (await this.userVerificationService.hasMasterPassword())\n        ? VaultTimeoutAction.Lock\n        : VaultTimeoutAction.LogOut;\n      // We really shouldn't need to set the value here, but multiple services relies on this value being correct.\n      await this.stateService.setVaultTimeoutAction(defaultValue, { userId: userId });\n      return defaultValue;\n    }\n\n    return vaultTimeoutAction === VaultTimeoutAction.LogOut\n      ? VaultTimeoutAction.LogOut\n      : VaultTimeoutAction.Lock;\n  }\n\n  private async getAvailableVaultTimeoutActions(userId?: string): Promise<VaultTimeoutAction[]> {\n    const availableActions = [VaultTimeoutAction.LogOut];\n\n    const canLock =\n      (await this.userVerificationService.hasMasterPassword(userId)) ||\n      (await this.isPinLockSet(userId)) !== \"DISABLED\" ||\n      (await this.isBiometricLockSet(userId));\n\n    if (canLock) {\n      availableActions.push(VaultTimeoutAction.Lock);\n    }\n\n    return availableActions;\n  }\n\n  async clear(userId?: string): Promise<void> {\n    await this.stateService.setEverBeenUnlocked(false, { userId: userId });\n    await this.cryptoService.clearPinKeys(userId);\n  }\n}\n","import Domain from \"../../../platform/models/domain/domain-base\";\n\nexport class PasswordGeneratorPolicyOptions extends Domain {\n  defaultType = \"\";\n  minLength = 0;\n  useUppercase = false;\n  useLowercase = false;\n  useNumbers = false;\n  numberCount = 0;\n  useSpecial = false;\n  specialCount = 0;\n  minNumberWords = 0;\n  capitalize = false;\n  includeNumber = false;\n\n  inEffect() {\n    return (\n      this.defaultType !== \"\" ||\n      this.minLength > 0 ||\n      this.numberCount > 0 ||\n      this.specialCount > 0 ||\n      this.useUppercase ||\n      this.useLowercase ||\n      this.useNumbers ||\n      this.useSpecial ||\n      this.minNumberWords > 0 ||\n      this.capitalize ||\n      this.includeNumber\n    );\n  }\n}\n","// EFF's Long Wordlist from https://www.eff.org/dice\nexport const EFFLongWordList = [\n  \"abacus\",\n  \"abdomen\",\n  \"abdominal\",\n  \"abide\",\n  \"abiding\",\n  \"ability\",\n  \"ablaze\",\n  \"able\",\n  \"abnormal\",\n  \"abrasion\",\n  \"abrasive\",\n  \"abreast\",\n  \"abridge\",\n  \"abroad\",\n  \"abruptly\",\n  \"absence\",\n  \"absentee\",\n  \"absently\",\n  \"absinthe\",\n  \"absolute\",\n  \"absolve\",\n  \"abstain\",\n  \"abstract\",\n  \"absurd\",\n  \"accent\",\n  \"acclaim\",\n  \"acclimate\",\n  \"accompany\",\n  \"account\",\n  \"accuracy\",\n  \"accurate\",\n  \"accustom\",\n  \"acetone\",\n  \"achiness\",\n  \"aching\",\n  \"acid\",\n  \"acorn\",\n  \"acquaint\",\n  \"acquire\",\n  \"acre\",\n  \"acrobat\",\n  \"acronym\",\n  \"acting\",\n  \"action\",\n  \"activate\",\n  \"activator\",\n  \"active\",\n  \"activism\",\n  \"activist\",\n  \"activity\",\n  \"actress\",\n  \"acts\",\n  \"acutely\",\n  \"acuteness\",\n  \"aeration\",\n  \"aerobics\",\n  \"aerosol\",\n  \"aerospace\",\n  \"afar\",\n  \"affair\",\n  \"affected\",\n  \"affecting\",\n  \"affection\",\n  \"affidavit\",\n  \"affiliate\",\n  \"affirm\",\n  \"affix\",\n  \"afflicted\",\n  \"affluent\",\n  \"afford\",\n  \"affront\",\n  \"aflame\",\n  \"afloat\",\n  \"aflutter\",\n  \"afoot\",\n  \"afraid\",\n  \"afterglow\",\n  \"afterlife\",\n  \"aftermath\",\n  \"aftermost\",\n  \"afternoon\",\n  \"aged\",\n  \"ageless\",\n  \"agency\",\n  \"agenda\",\n  \"agent\",\n  \"aggregate\",\n  \"aghast\",\n  \"agile\",\n  \"agility\",\n  \"aging\",\n  \"agnostic\",\n  \"agonize\",\n  \"agonizing\",\n  \"agony\",\n  \"agreeable\",\n  \"agreeably\",\n  \"agreed\",\n  \"agreeing\",\n  \"agreement\",\n  \"aground\",\n  \"ahead\",\n  \"ahoy\",\n  \"aide\",\n  \"aids\",\n  \"aim\",\n  \"ajar\",\n  \"alabaster\",\n  \"alarm\",\n  \"albatross\",\n  \"album\",\n  \"alfalfa\",\n  \"algebra\",\n  \"algorithm\",\n  \"alias\",\n  \"alibi\",\n  \"alienable\",\n  \"alienate\",\n  \"aliens\",\n  \"alike\",\n  \"alive\",\n  \"alkaline\",\n  \"alkalize\",\n  \"almanac\",\n  \"almighty\",\n  \"almost\",\n  \"aloe\",\n  \"aloft\",\n  \"aloha\",\n  \"alone\",\n  \"alongside\",\n  \"aloof\",\n  \"alphabet\",\n  \"alright\",\n  \"although\",\n  \"altitude\",\n  \"alto\",\n  \"aluminum\",\n  \"alumni\",\n  \"always\",\n  \"amaretto\",\n  \"amaze\",\n  \"amazingly\",\n  \"amber\",\n  \"ambiance\",\n  \"ambiguity\",\n  \"ambiguous\",\n  \"ambition\",\n  \"ambitious\",\n  \"ambulance\",\n  \"ambush\",\n  \"amendable\",\n  \"amendment\",\n  \"amends\",\n  \"amenity\",\n  \"amiable\",\n  \"amicably\",\n  \"amid\",\n  \"amigo\",\n  \"amino\",\n  \"amiss\",\n  \"ammonia\",\n  \"ammonium\",\n  \"amnesty\",\n  \"amniotic\",\n  \"among\",\n  \"amount\",\n  \"amperage\",\n  \"ample\",\n  \"amplifier\",\n  \"amplify\",\n  \"amply\",\n  \"amuck\",\n  \"amulet\",\n  \"amusable\",\n  \"amused\",\n  \"amusement\",\n  \"amuser\",\n  \"amusing\",\n  \"anaconda\",\n  \"anaerobic\",\n  \"anagram\",\n  \"anatomist\",\n  \"anatomy\",\n  \"anchor\",\n  \"anchovy\",\n  \"ancient\",\n  \"android\",\n  \"anemia\",\n  \"anemic\",\n  \"aneurism\",\n  \"anew\",\n  \"angelfish\",\n  \"angelic\",\n  \"anger\",\n  \"angled\",\n  \"angler\",\n  \"angles\",\n  \"angling\",\n  \"angrily\",\n  \"angriness\",\n  \"anguished\",\n  \"angular\",\n  \"animal\",\n  \"animate\",\n  \"animating\",\n  \"animation\",\n  \"animator\",\n  \"anime\",\n  \"animosity\",\n  \"ankle\",\n  \"annex\",\n  \"annotate\",\n  \"announcer\",\n  \"annoying\",\n  \"annually\",\n  \"annuity\",\n  \"anointer\",\n  \"another\",\n  \"answering\",\n  \"antacid\",\n  \"antarctic\",\n  \"anteater\",\n  \"antelope\",\n  \"antennae\",\n  \"anthem\",\n  \"anthill\",\n  \"anthology\",\n  \"antibody\",\n  \"antics\",\n  \"antidote\",\n  \"antihero\",\n  \"antiquely\",\n  \"antiques\",\n  \"antiquity\",\n  \"antirust\",\n  \"antitoxic\",\n  \"antitrust\",\n  \"antiviral\",\n  \"antivirus\",\n  \"antler\",\n  \"antonym\",\n  \"antsy\",\n  \"anvil\",\n  \"anybody\",\n  \"anyhow\",\n  \"anymore\",\n  \"anyone\",\n  \"anyplace\",\n  \"anything\",\n  \"anytime\",\n  \"anyway\",\n  \"anywhere\",\n  \"aorta\",\n  \"apache\",\n  \"apostle\",\n  \"appealing\",\n  \"appear\",\n  \"appease\",\n  \"appeasing\",\n  \"appendage\",\n  \"appendix\",\n  \"appetite\",\n  \"appetizer\",\n  \"applaud\",\n  \"applause\",\n  \"apple\",\n  \"appliance\",\n  \"applicant\",\n  \"applied\",\n  \"apply\",\n  \"appointee\",\n  \"appraisal\",\n  \"appraiser\",\n  \"apprehend\",\n  \"approach\",\n  \"approval\",\n  \"approve\",\n  \"apricot\",\n  \"april\",\n  \"apron\",\n  \"aptitude\",\n  \"aptly\",\n  \"aqua\",\n  \"aqueduct\",\n  \"arbitrary\",\n  \"arbitrate\",\n  \"ardently\",\n  \"area\",\n  \"arena\",\n  \"arguable\",\n  \"arguably\",\n  \"argue\",\n  \"arise\",\n  \"armadillo\",\n  \"armband\",\n  \"armchair\",\n  \"armed\",\n  \"armful\",\n  \"armhole\",\n  \"arming\",\n  \"armless\",\n  \"armoire\",\n  \"armored\",\n  \"armory\",\n  \"armrest\",\n  \"army\",\n  \"aroma\",\n  \"arose\",\n  \"around\",\n  \"arousal\",\n  \"arrange\",\n  \"array\",\n  \"arrest\",\n  \"arrival\",\n  \"arrive\",\n  \"arrogance\",\n  \"arrogant\",\n  \"arson\",\n  \"art\",\n  \"ascend\",\n  \"ascension\",\n  \"ascent\",\n  \"ascertain\",\n  \"ashamed\",\n  \"ashen\",\n  \"ashes\",\n  \"ashy\",\n  \"aside\",\n  \"askew\",\n  \"asleep\",\n  \"asparagus\",\n  \"aspect\",\n  \"aspirate\",\n  \"aspire\",\n  \"aspirin\",\n  \"astonish\",\n  \"astound\",\n  \"astride\",\n  \"astrology\",\n  \"astronaut\",\n  \"astronomy\",\n  \"astute\",\n  \"atlantic\",\n  \"atlas\",\n  \"atom\",\n  \"atonable\",\n  \"atop\",\n  \"atrium\",\n  \"atrocious\",\n  \"atrophy\",\n  \"attach\",\n  \"attain\",\n  \"attempt\",\n  \"attendant\",\n  \"attendee\",\n  \"attention\",\n  \"attentive\",\n  \"attest\",\n  \"attic\",\n  \"attire\",\n  \"attitude\",\n  \"attractor\",\n  \"attribute\",\n  \"atypical\",\n  \"auction\",\n  \"audacious\",\n  \"audacity\",\n  \"audible\",\n  \"audibly\",\n  \"audience\",\n  \"audio\",\n  \"audition\",\n  \"augmented\",\n  \"august\",\n  \"authentic\",\n  \"author\",\n  \"autism\",\n  \"autistic\",\n  \"autograph\",\n  \"automaker\",\n  \"automated\",\n  \"automatic\",\n  \"autopilot\",\n  \"available\",\n  \"avalanche\",\n  \"avatar\",\n  \"avenge\",\n  \"avenging\",\n  \"avenue\",\n  \"average\",\n  \"aversion\",\n  \"avert\",\n  \"aviation\",\n  \"aviator\",\n  \"avid\",\n  \"avoid\",\n  \"await\",\n  \"awaken\",\n  \"award\",\n  \"aware\",\n  \"awhile\",\n  \"awkward\",\n  \"awning\",\n  \"awoke\",\n  \"awry\",\n  \"axis\",\n  \"babble\",\n  \"babbling\",\n  \"babied\",\n  \"baboon\",\n  \"backache\",\n  \"backboard\",\n  \"backboned\",\n  \"backdrop\",\n  \"backed\",\n  \"backer\",\n  \"backfield\",\n  \"backfire\",\n  \"backhand\",\n  \"backing\",\n  \"backlands\",\n  \"backlash\",\n  \"backless\",\n  \"backlight\",\n  \"backlit\",\n  \"backlog\",\n  \"backpack\",\n  \"backpedal\",\n  \"backrest\",\n  \"backroom\",\n  \"backshift\",\n  \"backside\",\n  \"backslid\",\n  \"backspace\",\n  \"backspin\",\n  \"backstab\",\n  \"backstage\",\n  \"backtalk\",\n  \"backtrack\",\n  \"backup\",\n  \"backward\",\n  \"backwash\",\n  \"backwater\",\n  \"backyard\",\n  \"bacon\",\n  \"bacteria\",\n  \"bacterium\",\n  \"badass\",\n  \"badge\",\n  \"badland\",\n  \"badly\",\n  \"badness\",\n  \"baffle\",\n  \"baffling\",\n  \"bagel\",\n  \"bagful\",\n  \"baggage\",\n  \"bagged\",\n  \"baggie\",\n  \"bagginess\",\n  \"bagging\",\n  \"baggy\",\n  \"bagpipe\",\n  \"baguette\",\n  \"baked\",\n  \"bakery\",\n  \"bakeshop\",\n  \"baking\",\n  \"balance\",\n  \"balancing\",\n  \"balcony\",\n  \"balmy\",\n  \"balsamic\",\n  \"bamboo\",\n  \"banana\",\n  \"banish\",\n  \"banister\",\n  \"banjo\",\n  \"bankable\",\n  \"bankbook\",\n  \"banked\",\n  \"banker\",\n  \"banking\",\n  \"banknote\",\n  \"bankroll\",\n  \"banner\",\n  \"bannister\",\n  \"banshee\",\n  \"banter\",\n  \"barbecue\",\n  \"barbed\",\n  \"barbell\",\n  \"barber\",\n  \"barcode\",\n  \"barge\",\n  \"bargraph\",\n  \"barista\",\n  \"baritone\",\n  \"barley\",\n  \"barmaid\",\n  \"barman\",\n  \"barn\",\n  \"barometer\",\n  \"barrack\",\n  \"barracuda\",\n  \"barrel\",\n  \"barrette\",\n  \"barricade\",\n  \"barrier\",\n  \"barstool\",\n  \"bartender\",\n  \"barterer\",\n  \"bash\",\n  \"basically\",\n  \"basics\",\n  \"basil\",\n  \"basin\",\n  \"basis\",\n  \"basket\",\n  \"batboy\",\n  \"batch\",\n  \"bath\",\n  \"baton\",\n  \"bats\",\n  \"battalion\",\n  \"battered\",\n  \"battering\",\n  \"battery\",\n  \"batting\",\n  \"battle\",\n  \"bauble\",\n  \"bazooka\",\n  \"blabber\",\n  \"bladder\",\n  \"blade\",\n  \"blah\",\n  \"blame\",\n  \"blaming\",\n  \"blanching\",\n  \"blandness\",\n  \"blank\",\n  \"blaspheme\",\n  \"blasphemy\",\n  \"blast\",\n  \"blatancy\",\n  \"blatantly\",\n  \"blazer\",\n  \"blazing\",\n  \"bleach\",\n  \"bleak\",\n  \"bleep\",\n  \"blemish\",\n  \"blend\",\n  \"bless\",\n  \"blighted\",\n  \"blimp\",\n  \"bling\",\n  \"blinked\",\n  \"blinker\",\n  \"blinking\",\n  \"blinks\",\n  \"blip\",\n  \"blissful\",\n  \"blitz\",\n  \"blizzard\",\n  \"bloated\",\n  \"bloating\",\n  \"blob\",\n  \"blog\",\n  \"bloomers\",\n  \"blooming\",\n  \"blooper\",\n  \"blot\",\n  \"blouse\",\n  \"blubber\",\n  \"bluff\",\n  \"bluish\",\n  \"blunderer\",\n  \"blunt\",\n  \"blurb\",\n  \"blurred\",\n  \"blurry\",\n  \"blurt\",\n  \"blush\",\n  \"blustery\",\n  \"boaster\",\n  \"boastful\",\n  \"boasting\",\n  \"boat\",\n  \"bobbed\",\n  \"bobbing\",\n  \"bobble\",\n  \"bobcat\",\n  \"bobsled\",\n  \"bobtail\",\n  \"bodacious\",\n  \"body\",\n  \"bogged\",\n  \"boggle\",\n  \"bogus\",\n  \"boil\",\n  \"bok\",\n  \"bolster\",\n  \"bolt\",\n  \"bonanza\",\n  \"bonded\",\n  \"bonding\",\n  \"bondless\",\n  \"boned\",\n  \"bonehead\",\n  \"boneless\",\n  \"bonelike\",\n  \"boney\",\n  \"bonfire\",\n  \"bonnet\",\n  \"bonsai\",\n  \"bonus\",\n  \"bony\",\n  \"boogeyman\",\n  \"boogieman\",\n  \"book\",\n  \"boondocks\",\n  \"booted\",\n  \"booth\",\n  \"bootie\",\n  \"booting\",\n  \"bootlace\",\n  \"bootleg\",\n  \"boots\",\n  \"boozy\",\n  \"borax\",\n  \"boring\",\n  \"borough\",\n  \"borrower\",\n  \"borrowing\",\n  \"boss\",\n  \"botanical\",\n  \"botanist\",\n  \"botany\",\n  \"botch\",\n  \"both\",\n  \"bottle\",\n  \"bottling\",\n  \"bottom\",\n  \"bounce\",\n  \"bouncing\",\n  \"bouncy\",\n  \"bounding\",\n  \"boundless\",\n  \"bountiful\",\n  \"bovine\",\n  \"boxcar\",\n  \"boxer\",\n  \"boxing\",\n  \"boxlike\",\n  \"boxy\",\n  \"breach\",\n  \"breath\",\n  \"breeches\",\n  \"breeching\",\n  \"breeder\",\n  \"breeding\",\n  \"breeze\",\n  \"breezy\",\n  \"brethren\",\n  \"brewery\",\n  \"brewing\",\n  \"briar\",\n  \"bribe\",\n  \"brick\",\n  \"bride\",\n  \"bridged\",\n  \"brigade\",\n  \"bright\",\n  \"brilliant\",\n  \"brim\",\n  \"bring\",\n  \"brink\",\n  \"brisket\",\n  \"briskly\",\n  \"briskness\",\n  \"bristle\",\n  \"brittle\",\n  \"broadband\",\n  \"broadcast\",\n  \"broaden\",\n  \"broadly\",\n  \"broadness\",\n  \"broadside\",\n  \"broadways\",\n  \"broiler\",\n  \"broiling\",\n  \"broken\",\n  \"broker\",\n  \"bronchial\",\n  \"bronco\",\n  \"bronze\",\n  \"bronzing\",\n  \"brook\",\n  \"broom\",\n  \"brought\",\n  \"browbeat\",\n  \"brownnose\",\n  \"browse\",\n  \"browsing\",\n  \"bruising\",\n  \"brunch\",\n  \"brunette\",\n  \"brunt\",\n  \"brush\",\n  \"brussels\",\n  \"brute\",\n  \"brutishly\",\n  \"bubble\",\n  \"bubbling\",\n  \"bubbly\",\n  \"buccaneer\",\n  \"bucked\",\n  \"bucket\",\n  \"buckle\",\n  \"buckshot\",\n  \"buckskin\",\n  \"bucktooth\",\n  \"buckwheat\",\n  \"buddhism\",\n  \"buddhist\",\n  \"budding\",\n  \"buddy\",\n  \"budget\",\n  \"buffalo\",\n  \"buffed\",\n  \"buffer\",\n  \"buffing\",\n  \"buffoon\",\n  \"buggy\",\n  \"bulb\",\n  \"bulge\",\n  \"bulginess\",\n  \"bulgur\",\n  \"bulk\",\n  \"bulldog\",\n  \"bulldozer\",\n  \"bullfight\",\n  \"bullfrog\",\n  \"bullhorn\",\n  \"bullion\",\n  \"bullish\",\n  \"bullpen\",\n  \"bullring\",\n  \"bullseye\",\n  \"bullwhip\",\n  \"bully\",\n  \"bunch\",\n  \"bundle\",\n  \"bungee\",\n  \"bunion\",\n  \"bunkbed\",\n  \"bunkhouse\",\n  \"bunkmate\",\n  \"bunny\",\n  \"bunt\",\n  \"busboy\",\n  \"bush\",\n  \"busily\",\n  \"busload\",\n  \"bust\",\n  \"busybody\",\n  \"buzz\",\n  \"cabana\",\n  \"cabbage\",\n  \"cabbie\",\n  \"cabdriver\",\n  \"cable\",\n  \"caboose\",\n  \"cache\",\n  \"cackle\",\n  \"cacti\",\n  \"cactus\",\n  \"caddie\",\n  \"caddy\",\n  \"cadet\",\n  \"cadillac\",\n  \"cadmium\",\n  \"cage\",\n  \"cahoots\",\n  \"cake\",\n  \"calamari\",\n  \"calamity\",\n  \"calcium\",\n  \"calculate\",\n  \"calculus\",\n  \"caliber\",\n  \"calibrate\",\n  \"calm\",\n  \"caloric\",\n  \"calorie\",\n  \"calzone\",\n  \"camcorder\",\n  \"cameo\",\n  \"camera\",\n  \"camisole\",\n  \"camper\",\n  \"campfire\",\n  \"camping\",\n  \"campsite\",\n  \"campus\",\n  \"canal\",\n  \"canary\",\n  \"cancel\",\n  \"candied\",\n  \"candle\",\n  \"candy\",\n  \"cane\",\n  \"canine\",\n  \"canister\",\n  \"cannabis\",\n  \"canned\",\n  \"canning\",\n  \"cannon\",\n  \"cannot\",\n  \"canola\",\n  \"canon\",\n  \"canopener\",\n  \"canopy\",\n  \"canteen\",\n  \"canyon\",\n  \"capable\",\n  \"capably\",\n  \"capacity\",\n  \"cape\",\n  \"capillary\",\n  \"capital\",\n  \"capitol\",\n  \"capped\",\n  \"capricorn\",\n  \"capsize\",\n  \"capsule\",\n  \"caption\",\n  \"captivate\",\n  \"captive\",\n  \"captivity\",\n  \"capture\",\n  \"caramel\",\n  \"carat\",\n  \"caravan\",\n  \"carbon\",\n  \"cardboard\",\n  \"carded\",\n  \"cardiac\",\n  \"cardigan\",\n  \"cardinal\",\n  \"cardstock\",\n  \"carefully\",\n  \"caregiver\",\n  \"careless\",\n  \"caress\",\n  \"caretaker\",\n  \"cargo\",\n  \"caring\",\n  \"carless\",\n  \"carload\",\n  \"carmaker\",\n  \"carnage\",\n  \"carnation\",\n  \"carnival\",\n  \"carnivore\",\n  \"carol\",\n  \"carpenter\",\n  \"carpentry\",\n  \"carpool\",\n  \"carport\",\n  \"carried\",\n  \"carrot\",\n  \"carrousel\",\n  \"carry\",\n  \"cartel\",\n  \"cartload\",\n  \"carton\",\n  \"cartoon\",\n  \"cartridge\",\n  \"cartwheel\",\n  \"carve\",\n  \"carving\",\n  \"carwash\",\n  \"cascade\",\n  \"case\",\n  \"cash\",\n  \"casing\",\n  \"casino\",\n  \"casket\",\n  \"cassette\",\n  \"casually\",\n  \"casualty\",\n  \"catacomb\",\n  \"catalog\",\n  \"catalyst\",\n  \"catalyze\",\n  \"catapult\",\n  \"cataract\",\n  \"catatonic\",\n  \"catcall\",\n  \"catchable\",\n  \"catcher\",\n  \"catching\",\n  \"catchy\",\n  \"caterer\",\n  \"catering\",\n  \"catfight\",\n  \"catfish\",\n  \"cathedral\",\n  \"cathouse\",\n  \"catlike\",\n  \"catnap\",\n  \"catnip\",\n  \"catsup\",\n  \"cattail\",\n  \"cattishly\",\n  \"cattle\",\n  \"catty\",\n  \"catwalk\",\n  \"caucasian\",\n  \"caucus\",\n  \"causal\",\n  \"causation\",\n  \"cause\",\n  \"causing\",\n  \"cauterize\",\n  \"caution\",\n  \"cautious\",\n  \"cavalier\",\n  \"cavalry\",\n  \"caviar\",\n  \"cavity\",\n  \"cedar\",\n  \"celery\",\n  \"celestial\",\n  \"celibacy\",\n  \"celibate\",\n  \"celtic\",\n  \"cement\",\n  \"census\",\n  \"ceramics\",\n  \"ceremony\",\n  \"certainly\",\n  \"certainty\",\n  \"certified\",\n  \"certify\",\n  \"cesarean\",\n  \"cesspool\",\n  \"chafe\",\n  \"chaffing\",\n  \"chain\",\n  \"chair\",\n  \"chalice\",\n  \"challenge\",\n  \"chamber\",\n  \"chamomile\",\n  \"champion\",\n  \"chance\",\n  \"change\",\n  \"channel\",\n  \"chant\",\n  \"chaos\",\n  \"chaperone\",\n  \"chaplain\",\n  \"chapped\",\n  \"chaps\",\n  \"chapter\",\n  \"character\",\n  \"charbroil\",\n  \"charcoal\",\n  \"charger\",\n  \"charging\",\n  \"chariot\",\n  \"charity\",\n  \"charm\",\n  \"charred\",\n  \"charter\",\n  \"charting\",\n  \"chase\",\n  \"chasing\",\n  \"chaste\",\n  \"chastise\",\n  \"chastity\",\n  \"chatroom\",\n  \"chatter\",\n  \"chatting\",\n  \"chatty\",\n  \"cheating\",\n  \"cheddar\",\n  \"cheek\",\n  \"cheer\",\n  \"cheese\",\n  \"cheesy\",\n  \"chef\",\n  \"chemicals\",\n  \"chemist\",\n  \"chemo\",\n  \"cherisher\",\n  \"cherub\",\n  \"chess\",\n  \"chest\",\n  \"chevron\",\n  \"chevy\",\n  \"chewable\",\n  \"chewer\",\n  \"chewing\",\n  \"chewy\",\n  \"chief\",\n  \"chihuahua\",\n  \"childcare\",\n  \"childhood\",\n  \"childish\",\n  \"childless\",\n  \"childlike\",\n  \"chili\",\n  \"chill\",\n  \"chimp\",\n  \"chip\",\n  \"chirping\",\n  \"chirpy\",\n  \"chitchat\",\n  \"chivalry\",\n  \"chive\",\n  \"chloride\",\n  \"chlorine\",\n  \"choice\",\n  \"chokehold\",\n  \"choking\",\n  \"chomp\",\n  \"chooser\",\n  \"choosing\",\n  \"choosy\",\n  \"chop\",\n  \"chosen\",\n  \"chowder\",\n  \"chowtime\",\n  \"chrome\",\n  \"chubby\",\n  \"chuck\",\n  \"chug\",\n  \"chummy\",\n  \"chump\",\n  \"chunk\",\n  \"churn\",\n  \"chute\",\n  \"cider\",\n  \"cilantro\",\n  \"cinch\",\n  \"cinema\",\n  \"cinnamon\",\n  \"circle\",\n  \"circling\",\n  \"circular\",\n  \"circulate\",\n  \"circus\",\n  \"citable\",\n  \"citadel\",\n  \"citation\",\n  \"citizen\",\n  \"citric\",\n  \"citrus\",\n  \"city\",\n  \"civic\",\n  \"civil\",\n  \"clad\",\n  \"claim\",\n  \"clambake\",\n  \"clammy\",\n  \"clamor\",\n  \"clamp\",\n  \"clamshell\",\n  \"clang\",\n  \"clanking\",\n  \"clapped\",\n  \"clapper\",\n  \"clapping\",\n  \"clarify\",\n  \"clarinet\",\n  \"clarity\",\n  \"clash\",\n  \"clasp\",\n  \"class\",\n  \"clatter\",\n  \"clause\",\n  \"clavicle\",\n  \"claw\",\n  \"clay\",\n  \"clean\",\n  \"clear\",\n  \"cleat\",\n  \"cleaver\",\n  \"cleft\",\n  \"clench\",\n  \"clergyman\",\n  \"clerical\",\n  \"clerk\",\n  \"clever\",\n  \"clicker\",\n  \"client\",\n  \"climate\",\n  \"climatic\",\n  \"cling\",\n  \"clinic\",\n  \"clinking\",\n  \"clip\",\n  \"clique\",\n  \"cloak\",\n  \"clobber\",\n  \"clock\",\n  \"clone\",\n  \"cloning\",\n  \"closable\",\n  \"closure\",\n  \"clothes\",\n  \"clothing\",\n  \"cloud\",\n  \"clover\",\n  \"clubbed\",\n  \"clubbing\",\n  \"clubhouse\",\n  \"clump\",\n  \"clumsily\",\n  \"clumsy\",\n  \"clunky\",\n  \"clustered\",\n  \"clutch\",\n  \"clutter\",\n  \"coach\",\n  \"coagulant\",\n  \"coastal\",\n  \"coaster\",\n  \"coasting\",\n  \"coastland\",\n  \"coastline\",\n  \"coat\",\n  \"coauthor\",\n  \"cobalt\",\n  \"cobbler\",\n  \"cobweb\",\n  \"cocoa\",\n  \"coconut\",\n  \"cod\",\n  \"coeditor\",\n  \"coerce\",\n  \"coexist\",\n  \"coffee\",\n  \"cofounder\",\n  \"cognition\",\n  \"cognitive\",\n  \"cogwheel\",\n  \"coherence\",\n  \"coherent\",\n  \"cohesive\",\n  \"coil\",\n  \"coke\",\n  \"cola\",\n  \"cold\",\n  \"coleslaw\",\n  \"coliseum\",\n  \"collage\",\n  \"collapse\",\n  \"collar\",\n  \"collected\",\n  \"collector\",\n  \"collide\",\n  \"collie\",\n  \"collision\",\n  \"colonial\",\n  \"colonist\",\n  \"colonize\",\n  \"colony\",\n  \"colossal\",\n  \"colt\",\n  \"coma\",\n  \"come\",\n  \"comfort\",\n  \"comfy\",\n  \"comic\",\n  \"coming\",\n  \"comma\",\n  \"commence\",\n  \"commend\",\n  \"comment\",\n  \"commerce\",\n  \"commode\",\n  \"commodity\",\n  \"commodore\",\n  \"common\",\n  \"commotion\",\n  \"commute\",\n  \"commuting\",\n  \"compacted\",\n  \"compacter\",\n  \"compactly\",\n  \"compactor\",\n  \"companion\",\n  \"company\",\n  \"compare\",\n  \"compel\",\n  \"compile\",\n  \"comply\",\n  \"component\",\n  \"composed\",\n  \"composer\",\n  \"composite\",\n  \"compost\",\n  \"composure\",\n  \"compound\",\n  \"compress\",\n  \"comprised\",\n  \"computer\",\n  \"computing\",\n  \"comrade\",\n  \"concave\",\n  \"conceal\",\n  \"conceded\",\n  \"concept\",\n  \"concerned\",\n  \"concert\",\n  \"conch\",\n  \"concierge\",\n  \"concise\",\n  \"conclude\",\n  \"concrete\",\n  \"concur\",\n  \"condense\",\n  \"condiment\",\n  \"condition\",\n  \"condone\",\n  \"conducive\",\n  \"conductor\",\n  \"conduit\",\n  \"cone\",\n  \"confess\",\n  \"confetti\",\n  \"confidant\",\n  \"confident\",\n  \"confider\",\n  \"confiding\",\n  \"configure\",\n  \"confined\",\n  \"confining\",\n  \"confirm\",\n  \"conflict\",\n  \"conform\",\n  \"confound\",\n  \"confront\",\n  \"confused\",\n  \"confusing\",\n  \"confusion\",\n  \"congenial\",\n  \"congested\",\n  \"congrats\",\n  \"congress\",\n  \"conical\",\n  \"conjoined\",\n  \"conjure\",\n  \"conjuror\",\n  \"connected\",\n  \"connector\",\n  \"consensus\",\n  \"consent\",\n  \"console\",\n  \"consoling\",\n  \"consonant\",\n  \"constable\",\n  \"constant\",\n  \"constrain\",\n  \"constrict\",\n  \"construct\",\n  \"consult\",\n  \"consumer\",\n  \"consuming\",\n  \"contact\",\n  \"container\",\n  \"contempt\",\n  \"contend\",\n  \"contented\",\n  \"contently\",\n  \"contents\",\n  \"contest\",\n  \"context\",\n  \"contort\",\n  \"contour\",\n  \"contrite\",\n  \"control\",\n  \"contusion\",\n  \"convene\",\n  \"convent\",\n  \"copartner\",\n  \"cope\",\n  \"copied\",\n  \"copier\",\n  \"copilot\",\n  \"coping\",\n  \"copious\",\n  \"copper\",\n  \"copy\",\n  \"coral\",\n  \"cork\",\n  \"cornball\",\n  \"cornbread\",\n  \"corncob\",\n  \"cornea\",\n  \"corned\",\n  \"corner\",\n  \"cornfield\",\n  \"cornflake\",\n  \"cornhusk\",\n  \"cornmeal\",\n  \"cornstalk\",\n  \"corny\",\n  \"coronary\",\n  \"coroner\",\n  \"corporal\",\n  \"corporate\",\n  \"corral\",\n  \"correct\",\n  \"corridor\",\n  \"corrode\",\n  \"corroding\",\n  \"corrosive\",\n  \"corsage\",\n  \"corset\",\n  \"cortex\",\n  \"cosigner\",\n  \"cosmetics\",\n  \"cosmic\",\n  \"cosmos\",\n  \"cosponsor\",\n  \"cost\",\n  \"cottage\",\n  \"cotton\",\n  \"couch\",\n  \"cough\",\n  \"could\",\n  \"countable\",\n  \"countdown\",\n  \"counting\",\n  \"countless\",\n  \"country\",\n  \"county\",\n  \"courier\",\n  \"covenant\",\n  \"cover\",\n  \"coveted\",\n  \"coveting\",\n  \"coyness\",\n  \"cozily\",\n  \"coziness\",\n  \"cozy\",\n  \"crabbing\",\n  \"crabgrass\",\n  \"crablike\",\n  \"crabmeat\",\n  \"cradle\",\n  \"cradling\",\n  \"crafter\",\n  \"craftily\",\n  \"craftsman\",\n  \"craftwork\",\n  \"crafty\",\n  \"cramp\",\n  \"cranberry\",\n  \"crane\",\n  \"cranial\",\n  \"cranium\",\n  \"crank\",\n  \"crate\",\n  \"crave\",\n  \"craving\",\n  \"crawfish\",\n  \"crawlers\",\n  \"crawling\",\n  \"crayfish\",\n  \"crayon\",\n  \"crazed\",\n  \"crazily\",\n  \"craziness\",\n  \"crazy\",\n  \"creamed\",\n  \"creamer\",\n  \"creamlike\",\n  \"crease\",\n  \"creasing\",\n  \"creatable\",\n  \"create\",\n  \"creation\",\n  \"creative\",\n  \"creature\",\n  \"credible\",\n  \"credibly\",\n  \"credit\",\n  \"creed\",\n  \"creme\",\n  \"creole\",\n  \"crepe\",\n  \"crept\",\n  \"crescent\",\n  \"crested\",\n  \"cresting\",\n  \"crestless\",\n  \"crevice\",\n  \"crewless\",\n  \"crewman\",\n  \"crewmate\",\n  \"crib\",\n  \"cricket\",\n  \"cried\",\n  \"crier\",\n  \"crimp\",\n  \"crimson\",\n  \"cringe\",\n  \"cringing\",\n  \"crinkle\",\n  \"crinkly\",\n  \"crisped\",\n  \"crisping\",\n  \"crisply\",\n  \"crispness\",\n  \"crispy\",\n  \"criteria\",\n  \"critter\",\n  \"croak\",\n  \"crock\",\n  \"crook\",\n  \"croon\",\n  \"crop\",\n  \"cross\",\n  \"crouch\",\n  \"crouton\",\n  \"crowbar\",\n  \"crowd\",\n  \"crown\",\n  \"crucial\",\n  \"crudely\",\n  \"crudeness\",\n  \"cruelly\",\n  \"cruelness\",\n  \"cruelty\",\n  \"crumb\",\n  \"crummiest\",\n  \"crummy\",\n  \"crumpet\",\n  \"crumpled\",\n  \"cruncher\",\n  \"crunching\",\n  \"crunchy\",\n  \"crusader\",\n  \"crushable\",\n  \"crushed\",\n  \"crusher\",\n  \"crushing\",\n  \"crust\",\n  \"crux\",\n  \"crying\",\n  \"cryptic\",\n  \"crystal\",\n  \"cubbyhole\",\n  \"cube\",\n  \"cubical\",\n  \"cubicle\",\n  \"cucumber\",\n  \"cuddle\",\n  \"cuddly\",\n  \"cufflink\",\n  \"culinary\",\n  \"culminate\",\n  \"culpable\",\n  \"culprit\",\n  \"cultivate\",\n  \"cultural\",\n  \"culture\",\n  \"cupbearer\",\n  \"cupcake\",\n  \"cupid\",\n  \"cupped\",\n  \"cupping\",\n  \"curable\",\n  \"curator\",\n  \"curdle\",\n  \"cure\",\n  \"curfew\",\n  \"curing\",\n  \"curled\",\n  \"curler\",\n  \"curliness\",\n  \"curling\",\n  \"curly\",\n  \"curry\",\n  \"curse\",\n  \"cursive\",\n  \"cursor\",\n  \"curtain\",\n  \"curtly\",\n  \"curtsy\",\n  \"curvature\",\n  \"curve\",\n  \"curvy\",\n  \"cushy\",\n  \"cusp\",\n  \"cussed\",\n  \"custard\",\n  \"custodian\",\n  \"custody\",\n  \"customary\",\n  \"customer\",\n  \"customize\",\n  \"customs\",\n  \"cut\",\n  \"cycle\",\n  \"cyclic\",\n  \"cycling\",\n  \"cyclist\",\n  \"cylinder\",\n  \"cymbal\",\n  \"cytoplasm\",\n  \"cytoplast\",\n  \"dab\",\n  \"dad\",\n  \"daffodil\",\n  \"dagger\",\n  \"daily\",\n  \"daintily\",\n  \"dainty\",\n  \"dairy\",\n  \"daisy\",\n  \"dallying\",\n  \"dance\",\n  \"dancing\",\n  \"dandelion\",\n  \"dander\",\n  \"dandruff\",\n  \"dandy\",\n  \"danger\",\n  \"dangle\",\n  \"dangling\",\n  \"daredevil\",\n  \"dares\",\n  \"daringly\",\n  \"darkened\",\n  \"darkening\",\n  \"darkish\",\n  \"darkness\",\n  \"darkroom\",\n  \"darling\",\n  \"darn\",\n  \"dart\",\n  \"darwinism\",\n  \"dash\",\n  \"dastardly\",\n  \"data\",\n  \"datebook\",\n  \"dating\",\n  \"daughter\",\n  \"daunting\",\n  \"dawdler\",\n  \"dawn\",\n  \"daybed\",\n  \"daybreak\",\n  \"daycare\",\n  \"daydream\",\n  \"daylight\",\n  \"daylong\",\n  \"dayroom\",\n  \"daytime\",\n  \"dazzler\",\n  \"dazzling\",\n  \"deacon\",\n  \"deafening\",\n  \"deafness\",\n  \"dealer\",\n  \"dealing\",\n  \"dealmaker\",\n  \"dealt\",\n  \"dean\",\n  \"debatable\",\n  \"debate\",\n  \"debating\",\n  \"debit\",\n  \"debrief\",\n  \"debtless\",\n  \"debtor\",\n  \"debug\",\n  \"debunk\",\n  \"decade\",\n  \"decaf\",\n  \"decal\",\n  \"decathlon\",\n  \"decay\",\n  \"deceased\",\n  \"deceit\",\n  \"deceiver\",\n  \"deceiving\",\n  \"december\",\n  \"decency\",\n  \"decent\",\n  \"deception\",\n  \"deceptive\",\n  \"decibel\",\n  \"decidable\",\n  \"decimal\",\n  \"decimeter\",\n  \"decipher\",\n  \"deck\",\n  \"declared\",\n  \"decline\",\n  \"decode\",\n  \"decompose\",\n  \"decorated\",\n  \"decorator\",\n  \"decoy\",\n  \"decrease\",\n  \"decree\",\n  \"dedicate\",\n  \"dedicator\",\n  \"deduce\",\n  \"deduct\",\n  \"deed\",\n  \"deem\",\n  \"deepen\",\n  \"deeply\",\n  \"deepness\",\n  \"deface\",\n  \"defacing\",\n  \"defame\",\n  \"default\",\n  \"defeat\",\n  \"defection\",\n  \"defective\",\n  \"defendant\",\n  \"defender\",\n  \"defense\",\n  \"defensive\",\n  \"deferral\",\n  \"deferred\",\n  \"defiance\",\n  \"defiant\",\n  \"defile\",\n  \"defiling\",\n  \"define\",\n  \"definite\",\n  \"deflate\",\n  \"deflation\",\n  \"deflator\",\n  \"deflected\",\n  \"deflector\",\n  \"defog\",\n  \"deforest\",\n  \"defraud\",\n  \"defrost\",\n  \"deftly\",\n  \"defuse\",\n  \"defy\",\n  \"degraded\",\n  \"degrading\",\n  \"degrease\",\n  \"degree\",\n  \"dehydrate\",\n  \"deity\",\n  \"dejected\",\n  \"delay\",\n  \"delegate\",\n  \"delegator\",\n  \"delete\",\n  \"deletion\",\n  \"delicacy\",\n  \"delicate\",\n  \"delicious\",\n  \"delighted\",\n  \"delirious\",\n  \"delirium\",\n  \"deliverer\",\n  \"delivery\",\n  \"delouse\",\n  \"delta\",\n  \"deluge\",\n  \"delusion\",\n  \"deluxe\",\n  \"demanding\",\n  \"demeaning\",\n  \"demeanor\",\n  \"demise\",\n  \"democracy\",\n  \"democrat\",\n  \"demote\",\n  \"demotion\",\n  \"demystify\",\n  \"denatured\",\n  \"deniable\",\n  \"denial\",\n  \"denim\",\n  \"denote\",\n  \"dense\",\n  \"density\",\n  \"dental\",\n  \"dentist\",\n  \"denture\",\n  \"deny\",\n  \"deodorant\",\n  \"deodorize\",\n  \"departed\",\n  \"departure\",\n  \"depict\",\n  \"deplete\",\n  \"depletion\",\n  \"deplored\",\n  \"deploy\",\n  \"deport\",\n  \"depose\",\n  \"depraved\",\n  \"depravity\",\n  \"deprecate\",\n  \"depress\",\n  \"deprive\",\n  \"depth\",\n  \"deputize\",\n  \"deputy\",\n  \"derail\",\n  \"deranged\",\n  \"derby\",\n  \"derived\",\n  \"desecrate\",\n  \"deserve\",\n  \"deserving\",\n  \"designate\",\n  \"designed\",\n  \"designer\",\n  \"designing\",\n  \"deskbound\",\n  \"desktop\",\n  \"deskwork\",\n  \"desolate\",\n  \"despair\",\n  \"despise\",\n  \"despite\",\n  \"destiny\",\n  \"destitute\",\n  \"destruct\",\n  \"detached\",\n  \"detail\",\n  \"detection\",\n  \"detective\",\n  \"detector\",\n  \"detention\",\n  \"detergent\",\n  \"detest\",\n  \"detonate\",\n  \"detonator\",\n  \"detoxify\",\n  \"detract\",\n  \"deuce\",\n  \"devalue\",\n  \"deviancy\",\n  \"deviant\",\n  \"deviate\",\n  \"deviation\",\n  \"deviator\",\n  \"device\",\n  \"devious\",\n  \"devotedly\",\n  \"devotee\",\n  \"devotion\",\n  \"devourer\",\n  \"devouring\",\n  \"devoutly\",\n  \"dexterity\",\n  \"dexterous\",\n  \"diabetes\",\n  \"diabetic\",\n  \"diabolic\",\n  \"diagnoses\",\n  \"diagnosis\",\n  \"diagram\",\n  \"dial\",\n  \"diameter\",\n  \"diaper\",\n  \"diaphragm\",\n  \"diary\",\n  \"dice\",\n  \"dicing\",\n  \"dictate\",\n  \"dictation\",\n  \"dictator\",\n  \"difficult\",\n  \"diffused\",\n  \"diffuser\",\n  \"diffusion\",\n  \"diffusive\",\n  \"dig\",\n  \"dilation\",\n  \"diligence\",\n  \"diligent\",\n  \"dill\",\n  \"dilute\",\n  \"dime\",\n  \"diminish\",\n  \"dimly\",\n  \"dimmed\",\n  \"dimmer\",\n  \"dimness\",\n  \"dimple\",\n  \"diner\",\n  \"dingbat\",\n  \"dinghy\",\n  \"dinginess\",\n  \"dingo\",\n  \"dingy\",\n  \"dining\",\n  \"dinner\",\n  \"diocese\",\n  \"dioxide\",\n  \"diploma\",\n  \"dipped\",\n  \"dipper\",\n  \"dipping\",\n  \"directed\",\n  \"direction\",\n  \"directive\",\n  \"directly\",\n  \"directory\",\n  \"direness\",\n  \"dirtiness\",\n  \"disabled\",\n  \"disagree\",\n  \"disallow\",\n  \"disarm\",\n  \"disarray\",\n  \"disaster\",\n  \"disband\",\n  \"disbelief\",\n  \"disburse\",\n  \"discard\",\n  \"discern\",\n  \"discharge\",\n  \"disclose\",\n  \"discolor\",\n  \"discount\",\n  \"discourse\",\n  \"discover\",\n  \"discuss\",\n  \"disdain\",\n  \"disengage\",\n  \"disfigure\",\n  \"disgrace\",\n  \"dish\",\n  \"disinfect\",\n  \"disjoin\",\n  \"disk\",\n  \"dislike\",\n  \"disliking\",\n  \"dislocate\",\n  \"dislodge\",\n  \"disloyal\",\n  \"dismantle\",\n  \"dismay\",\n  \"dismiss\",\n  \"dismount\",\n  \"disobey\",\n  \"disorder\",\n  \"disown\",\n  \"disparate\",\n  \"disparity\",\n  \"dispatch\",\n  \"dispense\",\n  \"dispersal\",\n  \"dispersed\",\n  \"disperser\",\n  \"displace\",\n  \"display\",\n  \"displease\",\n  \"disposal\",\n  \"dispose\",\n  \"disprove\",\n  \"dispute\",\n  \"disregard\",\n  \"disrupt\",\n  \"dissuade\",\n  \"distance\",\n  \"distant\",\n  \"distaste\",\n  \"distill\",\n  \"distinct\",\n  \"distort\",\n  \"distract\",\n  \"distress\",\n  \"district\",\n  \"distrust\",\n  \"ditch\",\n  \"ditto\",\n  \"ditzy\",\n  \"dividable\",\n  \"divided\",\n  \"dividend\",\n  \"dividers\",\n  \"dividing\",\n  \"divinely\",\n  \"diving\",\n  \"divinity\",\n  \"divisible\",\n  \"divisibly\",\n  \"division\",\n  \"divisive\",\n  \"divorcee\",\n  \"dizziness\",\n  \"dizzy\",\n  \"doable\",\n  \"docile\",\n  \"dock\",\n  \"doctrine\",\n  \"document\",\n  \"dodge\",\n  \"dodgy\",\n  \"doily\",\n  \"doing\",\n  \"dole\",\n  \"dollar\",\n  \"dollhouse\",\n  \"dollop\",\n  \"dolly\",\n  \"dolphin\",\n  \"domain\",\n  \"domelike\",\n  \"domestic\",\n  \"dominion\",\n  \"dominoes\",\n  \"donated\",\n  \"donation\",\n  \"donator\",\n  \"donor\",\n  \"donut\",\n  \"doodle\",\n  \"doorbell\",\n  \"doorframe\",\n  \"doorknob\",\n  \"doorman\",\n  \"doormat\",\n  \"doornail\",\n  \"doorpost\",\n  \"doorstep\",\n  \"doorstop\",\n  \"doorway\",\n  \"doozy\",\n  \"dork\",\n  \"dormitory\",\n  \"dorsal\",\n  \"dosage\",\n  \"dose\",\n  \"dotted\",\n  \"doubling\",\n  \"douche\",\n  \"dove\",\n  \"down\",\n  \"dowry\",\n  \"doze\",\n  \"drab\",\n  \"dragging\",\n  \"dragonfly\",\n  \"dragonish\",\n  \"dragster\",\n  \"drainable\",\n  \"drainage\",\n  \"drained\",\n  \"drainer\",\n  \"drainpipe\",\n  \"dramatic\",\n  \"dramatize\",\n  \"drank\",\n  \"drapery\",\n  \"drastic\",\n  \"draw\",\n  \"dreaded\",\n  \"dreadful\",\n  \"dreadlock\",\n  \"dreamboat\",\n  \"dreamily\",\n  \"dreamland\",\n  \"dreamless\",\n  \"dreamlike\",\n  \"dreamt\",\n  \"dreamy\",\n  \"drearily\",\n  \"dreary\",\n  \"drench\",\n  \"dress\",\n  \"drew\",\n  \"dribble\",\n  \"dried\",\n  \"drier\",\n  \"drift\",\n  \"driller\",\n  \"drilling\",\n  \"drinkable\",\n  \"drinking\",\n  \"dripping\",\n  \"drippy\",\n  \"drivable\",\n  \"driven\",\n  \"driver\",\n  \"driveway\",\n  \"driving\",\n  \"drizzle\",\n  \"drizzly\",\n  \"drone\",\n  \"drool\",\n  \"droop\",\n  \"drop-down\",\n  \"dropbox\",\n  \"dropkick\",\n  \"droplet\",\n  \"dropout\",\n  \"dropper\",\n  \"drove\",\n  \"drown\",\n  \"drowsily\",\n  \"drudge\",\n  \"drum\",\n  \"dry\",\n  \"dubbed\",\n  \"dubiously\",\n  \"duchess\",\n  \"duckbill\",\n  \"ducking\",\n  \"duckling\",\n  \"ducktail\",\n  \"ducky\",\n  \"duct\",\n  \"dude\",\n  \"duffel\",\n  \"dugout\",\n  \"duh\",\n  \"duke\",\n  \"duller\",\n  \"dullness\",\n  \"duly\",\n  \"dumping\",\n  \"dumpling\",\n  \"dumpster\",\n  \"duo\",\n  \"dupe\",\n  \"duplex\",\n  \"duplicate\",\n  \"duplicity\",\n  \"durable\",\n  \"durably\",\n  \"duration\",\n  \"duress\",\n  \"during\",\n  \"dusk\",\n  \"dust\",\n  \"dutiful\",\n  \"duty\",\n  \"duvet\",\n  \"dwarf\",\n  \"dweeb\",\n  \"dwelled\",\n  \"dweller\",\n  \"dwelling\",\n  \"dwindle\",\n  \"dwindling\",\n  \"dynamic\",\n  \"dynamite\",\n  \"dynasty\",\n  \"dyslexia\",\n  \"dyslexic\",\n  \"each\",\n  \"eagle\",\n  \"earache\",\n  \"eardrum\",\n  \"earflap\",\n  \"earful\",\n  \"earlobe\",\n  \"early\",\n  \"earmark\",\n  \"earmuff\",\n  \"earphone\",\n  \"earpiece\",\n  \"earplugs\",\n  \"earring\",\n  \"earshot\",\n  \"earthen\",\n  \"earthlike\",\n  \"earthling\",\n  \"earthly\",\n  \"earthworm\",\n  \"earthy\",\n  \"earwig\",\n  \"easeful\",\n  \"easel\",\n  \"easiest\",\n  \"easily\",\n  \"easiness\",\n  \"easing\",\n  \"eastbound\",\n  \"eastcoast\",\n  \"easter\",\n  \"eastward\",\n  \"eatable\",\n  \"eaten\",\n  \"eatery\",\n  \"eating\",\n  \"eats\",\n  \"ebay\",\n  \"ebony\",\n  \"ebook\",\n  \"ecard\",\n  \"eccentric\",\n  \"echo\",\n  \"eclair\",\n  \"eclipse\",\n  \"ecologist\",\n  \"ecology\",\n  \"economic\",\n  \"economist\",\n  \"economy\",\n  \"ecosphere\",\n  \"ecosystem\",\n  \"edge\",\n  \"edginess\",\n  \"edging\",\n  \"edgy\",\n  \"edition\",\n  \"editor\",\n  \"educated\",\n  \"education\",\n  \"educator\",\n  \"eel\",\n  \"effective\",\n  \"effects\",\n  \"efficient\",\n  \"effort\",\n  \"eggbeater\",\n  \"egging\",\n  \"eggnog\",\n  \"eggplant\",\n  \"eggshell\",\n  \"egomaniac\",\n  \"egotism\",\n  \"egotistic\",\n  \"either\",\n  \"eject\",\n  \"elaborate\",\n  \"elastic\",\n  \"elated\",\n  \"elbow\",\n  \"eldercare\",\n  \"elderly\",\n  \"eldest\",\n  \"electable\",\n  \"election\",\n  \"elective\",\n  \"elephant\",\n  \"elevate\",\n  \"elevating\",\n  \"elevation\",\n  \"elevator\",\n  \"eleven\",\n  \"elf\",\n  \"eligible\",\n  \"eligibly\",\n  \"eliminate\",\n  \"elite\",\n  \"elitism\",\n  \"elixir\",\n  \"elk\",\n  \"ellipse\",\n  \"elliptic\",\n  \"elm\",\n  \"elongated\",\n  \"elope\",\n  \"eloquence\",\n  \"eloquent\",\n  \"elsewhere\",\n  \"elude\",\n  \"elusive\",\n  \"elves\",\n  \"email\",\n  \"embargo\",\n  \"embark\",\n  \"embassy\",\n  \"embattled\",\n  \"embellish\",\n  \"ember\",\n  \"embezzle\",\n  \"emblaze\",\n  \"emblem\",\n  \"embody\",\n  \"embolism\",\n  \"emboss\",\n  \"embroider\",\n  \"emcee\",\n  \"emerald\",\n  \"emergency\",\n  \"emission\",\n  \"emit\",\n  \"emote\",\n  \"emoticon\",\n  \"emotion\",\n  \"empathic\",\n  \"empathy\",\n  \"emperor\",\n  \"emphases\",\n  \"emphasis\",\n  \"emphasize\",\n  \"emphatic\",\n  \"empirical\",\n  \"employed\",\n  \"employee\",\n  \"employer\",\n  \"emporium\",\n  \"empower\",\n  \"emptier\",\n  \"emptiness\",\n  \"empty\",\n  \"emu\",\n  \"enable\",\n  \"enactment\",\n  \"enamel\",\n  \"enchanted\",\n  \"enchilada\",\n  \"encircle\",\n  \"enclose\",\n  \"enclosure\",\n  \"encode\",\n  \"encore\",\n  \"encounter\",\n  \"encourage\",\n  \"encroach\",\n  \"encrust\",\n  \"encrypt\",\n  \"endanger\",\n  \"endeared\",\n  \"endearing\",\n  \"ended\",\n  \"ending\",\n  \"endless\",\n  \"endnote\",\n  \"endocrine\",\n  \"endorphin\",\n  \"endorse\",\n  \"endowment\",\n  \"endpoint\",\n  \"endurable\",\n  \"endurance\",\n  \"enduring\",\n  \"energetic\",\n  \"energize\",\n  \"energy\",\n  \"enforced\",\n  \"enforcer\",\n  \"engaged\",\n  \"engaging\",\n  \"engine\",\n  \"engorge\",\n  \"engraved\",\n  \"engraver\",\n  \"engraving\",\n  \"engross\",\n  \"engulf\",\n  \"enhance\",\n  \"enigmatic\",\n  \"enjoyable\",\n  \"enjoyably\",\n  \"enjoyer\",\n  \"enjoying\",\n  \"enjoyment\",\n  \"enlarged\",\n  \"enlarging\",\n  \"enlighten\",\n  \"enlisted\",\n  \"enquirer\",\n  \"enrage\",\n  \"enrich\",\n  \"enroll\",\n  \"enslave\",\n  \"ensnare\",\n  \"ensure\",\n  \"entail\",\n  \"entangled\",\n  \"entering\",\n  \"entertain\",\n  \"enticing\",\n  \"entire\",\n  \"entitle\",\n  \"entity\",\n  \"entomb\",\n  \"entourage\",\n  \"entrap\",\n  \"entree\",\n  \"entrench\",\n  \"entrust\",\n  \"entryway\",\n  \"entwine\",\n  \"enunciate\",\n  \"envelope\",\n  \"enviable\",\n  \"enviably\",\n  \"envious\",\n  \"envision\",\n  \"envoy\",\n  \"envy\",\n  \"enzyme\",\n  \"epic\",\n  \"epidemic\",\n  \"epidermal\",\n  \"epidermis\",\n  \"epidural\",\n  \"epilepsy\",\n  \"epileptic\",\n  \"epilogue\",\n  \"epiphany\",\n  \"episode\",\n  \"equal\",\n  \"equate\",\n  \"equation\",\n  \"equator\",\n  \"equinox\",\n  \"equipment\",\n  \"equity\",\n  \"equivocal\",\n  \"eradicate\",\n  \"erasable\",\n  \"erased\",\n  \"eraser\",\n  \"erasure\",\n  \"ergonomic\",\n  \"errand\",\n  \"errant\",\n  \"erratic\",\n  \"error\",\n  \"erupt\",\n  \"escalate\",\n  \"escalator\",\n  \"escapable\",\n  \"escapade\",\n  \"escapist\",\n  \"escargot\",\n  \"eskimo\",\n  \"esophagus\",\n  \"espionage\",\n  \"espresso\",\n  \"esquire\",\n  \"essay\",\n  \"essence\",\n  \"essential\",\n  \"establish\",\n  \"estate\",\n  \"esteemed\",\n  \"estimate\",\n  \"estimator\",\n  \"estranged\",\n  \"estrogen\",\n  \"etching\",\n  \"eternal\",\n  \"eternity\",\n  \"ethanol\",\n  \"ether\",\n  \"ethically\",\n  \"ethics\",\n  \"euphemism\",\n  \"evacuate\",\n  \"evacuee\",\n  \"evade\",\n  \"evaluate\",\n  \"evaluator\",\n  \"evaporate\",\n  \"evasion\",\n  \"evasive\",\n  \"even\",\n  \"everglade\",\n  \"evergreen\",\n  \"everybody\",\n  \"everyday\",\n  \"everyone\",\n  \"evict\",\n  \"evidence\",\n  \"evident\",\n  \"evil\",\n  \"evoke\",\n  \"evolution\",\n  \"evolve\",\n  \"exact\",\n  \"exalted\",\n  \"example\",\n  \"excavate\",\n  \"excavator\",\n  \"exceeding\",\n  \"exception\",\n  \"excess\",\n  \"exchange\",\n  \"excitable\",\n  \"exciting\",\n  \"exclaim\",\n  \"exclude\",\n  \"excluding\",\n  \"exclusion\",\n  \"exclusive\",\n  \"excretion\",\n  \"excretory\",\n  \"excursion\",\n  \"excusable\",\n  \"excusably\",\n  \"excuse\",\n  \"exemplary\",\n  \"exemplify\",\n  \"exemption\",\n  \"exerciser\",\n  \"exert\",\n  \"exes\",\n  \"exfoliate\",\n  \"exhale\",\n  \"exhaust\",\n  \"exhume\",\n  \"exile\",\n  \"existing\",\n  \"exit\",\n  \"exodus\",\n  \"exonerate\",\n  \"exorcism\",\n  \"exorcist\",\n  \"expand\",\n  \"expanse\",\n  \"expansion\",\n  \"expansive\",\n  \"expectant\",\n  \"expedited\",\n  \"expediter\",\n  \"expel\",\n  \"expend\",\n  \"expenses\",\n  \"expensive\",\n  \"expert\",\n  \"expire\",\n  \"expiring\",\n  \"explain\",\n  \"expletive\",\n  \"explicit\",\n  \"explode\",\n  \"exploit\",\n  \"explore\",\n  \"exploring\",\n  \"exponent\",\n  \"exporter\",\n  \"exposable\",\n  \"expose\",\n  \"exposure\",\n  \"express\",\n  \"expulsion\",\n  \"exquisite\",\n  \"extended\",\n  \"extending\",\n  \"extent\",\n  \"extenuate\",\n  \"exterior\",\n  \"external\",\n  \"extinct\",\n  \"extortion\",\n  \"extradite\",\n  \"extras\",\n  \"extrovert\",\n  \"extrude\",\n  \"extruding\",\n  \"exuberant\",\n  \"fable\",\n  \"fabric\",\n  \"fabulous\",\n  \"facebook\",\n  \"facecloth\",\n  \"facedown\",\n  \"faceless\",\n  \"facelift\",\n  \"faceplate\",\n  \"faceted\",\n  \"facial\",\n  \"facility\",\n  \"facing\",\n  \"facsimile\",\n  \"faction\",\n  \"factoid\",\n  \"factor\",\n  \"factsheet\",\n  \"factual\",\n  \"faculty\",\n  \"fade\",\n  \"fading\",\n  \"failing\",\n  \"falcon\",\n  \"fall\",\n  \"false\",\n  \"falsify\",\n  \"fame\",\n  \"familiar\",\n  \"family\",\n  \"famine\",\n  \"famished\",\n  \"fanatic\",\n  \"fancied\",\n  \"fanciness\",\n  \"fancy\",\n  \"fanfare\",\n  \"fang\",\n  \"fanning\",\n  \"fantasize\",\n  \"fantastic\",\n  \"fantasy\",\n  \"fascism\",\n  \"fastball\",\n  \"faster\",\n  \"fasting\",\n  \"fastness\",\n  \"faucet\",\n  \"favorable\",\n  \"favorably\",\n  \"favored\",\n  \"favoring\",\n  \"favorite\",\n  \"fax\",\n  \"feast\",\n  \"federal\",\n  \"fedora\",\n  \"feeble\",\n  \"feed\",\n  \"feel\",\n  \"feisty\",\n  \"feline\",\n  \"felt-tip\",\n  \"feminine\",\n  \"feminism\",\n  \"feminist\",\n  \"feminize\",\n  \"femur\",\n  \"fence\",\n  \"fencing\",\n  \"fender\",\n  \"ferment\",\n  \"fernlike\",\n  \"ferocious\",\n  \"ferocity\",\n  \"ferret\",\n  \"ferris\",\n  \"ferry\",\n  \"fervor\",\n  \"fester\",\n  \"festival\",\n  \"festive\",\n  \"festivity\",\n  \"fetal\",\n  \"fetch\",\n  \"fever\",\n  \"fiber\",\n  \"fiction\",\n  \"fiddle\",\n  \"fiddling\",\n  \"fidelity\",\n  \"fidgeting\",\n  \"fidgety\",\n  \"fifteen\",\n  \"fifth\",\n  \"fiftieth\",\n  \"fifty\",\n  \"figment\",\n  \"figure\",\n  \"figurine\",\n  \"filing\",\n  \"filled\",\n  \"filler\",\n  \"filling\",\n  \"film\",\n  \"filter\",\n  \"filth\",\n  \"filtrate\",\n  \"finale\",\n  \"finalist\",\n  \"finalize\",\n  \"finally\",\n  \"finance\",\n  \"financial\",\n  \"finch\",\n  \"fineness\",\n  \"finer\",\n  \"finicky\",\n  \"finished\",\n  \"finisher\",\n  \"finishing\",\n  \"finite\",\n  \"finless\",\n  \"finlike\",\n  \"fiscally\",\n  \"fit\",\n  \"five\",\n  \"flaccid\",\n  \"flagman\",\n  \"flagpole\",\n  \"flagship\",\n  \"flagstick\",\n  \"flagstone\",\n  \"flail\",\n  \"flakily\",\n  \"flaky\",\n  \"flame\",\n  \"flammable\",\n  \"flanked\",\n  \"flanking\",\n  \"flannels\",\n  \"flap\",\n  \"flaring\",\n  \"flashback\",\n  \"flashbulb\",\n  \"flashcard\",\n  \"flashily\",\n  \"flashing\",\n  \"flashy\",\n  \"flask\",\n  \"flatbed\",\n  \"flatfoot\",\n  \"flatly\",\n  \"flatness\",\n  \"flatten\",\n  \"flattered\",\n  \"flatterer\",\n  \"flattery\",\n  \"flattop\",\n  \"flatware\",\n  \"flatworm\",\n  \"flavored\",\n  \"flavorful\",\n  \"flavoring\",\n  \"flaxseed\",\n  \"fled\",\n  \"fleshed\",\n  \"fleshy\",\n  \"flick\",\n  \"flier\",\n  \"flight\",\n  \"flinch\",\n  \"fling\",\n  \"flint\",\n  \"flip\",\n  \"flirt\",\n  \"float\",\n  \"flock\",\n  \"flogging\",\n  \"flop\",\n  \"floral\",\n  \"florist\",\n  \"floss\",\n  \"flounder\",\n  \"flyable\",\n  \"flyaway\",\n  \"flyer\",\n  \"flying\",\n  \"flyover\",\n  \"flypaper\",\n  \"foam\",\n  \"foe\",\n  \"fog\",\n  \"foil\",\n  \"folic\",\n  \"folk\",\n  \"follicle\",\n  \"follow\",\n  \"fondling\",\n  \"fondly\",\n  \"fondness\",\n  \"fondue\",\n  \"font\",\n  \"food\",\n  \"fool\",\n  \"footage\",\n  \"football\",\n  \"footbath\",\n  \"footboard\",\n  \"footer\",\n  \"footgear\",\n  \"foothill\",\n  \"foothold\",\n  \"footing\",\n  \"footless\",\n  \"footman\",\n  \"footnote\",\n  \"footpad\",\n  \"footpath\",\n  \"footprint\",\n  \"footrest\",\n  \"footsie\",\n  \"footsore\",\n  \"footwear\",\n  \"footwork\",\n  \"fossil\",\n  \"foster\",\n  \"founder\",\n  \"founding\",\n  \"fountain\",\n  \"fox\",\n  \"foyer\",\n  \"fraction\",\n  \"fracture\",\n  \"fragile\",\n  \"fragility\",\n  \"fragment\",\n  \"fragrance\",\n  \"fragrant\",\n  \"frail\",\n  \"frame\",\n  \"framing\",\n  \"frantic\",\n  \"fraternal\",\n  \"frayed\",\n  \"fraying\",\n  \"frays\",\n  \"freckled\",\n  \"freckles\",\n  \"freebase\",\n  \"freebee\",\n  \"freebie\",\n  \"freedom\",\n  \"freefall\",\n  \"freehand\",\n  \"freeing\",\n  \"freeload\",\n  \"freely\",\n  \"freemason\",\n  \"freeness\",\n  \"freestyle\",\n  \"freeware\",\n  \"freeway\",\n  \"freewill\",\n  \"freezable\",\n  \"freezing\",\n  \"freight\",\n  \"french\",\n  \"frenzied\",\n  \"frenzy\",\n  \"frequency\",\n  \"frequent\",\n  \"fresh\",\n  \"fretful\",\n  \"fretted\",\n  \"friction\",\n  \"friday\",\n  \"fridge\",\n  \"fried\",\n  \"friend\",\n  \"frighten\",\n  \"frightful\",\n  \"frigidity\",\n  \"frigidly\",\n  \"frill\",\n  \"fringe\",\n  \"frisbee\",\n  \"frisk\",\n  \"fritter\",\n  \"frivolous\",\n  \"frolic\",\n  \"from\",\n  \"front\",\n  \"frostbite\",\n  \"frosted\",\n  \"frostily\",\n  \"frosting\",\n  \"frostlike\",\n  \"frosty\",\n  \"froth\",\n  \"frown\",\n  \"frozen\",\n  \"fructose\",\n  \"frugality\",\n  \"frugally\",\n  \"fruit\",\n  \"frustrate\",\n  \"frying\",\n  \"gab\",\n  \"gaffe\",\n  \"gag\",\n  \"gainfully\",\n  \"gaining\",\n  \"gains\",\n  \"gala\",\n  \"gallantly\",\n  \"galleria\",\n  \"gallery\",\n  \"galley\",\n  \"gallon\",\n  \"gallows\",\n  \"gallstone\",\n  \"galore\",\n  \"galvanize\",\n  \"gambling\",\n  \"game\",\n  \"gaming\",\n  \"gamma\",\n  \"gander\",\n  \"gangly\",\n  \"gangrene\",\n  \"gangway\",\n  \"gap\",\n  \"garage\",\n  \"garbage\",\n  \"garden\",\n  \"gargle\",\n  \"garland\",\n  \"garlic\",\n  \"garment\",\n  \"garnet\",\n  \"garnish\",\n  \"garter\",\n  \"gas\",\n  \"gatherer\",\n  \"gathering\",\n  \"gating\",\n  \"gauging\",\n  \"gauntlet\",\n  \"gauze\",\n  \"gave\",\n  \"gawk\",\n  \"gazing\",\n  \"gear\",\n  \"gecko\",\n  \"geek\",\n  \"geiger\",\n  \"gem\",\n  \"gender\",\n  \"generic\",\n  \"generous\",\n  \"genetics\",\n  \"genre\",\n  \"gentile\",\n  \"gentleman\",\n  \"gently\",\n  \"gents\",\n  \"geography\",\n  \"geologic\",\n  \"geologist\",\n  \"geology\",\n  \"geometric\",\n  \"geometry\",\n  \"geranium\",\n  \"gerbil\",\n  \"geriatric\",\n  \"germicide\",\n  \"germinate\",\n  \"germless\",\n  \"germproof\",\n  \"gestate\",\n  \"gestation\",\n  \"gesture\",\n  \"getaway\",\n  \"getting\",\n  \"getup\",\n  \"giant\",\n  \"gibberish\",\n  \"giblet\",\n  \"giddily\",\n  \"giddiness\",\n  \"giddy\",\n  \"gift\",\n  \"gigabyte\",\n  \"gigahertz\",\n  \"gigantic\",\n  \"giggle\",\n  \"giggling\",\n  \"giggly\",\n  \"gigolo\",\n  \"gilled\",\n  \"gills\",\n  \"gimmick\",\n  \"girdle\",\n  \"giveaway\",\n  \"given\",\n  \"giver\",\n  \"giving\",\n  \"gizmo\",\n  \"gizzard\",\n  \"glacial\",\n  \"glacier\",\n  \"glade\",\n  \"gladiator\",\n  \"gladly\",\n  \"glamorous\",\n  \"glamour\",\n  \"glance\",\n  \"glancing\",\n  \"glandular\",\n  \"glare\",\n  \"glaring\",\n  \"glass\",\n  \"glaucoma\",\n  \"glazing\",\n  \"gleaming\",\n  \"gleeful\",\n  \"glider\",\n  \"gliding\",\n  \"glimmer\",\n  \"glimpse\",\n  \"glisten\",\n  \"glitch\",\n  \"glitter\",\n  \"glitzy\",\n  \"gloater\",\n  \"gloating\",\n  \"gloomily\",\n  \"gloomy\",\n  \"glorified\",\n  \"glorifier\",\n  \"glorify\",\n  \"glorious\",\n  \"glory\",\n  \"gloss\",\n  \"glove\",\n  \"glowing\",\n  \"glowworm\",\n  \"glucose\",\n  \"glue\",\n  \"gluten\",\n  \"glutinous\",\n  \"glutton\",\n  \"gnarly\",\n  \"gnat\",\n  \"goal\",\n  \"goatskin\",\n  \"goes\",\n  \"goggles\",\n  \"going\",\n  \"goldfish\",\n  \"goldmine\",\n  \"goldsmith\",\n  \"golf\",\n  \"goliath\",\n  \"gonad\",\n  \"gondola\",\n  \"gone\",\n  \"gong\",\n  \"good\",\n  \"gooey\",\n  \"goofball\",\n  \"goofiness\",\n  \"goofy\",\n  \"google\",\n  \"goon\",\n  \"gopher\",\n  \"gore\",\n  \"gorged\",\n  \"gorgeous\",\n  \"gory\",\n  \"gosling\",\n  \"gossip\",\n  \"gothic\",\n  \"gotten\",\n  \"gout\",\n  \"gown\",\n  \"grab\",\n  \"graceful\",\n  \"graceless\",\n  \"gracious\",\n  \"gradation\",\n  \"graded\",\n  \"grader\",\n  \"gradient\",\n  \"grading\",\n  \"gradually\",\n  \"graduate\",\n  \"graffiti\",\n  \"grafted\",\n  \"grafting\",\n  \"grain\",\n  \"granddad\",\n  \"grandkid\",\n  \"grandly\",\n  \"grandma\",\n  \"grandpa\",\n  \"grandson\",\n  \"granite\",\n  \"granny\",\n  \"granola\",\n  \"grant\",\n  \"granular\",\n  \"grape\",\n  \"graph\",\n  \"grapple\",\n  \"grappling\",\n  \"grasp\",\n  \"grass\",\n  \"gratified\",\n  \"gratify\",\n  \"grating\",\n  \"gratitude\",\n  \"gratuity\",\n  \"gravel\",\n  \"graveness\",\n  \"graves\",\n  \"graveyard\",\n  \"gravitate\",\n  \"gravity\",\n  \"gravy\",\n  \"gray\",\n  \"grazing\",\n  \"greasily\",\n  \"greedily\",\n  \"greedless\",\n  \"greedy\",\n  \"green\",\n  \"greeter\",\n  \"greeting\",\n  \"grew\",\n  \"greyhound\",\n  \"grid\",\n  \"grief\",\n  \"grievance\",\n  \"grieving\",\n  \"grievous\",\n  \"grill\",\n  \"grimace\",\n  \"grimacing\",\n  \"grime\",\n  \"griminess\",\n  \"grimy\",\n  \"grinch\",\n  \"grinning\",\n  \"grip\",\n  \"gristle\",\n  \"grit\",\n  \"groggily\",\n  \"groggy\",\n  \"groin\",\n  \"groom\",\n  \"groove\",\n  \"grooving\",\n  \"groovy\",\n  \"grope\",\n  \"ground\",\n  \"grouped\",\n  \"grout\",\n  \"grove\",\n  \"grower\",\n  \"growing\",\n  \"growl\",\n  \"grub\",\n  \"grudge\",\n  \"grudging\",\n  \"grueling\",\n  \"gruffly\",\n  \"grumble\",\n  \"grumbling\",\n  \"grumbly\",\n  \"grumpily\",\n  \"grunge\",\n  \"grunt\",\n  \"guacamole\",\n  \"guidable\",\n  \"guidance\",\n  \"guide\",\n  \"guiding\",\n  \"guileless\",\n  \"guise\",\n  \"gulf\",\n  \"gullible\",\n  \"gully\",\n  \"gulp\",\n  \"gumball\",\n  \"gumdrop\",\n  \"gumminess\",\n  \"gumming\",\n  \"gummy\",\n  \"gurgle\",\n  \"gurgling\",\n  \"guru\",\n  \"gush\",\n  \"gusto\",\n  \"gusty\",\n  \"gutless\",\n  \"guts\",\n  \"gutter\",\n  \"guy\",\n  \"guzzler\",\n  \"gyration\",\n  \"habitable\",\n  \"habitant\",\n  \"habitat\",\n  \"habitual\",\n  \"hacked\",\n  \"hacker\",\n  \"hacking\",\n  \"hacksaw\",\n  \"had\",\n  \"haggler\",\n  \"haiku\",\n  \"half\",\n  \"halogen\",\n  \"halt\",\n  \"halved\",\n  \"halves\",\n  \"hamburger\",\n  \"hamlet\",\n  \"hammock\",\n  \"hamper\",\n  \"hamster\",\n  \"hamstring\",\n  \"handbag\",\n  \"handball\",\n  \"handbook\",\n  \"handbrake\",\n  \"handcart\",\n  \"handclap\",\n  \"handclasp\",\n  \"handcraft\",\n  \"handcuff\",\n  \"handed\",\n  \"handful\",\n  \"handgrip\",\n  \"handgun\",\n  \"handheld\",\n  \"handiness\",\n  \"handiwork\",\n  \"handlebar\",\n  \"handled\",\n  \"handler\",\n  \"handling\",\n  \"handmade\",\n  \"handoff\",\n  \"handpick\",\n  \"handprint\",\n  \"handrail\",\n  \"handsaw\",\n  \"handset\",\n  \"handsfree\",\n  \"handshake\",\n  \"handstand\",\n  \"handwash\",\n  \"handwork\",\n  \"handwoven\",\n  \"handwrite\",\n  \"handyman\",\n  \"hangnail\",\n  \"hangout\",\n  \"hangover\",\n  \"hangup\",\n  \"hankering\",\n  \"hankie\",\n  \"hanky\",\n  \"haphazard\",\n  \"happening\",\n  \"happier\",\n  \"happiest\",\n  \"happily\",\n  \"happiness\",\n  \"happy\",\n  \"harbor\",\n  \"hardcopy\",\n  \"hardcore\",\n  \"hardcover\",\n  \"harddisk\",\n  \"hardened\",\n  \"hardener\",\n  \"hardening\",\n  \"hardhat\",\n  \"hardhead\",\n  \"hardiness\",\n  \"hardly\",\n  \"hardness\",\n  \"hardship\",\n  \"hardware\",\n  \"hardwired\",\n  \"hardwood\",\n  \"hardy\",\n  \"harmful\",\n  \"harmless\",\n  \"harmonica\",\n  \"harmonics\",\n  \"harmonize\",\n  \"harmony\",\n  \"harness\",\n  \"harpist\",\n  \"harsh\",\n  \"harvest\",\n  \"hash\",\n  \"hassle\",\n  \"haste\",\n  \"hastily\",\n  \"hastiness\",\n  \"hasty\",\n  \"hatbox\",\n  \"hatchback\",\n  \"hatchery\",\n  \"hatchet\",\n  \"hatching\",\n  \"hatchling\",\n  \"hate\",\n  \"hatless\",\n  \"hatred\",\n  \"haunt\",\n  \"haven\",\n  \"hazard\",\n  \"hazelnut\",\n  \"hazily\",\n  \"haziness\",\n  \"hazing\",\n  \"hazy\",\n  \"headache\",\n  \"headband\",\n  \"headboard\",\n  \"headcount\",\n  \"headdress\",\n  \"headed\",\n  \"header\",\n  \"headfirst\",\n  \"headgear\",\n  \"heading\",\n  \"headlamp\",\n  \"headless\",\n  \"headlock\",\n  \"headphone\",\n  \"headpiece\",\n  \"headrest\",\n  \"headroom\",\n  \"headscarf\",\n  \"headset\",\n  \"headsman\",\n  \"headstand\",\n  \"headstone\",\n  \"headway\",\n  \"headwear\",\n  \"heap\",\n  \"heat\",\n  \"heave\",\n  \"heavily\",\n  \"heaviness\",\n  \"heaving\",\n  \"hedge\",\n  \"hedging\",\n  \"heftiness\",\n  \"hefty\",\n  \"helium\",\n  \"helmet\",\n  \"helper\",\n  \"helpful\",\n  \"helping\",\n  \"helpless\",\n  \"helpline\",\n  \"hemlock\",\n  \"hemstitch\",\n  \"hence\",\n  \"henchman\",\n  \"henna\",\n  \"herald\",\n  \"herbal\",\n  \"herbicide\",\n  \"herbs\",\n  \"heritage\",\n  \"hermit\",\n  \"heroics\",\n  \"heroism\",\n  \"herring\",\n  \"herself\",\n  \"hertz\",\n  \"hesitancy\",\n  \"hesitant\",\n  \"hesitate\",\n  \"hexagon\",\n  \"hexagram\",\n  \"hubcap\",\n  \"huddle\",\n  \"huddling\",\n  \"huff\",\n  \"hug\",\n  \"hula\",\n  \"hulk\",\n  \"hull\",\n  \"human\",\n  \"humble\",\n  \"humbling\",\n  \"humbly\",\n  \"humid\",\n  \"humiliate\",\n  \"humility\",\n  \"humming\",\n  \"hummus\",\n  \"humongous\",\n  \"humorist\",\n  \"humorless\",\n  \"humorous\",\n  \"humpback\",\n  \"humped\",\n  \"humvee\",\n  \"hunchback\",\n  \"hundredth\",\n  \"hunger\",\n  \"hungrily\",\n  \"hungry\",\n  \"hunk\",\n  \"hunter\",\n  \"hunting\",\n  \"huntress\",\n  \"huntsman\",\n  \"hurdle\",\n  \"hurled\",\n  \"hurler\",\n  \"hurling\",\n  \"hurray\",\n  \"hurricane\",\n  \"hurried\",\n  \"hurry\",\n  \"hurt\",\n  \"husband\",\n  \"hush\",\n  \"husked\",\n  \"huskiness\",\n  \"hut\",\n  \"hybrid\",\n  \"hydrant\",\n  \"hydrated\",\n  \"hydration\",\n  \"hydrogen\",\n  \"hydroxide\",\n  \"hyperlink\",\n  \"hypertext\",\n  \"hyphen\",\n  \"hypnoses\",\n  \"hypnosis\",\n  \"hypnotic\",\n  \"hypnotism\",\n  \"hypnotist\",\n  \"hypnotize\",\n  \"hypocrisy\",\n  \"hypocrite\",\n  \"ibuprofen\",\n  \"ice\",\n  \"iciness\",\n  \"icing\",\n  \"icky\",\n  \"icon\",\n  \"icy\",\n  \"idealism\",\n  \"idealist\",\n  \"idealize\",\n  \"ideally\",\n  \"idealness\",\n  \"identical\",\n  \"identify\",\n  \"identity\",\n  \"ideology\",\n  \"idiocy\",\n  \"idiom\",\n  \"idly\",\n  \"igloo\",\n  \"ignition\",\n  \"ignore\",\n  \"iguana\",\n  \"illicitly\",\n  \"illusion\",\n  \"illusive\",\n  \"image\",\n  \"imaginary\",\n  \"imagines\",\n  \"imaging\",\n  \"imbecile\",\n  \"imitate\",\n  \"imitation\",\n  \"immature\",\n  \"immerse\",\n  \"immersion\",\n  \"imminent\",\n  \"immobile\",\n  \"immodest\",\n  \"immorally\",\n  \"immortal\",\n  \"immovable\",\n  \"immovably\",\n  \"immunity\",\n  \"immunize\",\n  \"impaired\",\n  \"impale\",\n  \"impart\",\n  \"impatient\",\n  \"impeach\",\n  \"impeding\",\n  \"impending\",\n  \"imperfect\",\n  \"imperial\",\n  \"impish\",\n  \"implant\",\n  \"implement\",\n  \"implicate\",\n  \"implicit\",\n  \"implode\",\n  \"implosion\",\n  \"implosive\",\n  \"imply\",\n  \"impolite\",\n  \"important\",\n  \"importer\",\n  \"impose\",\n  \"imposing\",\n  \"impotence\",\n  \"impotency\",\n  \"impotent\",\n  \"impound\",\n  \"imprecise\",\n  \"imprint\",\n  \"imprison\",\n  \"impromptu\",\n  \"improper\",\n  \"improve\",\n  \"improving\",\n  \"improvise\",\n  \"imprudent\",\n  \"impulse\",\n  \"impulsive\",\n  \"impure\",\n  \"impurity\",\n  \"iodine\",\n  \"iodize\",\n  \"ion\",\n  \"ipad\",\n  \"iphone\",\n  \"ipod\",\n  \"irate\",\n  \"irk\",\n  \"iron\",\n  \"irregular\",\n  \"irrigate\",\n  \"irritable\",\n  \"irritably\",\n  \"irritant\",\n  \"irritate\",\n  \"islamic\",\n  \"islamist\",\n  \"isolated\",\n  \"isolating\",\n  \"isolation\",\n  \"isotope\",\n  \"issue\",\n  \"issuing\",\n  \"italicize\",\n  \"italics\",\n  \"item\",\n  \"itinerary\",\n  \"itunes\",\n  \"ivory\",\n  \"ivy\",\n  \"jab\",\n  \"jackal\",\n  \"jacket\",\n  \"jackknife\",\n  \"jackpot\",\n  \"jailbird\",\n  \"jailbreak\",\n  \"jailer\",\n  \"jailhouse\",\n  \"jalapeno\",\n  \"jam\",\n  \"janitor\",\n  \"january\",\n  \"jargon\",\n  \"jarring\",\n  \"jasmine\",\n  \"jaundice\",\n  \"jaunt\",\n  \"java\",\n  \"jawed\",\n  \"jawless\",\n  \"jawline\",\n  \"jaws\",\n  \"jaybird\",\n  \"jaywalker\",\n  \"jazz\",\n  \"jeep\",\n  \"jeeringly\",\n  \"jellied\",\n  \"jelly\",\n  \"jersey\",\n  \"jester\",\n  \"jet\",\n  \"jiffy\",\n  \"jigsaw\",\n  \"jimmy\",\n  \"jingle\",\n  \"jingling\",\n  \"jinx\",\n  \"jitters\",\n  \"jittery\",\n  \"job\",\n  \"jockey\",\n  \"jockstrap\",\n  \"jogger\",\n  \"jogging\",\n  \"john\",\n  \"joining\",\n  \"jokester\",\n  \"jokingly\",\n  \"jolliness\",\n  \"jolly\",\n  \"jolt\",\n  \"jot\",\n  \"jovial\",\n  \"joyfully\",\n  \"joylessly\",\n  \"joyous\",\n  \"joyride\",\n  \"joystick\",\n  \"jubilance\",\n  \"jubilant\",\n  \"judge\",\n  \"judgingly\",\n  \"judicial\",\n  \"judiciary\",\n  \"judo\",\n  \"juggle\",\n  \"juggling\",\n  \"jugular\",\n  \"juice\",\n  \"juiciness\",\n  \"juicy\",\n  \"jujitsu\",\n  \"jukebox\",\n  \"july\",\n  \"jumble\",\n  \"jumbo\",\n  \"jump\",\n  \"junction\",\n  \"juncture\",\n  \"june\",\n  \"junior\",\n  \"juniper\",\n  \"junkie\",\n  \"junkman\",\n  \"junkyard\",\n  \"jurist\",\n  \"juror\",\n  \"jury\",\n  \"justice\",\n  \"justifier\",\n  \"justify\",\n  \"justly\",\n  \"justness\",\n  \"juvenile\",\n  \"kabob\",\n  \"kangaroo\",\n  \"karaoke\",\n  \"karate\",\n  \"karma\",\n  \"kebab\",\n  \"keenly\",\n  \"keenness\",\n  \"keep\",\n  \"keg\",\n  \"kelp\",\n  \"kennel\",\n  \"kept\",\n  \"kerchief\",\n  \"kerosene\",\n  \"kettle\",\n  \"kick\",\n  \"kiln\",\n  \"kilobyte\",\n  \"kilogram\",\n  \"kilometer\",\n  \"kilowatt\",\n  \"kilt\",\n  \"kimono\",\n  \"kindle\",\n  \"kindling\",\n  \"kindly\",\n  \"kindness\",\n  \"kindred\",\n  \"kinetic\",\n  \"kinfolk\",\n  \"king\",\n  \"kinship\",\n  \"kinsman\",\n  \"kinswoman\",\n  \"kissable\",\n  \"kisser\",\n  \"kissing\",\n  \"kitchen\",\n  \"kite\",\n  \"kitten\",\n  \"kitty\",\n  \"kiwi\",\n  \"kleenex\",\n  \"knapsack\",\n  \"knee\",\n  \"knelt\",\n  \"knickers\",\n  \"knoll\",\n  \"koala\",\n  \"kooky\",\n  \"kosher\",\n  \"krypton\",\n  \"kudos\",\n  \"kung\",\n  \"labored\",\n  \"laborer\",\n  \"laboring\",\n  \"laborious\",\n  \"labrador\",\n  \"ladder\",\n  \"ladies\",\n  \"ladle\",\n  \"ladybug\",\n  \"ladylike\",\n  \"lagged\",\n  \"lagging\",\n  \"lagoon\",\n  \"lair\",\n  \"lake\",\n  \"lance\",\n  \"landed\",\n  \"landfall\",\n  \"landfill\",\n  \"landing\",\n  \"landlady\",\n  \"landless\",\n  \"landline\",\n  \"landlord\",\n  \"landmark\",\n  \"landmass\",\n  \"landmine\",\n  \"landowner\",\n  \"landscape\",\n  \"landside\",\n  \"landslide\",\n  \"language\",\n  \"lankiness\",\n  \"lanky\",\n  \"lantern\",\n  \"lapdog\",\n  \"lapel\",\n  \"lapped\",\n  \"lapping\",\n  \"laptop\",\n  \"lard\",\n  \"large\",\n  \"lark\",\n  \"lash\",\n  \"lasso\",\n  \"last\",\n  \"latch\",\n  \"late\",\n  \"lather\",\n  \"latitude\",\n  \"latrine\",\n  \"latter\",\n  \"latticed\",\n  \"launch\",\n  \"launder\",\n  \"laundry\",\n  \"laurel\",\n  \"lavender\",\n  \"lavish\",\n  \"laxative\",\n  \"lazily\",\n  \"laziness\",\n  \"lazy\",\n  \"lecturer\",\n  \"left\",\n  \"legacy\",\n  \"legal\",\n  \"legend\",\n  \"legged\",\n  \"leggings\",\n  \"legible\",\n  \"legibly\",\n  \"legislate\",\n  \"lego\",\n  \"legroom\",\n  \"legume\",\n  \"legwarmer\",\n  \"legwork\",\n  \"lemon\",\n  \"lend\",\n  \"length\",\n  \"lens\",\n  \"lent\",\n  \"leotard\",\n  \"lesser\",\n  \"letdown\",\n  \"lethargic\",\n  \"lethargy\",\n  \"letter\",\n  \"lettuce\",\n  \"level\",\n  \"leverage\",\n  \"levers\",\n  \"levitate\",\n  \"levitator\",\n  \"liability\",\n  \"liable\",\n  \"liberty\",\n  \"librarian\",\n  \"library\",\n  \"licking\",\n  \"licorice\",\n  \"lid\",\n  \"life\",\n  \"lifter\",\n  \"lifting\",\n  \"liftoff\",\n  \"ligament\",\n  \"likely\",\n  \"likeness\",\n  \"likewise\",\n  \"liking\",\n  \"lilac\",\n  \"lilly\",\n  \"lily\",\n  \"limb\",\n  \"limeade\",\n  \"limelight\",\n  \"limes\",\n  \"limit\",\n  \"limping\",\n  \"limpness\",\n  \"line\",\n  \"lingo\",\n  \"linguini\",\n  \"linguist\",\n  \"lining\",\n  \"linked\",\n  \"linoleum\",\n  \"linseed\",\n  \"lint\",\n  \"lion\",\n  \"lip\",\n  \"liquefy\",\n  \"liqueur\",\n  \"liquid\",\n  \"lisp\",\n  \"list\",\n  \"litigate\",\n  \"litigator\",\n  \"litmus\",\n  \"litter\",\n  \"little\",\n  \"livable\",\n  \"lived\",\n  \"lively\",\n  \"liver\",\n  \"livestock\",\n  \"lividly\",\n  \"living\",\n  \"lizard\",\n  \"lubricant\",\n  \"lubricate\",\n  \"lucid\",\n  \"luckily\",\n  \"luckiness\",\n  \"luckless\",\n  \"lucrative\",\n  \"ludicrous\",\n  \"lugged\",\n  \"lukewarm\",\n  \"lullaby\",\n  \"lumber\",\n  \"luminance\",\n  \"luminous\",\n  \"lumpiness\",\n  \"lumping\",\n  \"lumpish\",\n  \"lunacy\",\n  \"lunar\",\n  \"lunchbox\",\n  \"luncheon\",\n  \"lunchroom\",\n  \"lunchtime\",\n  \"lung\",\n  \"lurch\",\n  \"lure\",\n  \"luridness\",\n  \"lurk\",\n  \"lushly\",\n  \"lushness\",\n  \"luster\",\n  \"lustfully\",\n  \"lustily\",\n  \"lustiness\",\n  \"lustrous\",\n  \"lusty\",\n  \"luxurious\",\n  \"luxury\",\n  \"lying\",\n  \"lyrically\",\n  \"lyricism\",\n  \"lyricist\",\n  \"lyrics\",\n  \"macarena\",\n  \"macaroni\",\n  \"macaw\",\n  \"mace\",\n  \"machine\",\n  \"machinist\",\n  \"magazine\",\n  \"magenta\",\n  \"maggot\",\n  \"magical\",\n  \"magician\",\n  \"magma\",\n  \"magnesium\",\n  \"magnetic\",\n  \"magnetism\",\n  \"magnetize\",\n  \"magnifier\",\n  \"magnify\",\n  \"magnitude\",\n  \"magnolia\",\n  \"mahogany\",\n  \"maimed\",\n  \"majestic\",\n  \"majesty\",\n  \"majorette\",\n  \"majority\",\n  \"makeover\",\n  \"maker\",\n  \"makeshift\",\n  \"making\",\n  \"malformed\",\n  \"malt\",\n  \"mama\",\n  \"mammal\",\n  \"mammary\",\n  \"mammogram\",\n  \"manager\",\n  \"managing\",\n  \"manatee\",\n  \"mandarin\",\n  \"mandate\",\n  \"mandatory\",\n  \"mandolin\",\n  \"manger\",\n  \"mangle\",\n  \"mango\",\n  \"mangy\",\n  \"manhandle\",\n  \"manhole\",\n  \"manhood\",\n  \"manhunt\",\n  \"manicotti\",\n  \"manicure\",\n  \"manifesto\",\n  \"manila\",\n  \"mankind\",\n  \"manlike\",\n  \"manliness\",\n  \"manly\",\n  \"manmade\",\n  \"manned\",\n  \"mannish\",\n  \"manor\",\n  \"manpower\",\n  \"mantis\",\n  \"mantra\",\n  \"manual\",\n  \"many\",\n  \"map\",\n  \"marathon\",\n  \"marauding\",\n  \"marbled\",\n  \"marbles\",\n  \"marbling\",\n  \"march\",\n  \"mardi\",\n  \"margarine\",\n  \"margarita\",\n  \"margin\",\n  \"marigold\",\n  \"marina\",\n  \"marine\",\n  \"marital\",\n  \"maritime\",\n  \"marlin\",\n  \"marmalade\",\n  \"maroon\",\n  \"married\",\n  \"marrow\",\n  \"marry\",\n  \"marshland\",\n  \"marshy\",\n  \"marsupial\",\n  \"marvelous\",\n  \"marxism\",\n  \"mascot\",\n  \"masculine\",\n  \"mashed\",\n  \"mashing\",\n  \"massager\",\n  \"masses\",\n  \"massive\",\n  \"mastiff\",\n  \"matador\",\n  \"matchbook\",\n  \"matchbox\",\n  \"matcher\",\n  \"matching\",\n  \"matchless\",\n  \"material\",\n  \"maternal\",\n  \"maternity\",\n  \"math\",\n  \"mating\",\n  \"matriarch\",\n  \"matrimony\",\n  \"matrix\",\n  \"matron\",\n  \"matted\",\n  \"matter\",\n  \"maturely\",\n  \"maturing\",\n  \"maturity\",\n  \"mauve\",\n  \"maverick\",\n  \"maximize\",\n  \"maximum\",\n  \"maybe\",\n  \"mayday\",\n  \"mayflower\",\n  \"moaner\",\n  \"moaning\",\n  \"mobile\",\n  \"mobility\",\n  \"mobilize\",\n  \"mobster\",\n  \"mocha\",\n  \"mocker\",\n  \"mockup\",\n  \"modified\",\n  \"modify\",\n  \"modular\",\n  \"modulator\",\n  \"module\",\n  \"moisten\",\n  \"moistness\",\n  \"moisture\",\n  \"molar\",\n  \"molasses\",\n  \"mold\",\n  \"molecular\",\n  \"molecule\",\n  \"molehill\",\n  \"mollusk\",\n  \"mom\",\n  \"monastery\",\n  \"monday\",\n  \"monetary\",\n  \"monetize\",\n  \"moneybags\",\n  \"moneyless\",\n  \"moneywise\",\n  \"mongoose\",\n  \"mongrel\",\n  \"monitor\",\n  \"monkhood\",\n  \"monogamy\",\n  \"monogram\",\n  \"monologue\",\n  \"monopoly\",\n  \"monorail\",\n  \"monotone\",\n  \"monotype\",\n  \"monoxide\",\n  \"monsieur\",\n  \"monsoon\",\n  \"monstrous\",\n  \"monthly\",\n  \"monument\",\n  \"moocher\",\n  \"moodiness\",\n  \"moody\",\n  \"mooing\",\n  \"moonbeam\",\n  \"mooned\",\n  \"moonlight\",\n  \"moonlike\",\n  \"moonlit\",\n  \"moonrise\",\n  \"moonscape\",\n  \"moonshine\",\n  \"moonstone\",\n  \"moonwalk\",\n  \"mop\",\n  \"morale\",\n  \"morality\",\n  \"morally\",\n  \"morbidity\",\n  \"morbidly\",\n  \"morphine\",\n  \"morphing\",\n  \"morse\",\n  \"mortality\",\n  \"mortally\",\n  \"mortician\",\n  \"mortified\",\n  \"mortify\",\n  \"mortuary\",\n  \"mosaic\",\n  \"mossy\",\n  \"most\",\n  \"mothball\",\n  \"mothproof\",\n  \"motion\",\n  \"motivate\",\n  \"motivator\",\n  \"motive\",\n  \"motocross\",\n  \"motor\",\n  \"motto\",\n  \"mountable\",\n  \"mountain\",\n  \"mounted\",\n  \"mounting\",\n  \"mourner\",\n  \"mournful\",\n  \"mouse\",\n  \"mousiness\",\n  \"moustache\",\n  \"mousy\",\n  \"mouth\",\n  \"movable\",\n  \"move\",\n  \"movie\",\n  \"moving\",\n  \"mower\",\n  \"mowing\",\n  \"much\",\n  \"muck\",\n  \"mud\",\n  \"mug\",\n  \"mulberry\",\n  \"mulch\",\n  \"mule\",\n  \"mulled\",\n  \"mullets\",\n  \"multiple\",\n  \"multiply\",\n  \"multitask\",\n  \"multitude\",\n  \"mumble\",\n  \"mumbling\",\n  \"mumbo\",\n  \"mummified\",\n  \"mummify\",\n  \"mummy\",\n  \"mumps\",\n  \"munchkin\",\n  \"mundane\",\n  \"municipal\",\n  \"muppet\",\n  \"mural\",\n  \"murkiness\",\n  \"murky\",\n  \"murmuring\",\n  \"muscular\",\n  \"museum\",\n  \"mushily\",\n  \"mushiness\",\n  \"mushroom\",\n  \"mushy\",\n  \"music\",\n  \"musket\",\n  \"muskiness\",\n  \"musky\",\n  \"mustang\",\n  \"mustard\",\n  \"muster\",\n  \"mustiness\",\n  \"musty\",\n  \"mutable\",\n  \"mutate\",\n  \"mutation\",\n  \"mute\",\n  \"mutilated\",\n  \"mutilator\",\n  \"mutiny\",\n  \"mutt\",\n  \"mutual\",\n  \"muzzle\",\n  \"myself\",\n  \"myspace\",\n  \"mystified\",\n  \"mystify\",\n  \"myth\",\n  \"nacho\",\n  \"nag\",\n  \"nail\",\n  \"name\",\n  \"naming\",\n  \"nanny\",\n  \"nanometer\",\n  \"nape\",\n  \"napkin\",\n  \"napped\",\n  \"napping\",\n  \"nappy\",\n  \"narrow\",\n  \"nastily\",\n  \"nastiness\",\n  \"national\",\n  \"native\",\n  \"nativity\",\n  \"natural\",\n  \"nature\",\n  \"naturist\",\n  \"nautical\",\n  \"navigate\",\n  \"navigator\",\n  \"navy\",\n  \"nearby\",\n  \"nearest\",\n  \"nearly\",\n  \"nearness\",\n  \"neatly\",\n  \"neatness\",\n  \"nebula\",\n  \"nebulizer\",\n  \"nectar\",\n  \"negate\",\n  \"negation\",\n  \"negative\",\n  \"neglector\",\n  \"negligee\",\n  \"negligent\",\n  \"negotiate\",\n  \"nemeses\",\n  \"nemesis\",\n  \"neon\",\n  \"nephew\",\n  \"nerd\",\n  \"nervous\",\n  \"nervy\",\n  \"nest\",\n  \"net\",\n  \"neurology\",\n  \"neuron\",\n  \"neurosis\",\n  \"neurotic\",\n  \"neuter\",\n  \"neutron\",\n  \"never\",\n  \"next\",\n  \"nibble\",\n  \"nickname\",\n  \"nicotine\",\n  \"niece\",\n  \"nifty\",\n  \"nimble\",\n  \"nimbly\",\n  \"nineteen\",\n  \"ninetieth\",\n  \"ninja\",\n  \"nintendo\",\n  \"ninth\",\n  \"nuclear\",\n  \"nuclei\",\n  \"nucleus\",\n  \"nugget\",\n  \"nullify\",\n  \"number\",\n  \"numbing\",\n  \"numbly\",\n  \"numbness\",\n  \"numeral\",\n  \"numerate\",\n  \"numerator\",\n  \"numeric\",\n  \"numerous\",\n  \"nuptials\",\n  \"nursery\",\n  \"nursing\",\n  \"nurture\",\n  \"nutcase\",\n  \"nutlike\",\n  \"nutmeg\",\n  \"nutrient\",\n  \"nutshell\",\n  \"nuttiness\",\n  \"nutty\",\n  \"nuzzle\",\n  \"nylon\",\n  \"oaf\",\n  \"oak\",\n  \"oasis\",\n  \"oat\",\n  \"obedience\",\n  \"obedient\",\n  \"obituary\",\n  \"object\",\n  \"obligate\",\n  \"obliged\",\n  \"oblivion\",\n  \"oblivious\",\n  \"oblong\",\n  \"obnoxious\",\n  \"oboe\",\n  \"obscure\",\n  \"obscurity\",\n  \"observant\",\n  \"observer\",\n  \"observing\",\n  \"obsessed\",\n  \"obsession\",\n  \"obsessive\",\n  \"obsolete\",\n  \"obstacle\",\n  \"obstinate\",\n  \"obstruct\",\n  \"obtain\",\n  \"obtrusive\",\n  \"obtuse\",\n  \"obvious\",\n  \"occultist\",\n  \"occupancy\",\n  \"occupant\",\n  \"occupier\",\n  \"occupy\",\n  \"ocean\",\n  \"ocelot\",\n  \"octagon\",\n  \"octane\",\n  \"october\",\n  \"octopus\",\n  \"ogle\",\n  \"oil\",\n  \"oink\",\n  \"ointment\",\n  \"okay\",\n  \"old\",\n  \"olive\",\n  \"olympics\",\n  \"omega\",\n  \"omen\",\n  \"ominous\",\n  \"omission\",\n  \"omit\",\n  \"omnivore\",\n  \"onboard\",\n  \"oncoming\",\n  \"ongoing\",\n  \"onion\",\n  \"online\",\n  \"onlooker\",\n  \"only\",\n  \"onscreen\",\n  \"onset\",\n  \"onshore\",\n  \"onslaught\",\n  \"onstage\",\n  \"onto\",\n  \"onward\",\n  \"onyx\",\n  \"oops\",\n  \"ooze\",\n  \"oozy\",\n  \"opacity\",\n  \"opal\",\n  \"open\",\n  \"operable\",\n  \"operate\",\n  \"operating\",\n  \"operation\",\n  \"operative\",\n  \"operator\",\n  \"opium\",\n  \"opossum\",\n  \"opponent\",\n  \"oppose\",\n  \"opposing\",\n  \"opposite\",\n  \"oppressed\",\n  \"oppressor\",\n  \"opt\",\n  \"opulently\",\n  \"osmosis\",\n  \"other\",\n  \"otter\",\n  \"ouch\",\n  \"ought\",\n  \"ounce\",\n  \"outage\",\n  \"outback\",\n  \"outbid\",\n  \"outboard\",\n  \"outbound\",\n  \"outbreak\",\n  \"outburst\",\n  \"outcast\",\n  \"outclass\",\n  \"outcome\",\n  \"outdated\",\n  \"outdoors\",\n  \"outer\",\n  \"outfield\",\n  \"outfit\",\n  \"outflank\",\n  \"outgoing\",\n  \"outgrow\",\n  \"outhouse\",\n  \"outing\",\n  \"outlast\",\n  \"outlet\",\n  \"outline\",\n  \"outlook\",\n  \"outlying\",\n  \"outmatch\",\n  \"outmost\",\n  \"outnumber\",\n  \"outplayed\",\n  \"outpost\",\n  \"outpour\",\n  \"output\",\n  \"outrage\",\n  \"outrank\",\n  \"outreach\",\n  \"outright\",\n  \"outscore\",\n  \"outsell\",\n  \"outshine\",\n  \"outshoot\",\n  \"outsider\",\n  \"outskirts\",\n  \"outsmart\",\n  \"outsource\",\n  \"outspoken\",\n  \"outtakes\",\n  \"outthink\",\n  \"outward\",\n  \"outweigh\",\n  \"outwit\",\n  \"oval\",\n  \"ovary\",\n  \"oven\",\n  \"overact\",\n  \"overall\",\n  \"overarch\",\n  \"overbid\",\n  \"overbill\",\n  \"overbite\",\n  \"overblown\",\n  \"overboard\",\n  \"overbook\",\n  \"overbuilt\",\n  \"overcast\",\n  \"overcoat\",\n  \"overcome\",\n  \"overcook\",\n  \"overcrowd\",\n  \"overdraft\",\n  \"overdrawn\",\n  \"overdress\",\n  \"overdrive\",\n  \"overdue\",\n  \"overeager\",\n  \"overeater\",\n  \"overexert\",\n  \"overfed\",\n  \"overfeed\",\n  \"overfill\",\n  \"overflow\",\n  \"overfull\",\n  \"overgrown\",\n  \"overhand\",\n  \"overhang\",\n  \"overhaul\",\n  \"overhead\",\n  \"overhear\",\n  \"overheat\",\n  \"overhung\",\n  \"overjoyed\",\n  \"overkill\",\n  \"overlabor\",\n  \"overlaid\",\n  \"overlap\",\n  \"overlay\",\n  \"overload\",\n  \"overlook\",\n  \"overlord\",\n  \"overlying\",\n  \"overnight\",\n  \"overpass\",\n  \"overpay\",\n  \"overplant\",\n  \"overplay\",\n  \"overpower\",\n  \"overprice\",\n  \"overrate\",\n  \"overreach\",\n  \"overreact\",\n  \"override\",\n  \"overripe\",\n  \"overrule\",\n  \"overrun\",\n  \"overshoot\",\n  \"overshot\",\n  \"oversight\",\n  \"oversized\",\n  \"oversleep\",\n  \"oversold\",\n  \"overspend\",\n  \"overstate\",\n  \"overstay\",\n  \"overstep\",\n  \"overstock\",\n  \"overstuff\",\n  \"oversweet\",\n  \"overtake\",\n  \"overthrow\",\n  \"overtime\",\n  \"overtly\",\n  \"overtone\",\n  \"overture\",\n  \"overturn\",\n  \"overuse\",\n  \"overvalue\",\n  \"overview\",\n  \"overwrite\",\n  \"owl\",\n  \"oxford\",\n  \"oxidant\",\n  \"oxidation\",\n  \"oxidize\",\n  \"oxidizing\",\n  \"oxygen\",\n  \"oxymoron\",\n  \"oyster\",\n  \"ozone\",\n  \"paced\",\n  \"pacemaker\",\n  \"pacific\",\n  \"pacifier\",\n  \"pacifism\",\n  \"pacifist\",\n  \"pacify\",\n  \"padded\",\n  \"padding\",\n  \"paddle\",\n  \"paddling\",\n  \"padlock\",\n  \"pagan\",\n  \"pager\",\n  \"paging\",\n  \"pajamas\",\n  \"palace\",\n  \"palatable\",\n  \"palm\",\n  \"palpable\",\n  \"palpitate\",\n  \"paltry\",\n  \"pampered\",\n  \"pamperer\",\n  \"pampers\",\n  \"pamphlet\",\n  \"panama\",\n  \"pancake\",\n  \"pancreas\",\n  \"panda\",\n  \"pandemic\",\n  \"pang\",\n  \"panhandle\",\n  \"panic\",\n  \"panning\",\n  \"panorama\",\n  \"panoramic\",\n  \"panther\",\n  \"pantomime\",\n  \"pantry\",\n  \"pants\",\n  \"pantyhose\",\n  \"paparazzi\",\n  \"papaya\",\n  \"paper\",\n  \"paprika\",\n  \"papyrus\",\n  \"parabola\",\n  \"parachute\",\n  \"parade\",\n  \"paradox\",\n  \"paragraph\",\n  \"parakeet\",\n  \"paralegal\",\n  \"paralyses\",\n  \"paralysis\",\n  \"paralyze\",\n  \"paramedic\",\n  \"parameter\",\n  \"paramount\",\n  \"parasail\",\n  \"parasite\",\n  \"parasitic\",\n  \"parcel\",\n  \"parched\",\n  \"parchment\",\n  \"pardon\",\n  \"parish\",\n  \"parka\",\n  \"parking\",\n  \"parkway\",\n  \"parlor\",\n  \"parmesan\",\n  \"parole\",\n  \"parrot\",\n  \"parsley\",\n  \"parsnip\",\n  \"partake\",\n  \"parted\",\n  \"parting\",\n  \"partition\",\n  \"partly\",\n  \"partner\",\n  \"partridge\",\n  \"party\",\n  \"passable\",\n  \"passably\",\n  \"passage\",\n  \"passcode\",\n  \"passenger\",\n  \"passerby\",\n  \"passing\",\n  \"passion\",\n  \"passive\",\n  \"passivism\",\n  \"passover\",\n  \"passport\",\n  \"password\",\n  \"pasta\",\n  \"pasted\",\n  \"pastel\",\n  \"pastime\",\n  \"pastor\",\n  \"pastrami\",\n  \"pasture\",\n  \"pasty\",\n  \"patchwork\",\n  \"patchy\",\n  \"paternal\",\n  \"paternity\",\n  \"path\",\n  \"patience\",\n  \"patient\",\n  \"patio\",\n  \"patriarch\",\n  \"patriot\",\n  \"patrol\",\n  \"patronage\",\n  \"patronize\",\n  \"pauper\",\n  \"pavement\",\n  \"paver\",\n  \"pavestone\",\n  \"pavilion\",\n  \"paving\",\n  \"pawing\",\n  \"payable\",\n  \"payback\",\n  \"paycheck\",\n  \"payday\",\n  \"payee\",\n  \"payer\",\n  \"paying\",\n  \"payment\",\n  \"payphone\",\n  \"payroll\",\n  \"pebble\",\n  \"pebbly\",\n  \"pecan\",\n  \"pectin\",\n  \"peculiar\",\n  \"peddling\",\n  \"pediatric\",\n  \"pedicure\",\n  \"pedigree\",\n  \"pedometer\",\n  \"pegboard\",\n  \"pelican\",\n  \"pellet\",\n  \"pelt\",\n  \"pelvis\",\n  \"penalize\",\n  \"penalty\",\n  \"pencil\",\n  \"pendant\",\n  \"pending\",\n  \"penholder\",\n  \"penknife\",\n  \"pennant\",\n  \"penniless\",\n  \"penny\",\n  \"penpal\",\n  \"pension\",\n  \"pentagon\",\n  \"pentagram\",\n  \"pep\",\n  \"perceive\",\n  \"percent\",\n  \"perch\",\n  \"percolate\",\n  \"perennial\",\n  \"perfected\",\n  \"perfectly\",\n  \"perfume\",\n  \"periscope\",\n  \"perish\",\n  \"perjurer\",\n  \"perjury\",\n  \"perkiness\",\n  \"perky\",\n  \"perm\",\n  \"peroxide\",\n  \"perpetual\",\n  \"perplexed\",\n  \"persecute\",\n  \"persevere\",\n  \"persuaded\",\n  \"persuader\",\n  \"pesky\",\n  \"peso\",\n  \"pessimism\",\n  \"pessimist\",\n  \"pester\",\n  \"pesticide\",\n  \"petal\",\n  \"petite\",\n  \"petition\",\n  \"petri\",\n  \"petroleum\",\n  \"petted\",\n  \"petticoat\",\n  \"pettiness\",\n  \"petty\",\n  \"petunia\",\n  \"phantom\",\n  \"phobia\",\n  \"phoenix\",\n  \"phonebook\",\n  \"phoney\",\n  \"phonics\",\n  \"phoniness\",\n  \"phony\",\n  \"phosphate\",\n  \"photo\",\n  \"phrase\",\n  \"phrasing\",\n  \"placard\",\n  \"placate\",\n  \"placidly\",\n  \"plank\",\n  \"planner\",\n  \"plant\",\n  \"plasma\",\n  \"plaster\",\n  \"plastic\",\n  \"plated\",\n  \"platform\",\n  \"plating\",\n  \"platinum\",\n  \"platonic\",\n  \"platter\",\n  \"platypus\",\n  \"plausible\",\n  \"plausibly\",\n  \"playable\",\n  \"playback\",\n  \"player\",\n  \"playful\",\n  \"playgroup\",\n  \"playhouse\",\n  \"playing\",\n  \"playlist\",\n  \"playmaker\",\n  \"playmate\",\n  \"playoff\",\n  \"playpen\",\n  \"playroom\",\n  \"playset\",\n  \"plaything\",\n  \"playtime\",\n  \"plaza\",\n  \"pleading\",\n  \"pleat\",\n  \"pledge\",\n  \"plentiful\",\n  \"plenty\",\n  \"plethora\",\n  \"plexiglas\",\n  \"pliable\",\n  \"plod\",\n  \"plop\",\n  \"plot\",\n  \"plow\",\n  \"ploy\",\n  \"pluck\",\n  \"plug\",\n  \"plunder\",\n  \"plunging\",\n  \"plural\",\n  \"plus\",\n  \"plutonium\",\n  \"plywood\",\n  \"poach\",\n  \"pod\",\n  \"poem\",\n  \"poet\",\n  \"pogo\",\n  \"pointed\",\n  \"pointer\",\n  \"pointing\",\n  \"pointless\",\n  \"pointy\",\n  \"poise\",\n  \"poison\",\n  \"poker\",\n  \"poking\",\n  \"polar\",\n  \"police\",\n  \"policy\",\n  \"polio\",\n  \"polish\",\n  \"politely\",\n  \"polka\",\n  \"polo\",\n  \"polyester\",\n  \"polygon\",\n  \"polygraph\",\n  \"polymer\",\n  \"poncho\",\n  \"pond\",\n  \"pony\",\n  \"popcorn\",\n  \"pope\",\n  \"poplar\",\n  \"popper\",\n  \"poppy\",\n  \"popsicle\",\n  \"populace\",\n  \"popular\",\n  \"populate\",\n  \"porcupine\",\n  \"pork\",\n  \"porous\",\n  \"porridge\",\n  \"portable\",\n  \"portal\",\n  \"portfolio\",\n  \"porthole\",\n  \"portion\",\n  \"portly\",\n  \"portside\",\n  \"poser\",\n  \"posh\",\n  \"posing\",\n  \"possible\",\n  \"possibly\",\n  \"possum\",\n  \"postage\",\n  \"postal\",\n  \"postbox\",\n  \"postcard\",\n  \"posted\",\n  \"poster\",\n  \"posting\",\n  \"postnasal\",\n  \"posture\",\n  \"postwar\",\n  \"pouch\",\n  \"pounce\",\n  \"pouncing\",\n  \"pound\",\n  \"pouring\",\n  \"pout\",\n  \"powdered\",\n  \"powdering\",\n  \"powdery\",\n  \"power\",\n  \"powwow\",\n  \"pox\",\n  \"praising\",\n  \"prance\",\n  \"prancing\",\n  \"pranker\",\n  \"prankish\",\n  \"prankster\",\n  \"prayer\",\n  \"praying\",\n  \"preacher\",\n  \"preaching\",\n  \"preachy\",\n  \"preamble\",\n  \"precinct\",\n  \"precise\",\n  \"precision\",\n  \"precook\",\n  \"precut\",\n  \"predator\",\n  \"predefine\",\n  \"predict\",\n  \"preface\",\n  \"prefix\",\n  \"preflight\",\n  \"preformed\",\n  \"pregame\",\n  \"pregnancy\",\n  \"pregnant\",\n  \"preheated\",\n  \"prelaunch\",\n  \"prelaw\",\n  \"prelude\",\n  \"premiere\",\n  \"premises\",\n  \"premium\",\n  \"prenatal\",\n  \"preoccupy\",\n  \"preorder\",\n  \"prepaid\",\n  \"prepay\",\n  \"preplan\",\n  \"preppy\",\n  \"preschool\",\n  \"prescribe\",\n  \"preseason\",\n  \"preset\",\n  \"preshow\",\n  \"president\",\n  \"presoak\",\n  \"press\",\n  \"presume\",\n  \"presuming\",\n  \"preteen\",\n  \"pretended\",\n  \"pretender\",\n  \"pretense\",\n  \"pretext\",\n  \"pretty\",\n  \"pretzel\",\n  \"prevail\",\n  \"prevalent\",\n  \"prevent\",\n  \"preview\",\n  \"previous\",\n  \"prewar\",\n  \"prewashed\",\n  \"prideful\",\n  \"pried\",\n  \"primal\",\n  \"primarily\",\n  \"primary\",\n  \"primate\",\n  \"primer\",\n  \"primp\",\n  \"princess\",\n  \"print\",\n  \"prior\",\n  \"prism\",\n  \"prison\",\n  \"prissy\",\n  \"pristine\",\n  \"privacy\",\n  \"private\",\n  \"privatize\",\n  \"prize\",\n  \"proactive\",\n  \"probable\",\n  \"probably\",\n  \"probation\",\n  \"probe\",\n  \"probing\",\n  \"probiotic\",\n  \"problem\",\n  \"procedure\",\n  \"process\",\n  \"proclaim\",\n  \"procreate\",\n  \"procurer\",\n  \"prodigal\",\n  \"prodigy\",\n  \"produce\",\n  \"product\",\n  \"profane\",\n  \"profanity\",\n  \"professed\",\n  \"professor\",\n  \"profile\",\n  \"profound\",\n  \"profusely\",\n  \"progeny\",\n  \"prognosis\",\n  \"program\",\n  \"progress\",\n  \"projector\",\n  \"prologue\",\n  \"prolonged\",\n  \"promenade\",\n  \"prominent\",\n  \"promoter\",\n  \"promotion\",\n  \"prompter\",\n  \"promptly\",\n  \"prone\",\n  \"prong\",\n  \"pronounce\",\n  \"pronto\",\n  \"proofing\",\n  \"proofread\",\n  \"proofs\",\n  \"propeller\",\n  \"properly\",\n  \"property\",\n  \"proponent\",\n  \"proposal\",\n  \"propose\",\n  \"props\",\n  \"prorate\",\n  \"protector\",\n  \"protegee\",\n  \"proton\",\n  \"prototype\",\n  \"protozoan\",\n  \"protract\",\n  \"protrude\",\n  \"proud\",\n  \"provable\",\n  \"proved\",\n  \"proven\",\n  \"provided\",\n  \"provider\",\n  \"providing\",\n  \"province\",\n  \"proving\",\n  \"provoke\",\n  \"provoking\",\n  \"provolone\",\n  \"prowess\",\n  \"prowler\",\n  \"prowling\",\n  \"proximity\",\n  \"proxy\",\n  \"prozac\",\n  \"prude\",\n  \"prudishly\",\n  \"prune\",\n  \"pruning\",\n  \"pry\",\n  \"psychic\",\n  \"public\",\n  \"publisher\",\n  \"pucker\",\n  \"pueblo\",\n  \"pug\",\n  \"pull\",\n  \"pulmonary\",\n  \"pulp\",\n  \"pulsate\",\n  \"pulse\",\n  \"pulverize\",\n  \"puma\",\n  \"pumice\",\n  \"pummel\",\n  \"punch\",\n  \"punctual\",\n  \"punctuate\",\n  \"punctured\",\n  \"pungent\",\n  \"punisher\",\n  \"punk\",\n  \"pupil\",\n  \"puppet\",\n  \"puppy\",\n  \"purchase\",\n  \"pureblood\",\n  \"purebred\",\n  \"purely\",\n  \"pureness\",\n  \"purgatory\",\n  \"purge\",\n  \"purging\",\n  \"purifier\",\n  \"purify\",\n  \"purist\",\n  \"puritan\",\n  \"purity\",\n  \"purple\",\n  \"purplish\",\n  \"purposely\",\n  \"purr\",\n  \"purse\",\n  \"pursuable\",\n  \"pursuant\",\n  \"pursuit\",\n  \"purveyor\",\n  \"pushcart\",\n  \"pushchair\",\n  \"pusher\",\n  \"pushiness\",\n  \"pushing\",\n  \"pushover\",\n  \"pushpin\",\n  \"pushup\",\n  \"pushy\",\n  \"putdown\",\n  \"putt\",\n  \"puzzle\",\n  \"puzzling\",\n  \"pyramid\",\n  \"pyromania\",\n  \"python\",\n  \"quack\",\n  \"quadrant\",\n  \"quail\",\n  \"quaintly\",\n  \"quake\",\n  \"quaking\",\n  \"qualified\",\n  \"qualifier\",\n  \"qualify\",\n  \"quality\",\n  \"qualm\",\n  \"quantum\",\n  \"quarrel\",\n  \"quarry\",\n  \"quartered\",\n  \"quarterly\",\n  \"quarters\",\n  \"quartet\",\n  \"quench\",\n  \"query\",\n  \"quicken\",\n  \"quickly\",\n  \"quickness\",\n  \"quicksand\",\n  \"quickstep\",\n  \"quiet\",\n  \"quill\",\n  \"quilt\",\n  \"quintet\",\n  \"quintuple\",\n  \"quirk\",\n  \"quit\",\n  \"quiver\",\n  \"quizzical\",\n  \"quotable\",\n  \"quotation\",\n  \"quote\",\n  \"rabid\",\n  \"race\",\n  \"racing\",\n  \"racism\",\n  \"rack\",\n  \"racoon\",\n  \"radar\",\n  \"radial\",\n  \"radiance\",\n  \"radiantly\",\n  \"radiated\",\n  \"radiation\",\n  \"radiator\",\n  \"radio\",\n  \"radish\",\n  \"raffle\",\n  \"raft\",\n  \"rage\",\n  \"ragged\",\n  \"raging\",\n  \"ragweed\",\n  \"raider\",\n  \"railcar\",\n  \"railing\",\n  \"railroad\",\n  \"railway\",\n  \"raisin\",\n  \"rake\",\n  \"raking\",\n  \"rally\",\n  \"ramble\",\n  \"rambling\",\n  \"ramp\",\n  \"ramrod\",\n  \"ranch\",\n  \"rancidity\",\n  \"random\",\n  \"ranged\",\n  \"ranger\",\n  \"ranging\",\n  \"ranked\",\n  \"ranking\",\n  \"ransack\",\n  \"ranting\",\n  \"rants\",\n  \"rare\",\n  \"rarity\",\n  \"rascal\",\n  \"rash\",\n  \"rasping\",\n  \"ravage\",\n  \"raven\",\n  \"ravine\",\n  \"raving\",\n  \"ravioli\",\n  \"ravishing\",\n  \"reabsorb\",\n  \"reach\",\n  \"reacquire\",\n  \"reaction\",\n  \"reactive\",\n  \"reactor\",\n  \"reaffirm\",\n  \"ream\",\n  \"reanalyze\",\n  \"reappear\",\n  \"reapply\",\n  \"reappoint\",\n  \"reapprove\",\n  \"rearrange\",\n  \"rearview\",\n  \"reason\",\n  \"reassign\",\n  \"reassure\",\n  \"reattach\",\n  \"reawake\",\n  \"rebalance\",\n  \"rebate\",\n  \"rebel\",\n  \"rebirth\",\n  \"reboot\",\n  \"reborn\",\n  \"rebound\",\n  \"rebuff\",\n  \"rebuild\",\n  \"rebuilt\",\n  \"reburial\",\n  \"rebuttal\",\n  \"recall\",\n  \"recant\",\n  \"recapture\",\n  \"recast\",\n  \"recede\",\n  \"recent\",\n  \"recess\",\n  \"recharger\",\n  \"recipient\",\n  \"recital\",\n  \"recite\",\n  \"reckless\",\n  \"reclaim\",\n  \"recliner\",\n  \"reclining\",\n  \"recluse\",\n  \"reclusive\",\n  \"recognize\",\n  \"recoil\",\n  \"recollect\",\n  \"recolor\",\n  \"reconcile\",\n  \"reconfirm\",\n  \"reconvene\",\n  \"recopy\",\n  \"record\",\n  \"recount\",\n  \"recoup\",\n  \"recovery\",\n  \"recreate\",\n  \"rectal\",\n  \"rectangle\",\n  \"rectified\",\n  \"rectify\",\n  \"recycled\",\n  \"recycler\",\n  \"recycling\",\n  \"reemerge\",\n  \"reenact\",\n  \"reenter\",\n  \"reentry\",\n  \"reexamine\",\n  \"referable\",\n  \"referee\",\n  \"reference\",\n  \"refill\",\n  \"refinance\",\n  \"refined\",\n  \"refinery\",\n  \"refining\",\n  \"refinish\",\n  \"reflected\",\n  \"reflector\",\n  \"reflex\",\n  \"reflux\",\n  \"refocus\",\n  \"refold\",\n  \"reforest\",\n  \"reformat\",\n  \"reformed\",\n  \"reformer\",\n  \"reformist\",\n  \"refract\",\n  \"refrain\",\n  \"refreeze\",\n  \"refresh\",\n  \"refried\",\n  \"refueling\",\n  \"refund\",\n  \"refurbish\",\n  \"refurnish\",\n  \"refusal\",\n  \"refuse\",\n  \"refusing\",\n  \"refutable\",\n  \"refute\",\n  \"regain\",\n  \"regalia\",\n  \"regally\",\n  \"reggae\",\n  \"regime\",\n  \"region\",\n  \"register\",\n  \"registrar\",\n  \"registry\",\n  \"regress\",\n  \"regretful\",\n  \"regroup\",\n  \"regular\",\n  \"regulate\",\n  \"regulator\",\n  \"rehab\",\n  \"reheat\",\n  \"rehire\",\n  \"rehydrate\",\n  \"reimburse\",\n  \"reissue\",\n  \"reiterate\",\n  \"rejoice\",\n  \"rejoicing\",\n  \"rejoin\",\n  \"rekindle\",\n  \"relapse\",\n  \"relapsing\",\n  \"relatable\",\n  \"related\",\n  \"relation\",\n  \"relative\",\n  \"relax\",\n  \"relay\",\n  \"relearn\",\n  \"release\",\n  \"relenting\",\n  \"reliable\",\n  \"reliably\",\n  \"reliance\",\n  \"reliant\",\n  \"relic\",\n  \"relieve\",\n  \"relieving\",\n  \"relight\",\n  \"relish\",\n  \"relive\",\n  \"reload\",\n  \"relocate\",\n  \"relock\",\n  \"reluctant\",\n  \"rely\",\n  \"remake\",\n  \"remark\",\n  \"remarry\",\n  \"rematch\",\n  \"remedial\",\n  \"remedy\",\n  \"remember\",\n  \"reminder\",\n  \"remindful\",\n  \"remission\",\n  \"remix\",\n  \"remnant\",\n  \"remodeler\",\n  \"remold\",\n  \"remorse\",\n  \"remote\",\n  \"removable\",\n  \"removal\",\n  \"removed\",\n  \"remover\",\n  \"removing\",\n  \"rename\",\n  \"renderer\",\n  \"rendering\",\n  \"rendition\",\n  \"renegade\",\n  \"renewable\",\n  \"renewably\",\n  \"renewal\",\n  \"renewed\",\n  \"renounce\",\n  \"renovate\",\n  \"renovator\",\n  \"rentable\",\n  \"rental\",\n  \"rented\",\n  \"renter\",\n  \"reoccupy\",\n  \"reoccur\",\n  \"reopen\",\n  \"reorder\",\n  \"repackage\",\n  \"repacking\",\n  \"repaint\",\n  \"repair\",\n  \"repave\",\n  \"repaying\",\n  \"repayment\",\n  \"repeal\",\n  \"repeated\",\n  \"repeater\",\n  \"repent\",\n  \"rephrase\",\n  \"replace\",\n  \"replay\",\n  \"replica\",\n  \"reply\",\n  \"reporter\",\n  \"repose\",\n  \"repossess\",\n  \"repost\",\n  \"repressed\",\n  \"reprimand\",\n  \"reprint\",\n  \"reprise\",\n  \"reproach\",\n  \"reprocess\",\n  \"reproduce\",\n  \"reprogram\",\n  \"reps\",\n  \"reptile\",\n  \"reptilian\",\n  \"repugnant\",\n  \"repulsion\",\n  \"repulsive\",\n  \"repurpose\",\n  \"reputable\",\n  \"reputably\",\n  \"request\",\n  \"require\",\n  \"requisite\",\n  \"reroute\",\n  \"rerun\",\n  \"resale\",\n  \"resample\",\n  \"rescuer\",\n  \"reseal\",\n  \"research\",\n  \"reselect\",\n  \"reseller\",\n  \"resemble\",\n  \"resend\",\n  \"resent\",\n  \"reset\",\n  \"reshape\",\n  \"reshoot\",\n  \"reshuffle\",\n  \"residence\",\n  \"residency\",\n  \"resident\",\n  \"residual\",\n  \"residue\",\n  \"resigned\",\n  \"resilient\",\n  \"resistant\",\n  \"resisting\",\n  \"resize\",\n  \"resolute\",\n  \"resolved\",\n  \"resonant\",\n  \"resonate\",\n  \"resort\",\n  \"resource\",\n  \"respect\",\n  \"resubmit\",\n  \"result\",\n  \"resume\",\n  \"resupply\",\n  \"resurface\",\n  \"resurrect\",\n  \"retail\",\n  \"retainer\",\n  \"retaining\",\n  \"retake\",\n  \"retaliate\",\n  \"retention\",\n  \"rethink\",\n  \"retinal\",\n  \"retired\",\n  \"retiree\",\n  \"retiring\",\n  \"retold\",\n  \"retool\",\n  \"retorted\",\n  \"retouch\",\n  \"retrace\",\n  \"retract\",\n  \"retrain\",\n  \"retread\",\n  \"retreat\",\n  \"retrial\",\n  \"retrieval\",\n  \"retriever\",\n  \"retry\",\n  \"return\",\n  \"retying\",\n  \"retype\",\n  \"reunion\",\n  \"reunite\",\n  \"reusable\",\n  \"reuse\",\n  \"reveal\",\n  \"reveler\",\n  \"revenge\",\n  \"revenue\",\n  \"reverb\",\n  \"revered\",\n  \"reverence\",\n  \"reverend\",\n  \"reversal\",\n  \"reverse\",\n  \"reversing\",\n  \"reversion\",\n  \"revert\",\n  \"revisable\",\n  \"revise\",\n  \"revision\",\n  \"revisit\",\n  \"revivable\",\n  \"revival\",\n  \"reviver\",\n  \"reviving\",\n  \"revocable\",\n  \"revoke\",\n  \"revolt\",\n  \"revolver\",\n  \"revolving\",\n  \"reward\",\n  \"rewash\",\n  \"rewind\",\n  \"rewire\",\n  \"reword\",\n  \"rework\",\n  \"rewrap\",\n  \"rewrite\",\n  \"rhyme\",\n  \"ribbon\",\n  \"ribcage\",\n  \"rice\",\n  \"riches\",\n  \"richly\",\n  \"richness\",\n  \"rickety\",\n  \"ricotta\",\n  \"riddance\",\n  \"ridden\",\n  \"ride\",\n  \"riding\",\n  \"rifling\",\n  \"rift\",\n  \"rigging\",\n  \"rigid\",\n  \"rigor\",\n  \"rimless\",\n  \"rimmed\",\n  \"rind\",\n  \"rink\",\n  \"rinse\",\n  \"rinsing\",\n  \"riot\",\n  \"ripcord\",\n  \"ripeness\",\n  \"ripening\",\n  \"ripping\",\n  \"ripple\",\n  \"rippling\",\n  \"riptide\",\n  \"rise\",\n  \"rising\",\n  \"risk\",\n  \"risotto\",\n  \"ritalin\",\n  \"ritzy\",\n  \"rival\",\n  \"riverbank\",\n  \"riverbed\",\n  \"riverboat\",\n  \"riverside\",\n  \"riveter\",\n  \"riveting\",\n  \"roamer\",\n  \"roaming\",\n  \"roast\",\n  \"robbing\",\n  \"robe\",\n  \"robin\",\n  \"robotics\",\n  \"robust\",\n  \"rockband\",\n  \"rocker\",\n  \"rocket\",\n  \"rockfish\",\n  \"rockiness\",\n  \"rocking\",\n  \"rocklike\",\n  \"rockslide\",\n  \"rockstar\",\n  \"rocky\",\n  \"rogue\",\n  \"roman\",\n  \"romp\",\n  \"rope\",\n  \"roping\",\n  \"roster\",\n  \"rosy\",\n  \"rotten\",\n  \"rotting\",\n  \"rotunda\",\n  \"roulette\",\n  \"rounding\",\n  \"roundish\",\n  \"roundness\",\n  \"roundup\",\n  \"roundworm\",\n  \"routine\",\n  \"routing\",\n  \"rover\",\n  \"roving\",\n  \"royal\",\n  \"rubbed\",\n  \"rubber\",\n  \"rubbing\",\n  \"rubble\",\n  \"rubdown\",\n  \"ruby\",\n  \"ruckus\",\n  \"rudder\",\n  \"rug\",\n  \"ruined\",\n  \"rule\",\n  \"rumble\",\n  \"rumbling\",\n  \"rummage\",\n  \"rumor\",\n  \"runaround\",\n  \"rundown\",\n  \"runner\",\n  \"running\",\n  \"runny\",\n  \"runt\",\n  \"runway\",\n  \"rupture\",\n  \"rural\",\n  \"ruse\",\n  \"rush\",\n  \"rust\",\n  \"rut\",\n  \"sabbath\",\n  \"sabotage\",\n  \"sacrament\",\n  \"sacred\",\n  \"sacrifice\",\n  \"sadden\",\n  \"saddlebag\",\n  \"saddled\",\n  \"saddling\",\n  \"sadly\",\n  \"sadness\",\n  \"safari\",\n  \"safeguard\",\n  \"safehouse\",\n  \"safely\",\n  \"safeness\",\n  \"saffron\",\n  \"saga\",\n  \"sage\",\n  \"sagging\",\n  \"saggy\",\n  \"said\",\n  \"saint\",\n  \"sake\",\n  \"salad\",\n  \"salami\",\n  \"salaried\",\n  \"salary\",\n  \"saline\",\n  \"salon\",\n  \"saloon\",\n  \"salsa\",\n  \"salt\",\n  \"salutary\",\n  \"salute\",\n  \"salvage\",\n  \"salvaging\",\n  \"salvation\",\n  \"same\",\n  \"sample\",\n  \"sampling\",\n  \"sanction\",\n  \"sanctity\",\n  \"sanctuary\",\n  \"sandal\",\n  \"sandbag\",\n  \"sandbank\",\n  \"sandbar\",\n  \"sandblast\",\n  \"sandbox\",\n  \"sanded\",\n  \"sandfish\",\n  \"sanding\",\n  \"sandlot\",\n  \"sandpaper\",\n  \"sandpit\",\n  \"sandstone\",\n  \"sandstorm\",\n  \"sandworm\",\n  \"sandy\",\n  \"sanitary\",\n  \"sanitizer\",\n  \"sank\",\n  \"santa\",\n  \"sapling\",\n  \"sappiness\",\n  \"sappy\",\n  \"sarcasm\",\n  \"sarcastic\",\n  \"sardine\",\n  \"sash\",\n  \"sasquatch\",\n  \"sassy\",\n  \"satchel\",\n  \"satiable\",\n  \"satin\",\n  \"satirical\",\n  \"satisfied\",\n  \"satisfy\",\n  \"saturate\",\n  \"saturday\",\n  \"sauciness\",\n  \"saucy\",\n  \"sauna\",\n  \"savage\",\n  \"savanna\",\n  \"saved\",\n  \"savings\",\n  \"savior\",\n  \"savor\",\n  \"saxophone\",\n  \"say\",\n  \"scabbed\",\n  \"scabby\",\n  \"scalded\",\n  \"scalding\",\n  \"scale\",\n  \"scaling\",\n  \"scallion\",\n  \"scallop\",\n  \"scalping\",\n  \"scam\",\n  \"scandal\",\n  \"scanner\",\n  \"scanning\",\n  \"scant\",\n  \"scapegoat\",\n  \"scarce\",\n  \"scarcity\",\n  \"scarecrow\",\n  \"scared\",\n  \"scarf\",\n  \"scarily\",\n  \"scariness\",\n  \"scarring\",\n  \"scary\",\n  \"scavenger\",\n  \"scenic\",\n  \"schedule\",\n  \"schematic\",\n  \"scheme\",\n  \"scheming\",\n  \"schilling\",\n  \"schnapps\",\n  \"scholar\",\n  \"science\",\n  \"scientist\",\n  \"scion\",\n  \"scoff\",\n  \"scolding\",\n  \"scone\",\n  \"scoop\",\n  \"scooter\",\n  \"scope\",\n  \"scorch\",\n  \"scorebook\",\n  \"scorecard\",\n  \"scored\",\n  \"scoreless\",\n  \"scorer\",\n  \"scoring\",\n  \"scorn\",\n  \"scorpion\",\n  \"scotch\",\n  \"scoundrel\",\n  \"scoured\",\n  \"scouring\",\n  \"scouting\",\n  \"scouts\",\n  \"scowling\",\n  \"scrabble\",\n  \"scraggly\",\n  \"scrambled\",\n  \"scrambler\",\n  \"scrap\",\n  \"scratch\",\n  \"scrawny\",\n  \"screen\",\n  \"scribble\",\n  \"scribe\",\n  \"scribing\",\n  \"scrimmage\",\n  \"script\",\n  \"scroll\",\n  \"scrooge\",\n  \"scrounger\",\n  \"scrubbed\",\n  \"scrubber\",\n  \"scruffy\",\n  \"scrunch\",\n  \"scrutiny\",\n  \"scuba\",\n  \"scuff\",\n  \"sculptor\",\n  \"sculpture\",\n  \"scurvy\",\n  \"scuttle\",\n  \"secluded\",\n  \"secluding\",\n  \"seclusion\",\n  \"second\",\n  \"secrecy\",\n  \"secret\",\n  \"sectional\",\n  \"sector\",\n  \"secular\",\n  \"securely\",\n  \"security\",\n  \"sedan\",\n  \"sedate\",\n  \"sedation\",\n  \"sedative\",\n  \"sediment\",\n  \"seduce\",\n  \"seducing\",\n  \"segment\",\n  \"seismic\",\n  \"seizing\",\n  \"seldom\",\n  \"selected\",\n  \"selection\",\n  \"selective\",\n  \"selector\",\n  \"self\",\n  \"seltzer\",\n  \"semantic\",\n  \"semester\",\n  \"semicolon\",\n  \"semifinal\",\n  \"seminar\",\n  \"semisoft\",\n  \"semisweet\",\n  \"senate\",\n  \"senator\",\n  \"send\",\n  \"senior\",\n  \"senorita\",\n  \"sensation\",\n  \"sensitive\",\n  \"sensitize\",\n  \"sensually\",\n  \"sensuous\",\n  \"sepia\",\n  \"september\",\n  \"septic\",\n  \"septum\",\n  \"sequel\",\n  \"sequence\",\n  \"sequester\",\n  \"series\",\n  \"sermon\",\n  \"serotonin\",\n  \"serpent\",\n  \"serrated\",\n  \"serve\",\n  \"service\",\n  \"serving\",\n  \"sesame\",\n  \"sessions\",\n  \"setback\",\n  \"setting\",\n  \"settle\",\n  \"settling\",\n  \"setup\",\n  \"sevenfold\",\n  \"seventeen\",\n  \"seventh\",\n  \"seventy\",\n  \"severity\",\n  \"shabby\",\n  \"shack\",\n  \"shaded\",\n  \"shadily\",\n  \"shadiness\",\n  \"shading\",\n  \"shadow\",\n  \"shady\",\n  \"shaft\",\n  \"shakable\",\n  \"shakily\",\n  \"shakiness\",\n  \"shaking\",\n  \"shaky\",\n  \"shale\",\n  \"shallot\",\n  \"shallow\",\n  \"shame\",\n  \"shampoo\",\n  \"shamrock\",\n  \"shank\",\n  \"shanty\",\n  \"shape\",\n  \"shaping\",\n  \"share\",\n  \"sharpener\",\n  \"sharper\",\n  \"sharpie\",\n  \"sharply\",\n  \"sharpness\",\n  \"shawl\",\n  \"sheath\",\n  \"shed\",\n  \"sheep\",\n  \"sheet\",\n  \"shelf\",\n  \"shell\",\n  \"shelter\",\n  \"shelve\",\n  \"shelving\",\n  \"sherry\",\n  \"shield\",\n  \"shifter\",\n  \"shifting\",\n  \"shiftless\",\n  \"shifty\",\n  \"shimmer\",\n  \"shimmy\",\n  \"shindig\",\n  \"shine\",\n  \"shingle\",\n  \"shininess\",\n  \"shining\",\n  \"shiny\",\n  \"ship\",\n  \"shirt\",\n  \"shivering\",\n  \"shock\",\n  \"shone\",\n  \"shoplift\",\n  \"shopper\",\n  \"shopping\",\n  \"shoptalk\",\n  \"shore\",\n  \"shortage\",\n  \"shortcake\",\n  \"shortcut\",\n  \"shorten\",\n  \"shorter\",\n  \"shorthand\",\n  \"shortlist\",\n  \"shortly\",\n  \"shortness\",\n  \"shorts\",\n  \"shortwave\",\n  \"shorty\",\n  \"shout\",\n  \"shove\",\n  \"showbiz\",\n  \"showcase\",\n  \"showdown\",\n  \"shower\",\n  \"showgirl\",\n  \"showing\",\n  \"showman\",\n  \"shown\",\n  \"showoff\",\n  \"showpiece\",\n  \"showplace\",\n  \"showroom\",\n  \"showy\",\n  \"shrank\",\n  \"shrapnel\",\n  \"shredder\",\n  \"shredding\",\n  \"shrewdly\",\n  \"shriek\",\n  \"shrill\",\n  \"shrimp\",\n  \"shrine\",\n  \"shrink\",\n  \"shrivel\",\n  \"shrouded\",\n  \"shrubbery\",\n  \"shrubs\",\n  \"shrug\",\n  \"shrunk\",\n  \"shucking\",\n  \"shudder\",\n  \"shuffle\",\n  \"shuffling\",\n  \"shun\",\n  \"shush\",\n  \"shut\",\n  \"shy\",\n  \"siamese\",\n  \"siberian\",\n  \"sibling\",\n  \"siding\",\n  \"sierra\",\n  \"siesta\",\n  \"sift\",\n  \"sighing\",\n  \"silenced\",\n  \"silencer\",\n  \"silent\",\n  \"silica\",\n  \"silicon\",\n  \"silk\",\n  \"silliness\",\n  \"silly\",\n  \"silo\",\n  \"silt\",\n  \"silver\",\n  \"similarly\",\n  \"simile\",\n  \"simmering\",\n  \"simple\",\n  \"simplify\",\n  \"simply\",\n  \"sincere\",\n  \"sincerity\",\n  \"singer\",\n  \"singing\",\n  \"single\",\n  \"singular\",\n  \"sinister\",\n  \"sinless\",\n  \"sinner\",\n  \"sinuous\",\n  \"sip\",\n  \"siren\",\n  \"sister\",\n  \"sitcom\",\n  \"sitter\",\n  \"sitting\",\n  \"situated\",\n  \"situation\",\n  \"sixfold\",\n  \"sixteen\",\n  \"sixth\",\n  \"sixties\",\n  \"sixtieth\",\n  \"sixtyfold\",\n  \"sizable\",\n  \"sizably\",\n  \"size\",\n  \"sizing\",\n  \"sizzle\",\n  \"sizzling\",\n  \"skater\",\n  \"skating\",\n  \"skedaddle\",\n  \"skeletal\",\n  \"skeleton\",\n  \"skeptic\",\n  \"sketch\",\n  \"skewed\",\n  \"skewer\",\n  \"skid\",\n  \"skied\",\n  \"skier\",\n  \"skies\",\n  \"skiing\",\n  \"skilled\",\n  \"skillet\",\n  \"skillful\",\n  \"skimmed\",\n  \"skimmer\",\n  \"skimming\",\n  \"skimpily\",\n  \"skincare\",\n  \"skinhead\",\n  \"skinless\",\n  \"skinning\",\n  \"skinny\",\n  \"skintight\",\n  \"skipper\",\n  \"skipping\",\n  \"skirmish\",\n  \"skirt\",\n  \"skittle\",\n  \"skydiver\",\n  \"skylight\",\n  \"skyline\",\n  \"skype\",\n  \"skyrocket\",\n  \"skyward\",\n  \"slab\",\n  \"slacked\",\n  \"slacker\",\n  \"slacking\",\n  \"slackness\",\n  \"slacks\",\n  \"slain\",\n  \"slam\",\n  \"slander\",\n  \"slang\",\n  \"slapping\",\n  \"slapstick\",\n  \"slashed\",\n  \"slashing\",\n  \"slate\",\n  \"slather\",\n  \"slaw\",\n  \"sled\",\n  \"sleek\",\n  \"sleep\",\n  \"sleet\",\n  \"sleeve\",\n  \"slept\",\n  \"sliceable\",\n  \"sliced\",\n  \"slicer\",\n  \"slicing\",\n  \"slick\",\n  \"slider\",\n  \"slideshow\",\n  \"sliding\",\n  \"slighted\",\n  \"slighting\",\n  \"slightly\",\n  \"slimness\",\n  \"slimy\",\n  \"slinging\",\n  \"slingshot\",\n  \"slinky\",\n  \"slip\",\n  \"slit\",\n  \"sliver\",\n  \"slobbery\",\n  \"slogan\",\n  \"sloped\",\n  \"sloping\",\n  \"sloppily\",\n  \"sloppy\",\n  \"slot\",\n  \"slouching\",\n  \"slouchy\",\n  \"sludge\",\n  \"slug\",\n  \"slum\",\n  \"slurp\",\n  \"slush\",\n  \"sly\",\n  \"small\",\n  \"smartly\",\n  \"smartness\",\n  \"smasher\",\n  \"smashing\",\n  \"smashup\",\n  \"smell\",\n  \"smelting\",\n  \"smile\",\n  \"smilingly\",\n  \"smirk\",\n  \"smite\",\n  \"smith\",\n  \"smitten\",\n  \"smock\",\n  \"smog\",\n  \"smoked\",\n  \"smokeless\",\n  \"smokiness\",\n  \"smoking\",\n  \"smoky\",\n  \"smolder\",\n  \"smooth\",\n  \"smother\",\n  \"smudge\",\n  \"smudgy\",\n  \"smuggler\",\n  \"smuggling\",\n  \"smugly\",\n  \"smugness\",\n  \"snack\",\n  \"snagged\",\n  \"snaking\",\n  \"snap\",\n  \"snare\",\n  \"snarl\",\n  \"snazzy\",\n  \"sneak\",\n  \"sneer\",\n  \"sneeze\",\n  \"sneezing\",\n  \"snide\",\n  \"sniff\",\n  \"snippet\",\n  \"snipping\",\n  \"snitch\",\n  \"snooper\",\n  \"snooze\",\n  \"snore\",\n  \"snoring\",\n  \"snorkel\",\n  \"snort\",\n  \"snout\",\n  \"snowbird\",\n  \"snowboard\",\n  \"snowbound\",\n  \"snowcap\",\n  \"snowdrift\",\n  \"snowdrop\",\n  \"snowfall\",\n  \"snowfield\",\n  \"snowflake\",\n  \"snowiness\",\n  \"snowless\",\n  \"snowman\",\n  \"snowplow\",\n  \"snowshoe\",\n  \"snowstorm\",\n  \"snowsuit\",\n  \"snowy\",\n  \"snub\",\n  \"snuff\",\n  \"snuggle\",\n  \"snugly\",\n  \"snugness\",\n  \"speak\",\n  \"spearfish\",\n  \"spearhead\",\n  \"spearman\",\n  \"spearmint\",\n  \"species\",\n  \"specimen\",\n  \"specked\",\n  \"speckled\",\n  \"specks\",\n  \"spectacle\",\n  \"spectator\",\n  \"spectrum\",\n  \"speculate\",\n  \"speech\",\n  \"speed\",\n  \"spellbind\",\n  \"speller\",\n  \"spelling\",\n  \"spendable\",\n  \"spender\",\n  \"spending\",\n  \"spent\",\n  \"spew\",\n  \"sphere\",\n  \"spherical\",\n  \"sphinx\",\n  \"spider\",\n  \"spied\",\n  \"spiffy\",\n  \"spill\",\n  \"spilt\",\n  \"spinach\",\n  \"spinal\",\n  \"spindle\",\n  \"spinner\",\n  \"spinning\",\n  \"spinout\",\n  \"spinster\",\n  \"spiny\",\n  \"spiral\",\n  \"spirited\",\n  \"spiritism\",\n  \"spirits\",\n  \"spiritual\",\n  \"splashed\",\n  \"splashing\",\n  \"splashy\",\n  \"splatter\",\n  \"spleen\",\n  \"splendid\",\n  \"splendor\",\n  \"splice\",\n  \"splicing\",\n  \"splinter\",\n  \"splotchy\",\n  \"splurge\",\n  \"spoilage\",\n  \"spoiled\",\n  \"spoiler\",\n  \"spoiling\",\n  \"spoils\",\n  \"spoken\",\n  \"spokesman\",\n  \"sponge\",\n  \"spongy\",\n  \"sponsor\",\n  \"spoof\",\n  \"spookily\",\n  \"spooky\",\n  \"spool\",\n  \"spoon\",\n  \"spore\",\n  \"sporting\",\n  \"sports\",\n  \"sporty\",\n  \"spotless\",\n  \"spotlight\",\n  \"spotted\",\n  \"spotter\",\n  \"spotting\",\n  \"spotty\",\n  \"spousal\",\n  \"spouse\",\n  \"spout\",\n  \"sprain\",\n  \"sprang\",\n  \"sprawl\",\n  \"spray\",\n  \"spree\",\n  \"sprig\",\n  \"spring\",\n  \"sprinkled\",\n  \"sprinkler\",\n  \"sprint\",\n  \"sprite\",\n  \"sprout\",\n  \"spruce\",\n  \"sprung\",\n  \"spry\",\n  \"spud\",\n  \"spur\",\n  \"sputter\",\n  \"spyglass\",\n  \"squabble\",\n  \"squad\",\n  \"squall\",\n  \"squander\",\n  \"squash\",\n  \"squatted\",\n  \"squatter\",\n  \"squatting\",\n  \"squeak\",\n  \"squealer\",\n  \"squealing\",\n  \"squeamish\",\n  \"squeegee\",\n  \"squeeze\",\n  \"squeezing\",\n  \"squid\",\n  \"squiggle\",\n  \"squiggly\",\n  \"squint\",\n  \"squire\",\n  \"squirt\",\n  \"squishier\",\n  \"squishy\",\n  \"stability\",\n  \"stabilize\",\n  \"stable\",\n  \"stack\",\n  \"stadium\",\n  \"staff\",\n  \"stage\",\n  \"staging\",\n  \"stagnant\",\n  \"stagnate\",\n  \"stainable\",\n  \"stained\",\n  \"staining\",\n  \"stainless\",\n  \"stalemate\",\n  \"staleness\",\n  \"stalling\",\n  \"stallion\",\n  \"stamina\",\n  \"stammer\",\n  \"stamp\",\n  \"stand\",\n  \"stank\",\n  \"staple\",\n  \"stapling\",\n  \"starboard\",\n  \"starch\",\n  \"stardom\",\n  \"stardust\",\n  \"starfish\",\n  \"stargazer\",\n  \"staring\",\n  \"stark\",\n  \"starless\",\n  \"starlet\",\n  \"starlight\",\n  \"starlit\",\n  \"starring\",\n  \"starry\",\n  \"starship\",\n  \"starter\",\n  \"starting\",\n  \"startle\",\n  \"startling\",\n  \"startup\",\n  \"starved\",\n  \"starving\",\n  \"stash\",\n  \"state\",\n  \"static\",\n  \"statistic\",\n  \"statue\",\n  \"stature\",\n  \"status\",\n  \"statute\",\n  \"statutory\",\n  \"staunch\",\n  \"stays\",\n  \"steadfast\",\n  \"steadier\",\n  \"steadily\",\n  \"steadying\",\n  \"steam\",\n  \"steed\",\n  \"steep\",\n  \"steerable\",\n  \"steering\",\n  \"steersman\",\n  \"stegosaur\",\n  \"stellar\",\n  \"stem\",\n  \"stench\",\n  \"stencil\",\n  \"step\",\n  \"stereo\",\n  \"sterile\",\n  \"sterility\",\n  \"sterilize\",\n  \"sterling\",\n  \"sternness\",\n  \"sternum\",\n  \"stew\",\n  \"stick\",\n  \"stiffen\",\n  \"stiffly\",\n  \"stiffness\",\n  \"stifle\",\n  \"stifling\",\n  \"stillness\",\n  \"stilt\",\n  \"stimulant\",\n  \"stimulate\",\n  \"stimuli\",\n  \"stimulus\",\n  \"stinger\",\n  \"stingily\",\n  \"stinging\",\n  \"stingray\",\n  \"stingy\",\n  \"stinking\",\n  \"stinky\",\n  \"stipend\",\n  \"stipulate\",\n  \"stir\",\n  \"stitch\",\n  \"stock\",\n  \"stoic\",\n  \"stoke\",\n  \"stole\",\n  \"stomp\",\n  \"stonewall\",\n  \"stoneware\",\n  \"stonework\",\n  \"stoning\",\n  \"stony\",\n  \"stood\",\n  \"stooge\",\n  \"stool\",\n  \"stoop\",\n  \"stoplight\",\n  \"stoppable\",\n  \"stoppage\",\n  \"stopped\",\n  \"stopper\",\n  \"stopping\",\n  \"stopwatch\",\n  \"storable\",\n  \"storage\",\n  \"storeroom\",\n  \"storewide\",\n  \"storm\",\n  \"stout\",\n  \"stove\",\n  \"stowaway\",\n  \"stowing\",\n  \"straddle\",\n  \"straggler\",\n  \"strained\",\n  \"strainer\",\n  \"straining\",\n  \"strangely\",\n  \"stranger\",\n  \"strangle\",\n  \"strategic\",\n  \"strategy\",\n  \"stratus\",\n  \"straw\",\n  \"stray\",\n  \"streak\",\n  \"stream\",\n  \"street\",\n  \"strength\",\n  \"strenuous\",\n  \"strep\",\n  \"stress\",\n  \"stretch\",\n  \"strewn\",\n  \"stricken\",\n  \"strict\",\n  \"stride\",\n  \"strife\",\n  \"strike\",\n  \"striking\",\n  \"strive\",\n  \"striving\",\n  \"strobe\",\n  \"strode\",\n  \"stroller\",\n  \"strongbox\",\n  \"strongly\",\n  \"strongman\",\n  \"struck\",\n  \"structure\",\n  \"strudel\",\n  \"struggle\",\n  \"strum\",\n  \"strung\",\n  \"strut\",\n  \"stubbed\",\n  \"stubble\",\n  \"stubbly\",\n  \"stubborn\",\n  \"stucco\",\n  \"stuck\",\n  \"student\",\n  \"studied\",\n  \"studio\",\n  \"study\",\n  \"stuffed\",\n  \"stuffing\",\n  \"stuffy\",\n  \"stumble\",\n  \"stumbling\",\n  \"stump\",\n  \"stung\",\n  \"stunned\",\n  \"stunner\",\n  \"stunning\",\n  \"stunt\",\n  \"stupor\",\n  \"sturdily\",\n  \"sturdy\",\n  \"styling\",\n  \"stylishly\",\n  \"stylist\",\n  \"stylized\",\n  \"stylus\",\n  \"suave\",\n  \"subarctic\",\n  \"subatomic\",\n  \"subdivide\",\n  \"subdued\",\n  \"subduing\",\n  \"subfloor\",\n  \"subgroup\",\n  \"subheader\",\n  \"subject\",\n  \"sublease\",\n  \"sublet\",\n  \"sublevel\",\n  \"sublime\",\n  \"submarine\",\n  \"submerge\",\n  \"submersed\",\n  \"submitter\",\n  \"subpanel\",\n  \"subpar\",\n  \"subplot\",\n  \"subprime\",\n  \"subscribe\",\n  \"subscript\",\n  \"subsector\",\n  \"subside\",\n  \"subsiding\",\n  \"subsidize\",\n  \"subsidy\",\n  \"subsoil\",\n  \"subsonic\",\n  \"substance\",\n  \"subsystem\",\n  \"subtext\",\n  \"subtitle\",\n  \"subtly\",\n  \"subtotal\",\n  \"subtract\",\n  \"subtype\",\n  \"suburb\",\n  \"subway\",\n  \"subwoofer\",\n  \"subzero\",\n  \"succulent\",\n  \"such\",\n  \"suction\",\n  \"sudden\",\n  \"sudoku\",\n  \"suds\",\n  \"sufferer\",\n  \"suffering\",\n  \"suffice\",\n  \"suffix\",\n  \"suffocate\",\n  \"suffrage\",\n  \"sugar\",\n  \"suggest\",\n  \"suing\",\n  \"suitable\",\n  \"suitably\",\n  \"suitcase\",\n  \"suitor\",\n  \"sulfate\",\n  \"sulfide\",\n  \"sulfite\",\n  \"sulfur\",\n  \"sulk\",\n  \"sullen\",\n  \"sulphate\",\n  \"sulphuric\",\n  \"sultry\",\n  \"superbowl\",\n  \"superglue\",\n  \"superhero\",\n  \"superior\",\n  \"superjet\",\n  \"superman\",\n  \"supermom\",\n  \"supernova\",\n  \"supervise\",\n  \"supper\",\n  \"supplier\",\n  \"supply\",\n  \"support\",\n  \"supremacy\",\n  \"supreme\",\n  \"surcharge\",\n  \"surely\",\n  \"sureness\",\n  \"surface\",\n  \"surfacing\",\n  \"surfboard\",\n  \"surfer\",\n  \"surgery\",\n  \"surgical\",\n  \"surging\",\n  \"surname\",\n  \"surpass\",\n  \"surplus\",\n  \"surprise\",\n  \"surreal\",\n  \"surrender\",\n  \"surrogate\",\n  \"surround\",\n  \"survey\",\n  \"survival\",\n  \"survive\",\n  \"surviving\",\n  \"survivor\",\n  \"sushi\",\n  \"suspect\",\n  \"suspend\",\n  \"suspense\",\n  \"sustained\",\n  \"sustainer\",\n  \"swab\",\n  \"swaddling\",\n  \"swagger\",\n  \"swampland\",\n  \"swan\",\n  \"swapping\",\n  \"swarm\",\n  \"sway\",\n  \"swear\",\n  \"sweat\",\n  \"sweep\",\n  \"swell\",\n  \"swept\",\n  \"swerve\",\n  \"swifter\",\n  \"swiftly\",\n  \"swiftness\",\n  \"swimmable\",\n  \"swimmer\",\n  \"swimming\",\n  \"swimsuit\",\n  \"swimwear\",\n  \"swinger\",\n  \"swinging\",\n  \"swipe\",\n  \"swirl\",\n  \"switch\",\n  \"swivel\",\n  \"swizzle\",\n  \"swooned\",\n  \"swoop\",\n  \"swoosh\",\n  \"swore\",\n  \"sworn\",\n  \"swung\",\n  \"sycamore\",\n  \"sympathy\",\n  \"symphonic\",\n  \"symphony\",\n  \"symptom\",\n  \"synapse\",\n  \"syndrome\",\n  \"synergy\",\n  \"synopses\",\n  \"synopsis\",\n  \"synthesis\",\n  \"synthetic\",\n  \"syrup\",\n  \"system\",\n  \"t-shirt\",\n  \"tabasco\",\n  \"tabby\",\n  \"tableful\",\n  \"tables\",\n  \"tablet\",\n  \"tableware\",\n  \"tabloid\",\n  \"tackiness\",\n  \"tacking\",\n  \"tackle\",\n  \"tackling\",\n  \"tacky\",\n  \"taco\",\n  \"tactful\",\n  \"tactical\",\n  \"tactics\",\n  \"tactile\",\n  \"tactless\",\n  \"tadpole\",\n  \"taekwondo\",\n  \"tag\",\n  \"tainted\",\n  \"take\",\n  \"taking\",\n  \"talcum\",\n  \"talisman\",\n  \"tall\",\n  \"talon\",\n  \"tamale\",\n  \"tameness\",\n  \"tamer\",\n  \"tamper\",\n  \"tank\",\n  \"tanned\",\n  \"tannery\",\n  \"tanning\",\n  \"tantrum\",\n  \"tapeless\",\n  \"tapered\",\n  \"tapering\",\n  \"tapestry\",\n  \"tapioca\",\n  \"tapping\",\n  \"taps\",\n  \"tarantula\",\n  \"target\",\n  \"tarmac\",\n  \"tarnish\",\n  \"tarot\",\n  \"tartar\",\n  \"tartly\",\n  \"tartness\",\n  \"task\",\n  \"tassel\",\n  \"taste\",\n  \"tastiness\",\n  \"tasting\",\n  \"tasty\",\n  \"tattered\",\n  \"tattle\",\n  \"tattling\",\n  \"tattoo\",\n  \"taunt\",\n  \"tavern\",\n  \"thank\",\n  \"that\",\n  \"thaw\",\n  \"theater\",\n  \"theatrics\",\n  \"thee\",\n  \"theft\",\n  \"theme\",\n  \"theology\",\n  \"theorize\",\n  \"thermal\",\n  \"thermos\",\n  \"thesaurus\",\n  \"these\",\n  \"thesis\",\n  \"thespian\",\n  \"thicken\",\n  \"thicket\",\n  \"thickness\",\n  \"thieving\",\n  \"thievish\",\n  \"thigh\",\n  \"thimble\",\n  \"thing\",\n  \"think\",\n  \"thinly\",\n  \"thinner\",\n  \"thinness\",\n  \"thinning\",\n  \"thirstily\",\n  \"thirsting\",\n  \"thirsty\",\n  \"thirteen\",\n  \"thirty\",\n  \"thong\",\n  \"thorn\",\n  \"those\",\n  \"thousand\",\n  \"thrash\",\n  \"thread\",\n  \"threaten\",\n  \"threefold\",\n  \"thrift\",\n  \"thrill\",\n  \"thrive\",\n  \"thriving\",\n  \"throat\",\n  \"throbbing\",\n  \"throng\",\n  \"throttle\",\n  \"throwaway\",\n  \"throwback\",\n  \"thrower\",\n  \"throwing\",\n  \"thud\",\n  \"thumb\",\n  \"thumping\",\n  \"thursday\",\n  \"thus\",\n  \"thwarting\",\n  \"thyself\",\n  \"tiara\",\n  \"tibia\",\n  \"tidal\",\n  \"tidbit\",\n  \"tidiness\",\n  \"tidings\",\n  \"tidy\",\n  \"tiger\",\n  \"tighten\",\n  \"tightly\",\n  \"tightness\",\n  \"tightrope\",\n  \"tightwad\",\n  \"tigress\",\n  \"tile\",\n  \"tiling\",\n  \"till\",\n  \"tilt\",\n  \"timid\",\n  \"timing\",\n  \"timothy\",\n  \"tinderbox\",\n  \"tinfoil\",\n  \"tingle\",\n  \"tingling\",\n  \"tingly\",\n  \"tinker\",\n  \"tinkling\",\n  \"tinsel\",\n  \"tinsmith\",\n  \"tint\",\n  \"tinwork\",\n  \"tiny\",\n  \"tipoff\",\n  \"tipped\",\n  \"tipper\",\n  \"tipping\",\n  \"tiptoeing\",\n  \"tiptop\",\n  \"tiring\",\n  \"tissue\",\n  \"trace\",\n  \"tracing\",\n  \"track\",\n  \"traction\",\n  \"tractor\",\n  \"trade\",\n  \"trading\",\n  \"tradition\",\n  \"traffic\",\n  \"tragedy\",\n  \"trailing\",\n  \"trailside\",\n  \"train\",\n  \"traitor\",\n  \"trance\",\n  \"tranquil\",\n  \"transfer\",\n  \"transform\",\n  \"translate\",\n  \"transpire\",\n  \"transport\",\n  \"transpose\",\n  \"trapdoor\",\n  \"trapeze\",\n  \"trapezoid\",\n  \"trapped\",\n  \"trapper\",\n  \"trapping\",\n  \"traps\",\n  \"trash\",\n  \"travel\",\n  \"traverse\",\n  \"travesty\",\n  \"tray\",\n  \"treachery\",\n  \"treading\",\n  \"treadmill\",\n  \"treason\",\n  \"treat\",\n  \"treble\",\n  \"tree\",\n  \"trekker\",\n  \"tremble\",\n  \"trembling\",\n  \"tremor\",\n  \"trench\",\n  \"trend\",\n  \"trespass\",\n  \"triage\",\n  \"trial\",\n  \"triangle\",\n  \"tribesman\",\n  \"tribunal\",\n  \"tribune\",\n  \"tributary\",\n  \"tribute\",\n  \"triceps\",\n  \"trickery\",\n  \"trickily\",\n  \"tricking\",\n  \"trickle\",\n  \"trickster\",\n  \"tricky\",\n  \"tricolor\",\n  \"tricycle\",\n  \"trident\",\n  \"tried\",\n  \"trifle\",\n  \"trifocals\",\n  \"trillion\",\n  \"trilogy\",\n  \"trimester\",\n  \"trimmer\",\n  \"trimming\",\n  \"trimness\",\n  \"trinity\",\n  \"trio\",\n  \"tripod\",\n  \"tripping\",\n  \"triumph\",\n  \"trivial\",\n  \"trodden\",\n  \"trolling\",\n  \"trombone\",\n  \"trophy\",\n  \"tropical\",\n  \"tropics\",\n  \"trouble\",\n  \"troubling\",\n  \"trough\",\n  \"trousers\",\n  \"trout\",\n  \"trowel\",\n  \"truce\",\n  \"truck\",\n  \"truffle\",\n  \"trump\",\n  \"trunks\",\n  \"trustable\",\n  \"trustee\",\n  \"trustful\",\n  \"trusting\",\n  \"trustless\",\n  \"truth\",\n  \"try\",\n  \"tubby\",\n  \"tubeless\",\n  \"tubular\",\n  \"tucking\",\n  \"tuesday\",\n  \"tug\",\n  \"tuition\",\n  \"tulip\",\n  \"tumble\",\n  \"tumbling\",\n  \"tummy\",\n  \"turban\",\n  \"turbine\",\n  \"turbofan\",\n  \"turbojet\",\n  \"turbulent\",\n  \"turf\",\n  \"turkey\",\n  \"turmoil\",\n  \"turret\",\n  \"turtle\",\n  \"tusk\",\n  \"tutor\",\n  \"tutu\",\n  \"tux\",\n  \"tweak\",\n  \"tweed\",\n  \"tweet\",\n  \"tweezers\",\n  \"twelve\",\n  \"twentieth\",\n  \"twenty\",\n  \"twerp\",\n  \"twice\",\n  \"twiddle\",\n  \"twiddling\",\n  \"twig\",\n  \"twilight\",\n  \"twine\",\n  \"twins\",\n  \"twirl\",\n  \"twistable\",\n  \"twisted\",\n  \"twister\",\n  \"twisting\",\n  \"twisty\",\n  \"twitch\",\n  \"twitter\",\n  \"tycoon\",\n  \"tying\",\n  \"tyke\",\n  \"udder\",\n  \"ultimate\",\n  \"ultimatum\",\n  \"ultra\",\n  \"umbilical\",\n  \"umbrella\",\n  \"umpire\",\n  \"unabashed\",\n  \"unable\",\n  \"unadorned\",\n  \"unadvised\",\n  \"unafraid\",\n  \"unaired\",\n  \"unaligned\",\n  \"unaltered\",\n  \"unarmored\",\n  \"unashamed\",\n  \"unaudited\",\n  \"unawake\",\n  \"unaware\",\n  \"unbaked\",\n  \"unbalance\",\n  \"unbeaten\",\n  \"unbend\",\n  \"unbent\",\n  \"unbiased\",\n  \"unbitten\",\n  \"unblended\",\n  \"unblessed\",\n  \"unblock\",\n  \"unbolted\",\n  \"unbounded\",\n  \"unboxed\",\n  \"unbraided\",\n  \"unbridle\",\n  \"unbroken\",\n  \"unbuckled\",\n  \"unbundle\",\n  \"unburned\",\n  \"unbutton\",\n  \"uncanny\",\n  \"uncapped\",\n  \"uncaring\",\n  \"uncertain\",\n  \"unchain\",\n  \"unchanged\",\n  \"uncharted\",\n  \"uncheck\",\n  \"uncivil\",\n  \"unclad\",\n  \"unclaimed\",\n  \"unclamped\",\n  \"unclasp\",\n  \"uncle\",\n  \"unclip\",\n  \"uncloak\",\n  \"unclog\",\n  \"unclothed\",\n  \"uncoated\",\n  \"uncoiled\",\n  \"uncolored\",\n  \"uncombed\",\n  \"uncommon\",\n  \"uncooked\",\n  \"uncork\",\n  \"uncorrupt\",\n  \"uncounted\",\n  \"uncouple\",\n  \"uncouth\",\n  \"uncover\",\n  \"uncross\",\n  \"uncrown\",\n  \"uncrushed\",\n  \"uncured\",\n  \"uncurious\",\n  \"uncurled\",\n  \"uncut\",\n  \"undamaged\",\n  \"undated\",\n  \"undaunted\",\n  \"undead\",\n  \"undecided\",\n  \"undefined\",\n  \"underage\",\n  \"underarm\",\n  \"undercoat\",\n  \"undercook\",\n  \"undercut\",\n  \"underdog\",\n  \"underdone\",\n  \"underfed\",\n  \"underfeed\",\n  \"underfoot\",\n  \"undergo\",\n  \"undergrad\",\n  \"underhand\",\n  \"underline\",\n  \"underling\",\n  \"undermine\",\n  \"undermost\",\n  \"underpaid\",\n  \"underpass\",\n  \"underpay\",\n  \"underrate\",\n  \"undertake\",\n  \"undertone\",\n  \"undertook\",\n  \"undertow\",\n  \"underuse\",\n  \"underwear\",\n  \"underwent\",\n  \"underwire\",\n  \"undesired\",\n  \"undiluted\",\n  \"undivided\",\n  \"undocked\",\n  \"undoing\",\n  \"undone\",\n  \"undrafted\",\n  \"undress\",\n  \"undrilled\",\n  \"undusted\",\n  \"undying\",\n  \"unearned\",\n  \"unearth\",\n  \"unease\",\n  \"uneasily\",\n  \"uneasy\",\n  \"uneatable\",\n  \"uneaten\",\n  \"unedited\",\n  \"unelected\",\n  \"unending\",\n  \"unengaged\",\n  \"unenvied\",\n  \"unequal\",\n  \"unethical\",\n  \"uneven\",\n  \"unexpired\",\n  \"unexposed\",\n  \"unfailing\",\n  \"unfair\",\n  \"unfasten\",\n  \"unfazed\",\n  \"unfeeling\",\n  \"unfiled\",\n  \"unfilled\",\n  \"unfitted\",\n  \"unfitting\",\n  \"unfixable\",\n  \"unfixed\",\n  \"unflawed\",\n  \"unfocused\",\n  \"unfold\",\n  \"unfounded\",\n  \"unframed\",\n  \"unfreeze\",\n  \"unfrosted\",\n  \"unfrozen\",\n  \"unfunded\",\n  \"unglazed\",\n  \"ungloved\",\n  \"unglue\",\n  \"ungodly\",\n  \"ungraded\",\n  \"ungreased\",\n  \"unguarded\",\n  \"unguided\",\n  \"unhappily\",\n  \"unhappy\",\n  \"unharmed\",\n  \"unhealthy\",\n  \"unheard\",\n  \"unhearing\",\n  \"unheated\",\n  \"unhelpful\",\n  \"unhidden\",\n  \"unhinge\",\n  \"unhitched\",\n  \"unholy\",\n  \"unhook\",\n  \"unicorn\",\n  \"unicycle\",\n  \"unified\",\n  \"unifier\",\n  \"uniformed\",\n  \"uniformly\",\n  \"unify\",\n  \"unimpeded\",\n  \"uninjured\",\n  \"uninstall\",\n  \"uninsured\",\n  \"uninvited\",\n  \"union\",\n  \"uniquely\",\n  \"unisexual\",\n  \"unison\",\n  \"unissued\",\n  \"unit\",\n  \"universal\",\n  \"universe\",\n  \"unjustly\",\n  \"unkempt\",\n  \"unkind\",\n  \"unknotted\",\n  \"unknowing\",\n  \"unknown\",\n  \"unlaced\",\n  \"unlatch\",\n  \"unlawful\",\n  \"unleaded\",\n  \"unlearned\",\n  \"unleash\",\n  \"unless\",\n  \"unleveled\",\n  \"unlighted\",\n  \"unlikable\",\n  \"unlimited\",\n  \"unlined\",\n  \"unlinked\",\n  \"unlisted\",\n  \"unlit\",\n  \"unlivable\",\n  \"unloaded\",\n  \"unloader\",\n  \"unlocked\",\n  \"unlocking\",\n  \"unlovable\",\n  \"unloved\",\n  \"unlovely\",\n  \"unloving\",\n  \"unluckily\",\n  \"unlucky\",\n  \"unmade\",\n  \"unmanaged\",\n  \"unmanned\",\n  \"unmapped\",\n  \"unmarked\",\n  \"unmasked\",\n  \"unmasking\",\n  \"unmatched\",\n  \"unmindful\",\n  \"unmixable\",\n  \"unmixed\",\n  \"unmolded\",\n  \"unmoral\",\n  \"unmovable\",\n  \"unmoved\",\n  \"unmoving\",\n  \"unnamable\",\n  \"unnamed\",\n  \"unnatural\",\n  \"unneeded\",\n  \"unnerve\",\n  \"unnerving\",\n  \"unnoticed\",\n  \"unopened\",\n  \"unopposed\",\n  \"unpack\",\n  \"unpadded\",\n  \"unpaid\",\n  \"unpainted\",\n  \"unpaired\",\n  \"unpaved\",\n  \"unpeeled\",\n  \"unpicked\",\n  \"unpiloted\",\n  \"unpinned\",\n  \"unplanned\",\n  \"unplanted\",\n  \"unpleased\",\n  \"unpledged\",\n  \"unplowed\",\n  \"unplug\",\n  \"unpopular\",\n  \"unproven\",\n  \"unquote\",\n  \"unranked\",\n  \"unrated\",\n  \"unraveled\",\n  \"unreached\",\n  \"unread\",\n  \"unreal\",\n  \"unreeling\",\n  \"unrefined\",\n  \"unrelated\",\n  \"unrented\",\n  \"unrest\",\n  \"unretired\",\n  \"unrevised\",\n  \"unrigged\",\n  \"unripe\",\n  \"unrivaled\",\n  \"unroasted\",\n  \"unrobed\",\n  \"unroll\",\n  \"unruffled\",\n  \"unruly\",\n  \"unrushed\",\n  \"unsaddle\",\n  \"unsafe\",\n  \"unsaid\",\n  \"unsalted\",\n  \"unsaved\",\n  \"unsavory\",\n  \"unscathed\",\n  \"unscented\",\n  \"unscrew\",\n  \"unsealed\",\n  \"unseated\",\n  \"unsecured\",\n  \"unseeing\",\n  \"unseemly\",\n  \"unseen\",\n  \"unselect\",\n  \"unselfish\",\n  \"unsent\",\n  \"unsettled\",\n  \"unshackle\",\n  \"unshaken\",\n  \"unshaved\",\n  \"unshaven\",\n  \"unsheathe\",\n  \"unshipped\",\n  \"unsightly\",\n  \"unsigned\",\n  \"unskilled\",\n  \"unsliced\",\n  \"unsmooth\",\n  \"unsnap\",\n  \"unsocial\",\n  \"unsoiled\",\n  \"unsold\",\n  \"unsolved\",\n  \"unsorted\",\n  \"unspoiled\",\n  \"unspoken\",\n  \"unstable\",\n  \"unstaffed\",\n  \"unstamped\",\n  \"unsteady\",\n  \"unsterile\",\n  \"unstirred\",\n  \"unstitch\",\n  \"unstopped\",\n  \"unstuck\",\n  \"unstuffed\",\n  \"unstylish\",\n  \"unsubtle\",\n  \"unsubtly\",\n  \"unsuited\",\n  \"unsure\",\n  \"unsworn\",\n  \"untagged\",\n  \"untainted\",\n  \"untaken\",\n  \"untamed\",\n  \"untangled\",\n  \"untapped\",\n  \"untaxed\",\n  \"unthawed\",\n  \"unthread\",\n  \"untidy\",\n  \"untie\",\n  \"until\",\n  \"untimed\",\n  \"untimely\",\n  \"untitled\",\n  \"untoasted\",\n  \"untold\",\n  \"untouched\",\n  \"untracked\",\n  \"untrained\",\n  \"untreated\",\n  \"untried\",\n  \"untrimmed\",\n  \"untrue\",\n  \"untruth\",\n  \"unturned\",\n  \"untwist\",\n  \"untying\",\n  \"unusable\",\n  \"unused\",\n  \"unusual\",\n  \"unvalued\",\n  \"unvaried\",\n  \"unvarying\",\n  \"unveiled\",\n  \"unveiling\",\n  \"unvented\",\n  \"unviable\",\n  \"unvisited\",\n  \"unvocal\",\n  \"unwanted\",\n  \"unwarlike\",\n  \"unwary\",\n  \"unwashed\",\n  \"unwatched\",\n  \"unweave\",\n  \"unwed\",\n  \"unwelcome\",\n  \"unwell\",\n  \"unwieldy\",\n  \"unwilling\",\n  \"unwind\",\n  \"unwired\",\n  \"unwitting\",\n  \"unwomanly\",\n  \"unworldly\",\n  \"unworn\",\n  \"unworried\",\n  \"unworthy\",\n  \"unwound\",\n  \"unwoven\",\n  \"unwrapped\",\n  \"unwritten\",\n  \"unzip\",\n  \"upbeat\",\n  \"upchuck\",\n  \"upcoming\",\n  \"upcountry\",\n  \"update\",\n  \"upfront\",\n  \"upgrade\",\n  \"upheaval\",\n  \"upheld\",\n  \"uphill\",\n  \"uphold\",\n  \"uplifted\",\n  \"uplifting\",\n  \"upload\",\n  \"upon\",\n  \"upper\",\n  \"upright\",\n  \"uprising\",\n  \"upriver\",\n  \"uproar\",\n  \"uproot\",\n  \"upscale\",\n  \"upside\",\n  \"upstage\",\n  \"upstairs\",\n  \"upstart\",\n  \"upstate\",\n  \"upstream\",\n  \"upstroke\",\n  \"upswing\",\n  \"uptake\",\n  \"uptight\",\n  \"uptown\",\n  \"upturned\",\n  \"upward\",\n  \"upwind\",\n  \"uranium\",\n  \"urban\",\n  \"urchin\",\n  \"urethane\",\n  \"urgency\",\n  \"urgent\",\n  \"urging\",\n  \"urologist\",\n  \"urology\",\n  \"usable\",\n  \"usage\",\n  \"useable\",\n  \"used\",\n  \"uselessly\",\n  \"user\",\n  \"usher\",\n  \"usual\",\n  \"utensil\",\n  \"utility\",\n  \"utilize\",\n  \"utmost\",\n  \"utopia\",\n  \"utter\",\n  \"vacancy\",\n  \"vacant\",\n  \"vacate\",\n  \"vacation\",\n  \"vagabond\",\n  \"vagrancy\",\n  \"vagrantly\",\n  \"vaguely\",\n  \"vagueness\",\n  \"valiant\",\n  \"valid\",\n  \"valium\",\n  \"valley\",\n  \"valuables\",\n  \"value\",\n  \"vanilla\",\n  \"vanish\",\n  \"vanity\",\n  \"vanquish\",\n  \"vantage\",\n  \"vaporizer\",\n  \"variable\",\n  \"variably\",\n  \"varied\",\n  \"variety\",\n  \"various\",\n  \"varmint\",\n  \"varnish\",\n  \"varsity\",\n  \"varying\",\n  \"vascular\",\n  \"vaseline\",\n  \"vastly\",\n  \"vastness\",\n  \"veal\",\n  \"vegan\",\n  \"veggie\",\n  \"vehicular\",\n  \"velcro\",\n  \"velocity\",\n  \"velvet\",\n  \"vendetta\",\n  \"vending\",\n  \"vendor\",\n  \"veneering\",\n  \"vengeful\",\n  \"venomous\",\n  \"ventricle\",\n  \"venture\",\n  \"venue\",\n  \"venus\",\n  \"verbalize\",\n  \"verbally\",\n  \"verbose\",\n  \"verdict\",\n  \"verify\",\n  \"verse\",\n  \"version\",\n  \"versus\",\n  \"vertebrae\",\n  \"vertical\",\n  \"vertigo\",\n  \"very\",\n  \"vessel\",\n  \"vest\",\n  \"veteran\",\n  \"veto\",\n  \"vexingly\",\n  \"viability\",\n  \"viable\",\n  \"vibes\",\n  \"vice\",\n  \"vicinity\",\n  \"victory\",\n  \"video\",\n  \"viewable\",\n  \"viewer\",\n  \"viewing\",\n  \"viewless\",\n  \"viewpoint\",\n  \"vigorous\",\n  \"village\",\n  \"villain\",\n  \"vindicate\",\n  \"vineyard\",\n  \"vintage\",\n  \"violate\",\n  \"violation\",\n  \"violator\",\n  \"violet\",\n  \"violin\",\n  \"viper\",\n  \"viral\",\n  \"virtual\",\n  \"virtuous\",\n  \"virus\",\n  \"visa\",\n  \"viscosity\",\n  \"viscous\",\n  \"viselike\",\n  \"visible\",\n  \"visibly\",\n  \"vision\",\n  \"visiting\",\n  \"visitor\",\n  \"visor\",\n  \"vista\",\n  \"vitality\",\n  \"vitalize\",\n  \"vitally\",\n  \"vitamins\",\n  \"vivacious\",\n  \"vividly\",\n  \"vividness\",\n  \"vixen\",\n  \"vocalist\",\n  \"vocalize\",\n  \"vocally\",\n  \"vocation\",\n  \"voice\",\n  \"voicing\",\n  \"void\",\n  \"volatile\",\n  \"volley\",\n  \"voltage\",\n  \"volumes\",\n  \"voter\",\n  \"voting\",\n  \"voucher\",\n  \"vowed\",\n  \"vowel\",\n  \"voyage\",\n  \"wackiness\",\n  \"wad\",\n  \"wafer\",\n  \"waffle\",\n  \"waged\",\n  \"wager\",\n  \"wages\",\n  \"waggle\",\n  \"wagon\",\n  \"wake\",\n  \"waking\",\n  \"walk\",\n  \"walmart\",\n  \"walnut\",\n  \"walrus\",\n  \"waltz\",\n  \"wand\",\n  \"wannabe\",\n  \"wanted\",\n  \"wanting\",\n  \"wasabi\",\n  \"washable\",\n  \"washbasin\",\n  \"washboard\",\n  \"washbowl\",\n  \"washcloth\",\n  \"washday\",\n  \"washed\",\n  \"washer\",\n  \"washhouse\",\n  \"washing\",\n  \"washout\",\n  \"washroom\",\n  \"washstand\",\n  \"washtub\",\n  \"wasp\",\n  \"wasting\",\n  \"watch\",\n  \"water\",\n  \"waviness\",\n  \"waving\",\n  \"wavy\",\n  \"whacking\",\n  \"whacky\",\n  \"wham\",\n  \"wharf\",\n  \"wheat\",\n  \"whenever\",\n  \"whiff\",\n  \"whimsical\",\n  \"whinny\",\n  \"whiny\",\n  \"whisking\",\n  \"whoever\",\n  \"whole\",\n  \"whomever\",\n  \"whoopee\",\n  \"whooping\",\n  \"whoops\",\n  \"why\",\n  \"wick\",\n  \"widely\",\n  \"widen\",\n  \"widget\",\n  \"widow\",\n  \"width\",\n  \"wieldable\",\n  \"wielder\",\n  \"wife\",\n  \"wifi\",\n  \"wikipedia\",\n  \"wildcard\",\n  \"wildcat\",\n  \"wilder\",\n  \"wildfire\",\n  \"wildfowl\",\n  \"wildland\",\n  \"wildlife\",\n  \"wildly\",\n  \"wildness\",\n  \"willed\",\n  \"willfully\",\n  \"willing\",\n  \"willow\",\n  \"willpower\",\n  \"wilt\",\n  \"wimp\",\n  \"wince\",\n  \"wincing\",\n  \"wind\",\n  \"wing\",\n  \"winking\",\n  \"winner\",\n  \"winnings\",\n  \"winter\",\n  \"wipe\",\n  \"wired\",\n  \"wireless\",\n  \"wiring\",\n  \"wiry\",\n  \"wisdom\",\n  \"wise\",\n  \"wish\",\n  \"wisplike\",\n  \"wispy\",\n  \"wistful\",\n  \"wizard\",\n  \"wobble\",\n  \"wobbling\",\n  \"wobbly\",\n  \"wok\",\n  \"wolf\",\n  \"wolverine\",\n  \"womanhood\",\n  \"womankind\",\n  \"womanless\",\n  \"womanlike\",\n  \"womanly\",\n  \"womb\",\n  \"woof\",\n  \"wooing\",\n  \"wool\",\n  \"woozy\",\n  \"word\",\n  \"work\",\n  \"worried\",\n  \"worrier\",\n  \"worrisome\",\n  \"worry\",\n  \"worsening\",\n  \"worshiper\",\n  \"worst\",\n  \"wound\",\n  \"woven\",\n  \"wow\",\n  \"wrangle\",\n  \"wrath\",\n  \"wreath\",\n  \"wreckage\",\n  \"wrecker\",\n  \"wrecking\",\n  \"wrench\",\n  \"wriggle\",\n  \"wriggly\",\n  \"wrinkle\",\n  \"wrinkly\",\n  \"wrist\",\n  \"writing\",\n  \"written\",\n  \"wrongdoer\",\n  \"wronged\",\n  \"wrongful\",\n  \"wrongly\",\n  \"wrongness\",\n  \"wrought\",\n  \"xbox\",\n  \"xerox\",\n  \"yahoo\",\n  \"yam\",\n  \"yanking\",\n  \"yapping\",\n  \"yard\",\n  \"yarn\",\n  \"yeah\",\n  \"yearbook\",\n  \"yearling\",\n  \"yearly\",\n  \"yearning\",\n  \"yeast\",\n  \"yelling\",\n  \"yelp\",\n  \"yen\",\n  \"yesterday\",\n  \"yiddish\",\n  \"yield\",\n  \"yin\",\n  \"yippee\",\n  \"yo-yo\",\n  \"yodel\",\n  \"yoga\",\n  \"yogurt\",\n  \"yonder\",\n  \"yoyo\",\n  \"yummy\",\n  \"zap\",\n  \"zealous\",\n  \"zebra\",\n  \"zen\",\n  \"zeppelin\",\n  \"zero\",\n  \"zestfully\",\n  \"zesty\",\n  \"zigzagged\",\n  \"zipfile\",\n  \"zipping\",\n  \"zippy\",\n  \"zips\",\n  \"zit\",\n  \"zodiac\",\n  \"zombie\",\n  \"zone\",\n  \"zoning\",\n  \"zookeeper\",\n  \"zoologist\",\n  \"zoology\",\n  \"zoom\",\n];\n","export class GeneratedPasswordHistory {\n  password: string;\n  date: number;\n\n  constructor(password: string, date: number) {\n    this.password = password;\n    this.date = date;\n  }\n}\n","import { PolicyService } from \"../../../admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"../../../admin-console/enums\";\nimport { PasswordGeneratorPolicyOptions } from \"../../../admin-console/models/domain/password-generator-policy-options\";\nimport { CryptoService } from \"../../../platform/abstractions/crypto.service\";\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport { EFFLongWordList } from \"../../../platform/misc/wordlist\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\n\nimport { GeneratedPasswordHistory } from \"./generated-password-history\";\nimport { PasswordGenerationServiceAbstraction } from \"./password-generation.service.abstraction\";\nimport { PasswordGeneratorOptions } from \"./password-generator-options\";\n\nconst DefaultOptions: PasswordGeneratorOptions = {\n  length: 14,\n  ambiguous: false,\n  number: true,\n  minNumber: 1,\n  uppercase: true,\n  minUppercase: 0,\n  lowercase: true,\n  minLowercase: 0,\n  special: false,\n  minSpecial: 1,\n  type: \"password\",\n  numWords: 3,\n  wordSeparator: \"-\",\n  capitalize: false,\n  includeNumber: false,\n};\n\nconst MaxPasswordsInHistory = 100;\n\nexport class PasswordGenerationService implements PasswordGenerationServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private policyService: PolicyService,\n    private stateService: StateService\n  ) {}\n\n  async generatePassword(options: PasswordGeneratorOptions): Promise<string> {\n    // overload defaults with given options\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.type === \"passphrase\") {\n      return this.generatePassphrase(options);\n    }\n\n    // sanitize\n    this.sanitizePasswordLength(o, true);\n\n    const minLength: number = o.minUppercase + o.minLowercase + o.minNumber + o.minSpecial;\n    if (o.length < minLength) {\n      o.length = minLength;\n    }\n\n    const positions: string[] = [];\n    if (o.lowercase && o.minLowercase > 0) {\n      for (let i = 0; i < o.minLowercase; i++) {\n        positions.push(\"l\");\n      }\n    }\n    if (o.uppercase && o.minUppercase > 0) {\n      for (let i = 0; i < o.minUppercase; i++) {\n        positions.push(\"u\");\n      }\n    }\n    if (o.number && o.minNumber > 0) {\n      for (let i = 0; i < o.minNumber; i++) {\n        positions.push(\"n\");\n      }\n    }\n    if (o.special && o.minSpecial > 0) {\n      for (let i = 0; i < o.minSpecial; i++) {\n        positions.push(\"s\");\n      }\n    }\n    while (positions.length < o.length) {\n      positions.push(\"a\");\n    }\n\n    // shuffle\n    await this.shuffleArray(positions);\n\n    // build out the char sets\n    let allCharSet = \"\";\n\n    let lowercaseCharSet = \"abcdefghijkmnopqrstuvwxyz\";\n    if (o.ambiguous) {\n      lowercaseCharSet += \"l\";\n    }\n    if (o.lowercase) {\n      allCharSet += lowercaseCharSet;\n    }\n\n    let uppercaseCharSet = \"ABCDEFGHJKLMNPQRSTUVWXYZ\";\n    if (o.ambiguous) {\n      uppercaseCharSet += \"IO\";\n    }\n    if (o.uppercase) {\n      allCharSet += uppercaseCharSet;\n    }\n\n    let numberCharSet = \"23456789\";\n    if (o.ambiguous) {\n      numberCharSet += \"01\";\n    }\n    if (o.number) {\n      allCharSet += numberCharSet;\n    }\n\n    const specialCharSet = \"!@#$%^&*\";\n    if (o.special) {\n      allCharSet += specialCharSet;\n    }\n\n    let password = \"\";\n    for (let i = 0; i < o.length; i++) {\n      let positionChars: string;\n      switch (positions[i]) {\n        case \"l\":\n          positionChars = lowercaseCharSet;\n          break;\n        case \"u\":\n          positionChars = uppercaseCharSet;\n          break;\n        case \"n\":\n          positionChars = numberCharSet;\n          break;\n        case \"s\":\n          positionChars = specialCharSet;\n          break;\n        case \"a\":\n          positionChars = allCharSet;\n          break;\n        default:\n          break;\n      }\n\n      const randomCharIndex = await this.cryptoService.randomNumber(0, positionChars.length - 1);\n      password += positionChars.charAt(randomCharIndex);\n    }\n\n    return password;\n  }\n\n  async generatePassphrase(options: PasswordGeneratorOptions): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.numWords == null || o.numWords <= 2) {\n      o.numWords = DefaultOptions.numWords;\n    }\n    if (o.wordSeparator == null || o.wordSeparator.length === 0 || o.wordSeparator.length > 1) {\n      o.wordSeparator = \" \";\n    }\n    if (o.capitalize == null) {\n      o.capitalize = false;\n    }\n    if (o.includeNumber == null) {\n      o.includeNumber = false;\n    }\n\n    const listLength = EFFLongWordList.length - 1;\n    const wordList = new Array(o.numWords);\n    for (let i = 0; i < o.numWords; i++) {\n      const wordIndex = await this.cryptoService.randomNumber(0, listLength);\n      if (o.capitalize) {\n        wordList[i] = this.capitalize(EFFLongWordList[wordIndex]);\n      } else {\n        wordList[i] = EFFLongWordList[wordIndex];\n      }\n    }\n\n    if (o.includeNumber) {\n      await this.appendRandomNumberToRandomWord(wordList);\n    }\n    return wordList.join(o.wordSeparator);\n  }\n\n  async getOptions(): Promise<[PasswordGeneratorOptions, PasswordGeneratorPolicyOptions]> {\n    let options = await this.stateService.getPasswordGenerationOptions();\n    if (options == null) {\n      options = Object.assign({}, DefaultOptions);\n    } else {\n      options = Object.assign({}, DefaultOptions, options);\n    }\n    await this.stateService.setPasswordGenerationOptions(options);\n    const enforcedOptions = await this.enforcePasswordGeneratorPoliciesOnOptions(options);\n    options = enforcedOptions[0];\n    return [options, enforcedOptions[1]];\n  }\n\n  async enforcePasswordGeneratorPoliciesOnOptions(\n    options: PasswordGeneratorOptions\n  ): Promise<[PasswordGeneratorOptions, PasswordGeneratorPolicyOptions]> {\n    let enforcedPolicyOptions = await this.getPasswordGeneratorPolicyOptions();\n    if (enforcedPolicyOptions != null) {\n      if (options.length < enforcedPolicyOptions.minLength) {\n        options.length = enforcedPolicyOptions.minLength;\n      }\n\n      if (enforcedPolicyOptions.useUppercase) {\n        options.uppercase = true;\n      }\n\n      if (enforcedPolicyOptions.useLowercase) {\n        options.lowercase = true;\n      }\n\n      if (enforcedPolicyOptions.useNumbers) {\n        options.number = true;\n      }\n\n      if (options.minNumber < enforcedPolicyOptions.numberCount) {\n        options.minNumber = enforcedPolicyOptions.numberCount;\n      }\n\n      if (enforcedPolicyOptions.useSpecial) {\n        options.special = true;\n      }\n\n      if (options.minSpecial < enforcedPolicyOptions.specialCount) {\n        options.minSpecial = enforcedPolicyOptions.specialCount;\n      }\n\n      // Must normalize these fields because the receiving call expects all options to pass the current rules\n      if (options.minSpecial + options.minNumber > options.length) {\n        options.minSpecial = options.length - options.minNumber;\n      }\n\n      if (options.numWords < enforcedPolicyOptions.minNumberWords) {\n        options.numWords = enforcedPolicyOptions.minNumberWords;\n      }\n\n      if (enforcedPolicyOptions.capitalize) {\n        options.capitalize = true;\n      }\n\n      if (enforcedPolicyOptions.includeNumber) {\n        options.includeNumber = true;\n      }\n\n      // Force default type if password/passphrase selected via policy\n      if (\n        enforcedPolicyOptions.defaultType === \"password\" ||\n        enforcedPolicyOptions.defaultType === \"passphrase\"\n      ) {\n        options.type = enforcedPolicyOptions.defaultType;\n      }\n    } else {\n      // UI layer expects an instantiated object to prevent more explicit null checks\n      enforcedPolicyOptions = new PasswordGeneratorPolicyOptions();\n    }\n    return [options, enforcedPolicyOptions];\n  }\n\n  async getPasswordGeneratorPolicyOptions(): Promise<PasswordGeneratorPolicyOptions> {\n    const policies = await this.policyService?.getAll(PolicyType.PasswordGenerator);\n    let enforcedOptions: PasswordGeneratorPolicyOptions = null;\n\n    if (policies == null || policies.length === 0) {\n      return enforcedOptions;\n    }\n\n    policies.forEach((currentPolicy) => {\n      if (!currentPolicy.enabled || currentPolicy.data == null) {\n        return;\n      }\n\n      if (enforcedOptions == null) {\n        enforcedOptions = new PasswordGeneratorPolicyOptions();\n      }\n\n      // Password wins in multi-org collisions\n      if (currentPolicy.data.defaultType != null && enforcedOptions.defaultType !== \"password\") {\n        enforcedOptions.defaultType = currentPolicy.data.defaultType;\n      }\n\n      if (\n        currentPolicy.data.minLength != null &&\n        currentPolicy.data.minLength > enforcedOptions.minLength\n      ) {\n        enforcedOptions.minLength = currentPolicy.data.minLength;\n      }\n\n      if (currentPolicy.data.useUpper) {\n        enforcedOptions.useUppercase = true;\n      }\n\n      if (currentPolicy.data.useLower) {\n        enforcedOptions.useLowercase = true;\n      }\n\n      if (currentPolicy.data.useNumbers) {\n        enforcedOptions.useNumbers = true;\n      }\n\n      if (\n        currentPolicy.data.minNumbers != null &&\n        currentPolicy.data.minNumbers > enforcedOptions.numberCount\n      ) {\n        enforcedOptions.numberCount = currentPolicy.data.minNumbers;\n      }\n\n      if (currentPolicy.data.useSpecial) {\n        enforcedOptions.useSpecial = true;\n      }\n\n      if (\n        currentPolicy.data.minSpecial != null &&\n        currentPolicy.data.minSpecial > enforcedOptions.specialCount\n      ) {\n        enforcedOptions.specialCount = currentPolicy.data.minSpecial;\n      }\n\n      if (\n        currentPolicy.data.minNumberWords != null &&\n        currentPolicy.data.minNumberWords > enforcedOptions.minNumberWords\n      ) {\n        enforcedOptions.minNumberWords = currentPolicy.data.minNumberWords;\n      }\n\n      if (currentPolicy.data.capitalize) {\n        enforcedOptions.capitalize = true;\n      }\n\n      if (currentPolicy.data.includeNumber) {\n        enforcedOptions.includeNumber = true;\n      }\n    });\n\n    return enforcedOptions;\n  }\n\n  async saveOptions(options: PasswordGeneratorOptions) {\n    await this.stateService.setPasswordGenerationOptions(options);\n  }\n\n  async getHistory(): Promise<GeneratedPasswordHistory[]> {\n    const hasKey = await this.cryptoService.hasUserKey();\n    if (!hasKey) {\n      return new Array<GeneratedPasswordHistory>();\n    }\n\n    if ((await this.stateService.getDecryptedPasswordGenerationHistory()) == null) {\n      const encrypted = await this.stateService.getEncryptedPasswordGenerationHistory();\n      const decrypted = await this.decryptHistory(encrypted);\n      await this.stateService.setDecryptedPasswordGenerationHistory(decrypted);\n    }\n\n    const passwordGenerationHistory =\n      await this.stateService.getDecryptedPasswordGenerationHistory();\n    return passwordGenerationHistory != null\n      ? passwordGenerationHistory\n      : new Array<GeneratedPasswordHistory>();\n  }\n\n  async addHistory(password: string): Promise<void> {\n    // Cannot add new history if no key is available\n    const hasKey = await this.cryptoService.hasUserKey();\n    if (!hasKey) {\n      return;\n    }\n\n    const currentHistory = await this.getHistory();\n\n    // Prevent duplicates\n    if (this.matchesPrevious(password, currentHistory)) {\n      return;\n    }\n\n    currentHistory.unshift(new GeneratedPasswordHistory(password, Date.now()));\n\n    // Remove old items.\n    if (currentHistory.length > MaxPasswordsInHistory) {\n      currentHistory.pop();\n    }\n\n    const newHistory = await this.encryptHistory(currentHistory);\n    await this.stateService.setDecryptedPasswordGenerationHistory(currentHistory);\n    return await this.stateService.setEncryptedPasswordGenerationHistory(newHistory);\n  }\n\n  async clear(userId?: string): Promise<void> {\n    await this.stateService.setEncryptedPasswordGenerationHistory(null, { userId: userId });\n    await this.stateService.setDecryptedPasswordGenerationHistory(null, { userId: userId });\n  }\n\n  normalizeOptions(\n    options: PasswordGeneratorOptions,\n    enforcedPolicyOptions: PasswordGeneratorPolicyOptions\n  ) {\n    options.minLowercase = 0;\n    options.minUppercase = 0;\n\n    if (!options.length || options.length < 5) {\n      options.length = 5;\n    } else if (options.length > 128) {\n      options.length = 128;\n    }\n\n    if (options.length < enforcedPolicyOptions.minLength) {\n      options.length = enforcedPolicyOptions.minLength;\n    }\n\n    if (!options.minNumber) {\n      options.minNumber = 0;\n    } else if (options.minNumber > options.length) {\n      options.minNumber = options.length;\n    } else if (options.minNumber > 9) {\n      options.minNumber = 9;\n    }\n\n    if (options.minNumber < enforcedPolicyOptions.numberCount) {\n      options.minNumber = enforcedPolicyOptions.numberCount;\n    }\n\n    if (!options.minSpecial) {\n      options.minSpecial = 0;\n    } else if (options.minSpecial > options.length) {\n      options.minSpecial = options.length;\n    } else if (options.minSpecial > 9) {\n      options.minSpecial = 9;\n    }\n\n    if (options.minSpecial < enforcedPolicyOptions.specialCount) {\n      options.minSpecial = enforcedPolicyOptions.specialCount;\n    }\n\n    if (options.minSpecial + options.minNumber > options.length) {\n      options.minSpecial = options.length - options.minNumber;\n    }\n\n    if (options.numWords == null || options.length < 3) {\n      options.numWords = 3;\n    } else if (options.numWords > 20) {\n      options.numWords = 20;\n    }\n\n    if (options.numWords < enforcedPolicyOptions.minNumberWords) {\n      options.numWords = enforcedPolicyOptions.minNumberWords;\n    }\n\n    if (options.wordSeparator != null && options.wordSeparator.length > 1) {\n      options.wordSeparator = options.wordSeparator[0];\n    }\n\n    this.sanitizePasswordLength(options, false);\n  }\n\n  private capitalize(str: string) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  private async appendRandomNumberToRandomWord(wordList: string[]) {\n    if (wordList == null || wordList.length <= 0) {\n      return;\n    }\n    const index = await this.cryptoService.randomNumber(0, wordList.length - 1);\n    const num = await this.cryptoService.randomNumber(0, 9);\n    wordList[index] = wordList[index] + num;\n  }\n\n  private async encryptHistory(\n    history: GeneratedPasswordHistory[]\n  ): Promise<GeneratedPasswordHistory[]> {\n    if (history == null || history.length === 0) {\n      return Promise.resolve([]);\n    }\n\n    const promises = history.map(async (item) => {\n      const encrypted = await this.cryptoService.encrypt(item.password);\n      return new GeneratedPasswordHistory(encrypted.encryptedString, item.date);\n    });\n\n    return await Promise.all(promises);\n  }\n\n  private async decryptHistory(\n    history: GeneratedPasswordHistory[]\n  ): Promise<GeneratedPasswordHistory[]> {\n    if (history == null || history.length === 0) {\n      return Promise.resolve([]);\n    }\n\n    const promises = history.map(async (item) => {\n      const decrypted = await this.cryptoService.decryptToUtf8(new EncString(item.password));\n      return new GeneratedPasswordHistory(decrypted, item.date);\n    });\n\n    return await Promise.all(promises);\n  }\n\n  private matchesPrevious(password: string, history: GeneratedPasswordHistory[]): boolean {\n    if (history == null || history.length === 0) {\n      return false;\n    }\n\n    return history[history.length - 1].password === password;\n  }\n\n  // ref: https://stackoverflow.com/a/12646864/1090359\n  private async shuffleArray(array: string[]) {\n    for (let i = array.length - 1; i > 0; i--) {\n      const j = await this.cryptoService.randomNumber(0, i);\n      [array[i], array[j]] = [array[j], array[i]];\n    }\n  }\n\n  private sanitizePasswordLength(options: any, forGeneration: boolean) {\n    let minUppercaseCalc = 0;\n    let minLowercaseCalc = 0;\n    let minNumberCalc: number = options.minNumber;\n    let minSpecialCalc: number = options.minSpecial;\n\n    if (options.uppercase && options.minUppercase <= 0) {\n      minUppercaseCalc = 1;\n    } else if (!options.uppercase) {\n      minUppercaseCalc = 0;\n    }\n\n    if (options.lowercase && options.minLowercase <= 0) {\n      minLowercaseCalc = 1;\n    } else if (!options.lowercase) {\n      minLowercaseCalc = 0;\n    }\n\n    if (options.number && options.minNumber <= 0) {\n      minNumberCalc = 1;\n    } else if (!options.number) {\n      minNumberCalc = 0;\n    }\n\n    if (options.special && options.minSpecial <= 0) {\n      minSpecialCalc = 1;\n    } else if (!options.special) {\n      minSpecialCalc = 0;\n    }\n\n    // This should never happen but is a final safety net\n    if (!options.length || options.length < 1) {\n      options.length = 10;\n    }\n\n    const minLength: number = minUppercaseCalc + minLowercaseCalc + minNumberCalc + minSpecialCalc;\n    // Normalize and Generation both require this modification\n    if (options.length < minLength) {\n      options.length = minLength;\n    }\n\n    // Apply other changes if the options object passed in is for generation\n    if (forGeneration) {\n      options.minUppercase = minUppercaseCalc;\n      options.minLowercase = minLowercaseCalc;\n      options.minNumber = minNumberCalc;\n      options.minSpecial = minSpecialCalc;\n    }\n  }\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class AnonAddyForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid AnonAddy API token.\";\n    }\n    if (options.anonaddy?.domain == null || options.anonaddy.domain === \"\") {\n      throw \"Invalid AnonAddy domain.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + options.apiKey,\n        \"Content-Type\": \"application/json\",\n        \"X-Requested-With\": \"XMLHttpRequest\",\n      }),\n    };\n    const url = \"https://app.anonaddy.com/api/v1/aliases\";\n    requestInit.body = JSON.stringify({\n      domain: options.anonaddy.domain,\n      description:\n        (options.website != null ? \"Website: \" + options.website + \". \" : \"\") +\n        \"Generated by Bitwarden.\",\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      return json?.data?.email;\n    }\n    if (response.status === 401) {\n      throw \"Invalid AnonAddy API token.\";\n    }\n    throw \"Unknown AnonAddy error occurred.\";\n  }\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class DuckDuckGoForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid DuckDuckGo API token.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    const url = \"https://quack.duckduckgo.com/api/email/addresses\";\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      if (json.address) {\n        return `${json.address}@duck.com`;\n      }\n    } else if (response.status === 401) {\n      throw \"Invalid DuckDuckGo API token.\";\n    }\n    throw \"Unknown DuckDuckGo error occurred.\";\n  }\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class FastmailForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid Fastmail API token.\";\n    }\n\n    const accountId = await this.getAccountId(apiService, options);\n    if (accountId == null || accountId === \"\") {\n      throw \"Unable to obtain Fastmail masked email account ID.\";\n    }\n\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    const url = \"https://api.fastmail.com/jmap/api/\";\n    requestInit.body = JSON.stringify({\n      using: [\"https://www.fastmail.com/dev/maskedemail\", \"urn:ietf:params:jmap:core\"],\n      methodCalls: [\n        [\n          \"MaskedEmail/set\",\n          {\n            accountId: accountId,\n            create: {\n              \"new-masked-email\": {\n                state: \"enabled\",\n                description: \"\",\n                url: options.website,\n                emailPrefix: options.fastmail.prefix,\n              },\n            },\n          },\n          \"0\",\n        ],\n      ],\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200) {\n      const json = await response.json();\n      if (\n        json.methodResponses != null &&\n        json.methodResponses.length > 0 &&\n        json.methodResponses[0].length > 0\n      ) {\n        if (json.methodResponses[0][0] === \"MaskedEmail/set\") {\n          if (json.methodResponses[0][1]?.created?.[\"new-masked-email\"] != null) {\n            return json.methodResponses[0][1]?.created?.[\"new-masked-email\"]?.email;\n          }\n          if (json.methodResponses[0][1]?.notCreated?.[\"new-masked-email\"] != null) {\n            throw (\n              \"Fastmail error: \" +\n              json.methodResponses[0][1]?.notCreated?.[\"new-masked-email\"]?.description\n            );\n          }\n        } else if (json.methodResponses[0][0] === \"error\") {\n          throw \"Fastmail error: \" + json.methodResponses[0][1]?.description;\n        }\n      }\n    }\n    if (response.status === 401 || response.status === 403) {\n      throw \"Invalid Fastmail API token.\";\n    }\n    throw \"Unknown Fastmail error occurred.\";\n  }\n\n  private async getAccountId(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    const requestInit: RequestInit = {\n      cache: \"no-store\",\n      method: \"GET\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + options.apiKey,\n      }),\n    };\n    const url = \"https://api.fastmail.com/.well-known/jmap\";\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200) {\n      const json = await response.json();\n      if (json.primaryAccounts != null) {\n        return json.primaryAccounts[\"https://www.fastmail.com/dev/maskedemail\"];\n      }\n    }\n    return null;\n  }\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class FirefoxRelayForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid Firefox Relay API token.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Token \" + options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    const url = \"https://relay.firefox.com/api/v1/relayaddresses/\";\n    requestInit.body = JSON.stringify({\n      enabled: true,\n      generated_for: options.website,\n      description:\n        (options.website != null ? options.website + \" - \" : \"\") + \"Generated by Bitwarden.\",\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      return json?.full_address;\n    }\n    if (response.status === 401) {\n      throw \"Invalid Firefox Relay API token.\";\n    }\n    throw \"Unknown Firefox Relay error occurred.\";\n  }\n}\n","export class ForwarderOptions {\n  apiKey: string;\n  website: string;\n  fastmail = new FastmailForwarderOptions();\n  anonaddy = new AnonAddyForwarderOptions();\n  forwardemail = new ForwardEmailForwarderOptions();\n}\n\nexport class FastmailForwarderOptions {\n  prefix: string;\n}\n\nexport class AnonAddyForwarderOptions {\n  domain: string;\n}\n\nexport class ForwardEmailForwarderOptions {\n  domain: string;\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class SimpleLoginForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid SimpleLogin API key.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authentication: options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    let url = \"https://app.simplelogin.io/api/alias/random/new\";\n    if (options.website != null) {\n      url += \"?hostname=\" + options.website;\n    }\n    requestInit.body = JSON.stringify({\n      note:\n        (options.website != null ? \"Website: \" + options.website + \". \" : \"\") +\n        \"Generated by Bitwarden.\",\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      return json.alias;\n    }\n    if (response.status === 401) {\n      throw \"Invalid SimpleLogin API key.\";\n    }\n    const json = await response.json();\n    if (json?.error != null) {\n      throw \"SimpleLogin error:\" + json.error;\n    }\n    throw \"Unknown SimpleLogin error occurred.\";\n  }\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\nimport { Utils } from \"../../../../platform/misc/utils\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class ForwardEmailForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid Forward Email API key.\";\n    }\n    if (options.forwardemail?.domain == null || options.forwardemail.domain === \"\") {\n      throw \"Invalid Forward Email domain.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Basic \" + Utils.fromUtf8ToB64(options.apiKey + \":\"),\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    const url = `https://api.forwardemail.net/v1/domains/${options.forwardemail.domain}/aliases`;\n    requestInit.body = JSON.stringify({\n      labels: options.website,\n      description:\n        (options.website != null ? \"Website: \" + options.website + \". \" : \"\") +\n        \"Generated by Bitwarden.\",\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      return json?.name + \"@\" + (json?.domain?.name || options.forwardemail.domain);\n    }\n    if (response.status === 401) {\n      throw \"Invalid Forward Email API key.\";\n    }\n    const json = await response.json();\n    if (json?.message != null) {\n      throw \"Forward Email error:\\n\" + json.message;\n    }\n    if (json?.error != null) {\n      throw \"Forward Email error:\\n\" + json.error;\n    }\n    throw \"Unknown Forward Email error occurred.\";\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { CryptoService } from \"../../../platform/abstractions/crypto.service\";\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport { EFFLongWordList } from \"../../../platform/misc/wordlist\";\n\nimport {\n  AnonAddyForwarder,\n  DuckDuckGoForwarder,\n  FastmailForwarder,\n  FirefoxRelayForwarder,\n  ForwardEmailForwarder,\n  Forwarder,\n  ForwarderOptions,\n  SimpleLoginForwarder,\n} from \"./email-forwarders\";\nimport { UsernameGenerationServiceAbstraction } from \"./username-generation.service.abstraction\";\n\nconst DefaultOptions = {\n  type: \"word\",\n  wordCapitalize: true,\n  wordIncludeNumber: true,\n  subaddressType: \"random\",\n  catchallType: \"random\",\n  forwardedService: \"\",\n  forwardedAnonAddyDomain: \"anonaddy.me\",\n  forwardedForwardEmailDomain: \"hideaddress.net\",\n};\n\nexport class UsernameGenerationService implements UsernameGenerationServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private stateService: StateService,\n    private apiService: ApiService\n  ) {}\n\n  generateUsername(options: any): Promise<string> {\n    if (options.type === \"catchall\") {\n      return this.generateCatchall(options);\n    } else if (options.type === \"subaddress\") {\n      return this.generateSubaddress(options);\n    } else if (options.type === \"forwarded\") {\n      return this.generateForwarded(options);\n    } else {\n      return this.generateWord(options);\n    }\n  }\n\n  async generateWord(options: any): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.wordCapitalize == null) {\n      o.wordCapitalize = true;\n    }\n    if (o.wordIncludeNumber == null) {\n      o.wordIncludeNumber = true;\n    }\n\n    const wordIndex = await this.cryptoService.randomNumber(0, EFFLongWordList.length - 1);\n    let word = EFFLongWordList[wordIndex];\n    if (o.wordCapitalize) {\n      word = word.charAt(0).toUpperCase() + word.slice(1);\n    }\n    if (o.wordIncludeNumber) {\n      const num = await this.cryptoService.randomNumber(1, 9999);\n      word = word + this.zeroPad(num.toString(), 4);\n    }\n    return word;\n  }\n\n  async generateSubaddress(options: any): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    const subaddressEmail = o.subaddressEmail;\n    if (subaddressEmail == null || subaddressEmail.length < 3) {\n      return o.subaddressEmail;\n    }\n    const atIndex = subaddressEmail.indexOf(\"@\");\n    if (atIndex < 1 || atIndex >= subaddressEmail.length - 1) {\n      return subaddressEmail;\n    }\n    if (o.subaddressType == null) {\n      o.subaddressType = \"random\";\n    }\n\n    const emailBeginning = subaddressEmail.substr(0, atIndex);\n    const emailEnding = subaddressEmail.substr(atIndex + 1, subaddressEmail.length);\n\n    let subaddressString = \"\";\n    if (o.subaddressType === \"random\") {\n      subaddressString = await this.randomString(8);\n    } else if (o.subaddressType === \"website-name\") {\n      subaddressString = o.website;\n    }\n    return emailBeginning + \"+\" + subaddressString + \"@\" + emailEnding;\n  }\n\n  async generateCatchall(options: any): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.catchallDomain == null || o.catchallDomain === \"\") {\n      return null;\n    }\n    if (o.catchallType == null) {\n      o.catchallType = \"random\";\n    }\n\n    let startString = \"\";\n    if (o.catchallType === \"random\") {\n      startString = await this.randomString(8);\n    } else if (o.catchallType === \"website-name\") {\n      startString = o.website;\n    }\n    return startString + \"@\" + o.catchallDomain;\n  }\n\n  async generateForwarded(options: any): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.forwardedService == null) {\n      return null;\n    }\n\n    let forwarder: Forwarder = null;\n    const forwarderOptions = new ForwarderOptions();\n    forwarderOptions.website = o.website;\n    if (o.forwardedService === \"simplelogin\") {\n      forwarder = new SimpleLoginForwarder();\n      forwarderOptions.apiKey = o.forwardedSimpleLoginApiKey;\n    } else if (o.forwardedService === \"anonaddy\") {\n      forwarder = new AnonAddyForwarder();\n      forwarderOptions.apiKey = o.forwardedAnonAddyApiToken;\n      forwarderOptions.anonaddy.domain = o.forwardedAnonAddyDomain;\n    } else if (o.forwardedService === \"firefoxrelay\") {\n      forwarder = new FirefoxRelayForwarder();\n      forwarderOptions.apiKey = o.forwardedFirefoxApiToken;\n    } else if (o.forwardedService === \"fastmail\") {\n      forwarder = new FastmailForwarder();\n      forwarderOptions.apiKey = o.forwardedFastmailApiToken;\n    } else if (o.forwardedService === \"duckduckgo\") {\n      forwarder = new DuckDuckGoForwarder();\n      forwarderOptions.apiKey = o.forwardedDuckDuckGoToken;\n    } else if (o.forwardedService === \"forwardemail\") {\n      forwarder = new ForwardEmailForwarder();\n      forwarderOptions.apiKey = o.forwardedForwardEmailApiToken;\n      forwarderOptions.forwardemail.domain = o.forwardedForwardEmailDomain;\n    }\n\n    if (forwarder == null) {\n      return null;\n    }\n\n    return forwarder.generate(this.apiService, forwarderOptions);\n  }\n\n  async getOptions(): Promise<any> {\n    let options = await this.stateService.getUsernameGenerationOptions();\n    if (options == null) {\n      options = Object.assign({}, DefaultOptions);\n    } else {\n      options = Object.assign({}, DefaultOptions, options);\n    }\n    await this.stateService.setUsernameGenerationOptions(options);\n    return options;\n  }\n\n  async saveOptions(options: any) {\n    await this.stateService.setUsernameGenerationOptions(options);\n  }\n\n  private async randomString(length: number) {\n    let str = \"\";\n    const charSet = \"abcdefghijklmnopqrstuvwxyz1234567890\";\n    for (let i = 0; i < length; i++) {\n      const randomCharIndex = await this.cryptoService.randomNumber(0, charSet.length - 1);\n      str += charSet.charAt(randomCharIndex);\n    }\n    return str;\n  }\n\n  // ref: https://stackoverflow.com/a/10073788\n  private zeroPad(number: string, width: number) {\n    return number.length >= width\n      ? number\n      : new Array(width - number.length + 1).join(\"0\") + number;\n  }\n}\n","export enum SendType {\n  Text = 0,\n  File = 1,\n}\n","import * as zxcvbn from \"zxcvbn\";\n\nimport { PasswordStrengthServiceAbstraction } from \"./password-strength.service.abstraction\";\n\nexport class PasswordStrengthService implements PasswordStrengthServiceAbstraction {\n  /**\n   * Calculates a password strength score using zxcvbn.\n   * @param password The password to calculate the strength of.\n   * @param emailInput An unparsed email address to use as user input.\n   * @param userInputs An array of additional user inputs to use when calculating the strength.\n   */\n  getPasswordStrength(\n    password: string,\n    emailInput: string = null,\n    userInputs: string[] = null\n  ): zxcvbn.ZXCVBNResult {\n    if (password == null || password.length === 0) {\n      return null;\n    }\n    const globalUserInputs = [\n      \"bitwarden\",\n      \"bit\",\n      \"warden\",\n      ...(userInputs ?? []),\n      ...this.emailToUserInputs(emailInput),\n    ];\n    // Use a hash set to get rid of any duplicate user inputs\n    const finalUserInputs = Array.from(new Set(globalUserInputs));\n    const result = zxcvbn(password, finalUserInputs);\n    return result;\n  }\n\n  /**\n   * Convert an email address into a list of user inputs for zxcvbn by\n   * taking the local part of the email address and splitting it into words.\n   * @param email\n   * @private\n   */\n  private emailToUserInputs(email: string): string[] {\n    if (email == null || email.length === 0) {\n      return [];\n    }\n    const atPosition = email.indexOf(\"@\");\n    if (atPosition < 0) {\n      return [];\n    }\n    return email\n      .substring(0, atPosition)\n      .trim()\n      .toLowerCase()\n      .split(/[^A-Za-z0-9]/);\n  }\n}\n","import { SendFileApi } from \"../api/send-file.api\";\n\nexport class SendFileData {\n  id: string;\n  fileName: string;\n  size: string;\n  sizeName: string;\n\n  constructor(data?: SendFileApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.id = data.id;\n    this.fileName = data.fileName;\n    this.size = data.size;\n    this.sizeName = data.sizeName;\n  }\n}\n","import { SendTextApi } from \"../api/send-text.api\";\n\nexport class SendTextData {\n  text: string;\n  hidden: boolean;\n\n  constructor(data?: SendTextApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.text = data.text;\n    this.hidden = data.hidden;\n  }\n}\n","import { SendType } from \"../../enums/send-type\";\nimport { SendResponse } from \"../response/send.response\";\n\nimport { SendFileData } from \"./send-file.data\";\nimport { SendTextData } from \"./send-text.data\";\n\nexport class SendData {\n  id: string;\n  accessId: string;\n  type: SendType;\n  name: string;\n  notes: string;\n  file: SendFileData;\n  text: SendTextData;\n  key: string;\n  maxAccessCount?: number;\n  accessCount: number;\n  revisionDate: string;\n  expirationDate: string;\n  deletionDate: string;\n  password: string;\n  disabled: boolean;\n  hideEmail: boolean;\n\n  constructor(response?: SendResponse) {\n    if (response == null) {\n      return;\n    }\n\n    this.id = response.id;\n    this.accessId = response.accessId;\n    this.type = response.type;\n    this.name = response.name;\n    this.notes = response.notes;\n    this.key = response.key;\n    this.maxAccessCount = response.maxAccessCount;\n    this.accessCount = response.accessCount;\n    this.revisionDate = response.revisionDate;\n    this.expirationDate = response.expirationDate;\n    this.deletionDate = response.deletionDate;\n    this.password = response.password;\n    this.disabled = response.disable;\n    this.hideEmail = response.hideEmail;\n\n    switch (this.type) {\n      case SendType.Text:\n        this.text = new SendTextData(response.text);\n        break;\n      case SendType.File:\n        this.file = new SendFileData(response.file);\n        break;\n      default:\n        break;\n    }\n  }\n}\n","import { SendType } from \"../../enums/send-type\";\nimport { SendFileApi } from \"../api/send-file.api\";\nimport { SendTextApi } from \"../api/send-text.api\";\nimport { Send } from \"../domain/send\";\n\nexport class SendRequest {\n  type: SendType;\n  fileLength?: number;\n  name: string;\n  notes: string;\n  key: string;\n  maxAccessCount?: number;\n  expirationDate: string;\n  deletionDate: string;\n  text: SendTextApi;\n  file: SendFileApi;\n  password: string;\n  disabled: boolean;\n  hideEmail: boolean;\n\n  constructor(send: Send, fileLength?: number) {\n    this.type = send.type;\n    this.fileLength = fileLength;\n    this.name = send.name ? send.name.encryptedString : null;\n    this.notes = send.notes ? send.notes.encryptedString : null;\n    this.maxAccessCount = send.maxAccessCount;\n    this.expirationDate = send.expirationDate != null ? send.expirationDate.toISOString() : null;\n    this.deletionDate = send.deletionDate != null ? send.deletionDate.toISOString() : null;\n    this.key = send.key != null ? send.key.encryptedString : null;\n    this.password = send.password;\n    this.disabled = send.disabled;\n    this.hideEmail = send.hideEmail;\n\n    switch (this.type) {\n      case SendType.Text:\n        this.text = new SendTextApi();\n        this.text.text = send.text.text != null ? send.text.text.encryptedString : null;\n        this.text.hidden = send.text.hidden;\n        break;\n      case SendType.File:\n        this.file = new SendFileApi();\n        this.file.fileName = send.file.fileName != null ? send.file.fileName.encryptedString : null;\n        break;\n      default:\n        break;\n    }\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\nimport { SendType } from \"../../enums/send-type\";\nimport { SendFileApi } from \"../api/send-file.api\";\nimport { SendTextApi } from \"../api/send-text.api\";\n\nexport class SendAccessResponse extends BaseResponse {\n  id: string;\n  type: SendType;\n  name: string;\n  file: SendFileApi;\n  text: SendTextApi;\n  expirationDate: Date;\n  creatorIdentifier: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.name = this.getResponseProperty(\"Name\");\n\n    const text = this.getResponseProperty(\"Text\");\n    if (text != null) {\n      this.text = new SendTextApi(text);\n    }\n\n    const file = this.getResponseProperty(\"File\");\n    if (file != null) {\n      this.file = new SendFileApi(file);\n    }\n\n    this.expirationDate = this.getResponseProperty(\"ExpirationDate\");\n    this.creatorIdentifier = this.getResponseProperty(\"CreatorIdentifier\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class SendFileDownloadDataResponse extends BaseResponse {\n  id: string = null;\n  url: string = null;\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.url = this.getResponseProperty(\"Url\");\n  }\n}\n","import { FileUploadType } from \"../../../../enums\";\nimport { BaseResponse } from \"../../../../models/response/base.response\";\n\nimport { SendResponse } from \"./send.response\";\n\nexport class SendFileUploadDataResponse extends BaseResponse {\n  fileUploadType: FileUploadType;\n  sendResponse: SendResponse;\n  url: string = null;\n  constructor(response: any) {\n    super(response);\n    this.fileUploadType = this.getResponseProperty(\"FileUploadType\");\n    const sendResponse = this.getResponseProperty(\"SendResponse\");\n    this.sendResponse = sendResponse == null ? null : new SendResponse(sendResponse);\n    this.url = this.getResponseProperty(\"Url\");\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { ErrorResponse } from \"../../../models/response/error.response\";\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport {\n  FileUploadApiMethods,\n  FileUploadService,\n} from \"../../../platform/abstractions/file-upload/file-upload.service\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { EncArrayBuffer } from \"../../../platform/models/domain/enc-array-buffer\";\nimport { SendType } from \"../enums/send-type\";\nimport { SendData } from \"../models/data/send.data\";\nimport { Send } from \"../models/domain/send\";\nimport { SendAccessRequest } from \"../models/request/send-access.request\";\nimport { SendRequest } from \"../models/request/send.request\";\nimport { SendAccessResponse } from \"../models/response/send-access.response\";\nimport { SendFileDownloadDataResponse } from \"../models/response/send-file-download-data.response\";\nimport { SendFileUploadDataResponse } from \"../models/response/send-file-upload-data.response\";\nimport { SendResponse } from \"../models/response/send.response\";\nimport { SendAccessView } from \"../models/view/send-access.view\";\n\nimport { SendApiService as SendApiServiceAbstraction } from \"./send-api.service.abstraction\";\nimport { InternalSendService } from \"./send.service.abstraction\";\n\nexport class SendApiService implements SendApiServiceAbstraction {\n  constructor(\n    private apiService: ApiService,\n    private fileUploadService: FileUploadService,\n    private sendService: InternalSendService\n  ) {}\n\n  async getSend(id: string): Promise<SendResponse> {\n    const r = await this.apiService.send(\"GET\", \"/sends/\" + id, null, true, true);\n    return new SendResponse(r);\n  }\n\n  async postSendAccess(\n    id: string,\n    request: SendAccessRequest,\n    apiUrl?: string\n  ): Promise<SendAccessResponse> {\n    const addSendIdHeader = (headers: Headers) => {\n      headers.set(\"Send-Id\", id);\n    };\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/sends/access/\" + id,\n      request,\n      false,\n      true,\n      apiUrl,\n      addSendIdHeader\n    );\n    return new SendAccessResponse(r);\n  }\n\n  async getSendFileDownloadData(\n    send: SendAccessView,\n    request: SendAccessRequest,\n    apiUrl?: string\n  ): Promise<SendFileDownloadDataResponse> {\n    const addSendIdHeader = (headers: Headers) => {\n      headers.set(\"Send-Id\", send.id);\n    };\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/sends/\" + send.id + \"/access/file/\" + send.file.id,\n      request,\n      false,\n      true,\n      apiUrl,\n      addSendIdHeader\n    );\n    return new SendFileDownloadDataResponse(r);\n  }\n\n  async getSends(): Promise<ListResponse<SendResponse>> {\n    const r = await this.apiService.send(\"GET\", \"/sends\", null, true, true);\n    return new ListResponse(r, SendResponse);\n  }\n\n  async postSend(request: SendRequest): Promise<SendResponse> {\n    const r = await this.apiService.send(\"POST\", \"/sends\", request, true, true);\n    return new SendResponse(r);\n  }\n\n  async postFileTypeSend(request: SendRequest): Promise<SendFileUploadDataResponse> {\n    const r = await this.apiService.send(\"POST\", \"/sends/file/v2\", request, true, true);\n    return new SendFileUploadDataResponse(r);\n  }\n\n  async renewSendFileUploadUrl(\n    sendId: string,\n    fileId: string\n  ): Promise<SendFileUploadDataResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/sends/\" + sendId + \"/file/\" + fileId,\n      null,\n      true,\n      true\n    );\n    return new SendFileUploadDataResponse(r);\n  }\n\n  postSendFile(sendId: string, fileId: string, data: FormData): Promise<any> {\n    return this.apiService.send(\"POST\", \"/sends/\" + sendId + \"/file/\" + fileId, data, true, false);\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async postSendFileLegacy(data: FormData): Promise<SendResponse> {\n    const r = await this.apiService.send(\"POST\", \"/sends/file\", data, true, true);\n    return new SendResponse(r);\n  }\n\n  async putSend(id: string, request: SendRequest): Promise<SendResponse> {\n    const r = await this.apiService.send(\"PUT\", \"/sends/\" + id, request, true, true);\n    return new SendResponse(r);\n  }\n\n  async putSendRemovePassword(id: string): Promise<SendResponse> {\n    const r = await this.apiService.send(\n      \"PUT\",\n      \"/sends/\" + id + \"/remove-password\",\n      null,\n      true,\n      true\n    );\n    return new SendResponse(r);\n  }\n\n  deleteSend(id: string): Promise<any> {\n    return this.apiService.send(\"DELETE\", \"/sends/\" + id, null, true, false);\n  }\n\n  async save(sendData: [Send, EncArrayBuffer]): Promise<any> {\n    const response = await this.upload(sendData);\n\n    const data = new SendData(response);\n    await this.sendService.upsert(data);\n  }\n\n  async delete(id: string): Promise<any> {\n    await this.deleteSend(id);\n    await this.sendService.delete(id);\n  }\n\n  async removePassword(id: string): Promise<any> {\n    const response = await this.putSendRemovePassword(id);\n    const data = new SendData(response);\n    await this.sendService.upsert(data);\n  }\n\n  // Send File Upload methods\n\n  private async upload(sendData: [Send, EncArrayBuffer]): Promise<SendResponse> {\n    const request = new SendRequest(sendData[0], sendData[1]?.buffer.byteLength);\n    let response: SendResponse;\n    if (sendData[0].id == null) {\n      if (sendData[0].type === SendType.Text) {\n        response = await this.postSend(request);\n      } else {\n        try {\n          const uploadDataResponse = await this.postFileTypeSend(request);\n          response = uploadDataResponse.sendResponse;\n          await this.fileUploadService.upload(\n            uploadDataResponse,\n            sendData[0].file.fileName,\n            sendData[1],\n            this.generateMethods(uploadDataResponse, response)\n          );\n        } catch (e) {\n          if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) {\n            response = await this.legacyServerSendFileUpload(sendData, request);\n          } else if (e instanceof ErrorResponse) {\n            throw new Error((e as ErrorResponse).getSingleMessage());\n          } else {\n            throw e;\n          }\n        }\n      }\n      sendData[0].id = response.id;\n      sendData[0].accessId = response.accessId;\n    } else {\n      response = await this.putSend(sendData[0].id, request);\n    }\n    return response;\n  }\n\n  private generateMethods(\n    uploadData: SendFileUploadDataResponse,\n    response: SendResponse\n  ): FileUploadApiMethods {\n    return {\n      postDirect: this.generatePostDirectCallback(response),\n      renewFileUploadUrl: this.generateRenewFileUploadUrlCallback(response.id, response.file.id),\n      rollback: this.generateRollbackCallback(response.id),\n    };\n  }\n\n  private generatePostDirectCallback(sendResponse: SendResponse) {\n    return (data: FormData) => {\n      return this.postSendFile(sendResponse.id, sendResponse.file.id, data);\n    };\n  }\n\n  private generateRenewFileUploadUrlCallback(sendId: string, fileId: string) {\n    return async () => {\n      const renewResponse = await this.renewSendFileUploadUrl(sendId, fileId);\n      return renewResponse?.url;\n    };\n  }\n\n  private generateRollbackCallback(sendId: string) {\n    return () => {\n      return this.deleteSend(sendId);\n    };\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async legacyServerSendFileUpload(\n    sendData: [Send, EncArrayBuffer],\n    request: SendRequest\n  ): Promise<SendResponse> {\n    const fd = new FormData();\n    try {\n      const blob = new Blob([sendData[1].buffer], { type: \"application/octet-stream\" });\n      fd.append(\"model\", JSON.stringify(request));\n      fd.append(\"data\", blob, sendData[0].file.fileName.encryptedString);\n    } catch (e) {\n      if (Utils.isNode && !Utils.isBrowser) {\n        fd.append(\"model\", JSON.stringify(request));\n        fd.append(\n          \"data\",\n          Buffer.from(sendData[1].buffer) as any,\n          {\n            filepath: sendData[0].file.fileName.encryptedString,\n            contentType: \"application/octet-stream\",\n          } as any\n        );\n      } else {\n        throw e;\n      }\n    }\n    return await this.postSendFileLegacy(fd);\n  }\n}\n","/**\n * Use as a Decorator on async functions, it will prevent multiple 'active' calls as the same time\n *\n * If a promise was returned from a previous call to this function, that hasn't yet resolved it will\n * be returned, instead of calling the original function again\n *\n * Results are not cached, once the promise has returned, the next call will result in a fresh call\n *\n * Read more at https://github.com/bitwarden/jslib/pull/7\n */\nexport function sequentialize(cacheKey: (args: any[]) => string) {\n  return (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) => {\n    const originalMethod: () => Promise<any> = descriptor.value;\n    const caches = new Map<any, Map<string, Promise<any>>>();\n\n    const getCache = (obj: any) => {\n      let cache = caches.get(obj);\n      if (cache != null) {\n        return cache;\n      }\n      cache = new Map<string, Promise<any>>();\n      caches.set(obj, cache);\n      return cache;\n    };\n\n    return {\n      value: function (...args: any[]) {\n        const cache = getCache(this);\n        const argsCacheKey = cacheKey(args);\n        let response = cache.get(argsCacheKey);\n        if (response != null) {\n          return response;\n        }\n\n        const onFinally = () => {\n          cache.delete(argsCacheKey);\n          if (cache.size === 0) {\n            caches.delete(this);\n          }\n        };\n        response = originalMethod\n          .apply(this, args)\n          .then((val: any) => {\n            onFinally();\n            return val;\n          })\n          .catch((err: any) => {\n            onFinally();\n            throw err;\n          });\n\n        cache.set(argsCacheKey, response);\n        return response;\n      },\n    };\n  };\n}\n","import { CipherView } from \"../view/cipher.view\";\n\nconst CacheTTL = 3000;\n\nexport class SortedCiphersCache {\n  private readonly sortedCiphersByUrl: Map<string, Ciphers> = new Map<string, Ciphers>();\n  private readonly timeouts: Map<string, any> = new Map<string, any>();\n\n  constructor(private readonly comparator: (a: CipherView, b: CipherView) => number) {}\n\n  isCached(url: string) {\n    return this.sortedCiphersByUrl.has(url);\n  }\n\n  addCiphers(url: string, ciphers: CipherView[]) {\n    ciphers.sort(this.comparator);\n    this.sortedCiphersByUrl.set(url, new Ciphers(ciphers));\n    this.resetTimer(url);\n  }\n\n  getLastUsed(url: string) {\n    this.resetTimer(url);\n    return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getLastUsed() : null;\n  }\n\n  getLastLaunched(url: string) {\n    return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getLastLaunched() : null;\n  }\n\n  getNext(url: string) {\n    this.resetTimer(url);\n    return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getNext() : null;\n  }\n\n  updateLastUsedIndex(url: string) {\n    if (this.isCached(url)) {\n      this.sortedCiphersByUrl.get(url).updateLastUsedIndex();\n    }\n  }\n\n  clear() {\n    this.sortedCiphersByUrl.clear();\n    this.timeouts.clear();\n  }\n\n  private resetTimer(url: string) {\n    clearTimeout(this.timeouts.get(url));\n    this.timeouts.set(\n      url,\n      setTimeout(() => {\n        this.sortedCiphersByUrl.delete(url);\n        this.timeouts.delete(url);\n      }, CacheTTL)\n    );\n  }\n}\n\nclass Ciphers {\n  lastUsedIndex = -1;\n\n  constructor(private readonly ciphers: CipherView[]) {}\n\n  getLastUsed() {\n    this.lastUsedIndex = Math.max(this.lastUsedIndex, 0);\n    return this.ciphers[this.lastUsedIndex];\n  }\n\n  getLastLaunched() {\n    const usedCiphers = this.ciphers.filter((cipher) => cipher.localData?.lastLaunched);\n    const sortedCiphers = usedCiphers.sort(\n      (x, y) => y.localData.lastLaunched.valueOf() - x.localData.lastLaunched.valueOf()\n    );\n    return sortedCiphers[0];\n  }\n\n  getNextIndex() {\n    return (this.lastUsedIndex + 1) % this.ciphers.length;\n  }\n\n  getNext() {\n    return this.ciphers[this.getNextIndex()];\n  }\n\n  updateLastUsedIndex() {\n    this.lastUsedIndex = this.getNextIndex();\n  }\n}\n","export class CipherBulkDeleteRequest {\n  ids: string[];\n  organizationId: string;\n\n  constructor(ids: string[], organizationId?: string) {\n    this.ids = ids == null ? [] : ids;\n    this.organizationId = organizationId;\n  }\n}\n","export class CipherBulkMoveRequest {\n  ids: string[];\n  folderId: string;\n\n  constructor(ids: string[], folderId: string) {\n    this.ids = ids == null ? [] : ids;\n    this.folderId = folderId;\n  }\n}\n","export class CipherBulkRestoreRequest {\n  ids: string[];\n  organizationId: string;\n\n  constructor(ids: string[], organizationId?: string) {\n    this.ids = ids == null ? [] : ids;\n    this.organizationId = organizationId;\n  }\n}\n","export class AttachmentRequest {\n  fileName: string;\n  key: string;\n  fileSize: number;\n  adminRequest: boolean;\n}\n","import { CardApi } from \"../../../models/api/card.api\";\nimport { FieldApi } from \"../../../models/api/field.api\";\nimport { IdentityApi } from \"../../../models/api/identity.api\";\nimport { LoginUriApi } from \"../../../models/api/login-uri.api\";\nimport { LoginApi } from \"../../../models/api/login.api\";\nimport { SecureNoteApi } from \"../../../models/api/secure-note.api\";\nimport { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../enums/cipher-type\";\nimport { Cipher } from \"../domain/cipher\";\n\nimport { AttachmentRequest } from \"./attachment.request\";\nimport { PasswordHistoryRequest } from \"./password-history.request\";\n\nexport class CipherRequest {\n  type: CipherType;\n  folderId: string;\n  organizationId: string;\n  name: string;\n  notes: string;\n  favorite: boolean;\n  login: LoginApi;\n  secureNote: SecureNoteApi;\n  card: CardApi;\n  identity: IdentityApi;\n  fields: FieldApi[];\n  passwordHistory: PasswordHistoryRequest[];\n  // Deprecated, remove at some point and rename attachments2 to attachments\n  attachments: { [id: string]: string };\n  attachments2: { [id: string]: AttachmentRequest };\n  lastKnownRevisionDate: Date;\n  reprompt: CipherRepromptType;\n\n  constructor(cipher: Cipher) {\n    this.type = cipher.type;\n    this.folderId = cipher.folderId;\n    this.organizationId = cipher.organizationId;\n    this.name = cipher.name ? cipher.name.encryptedString : null;\n    this.notes = cipher.notes ? cipher.notes.encryptedString : null;\n    this.favorite = cipher.favorite;\n    this.lastKnownRevisionDate = cipher.revisionDate;\n    this.reprompt = cipher.reprompt;\n\n    switch (this.type) {\n      case CipherType.Login:\n        this.login = new LoginApi();\n        this.login.uris = null;\n        this.login.username = cipher.login.username ? cipher.login.username.encryptedString : null;\n        this.login.password = cipher.login.password ? cipher.login.password.encryptedString : null;\n        this.login.passwordRevisionDate =\n          cipher.login.passwordRevisionDate != null\n            ? cipher.login.passwordRevisionDate.toISOString()\n            : null;\n        this.login.totp = cipher.login.totp ? cipher.login.totp.encryptedString : null;\n        this.login.autofillOnPageLoad = cipher.login.autofillOnPageLoad;\n\n        if (cipher.login.uris != null) {\n          this.login.uris = cipher.login.uris.map((u) => {\n            const uri = new LoginUriApi();\n            uri.uri = u.uri != null ? u.uri.encryptedString : null;\n            uri.match = u.match != null ? u.match : null;\n            return uri;\n          });\n        }\n        break;\n      case CipherType.SecureNote:\n        this.secureNote = new SecureNoteApi();\n        this.secureNote.type = cipher.secureNote.type;\n        break;\n      case CipherType.Card:\n        this.card = new CardApi();\n        this.card.cardholderName =\n          cipher.card.cardholderName != null ? cipher.card.cardholderName.encryptedString : null;\n        this.card.brand = cipher.card.brand != null ? cipher.card.brand.encryptedString : null;\n        this.card.number = cipher.card.number != null ? cipher.card.number.encryptedString : null;\n        this.card.expMonth =\n          cipher.card.expMonth != null ? cipher.card.expMonth.encryptedString : null;\n        this.card.expYear =\n          cipher.card.expYear != null ? cipher.card.expYear.encryptedString : null;\n        this.card.code = cipher.card.code != null ? cipher.card.code.encryptedString : null;\n        break;\n      case CipherType.Identity:\n        this.identity = new IdentityApi();\n        this.identity.title =\n          cipher.identity.title != null ? cipher.identity.title.encryptedString : null;\n        this.identity.firstName =\n          cipher.identity.firstName != null ? cipher.identity.firstName.encryptedString : null;\n        this.identity.middleName =\n          cipher.identity.middleName != null ? cipher.identity.middleName.encryptedString : null;\n        this.identity.lastName =\n          cipher.identity.lastName != null ? cipher.identity.lastName.encryptedString : null;\n        this.identity.address1 =\n          cipher.identity.address1 != null ? cipher.identity.address1.encryptedString : null;\n        this.identity.address2 =\n          cipher.identity.address2 != null ? cipher.identity.address2.encryptedString : null;\n        this.identity.address3 =\n          cipher.identity.address3 != null ? cipher.identity.address3.encryptedString : null;\n        this.identity.city =\n          cipher.identity.city != null ? cipher.identity.city.encryptedString : null;\n        this.identity.state =\n          cipher.identity.state != null ? cipher.identity.state.encryptedString : null;\n        this.identity.postalCode =\n          cipher.identity.postalCode != null ? cipher.identity.postalCode.encryptedString : null;\n        this.identity.country =\n          cipher.identity.country != null ? cipher.identity.country.encryptedString : null;\n        this.identity.company =\n          cipher.identity.company != null ? cipher.identity.company.encryptedString : null;\n        this.identity.email =\n          cipher.identity.email != null ? cipher.identity.email.encryptedString : null;\n        this.identity.phone =\n          cipher.identity.phone != null ? cipher.identity.phone.encryptedString : null;\n        this.identity.ssn =\n          cipher.identity.ssn != null ? cipher.identity.ssn.encryptedString : null;\n        this.identity.username =\n          cipher.identity.username != null ? cipher.identity.username.encryptedString : null;\n        this.identity.passportNumber =\n          cipher.identity.passportNumber != null\n            ? cipher.identity.passportNumber.encryptedString\n            : null;\n        this.identity.licenseNumber =\n          cipher.identity.licenseNumber != null\n            ? cipher.identity.licenseNumber.encryptedString\n            : null;\n        break;\n      default:\n        break;\n    }\n\n    if (cipher.fields != null) {\n      this.fields = cipher.fields.map((f) => {\n        const field = new FieldApi();\n        field.type = f.type;\n        field.name = f.name ? f.name.encryptedString : null;\n        field.value = f.value ? f.value.encryptedString : null;\n        field.linkedId = f.linkedId;\n        return field;\n      });\n    }\n\n    if (cipher.passwordHistory != null) {\n      this.passwordHistory = [];\n      cipher.passwordHistory.forEach((ph) => {\n        this.passwordHistory.push({\n          lastUsedDate: ph.lastUsedDate,\n          password: ph.password ? ph.password.encryptedString : null,\n        });\n      });\n    }\n\n    if (cipher.attachments != null) {\n      this.attachments = {};\n      this.attachments2 = {};\n      cipher.attachments.forEach((attachment) => {\n        const fileName = attachment.fileName ? attachment.fileName.encryptedString : null;\n        this.attachments[attachment.id] = fileName;\n        const attachmentRequest = new AttachmentRequest();\n        attachmentRequest.fileName = fileName;\n        if (attachment.key != null) {\n          attachmentRequest.key = attachment.key.encryptedString;\n        }\n        this.attachments2[attachment.id] = attachmentRequest;\n      });\n    }\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nimport { CipherRequest } from \"./cipher.request\";\n\nexport class CipherWithIdRequest extends CipherRequest {\n  id: string;\n\n  constructor(cipher: Cipher) {\n    super(cipher);\n    this.id = cipher.id;\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nimport { CipherWithIdRequest } from \"./cipher-with-id.request\";\n\nexport class CipherBulkShareRequest {\n  ciphers: CipherWithIdRequest[];\n  collectionIds: string[];\n\n  constructor(ciphers: Cipher[], collectionIds: string[]) {\n    if (ciphers != null) {\n      this.ciphers = [];\n      ciphers.forEach((c) => {\n        this.ciphers.push(new CipherWithIdRequest(c));\n      });\n    }\n    this.collectionIds = collectionIds;\n  }\n}\n","export class CipherCollectionsRequest {\n  collectionIds: string[];\n\n  constructor(collectionIds: string[]) {\n    this.collectionIds = collectionIds == null ? [] : collectionIds;\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nimport { CipherRequest } from \"./cipher.request\";\n\nexport class CipherCreateRequest {\n  cipher: CipherRequest;\n  collectionIds: string[];\n\n  constructor(cipher: Cipher) {\n    this.cipher = new CipherRequest(cipher);\n    this.collectionIds = cipher.collectionIds;\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nexport class CipherPartialRequest {\n  folderId: string;\n  favorite: boolean;\n\n  constructor(cipher: Cipher) {\n    this.folderId = cipher.folderId;\n    this.favorite = cipher.favorite;\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nimport { CipherRequest } from \"./cipher.request\";\n\nexport class CipherShareRequest {\n  cipher: CipherRequest;\n  collectionIds: string[];\n\n  constructor(cipher: Cipher) {\n    this.cipher = new CipherRequest(cipher);\n    this.collectionIds = cipher.collectionIds;\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { SearchService } from \"../../abstractions/search.service\";\nimport { SettingsService } from \"../../abstractions/settings.service\";\nimport { FieldType, UriMatchType } from \"../../enums\";\nimport { ErrorResponse } from \"../../models/response/error.response\";\nimport { View } from \"../../models/view/view\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { EncryptService } from \"../../platform/abstractions/encrypt.service\";\nimport { I18nService } from \"../../platform/abstractions/i18n.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { sequentialize } from \"../../platform/misc/sequentialize\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport Domain from \"../../platform/models/domain/domain-base\";\nimport { EncArrayBuffer } from \"../../platform/models/domain/enc-array-buffer\";\nimport { EncString } from \"../../platform/models/domain/enc-string\";\nimport {\n  OrgKey,\n  SymmetricCryptoKey,\n  UserKey,\n} from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { CipherService as CipherServiceAbstraction } from \"../abstractions/cipher.service\";\nimport { CipherFileUploadService } from \"../abstractions/file-upload/cipher-file-upload.service\";\nimport { CipherType } from \"../enums/cipher-type\";\nimport { CipherData } from \"../models/data/cipher.data\";\nimport { Attachment } from \"../models/domain/attachment\";\nimport { Card } from \"../models/domain/card\";\nimport { Cipher } from \"../models/domain/cipher\";\nimport { Field } from \"../models/domain/field\";\nimport { Identity } from \"../models/domain/identity\";\nimport { Login } from \"../models/domain/login\";\nimport { LoginUri } from \"../models/domain/login-uri\";\nimport { Password } from \"../models/domain/password\";\nimport { SecureNote } from \"../models/domain/secure-note\";\nimport { SortedCiphersCache } from \"../models/domain/sorted-ciphers-cache\";\nimport { CipherBulkDeleteRequest } from \"../models/request/cipher-bulk-delete.request\";\nimport { CipherBulkMoveRequest } from \"../models/request/cipher-bulk-move.request\";\nimport { CipherBulkRestoreRequest } from \"../models/request/cipher-bulk-restore.request\";\nimport { CipherBulkShareRequest } from \"../models/request/cipher-bulk-share.request\";\nimport { CipherCollectionsRequest } from \"../models/request/cipher-collections.request\";\nimport { CipherCreateRequest } from \"../models/request/cipher-create.request\";\nimport { CipherPartialRequest } from \"../models/request/cipher-partial.request\";\nimport { CipherShareRequest } from \"../models/request/cipher-share.request\";\nimport { CipherRequest } from \"../models/request/cipher.request\";\nimport { CipherResponse } from \"../models/response/cipher.response\";\nimport { AttachmentView } from \"../models/view/attachment.view\";\nimport { CipherView } from \"../models/view/cipher.view\";\nimport { FieldView } from \"../models/view/field.view\";\nimport { PasswordHistoryView } from \"../models/view/password-history.view\";\n\nexport class CipherService implements CipherServiceAbstraction {\n  private sortedCiphersCache: SortedCiphersCache = new SortedCiphersCache(\n    this.sortCiphersByLastUsed\n  );\n\n  constructor(\n    private cryptoService: CryptoService,\n    private settingsService: SettingsService,\n    private apiService: ApiService,\n    private i18nService: I18nService,\n    private searchService: SearchService,\n    private stateService: StateService,\n    private encryptService: EncryptService,\n    private cipherFileUploadService: CipherFileUploadService\n  ) {}\n\n  async getDecryptedCipherCache(): Promise<CipherView[]> {\n    const decryptedCiphers = await this.stateService.getDecryptedCiphers();\n    return decryptedCiphers;\n  }\n\n  async setDecryptedCipherCache(value: CipherView[]) {\n    await this.stateService.setDecryptedCiphers(value);\n    if (this.searchService != null) {\n      if (value == null) {\n        this.searchService.clearIndex();\n      } else {\n        this.searchService.indexCiphers(value);\n      }\n    }\n  }\n\n  async clearCache(userId?: string): Promise<void> {\n    await this.clearDecryptedCiphersState(userId);\n  }\n\n  async encrypt(\n    model: CipherView,\n    key?: SymmetricCryptoKey,\n    originalCipher: Cipher = null\n  ): Promise<Cipher> {\n    // Adjust password history\n    if (model.id != null) {\n      if (originalCipher == null) {\n        originalCipher = await this.get(model.id);\n      }\n      if (originalCipher != null) {\n        const existingCipher = await originalCipher.decrypt();\n        model.passwordHistory = existingCipher.passwordHistory || [];\n        if (model.type === CipherType.Login && existingCipher.type === CipherType.Login) {\n          if (\n            existingCipher.login.password != null &&\n            existingCipher.login.password !== \"\" &&\n            existingCipher.login.password !== model.login.password\n          ) {\n            const ph = new PasswordHistoryView();\n            ph.password = existingCipher.login.password;\n            ph.lastUsedDate = model.login.passwordRevisionDate = new Date();\n            model.passwordHistory.splice(0, 0, ph);\n          } else {\n            model.login.passwordRevisionDate = existingCipher.login.passwordRevisionDate;\n          }\n        }\n        if (existingCipher.hasFields) {\n          const existingHiddenFields = existingCipher.fields.filter(\n            (f) =>\n              f.type === FieldType.Hidden &&\n              f.name != null &&\n              f.name !== \"\" &&\n              f.value != null &&\n              f.value !== \"\"\n          );\n          const hiddenFields =\n            model.fields == null\n              ? []\n              : model.fields.filter(\n                  (f) => f.type === FieldType.Hidden && f.name != null && f.name !== \"\"\n                );\n          existingHiddenFields.forEach((ef) => {\n            const matchedField = hiddenFields.find((f) => f.name === ef.name);\n            if (matchedField == null || matchedField.value !== ef.value) {\n              const ph = new PasswordHistoryView();\n              ph.password = ef.name + \": \" + ef.value;\n              ph.lastUsedDate = new Date();\n              model.passwordHistory.splice(0, 0, ph);\n            }\n          });\n        }\n      }\n      if (model.passwordHistory != null && model.passwordHistory.length === 0) {\n        model.passwordHistory = null;\n      } else if (model.passwordHistory != null && model.passwordHistory.length > 5) {\n        // only save last 5 history\n        model.passwordHistory = model.passwordHistory.slice(0, 5);\n      }\n    }\n\n    const cipher = new Cipher();\n    cipher.id = model.id;\n    cipher.folderId = model.folderId;\n    cipher.favorite = model.favorite;\n    cipher.organizationId = model.organizationId;\n    cipher.type = model.type;\n    cipher.collectionIds = model.collectionIds;\n    cipher.revisionDate = model.revisionDate;\n    cipher.reprompt = model.reprompt;\n    cipher.edit = model.edit;\n\n    if (key == null && cipher.organizationId != null) {\n      key = await this.cryptoService.getOrgKey(cipher.organizationId);\n      if (key == null) {\n        throw new Error(\"Cannot encrypt cipher for organization. No key.\");\n      }\n    }\n    await Promise.all([\n      this.encryptObjProperty(\n        model,\n        cipher,\n        {\n          name: null,\n          notes: null,\n        },\n        key\n      ),\n      this.encryptCipherData(cipher, model, key),\n      this.encryptFields(model.fields, key).then((fields) => {\n        cipher.fields = fields;\n      }),\n      this.encryptPasswordHistories(model.passwordHistory, key).then((ph) => {\n        cipher.passwordHistory = ph;\n      }),\n      this.encryptAttachments(model.attachments, key).then((attachments) => {\n        cipher.attachments = attachments;\n      }),\n    ]);\n\n    return cipher;\n  }\n\n  async encryptAttachments(\n    attachmentsModel: AttachmentView[],\n    key: SymmetricCryptoKey\n  ): Promise<Attachment[]> {\n    if (attachmentsModel == null || attachmentsModel.length === 0) {\n      return null;\n    }\n\n    const promises: Promise<any>[] = [];\n    const encAttachments: Attachment[] = [];\n    attachmentsModel.forEach(async (model) => {\n      const attachment = new Attachment();\n      attachment.id = model.id;\n      attachment.size = model.size;\n      attachment.sizeName = model.sizeName;\n      attachment.url = model.url;\n      const promise = this.encryptObjProperty(\n        model,\n        attachment,\n        {\n          fileName: null,\n        },\n        key\n      ).then(async () => {\n        if (model.key != null) {\n          attachment.key = await this.cryptoService.encrypt(model.key.key, key);\n        }\n        encAttachments.push(attachment);\n      });\n      promises.push(promise);\n    });\n\n    await Promise.all(promises);\n    return encAttachments;\n  }\n\n  async encryptFields(fieldsModel: FieldView[], key: SymmetricCryptoKey): Promise<Field[]> {\n    if (!fieldsModel || !fieldsModel.length) {\n      return null;\n    }\n\n    const self = this;\n    const encFields: Field[] = [];\n    await fieldsModel.reduce(async (promise, field) => {\n      await promise;\n      const encField = await self.encryptField(field, key);\n      encFields.push(encField);\n    }, Promise.resolve());\n\n    return encFields;\n  }\n\n  async encryptField(fieldModel: FieldView, key: SymmetricCryptoKey): Promise<Field> {\n    const field = new Field();\n    field.type = fieldModel.type;\n    field.linkedId = fieldModel.linkedId;\n    // normalize boolean type field values\n    if (fieldModel.type === FieldType.Boolean && fieldModel.value !== \"true\") {\n      fieldModel.value = \"false\";\n    }\n\n    await this.encryptObjProperty(\n      fieldModel,\n      field,\n      {\n        name: null,\n        value: null,\n      },\n      key\n    );\n\n    return field;\n  }\n\n  async encryptPasswordHistories(\n    phModels: PasswordHistoryView[],\n    key: SymmetricCryptoKey\n  ): Promise<Password[]> {\n    if (!phModels || !phModels.length) {\n      return null;\n    }\n\n    const self = this;\n    const encPhs: Password[] = [];\n    await phModels.reduce(async (promise, ph) => {\n      await promise;\n      const encPh = await self.encryptPasswordHistory(ph, key);\n      encPhs.push(encPh);\n    }, Promise.resolve());\n\n    return encPhs;\n  }\n\n  async encryptPasswordHistory(\n    phModel: PasswordHistoryView,\n    key: SymmetricCryptoKey\n  ): Promise<Password> {\n    const ph = new Password();\n    ph.lastUsedDate = phModel.lastUsedDate;\n\n    await this.encryptObjProperty(\n      phModel,\n      ph,\n      {\n        password: null,\n      },\n      key\n    );\n\n    return ph;\n  }\n\n  async get(id: string): Promise<Cipher> {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    // eslint-disable-next-line\n    if (ciphers == null || !ciphers.hasOwnProperty(id)) {\n      return null;\n    }\n\n    const localData = await this.stateService.getLocalData();\n    return new Cipher(ciphers[id], localData ? localData[id] : null);\n  }\n\n  async getAll(): Promise<Cipher[]> {\n    const localData = await this.stateService.getLocalData();\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    const response: Cipher[] = [];\n    for (const id in ciphers) {\n      // eslint-disable-next-line\n      if (ciphers.hasOwnProperty(id)) {\n        response.push(new Cipher(ciphers[id], localData ? localData[id] : null));\n      }\n    }\n    return response;\n  }\n\n  @sequentialize(() => \"getAllDecrypted\")\n  async getAllDecrypted(): Promise<CipherView[]> {\n    if ((await this.getDecryptedCipherCache()) != null) {\n      await this.reindexCiphers();\n      return await this.getDecryptedCipherCache();\n    }\n\n    const hasKey = await this.cryptoService.hasUserKey();\n    if (!hasKey) {\n      throw new Error(\"No user key found.\");\n    }\n\n    const ciphers = await this.getAll();\n    const orgKeys = await this.cryptoService.getOrgKeys();\n    const userKey = await this.cryptoService.getUserKeyWithLegacySupport();\n\n    // Group ciphers by orgId or under 'null' for the user's ciphers\n    const grouped = ciphers.reduce((agg, c) => {\n      agg[c.organizationId] ??= [];\n      agg[c.organizationId].push(c);\n      return agg;\n    }, {} as Record<string, Cipher[]>);\n\n    const decCiphers = (\n      await Promise.all(\n        Object.entries(grouped).map(([orgId, groupedCiphers]) =>\n          this.encryptService.decryptItems(groupedCiphers, orgKeys.get(orgId) ?? userKey)\n        )\n      )\n    )\n      .flat()\n      .sort(this.getLocaleSortingFunction());\n\n    await this.setDecryptedCipherCache(decCiphers);\n    return decCiphers;\n  }\n\n  private async reindexCiphers() {\n    const userId = await this.stateService.getUserId();\n    const reindexRequired =\n      this.searchService != null && (this.searchService.indexedEntityId ?? userId) !== userId;\n    if (reindexRequired) {\n      this.searchService.indexCiphers(await this.getDecryptedCipherCache(), userId);\n    }\n  }\n\n  async getAllDecryptedForGrouping(groupingId: string, folder = true): Promise<CipherView[]> {\n    const ciphers = await this.getAllDecrypted();\n\n    return ciphers.filter((cipher) => {\n      if (cipher.isDeleted) {\n        return false;\n      }\n      if (folder && cipher.folderId === groupingId) {\n        return true;\n      } else if (\n        !folder &&\n        cipher.collectionIds != null &&\n        cipher.collectionIds.indexOf(groupingId) > -1\n      ) {\n        return true;\n      }\n\n      return false;\n    });\n  }\n\n  async getAllDecryptedForUrl(\n    url: string,\n    includeOtherTypes?: CipherType[],\n    defaultMatch: UriMatchType = null\n  ): Promise<CipherView[]> {\n    if (url == null && includeOtherTypes == null) {\n      return Promise.resolve([]);\n    }\n\n    const equivalentDomains = this.settingsService.getEquivalentDomains(url);\n    const ciphers = await this.getAllDecrypted();\n    defaultMatch ??= await this.stateService.getDefaultUriMatch();\n\n    return ciphers.filter((cipher) => {\n      if (cipher.deletedDate != null) {\n        return false;\n      }\n      if (includeOtherTypes != null && includeOtherTypes.indexOf(cipher.type) > -1) {\n        return true;\n      }\n\n      if (cipher.type === CipherType.Login && cipher.login !== null) {\n        return cipher.login.matchesUri(url, equivalentDomains, defaultMatch);\n      }\n\n      return false;\n    });\n  }\n\n  async getAllFromApiForOrganization(organizationId: string): Promise<CipherView[]> {\n    const response = await this.apiService.getCiphersOrganization(organizationId);\n    if (response?.data == null || response.data.length < 1) {\n      return [];\n    }\n\n    const ciphers = response.data.map((cr) => new Cipher(new CipherData(cr)));\n    const key = await this.cryptoService.getOrgKey(organizationId);\n    const decCiphers = await this.encryptService.decryptItems(ciphers, key);\n\n    decCiphers.sort(this.getLocaleSortingFunction());\n    return decCiphers;\n  }\n\n  async getLastUsedForUrl(url: string, autofillOnPageLoad = false): Promise<CipherView> {\n    return this.getCipherForUrl(url, true, false, autofillOnPageLoad);\n  }\n\n  async getLastLaunchedForUrl(url: string, autofillOnPageLoad = false): Promise<CipherView> {\n    return this.getCipherForUrl(url, false, true, autofillOnPageLoad);\n  }\n\n  async getNextCipherForUrl(url: string): Promise<CipherView> {\n    return this.getCipherForUrl(url, false, false, false);\n  }\n\n  updateLastUsedIndexForUrl(url: string) {\n    this.sortedCiphersCache.updateLastUsedIndex(url);\n  }\n\n  async updateLastUsedDate(id: string): Promise<void> {\n    let ciphersLocalData = await this.stateService.getLocalData();\n    if (!ciphersLocalData) {\n      ciphersLocalData = {};\n    }\n\n    if (ciphersLocalData[id]) {\n      ciphersLocalData[id].lastUsedDate = new Date().getTime();\n    } else {\n      ciphersLocalData[id] = {\n        lastUsedDate: new Date().getTime(),\n      };\n    }\n\n    await this.stateService.setLocalData(ciphersLocalData);\n\n    const decryptedCipherCache = await this.stateService.getDecryptedCiphers();\n    if (!decryptedCipherCache) {\n      return;\n    }\n\n    for (let i = 0; i < decryptedCipherCache.length; i++) {\n      const cached = decryptedCipherCache[i];\n      if (cached.id === id) {\n        cached.localData = ciphersLocalData[id];\n        break;\n      }\n    }\n    await this.stateService.setDecryptedCiphers(decryptedCipherCache);\n  }\n\n  async updateLastLaunchedDate(id: string): Promise<void> {\n    let ciphersLocalData = await this.stateService.getLocalData();\n    if (!ciphersLocalData) {\n      ciphersLocalData = {};\n    }\n\n    if (ciphersLocalData[id]) {\n      ciphersLocalData[id].lastLaunched = new Date().getTime();\n    } else {\n      ciphersLocalData[id] = {\n        lastUsedDate: new Date().getTime(),\n      };\n    }\n\n    await this.stateService.setLocalData(ciphersLocalData);\n\n    const decryptedCipherCache = await this.stateService.getDecryptedCiphers();\n    if (!decryptedCipherCache) {\n      return;\n    }\n\n    for (let i = 0; i < decryptedCipherCache.length; i++) {\n      const cached = decryptedCipherCache[i];\n      if (cached.id === id) {\n        cached.localData = ciphersLocalData[id];\n        break;\n      }\n    }\n    await this.stateService.setDecryptedCiphers(decryptedCipherCache);\n  }\n\n  async saveNeverDomain(domain: string): Promise<void> {\n    if (domain == null) {\n      return;\n    }\n\n    let domains = await this.stateService.getNeverDomains();\n    if (!domains) {\n      domains = {};\n    }\n    domains[domain] = null;\n    await this.stateService.setNeverDomains(domains);\n  }\n\n  async createWithServer(cipher: Cipher, orgAdmin?: boolean): Promise<any> {\n    let response: CipherResponse;\n    if (orgAdmin) {\n      const request = new CipherCreateRequest(cipher);\n      response = await this.apiService.postCipherAdmin(request);\n    } else if (cipher.collectionIds != null) {\n      const request = new CipherCreateRequest(cipher);\n      response = await this.apiService.postCipherCreate(request);\n    } else {\n      const request = new CipherRequest(cipher);\n      response = await this.apiService.postCipher(request);\n    }\n    cipher.id = response.id;\n\n    const data = new CipherData(response, cipher.collectionIds);\n    await this.upsert(data);\n  }\n\n  async updateWithServer(cipher: Cipher, orgAdmin?: boolean, isNotClone?: boolean): Promise<any> {\n    let response: CipherResponse;\n    if (orgAdmin && isNotClone) {\n      const request = new CipherRequest(cipher);\n      response = await this.apiService.putCipherAdmin(cipher.id, request);\n    } else if (cipher.edit) {\n      const request = new CipherRequest(cipher);\n      response = await this.apiService.putCipher(cipher.id, request);\n    } else {\n      const request = new CipherPartialRequest(cipher);\n      response = await this.apiService.putPartialCipher(cipher.id, request);\n    }\n\n    const data = new CipherData(response, cipher.collectionIds);\n    await this.upsert(data);\n  }\n\n  async shareWithServer(\n    cipher: CipherView,\n    organizationId: string,\n    collectionIds: string[]\n  ): Promise<any> {\n    const attachmentPromises: Promise<any>[] = [];\n    if (cipher.attachments != null) {\n      cipher.attachments.forEach((attachment) => {\n        if (attachment.key == null) {\n          attachmentPromises.push(\n            this.shareAttachmentWithServer(attachment, cipher.id, organizationId)\n          );\n        }\n      });\n    }\n    await Promise.all(attachmentPromises);\n\n    cipher.organizationId = organizationId;\n    cipher.collectionIds = collectionIds;\n    const encCipher = await this.encrypt(cipher);\n    const request = new CipherShareRequest(encCipher);\n    const response = await this.apiService.putShareCipher(cipher.id, request);\n    const data = new CipherData(response, collectionIds);\n    await this.upsert(data);\n  }\n\n  async shareManyWithServer(\n    ciphers: CipherView[],\n    organizationId: string,\n    collectionIds: string[]\n  ): Promise<any> {\n    const promises: Promise<any>[] = [];\n    const encCiphers: Cipher[] = [];\n    for (const cipher of ciphers) {\n      cipher.organizationId = organizationId;\n      cipher.collectionIds = collectionIds;\n      promises.push(\n        this.encrypt(cipher).then((c) => {\n          encCiphers.push(c);\n        })\n      );\n    }\n    await Promise.all(promises);\n    const request = new CipherBulkShareRequest(encCiphers, collectionIds);\n    try {\n      await this.apiService.putShareCiphers(request);\n    } catch (e) {\n      for (const cipher of ciphers) {\n        cipher.organizationId = null;\n        cipher.collectionIds = null;\n      }\n      throw e;\n    }\n    await this.upsert(encCiphers.map((c) => c.toCipherData()));\n  }\n\n  saveAttachmentWithServer(cipher: Cipher, unencryptedFile: any, admin = false): Promise<Cipher> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsArrayBuffer(unencryptedFile);\n      reader.onload = async (evt: any) => {\n        try {\n          const cData = await this.saveAttachmentRawWithServer(\n            cipher,\n            unencryptedFile.name,\n            evt.target.result,\n            admin\n          );\n          resolve(cData);\n        } catch (e) {\n          reject(e);\n        }\n      };\n      reader.onerror = () => {\n        reject(\"Error reading file.\");\n      };\n    });\n  }\n\n  async saveAttachmentRawWithServer(\n    cipher: Cipher,\n    filename: string,\n    data: Uint8Array,\n    admin = false\n  ): Promise<Cipher> {\n    let encKey: UserKey | OrgKey;\n    encKey = await this.cryptoService.getOrgKey(cipher.organizationId);\n    encKey ||= await this.cryptoService.getUserKeyWithLegacySupport();\n\n    const dataEncKey = await this.cryptoService.makeDataEncKey(encKey);\n\n    const encFileName = await this.encryptService.encrypt(filename, encKey);\n    const encData = await this.encryptService.encryptToBytes(data, dataEncKey[0]);\n\n    const response = await this.cipherFileUploadService.upload(\n      cipher,\n      encFileName,\n      encData,\n      admin,\n      dataEncKey\n    );\n\n    const cData = new CipherData(response, cipher.collectionIds);\n    if (!admin) {\n      await this.upsert(cData);\n    }\n    return new Cipher(cData);\n  }\n\n  async saveCollectionsWithServer(cipher: Cipher): Promise<any> {\n    const request = new CipherCollectionsRequest(cipher.collectionIds);\n    await this.apiService.putCipherCollections(cipher.id, request);\n    const data = cipher.toCipherData();\n    await this.upsert(data);\n  }\n\n  async upsert(cipher: CipherData | CipherData[]): Promise<any> {\n    let ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      ciphers = {};\n    }\n\n    if (cipher instanceof CipherData) {\n      const c = cipher as CipherData;\n      ciphers[c.id] = c;\n    } else {\n      (cipher as CipherData[]).forEach((c) => {\n        ciphers[c.id] = c;\n      });\n    }\n\n    await this.replace(ciphers);\n  }\n\n  async replace(ciphers: { [id: string]: CipherData }): Promise<any> {\n    await this.clearDecryptedCiphersState();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async clear(userId?: string): Promise<any> {\n    await this.clearEncryptedCiphersState(userId);\n    await this.clearCache(userId);\n  }\n\n  async moveManyWithServer(ids: string[], folderId: string): Promise<any> {\n    await this.apiService.putMoveCiphers(new CipherBulkMoveRequest(ids, folderId));\n\n    let ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      ciphers = {};\n    }\n\n    ids.forEach((id) => {\n      // eslint-disable-next-line\n      if (ciphers.hasOwnProperty(id)) {\n        ciphers[id].folderId = folderId;\n      }\n    });\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async delete(id: string | string[]): Promise<any> {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      return;\n    }\n\n    if (typeof id === \"string\") {\n      if (ciphers[id] == null) {\n        return;\n      }\n      delete ciphers[id];\n    } else {\n      (id as string[]).forEach((i) => {\n        delete ciphers[i];\n      });\n    }\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async deleteWithServer(id: string, asAdmin = false): Promise<any> {\n    if (asAdmin) {\n      await this.apiService.deleteCipherAdmin(id);\n    } else {\n      await this.apiService.deleteCipher(id);\n    }\n\n    await this.delete(id);\n  }\n\n  async deleteManyWithServer(ids: string[], asAdmin = false): Promise<any> {\n    const request = new CipherBulkDeleteRequest(ids);\n    if (asAdmin) {\n      await this.apiService.deleteManyCiphersAdmin(request);\n    } else {\n      await this.apiService.deleteManyCiphers(request);\n    }\n    await this.delete(ids);\n  }\n\n  async deleteAttachment(id: string, attachmentId: string): Promise<void> {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n\n    // eslint-disable-next-line\n    if (ciphers == null || !ciphers.hasOwnProperty(id) || ciphers[id].attachments == null) {\n      return;\n    }\n\n    for (let i = 0; i < ciphers[id].attachments.length; i++) {\n      if (ciphers[id].attachments[i].id === attachmentId) {\n        ciphers[id].attachments.splice(i, 1);\n      }\n    }\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async deleteAttachmentWithServer(id: string, attachmentId: string): Promise<void> {\n    try {\n      await this.apiService.deleteCipherAttachment(id, attachmentId);\n    } catch (e) {\n      return Promise.reject((e as ErrorResponse).getSingleMessage());\n    }\n    await this.deleteAttachment(id, attachmentId);\n  }\n\n  sortCiphersByLastUsed(a: CipherView, b: CipherView): number {\n    const aLastUsed =\n      a.localData && a.localData.lastUsedDate ? (a.localData.lastUsedDate as number) : null;\n    const bLastUsed =\n      b.localData && b.localData.lastUsedDate ? (b.localData.lastUsedDate as number) : null;\n\n    const bothNotNull = aLastUsed != null && bLastUsed != null;\n    if (bothNotNull && aLastUsed < bLastUsed) {\n      return 1;\n    }\n    if (aLastUsed != null && bLastUsed == null) {\n      return -1;\n    }\n\n    if (bothNotNull && aLastUsed > bLastUsed) {\n      return -1;\n    }\n    if (bLastUsed != null && aLastUsed == null) {\n      return 1;\n    }\n\n    return 0;\n  }\n\n  sortCiphersByLastUsedThenName(a: CipherView, b: CipherView): number {\n    const result = this.sortCiphersByLastUsed(a, b);\n    if (result !== 0) {\n      return result;\n    }\n\n    return this.getLocaleSortingFunction()(a, b);\n  }\n\n  getLocaleSortingFunction(): (a: CipherView, b: CipherView) => number {\n    return (a, b) => {\n      let aName = a.name;\n      let bName = b.name;\n\n      if (aName == null && bName != null) {\n        return -1;\n      }\n      if (aName != null && bName == null) {\n        return 1;\n      }\n      if (aName == null && bName == null) {\n        return 0;\n      }\n\n      const result = this.i18nService.collator\n        ? this.i18nService.collator.compare(aName, bName)\n        : aName.localeCompare(bName);\n\n      if (result !== 0 || a.type !== CipherType.Login || b.type !== CipherType.Login) {\n        return result;\n      }\n\n      if (a.login.username != null) {\n        aName += a.login.username;\n      }\n\n      if (b.login.username != null) {\n        bName += b.login.username;\n      }\n\n      return this.i18nService.collator\n        ? this.i18nService.collator.compare(aName, bName)\n        : aName.localeCompare(bName);\n    };\n  }\n\n  async softDelete(id: string | string[]): Promise<any> {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      return;\n    }\n\n    const setDeletedDate = (cipherId: string) => {\n      if (ciphers[cipherId] == null) {\n        return;\n      }\n      ciphers[cipherId].deletedDate = new Date().toISOString();\n    };\n\n    if (typeof id === \"string\") {\n      setDeletedDate(id);\n    } else {\n      (id as string[]).forEach(setDeletedDate);\n    }\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async softDeleteWithServer(id: string, asAdmin = false): Promise<any> {\n    if (asAdmin) {\n      await this.apiService.putDeleteCipherAdmin(id);\n    } else {\n      await this.apiService.putDeleteCipher(id);\n    }\n\n    await this.softDelete(id);\n  }\n\n  async softDeleteManyWithServer(ids: string[], asAdmin = false): Promise<any> {\n    const request = new CipherBulkDeleteRequest(ids);\n    if (asAdmin) {\n      await this.apiService.putDeleteManyCiphersAdmin(request);\n    } else {\n      await this.apiService.putDeleteManyCiphers(request);\n    }\n\n    await this.softDelete(ids);\n  }\n\n  async restore(\n    cipher: { id: string; revisionDate: string } | { id: string; revisionDate: string }[]\n  ) {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      return;\n    }\n\n    const clearDeletedDate = (c: { id: string; revisionDate: string }) => {\n      if (ciphers[c.id] == null) {\n        return;\n      }\n      ciphers[c.id].deletedDate = null;\n      ciphers[c.id].revisionDate = c.revisionDate;\n    };\n\n    if (cipher.constructor.name === Array.name) {\n      (cipher as { id: string; revisionDate: string }[]).forEach(clearDeletedDate);\n    } else {\n      clearDeletedDate(cipher as { id: string; revisionDate: string });\n    }\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async restoreWithServer(id: string, asAdmin = false): Promise<any> {\n    let response;\n    if (asAdmin) {\n      response = await this.apiService.putRestoreCipherAdmin(id);\n    } else {\n      response = await this.apiService.putRestoreCipher(id);\n    }\n\n    await this.restore({ id: id, revisionDate: response.revisionDate });\n  }\n\n  async restoreManyWithServer(\n    ids: string[],\n    organizationId: string = null,\n    asAdmin = false\n  ): Promise<void> {\n    let response;\n    if (asAdmin) {\n      const request = new CipherBulkRestoreRequest(ids, organizationId);\n      response = await this.apiService.putRestoreManyCiphersAdmin(request);\n    } else {\n      const request = new CipherBulkRestoreRequest(ids);\n      response = await this.apiService.putRestoreManyCiphers(request);\n    }\n\n    const restores: { id: string; revisionDate: string }[] = [];\n    for (const cipher of response.data) {\n      restores.push({ id: cipher.id, revisionDate: cipher.revisionDate });\n    }\n    await this.restore(restores);\n  }\n\n  // Helpers\n\n  private async shareAttachmentWithServer(\n    attachmentView: AttachmentView,\n    cipherId: string,\n    organizationId: string\n  ): Promise<any> {\n    const attachmentResponse = await this.apiService.nativeFetch(\n      new Request(attachmentView.url, { cache: \"no-store\" })\n    );\n    if (attachmentResponse.status !== 200) {\n      throw Error(\"Failed to download attachment: \" + attachmentResponse.status.toString());\n    }\n\n    const encBuf = await EncArrayBuffer.fromResponse(attachmentResponse);\n    const decBuf = await this.cryptoService.decryptFromBytes(encBuf, null);\n\n    let encKey: UserKey | OrgKey;\n    encKey = await this.cryptoService.getOrgKey(organizationId);\n    encKey ||= (await this.cryptoService.getUserKeyWithLegacySupport()) as UserKey;\n\n    const dataEncKey = await this.cryptoService.makeDataEncKey(encKey);\n\n    const encFileName = await this.encryptService.encrypt(attachmentView.fileName, encKey);\n    const encData = await this.encryptService.encryptToBytes(new Uint8Array(decBuf), dataEncKey[0]);\n\n    const fd = new FormData();\n    try {\n      const blob = new Blob([encData.buffer], { type: \"application/octet-stream\" });\n      fd.append(\"key\", dataEncKey[1].encryptedString);\n      fd.append(\"data\", blob, encFileName.encryptedString);\n    } catch (e) {\n      if (Utils.isNode && !Utils.isBrowser) {\n        fd.append(\"key\", dataEncKey[1].encryptedString);\n        fd.append(\n          \"data\",\n          Buffer.from(encData.buffer) as any,\n          {\n            filepath: encFileName.encryptedString,\n            contentType: \"application/octet-stream\",\n          } as any\n        );\n      } else {\n        throw e;\n      }\n    }\n\n    try {\n      await this.apiService.postShareCipherAttachment(\n        cipherId,\n        attachmentView.id,\n        fd,\n        organizationId\n      );\n    } catch (e) {\n      throw new Error((e as ErrorResponse).getSingleMessage());\n    }\n  }\n\n  private async encryptObjProperty<V extends View, D extends Domain>(\n    model: V,\n    obj: D,\n    map: any,\n    key: SymmetricCryptoKey\n  ): Promise<void> {\n    const promises = [];\n    const self = this;\n\n    for (const prop in map) {\n      // eslint-disable-next-line\n      if (!map.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      (function (theProp, theObj) {\n        const p = Promise.resolve()\n          .then(() => {\n            const modelProp = (model as any)[map[theProp] || theProp];\n            if (modelProp && modelProp !== \"\") {\n              return self.cryptoService.encrypt(modelProp, key);\n            }\n            return null;\n          })\n          .then((val: EncString) => {\n            (theObj as any)[theProp] = val;\n          });\n        promises.push(p);\n      })(prop, obj);\n    }\n\n    await Promise.all(promises);\n  }\n\n  private async encryptCipherData(cipher: Cipher, model: CipherView, key: SymmetricCryptoKey) {\n    switch (cipher.type) {\n      case CipherType.Login:\n        cipher.login = new Login();\n        cipher.login.passwordRevisionDate = model.login.passwordRevisionDate;\n        cipher.login.autofillOnPageLoad = model.login.autofillOnPageLoad;\n        await this.encryptObjProperty(\n          model.login,\n          cipher.login,\n          {\n            username: null,\n            password: null,\n            totp: null,\n          },\n          key\n        );\n\n        if (model.login.uris != null) {\n          cipher.login.uris = [];\n          for (let i = 0; i < model.login.uris.length; i++) {\n            const loginUri = new LoginUri();\n            loginUri.match = model.login.uris[i].match;\n            await this.encryptObjProperty(\n              model.login.uris[i],\n              loginUri,\n              {\n                uri: null,\n              },\n              key\n            );\n            cipher.login.uris.push(loginUri);\n          }\n        }\n        return;\n      case CipherType.SecureNote:\n        cipher.secureNote = new SecureNote();\n        cipher.secureNote.type = model.secureNote.type;\n        return;\n      case CipherType.Card:\n        cipher.card = new Card();\n        await this.encryptObjProperty(\n          model.card,\n          cipher.card,\n          {\n            cardholderName: null,\n            brand: null,\n            number: null,\n            expMonth: null,\n            expYear: null,\n            code: null,\n          },\n          key\n        );\n        return;\n      case CipherType.Identity:\n        cipher.identity = new Identity();\n        await this.encryptObjProperty(\n          model.identity,\n          cipher.identity,\n          {\n            title: null,\n            firstName: null,\n            middleName: null,\n            lastName: null,\n            address1: null,\n            address2: null,\n            address3: null,\n            city: null,\n            state: null,\n            postalCode: null,\n            country: null,\n            company: null,\n            email: null,\n            phone: null,\n            ssn: null,\n            username: null,\n            passportNumber: null,\n            licenseNumber: null,\n          },\n          key\n        );\n        return;\n      default:\n        throw new Error(\"Unknown cipher type.\");\n    }\n  }\n\n  private async getCipherForUrl(\n    url: string,\n    lastUsed: boolean,\n    lastLaunched: boolean,\n    autofillOnPageLoad: boolean\n  ): Promise<CipherView> {\n    const cacheKey = autofillOnPageLoad ? \"autofillOnPageLoad-\" + url : url;\n\n    if (!this.sortedCiphersCache.isCached(cacheKey)) {\n      let ciphers = await this.getAllDecryptedForUrl(url);\n      if (!ciphers) {\n        return null;\n      }\n\n      if (autofillOnPageLoad) {\n        const autofillOnPageLoadDefault = await this.stateService.getAutoFillOnPageLoadDefault();\n        ciphers = ciphers.filter(\n          (cipher) =>\n            cipher.login.autofillOnPageLoad ||\n            (cipher.login.autofillOnPageLoad == null && autofillOnPageLoadDefault !== false)\n        );\n        if (ciphers.length === 0) {\n          return null;\n        }\n      }\n\n      this.sortedCiphersCache.addCiphers(cacheKey, ciphers);\n    }\n\n    if (lastLaunched) {\n      return this.sortedCiphersCache.getLastLaunched(cacheKey);\n    } else if (lastUsed) {\n      return this.sortedCiphersCache.getLastUsed(cacheKey);\n    } else {\n      return this.sortedCiphersCache.getNext(cacheKey);\n    }\n  }\n\n  private async clearEncryptedCiphersState(userId?: string) {\n    await this.stateService.setEncryptedCiphers(null, { userId: userId });\n  }\n\n  private async clearDecryptedCiphersState(userId?: string) {\n    await this.stateService.setDecryptedCiphers(null, { userId: userId });\n    this.clearSortedCiphers();\n  }\n\n  private clearSortedCiphers() {\n    this.sortedCiphersCache.clear();\n  }\n}\n","export class TreeNode<T extends ITreeNodeObject> {\n  node: T;\n  parent: TreeNode<T>;\n  children: TreeNode<T>[] = [];\n\n  constructor(node: T, parent: TreeNode<T>, name?: string, id?: string) {\n    this.parent = parent;\n    this.node = node;\n    if (name) {\n      this.node.name = name;\n    }\n    if (id) {\n      this.node.id = id;\n    }\n  }\n}\n\nexport interface ITreeNodeObject {\n  id: string;\n  name: string;\n}\n","import { ITreeNodeObject, TreeNode } from \"../models/domain/tree-node\";\n\nexport class ServiceUtils {\n  /**\n   * Recursively adds a node to nodeTree\n   * @param {TreeNode<ITreeNodeObject>[]} nodeTree - An array of TreeNodes that the node will be added to\n   * @param {number} partIndex - Index of the `parts` array that is being processed\n   * @param {string[]} parts - Array of strings that represent the path to the `obj` node\n   * @param {ITreeNodeObject} obj - The node to be added to the tree\n   * @param {ITreeNodeObject} parent - The parent node of the `obj` node\n   * @param {string} delimiter - The delimiter used to split the path string, will be used to combine the path for missing nodes\n   */\n  static nestedTraverse(\n    nodeTree: TreeNode<ITreeNodeObject>[],\n    partIndex: number,\n    parts: string[],\n    obj: ITreeNodeObject,\n    parent: TreeNode<ITreeNodeObject> | undefined,\n    delimiter: string\n  ) {\n    if (parts.length <= partIndex) {\n      return;\n    }\n\n    const end: boolean = partIndex === parts.length - 1;\n    const partName: string = parts[partIndex];\n\n    for (let i = 0; i < nodeTree.length; i++) {\n      if (nodeTree[i].node.name !== partName) {\n        continue;\n      }\n      if (end && nodeTree[i].node.id !== obj.id) {\n        // Another node exists with the same name as the node being added\n        nodeTree.push(new TreeNode(obj, parent, partName));\n        return;\n      }\n      // Move down the tree to the next level\n      ServiceUtils.nestedTraverse(\n        nodeTree[i].children,\n        partIndex + 1,\n        parts,\n        obj,\n        nodeTree[i],\n        delimiter\n      );\n      return;\n    }\n\n    // If there's no node here with the same name...\n    if (nodeTree.filter((n) => n.node.name === partName).length === 0) {\n      // And we're at the end of the path given, add the node\n      if (end) {\n        nodeTree.push(new TreeNode(obj, parent, partName));\n        return;\n      }\n      // And we're not at the end of the path, combine the current name with the next name\n      // 1, *1.2, 1.2.1 becomes\n      // 1, *1.2/1.2.1\n      const newPartName = partName + delimiter + parts[partIndex + 1];\n      ServiceUtils.nestedTraverse(\n        nodeTree,\n        0,\n        [newPartName, ...parts.slice(partIndex + 2)],\n        obj,\n        parent,\n        delimiter\n      );\n    }\n  }\n\n  /**\n   * Searches a tree for a node with a matching `id`\n   * @param {TreeNode<T>} nodeTree - A single TreeNode branch that will be searched\n   * @param {string} id - The id of the node to be found\n   * @returns {TreeNode<T>} The node with a matching `id`\n   */\n  static getTreeNodeObject<T extends ITreeNodeObject>(\n    nodeTree: TreeNode<T>,\n    id: string\n  ): TreeNode<T> {\n    if (nodeTree.node.id === id) {\n      return nodeTree;\n    }\n    for (let i = 0; i < nodeTree.children.length; i++) {\n      if (nodeTree.children[i].children != null) {\n        const node = ServiceUtils.getTreeNodeObject(nodeTree.children[i], id);\n        if (node !== null) {\n          return node;\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Searches an array of tree nodes for a node with a matching `id`\n   * @param {TreeNode<T>} nodeTree - An array of TreeNode branches that will be searched\n   * @param {string} id - The id of the node to be found\n   * @returns {TreeNode<T>} The node with a matching `id`\n   */\n  static getTreeNodeObjectFromList<T extends ITreeNodeObject>(\n    nodeTree: TreeNode<T>[],\n    id: string\n  ): TreeNode<T> {\n    for (let i = 0; i < nodeTree.length; i++) {\n      if (nodeTree[i].node.id === id) {\n        return nodeTree[i];\n      } else if (nodeTree[i].children != null) {\n        const node = ServiceUtils.getTreeNodeObjectFromList(nodeTree[i].children, id);\n        if (node !== null) {\n          return node;\n        }\n      }\n    }\n    return null;\n  }\n}\n","import { CollectionDetailsResponse } from \"../response/collection.response\";\n\nexport class CollectionData {\n  id: string;\n  organizationId: string;\n  name: string;\n  externalId: string;\n  readOnly: boolean;\n\n  constructor(response: CollectionDetailsResponse) {\n    this.id = response.id;\n    this.organizationId = response.organizationId;\n    this.name = response.name;\n    this.externalId = response.externalId;\n    this.readOnly = response.readOnly;\n  }\n}\n","import { ITreeNodeObject } from \"../../../models/domain/tree-node\";\nimport { View } from \"../../../models/view/view\";\nimport { Collection } from \"../domain/collection\";\nimport { CollectionAccessDetailsResponse } from \"../response/collection.response\";\n\nexport const NestingDelimiter = \"/\";\n\nexport class CollectionView implements View, ITreeNodeObject {\n  id: string = null;\n  organizationId: string = null;\n  name: string = null;\n  externalId: string = null;\n  readOnly: boolean = null;\n  hidePasswords: boolean = null;\n\n  constructor(c?: Collection | CollectionAccessDetailsResponse) {\n    if (!c) {\n      return;\n    }\n\n    this.id = c.id;\n    this.organizationId = c.organizationId;\n    this.externalId = c.externalId;\n    if (c instanceof Collection) {\n      this.readOnly = c.readOnly;\n      this.hidePasswords = c.hidePasswords;\n    }\n  }\n}\n","import Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { CollectionData } from \"../data/collection.data\";\nimport { CollectionView } from \"../view/collection.view\";\n\nexport class Collection extends Domain {\n  id: string;\n  organizationId: string;\n  name: EncString;\n  externalId: string;\n  readOnly: boolean;\n  hidePasswords: boolean;\n\n  constructor(obj?: CollectionData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        organizationId: null,\n        name: null,\n        externalId: null,\n        readOnly: null,\n        hidePasswords: null,\n      },\n      [\"id\", \"organizationId\", \"externalId\", \"readOnly\", \"hidePasswords\"]\n    );\n  }\n\n  decrypt(): Promise<CollectionView> {\n    return this.decryptObj(\n      new CollectionView(this),\n      {\n        name: null,\n      },\n      this.organizationId\n    );\n  }\n}\n","import { ServiceUtils } from \"../../misc/serviceUtils\";\nimport { TreeNode } from \"../../models/domain/tree-node\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { I18nService } from \"../../platform/abstractions/i18n.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport { CollectionService as CollectionServiceAbstraction } from \"../../vault/abstractions/collection.service\";\nimport { CollectionData } from \"../models/data/collection.data\";\nimport { Collection } from \"../models/domain/collection\";\nimport { CollectionView } from \"../models/view/collection.view\";\n\nconst NestingDelimiter = \"/\";\n\nexport class CollectionService implements CollectionServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private i18nService: I18nService,\n    private stateService: StateService\n  ) {}\n\n  async clearCache(userId?: string): Promise<void> {\n    await this.stateService.setDecryptedCollections(null, { userId: userId });\n  }\n\n  async encrypt(model: CollectionView): Promise<Collection> {\n    if (model.organizationId == null) {\n      throw new Error(\"Collection has no organization id.\");\n    }\n    const key = await this.cryptoService.getOrgKey(model.organizationId);\n    if (key == null) {\n      throw new Error(\"No key for this collection's organization.\");\n    }\n    const collection = new Collection();\n    collection.id = model.id;\n    collection.organizationId = model.organizationId;\n    collection.readOnly = model.readOnly;\n    collection.name = await this.cryptoService.encrypt(model.name, key);\n    return collection;\n  }\n\n  async decryptMany(collections: Collection[]): Promise<CollectionView[]> {\n    if (collections == null) {\n      return [];\n    }\n    const decCollections: CollectionView[] = [];\n    const promises: Promise<any>[] = [];\n    collections.forEach((collection) => {\n      promises.push(collection.decrypt().then((c) => decCollections.push(c)));\n    });\n    await Promise.all(promises);\n    return decCollections.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n  }\n\n  async get(id: string): Promise<Collection> {\n    const collections = await this.stateService.getEncryptedCollections();\n    // eslint-disable-next-line\n    if (collections == null || !collections.hasOwnProperty(id)) {\n      return null;\n    }\n\n    return new Collection(collections[id]);\n  }\n\n  async getAll(): Promise<Collection[]> {\n    const collections = await this.stateService.getEncryptedCollections();\n    const response: Collection[] = [];\n    for (const id in collections) {\n      // eslint-disable-next-line\n      if (collections.hasOwnProperty(id)) {\n        response.push(new Collection(collections[id]));\n      }\n    }\n    return response;\n  }\n\n  async getAllDecrypted(): Promise<CollectionView[]> {\n    let decryptedCollections = await this.stateService.getDecryptedCollections();\n    if (decryptedCollections != null) {\n      return decryptedCollections;\n    }\n\n    const hasKey = await this.cryptoService.hasUserKey();\n    if (!hasKey) {\n      throw new Error(\"No key.\");\n    }\n\n    const collections = await this.getAll();\n    decryptedCollections = await this.decryptMany(collections);\n\n    await this.stateService.setDecryptedCollections(decryptedCollections);\n    return decryptedCollections;\n  }\n\n  async getAllNested(collections: CollectionView[] = null): Promise<TreeNode<CollectionView>[]> {\n    if (collections == null) {\n      collections = await this.getAllDecrypted();\n    }\n    const nodes: TreeNode<CollectionView>[] = [];\n    collections.forEach((c) => {\n      const collectionCopy = new CollectionView();\n      collectionCopy.id = c.id;\n      collectionCopy.organizationId = c.organizationId;\n      const parts = c.name != null ? c.name.replace(/^\\/+|\\/+$/g, \"\").split(NestingDelimiter) : [];\n      ServiceUtils.nestedTraverse(nodes, 0, parts, collectionCopy, null, NestingDelimiter);\n    });\n    return nodes;\n  }\n\n  /**\n   * @deprecated August 30 2022: Moved to new Vault Filter Service\n   * Remove when Desktop and Browser are updated\n   */\n  async getNested(id: string): Promise<TreeNode<CollectionView>> {\n    const collections = await this.getAllNested();\n    return ServiceUtils.getTreeNodeObjectFromList(collections, id) as TreeNode<CollectionView>;\n  }\n\n  async upsert(collection: CollectionData | CollectionData[]): Promise<any> {\n    let collections = await this.stateService.getEncryptedCollections();\n    if (collections == null) {\n      collections = {};\n    }\n\n    if (collection instanceof CollectionData) {\n      const c = collection as CollectionData;\n      collections[c.id] = c;\n    } else {\n      (collection as CollectionData[]).forEach((c) => {\n        collections[c.id] = c;\n      });\n    }\n\n    await this.replace(collections);\n  }\n\n  async replace(collections: { [id: string]: CollectionData }): Promise<any> {\n    await this.clearCache();\n    await this.stateService.setEncryptedCollections(collections);\n  }\n\n  async clear(userId?: string): Promise<any> {\n    await this.clearCache(userId);\n    await this.stateService.setEncryptedCollections(null, { userId: userId });\n  }\n\n  async delete(id: string | string[]): Promise<any> {\n    const collections = await this.stateService.getEncryptedCollections();\n    if (collections == null) {\n      return;\n    }\n\n    if (typeof id === \"string\") {\n      delete collections[id];\n    } else {\n      (id as string[]).forEach((i) => {\n        delete collections[i];\n      });\n    }\n\n    await this.replace(collections);\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { ErrorResponse } from \"../../../models/response/error.response\";\nimport {\n  FileUploadApiMethods,\n  FileUploadService,\n} from \"../../../platform/abstractions/file-upload/file-upload.service\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { EncArrayBuffer } from \"../../../platform/models/domain/enc-array-buffer\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { CipherFileUploadService as CipherFileUploadServiceAbstraction } from \"../../abstractions/file-upload/cipher-file-upload.service\";\nimport { Cipher } from \"../../models/domain/cipher\";\nimport { AttachmentRequest } from \"../../models/request/attachment.request\";\nimport { AttachmentUploadDataResponse } from \"../../models/response/attachment-upload-data.response\";\nimport { CipherResponse } from \"../../models/response/cipher.response\";\n\nexport class CipherFileUploadService implements CipherFileUploadServiceAbstraction {\n  constructor(private apiService: ApiService, private fileUploadService: FileUploadService) {}\n\n  async upload(\n    cipher: Cipher,\n    encFileName: EncString,\n    encData: EncArrayBuffer,\n    admin: boolean,\n    dataEncKey: [SymmetricCryptoKey, EncString]\n  ): Promise<CipherResponse> {\n    const request: AttachmentRequest = {\n      key: dataEncKey[1].encryptedString,\n      fileName: encFileName.encryptedString,\n      fileSize: encData.buffer.byteLength,\n      adminRequest: admin,\n    };\n\n    let response: CipherResponse;\n    try {\n      const uploadDataResponse = await this.apiService.postCipherAttachment(cipher.id, request);\n      response = admin ? uploadDataResponse.cipherMiniResponse : uploadDataResponse.cipherResponse;\n      await this.fileUploadService.upload(\n        uploadDataResponse,\n        encFileName,\n        encData,\n        this.generateMethods(uploadDataResponse, response, request.adminRequest)\n      );\n    } catch (e) {\n      if (\n        (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) ||\n        (e as ErrorResponse).statusCode === 405\n      ) {\n        response = await this.legacyServerAttachmentFileUpload(\n          request.adminRequest,\n          cipher.id,\n          encFileName,\n          encData,\n          dataEncKey[1]\n        );\n      } else if (e instanceof ErrorResponse) {\n        throw new Error((e as ErrorResponse).getSingleMessage());\n      } else {\n        throw e;\n      }\n    }\n    return response;\n  }\n\n  private generateMethods(\n    uploadData: AttachmentUploadDataResponse,\n    response: CipherResponse,\n    isAdmin: boolean\n  ): FileUploadApiMethods {\n    return {\n      postDirect: this.generatePostDirectCallback(uploadData, isAdmin),\n      renewFileUploadUrl: this.generateRenewFileUploadUrlCallback(uploadData, response, isAdmin),\n      rollback: this.generateRollbackCallback(response, uploadData, isAdmin),\n    };\n  }\n\n  private generatePostDirectCallback(uploadData: AttachmentUploadDataResponse, isAdmin: boolean) {\n    return (data: FormData) => {\n      const response = isAdmin ? uploadData.cipherMiniResponse : uploadData.cipherResponse;\n      return this.apiService.postAttachmentFile(response.id, uploadData.attachmentId, data);\n    };\n  }\n\n  private generateRenewFileUploadUrlCallback(\n    uploadData: AttachmentUploadDataResponse,\n    response: CipherResponse,\n    isAdmin: boolean\n  ) {\n    return async () => {\n      const renewResponse = await this.apiService.renewAttachmentUploadUrl(\n        response.id,\n        uploadData.attachmentId\n      );\n      return renewResponse?.url;\n    };\n  }\n\n  private generateRollbackCallback(\n    response: CipherResponse,\n    uploadData: AttachmentUploadDataResponse,\n    isAdmin: boolean\n  ) {\n    return () => {\n      if (isAdmin) {\n        return this.apiService.deleteCipherAttachmentAdmin(response.id, uploadData.attachmentId);\n      } else {\n        return this.apiService.deleteCipherAttachment(response.id, uploadData.attachmentId);\n      }\n    };\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async legacyServerAttachmentFileUpload(\n    admin: boolean,\n    cipherId: string,\n    encFileName: EncString,\n    encData: EncArrayBuffer,\n    key: EncString\n  ) {\n    const fd = new FormData();\n    try {\n      const blob = new Blob([encData.buffer], { type: \"application/octet-stream\" });\n      fd.append(\"key\", key.encryptedString);\n      fd.append(\"data\", blob, encFileName.encryptedString);\n    } catch (e) {\n      if (Utils.isNode && !Utils.isBrowser) {\n        fd.append(\"key\", key.encryptedString);\n        fd.append(\n          \"data\",\n          Buffer.from(encData.buffer) as any,\n          {\n            filepath: encFileName.encryptedString,\n            contentType: \"application/octet-stream\",\n          } as any\n        );\n      } else {\n        throw e;\n      }\n    }\n\n    let response: CipherResponse;\n    try {\n      if (admin) {\n        response = await this.apiService.postCipherAttachmentAdminLegacy(cipherId, fd);\n      } else {\n        response = await this.apiService.postCipherAttachmentLegacy(cipherId, fd);\n      }\n    } catch (e) {\n      throw new Error((e as ErrorResponse).getSingleMessage());\n    }\n\n    return response;\n  }\n}\n","import { FolderResponse } from \"../response/folder.response\";\n\nexport class FolderData {\n  id: string;\n  name: string;\n  revisionDate: string;\n\n  constructor(response: FolderResponse) {\n    this.name = response.name;\n    this.id = response.id;\n    this.revisionDate = response.revisionDate;\n  }\n}\n","import { Folder } from \"../domain/folder\";\n\nexport class FolderRequest {\n  name: string;\n\n  constructor(folder: Folder) {\n    this.name = folder.name ? folder.name.encryptedString : null;\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { FolderApiServiceAbstraction } from \"../../../vault/abstractions/folder/folder-api.service.abstraction\";\nimport { InternalFolderService } from \"../../../vault/abstractions/folder/folder.service.abstraction\";\nimport { FolderData } from \"../../../vault/models/data/folder.data\";\nimport { Folder } from \"../../../vault/models/domain/folder\";\nimport { FolderRequest } from \"../../../vault/models/request/folder.request\";\nimport { FolderResponse } from \"../../../vault/models/response/folder.response\";\n\nexport class FolderApiService implements FolderApiServiceAbstraction {\n  constructor(private folderService: InternalFolderService, private apiService: ApiService) {}\n\n  async save(folder: Folder): Promise<any> {\n    const request = new FolderRequest(folder);\n\n    let response: FolderResponse;\n    if (folder.id == null) {\n      response = await this.postFolder(request);\n      folder.id = response.id;\n    } else {\n      response = await this.putFolder(folder.id, request);\n    }\n\n    const data = new FolderData(response);\n    await this.folderService.upsert(data);\n  }\n\n  async delete(id: string): Promise<any> {\n    await this.deleteFolder(id);\n    await this.folderService.delete(id);\n  }\n\n  async get(id: string): Promise<FolderResponse> {\n    const r = await this.apiService.send(\"GET\", \"/folders/\" + id, null, true, true);\n    return new FolderResponse(r);\n  }\n\n  private async postFolder(request: FolderRequest): Promise<FolderResponse> {\n    const r = await this.apiService.send(\"POST\", \"/folders\", request, true, true);\n    return new FolderResponse(r);\n  }\n\n  async putFolder(id: string, request: FolderRequest): Promise<FolderResponse> {\n    const r = await this.apiService.send(\"PUT\", \"/folders/\" + id, request, true, true);\n    return new FolderResponse(r);\n  }\n\n  private deleteFolder(id: string): Promise<any> {\n    return this.apiService.send(\"DELETE\", \"/folders/\" + id, null, true, false);\n  }\n}\n","import { Subject } from \"rxjs\";\n\nimport { SyncNotifierService as SyncNotifierServiceAbstraction } from \"../../abstractions/sync/sync-notifier.service.abstraction\";\nimport { SyncEventArgs } from \"../../types/sync-event-args\";\n\n/**\n * This class should most likely have 0 dependencies because it will hopefully\n * be rolled into SyncService once upon a time.\n */\nexport class SyncNotifierService implements SyncNotifierServiceAbstraction {\n  private _sync = new Subject<SyncEventArgs>();\n\n  sync$ = this._sync.asObservable();\n\n  next(event: SyncEventArgs): void {\n    this._sync.next(event);\n  }\n}\n","import { ProductType, ProviderType } from \"../../../enums\";\nimport { OrganizationUserStatusType, OrganizationUserType } from \"../../enums\";\nimport { PermissionsApi } from \"../api/permissions.api\";\nimport { ProfileOrganizationResponse } from \"../response/profile-organization.response\";\n\nexport class OrganizationData {\n  id: string;\n  name: string;\n  status: OrganizationUserStatusType;\n  type: OrganizationUserType;\n  enabled: boolean;\n  usePolicies: boolean;\n  useGroups: boolean;\n  useDirectory: boolean;\n  useEvents: boolean;\n  useTotp: boolean;\n  use2fa: boolean;\n  useApi: boolean;\n  useSso: boolean;\n  useKeyConnector: boolean;\n  useScim: boolean;\n  useCustomPermissions: boolean;\n  useResetPassword: boolean;\n  useSecretsManager: boolean;\n  usePasswordManager: boolean;\n  useActivateAutofillPolicy: boolean;\n  selfHost: boolean;\n  usersGetPremium: boolean;\n  seats: number;\n  maxCollections: number;\n  maxStorageGb?: number;\n  ssoBound: boolean;\n  identifier: string;\n  permissions: PermissionsApi;\n  resetPasswordEnrolled: boolean;\n  userId: string;\n  hasPublicAndPrivateKeys: boolean;\n  providerId: string;\n  providerName: string;\n  providerType?: ProviderType;\n  isProviderUser: boolean;\n  isMember: boolean;\n  familySponsorshipFriendlyName: string;\n  familySponsorshipAvailable: boolean;\n  planProductType: ProductType;\n  keyConnectorEnabled: boolean;\n  keyConnectorUrl: string;\n  familySponsorshipLastSyncDate?: Date;\n  familySponsorshipValidUntil?: Date;\n  familySponsorshipToDelete?: boolean;\n  accessSecretsManager: boolean;\n\n  constructor(\n    response: ProfileOrganizationResponse,\n    options: {\n      isMember: boolean;\n      isProviderUser: boolean;\n    }\n  ) {\n    this.id = response.id;\n    this.name = response.name;\n    this.status = response.status;\n    this.type = response.type;\n    this.enabled = response.enabled;\n    this.usePolicies = response.usePolicies;\n    this.useGroups = response.useGroups;\n    this.useDirectory = response.useDirectory;\n    this.useEvents = response.useEvents;\n    this.useTotp = response.useTotp;\n    this.use2fa = response.use2fa;\n    this.useApi = response.useApi;\n    this.useSso = response.useSso;\n    this.useKeyConnector = response.useKeyConnector;\n    this.useScim = response.useScim;\n    this.useCustomPermissions = response.useCustomPermissions;\n    this.useResetPassword = response.useResetPassword;\n    this.useSecretsManager = response.useSecretsManager;\n    this.usePasswordManager = response.usePasswordManager;\n    this.useActivateAutofillPolicy = response.useActivateAutofillPolicy;\n    this.selfHost = response.selfHost;\n    this.usersGetPremium = response.usersGetPremium;\n    this.seats = response.seats;\n    this.maxCollections = response.maxCollections;\n    this.maxStorageGb = response.maxStorageGb;\n    this.ssoBound = response.ssoBound;\n    this.identifier = response.identifier;\n    this.permissions = response.permissions;\n    this.resetPasswordEnrolled = response.resetPasswordEnrolled;\n    this.userId = response.userId;\n    this.hasPublicAndPrivateKeys = response.hasPublicAndPrivateKeys;\n    this.providerId = response.providerId;\n    this.providerName = response.providerName;\n    this.providerType = response.providerType;\n    this.familySponsorshipFriendlyName = response.familySponsorshipFriendlyName;\n    this.familySponsorshipAvailable = response.familySponsorshipAvailable;\n    this.planProductType = response.planProductType;\n    this.keyConnectorEnabled = response.keyConnectorEnabled;\n    this.keyConnectorUrl = response.keyConnectorUrl;\n    this.familySponsorshipLastSyncDate = response.familySponsorshipLastSyncDate;\n    this.familySponsorshipValidUntil = response.familySponsorshipValidUntil;\n    this.familySponsorshipToDelete = response.familySponsorshipToDelete;\n    this.accessSecretsManager = response.accessSecretsManager;\n\n    this.isMember = options.isMember;\n    this.isProviderUser = options.isProviderUser;\n  }\n}\n","import { ProviderUserStatusType, ProviderUserType } from \"../../enums\";\nimport { ProfileProviderResponse } from \"../response/profile-provider.response\";\n\nexport class ProviderData {\n  id: string;\n  name: string;\n  status: ProviderUserStatusType;\n  type: ProviderUserType;\n  enabled: boolean;\n  userId: string;\n  useEvents: boolean;\n\n  constructor(response: ProfileProviderResponse) {\n    this.id = response.id;\n    this.name = response.name;\n    this.status = response.status;\n    this.type = response.type;\n    this.enabled = response.enabled;\n    this.userId = response.userId;\n    this.useEvents = response.useEvents;\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { SettingsService } from \"../../../abstractions/settings.service\";\nimport { InternalOrganizationServiceAbstraction } from \"../../../admin-console/abstractions/organization/organization.service.abstraction\";\nimport { InternalPolicyService } from \"../../../admin-console/abstractions/policy/policy.service.abstraction\";\nimport { ProviderService } from \"../../../admin-console/abstractions/provider.service\";\nimport { OrganizationData } from \"../../../admin-console/models/data/organization.data\";\nimport { PolicyData } from \"../../../admin-console/models/data/policy.data\";\nimport { ProviderData } from \"../../../admin-console/models/data/provider.data\";\nimport { PolicyResponse } from \"../../../admin-console/models/response/policy.response\";\nimport { KeyConnectorService } from \"../../../auth/abstractions/key-connector.service\";\nimport { ForceResetPasswordReason } from \"../../../auth/models/domain/force-reset-password-reason\";\nimport { DomainsResponse } from \"../../../models/response/domains.response\";\nimport {\n  SyncCipherNotification,\n  SyncFolderNotification,\n  SyncSendNotification,\n} from \"../../../models/response/notification.response\";\nimport { ProfileResponse } from \"../../../models/response/profile.response\";\nimport { CryptoService } from \"../../../platform/abstractions/crypto.service\";\nimport { LogService } from \"../../../platform/abstractions/log.service\";\nimport { MessagingService } from \"../../../platform/abstractions/messaging.service\";\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport { sequentialize } from \"../../../platform/misc/sequentialize\";\nimport { SendData } from \"../../../tools/send/models/data/send.data\";\nimport { SendResponse } from \"../../../tools/send/models/response/send.response\";\nimport { SendApiService } from \"../../../tools/send/services/send-api.service.abstraction\";\nimport { InternalSendService } from \"../../../tools/send/services/send.service.abstraction\";\nimport { CipherService } from \"../../../vault/abstractions/cipher.service\";\nimport { FolderApiServiceAbstraction } from \"../../../vault/abstractions/folder/folder-api.service.abstraction\";\nimport { InternalFolderService } from \"../../../vault/abstractions/folder/folder.service.abstraction\";\nimport { SyncService as SyncServiceAbstraction } from \"../../../vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherData } from \"../../../vault/models/data/cipher.data\";\nimport { FolderData } from \"../../../vault/models/data/folder.data\";\nimport { CipherResponse } from \"../../../vault/models/response/cipher.response\";\nimport { FolderResponse } from \"../../../vault/models/response/folder.response\";\nimport { CollectionService } from \"../../abstractions/collection.service\";\nimport { CollectionData } from \"../../models/data/collection.data\";\nimport { CollectionDetailsResponse } from \"../../models/response/collection.response\";\n\nexport class SyncService implements SyncServiceAbstraction {\n  syncInProgress = false;\n\n  constructor(\n    private apiService: ApiService,\n    private settingsService: SettingsService,\n    private folderService: InternalFolderService,\n    private cipherService: CipherService,\n    private cryptoService: CryptoService,\n    private collectionService: CollectionService,\n    private messagingService: MessagingService,\n    private policyService: InternalPolicyService,\n    private sendService: InternalSendService,\n    private logService: LogService,\n    private keyConnectorService: KeyConnectorService,\n    private stateService: StateService,\n    private providerService: ProviderService,\n    private folderApiService: FolderApiServiceAbstraction,\n    private organizationService: InternalOrganizationServiceAbstraction,\n    private sendApiService: SendApiService,\n    private logoutCallback: (expired: boolean) => Promise<void>\n  ) {}\n\n  async getLastSync(): Promise<Date> {\n    if ((await this.stateService.getUserId()) == null) {\n      return null;\n    }\n\n    const lastSync = await this.stateService.getLastSync();\n    if (lastSync) {\n      return new Date(lastSync);\n    }\n\n    return null;\n  }\n\n  async setLastSync(date: Date, userId?: string): Promise<any> {\n    await this.stateService.setLastSync(date.toJSON(), { userId: userId });\n  }\n\n  @sequentialize(() => \"fullSync\")\n  async fullSync(forceSync: boolean, allowThrowOnError = false): Promise<boolean> {\n    this.syncStarted();\n    const isAuthenticated = await this.stateService.getIsAuthenticated();\n    if (!isAuthenticated) {\n      return this.syncCompleted(false);\n    }\n\n    const now = new Date();\n    let needsSync = false;\n    try {\n      needsSync = await this.needsSyncing(forceSync);\n    } catch (e) {\n      if (allowThrowOnError) {\n        throw e;\n      }\n    }\n\n    if (!needsSync) {\n      await this.setLastSync(now);\n      return this.syncCompleted(false);\n    }\n\n    try {\n      await this.apiService.refreshIdentityToken();\n      const response = await this.apiService.getSync();\n\n      await this.syncProfile(response.profile);\n      await this.syncFolders(response.folders);\n      await this.syncCollections(response.collections);\n      await this.syncCiphers(response.ciphers);\n      await this.syncSends(response.sends);\n      await this.syncSettings(response.domains);\n      await this.syncPolicies(response.policies);\n\n      await this.setLastSync(now);\n      return this.syncCompleted(true);\n    } catch (e) {\n      if (allowThrowOnError) {\n        throw e;\n      } else {\n        return this.syncCompleted(false);\n      }\n    }\n  }\n\n  async syncUpsertFolder(notification: SyncFolderNotification, isEdit: boolean): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      try {\n        const localFolder = await this.folderService.get(notification.id);\n        if (\n          (!isEdit && localFolder == null) ||\n          (isEdit && localFolder != null && localFolder.revisionDate < notification.revisionDate)\n        ) {\n          const remoteFolder = await this.folderApiService.get(notification.id);\n          if (remoteFolder != null) {\n            await this.folderService.upsert(new FolderData(remoteFolder));\n            this.messagingService.send(\"syncedUpsertedFolder\", { folderId: notification.id });\n            return this.syncCompleted(true);\n          }\n        }\n      } catch (e) {\n        this.logService.error(e);\n      }\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncDeleteFolder(notification: SyncFolderNotification): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      await this.folderService.delete(notification.id);\n      this.messagingService.send(\"syncedDeletedFolder\", { folderId: notification.id });\n      this.syncCompleted(true);\n      return true;\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncUpsertCipher(notification: SyncCipherNotification, isEdit: boolean): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      try {\n        let shouldUpdate = true;\n        const localCipher = await this.cipherService.get(notification.id);\n        if (localCipher != null && localCipher.revisionDate >= notification.revisionDate) {\n          shouldUpdate = false;\n        }\n\n        let checkCollections = false;\n        if (shouldUpdate) {\n          if (isEdit) {\n            shouldUpdate = localCipher != null;\n            checkCollections = true;\n          } else {\n            if (notification.collectionIds == null || notification.organizationId == null) {\n              shouldUpdate = localCipher == null;\n            } else {\n              shouldUpdate = false;\n              checkCollections = true;\n            }\n          }\n        }\n\n        if (\n          !shouldUpdate &&\n          checkCollections &&\n          notification.organizationId != null &&\n          notification.collectionIds != null &&\n          notification.collectionIds.length > 0\n        ) {\n          const collections = await this.collectionService.getAll();\n          if (collections != null) {\n            for (let i = 0; i < collections.length; i++) {\n              if (notification.collectionIds.indexOf(collections[i].id) > -1) {\n                shouldUpdate = true;\n                break;\n              }\n            }\n          }\n        }\n\n        if (shouldUpdate) {\n          const remoteCipher = await this.apiService.getFullCipherDetails(notification.id);\n          if (remoteCipher != null) {\n            await this.cipherService.upsert(new CipherData(remoteCipher));\n            this.messagingService.send(\"syncedUpsertedCipher\", { cipherId: notification.id });\n            return this.syncCompleted(true);\n          }\n        }\n      } catch (e) {\n        if (e != null && e.statusCode === 404 && isEdit) {\n          await this.cipherService.delete(notification.id);\n          this.messagingService.send(\"syncedDeletedCipher\", { cipherId: notification.id });\n          return this.syncCompleted(true);\n        }\n      }\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncDeleteCipher(notification: SyncCipherNotification): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      await this.cipherService.delete(notification.id);\n      this.messagingService.send(\"syncedDeletedCipher\", { cipherId: notification.id });\n      return this.syncCompleted(true);\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncUpsertSend(notification: SyncSendNotification, isEdit: boolean): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      try {\n        const localSend = this.sendService.get(notification.id);\n        if (\n          (!isEdit && localSend == null) ||\n          (isEdit && localSend != null && localSend.revisionDate < notification.revisionDate)\n        ) {\n          const remoteSend = await this.sendApiService.getSend(notification.id);\n          if (remoteSend != null) {\n            await this.sendService.upsert(new SendData(remoteSend));\n            this.messagingService.send(\"syncedUpsertedSend\", { sendId: notification.id });\n            return this.syncCompleted(true);\n          }\n        }\n      } catch (e) {\n        this.logService.error(e);\n      }\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncDeleteSend(notification: SyncSendNotification): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      await this.sendService.delete(notification.id);\n      this.messagingService.send(\"syncedDeletedSend\", { sendId: notification.id });\n      this.syncCompleted(true);\n      return true;\n    }\n    return this.syncCompleted(false);\n  }\n\n  // Helpers\n\n  private syncStarted() {\n    this.syncInProgress = true;\n    this.messagingService.send(\"syncStarted\");\n  }\n\n  private syncCompleted(successfully: boolean): boolean {\n    this.syncInProgress = false;\n    this.messagingService.send(\"syncCompleted\", { successfully: successfully });\n    return successfully;\n  }\n\n  private async needsSyncing(forceSync: boolean) {\n    if (forceSync) {\n      return true;\n    }\n\n    const lastSync = await this.getLastSync();\n    if (lastSync == null || lastSync.getTime() === 0) {\n      return true;\n    }\n\n    const response = await this.apiService.getAccountRevisionDate();\n    if (new Date(response) <= lastSync) {\n      return false;\n    }\n    return true;\n  }\n\n  private async syncProfile(response: ProfileResponse) {\n    const stamp = await this.stateService.getSecurityStamp();\n    if (stamp != null && stamp !== response.securityStamp) {\n      if (this.logoutCallback != null) {\n        await this.logoutCallback(true);\n      }\n\n      throw new Error(\"Stamp has changed\");\n    }\n\n    await this.cryptoService.setMasterKeyEncryptedUserKey(response.key);\n    await this.cryptoService.setPrivateKey(response.privateKey);\n    await this.cryptoService.setProviderKeys(response.providers);\n    await this.cryptoService.setOrgKeys(response.organizations, response.providerOrganizations);\n    await this.stateService.setAvatarColor(response.avatarColor);\n    await this.stateService.setSecurityStamp(response.securityStamp);\n    await this.stateService.setEmailVerified(response.emailVerified);\n    await this.stateService.setHasPremiumPersonally(response.premiumPersonally);\n    await this.stateService.setHasPremiumFromOrganization(response.premiumFromOrganization);\n    await this.keyConnectorService.setUsesKeyConnector(response.usesKeyConnector);\n\n    // The `forcePasswordReset` flag indicates an admin has reset the user's password and must be updated\n    if (response.forcePasswordReset) {\n      await this.stateService.setForcePasswordResetReason(\n        ForceResetPasswordReason.AdminForcePasswordReset\n      );\n    }\n\n    await this.syncProfileOrganizations(response);\n\n    const providers: { [id: string]: ProviderData } = {};\n    response.providers.forEach((p) => {\n      providers[p.id] = new ProviderData(p);\n    });\n\n    await this.providerService.save(providers);\n\n    if (await this.keyConnectorService.userNeedsMigration()) {\n      await this.keyConnectorService.setConvertAccountRequired(true);\n      this.messagingService.send(\"convertAccountToKeyConnector\");\n    } else {\n      this.keyConnectorService.removeConvertAccountRequired();\n    }\n  }\n\n  private async syncProfileOrganizations(response: ProfileResponse) {\n    const organizations: { [id: string]: OrganizationData } = {};\n    response.organizations.forEach((o) => {\n      organizations[o.id] = new OrganizationData(o, {\n        isMember: true,\n        isProviderUser: false,\n      });\n    });\n\n    response.providerOrganizations.forEach((o) => {\n      if (organizations[o.id] == null) {\n        organizations[o.id] = new OrganizationData(o, {\n          isMember: false,\n          isProviderUser: true,\n        });\n      } else {\n        organizations[o.id].isProviderUser = true;\n      }\n    });\n\n    await this.organizationService.replace(organizations);\n  }\n\n  private async syncFolders(response: FolderResponse[]) {\n    const folders: { [id: string]: FolderData } = {};\n    response.forEach((f) => {\n      folders[f.id] = new FolderData(f);\n    });\n    return await this.folderService.replace(folders);\n  }\n\n  private async syncCollections(response: CollectionDetailsResponse[]) {\n    const collections: { [id: string]: CollectionData } = {};\n    response.forEach((c) => {\n      collections[c.id] = new CollectionData(c);\n    });\n    return await this.collectionService.replace(collections);\n  }\n\n  private async syncCiphers(response: CipherResponse[]) {\n    const ciphers: { [id: string]: CipherData } = {};\n    response.forEach((c) => {\n      ciphers[c.id] = new CipherData(c);\n    });\n    return await this.cipherService.replace(ciphers);\n  }\n\n  private async syncSends(response: SendResponse[]) {\n    const sends: { [id: string]: SendData } = {};\n    response.forEach((s) => {\n      sends[s.id] = new SendData(s);\n    });\n    return await this.sendService.replace(sends);\n  }\n\n  private async syncSettings(response: DomainsResponse) {\n    let eqDomains: string[][] = [];\n    if (response != null && response.equivalentDomains != null) {\n      eqDomains = eqDomains.concat(response.equivalentDomains);\n    }\n\n    if (response != null && response.globalEquivalentDomains != null) {\n      response.globalEquivalentDomains.forEach((global) => {\n        if (global.domains.length > 0) {\n          eqDomains.push(global.domains);\n        }\n      });\n    }\n\n    return this.settingsService.setEquivalentDomains(eqDomains);\n  }\n\n  private async syncPolicies(response: PolicyResponse[]) {\n    const policies: { [id: string]: PolicyData } = {};\n    if (response != null) {\n      response.forEach((p) => {\n        policies[p.id] = new PolicyData(p);\n      });\n    }\n    return await this.policyService.replace(policies);\n  }\n}\n","import { EncString } from \"../../platform/models/domain/enc-string\";\nimport { Card as CardDomain } from \"../../vault/models/domain/card\";\nimport { CardView } from \"../../vault/models/view/card.view\";\n\nexport class CardExport {\n  static template(): CardExport {\n    const req = new CardExport();\n    req.cardholderName = \"John Doe\";\n    req.brand = \"visa\";\n    req.number = \"4242424242424242\";\n    req.expMonth = \"04\";\n    req.expYear = \"2023\";\n    req.code = \"123\";\n    return req;\n  }\n\n  static toView(req: CardExport, view = new CardView()) {\n    view.cardholderName = req.cardholderName;\n    view.brand = req.brand;\n    view.number = req.number;\n    view.expMonth = req.expMonth;\n    view.expYear = req.expYear;\n    view.code = req.code;\n    return view;\n  }\n\n  static toDomain(req: CardExport, domain = new CardDomain()) {\n    domain.cardholderName = req.cardholderName != null ? new EncString(req.cardholderName) : null;\n    domain.brand = req.brand != null ? new EncString(req.brand) : null;\n    domain.number = req.number != null ? new EncString(req.number) : null;\n    domain.expMonth = req.expMonth != null ? new EncString(req.expMonth) : null;\n    domain.expYear = req.expYear != null ? new EncString(req.expYear) : null;\n    domain.code = req.code != null ? new EncString(req.code) : null;\n    return domain;\n  }\n\n  cardholderName: string;\n  brand: string;\n  number: string;\n  expMonth: string;\n  expYear: string;\n  code: string;\n\n  constructor(o?: CardView | CardDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof CardView) {\n      this.cardholderName = o.cardholderName;\n      this.brand = o.brand;\n      this.number = o.number;\n      this.expMonth = o.expMonth;\n      this.expYear = o.expYear;\n      this.code = o.code;\n    } else {\n      this.cardholderName = o.cardholderName?.encryptedString;\n      this.brand = o.brand?.encryptedString;\n      this.number = o.number?.encryptedString;\n      this.expMonth = o.expMonth?.encryptedString;\n      this.expYear = o.expYear?.encryptedString;\n      this.code = o.code?.encryptedString;\n    }\n  }\n}\n","import { FieldType, LinkedIdType } from \"../../enums\";\nimport { EncString } from \"../../platform/models/domain/enc-string\";\nimport { Field as FieldDomain } from \"../../vault/models/domain/field\";\nimport { FieldView } from \"../../vault/models/view/field.view\";\n\nexport class FieldExport {\n  static template(): FieldExport {\n    const req = new FieldExport();\n    req.name = \"Field name\";\n    req.value = \"Some value\";\n    req.type = FieldType.Text;\n    return req;\n  }\n\n  static toView(req: FieldExport, view = new FieldView()) {\n    view.type = req.type;\n    view.value = req.value;\n    view.name = req.name;\n    view.linkedId = req.linkedId;\n    return view;\n  }\n\n  static toDomain(req: FieldExport, domain = new FieldDomain()) {\n    domain.type = req.type;\n    domain.value = req.value != null ? new EncString(req.value) : null;\n    domain.name = req.name != null ? new EncString(req.name) : null;\n    domain.linkedId = req.linkedId;\n    return domain;\n  }\n\n  name: string;\n  value: string;\n  type: FieldType;\n  linkedId: LinkedIdType;\n\n  constructor(o?: FieldView | FieldDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof FieldView) {\n      this.name = o.name;\n      this.value = o.value;\n    } else {\n      this.name = o.name?.encryptedString;\n      this.value = o.value?.encryptedString;\n    }\n    this.type = o.type;\n    this.linkedId = o.linkedId;\n  }\n}\n","import { EncString } from \"../../platform/models/domain/enc-string\";\nimport { Identity as IdentityDomain } from \"../../vault/models/domain/identity\";\nimport { IdentityView } from \"../../vault/models/view/identity.view\";\n\nexport class IdentityExport {\n  static template(): IdentityExport {\n    const req = new IdentityExport();\n    req.title = \"Mr\";\n    req.firstName = \"John\";\n    req.middleName = \"William\";\n    req.lastName = \"Doe\";\n    req.address1 = \"123 Any St\";\n    req.address2 = \"Apt #123\";\n    req.address3 = null;\n    req.city = \"New York\";\n    req.state = \"NY\";\n    req.postalCode = \"10001\";\n    req.country = \"US\";\n    req.company = \"Acme Inc.\";\n    req.email = \"john@company.com\";\n    req.phone = \"5555551234\";\n    req.ssn = \"000-123-4567\";\n    req.username = \"jdoe\";\n    req.passportNumber = \"US-123456789\";\n    req.licenseNumber = \"D123-12-123-12333\";\n    return req;\n  }\n\n  static toView(req: IdentityExport, view = new IdentityView()) {\n    view.title = req.title;\n    view.firstName = req.firstName;\n    view.middleName = req.middleName;\n    view.lastName = req.lastName;\n    view.address1 = req.address1;\n    view.address2 = req.address2;\n    view.address3 = req.address3;\n    view.city = req.city;\n    view.state = req.state;\n    view.postalCode = req.postalCode;\n    view.country = req.country;\n    view.company = req.company;\n    view.email = req.email;\n    view.phone = req.phone;\n    view.ssn = req.ssn;\n    view.username = req.username;\n    view.passportNumber = req.passportNumber;\n    view.licenseNumber = req.licenseNumber;\n    return view;\n  }\n\n  static toDomain(req: IdentityExport, domain = new IdentityDomain()) {\n    domain.title = req.title != null ? new EncString(req.title) : null;\n    domain.firstName = req.firstName != null ? new EncString(req.firstName) : null;\n    domain.middleName = req.middleName != null ? new EncString(req.middleName) : null;\n    domain.lastName = req.lastName != null ? new EncString(req.lastName) : null;\n    domain.address1 = req.address1 != null ? new EncString(req.address1) : null;\n    domain.address2 = req.address2 != null ? new EncString(req.address2) : null;\n    domain.address3 = req.address3 != null ? new EncString(req.address3) : null;\n    domain.city = req.city != null ? new EncString(req.city) : null;\n    domain.state = req.state != null ? new EncString(req.state) : null;\n    domain.postalCode = req.postalCode != null ? new EncString(req.postalCode) : null;\n    domain.country = req.country != null ? new EncString(req.country) : null;\n    domain.company = req.company != null ? new EncString(req.company) : null;\n    domain.email = req.email != null ? new EncString(req.email) : null;\n    domain.phone = req.phone != null ? new EncString(req.phone) : null;\n    domain.ssn = req.ssn != null ? new EncString(req.ssn) : null;\n    domain.username = req.username != null ? new EncString(req.username) : null;\n    domain.passportNumber = req.passportNumber != null ? new EncString(req.passportNumber) : null;\n    domain.licenseNumber = req.licenseNumber != null ? new EncString(req.licenseNumber) : null;\n    return domain;\n  }\n\n  title: string;\n  firstName: string;\n  middleName: string;\n  lastName: string;\n  address1: string;\n  address2: string;\n  address3: string;\n  city: string;\n  state: string;\n  postalCode: string;\n  country: string;\n  company: string;\n  email: string;\n  phone: string;\n  ssn: string;\n  username: string;\n  passportNumber: string;\n  licenseNumber: string;\n\n  constructor(o?: IdentityView | IdentityDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof IdentityView) {\n      this.title = o.title;\n      this.firstName = o.firstName;\n      this.middleName = o.middleName;\n      this.lastName = o.lastName;\n      this.address1 = o.address1;\n      this.address2 = o.address2;\n      this.address3 = o.address3;\n      this.city = o.city;\n      this.state = o.state;\n      this.postalCode = o.postalCode;\n      this.country = o.country;\n      this.company = o.company;\n      this.email = o.email;\n      this.phone = o.phone;\n      this.ssn = o.ssn;\n      this.username = o.username;\n      this.passportNumber = o.passportNumber;\n      this.licenseNumber = o.licenseNumber;\n    } else {\n      this.title = o.title?.encryptedString;\n      this.firstName = o.firstName?.encryptedString;\n      this.middleName = o.middleName?.encryptedString;\n      this.lastName = o.lastName?.encryptedString;\n      this.address1 = o.address1?.encryptedString;\n      this.address2 = o.address2?.encryptedString;\n      this.address3 = o.address3?.encryptedString;\n      this.city = o.city?.encryptedString;\n      this.state = o.state?.encryptedString;\n      this.postalCode = o.postalCode?.encryptedString;\n      this.country = o.country?.encryptedString;\n      this.company = o.company?.encryptedString;\n      this.email = o.email?.encryptedString;\n      this.phone = o.phone?.encryptedString;\n      this.ssn = o.ssn?.encryptedString;\n      this.username = o.username?.encryptedString;\n      this.passportNumber = o.passportNumber?.encryptedString;\n      this.licenseNumber = o.licenseNumber?.encryptedString;\n    }\n  }\n}\n","import { UriMatchType } from \"../../enums\";\nimport { EncString } from \"../../platform/models/domain/enc-string\";\nimport { LoginUri as LoginUriDomain } from \"../../vault/models/domain/login-uri\";\nimport { LoginUriView } from \"../../vault/models/view/login-uri.view\";\n\nexport class LoginUriExport {\n  static template(): LoginUriExport {\n    const req = new LoginUriExport();\n    req.uri = \"https://google.com\";\n    req.match = null;\n    return req;\n  }\n\n  static toView(req: LoginUriExport, view = new LoginUriView()) {\n    view.uri = req.uri;\n    view.match = req.match;\n    return view;\n  }\n\n  static toDomain(req: LoginUriExport, domain = new LoginUriDomain()) {\n    domain.uri = req.uri != null ? new EncString(req.uri) : null;\n    domain.match = req.match;\n    return domain;\n  }\n\n  uri: string;\n  match: UriMatchType = null;\n\n  constructor(o?: LoginUriView | LoginUriDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof LoginUriView) {\n      this.uri = o.uri;\n    } else {\n      this.uri = o.uri?.encryptedString;\n    }\n    this.match = o.match;\n  }\n}\n","import { EncString } from \"../../platform/models/domain/enc-string\";\nimport { Login as LoginDomain } from \"../../vault/models/domain/login\";\nimport { LoginView } from \"../../vault/models/view/login.view\";\n\nimport { LoginUriExport } from \"./login-uri.export\";\n\nexport class LoginExport {\n  static template(): LoginExport {\n    const req = new LoginExport();\n    req.uris = [];\n    req.username = \"jdoe\";\n    req.password = \"myp@ssword123\";\n    req.totp = \"JBSWY3DPEHPK3PXP\";\n    return req;\n  }\n\n  static toView(req: LoginExport, view = new LoginView()) {\n    if (req.uris != null) {\n      view.uris = req.uris.map((u) => LoginUriExport.toView(u));\n    }\n    view.username = req.username;\n    view.password = req.password;\n    view.totp = req.totp;\n    return view;\n  }\n\n  static toDomain(req: LoginExport, domain = new LoginDomain()) {\n    if (req.uris != null) {\n      domain.uris = req.uris.map((u) => LoginUriExport.toDomain(u));\n    }\n    domain.username = req.username != null ? new EncString(req.username) : null;\n    domain.password = req.password != null ? new EncString(req.password) : null;\n    domain.totp = req.totp != null ? new EncString(req.totp) : null;\n    return domain;\n  }\n\n  uris: LoginUriExport[];\n  username: string;\n  password: string;\n  totp: string;\n\n  constructor(o?: LoginView | LoginDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o.uris != null) {\n      if (o instanceof LoginView) {\n        this.uris = o.uris.map((u) => new LoginUriExport(u));\n      } else {\n        this.uris = o.uris.map((u) => new LoginUriExport(u));\n      }\n    }\n\n    if (o instanceof LoginView) {\n      this.username = o.username;\n      this.password = o.password;\n      this.totp = o.totp;\n    } else {\n      this.username = o.username?.encryptedString;\n      this.password = o.password?.encryptedString;\n      this.totp = o.totp?.encryptedString;\n    }\n  }\n}\n","import { SecureNoteType } from \"../../enums\";\nimport { SecureNote as SecureNoteDomain } from \"../../vault/models/domain/secure-note\";\nimport { SecureNoteView } from \"../../vault/models/view/secure-note.view\";\n\nexport class SecureNoteExport {\n  static template(): SecureNoteExport {\n    const req = new SecureNoteExport();\n    req.type = SecureNoteType.Generic;\n    return req;\n  }\n\n  static toView(req: SecureNoteExport, view = new SecureNoteView()) {\n    view.type = req.type;\n    return view;\n  }\n\n  static toDomain(req: SecureNoteExport, view = new SecureNoteDomain()) {\n    view.type = req.type;\n    return view;\n  }\n\n  type: SecureNoteType;\n\n  constructor(o?: SecureNoteView | SecureNoteDomain) {\n    if (o == null) {\n      return;\n    }\n\n    this.type = o.type;\n  }\n}\n","import { EncString } from \"../../platform/models/domain/enc-string\";\nimport { CipherRepromptType } from \"../../vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../vault/enums/cipher-type\";\nimport { Cipher as CipherDomain } from \"../../vault/models/domain/cipher\";\nimport { CipherView } from \"../../vault/models/view/cipher.view\";\n\nimport { CardExport } from \"./card.export\";\nimport { FieldExport } from \"./field.export\";\nimport { IdentityExport } from \"./identity.export\";\nimport { LoginExport } from \"./login.export\";\nimport { SecureNoteExport } from \"./secure-note.export\";\n\nexport class CipherExport {\n  static template(): CipherExport {\n    const req = new CipherExport();\n    req.organizationId = null;\n    req.collectionIds = null;\n    req.folderId = null;\n    req.type = CipherType.Login;\n    req.name = \"Item name\";\n    req.notes = \"Some notes about this item.\";\n    req.favorite = false;\n    req.fields = [];\n    req.login = null;\n    req.secureNote = null;\n    req.card = null;\n    req.identity = null;\n    req.reprompt = CipherRepromptType.None;\n    return req;\n  }\n\n  static toView(req: CipherExport, view = new CipherView()) {\n    view.type = req.type;\n    view.folderId = req.folderId;\n    if (view.organizationId == null) {\n      view.organizationId = req.organizationId;\n    }\n    if (view.collectionIds || req.collectionIds) {\n      const set = new Set((view.collectionIds ?? []).concat(req.collectionIds ?? []));\n      view.collectionIds = Array.from(set.values());\n    }\n    view.name = req.name;\n    view.notes = req.notes;\n    view.favorite = req.favorite;\n    view.reprompt = req.reprompt ?? CipherRepromptType.None;\n\n    if (req.fields != null) {\n      view.fields = req.fields.map((f) => FieldExport.toView(f));\n    }\n\n    switch (req.type) {\n      case CipherType.Login:\n        view.login = LoginExport.toView(req.login);\n        break;\n      case CipherType.SecureNote:\n        view.secureNote = SecureNoteExport.toView(req.secureNote);\n        break;\n      case CipherType.Card:\n        view.card = CardExport.toView(req.card);\n        break;\n      case CipherType.Identity:\n        view.identity = IdentityExport.toView(req.identity);\n        break;\n    }\n\n    return view;\n  }\n\n  static toDomain(req: CipherExport, domain = new CipherDomain()) {\n    domain.type = req.type;\n    domain.folderId = req.folderId;\n    if (domain.organizationId == null) {\n      domain.organizationId = req.organizationId;\n    }\n    domain.name = req.name != null ? new EncString(req.name) : null;\n    domain.notes = req.notes != null ? new EncString(req.notes) : null;\n    domain.favorite = req.favorite;\n    domain.reprompt = req.reprompt ?? CipherRepromptType.None;\n\n    if (req.fields != null) {\n      domain.fields = req.fields.map((f) => FieldExport.toDomain(f));\n    }\n\n    switch (req.type) {\n      case CipherType.Login:\n        domain.login = LoginExport.toDomain(req.login);\n        break;\n      case CipherType.SecureNote:\n        domain.secureNote = SecureNoteExport.toDomain(req.secureNote);\n        break;\n      case CipherType.Card:\n        domain.card = CardExport.toDomain(req.card);\n        break;\n      case CipherType.Identity:\n        domain.identity = IdentityExport.toDomain(req.identity);\n        break;\n    }\n\n    return domain;\n  }\n\n  type: CipherType;\n  folderId: string;\n  organizationId: string;\n  collectionIds: string[];\n  name: string;\n  notes: string;\n  favorite: boolean;\n  fields: FieldExport[];\n  login: LoginExport;\n  secureNote: SecureNoteExport;\n  card: CardExport;\n  identity: IdentityExport;\n  reprompt: CipherRepromptType;\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: CipherView | CipherDomain) {\n    this.organizationId = o.organizationId;\n    this.folderId = o.folderId;\n    this.type = o.type;\n    this.reprompt = o.reprompt;\n\n    if (o instanceof CipherView) {\n      this.name = o.name;\n      this.notes = o.notes;\n    } else {\n      this.name = o.name?.encryptedString;\n      this.notes = o.notes?.encryptedString;\n    }\n\n    this.favorite = o.favorite;\n\n    if (o.fields != null) {\n      if (o instanceof CipherView) {\n        this.fields = o.fields.map((f) => new FieldExport(f));\n      } else {\n        this.fields = o.fields.map((f) => new FieldExport(f));\n      }\n    }\n\n    switch (o.type) {\n      case CipherType.Login:\n        this.login = new LoginExport(o.login);\n        break;\n      case CipherType.SecureNote:\n        this.secureNote = new SecureNoteExport(o.secureNote);\n        break;\n      case CipherType.Card:\n        this.card = new CardExport(o.card);\n        break;\n      case CipherType.Identity:\n        this.identity = new IdentityExport(o.identity);\n        break;\n    }\n  }\n}\n","import { Cipher as CipherDomain } from \"../../vault/models/domain/cipher\";\nimport { CipherView } from \"../../vault/models/view/cipher.view\";\n\nimport { CipherExport } from \"./cipher.export\";\n\nexport class CipherWithIdExport extends CipherExport {\n  id: string;\n  collectionIds: string[];\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: CipherView | CipherDomain) {\n    this.id = o.id;\n    super.build(o);\n    this.collectionIds = o.collectionIds;\n  }\n}\n","import { EncString } from \"../../platform/models/domain/enc-string\";\nimport { Collection as CollectionDomain } from \"../../vault/models/domain/collection\";\nimport { CollectionView } from \"../../vault/models/view/collection.view\";\n\nexport class CollectionExport {\n  static template(): CollectionExport {\n    const req = new CollectionExport();\n    req.organizationId = \"00000000-0000-0000-0000-000000000000\";\n    req.name = \"Collection name\";\n    req.externalId = null;\n    return req;\n  }\n\n  static toView(req: CollectionExport, view = new CollectionView()) {\n    view.name = req.name;\n    view.externalId = req.externalId;\n    if (view.organizationId == null) {\n      view.organizationId = req.organizationId;\n    }\n    return view;\n  }\n\n  static toDomain(req: CollectionExport, domain = new CollectionDomain()) {\n    domain.name = req.name != null ? new EncString(req.name) : null;\n    domain.externalId = req.externalId;\n    if (domain.organizationId == null) {\n      domain.organizationId = req.organizationId;\n    }\n    return domain;\n  }\n\n  organizationId: string;\n  name: string;\n  externalId: string;\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: CollectionView | CollectionDomain) {\n    this.organizationId = o.organizationId;\n    if (o instanceof CollectionView) {\n      this.name = o.name;\n    } else {\n      this.name = o.name?.encryptedString;\n    }\n    this.externalId = o.externalId;\n  }\n}\n","import { Collection as CollectionDomain } from \"../../vault/models/domain/collection\";\nimport { CollectionView } from \"../../vault/models/view/collection.view\";\n\nimport { CollectionExport } from \"./collection.export\";\n\nexport class CollectionWithIdExport extends CollectionExport {\n  id: string;\n\n  static toView(req: CollectionWithIdExport, view = new CollectionView()) {\n    view.id = req.id;\n    return super.toView(req, view);\n  }\n\n  static toDomain(req: CollectionWithIdExport, domain = new CollectionDomain()) {\n    domain.id = req.id;\n    return super.toDomain(req, domain);\n  }\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: CollectionView | CollectionDomain) {\n    this.id = o.id;\n    super.build(o);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { ITreeNodeObject } from \"../../../models/domain/tree-node\";\nimport { View } from \"../../../models/view/view\";\nimport { Folder } from \"../domain/folder\";\n\nexport class FolderView implements View, ITreeNodeObject {\n  id: string = null;\n  name: string = null;\n  revisionDate: Date = null;\n\n  constructor(f?: Folder) {\n    if (!f) {\n      return;\n    }\n\n    this.id = f.id;\n    this.revisionDate = f.revisionDate;\n  }\n\n  static fromJSON(obj: Jsonify<FolderView>) {\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    return Object.assign(new FolderView(), obj, { revisionDate });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { FolderData } from \"../data/folder.data\";\nimport { FolderView } from \"../view/folder.view\";\n\nexport class Folder extends Domain {\n  id: string;\n  name: EncString;\n  revisionDate: Date;\n\n  constructor(obj?: FolderData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        name: null,\n      },\n      [\"id\"]\n    );\n\n    this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;\n  }\n\n  decrypt(): Promise<FolderView> {\n    return this.decryptObj(\n      new FolderView(this),\n      {\n        name: null,\n      },\n      null\n    );\n  }\n\n  static fromJSON(obj: Jsonify<Folder>) {\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    return Object.assign(new Folder(), obj, { name: EncString.fromJSON(obj.name), revisionDate });\n  }\n}\n","import { EncString } from \"../../platform/models/domain/enc-string\";\nimport { Folder as FolderDomain } from \"../../vault/models/domain/folder\";\nimport { FolderView } from \"../../vault/models/view/folder.view\";\n\nexport class FolderExport {\n  static template(): FolderExport {\n    const req = new FolderExport();\n    req.name = \"Folder name\";\n    return req;\n  }\n\n  static toView(req: FolderExport, view = new FolderView()) {\n    view.name = req.name;\n    return view;\n  }\n\n  static toDomain(req: FolderExport, domain = new FolderDomain()) {\n    domain.name = req.name != null ? new EncString(req.name) : null;\n    return domain;\n  }\n\n  name: string;\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: FolderView | FolderDomain) {\n    if (o instanceof FolderView) {\n      this.name = o.name;\n    } else {\n      this.name = o.name?.encryptedString;\n    }\n  }\n}\n","import { Folder as FolderDomain } from \"../../vault/models/domain/folder\";\nimport { FolderView } from \"../../vault/models/view/folder.view\";\n\nimport { FolderExport } from \"./folder.export\";\n\nexport class FolderWithIdExport extends FolderExport {\n  id: string;\n\n  static toView(req: FolderWithIdExport, view = new FolderView()) {\n    view.id = req.id;\n    return super.toView(req, view);\n  }\n\n  static toDomain(req: FolderWithIdExport, domain = new FolderDomain()) {\n    domain.id = req.id;\n    return super.toDomain(req, domain);\n  }\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: FolderView | FolderDomain) {\n    this.id = o.id;\n    super.build(o);\n  }\n}\n","export class ExportHelper {\n  static getFileName(prefix: string = null, extension = \"csv\"): string {\n    const now = new Date();\n    const dateString =\n      now.getFullYear() +\n      \"\" +\n      this.padNumber(now.getMonth() + 1, 2) +\n      \"\" +\n      this.padNumber(now.getDate(), 2) +\n      this.padNumber(now.getHours(), 2) +\n      \"\" +\n      this.padNumber(now.getMinutes(), 2) +\n      this.padNumber(now.getSeconds(), 2);\n\n    return \"bitwarden\" + (prefix ? \"_\" + prefix : \"\") + \"_export_\" + dateString + \".\" + extension;\n  }\n\n  private static padNumber(num: number, width: number, padCharacter = \"0\"): string {\n    const numString = num.toString();\n    return numString.length >= width\n      ? numString\n      : new Array(width - numString.length + 1).join(padCharacter) + numString;\n  }\n}\n","import * as papa from \"papaparse\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { KdfConfig } from \"@bitwarden/common/auth/models/domain/kdf-config\";\nimport { KdfType } from \"@bitwarden/common/enums\";\nimport {\n  CipherWithIdExport,\n  CollectionWithIdExport,\n  FolderWithIdExport,\n} from \"@bitwarden/common/models/export\";\nimport { CryptoFunctionService } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherData } from \"@bitwarden/common/vault/models/data/cipher.data\";\nimport { CollectionData } from \"@bitwarden/common/vault/models/data/collection.data\";\nimport { Cipher } from \"@bitwarden/common/vault/models/domain/cipher\";\nimport { Collection } from \"@bitwarden/common/vault/models/domain/collection\";\nimport { Folder } from \"@bitwarden/common/vault/models/domain/folder\";\nimport { CollectionDetailsResponse } from \"@bitwarden/common/vault/models/response/collection.response\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { CollectionView } from \"@bitwarden/common/vault/models/view/collection.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\nimport { ExportHelper } from \"../../export-helper\";\nimport { BitwardenPasswordProtectedFileFormat } from \"../bitwarden-password-protected-types\";\n\nimport { ExportFormat, VaultExportServiceAbstraction } from \"./vault-export.service.abstraction\";\n\nexport class VaultExportService implements VaultExportServiceAbstraction {\n  constructor(\n    private folderService: FolderService,\n    private cipherService: CipherService,\n    private apiService: ApiService,\n    private cryptoService: CryptoService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private stateService: StateService\n  ) {}\n\n  async getExport(format: ExportFormat = \"csv\", organizationId?: string): Promise<string> {\n    if (organizationId) {\n      return await this.getOrganizationExport(organizationId, format);\n    }\n\n    if (format === \"encrypted_json\") {\n      return this.getEncryptedExport();\n    } else {\n      return this.getDecryptedExport(format);\n    }\n  }\n\n  async getPasswordProtectedExport(password: string, organizationId?: string): Promise<string> {\n    const clearText = organizationId\n      ? await this.getOrganizationExport(organizationId, \"json\")\n      : await this.getExport(\"json\");\n\n    const kdfType: KdfType = await this.stateService.getKdfType();\n    const kdfConfig: KdfConfig = await this.stateService.getKdfConfig();\n\n    const salt = Utils.fromBufferToB64(await this.cryptoFunctionService.randomBytes(16));\n    const key = await this.cryptoService.makePinKey(password, salt, kdfType, kdfConfig);\n\n    const encKeyValidation = await this.cryptoService.encrypt(Utils.newGuid(), key);\n    const encText = await this.cryptoService.encrypt(clearText, key);\n\n    const jsonDoc: BitwardenPasswordProtectedFileFormat = {\n      encrypted: true,\n      passwordProtected: true,\n      salt: salt,\n      kdfType: kdfType,\n      kdfIterations: kdfConfig.iterations,\n      kdfMemory: kdfConfig.memory,\n      kdfParallelism: kdfConfig.parallelism,\n      encKeyValidation_DO_NOT_EDIT: encKeyValidation.encryptedString,\n      data: encText.encryptedString,\n    };\n\n    return JSON.stringify(jsonDoc, null, \"  \");\n  }\n\n  async getOrganizationExport(\n    organizationId: string,\n    format: ExportFormat = \"csv\"\n  ): Promise<string> {\n    if (format === \"encrypted_json\") {\n      return this.getOrganizationEncryptedExport(organizationId);\n    } else {\n      return this.getOrganizationDecryptedExport(organizationId, format);\n    }\n  }\n\n  getFileName(prefix: string = null, extension = \"csv\"): string {\n    return ExportHelper.getFileName(prefix, extension);\n  }\n\n  private async getDecryptedExport(format: \"json\" | \"csv\"): Promise<string> {\n    let decFolders: FolderView[] = [];\n    let decCiphers: CipherView[] = [];\n    const promises = [];\n\n    promises.push(\n      this.folderService.getAllDecryptedFromState().then((folders) => {\n        decFolders = folders;\n      })\n    );\n\n    promises.push(\n      this.cipherService.getAllDecrypted().then((ciphers) => {\n        decCiphers = ciphers.filter((f) => f.deletedDate == null);\n      })\n    );\n\n    await Promise.all(promises);\n\n    if (format === \"csv\") {\n      const foldersMap = new Map<string, FolderView>();\n      decFolders.forEach((f) => {\n        if (f.id != null) {\n          foldersMap.set(f.id, f);\n        }\n      });\n\n      const exportCiphers: any[] = [];\n      decCiphers.forEach((c) => {\n        // only export logins and secure notes\n        if (c.type !== CipherType.Login && c.type !== CipherType.SecureNote) {\n          return;\n        }\n        if (c.organizationId != null) {\n          return;\n        }\n\n        const cipher: any = {};\n        cipher.folder =\n          c.folderId != null && foldersMap.has(c.folderId) ? foldersMap.get(c.folderId).name : null;\n        cipher.favorite = c.favorite ? 1 : null;\n        this.buildCommonCipher(cipher, c);\n        exportCiphers.push(cipher);\n      });\n\n      return papa.unparse(exportCiphers);\n    } else {\n      const jsonDoc: any = {\n        encrypted: false,\n        folders: [],\n        items: [],\n      };\n\n      decFolders.forEach((f) => {\n        if (f.id == null) {\n          return;\n        }\n        const folder = new FolderWithIdExport();\n        folder.build(f);\n        jsonDoc.folders.push(folder);\n      });\n\n      decCiphers.forEach((c) => {\n        if (c.organizationId != null) {\n          return;\n        }\n        const cipher = new CipherWithIdExport();\n        cipher.build(c);\n        cipher.collectionIds = null;\n        jsonDoc.items.push(cipher);\n      });\n\n      return JSON.stringify(jsonDoc, null, \"  \");\n    }\n  }\n\n  private async getEncryptedExport(): Promise<string> {\n    let folders: Folder[] = [];\n    let ciphers: Cipher[] = [];\n    const promises = [];\n\n    promises.push(\n      this.folderService.getAllFromState().then((f) => {\n        folders = f;\n      })\n    );\n\n    promises.push(\n      this.cipherService.getAll().then((c) => {\n        ciphers = c.filter((f) => f.deletedDate == null);\n      })\n    );\n\n    await Promise.all(promises);\n\n    const encKeyValidation = await this.cryptoService.encrypt(Utils.newGuid());\n\n    const jsonDoc: any = {\n      encrypted: true,\n      encKeyValidation_DO_NOT_EDIT: encKeyValidation.encryptedString,\n      folders: [],\n      items: [],\n    };\n\n    folders.forEach((f) => {\n      if (f.id == null) {\n        return;\n      }\n      const folder = new FolderWithIdExport();\n      folder.build(f);\n      jsonDoc.folders.push(folder);\n    });\n\n    ciphers.forEach((c) => {\n      if (c.organizationId != null) {\n        return;\n      }\n      const cipher = new CipherWithIdExport();\n      cipher.build(c);\n      cipher.collectionIds = null;\n      jsonDoc.items.push(cipher);\n    });\n\n    return JSON.stringify(jsonDoc, null, \"  \");\n  }\n\n  private async getOrganizationDecryptedExport(\n    organizationId: string,\n    format: \"json\" | \"csv\"\n  ): Promise<string> {\n    const decCollections: CollectionView[] = [];\n    const decCiphers: CipherView[] = [];\n    const promises = [];\n\n    promises.push(\n      this.apiService.getOrganizationExport(organizationId).then((exportData) => {\n        const exportPromises: any = [];\n        if (exportData != null) {\n          if (exportData.collections != null && exportData.collections.length > 0) {\n            exportData.collections.forEach((c) => {\n              const collection = new Collection(new CollectionData(c as CollectionDetailsResponse));\n              exportPromises.push(\n                collection.decrypt().then((decCol) => {\n                  decCollections.push(decCol);\n                })\n              );\n            });\n          }\n          if (exportData.ciphers != null && exportData.ciphers.length > 0) {\n            exportData.ciphers\n              .filter((c) => c.deletedDate === null)\n              .forEach((c) => {\n                const cipher = new Cipher(new CipherData(c));\n                exportPromises.push(\n                  cipher.decrypt().then((decCipher) => {\n                    decCiphers.push(decCipher);\n                  })\n                );\n              });\n          }\n        }\n        return Promise.all(exportPromises);\n      })\n    );\n\n    await Promise.all(promises);\n\n    if (format === \"csv\") {\n      const collectionsMap = new Map<string, CollectionView>();\n      decCollections.forEach((c) => {\n        collectionsMap.set(c.id, c);\n      });\n\n      const exportCiphers: any[] = [];\n      decCiphers.forEach((c) => {\n        // only export logins and secure notes\n        if (c.type !== CipherType.Login && c.type !== CipherType.SecureNote) {\n          return;\n        }\n\n        const cipher: any = {};\n        cipher.collections = [];\n        if (c.collectionIds != null) {\n          cipher.collections = c.collectionIds\n            .filter((id) => collectionsMap.has(id))\n            .map((id) => collectionsMap.get(id).name);\n        }\n        this.buildCommonCipher(cipher, c);\n        exportCiphers.push(cipher);\n      });\n\n      return papa.unparse(exportCiphers);\n    } else {\n      const jsonDoc: any = {\n        encrypted: false,\n        collections: [],\n        items: [],\n      };\n\n      decCollections.forEach((c) => {\n        const collection = new CollectionWithIdExport();\n        collection.build(c);\n        jsonDoc.collections.push(collection);\n      });\n\n      decCiphers.forEach((c) => {\n        const cipher = new CipherWithIdExport();\n        cipher.build(c);\n        jsonDoc.items.push(cipher);\n      });\n      return JSON.stringify(jsonDoc, null, \"  \");\n    }\n  }\n\n  private async getOrganizationEncryptedExport(organizationId: string): Promise<string> {\n    const collections: Collection[] = [];\n    const ciphers: Cipher[] = [];\n    const promises = [];\n\n    promises.push(\n      this.apiService.getCollections(organizationId).then((c) => {\n        const collectionPromises: any = [];\n        if (c != null && c.data != null && c.data.length > 0) {\n          c.data.forEach((r) => {\n            const collection = new Collection(new CollectionData(r as CollectionDetailsResponse));\n            collections.push(collection);\n          });\n        }\n        return Promise.all(collectionPromises);\n      })\n    );\n\n    promises.push(\n      this.apiService.getCiphersOrganization(organizationId).then((c) => {\n        const cipherPromises: any = [];\n        if (c != null && c.data != null && c.data.length > 0) {\n          c.data\n            .filter((item) => item.deletedDate === null)\n            .forEach((item) => {\n              const cipher = new Cipher(new CipherData(item));\n              ciphers.push(cipher);\n            });\n        }\n        return Promise.all(cipherPromises);\n      })\n    );\n\n    await Promise.all(promises);\n\n    const orgKey = await this.cryptoService.getOrgKey(organizationId);\n    const encKeyValidation = await this.cryptoService.encrypt(Utils.newGuid(), orgKey);\n\n    const jsonDoc: any = {\n      encrypted: true,\n      encKeyValidation_DO_NOT_EDIT: encKeyValidation.encryptedString,\n      collections: [],\n      items: [],\n    };\n\n    collections.forEach((c) => {\n      const collection = new CollectionWithIdExport();\n      collection.build(c);\n      jsonDoc.collections.push(collection);\n    });\n\n    ciphers.forEach((c) => {\n      const cipher = new CipherWithIdExport();\n      cipher.build(c);\n      jsonDoc.items.push(cipher);\n    });\n    return JSON.stringify(jsonDoc, null, \"  \");\n  }\n\n  private buildCommonCipher(cipher: any, c: CipherView) {\n    cipher.type = null;\n    cipher.name = c.name;\n    cipher.notes = c.notes;\n    cipher.fields = null;\n    cipher.reprompt = c.reprompt;\n    // Login props\n    cipher.login_uri = null;\n    cipher.login_username = null;\n    cipher.login_password = null;\n    cipher.login_totp = null;\n\n    if (c.fields) {\n      c.fields.forEach((f: any) => {\n        if (!cipher.fields) {\n          cipher.fields = \"\";\n        } else {\n          cipher.fields += \"\\n\";\n        }\n\n        cipher.fields += (f.name || \"\") + \": \" + f.value;\n      });\n    }\n\n    switch (c.type) {\n      case CipherType.Login:\n        cipher.type = \"login\";\n        cipher.login_username = c.login.username;\n        cipher.login_password = c.login.password;\n        cipher.login_totp = c.login.totp;\n\n        if (c.login.uris) {\n          cipher.login_uri = [];\n          c.login.uris.forEach((u) => {\n            cipher.login_uri.push(u.uri);\n          });\n        }\n        break;\n      case CipherType.SecureNote:\n        cipher.type = \"note\";\n        break;\n      default:\n        return;\n    }\n\n    return cipher;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { ProductType, ProviderType } from \"../../../enums\";\nimport { OrganizationUserStatusType, OrganizationUserType } from \"../../enums\";\nimport { PermissionsApi } from \"../api/permissions.api\";\nimport { OrganizationData } from \"../data/organization.data\";\n\nexport class Organization {\n  id: string;\n  name: string;\n  status: OrganizationUserStatusType;\n\n  /**\n   * The member's role in the organization.\n   * Avoid using this for permission checks - use the getters instead (e.g. isOwner, isAdmin, canManageX), because they\n   * properly handle permission inheritance and relationships.\n   */\n  type: OrganizationUserType;\n\n  enabled: boolean;\n  usePolicies: boolean;\n  useGroups: boolean;\n  useDirectory: boolean;\n  useEvents: boolean;\n  useTotp: boolean;\n  use2fa: boolean;\n  useApi: boolean;\n  useSso: boolean;\n  useKeyConnector: boolean;\n  useScim: boolean;\n  useCustomPermissions: boolean;\n  useResetPassword: boolean;\n  useSecretsManager: boolean;\n  usePasswordManager: boolean;\n  useActivateAutofillPolicy: boolean;\n  selfHost: boolean;\n  usersGetPremium: boolean;\n  seats: number;\n  maxCollections: number;\n  maxStorageGb?: number;\n  ssoBound: boolean;\n  identifier: string;\n  permissions: PermissionsApi;\n  resetPasswordEnrolled: boolean;\n  userId: string;\n  hasPublicAndPrivateKeys: boolean;\n  providerId: string;\n  providerName: string;\n  providerType?: ProviderType;\n  /**\n   * Indicates that a user is a ProviderUser for the organization\n   */\n  isProviderUser: boolean;\n  /**\n   * Indicates that a user is a member for the organization (may be `false` if they have access via a Provider only)\n   */\n  isMember: boolean;\n  familySponsorshipFriendlyName: string;\n  familySponsorshipAvailable: boolean;\n  planProductType: ProductType;\n  keyConnectorEnabled: boolean;\n  keyConnectorUrl: string;\n  familySponsorshipLastSyncDate?: Date;\n  familySponsorshipValidUntil?: Date;\n  familySponsorshipToDelete?: boolean;\n  accessSecretsManager: boolean;\n\n  constructor(obj?: OrganizationData) {\n    if (obj == null) {\n      return;\n    }\n\n    this.id = obj.id;\n    this.name = obj.name;\n    this.status = obj.status;\n    this.type = obj.type;\n    this.enabled = obj.enabled;\n    this.usePolicies = obj.usePolicies;\n    this.useGroups = obj.useGroups;\n    this.useDirectory = obj.useDirectory;\n    this.useEvents = obj.useEvents;\n    this.useTotp = obj.useTotp;\n    this.use2fa = obj.use2fa;\n    this.useApi = obj.useApi;\n    this.useSso = obj.useSso;\n    this.useKeyConnector = obj.useKeyConnector;\n    this.useScim = obj.useScim;\n    this.useCustomPermissions = obj.useCustomPermissions;\n    this.useResetPassword = obj.useResetPassword;\n    this.useSecretsManager = obj.useSecretsManager;\n    this.usePasswordManager = obj.usePasswordManager;\n    this.useActivateAutofillPolicy = obj.useActivateAutofillPolicy;\n    this.selfHost = obj.selfHost;\n    this.usersGetPremium = obj.usersGetPremium;\n    this.seats = obj.seats;\n    this.maxCollections = obj.maxCollections;\n    this.maxStorageGb = obj.maxStorageGb;\n    this.ssoBound = obj.ssoBound;\n    this.identifier = obj.identifier;\n    this.permissions = obj.permissions;\n    this.resetPasswordEnrolled = obj.resetPasswordEnrolled;\n    this.userId = obj.userId;\n    this.hasPublicAndPrivateKeys = obj.hasPublicAndPrivateKeys;\n    this.providerId = obj.providerId;\n    this.providerName = obj.providerName;\n    this.providerType = obj.providerType;\n    this.isProviderUser = obj.isProviderUser;\n    this.isMember = obj.isMember;\n    this.familySponsorshipFriendlyName = obj.familySponsorshipFriendlyName;\n    this.familySponsorshipAvailable = obj.familySponsorshipAvailable;\n    this.planProductType = obj.planProductType;\n    this.keyConnectorEnabled = obj.keyConnectorEnabled;\n    this.keyConnectorUrl = obj.keyConnectorUrl;\n    this.familySponsorshipLastSyncDate = obj.familySponsorshipLastSyncDate;\n    this.familySponsorshipValidUntil = obj.familySponsorshipValidUntil;\n    this.familySponsorshipToDelete = obj.familySponsorshipToDelete;\n    this.accessSecretsManager = obj.accessSecretsManager;\n  }\n\n  get canAccess() {\n    if (this.isOwner) {\n      return true;\n    }\n    return this.enabled && this.status === OrganizationUserStatusType.Confirmed;\n  }\n\n  /**\n   * Whether a user has Manager permissions or greater\n   */\n  get isManager() {\n    return this.type === OrganizationUserType.Manager || this.isAdmin;\n  }\n\n  /**\n   * Whether a user has Admin permissions or greater\n   */\n  get isAdmin() {\n    return this.type === OrganizationUserType.Admin || this.isOwner;\n  }\n\n  /**\n   * Whether a user has Owner permissions (including ProviderUsers)\n   */\n  get isOwner() {\n    return this.type === OrganizationUserType.Owner || this.isProviderUser;\n  }\n\n  get canAccessEventLogs() {\n    return (this.isAdmin || this.permissions.accessEventLogs) && this.useEvents;\n  }\n\n  get canAccessImportExport() {\n    return this.isAdmin || this.permissions.accessImportExport;\n  }\n\n  get canAccessReports() {\n    return this.isAdmin || this.permissions.accessReports;\n  }\n\n  get canCreateNewCollections() {\n    return this.isManager || this.permissions.createNewCollections;\n  }\n\n  get canEditAnyCollection() {\n    return this.isAdmin || this.permissions.editAnyCollection;\n  }\n\n  get canUseAdminCollections() {\n    return this.canEditAnyCollection;\n  }\n\n  get canDeleteAnyCollection() {\n    return this.isAdmin || this.permissions.deleteAnyCollection;\n  }\n\n  get canViewAllCollections() {\n    return this.canCreateNewCollections || this.canEditAnyCollection || this.canDeleteAnyCollection;\n  }\n\n  get canEditAssignedCollections() {\n    return this.isManager || this.permissions.editAssignedCollections;\n  }\n\n  get canDeleteAssignedCollections() {\n    return this.isManager || this.permissions.deleteAssignedCollections;\n  }\n\n  get canViewAssignedCollections() {\n    return this.canDeleteAssignedCollections || this.canEditAssignedCollections;\n  }\n\n  get canManageGroups() {\n    return (this.isAdmin || this.permissions.manageGroups) && this.useGroups;\n  }\n\n  get canManageSso() {\n    return (this.isAdmin || this.permissions.manageSso) && this.useSso;\n  }\n\n  get canManageDomainVerification() {\n    return (this.isAdmin || this.permissions.manageSso) && this.useSso;\n  }\n\n  get canManageScim() {\n    return (this.isAdmin || this.permissions.manageScim) && this.useScim;\n  }\n\n  get canManagePolicies() {\n    return (this.isAdmin || this.permissions.managePolicies) && this.usePolicies;\n  }\n\n  get canManageUsers() {\n    return this.isAdmin || this.permissions.manageUsers;\n  }\n\n  get canManageUsersPassword() {\n    return this.isAdmin || this.permissions.manageResetPassword;\n  }\n\n  get canManageDeviceApprovals() {\n    return (this.isAdmin || this.permissions.manageResetPassword) && this.useSso;\n  }\n\n  get isExemptFromPolicies() {\n    return this.canManagePolicies;\n  }\n\n  get canViewSubscription() {\n    if (this.canEditSubscription) {\n      return true;\n    }\n\n    return this.hasProvider && this.providerType === ProviderType.Msp\n      ? this.isProviderUser\n      : this.isOwner;\n  }\n\n  get canEditSubscription() {\n    return this.hasProvider ? this.isProviderUser : this.isOwner;\n  }\n\n  get canEditPaymentMethods() {\n    return this.canEditSubscription;\n  }\n\n  get canViewBillingHistory() {\n    return this.canEditSubscription;\n  }\n\n  get hasProvider() {\n    return this.providerId != null || this.providerName != null;\n  }\n\n  get canAccessSecretsManager() {\n    return this.useSecretsManager && this.accessSecretsManager;\n  }\n\n  get isFreeOrg() {\n    // return true if organization needs to be upgraded from a free org\n    return !this.useTotp;\n  }\n\n  static fromJSON(json: Jsonify<Organization>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new Organization(), json, {\n      familySponsorshipLastSyncDate: new Date(json.familySponsorshipLastSyncDate),\n      familySponsorshipValidUntil: new Date(json.familySponsorshipValidUntil),\n    });\n  }\n}\n","import { map, Observable } from \"rxjs\";\n\nimport { I18nService } from \"../../../platform/abstractions/i18n.service\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { OrganizationData } from \"../../models/data/organization.data\";\nimport { Organization } from \"../../models/domain/organization\";\n\nexport function canAccessVaultTab(org: Organization): boolean {\n  return org.canViewAssignedCollections || org.canViewAllCollections || org.canManageGroups;\n}\n\nexport function canAccessSettingsTab(org: Organization): boolean {\n  return (\n    org.isOwner ||\n    org.canManagePolicies ||\n    org.canManageSso ||\n    org.canManageScim ||\n    org.canAccessImportExport ||\n    org.canManageDeviceApprovals\n  );\n}\n\nexport function canAccessMembersTab(org: Organization): boolean {\n  return org.canManageUsers || org.canManageUsersPassword;\n}\n\nexport function canAccessGroupsTab(org: Organization): boolean {\n  return org.canManageGroups;\n}\n\nexport function canAccessReportingTab(org: Organization): boolean {\n  return org.canAccessReports || org.canAccessEventLogs;\n}\n\nexport function canAccessBillingTab(org: Organization): boolean {\n  return org.isOwner;\n}\n\nexport function canAccessOrgAdmin(org: Organization): boolean {\n  return (\n    canAccessMembersTab(org) ||\n    canAccessGroupsTab(org) ||\n    canAccessReportingTab(org) ||\n    canAccessBillingTab(org) ||\n    canAccessSettingsTab(org) ||\n    canAccessVaultTab(org)\n  );\n}\n\nexport function getOrganizationById(id: string) {\n  return map<Organization[], Organization | undefined>((orgs) => orgs.find((o) => o.id === id));\n}\n\nexport function canAccessAdmin(i18nService: I18nService) {\n  return map<Organization[], Organization[]>((orgs) =>\n    orgs.filter(canAccessOrgAdmin).sort(Utils.getSortFunction(i18nService, \"name\"))\n  );\n}\n\nexport function canAccessImportExport(i18nService: I18nService) {\n  return map<Organization[], Organization[]>((orgs) =>\n    orgs.filter((org) => org.canAccessImportExport).sort(Utils.getSortFunction(i18nService, \"name\"))\n  );\n}\n\n/**\n * Returns `true` if a user is a member of an organization (rather than only being a ProviderUser)\n * @deprecated Use organizationService.memberOrganizations$ instead\n */\nexport function isMember(org: Organization): boolean {\n  return org.isMember;\n}\n\nexport abstract class OrganizationService {\n  organizations$: Observable<Organization[]>;\n\n  /**\n   * Organizations that the user is a member of (excludes organizations that they only have access to via a provider)\n   */\n  memberOrganizations$: Observable<Organization[]>;\n\n  get$: (id: string) => Observable<Organization | undefined>;\n  get: (id: string) => Organization;\n  getByIdentifier: (identifier: string) => Organization;\n  getAll: (userId?: string) => Promise<Organization[]>;\n  /**\n   * @deprecated For the CLI only\n   * @param id id of the organization\n   */\n  getFromState: (id: string) => Promise<Organization>;\n  canManageSponsorships: () => Promise<boolean>;\n  hasOrganizations: () => boolean;\n}\n\nexport abstract class InternalOrganizationServiceAbstraction extends OrganizationService {\n  replace: (organizations: { [id: string]: OrganizationData }) => Promise<void>;\n  upsert: (OrganizationData: OrganizationData | OrganizationData[]) => Promise<void>;\n}\n","import { BehaviorSubject, concatMap, map, Observable } from \"rxjs\";\n\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport {\n  InternalOrganizationServiceAbstraction,\n  isMember,\n} from \"../../abstractions/organization/organization.service.abstraction\";\nimport { OrganizationData } from \"../../models/data/organization.data\";\nimport { Organization } from \"../../models/domain/organization\";\n\nexport class OrganizationService implements InternalOrganizationServiceAbstraction {\n  protected _organizations = new BehaviorSubject<Organization[]>([]);\n\n  organizations$ = this._organizations.asObservable();\n  memberOrganizations$ = this.organizations$.pipe(map((orgs) => orgs.filter(isMember)));\n\n  constructor(private stateService: StateService) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (!unlocked) {\n            this._organizations.next([]);\n            return;\n          }\n\n          const data = await this.stateService.getOrganizations();\n          this.updateObservables(data);\n        })\n      )\n      .subscribe();\n  }\n\n  get$(id: string): Observable<Organization | undefined> {\n    return this.organizations$.pipe(map((orgs) => orgs.find((o) => o.id === id)));\n  }\n\n  async getAll(userId?: string): Promise<Organization[]> {\n    const organizationsMap = await this.stateService.getOrganizations({ userId: userId });\n    return Object.values(organizationsMap || {}).map((o) => new Organization(o));\n  }\n\n  async canManageSponsorships(): Promise<boolean> {\n    const organizations = this._organizations.getValue();\n    return organizations.some(\n      (o) => o.familySponsorshipAvailable || o.familySponsorshipFriendlyName !== null\n    );\n  }\n\n  hasOrganizations(): boolean {\n    const organizations = this._organizations.getValue();\n    return organizations.length > 0;\n  }\n\n  async upsert(organization: OrganizationData): Promise<void> {\n    let organizations = await this.stateService.getOrganizations();\n    if (organizations == null) {\n      organizations = {};\n    }\n\n    organizations[organization.id] = organization;\n\n    await this.replace(organizations);\n  }\n\n  async delete(id: string): Promise<void> {\n    const organizations = await this.stateService.getOrganizations();\n    if (organizations == null) {\n      return;\n    }\n\n    if (organizations[id] == null) {\n      return;\n    }\n\n    delete organizations[id];\n    await this.replace(organizations);\n  }\n\n  get(id: string): Organization {\n    const organizations = this._organizations.getValue();\n\n    return organizations.find((organization) => organization.id === id);\n  }\n\n  /**\n   * @deprecated For the CLI only\n   * @param id id of the organization\n   */\n  async getFromState(id: string): Promise<Organization> {\n    const organizationsMap = await this.stateService.getOrganizations();\n    const organization = organizationsMap[id];\n    if (organization == null) {\n      return null;\n    }\n\n    return new Organization(organization);\n  }\n\n  getByIdentifier(identifier: string): Organization {\n    const organizations = this._organizations.getValue();\n\n    return organizations.find((organization) => organization.identifier === identifier);\n  }\n\n  async replace(organizations: { [id: string]: OrganizationData }) {\n    await this.stateService.setOrganizations(organizations);\n    this.updateObservables(organizations);\n  }\n\n  private updateObservables(organizationsMap: { [id: string]: OrganizationData }) {\n    const organizations = Object.values(organizationsMap || {}).map((o) => new Organization(o));\n    this._organizations.next(organizations);\n  }\n}\n","import { BrowserApi } from \"../platform/browser/browser-api\";\n\nexport class SafariApp {\n  static sendMessageToApp(command: string, data: any = null, resolveNow = false): Promise<any> {\n    if (!BrowserApi.isSafariApi) {\n      return Promise.resolve(null);\n    }\n    return new Promise((resolve) => {\n      const now = new Date();\n      const messageId =\n        now.getTime().toString() + \"_\" + Math.floor(Math.random() * Number.MAX_SAFE_INTEGER);\n      (browser as any).runtime.sendNativeMessage(\n        \"com.bitwarden.desktop\",\n        {\n          id: messageId,\n          command: command,\n          data: data,\n          responseData: null,\n        },\n        (response: any) => {\n          resolve(response);\n        }\n      );\n    });\n  }\n}\n","import { ClientType, DeviceType } from \"@bitwarden/common/enums\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\n\nimport { SafariApp } from \"../../browser/safariApp\";\nimport { BrowserApi } from \"../browser/browser-api\";\n\nexport default class BrowserPlatformUtilsService implements PlatformUtilsService {\n  private static deviceCache: DeviceType = null;\n\n  constructor(\n    private messagingService: MessagingService,\n    private clipboardWriteCallback: (clipboardValue: string, clearMs: number) => void,\n    private biometricCallback: () => Promise<boolean>,\n    private win: Window & typeof globalThis\n  ) {}\n\n  static getDevice(win: Window & typeof globalThis): DeviceType {\n    if (this.deviceCache) {\n      return this.deviceCache;\n    }\n\n    if (BrowserPlatformUtilsService.isFirefox()) {\n      this.deviceCache = DeviceType.FirefoxExtension;\n    } else if (BrowserPlatformUtilsService.isOpera(win)) {\n      this.deviceCache = DeviceType.OperaExtension;\n    } else if (BrowserPlatformUtilsService.isEdge()) {\n      this.deviceCache = DeviceType.EdgeExtension;\n    } else if (BrowserPlatformUtilsService.isVivaldi()) {\n      this.deviceCache = DeviceType.VivaldiExtension;\n    } else if (BrowserPlatformUtilsService.isChrome(win)) {\n      this.deviceCache = DeviceType.ChromeExtension;\n    } else if (BrowserPlatformUtilsService.isSafari(win)) {\n      this.deviceCache = DeviceType.SafariExtension;\n    }\n\n    return this.deviceCache;\n  }\n\n  getDevice(): DeviceType {\n    return BrowserPlatformUtilsService.getDevice(this.win);\n  }\n\n  getDeviceString(): string {\n    const device = DeviceType[this.getDevice()].toLowerCase();\n    return device.replace(\"extension\", \"\");\n  }\n\n  getClientType(): ClientType {\n    return ClientType.Browser;\n  }\n\n  /**\n   * @deprecated Do not call this directly, use getDevice() instead\n   */\n  static isFirefox(): boolean {\n    return (\n      navigator.userAgent.indexOf(\" Firefox/\") !== -1 ||\n      navigator.userAgent.indexOf(\" Gecko/\") !== -1\n    );\n  }\n\n  isFirefox(): boolean {\n    return this.getDevice() === DeviceType.FirefoxExtension;\n  }\n\n  /**\n   * @deprecated Do not call this directly, use getDevice() instead\n   */\n  private static isChrome(win: Window & typeof globalThis): boolean {\n    return win.chrome && navigator.userAgent.indexOf(\" Chrome/\") !== -1;\n  }\n\n  isChrome(): boolean {\n    return this.getDevice() === DeviceType.ChromeExtension;\n  }\n\n  /**\n   * @deprecated Do not call this directly, use getDevice() instead\n   */\n  private static isEdge(): boolean {\n    return navigator.userAgent.indexOf(\" Edg/\") !== -1;\n  }\n\n  isEdge(): boolean {\n    return this.getDevice() === DeviceType.EdgeExtension;\n  }\n\n  /**\n   * @deprecated Do not call this directly, use getDevice() instead\n   */\n  private static isOpera(win: Window & typeof globalThis): boolean {\n    return (\n      (!!win.opr && !!win.opr.addons) || !!win.opera || navigator.userAgent.indexOf(\" OPR/\") >= 0\n    );\n  }\n\n  isOpera(): boolean {\n    return this.getDevice() === DeviceType.OperaExtension;\n  }\n\n  /**\n   * @deprecated Do not call this directly, use getDevice() instead\n   */\n  private static isVivaldi(): boolean {\n    return navigator.userAgent.indexOf(\" Vivaldi/\") !== -1;\n  }\n\n  isVivaldi(): boolean {\n    return this.getDevice() === DeviceType.VivaldiExtension;\n  }\n\n  /**\n   * @deprecated Do not call this directly, use getDevice() instead\n   */\n  static isSafari(win: Window & typeof globalThis): boolean {\n    // Opera masquerades as Safari, so make sure we're not there first\n    return (\n      !BrowserPlatformUtilsService.isOpera(win) && navigator.userAgent.indexOf(\" Safari/\") !== -1\n    );\n  }\n\n  private static safariVersion(): string {\n    return navigator.userAgent.match(\"Version/([0-9.]*)\")?.[1];\n  }\n\n  /**\n   * Safari previous to version 16.1 had a bug which caused artifacts on hover in large extension popups.\n   * https://bugs.webkit.org/show_bug.cgi?id=218704\n   */\n  static shouldApplySafariHeightFix(win: Window & typeof globalThis): boolean {\n    if (BrowserPlatformUtilsService.getDevice(win) !== DeviceType.SafariExtension) {\n      return false;\n    }\n\n    const version = BrowserPlatformUtilsService.safariVersion();\n    const parts = version?.split(\".\")?.map((v) => Number(v));\n    return parts?.[0] < 16 || (parts?.[0] === 16 && parts?.[1] === 0);\n  }\n\n  isSafari(): boolean {\n    return this.getDevice() === DeviceType.SafariExtension;\n  }\n\n  isIE(): boolean {\n    return false;\n  }\n\n  isMacAppStore(): boolean {\n    return false;\n  }\n\n  async isViewOpen(): Promise<boolean> {\n    if (await BrowserApi.isPopupOpen()) {\n      return true;\n    }\n\n    if (this.isSafari()) {\n      return false;\n    }\n\n    // Opera has \"sidebar_panel\" as a ViewType but doesn't currently work\n    if (this.isFirefox() && chrome.extension.getViews({ type: \"sidebar\" }).length > 0) {\n      return true;\n    }\n\n    // Opera sidebar has type of \"tab\" (will stick around for a while after closing sidebar)\n    const tabOpen = chrome.extension.getViews({ type: \"tab\" }).length > 0;\n    return tabOpen;\n  }\n\n  lockTimeout(): number {\n    return null;\n  }\n\n  launchUri(uri: string, options?: any): void {\n    BrowserApi.createNewTab(uri, options && options.extensionPage === true);\n  }\n\n  getApplicationVersion(): Promise<string> {\n    return Promise.resolve(BrowserApi.getApplicationVersion());\n  }\n\n  async getApplicationVersionNumber(): Promise<string> {\n    return (await this.getApplicationVersion()).split(RegExp(\"[+|-]\"))[0].trim();\n  }\n\n  supportsWebAuthn(win: Window): boolean {\n    return typeof PublicKeyCredential !== \"undefined\";\n  }\n\n  supportsDuo(): boolean {\n    return true;\n  }\n\n  showToast(\n    type: \"error\" | \"success\" | \"warning\" | \"info\",\n    title: string,\n    text: string | string[],\n    options?: any\n  ): void {\n    this.messagingService.send(\"showToast\", {\n      text: text,\n      title: title,\n      type: type,\n      options: options,\n    });\n  }\n\n  isDev(): boolean {\n    return process.env.ENV === \"development\";\n  }\n\n  isSelfHost(): boolean {\n    return false;\n  }\n\n  copyToClipboard(text: string, options?: any): void {\n    let win = this.win;\n    let doc = this.win.document;\n    if (options && (options.window || options.win)) {\n      win = options.window || options.win;\n      doc = win.document;\n    } else if (options && options.doc) {\n      doc = options.doc;\n    }\n    const clearing = options ? !!options.clearing : false;\n    const clearMs: number = options && options.clearMs ? options.clearMs : null;\n\n    if (this.isSafari()) {\n      SafariApp.sendMessageToApp(\"copyToClipboard\", text).then(() => {\n        if (!clearing && this.clipboardWriteCallback != null) {\n          this.clipboardWriteCallback(text, clearMs);\n        }\n      });\n    } else if (\n      this.isFirefox() &&\n      (win as any).navigator.clipboard &&\n      (win as any).navigator.clipboard.writeText\n    ) {\n      (win as any).navigator.clipboard.writeText(text).then(() => {\n        if (!clearing && this.clipboardWriteCallback != null) {\n          this.clipboardWriteCallback(text, clearMs);\n        }\n      });\n    } else if (doc.queryCommandSupported && doc.queryCommandSupported(\"copy\")) {\n      if (this.isChrome() && text === \"\") {\n        text = \"\\u0000\";\n      }\n\n      const textarea = doc.createElement(\"textarea\");\n      textarea.textContent = text == null || text === \"\" ? \" \" : text;\n      // Prevent scrolling to bottom of page in MS Edge.\n      textarea.style.position = \"fixed\";\n      doc.body.appendChild(textarea);\n      textarea.select();\n\n      try {\n        // Security exception may be thrown by some browsers.\n        if (doc.execCommand(\"copy\") && !clearing && this.clipboardWriteCallback != null) {\n          this.clipboardWriteCallback(text, clearMs);\n        }\n      } catch (e) {\n        // eslint-disable-next-line\n        console.warn(\"Copy to clipboard failed.\", e);\n      } finally {\n        doc.body.removeChild(textarea);\n      }\n    }\n  }\n\n  async readFromClipboard(options?: any): Promise<string> {\n    let win = this.win;\n    let doc = this.win.document;\n    if (options && (options.window || options.win)) {\n      win = options.window || options.win;\n      doc = win.document;\n    } else if (options && options.doc) {\n      doc = options.doc;\n    }\n\n    if (this.isSafari()) {\n      return await SafariApp.sendMessageToApp(\"readFromClipboard\");\n    } else if (\n      this.isFirefox() &&\n      (win as any).navigator.clipboard &&\n      (win as any).navigator.clipboard.readText\n    ) {\n      return await (win as any).navigator.clipboard.readText();\n    } else if (doc.queryCommandSupported && doc.queryCommandSupported(\"paste\")) {\n      const textarea = doc.createElement(\"textarea\");\n      // Prevent scrolling to bottom of page in MS Edge.\n      textarea.style.position = \"fixed\";\n      doc.body.appendChild(textarea);\n      textarea.focus();\n      try {\n        // Security exception may be thrown by some browsers.\n        if (doc.execCommand(\"paste\")) {\n          return textarea.value;\n        }\n      } catch (e) {\n        // eslint-disable-next-line\n        console.warn(\"Read from clipboard failed.\", e);\n      } finally {\n        doc.body.removeChild(textarea);\n      }\n    }\n    return null;\n  }\n\n  async supportsBiometric() {\n    const platformInfo = await BrowserApi.getPlatformInfo();\n    if (platformInfo.os === \"android\") {\n      return false;\n    }\n\n    if (this.isFirefox()) {\n      return parseInt((await browser.runtime.getBrowserInfo()).version.split(\".\")[0], 10) >= 87;\n    }\n\n    return true;\n  }\n\n  authenticateBiometric() {\n    return this.biometricCallback();\n  }\n\n  supportsSecureStorage(): boolean {\n    return false;\n  }\n\n  async getAutofillKeyboardShortcut(): Promise<string> {\n    let autofillCommand: string;\n    // You can not change the command in Safari or obtain it programmatically\n    if (this.isSafari()) {\n      autofillCommand = \"Cmd+Shift+L\";\n    } else if (this.isFirefox()) {\n      autofillCommand = (await browser.commands.getAll()).find(\n        (c) => c.name === \"autofill_login\"\n      ).shortcut;\n      // Firefox is returning Ctrl instead of Cmd for the modifier key on macOS if\n      // the command is the default one set on installation.\n      if (\n        (await browser.runtime.getPlatformInfo()).os === \"mac\" &&\n        autofillCommand === \"Ctrl+Shift+L\"\n      ) {\n        autofillCommand = \"Cmd+Shift+L\";\n      }\n    } else {\n      await new Promise((resolve) =>\n        chrome.commands.getAll((c) =>\n          resolve((autofillCommand = c.find((c) => c.name === \"autofill_login\").shortcut))\n        )\n      );\n    }\n    return autofillCommand;\n  }\n}\n","import { DeviceType } from \"@bitwarden/common/enums\";\n\nimport { TabMessage } from \"../../types/tab-messages\";\nimport BrowserPlatformUtilsService from \"../services/browser-platform-utils.service\";\n\nexport class BrowserApi {\n  static isWebExtensionsApi: boolean = typeof browser !== \"undefined\";\n  static isSafariApi: boolean =\n    navigator.userAgent.indexOf(\" Safari/\") !== -1 &&\n    navigator.userAgent.indexOf(\" Chrome/\") === -1 &&\n    navigator.userAgent.indexOf(\" Chromium/\") === -1;\n  static isChromeApi: boolean = !BrowserApi.isSafariApi && typeof chrome !== \"undefined\";\n  static isFirefoxOnAndroid: boolean =\n    navigator.userAgent.indexOf(\"Firefox/\") !== -1 && navigator.userAgent.indexOf(\"Android\") !== -1;\n\n  static get manifestVersion() {\n    return chrome.runtime.getManifest().manifest_version;\n  }\n\n  static async getTabFromCurrentWindowId(): Promise<chrome.tabs.Tab> | null {\n    return await BrowserApi.tabsQueryFirst({\n      active: true,\n      windowId: chrome.windows.WINDOW_ID_CURRENT,\n    });\n  }\n\n  static async getTab(tabId: number) {\n    if (tabId == null) {\n      return null;\n    }\n    return await chrome.tabs.get(tabId);\n  }\n\n  static async getTabFromCurrentWindow(): Promise<chrome.tabs.Tab> | null {\n    return await BrowserApi.tabsQueryFirst({\n      active: true,\n      currentWindow: true,\n    });\n  }\n\n  static async getActiveTabs(): Promise<chrome.tabs.Tab[]> {\n    return await BrowserApi.tabsQuery({\n      active: true,\n    });\n  }\n\n  static async tabsQuery(options: chrome.tabs.QueryInfo): Promise<chrome.tabs.Tab[]> {\n    return new Promise((resolve) => {\n      chrome.tabs.query(options, (tabs) => {\n        resolve(tabs);\n      });\n    });\n  }\n\n  static async tabsQueryFirst(options: chrome.tabs.QueryInfo): Promise<chrome.tabs.Tab> | null {\n    const tabs = await BrowserApi.tabsQuery(options);\n    if (tabs.length > 0) {\n      return tabs[0];\n    }\n\n    return null;\n  }\n\n  static tabSendMessageData(\n    tab: chrome.tabs.Tab,\n    command: string,\n    data: any = null\n  ): Promise<void> {\n    const obj: any = {\n      command: command,\n    };\n\n    if (data != null) {\n      obj.data = data;\n    }\n\n    return BrowserApi.tabSendMessage(tab, obj);\n  }\n\n  static async tabSendMessage<T>(\n    tab: chrome.tabs.Tab,\n    obj: T,\n    options: chrome.tabs.MessageSendOptions = null\n  ): Promise<void> {\n    if (!tab || !tab.id) {\n      return;\n    }\n\n    return new Promise<void>((resolve) => {\n      chrome.tabs.sendMessage(tab.id, obj, options, () => {\n        if (chrome.runtime.lastError) {\n          // Some error happened\n        }\n        resolve();\n      });\n    });\n  }\n\n  static sendTabsMessage<T>(\n    tabId: number,\n    message: TabMessage,\n    options?: chrome.tabs.MessageSendOptions,\n    responseCallback?: (response: T) => void\n  ) {\n    chrome.tabs.sendMessage<TabMessage, T>(tabId, message, options, responseCallback);\n  }\n\n  static async getPrivateModeWindows(): Promise<browser.windows.Window[]> {\n    return (await browser.windows.getAll()).filter((win) => win.incognito);\n  }\n\n  static async onWindowCreated(callback: (win: chrome.windows.Window) => any) {\n    return chrome.windows.onCreated.addListener(callback);\n  }\n\n  static getBackgroundPage(): any {\n    return chrome.extension.getBackgroundPage();\n  }\n\n  static isBackgroundPage(window: Window & typeof globalThis): boolean {\n    return window === chrome.extension.getBackgroundPage();\n  }\n\n  static getApplicationVersion(): string {\n    return chrome.runtime.getManifest().version;\n  }\n\n  static async isPopupOpen(): Promise<boolean> {\n    return Promise.resolve(chrome.extension.getViews({ type: \"popup\" }).length > 0);\n  }\n\n  static createNewTab(url: string, active = true): Promise<chrome.tabs.Tab> {\n    return new Promise((resolve) =>\n      chrome.tabs.create({ url: url, active: active }, (tab) => resolve(tab))\n    );\n  }\n\n  static async focusWindow(windowId: number) {\n    await chrome.windows.update(windowId, { focused: true });\n  }\n\n  static async openBitwardenExtensionTab(relativeUrl: string, active = true) {\n    let url = relativeUrl;\n    if (!relativeUrl.includes(\"uilocation=tab\")) {\n      const fullUrl = chrome.extension.getURL(relativeUrl);\n      const parsedUrl = new URL(fullUrl);\n      parsedUrl.searchParams.set(\"uilocation\", \"tab\");\n      url = parsedUrl.toString();\n    }\n\n    const createdTab = await this.createNewTab(url, active);\n    this.focusWindow(createdTab.windowId);\n  }\n\n  static async closeBitwardenExtensionTab() {\n    const tabs = await BrowserApi.tabsQuery({\n      active: true,\n      title: \"Bitwarden\",\n      windowType: \"normal\",\n      currentWindow: true,\n    });\n\n    if (tabs.length === 0) {\n      return;\n    }\n\n    const tabToClose = tabs[tabs.length - 1];\n    chrome.tabs.remove(tabToClose.id);\n  }\n\n  private static registeredMessageListeners: any[] = [];\n\n  static messageListener(\n    name: string,\n    callback: (message: any, sender: chrome.runtime.MessageSender, response: any) => void\n  ) {\n    chrome.runtime.onMessage.addListener(callback);\n\n    // Keep track of all the events registered in a Safari popup so we can remove\n    // them when the popup gets unloaded, otherwise we cause a memory leak\n    if (BrowserApi.isSafariApi && !BrowserApi.isBackgroundPage(window)) {\n      BrowserApi.registeredMessageListeners.push(callback);\n\n      // The MDN recommend using 'visibilitychange' but that event is fired any time the popup window is obscured as well\n      // 'pagehide' works just like 'unload' but is compatible with the back/forward cache, so we prefer using that one\n      window.onpagehide = () => {\n        for (const callback of BrowserApi.registeredMessageListeners) {\n          chrome.runtime.onMessage.removeListener(callback);\n        }\n      };\n    }\n  }\n\n  static sendMessage(subscriber: string, arg: any = {}) {\n    const message = Object.assign({}, { command: subscriber }, arg);\n    return chrome.runtime.sendMessage(message);\n  }\n\n  static async focusTab(tabId: number) {\n    chrome.tabs.update(tabId, { active: true, highlighted: true });\n  }\n\n  static closePopup(win: Window) {\n    if (BrowserApi.isWebExtensionsApi && BrowserApi.isFirefoxOnAndroid) {\n      // Reactivating the active tab dismisses the popup tab. The promise final\n      // condition is only called if the popup wasn't already dismissed (future proofing).\n      // ref: https://bugzilla.mozilla.org/show_bug.cgi?id=1433604\n      browser.tabs.update({ active: true }).finally(win.close);\n    } else {\n      win.close();\n    }\n  }\n\n  static gaFilter() {\n    return process.env.ENV !== \"production\";\n  }\n\n  static getUILanguage(win: Window) {\n    return chrome.i18n.getUILanguage();\n  }\n\n  static reloadExtension(win: Window) {\n    if (win != null) {\n      return (win.location as any).reload(true);\n    } else {\n      return chrome.runtime.reload();\n    }\n  }\n\n  static reloadOpenWindows(exemptCurrentHref = false) {\n    const currentHref = window.location.href;\n    const views = chrome.extension.getViews() as Window[];\n    views\n      .filter((w) => w.location.href != null && !w.location.href.includes(\"background.html\"))\n      .filter((w) => !exemptCurrentHref || w.location.href !== currentHref)\n      .forEach((w) => {\n        w.location.reload();\n      });\n  }\n\n  static connectNative(application: string): browser.runtime.Port | chrome.runtime.Port {\n    if (BrowserApi.isWebExtensionsApi) {\n      return browser.runtime.connectNative(application);\n    } else if (BrowserApi.isChromeApi) {\n      return chrome.runtime.connectNative(application);\n    }\n  }\n\n  static requestPermission(permission: any) {\n    if (BrowserApi.isWebExtensionsApi) {\n      return browser.permissions.request(permission);\n    }\n    return new Promise((resolve, reject) => {\n      chrome.permissions.request(permission, resolve);\n    });\n  }\n\n  static getPlatformInfo(): Promise<browser.runtime.PlatformInfo | chrome.runtime.PlatformInfo> {\n    if (BrowserApi.isWebExtensionsApi) {\n      return browser.runtime.getPlatformInfo();\n    }\n    return new Promise((resolve) => {\n      chrome.runtime.getPlatformInfo(resolve);\n    });\n  }\n\n  static getBrowserAction() {\n    return BrowserApi.manifestVersion === 3 ? chrome.action : chrome.browserAction;\n  }\n\n  static getSidebarAction(\n    win: Window & typeof globalThis\n  ): OperaSidebarAction | FirefoxSidebarAction | null {\n    const deviceType = BrowserPlatformUtilsService.getDevice(win);\n    if (deviceType !== DeviceType.FirefoxExtension && deviceType !== DeviceType.OperaExtension) {\n      return null;\n    }\n    return win.opr?.sidebarAction || browser.sidebarAction;\n  }\n}\n","export type InitializeOptions = \"array\" | \"record\" | \"object\";\n\nexport class SyncedItemMetadata {\n  propertyKey: string;\n  sessionKey: string;\n  initializer: (keyValuePair: any) => any;\n  initializeAs: InitializeOptions;\n\n  static builder(metadata: SyncedItemMetadata): (o: any) => any {\n    const itemBuilder = metadata.initializer;\n    if (metadata.initializeAs === \"array\") {\n      return (keyValuePair: any) => keyValuePair.map((o: any) => itemBuilder(o));\n    } else if (metadata.initializeAs === \"record\") {\n      return (keyValuePair: any) => {\n        const record: Record<any, any> = {};\n        for (const key in keyValuePair) {\n          record[key] = itemBuilder(keyValuePair[key]);\n        }\n        return record;\n      };\n    } else {\n      return (keyValuePair: any) => itemBuilder(keyValuePair);\n    }\n  }\n}\n","import { BehaviorSubject, concatMap, ReplaySubject, skip, Subject, Subscription } from \"rxjs\";\n\nimport { AbstractMemoryStorageService } from \"@bitwarden/common/platform/abstractions/storage.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\n\nimport { BrowserApi } from \"../../browser/browser-api\";\n\nimport { SyncedItemMetadata } from \"./sync-item-metadata\";\n\nexport class SessionSyncer {\n  subscription: Subscription;\n  id = Utils.newGuid();\n\n  // ignore initial values\n  private ignoreNUpdates = 0;\n\n  constructor(\n    private subject: Subject<any>,\n    private memoryStorageService: AbstractMemoryStorageService,\n    private metaData: SyncedItemMetadata\n  ) {\n    if (!(subject instanceof Subject)) {\n      throw new Error(\"subject must inherit from Subject\");\n    }\n\n    if (metaData.initializer == null) {\n      throw new Error(\"initializer must be provided\");\n    }\n  }\n\n  async init() {\n    switch (this.subject.constructor) {\n      case ReplaySubject:\n        // ignore all updates currently in the buffer\n        this.ignoreNUpdates = (this.subject as any)._buffer.length;\n        break;\n      case BehaviorSubject:\n        this.ignoreNUpdates = 1;\n        break;\n      default:\n        break;\n    }\n\n    await this.observe();\n    // must be synchronous\n    const hasInSessionMemory = await this.memoryStorageService.has(this.metaData.sessionKey);\n    if (hasInSessionMemory) {\n      await this.updateFromMemory();\n    }\n\n    this.listenForUpdates();\n  }\n\n  private async observe() {\n    const stream = this.subject.pipe(skip(this.ignoreNUpdates));\n    this.ignoreNUpdates = 0;\n\n    // This may be a memory leak.\n    // There is no good time to unsubscribe from this observable. Hopefully Manifest V3 clears memory from temporary\n    // contexts. If so, this is handled by destruction of the context.\n    this.subscription = stream\n      .pipe(\n        concatMap(async (next) => {\n          if (this.ignoreNUpdates > 0) {\n            this.ignoreNUpdates -= 1;\n            return;\n          }\n          await this.updateSession(next);\n        })\n      )\n      .subscribe();\n  }\n\n  private listenForUpdates() {\n    // This is an unawaited promise, but it will be executed asynchronously in the background.\n    BrowserApi.messageListener(\n      this.updateMessageCommand,\n      async (message) => await this.updateFromMessage(message)\n    );\n  }\n\n  async updateFromMessage(message: any) {\n    if (message.command != this.updateMessageCommand || message.id === this.id) {\n      return;\n    }\n    await this.update(message.serializedValue);\n  }\n\n  async updateFromMemory() {\n    const value = await this.memoryStorageService.getBypassCache(this.metaData.sessionKey);\n    await this.update(value);\n  }\n\n  async update(serializedValue: any) {\n    const unBuiltValue = JSON.parse(serializedValue);\n    if (BrowserApi.manifestVersion !== 3 && BrowserApi.isBackgroundPage(self)) {\n      await this.memoryStorageService.save(this.metaData.sessionKey, serializedValue);\n    }\n    const builder = SyncedItemMetadata.builder(this.metaData);\n    const value = builder(unBuiltValue);\n    this.ignoreNUpdates = 1;\n    this.subject.next(value);\n  }\n\n  private async updateSession(value: any) {\n    const serializedValue = JSON.stringify(value);\n    if (BrowserApi.manifestVersion === 3 || BrowserApi.isBackgroundPage(self)) {\n      await this.memoryStorageService.save(this.metaData.sessionKey, serializedValue);\n    }\n    await BrowserApi.sendMessage(this.updateMessageCommand, { id: this.id, serializedValue });\n  }\n\n  private get updateMessageCommand() {\n    return `${this.metaData.sessionKey}_update`;\n  }\n}\n","import { Constructor } from \"type-fest\";\n\nimport { AbstractMemoryStorageService } from \"@bitwarden/common/platform/abstractions/storage.service\";\n\nimport { SessionStorable } from \"./session-storable\";\nimport { SessionSyncer } from \"./session-syncer\";\nimport { SyncedItemMetadata } from \"./sync-item-metadata\";\n\n/**\n * Mark the class as syncing state across the browser session. This decorator finds rxjs BehaviorSubject properties\n * marked with @sessionSync and syncs these values across the browser session.\n *\n * @param constructor\n * @returns A new constructor that extends the original one to add session syncing.\n */\nexport function browserSession<TCtor extends Constructor<any>>(constructor: TCtor) {\n  return class extends constructor implements SessionStorable {\n    __syncedItemMetadata: SyncedItemMetadata[];\n    __sessionSyncers: SessionSyncer[];\n\n    constructor(...args: any[]) {\n      super(...args);\n\n      // Require state service to be injected\n      const storageService: AbstractMemoryStorageService = this.findStorageService(\n        [this as any].concat(args)\n      );\n\n      if (this.__syncedItemMetadata == null || !(this.__syncedItemMetadata instanceof Array)) {\n        return;\n      }\n\n      this.__sessionSyncers = this.__syncedItemMetadata.map((metadata) =>\n        this.buildSyncer(metadata, storageService)\n      );\n    }\n\n    buildSyncer(metadata: SyncedItemMetadata, storageSerice: AbstractMemoryStorageService) {\n      const syncer = new SessionSyncer(\n        (this as any)[metadata.propertyKey],\n        storageSerice,\n        metadata\n      );\n      syncer.init();\n      return syncer;\n    }\n\n    findStorageService(args: any[]): AbstractMemoryStorageService {\n      const storageService = args.find(this.isMemoryStorageService);\n\n      if (storageService) {\n        return storageService;\n      }\n\n      const stateService = args.find(\n        (arg) =>\n          arg?.memoryStorageService != null && this.isMemoryStorageService(arg.memoryStorageService)\n      );\n      if (stateService) {\n        return stateService.memoryStorageService;\n      }\n\n      throw new Error(\n        `Cannot decorate ${constructor.name} with browserSession, Browser's AbstractMemoryStorageService must be accessible through the observed classes parameters`\n      );\n    }\n\n    isMemoryStorageService(arg: any): arg is AbstractMemoryStorageService {\n      return arg.type != null && arg.type === AbstractMemoryStorageService.TYPE;\n    }\n  };\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { SessionStorable } from \"./session-storable\";\nimport { InitializeOptions } from \"./sync-item-metadata\";\n\nclass BuildOptions<T, TJson = Jsonify<T>> {\n  initializer?: (keyValuePair: TJson) => T;\n  initializeAs?: InitializeOptions;\n}\n\n// Used to ensure uniqueness for each synced observable\nlet index = 0;\n\n/**\n * A decorator used to indicate the BehaviorSubject should be synced for this browser session across all contexts.\n *\n * >**Note** This decorator does nothing if the enclosing class is not decorated with @browserSession.\n *\n * >**Note** The Behavior subject must be initialized with a default or in the constructor of the class. If it is not, an error will be thrown.\n *\n * >**!!Warning!!** If the property is overwritten at any time, the new value will not be synced across the browser session.\n *\n * @param buildOptions\n * Builders for the value, requires either a constructor (ctor) for your BehaviorSubject type or an\n * initializer function that takes a key value pair representation of the BehaviorSubject data\n * and returns your instantiated BehaviorSubject value. `initializeAs can optionally be used to indicate\n * the provided initializer function should be used to build an array of values. For example,\n * ```ts\n * \\@sessionSync({ initializer: Foo.fromJSON, initializeAs: 'array' })\n * ```\n * is equivalent to\n * ```\n * \\@sessionSync({ initializer: (obj: any[]) => obj.map((f) => Foo.fromJSON })\n * ```\n *\n * @returns decorator function\n */\nexport function sessionSync<T>(buildOptions: BuildOptions<T>) {\n  return (prototype: unknown, propertyKey: string) => {\n    // Force prototype into SessionStorable and implement it.\n    const p = prototype as SessionStorable;\n\n    if (p.__syncedItemMetadata == null) {\n      p.__syncedItemMetadata = [];\n    }\n\n    p.__syncedItemMetadata.push({\n      propertyKey,\n      sessionKey: `${propertyKey}_${index++}`,\n      initializer: buildOptions.initializer,\n      initializeAs: buildOptions.initializeAs ?? \"object\",\n    });\n  };\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/services/organization/organization.service\";\n\nimport { browserSession, sessionSync } from \"../../platform/decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserOrganizationService extends OrganizationService {\n  @sessionSync({ initializer: Organization.fromJSON, initializeAs: \"array\" })\n  protected _organizations: BehaviorSubject<Organization[]>;\n}\n","import Domain from \"../../../platform/models/domain/domain-base\";\nimport { PolicyType } from \"../../enums\";\nimport { PolicyData } from \"../data/policy.data\";\n\nexport class Policy extends Domain {\n  id: string;\n  organizationId: string;\n  type: PolicyType;\n  data: any;\n  enabled: boolean;\n\n  constructor(obj?: PolicyData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.id = obj.id;\n    this.organizationId = obj.organizationId;\n    this.type = obj.type;\n    this.data = obj.data;\n    this.enabled = obj.enabled;\n  }\n}\n","import Domain from \"../../../platform/models/domain/domain-base\";\n\nexport class ResetPasswordPolicyOptions extends Domain {\n  autoEnrollEnabled = false;\n}\n","import { BehaviorSubject, concatMap, map, Observable, of } from \"rxjs\";\n\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { OrganizationService } from \"../../abstractions/organization/organization.service.abstraction\";\nimport { InternalPolicyService as InternalPolicyServiceAbstraction } from \"../../abstractions/policy/policy.service.abstraction\";\nimport { OrganizationUserStatusType, OrganizationUserType, PolicyType } from \"../../enums\";\nimport { PolicyData } from \"../../models/data/policy.data\";\nimport { MasterPasswordPolicyOptions } from \"../../models/domain/master-password-policy-options\";\nimport { Organization } from \"../../models/domain/organization\";\nimport { Policy } from \"../../models/domain/policy\";\nimport { ResetPasswordPolicyOptions } from \"../../models/domain/reset-password-policy-options\";\nimport { PolicyResponse } from \"../../models/response/policy.response\";\n\nexport class PolicyService implements InternalPolicyServiceAbstraction {\n  protected _policies: BehaviorSubject<Policy[]> = new BehaviorSubject([]);\n\n  policies$ = this._policies.asObservable();\n\n  constructor(\n    protected stateService: StateService,\n    private organizationService: OrganizationService\n  ) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (Utils.global.bitwardenContainerService == null) {\n            return;\n          }\n\n          if (!unlocked) {\n            this._policies.next([]);\n            return;\n          }\n\n          const data = await this.stateService.getEncryptedPolicies();\n\n          await this.updateObservables(data);\n        })\n      )\n      .subscribe();\n  }\n\n  /**\n   * Returns the first policy found that applies to the active user\n   * @param policyType Policy type to search for\n   * @param policyFilter Additional filter to apply to the policy\n   */\n  get$(policyType: PolicyType, policyFilter?: (policy: Policy) => boolean): Observable<Policy> {\n    return this.policies$.pipe(\n      concatMap(async (policies) => {\n        const userId = await this.stateService.getUserId();\n        const appliesToCurrentUser = await this.checkPoliciesThatApplyToUser(\n          policies,\n          policyType,\n          policyFilter,\n          userId\n        );\n        if (appliesToCurrentUser) {\n          return policies.find((policy) => policy.type === policyType && policy.enabled);\n        }\n      })\n    );\n  }\n\n  /**\n   * @deprecated Do not call this, use the policies$ observable collection\n   */\n  async getAll(type?: PolicyType, userId?: string): Promise<Policy[]> {\n    let response: Policy[] = [];\n    const decryptedPolicies = await this.stateService.getDecryptedPolicies({ userId: userId });\n    if (decryptedPolicies != null) {\n      response = decryptedPolicies;\n    } else {\n      const diskPolicies = await this.stateService.getEncryptedPolicies({ userId: userId });\n      for (const id in diskPolicies) {\n        if (Object.prototype.hasOwnProperty.call(diskPolicies, id)) {\n          response.push(new Policy(diskPolicies[id]));\n        }\n      }\n      await this.stateService.setDecryptedPolicies(response, { userId: userId });\n    }\n    if (type != null) {\n      return response.filter((policy) => policy.type === type);\n    } else {\n      return response;\n    }\n  }\n\n  masterPasswordPolicyOptions$(policies?: Policy[]): Observable<MasterPasswordPolicyOptions> {\n    const observable = policies ? of(policies) : this.policies$;\n    return observable.pipe(\n      map((obsPolicies) => {\n        let enforcedOptions: MasterPasswordPolicyOptions = null;\n        const filteredPolicies = obsPolicies.filter((p) => p.type === PolicyType.MasterPassword);\n\n        if (filteredPolicies == null || filteredPolicies.length === 0) {\n          return enforcedOptions;\n        }\n\n        filteredPolicies.forEach((currentPolicy) => {\n          if (!currentPolicy.enabled || currentPolicy.data == null) {\n            return;\n          }\n\n          if (enforcedOptions == null) {\n            enforcedOptions = new MasterPasswordPolicyOptions();\n          }\n\n          if (\n            currentPolicy.data.minComplexity != null &&\n            currentPolicy.data.minComplexity > enforcedOptions.minComplexity\n          ) {\n            enforcedOptions.minComplexity = currentPolicy.data.minComplexity;\n          }\n\n          if (\n            currentPolicy.data.minLength != null &&\n            currentPolicy.data.minLength > enforcedOptions.minLength\n          ) {\n            enforcedOptions.minLength = currentPolicy.data.minLength;\n          }\n\n          if (currentPolicy.data.requireUpper) {\n            enforcedOptions.requireUpper = true;\n          }\n\n          if (currentPolicy.data.requireLower) {\n            enforcedOptions.requireLower = true;\n          }\n\n          if (currentPolicy.data.requireNumbers) {\n            enforcedOptions.requireNumbers = true;\n          }\n\n          if (currentPolicy.data.requireSpecial) {\n            enforcedOptions.requireSpecial = true;\n          }\n\n          if (currentPolicy.data.enforceOnLogin) {\n            enforcedOptions.enforceOnLogin = true;\n          }\n        });\n\n        return enforcedOptions;\n      })\n    );\n  }\n\n  policyAppliesToActiveUser$(policyType: PolicyType, policyFilter?: (policy: Policy) => boolean) {\n    return this.policies$.pipe(\n      concatMap(async (policies) => {\n        const userId = await this.stateService.getUserId();\n        return await this.checkPoliciesThatApplyToUser(policies, policyType, policyFilter, userId);\n      })\n    );\n  }\n\n  evaluateMasterPassword(\n    passwordStrength: number,\n    newPassword: string,\n    enforcedPolicyOptions: MasterPasswordPolicyOptions\n  ): boolean {\n    if (enforcedPolicyOptions == null) {\n      return true;\n    }\n\n    if (\n      enforcedPolicyOptions.minComplexity > 0 &&\n      enforcedPolicyOptions.minComplexity > passwordStrength\n    ) {\n      return false;\n    }\n\n    if (\n      enforcedPolicyOptions.minLength > 0 &&\n      enforcedPolicyOptions.minLength > newPassword.length\n    ) {\n      return false;\n    }\n\n    if (enforcedPolicyOptions.requireUpper && newPassword.toLocaleLowerCase() === newPassword) {\n      return false;\n    }\n\n    if (enforcedPolicyOptions.requireLower && newPassword.toLocaleUpperCase() === newPassword) {\n      return false;\n    }\n\n    if (enforcedPolicyOptions.requireNumbers && !/[0-9]/.test(newPassword)) {\n      return false;\n    }\n\n    // eslint-disable-next-line\n    if (enforcedPolicyOptions.requireSpecial && !/[!@#$%\\^&*]/g.test(newPassword)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  getResetPasswordPolicyOptions(\n    policies: Policy[],\n    orgId: string\n  ): [ResetPasswordPolicyOptions, boolean] {\n    const resetPasswordPolicyOptions = new ResetPasswordPolicyOptions();\n\n    if (policies == null || orgId == null) {\n      return [resetPasswordPolicyOptions, false];\n    }\n\n    const policy = policies.find(\n      (p) => p.organizationId === orgId && p.type === PolicyType.ResetPassword && p.enabled\n    );\n    resetPasswordPolicyOptions.autoEnrollEnabled = policy?.data?.autoEnrollEnabled ?? false;\n\n    return [resetPasswordPolicyOptions, policy?.enabled ?? false];\n  }\n\n  mapPoliciesFromToken(policiesResponse: ListResponse<PolicyResponse>): Policy[] {\n    if (policiesResponse == null || policiesResponse.data == null) {\n      return null;\n    }\n\n    const policiesData = policiesResponse.data.map((p) => new PolicyData(p));\n    return policiesData.map((p) => new Policy(p));\n  }\n\n  async policyAppliesToUser(\n    policyType: PolicyType,\n    policyFilter?: (policy: Policy) => boolean,\n    userId?: string\n  ) {\n    const policies = await this.getAll(policyType, userId);\n\n    return this.checkPoliciesThatApplyToUser(policies, policyType, policyFilter, userId);\n  }\n\n  async upsert(policy: PolicyData): Promise<any> {\n    let policies = await this.stateService.getEncryptedPolicies();\n    if (policies == null) {\n      policies = {};\n    }\n\n    policies[policy.id] = policy;\n\n    await this.updateObservables(policies);\n    await this.stateService.setDecryptedPolicies(null);\n    await this.stateService.setEncryptedPolicies(policies);\n  }\n\n  async replace(policies: { [id: string]: PolicyData }): Promise<void> {\n    await this.updateObservables(policies);\n    await this.stateService.setDecryptedPolicies(null);\n    await this.stateService.setEncryptedPolicies(policies);\n  }\n\n  async clear(userId?: string): Promise<void> {\n    if (userId == null || userId == (await this.stateService.getUserId())) {\n      this._policies.next([]);\n    }\n    await this.stateService.setDecryptedPolicies(null, { userId: userId });\n    await this.stateService.setEncryptedPolicies(null, { userId: userId });\n  }\n\n  private isExemptFromPolicies(organization: Organization, policyType: PolicyType) {\n    if (policyType === PolicyType.MaximumVaultTimeout) {\n      return organization.type === OrganizationUserType.Owner;\n    }\n\n    return organization.isExemptFromPolicies;\n  }\n\n  private async updateObservables(policiesMap: { [id: string]: PolicyData }) {\n    const policies = Object.values(policiesMap || {}).map((f) => new Policy(f));\n\n    this._policies.next(policies);\n  }\n\n  private async checkPoliciesThatApplyToUser(\n    policies: Policy[],\n    policyType: PolicyType,\n    policyFilter?: (policy: Policy) => boolean,\n    userId?: string\n  ) {\n    const organizations = await this.organizationService.getAll(userId);\n    const filteredPolicies = policies.filter(\n      (p) => p.type === policyType && p.enabled && (policyFilter == null || policyFilter(p))\n    );\n    const policySet = new Set(filteredPolicies.map((p) => p.organizationId));\n\n    return organizations.some(\n      (o) =>\n        o.status >= OrganizationUserStatusType.Accepted &&\n        o.usePolicies &&\n        policySet.has(o.id) &&\n        !this.isExemptFromPolicies(o, policyType)\n    );\n  }\n}\n","import { Observable } from \"rxjs\";\n\nimport { EncryptedOrganizationKeyData } from \"../../admin-console/models/data/encrypted-organization-key.data\";\nimport { OrganizationData } from \"../../admin-console/models/data/organization.data\";\nimport { PolicyData } from \"../../admin-console/models/data/policy.data\";\nimport { ProviderData } from \"../../admin-console/models/data/provider.data\";\nimport { Policy } from \"../../admin-console/models/domain/policy\";\nimport { AdminAuthRequestStorable } from \"../../auth/models/domain/admin-auth-req-storable\";\nimport { EnvironmentUrls } from \"../../auth/models/domain/environment-urls\";\nimport { ForceResetPasswordReason } from \"../../auth/models/domain/force-reset-password-reason\";\nimport { KdfConfig } from \"../../auth/models/domain/kdf-config\";\nimport { BiometricKey } from \"../../auth/types/biometric-key\";\nimport { KdfType, ThemeType, UriMatchType } from \"../../enums\";\nimport { EventData } from \"../../models/data/event.data\";\nimport { WindowState } from \"../../models/domain/window-state\";\nimport { GeneratedPasswordHistory } from \"../../tools/generator/password\";\nimport { SendData } from \"../../tools/send/models/data/send.data\";\nimport { SendView } from \"../../tools/send/models/view/send.view\";\nimport { CipherData } from \"../../vault/models/data/cipher.data\";\nimport { CollectionData } from \"../../vault/models/data/collection.data\";\nimport { FolderData } from \"../../vault/models/data/folder.data\";\nimport { LocalData } from \"../../vault/models/data/local.data\";\nimport { CipherView } from \"../../vault/models/view/cipher.view\";\nimport { CollectionView } from \"../../vault/models/view/collection.view\";\nimport { AddEditCipherInfo } from \"../../vault/types/add-edit-cipher-info\";\nimport { ServerConfigData } from \"../models/data/server-config.data\";\nimport {\n  Account,\n  AccountDecryptionOptions,\n  AccountSettingsSettings,\n} from \"../models/domain/account\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { StorageOptions } from \"../models/domain/storage-options\";\nimport {\n  DeviceKey,\n  MasterKey,\n  SymmetricCryptoKey,\n  UserKey,\n} from \"../models/domain/symmetric-crypto-key\";\n\nexport abstract class StateService<T extends Account = Account> {\n  accounts$: Observable<{ [userId: string]: T }>;\n  activeAccount$: Observable<string>;\n  activeAccountUnlocked$: Observable<boolean>;\n\n  addAccount: (account: T) => Promise<void>;\n  setActiveUser: (userId: string) => Promise<void>;\n  clean: (options?: StorageOptions) => Promise<void>;\n  init: () => Promise<void>;\n\n  getAccessToken: (options?: StorageOptions) => Promise<string>;\n  setAccessToken: (value: string, options?: StorageOptions) => Promise<void>;\n  getAddEditCipherInfo: (options?: StorageOptions) => Promise<AddEditCipherInfo>;\n  setAddEditCipherInfo: (value: AddEditCipherInfo, options?: StorageOptions) => Promise<void>;\n  getAlwaysShowDock: (options?: StorageOptions) => Promise<boolean>;\n  setAlwaysShowDock: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getApiKeyClientId: (options?: StorageOptions) => Promise<string>;\n  setApiKeyClientId: (value: string, options?: StorageOptions) => Promise<void>;\n  getApiKeyClientSecret: (options?: StorageOptions) => Promise<string>;\n  setApiKeyClientSecret: (value: string, options?: StorageOptions) => Promise<void>;\n  getAutoConfirmFingerPrints: (options?: StorageOptions) => Promise<boolean>;\n  setAutoConfirmFingerprints: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getAutoFillOnPageLoadDefault: (options?: StorageOptions) => Promise<boolean>;\n  setAutoFillOnPageLoadDefault: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getBiometricAwaitingAcceptance: (options?: StorageOptions) => Promise<boolean>;\n  setBiometricAwaitingAcceptance: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getBiometricFingerprintValidated: (options?: StorageOptions) => Promise<boolean>;\n  setBiometricFingerprintValidated: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getBiometricText: (options?: StorageOptions) => Promise<string>;\n  setBiometricText: (value: string, options?: StorageOptions) => Promise<void>;\n  getBiometricUnlock: (options?: StorageOptions) => Promise<boolean>;\n  setBiometricUnlock: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getCanAccessPremium: (options?: StorageOptions) => Promise<boolean>;\n  getHasPremiumPersonally: (options?: StorageOptions) => Promise<boolean>;\n  setHasPremiumPersonally: (value: boolean, options?: StorageOptions) => Promise<void>;\n  setHasPremiumFromOrganization: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getHasPremiumFromOrganization: (options?: StorageOptions) => Promise<boolean>;\n  getClearClipboard: (options?: StorageOptions) => Promise<number>;\n  setClearClipboard: (value: number, options?: StorageOptions) => Promise<void>;\n  getCollapsedGroupings: (options?: StorageOptions) => Promise<string[]>;\n  setCollapsedGroupings: (value: string[], options?: StorageOptions) => Promise<void>;\n  getConvertAccountToKeyConnector: (options?: StorageOptions) => Promise<boolean>;\n  setConvertAccountToKeyConnector: (value: boolean, options?: StorageOptions) => Promise<void>;\n  /**\n   * gets the user key\n   */\n  getUserKey: (options?: StorageOptions) => Promise<UserKey>;\n  /**\n   * Sets the user key\n   */\n  setUserKey: (value: UserKey, options?: StorageOptions) => Promise<void>;\n  /**\n   * Gets the user's master key\n   */\n  getMasterKey: (options?: StorageOptions) => Promise<MasterKey>;\n  /**\n   * Sets the user's master key\n   */\n  setMasterKey: (value: MasterKey, options?: StorageOptions) => Promise<void>;\n  /**\n   * Gets the user key encrypted by the master key\n   */\n  getMasterKeyEncryptedUserKey: (options?: StorageOptions) => Promise<string>;\n  /**\n   * Sets the user key encrypted by the master key\n   */\n  setMasterKeyEncryptedUserKey: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * Gets the user's auto key\n   */\n  getUserKeyAutoUnlock: (options?: StorageOptions) => Promise<string>;\n  /**\n   * Sets the user's auto key\n   */\n  setUserKeyAutoUnlock: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * Gets the user's biometric key\n   */\n  getUserKeyBiometric: (options?: StorageOptions) => Promise<string>;\n  /**\n   * Checks if the user has a biometric key available\n   */\n  hasUserKeyBiometric: (options?: StorageOptions) => Promise<boolean>;\n  /**\n   * Sets the user's biometric key\n   */\n  setUserKeyBiometric: (value: BiometricKey, options?: StorageOptions) => Promise<void>;\n  /**\n   * Gets the user key encrypted by the Pin key.\n   * Used when Lock with MP on Restart is disabled\n   */\n  getPinKeyEncryptedUserKey: (options?: StorageOptions) => Promise<EncString>;\n  /**\n   * Sets the user key encrypted by the Pin key.\n   * Used when Lock with MP on Restart is disabled\n   */\n  setPinKeyEncryptedUserKey: (value: EncString, options?: StorageOptions) => Promise<void>;\n  /**\n   * Gets the ephemeral version of the user key encrypted by the Pin key.\n   * Used when Lock with MP on Restart is enabled\n   */\n  getPinKeyEncryptedUserKeyEphemeral: (options?: StorageOptions) => Promise<EncString>;\n  /**\n   * Sets the ephemeral version of the user key encrypted by the Pin key.\n   * Used when Lock with MP on Restart is enabled\n   */\n  setPinKeyEncryptedUserKeyEphemeral: (value: EncString, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated For migration purposes only, use getUserKeyMasterKey instead\n   */\n  getEncryptedCryptoSymmetricKey: (options?: StorageOptions) => Promise<string>;\n  /**\n   * @deprecated For migration purposes only, use setUserKeyMasterKey instead\n   */\n  setEncryptedCryptoSymmetricKey: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated For legacy purposes only, use getMasterKey instead\n   */\n  getCryptoMasterKey: (options?: StorageOptions) => Promise<SymmetricCryptoKey>;\n  /**\n   * @deprecated For migration purposes only, use getUserKeyAuto instead\n   */\n  getCryptoMasterKeyAuto: (options?: StorageOptions) => Promise<string>;\n  /**\n   * @deprecated For migration purposes only, use setUserKeyAuto instead\n   */\n  setCryptoMasterKeyAuto: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated For migration purposes only, use getUserKeyBiometric instead\n   */\n  getCryptoMasterKeyBiometric: (options?: StorageOptions) => Promise<string>;\n  /**\n   * @deprecated For migration purposes only, use hasUserKeyBiometric instead\n   */\n  hasCryptoMasterKeyBiometric: (options?: StorageOptions) => Promise<boolean>;\n  /**\n   * @deprecated For migration purposes only, use setUserKeyBiometric instead\n   */\n  setCryptoMasterKeyBiometric: (value: BiometricKey, options?: StorageOptions) => Promise<void>;\n  getDecryptedCiphers: (options?: StorageOptions) => Promise<CipherView[]>;\n  setDecryptedCiphers: (value: CipherView[], options?: StorageOptions) => Promise<void>;\n  getDecryptedCollections: (options?: StorageOptions) => Promise<CollectionView[]>;\n  setDecryptedCollections: (value: CollectionView[], options?: StorageOptions) => Promise<void>;\n  getDecryptedOrganizationKeys: (\n    options?: StorageOptions\n  ) => Promise<Map<string, SymmetricCryptoKey>>;\n  setDecryptedOrganizationKeys: (\n    value: Map<string, SymmetricCryptoKey>,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getDecryptedPasswordGenerationHistory: (\n    options?: StorageOptions\n  ) => Promise<GeneratedPasswordHistory[]>;\n  setDecryptedPasswordGenerationHistory: (\n    value: GeneratedPasswordHistory[],\n    options?: StorageOptions\n  ) => Promise<void>;\n  /**\n   * @deprecated For migration purposes only, use getDecryptedUserKeyPin instead\n   */\n  getDecryptedPinProtected: (options?: StorageOptions) => Promise<EncString>;\n  /**\n   * @deprecated For migration purposes only, use setDecryptedUserKeyPin instead\n   */\n  setDecryptedPinProtected: (value: EncString, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this, use PolicyService\n   */\n  getDecryptedPolicies: (options?: StorageOptions) => Promise<Policy[]>;\n  /**\n   * @deprecated Do not call this, use PolicyService\n   */\n  setDecryptedPolicies: (value: Policy[], options?: StorageOptions) => Promise<void>;\n  getDecryptedPrivateKey: (options?: StorageOptions) => Promise<Uint8Array>;\n  setDecryptedPrivateKey: (value: Uint8Array, options?: StorageOptions) => Promise<void>;\n  getDecryptedProviderKeys: (options?: StorageOptions) => Promise<Map<string, SymmetricCryptoKey>>;\n  setDecryptedProviderKeys: (\n    value: Map<string, SymmetricCryptoKey>,\n    options?: StorageOptions\n  ) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use SendService\n   */\n  getDecryptedSends: (options?: StorageOptions) => Promise<SendView[]>;\n  /**\n   * @deprecated Do not call this directly, use SendService\n   */\n  setDecryptedSends: (value: SendView[], options?: StorageOptions) => Promise<void>;\n  getDefaultUriMatch: (options?: StorageOptions) => Promise<UriMatchType>;\n  setDefaultUriMatch: (value: UriMatchType, options?: StorageOptions) => Promise<void>;\n  getDisableAddLoginNotification: (options?: StorageOptions) => Promise<boolean>;\n  setDisableAddLoginNotification: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableAutoBiometricsPrompt: (options?: StorageOptions) => Promise<boolean>;\n  setDisableAutoBiometricsPrompt: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableAutoTotpCopy: (options?: StorageOptions) => Promise<boolean>;\n  setDisableAutoTotpCopy: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableBadgeCounter: (options?: StorageOptions) => Promise<boolean>;\n  setDisableBadgeCounter: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableChangedPasswordNotification: (options?: StorageOptions) => Promise<boolean>;\n  setDisableChangedPasswordNotification: (\n    value: boolean,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getDisableContextMenuItem: (options?: StorageOptions) => Promise<boolean>;\n  setDisableContextMenuItem: (value: boolean, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this, use SettingsService\n   */\n  getDisableFavicon: (options?: StorageOptions) => Promise<boolean>;\n  /**\n   * @deprecated Do not call this, use SettingsService\n   */\n  setDisableFavicon: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableGa: (options?: StorageOptions) => Promise<boolean>;\n  setDisableGa: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDismissedAutofillCallout: (options?: StorageOptions) => Promise<boolean>;\n  setDismissedAutofillCallout: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDontShowCardsCurrentTab: (options?: StorageOptions) => Promise<boolean>;\n  setDontShowCardsCurrentTab: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDontShowIdentitiesCurrentTab: (options?: StorageOptions) => Promise<boolean>;\n  setDontShowIdentitiesCurrentTab: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDuckDuckGoSharedKey: (options?: StorageOptions) => Promise<string>;\n  setDuckDuckGoSharedKey: (value: string, options?: StorageOptions) => Promise<void>;\n  getDeviceKey: (options?: StorageOptions) => Promise<DeviceKey | null>;\n  setDeviceKey: (value: DeviceKey | null, options?: StorageOptions) => Promise<void>;\n  getAdminAuthRequest: (options?: StorageOptions) => Promise<AdminAuthRequestStorable | null>;\n  setAdminAuthRequest: (\n    adminAuthRequest: AdminAuthRequestStorable,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getShouldTrustDevice: (options?: StorageOptions) => Promise<boolean | null>;\n  setShouldTrustDevice: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getAccountDecryptionOptions: (\n    options?: StorageOptions\n  ) => Promise<AccountDecryptionOptions | null>;\n  setAccountDecryptionOptions: (\n    value: AccountDecryptionOptions,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEmail: (options?: StorageOptions) => Promise<string>;\n  setEmail: (value: string, options?: StorageOptions) => Promise<void>;\n  getEmailVerified: (options?: StorageOptions) => Promise<boolean>;\n  setEmailVerified: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableAlwaysOnTop: (options?: StorageOptions) => Promise<boolean>;\n  setEnableAlwaysOnTop: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableAutoFillOnPageLoad: (options?: StorageOptions) => Promise<boolean>;\n  setEnableAutoFillOnPageLoad: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableBrowserIntegration: (options?: StorageOptions) => Promise<boolean>;\n  setEnableBrowserIntegration: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableBrowserIntegrationFingerprint: (options?: StorageOptions) => Promise<boolean>;\n  setEnableBrowserIntegrationFingerprint: (\n    value: boolean,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEnableCloseToTray: (options?: StorageOptions) => Promise<boolean>;\n  setEnableCloseToTray: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableDuckDuckGoBrowserIntegration: (options?: StorageOptions) => Promise<boolean>;\n  setEnableDuckDuckGoBrowserIntegration: (\n    value: boolean,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEnableFullWidth: (options?: StorageOptions) => Promise<boolean>;\n  setEnableFullWidth: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableMinimizeToTray: (options?: StorageOptions) => Promise<boolean>;\n  setEnableMinimizeToTray: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableStartToTray: (options?: StorageOptions) => Promise<boolean>;\n  setEnableStartToTray: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableTray: (options?: StorageOptions) => Promise<boolean>;\n  setEnableTray: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEncryptedCiphers: (options?: StorageOptions) => Promise<{ [id: string]: CipherData }>;\n  setEncryptedCiphers: (\n    value: { [id: string]: CipherData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedCollections: (options?: StorageOptions) => Promise<{ [id: string]: CollectionData }>;\n  setEncryptedCollections: (\n    value: { [id: string]: CollectionData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use FolderService\n   */\n  getEncryptedFolders: (options?: StorageOptions) => Promise<{ [id: string]: FolderData }>;\n  /**\n   * @deprecated Do not call this directly, use FolderService\n   */\n  setEncryptedFolders: (\n    value: { [id: string]: FolderData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedOrganizationKeys: (\n    options?: StorageOptions\n  ) => Promise<{ [orgId: string]: EncryptedOrganizationKeyData }>;\n  setEncryptedOrganizationKeys: (\n    value: { [orgId: string]: EncryptedOrganizationKeyData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedPasswordGenerationHistory: (\n    options?: StorageOptions\n  ) => Promise<GeneratedPasswordHistory[]>;\n  setEncryptedPasswordGenerationHistory: (\n    value: GeneratedPasswordHistory[],\n    options?: StorageOptions\n  ) => Promise<void>;\n  /**\n   * @deprecated For migration purposes only, use getEncryptedUserKeyPin instead\n   */\n  getEncryptedPinProtected: (options?: StorageOptions) => Promise<string>;\n  /**\n   * @deprecated For migration purposes only, use setEncryptedUserKeyPin instead\n   */\n  setEncryptedPinProtected: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use PolicyService\n   */\n  getEncryptedPolicies: (options?: StorageOptions) => Promise<{ [id: string]: PolicyData }>;\n  /**\n   * @deprecated Do not call this directly, use PolicyService\n   */\n  setEncryptedPolicies: (\n    value: { [id: string]: PolicyData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedPrivateKey: (options?: StorageOptions) => Promise<string>;\n  setEncryptedPrivateKey: (value: string, options?: StorageOptions) => Promise<void>;\n  getEncryptedProviderKeys: (options?: StorageOptions) => Promise<any>;\n  setEncryptedProviderKeys: (value: any, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use SendService\n   */\n  getEncryptedSends: (options?: StorageOptions) => Promise<{ [id: string]: SendData }>;\n  /**\n   * @deprecated Do not call this directly, use SendService\n   */\n  setEncryptedSends: (value: { [id: string]: SendData }, options?: StorageOptions) => Promise<void>;\n  getEntityId: (options?: StorageOptions) => Promise<string>;\n  setEntityId: (value: string, options?: StorageOptions) => Promise<void>;\n  getEntityType: (options?: StorageOptions) => Promise<any>;\n  setEntityType: (value: string, options?: StorageOptions) => Promise<void>;\n  getEnvironmentUrls: (options?: StorageOptions) => Promise<EnvironmentUrls>;\n  setEnvironmentUrls: (value: EnvironmentUrls, options?: StorageOptions) => Promise<void>;\n  getRegion: (options?: StorageOptions) => Promise<string>;\n  setRegion: (value: string, options?: StorageOptions) => Promise<void>;\n  getEquivalentDomains: (options?: StorageOptions) => Promise<string[][]>;\n  setEquivalentDomains: (value: string, options?: StorageOptions) => Promise<void>;\n  getEventCollection: (options?: StorageOptions) => Promise<EventData[]>;\n  setEventCollection: (value: EventData[], options?: StorageOptions) => Promise<void>;\n  getEverHadUserKey: (options?: StorageOptions) => Promise<boolean>;\n  setEverHadUserKey: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEverBeenUnlocked: (options?: StorageOptions) => Promise<boolean>;\n  setEverBeenUnlocked: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getForcePasswordResetReason: (options?: StorageOptions) => Promise<ForceResetPasswordReason>;\n  setForcePasswordResetReason: (\n    value: ForceResetPasswordReason,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getInstalledVersion: (options?: StorageOptions) => Promise<string>;\n  setInstalledVersion: (value: string, options?: StorageOptions) => Promise<void>;\n  getIsAuthenticated: (options?: StorageOptions) => Promise<boolean>;\n  getKdfConfig: (options?: StorageOptions) => Promise<KdfConfig>;\n  setKdfConfig: (kdfConfig: KdfConfig, options?: StorageOptions) => Promise<void>;\n  getKdfType: (options?: StorageOptions) => Promise<KdfType>;\n  setKdfType: (value: KdfType, options?: StorageOptions) => Promise<void>;\n  getKeyHash: (options?: StorageOptions) => Promise<string>;\n  setKeyHash: (value: string, options?: StorageOptions) => Promise<void>;\n  getLastActive: (options?: StorageOptions) => Promise<number>;\n  setLastActive: (value: number, options?: StorageOptions) => Promise<void>;\n  getLastSync: (options?: StorageOptions) => Promise<string>;\n  setLastSync: (value: string, options?: StorageOptions) => Promise<void>;\n  getLocalData: (options?: StorageOptions) => Promise<{ [cipherId: string]: LocalData }>;\n  setLocalData: (\n    value: { [cipherId: string]: LocalData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getLocale: (options?: StorageOptions) => Promise<string>;\n  setLocale: (value: string, options?: StorageOptions) => Promise<void>;\n  getMainWindowSize: (options?: StorageOptions) => Promise<number>;\n  setMainWindowSize: (value: number, options?: StorageOptions) => Promise<void>;\n  getMinimizeOnCopyToClipboard: (options?: StorageOptions) => Promise<boolean>;\n  setMinimizeOnCopyToClipboard: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getNeverDomains: (options?: StorageOptions) => Promise<{ [id: string]: any }>;\n  setNeverDomains: (value: { [id: string]: any }, options?: StorageOptions) => Promise<void>;\n  getNoAutoPromptBiometricsText: (options?: StorageOptions) => Promise<string>;\n  setNoAutoPromptBiometricsText: (value: string, options?: StorageOptions) => Promise<void>;\n  getOpenAtLogin: (options?: StorageOptions) => Promise<boolean>;\n  setOpenAtLogin: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getOrganizationInvitation: (options?: StorageOptions) => Promise<any>;\n  setOrganizationInvitation: (value: any, options?: StorageOptions) => Promise<void>;\n  getEmergencyAccessInvitation: (options?: StorageOptions) => Promise<any>;\n  setEmergencyAccessInvitation: (value: any, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use OrganizationService\n   */\n  getOrganizations: (options?: StorageOptions) => Promise<{ [id: string]: OrganizationData }>;\n  /**\n   * @deprecated Do not call this directly, use OrganizationService\n   */\n  setOrganizations: (\n    value: { [id: string]: OrganizationData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getPasswordGenerationOptions: (options?: StorageOptions) => Promise<any>;\n  setPasswordGenerationOptions: (value: any, options?: StorageOptions) => Promise<void>;\n  getUsernameGenerationOptions: (options?: StorageOptions) => Promise<any>;\n  setUsernameGenerationOptions: (value: any, options?: StorageOptions) => Promise<void>;\n  getGeneratorOptions: (options?: StorageOptions) => Promise<any>;\n  setGeneratorOptions: (value: any, options?: StorageOptions) => Promise<void>;\n  /**\n   * Gets the user's Pin, encrypted by the user key\n   */\n  getProtectedPin: (options?: StorageOptions) => Promise<string>;\n  /**\n   * Sets the user's Pin, encrypted by the user key\n   */\n  setProtectedPin: (value: string, options?: StorageOptions) => Promise<void>;\n  getProviders: (options?: StorageOptions) => Promise<{ [id: string]: ProviderData }>;\n  setProviders: (value: { [id: string]: ProviderData }, options?: StorageOptions) => Promise<void>;\n  getPublicKey: (options?: StorageOptions) => Promise<Uint8Array>;\n  setPublicKey: (value: Uint8Array, options?: StorageOptions) => Promise<void>;\n  getRefreshToken: (options?: StorageOptions) => Promise<string>;\n  setRefreshToken: (value: string, options?: StorageOptions) => Promise<void>;\n  getRememberedEmail: (options?: StorageOptions) => Promise<string>;\n  setRememberedEmail: (value: string, options?: StorageOptions) => Promise<void>;\n  getSecurityStamp: (options?: StorageOptions) => Promise<string>;\n  setSecurityStamp: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use SettingsService\n   */\n  getSettings: (options?: StorageOptions) => Promise<AccountSettingsSettings>;\n  /**\n   * @deprecated Do not call this directly, use SettingsService\n   */\n  setSettings: (value: AccountSettingsSettings, options?: StorageOptions) => Promise<void>;\n  getSsoCodeVerifier: (options?: StorageOptions) => Promise<string>;\n  setSsoCodeVerifier: (value: string, options?: StorageOptions) => Promise<void>;\n  getSsoOrgIdentifier: (options?: StorageOptions) => Promise<string>;\n  setSsoOrganizationIdentifier: (value: string, options?: StorageOptions) => Promise<void>;\n  getSsoState: (options?: StorageOptions) => Promise<string>;\n  setSsoState: (value: string, options?: StorageOptions) => Promise<void>;\n  getUserSsoOrganizationIdentifier: (options?: StorageOptions) => Promise<string>;\n  setUserSsoOrganizationIdentifier: (\n    value: string | null,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getTheme: (options?: StorageOptions) => Promise<ThemeType>;\n  setTheme: (value: ThemeType, options?: StorageOptions) => Promise<void>;\n  getTwoFactorToken: (options?: StorageOptions) => Promise<string>;\n  setTwoFactorToken: (value: string, options?: StorageOptions) => Promise<void>;\n  getUserId: (options?: StorageOptions) => Promise<string>;\n  getUsesKeyConnector: (options?: StorageOptions) => Promise<boolean>;\n  setUsesKeyConnector: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getVaultTimeout: (options?: StorageOptions) => Promise<number>;\n  setVaultTimeout: (value: number, options?: StorageOptions) => Promise<void>;\n  getVaultTimeoutAction: (options?: StorageOptions) => Promise<string>;\n  setVaultTimeoutAction: (value: string, options?: StorageOptions) => Promise<void>;\n  getApproveLoginRequests: (options?: StorageOptions) => Promise<boolean>;\n  setApproveLoginRequests: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getStateVersion: () => Promise<number>;\n  setStateVersion: (value: number) => Promise<void>;\n  getWindow: () => Promise<WindowState>;\n  setWindow: (value: WindowState) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use ConfigService\n   */\n  getServerConfig: (options?: StorageOptions) => Promise<ServerConfigData>;\n  /**\n   * @deprecated Do not call this directly, use ConfigService\n   */\n  setServerConfig: (value: ServerConfigData, options?: StorageOptions) => Promise<void>;\n\n  getAvatarColor: (options?: StorageOptions) => Promise<string | null | undefined>;\n  setAvatarColor: (value: string, options?: StorageOptions) => Promise<void>;\n  getActivateAutoFillOnPageLoadFromPolicy: (\n    options?: StorageOptions\n  ) => Promise<boolean | undefined>;\n  setActivateAutoFillOnPageLoadFromPolicy: (\n    value: boolean,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getSMOnboardingTasks: (\n    options?: StorageOptions\n  ) => Promise<Record<string, Record<string, boolean>>>;\n  setSMOnboardingTasks: (\n    value: Record<string, Record<string, boolean>>,\n    options?: StorageOptions\n  ) => Promise<void>;\n}\n","import { BehaviorSubject, filter, map, Observable, switchMap, tap } from \"rxjs\";\nimport { Jsonify } from \"type-fest\";\n\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { Policy } from \"@bitwarden/common/admin-console/models/domain/policy\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/services/policy/policy.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\n\nimport { browserSession, sessionSync } from \"../../platform/decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserPolicyService extends PolicyService {\n  @sessionSync({\n    initializer: (obj: Jsonify<Policy>) => Object.assign(new Policy(), obj),\n    initializeAs: \"array\",\n  })\n  protected _policies: BehaviorSubject<Policy[]>;\n\n  constructor(stateService: StateService, organizationService: OrganizationService) {\n    super(stateService, organizationService);\n    this._policies.pipe(this.handleActivateAutofillPolicy.bind(this)).subscribe();\n  }\n\n  /**\n   * If the ActivateAutofill policy is enabled, save a flag indicating if we need to\n   * enable Autofill on page load.\n   */\n  private handleActivateAutofillPolicy(policies$: Observable<Policy[]>) {\n    return policies$.pipe(\n      map((policies) => policies.find((p) => p.type == PolicyType.ActivateAutofill && p.enabled)),\n      filter((p) => p != null),\n      switchMap(async (_) => [\n        await this.stateService.getActivateAutoFillOnPageLoadFromPolicy(),\n        await this.stateService.getEnableAutoFillOnPageLoad(),\n      ]),\n      tap(([activated, autofillEnabled]) => {\n        if (activated === undefined) {\n          this.stateService.setActivateAutoFillOnPageLoadFromPolicy(!autofillEnabled);\n        }\n      })\n    );\n  }\n}\n","export enum NotificationQueueMessageType {\n  AddLogin = 0,\n  ChangePassword = 1,\n}\n","import LockedVaultPendingNotificationsItem from \"../../background/models/lockedVaultPendingNotificationsItem\";\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\nimport { ContextMenuClickedHandler } from \"../browser/context-menu-clicked-handler\";\n\nexport default class ContextMenusBackground {\n  private contextMenus: typeof chrome.contextMenus;\n\n  constructor(private contextMenuClickedHandler: ContextMenuClickedHandler) {\n    this.contextMenus = chrome.contextMenus;\n  }\n\n  init() {\n    if (!this.contextMenus) {\n      return;\n    }\n\n    this.contextMenus.onClicked.addListener((info, tab) =>\n      this.contextMenuClickedHandler.run(info, tab)\n    );\n\n    BrowserApi.messageListener(\n      \"contextmenus.background\",\n      async (\n        msg: { command: string; data: LockedVaultPendingNotificationsItem },\n        sender: chrome.runtime.MessageSender,\n        sendResponse: any\n      ) => {\n        if (msg.command === \"unlockCompleted\" && msg.data.target === \"contextmenus.background\") {\n          await this.contextMenuClickedHandler.cipherAction(\n            msg.data.commandToRetry.msg.data,\n            msg.data.commandToRetry.sender.tab\n          );\n        }\n      }\n    );\n  }\n}\n","import { NotificationQueueMessageType } from \"./notificationQueueMessageType\";\n\nexport default class NotificationQueueMessage {\n  type: NotificationQueueMessageType;\n  domain: string;\n  tabId: number;\n  expires: Date;\n  wasVaultLocked: boolean;\n}\n","import { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { LoginUriView } from \"@bitwarden/common/vault/models/view/login-uri.view\";\nimport { LoginView } from \"@bitwarden/common/vault/models/view/login.view\";\n\nimport NotificationQueueMessage from \"./notificationQueueMessage\";\nimport { NotificationQueueMessageType } from \"./notificationQueueMessageType\";\n\nexport default class AddLoginQueueMessage extends NotificationQueueMessage {\n  type: NotificationQueueMessageType.AddLogin;\n  username: string;\n  password: string;\n  uri: string;\n\n  static toCipherView(message: AddLoginQueueMessage, folderId?: string): CipherView {\n    const uriView = new LoginUriView();\n    uriView.uri = message.uri;\n\n    const loginView = new LoginView();\n    loginView.uris = [uriView];\n    loginView.username = message.username;\n    loginView.password = message.password;\n\n    const cipherView = new CipherView();\n    cipherView.name = (Utils.getHostname(message.uri) || message.domain).replace(/^www\\./, \"\");\n    cipherView.folderId = folderId;\n    cipherView.type = CipherType.Login;\n    cipherView.login = loginView;\n\n    return cipherView;\n  }\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { ThemeType } from \"@bitwarden/common/enums\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport AddChangePasswordQueueMessage from \"../../background/models/addChangePasswordQueueMessage\";\nimport AddLoginQueueMessage from \"../../background/models/addLoginQueueMessage\";\nimport AddLoginRuntimeMessage from \"../../background/models/addLoginRuntimeMessage\";\nimport ChangePasswordRuntimeMessage from \"../../background/models/changePasswordRuntimeMessage\";\nimport LockedVaultPendingNotificationsItem from \"../../background/models/lockedVaultPendingNotificationsItem\";\nimport { NotificationQueueMessageType } from \"../../background/models/notificationQueueMessageType\";\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\nimport { BrowserStateService } from \"../../platform/services/abstractions/browser-state.service\";\nimport { AutofillService } from \"../services/abstractions/autofill.service\";\n\nexport default class NotificationBackground {\n  private notificationQueue: (AddLoginQueueMessage | AddChangePasswordQueueMessage)[] = [];\n\n  constructor(\n    private autofillService: AutofillService,\n    private cipherService: CipherService,\n    private authService: AuthService,\n    private policyService: PolicyService,\n    private folderService: FolderService,\n    private stateService: BrowserStateService,\n    private environmentService: EnvironmentService\n  ) {}\n\n  async init() {\n    if (chrome.runtime == null) {\n      return;\n    }\n\n    BrowserApi.messageListener(\n      \"notification.background\",\n      async (msg: any, sender: chrome.runtime.MessageSender) => {\n        await this.processMessage(msg, sender);\n      }\n    );\n\n    this.cleanupNotificationQueue();\n  }\n\n  async processMessage(msg: any, sender: chrome.runtime.MessageSender) {\n    switch (msg.command) {\n      case \"unlockCompleted\":\n        if (msg.data.target !== \"notification.background\") {\n          return;\n        }\n        await this.processMessage(msg.data.commandToRetry.msg, msg.data.commandToRetry.sender);\n        break;\n      case \"bgGetDataForTab\":\n        await this.getDataForTab(sender.tab, msg.responseCommand);\n        break;\n      case \"bgCloseNotificationBar\":\n        await BrowserApi.tabSendMessageData(sender.tab, \"closeNotificationBar\");\n        break;\n      case \"bgAdjustNotificationBar\":\n        await BrowserApi.tabSendMessageData(sender.tab, \"adjustNotificationBar\", msg.data);\n        break;\n      case \"bgAddLogin\":\n        await this.addLogin(msg.login, sender.tab);\n        break;\n      case \"bgChangedPassword\":\n        await this.changedPassword(msg.data, sender.tab);\n        break;\n      case \"bgAddClose\":\n      case \"bgChangeClose\":\n        this.removeTabFromNotificationQueue(sender.tab);\n        break;\n      case \"bgAddSave\":\n      case \"bgChangeSave\":\n        if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n          const retryMessage: LockedVaultPendingNotificationsItem = {\n            commandToRetry: {\n              msg: msg,\n              sender: sender,\n            },\n            target: \"notification.background\",\n          };\n          await BrowserApi.tabSendMessageData(\n            sender.tab,\n            \"addToLockedVaultPendingNotifications\",\n            retryMessage\n          );\n          await BrowserApi.tabSendMessageData(sender.tab, \"promptForLogin\");\n          return;\n        }\n        await this.saveOrUpdateCredentials(sender.tab, msg.edit, msg.folder);\n        break;\n      case \"bgNeverSave\":\n        await this.saveNever(sender.tab);\n        break;\n      case \"collectPageDetailsResponse\":\n        switch (msg.sender) {\n          case \"notificationBar\": {\n            const forms = this.autofillService.getFormsWithPasswordFields(msg.details);\n            await BrowserApi.tabSendMessageData(msg.tab, \"notificationBarPageDetails\", {\n              details: msg.details,\n              forms: forms,\n            });\n            break;\n          }\n          default:\n            break;\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  async checkNotificationQueue(tab: chrome.tabs.Tab = null): Promise<void> {\n    if (this.notificationQueue.length === 0) {\n      return;\n    }\n\n    if (tab != null) {\n      await this.doNotificationQueueCheck(tab);\n      return;\n    }\n\n    const currentTab = await BrowserApi.getTabFromCurrentWindow();\n    if (currentTab != null) {\n      await this.doNotificationQueueCheck(currentTab);\n    }\n  }\n\n  private cleanupNotificationQueue() {\n    for (let i = this.notificationQueue.length - 1; i >= 0; i--) {\n      if (this.notificationQueue[i].expires < new Date()) {\n        this.notificationQueue.splice(i, 1);\n      }\n    }\n    setTimeout(() => this.cleanupNotificationQueue(), 2 * 60 * 1000); // check every 2 minutes\n  }\n\n  private async doNotificationQueueCheck(tab: chrome.tabs.Tab): Promise<void> {\n    if (tab == null) {\n      return;\n    }\n\n    const tabDomain = Utils.getDomain(tab.url);\n    if (tabDomain == null) {\n      return;\n    }\n\n    for (let i = 0; i < this.notificationQueue.length; i++) {\n      if (\n        this.notificationQueue[i].tabId !== tab.id ||\n        this.notificationQueue[i].domain !== tabDomain\n      ) {\n        continue;\n      }\n\n      if (this.notificationQueue[i].type === NotificationQueueMessageType.AddLogin) {\n        BrowserApi.tabSendMessageData(tab, \"openNotificationBar\", {\n          type: \"add\",\n          typeData: {\n            isVaultLocked: this.notificationQueue[i].wasVaultLocked,\n            theme: await this.getCurrentTheme(),\n            removeIndividualVault: await this.removeIndividualVault(),\n            webVaultURL: await this.environmentService.getWebVaultUrl(),\n          },\n        });\n      } else if (this.notificationQueue[i].type === NotificationQueueMessageType.ChangePassword) {\n        BrowserApi.tabSendMessageData(tab, \"openNotificationBar\", {\n          type: \"change\",\n          typeData: {\n            isVaultLocked: this.notificationQueue[i].wasVaultLocked,\n            theme: await this.getCurrentTheme(),\n            webVaultURL: await this.environmentService.getWebVaultUrl(),\n          },\n        });\n      }\n      break;\n    }\n  }\n\n  private async getCurrentTheme() {\n    const theme = await this.stateService.getTheme();\n\n    if (theme !== ThemeType.System) {\n      return theme;\n    }\n\n    return window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n      ? ThemeType.Dark\n      : ThemeType.Light;\n  }\n\n  private removeTabFromNotificationQueue(tab: chrome.tabs.Tab) {\n    for (let i = this.notificationQueue.length - 1; i >= 0; i--) {\n      if (this.notificationQueue[i].tabId === tab.id) {\n        this.notificationQueue.splice(i, 1);\n      }\n    }\n  }\n\n  private async addLogin(loginInfo: AddLoginRuntimeMessage, tab: chrome.tabs.Tab) {\n    const authStatus = await this.authService.getAuthStatus();\n    if (authStatus === AuthenticationStatus.LoggedOut) {\n      return;\n    }\n\n    const loginDomain = Utils.getDomain(loginInfo.url);\n    if (loginDomain == null) {\n      return;\n    }\n\n    let normalizedUsername = loginInfo.username;\n    if (normalizedUsername != null) {\n      normalizedUsername = normalizedUsername.toLowerCase();\n    }\n\n    const disabledAddLogin = await this.stateService.getDisableAddLoginNotification();\n    if (authStatus === AuthenticationStatus.Locked) {\n      if (disabledAddLogin) {\n        return;\n      }\n\n      this.pushAddLoginToQueue(loginDomain, loginInfo, tab, true);\n      return;\n    }\n\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(loginInfo.url);\n    const usernameMatches = ciphers.filter(\n      (c) => c.login.username != null && c.login.username.toLowerCase() === normalizedUsername\n    );\n    if (usernameMatches.length === 0) {\n      if (disabledAddLogin) {\n        return;\n      }\n\n      this.pushAddLoginToQueue(loginDomain, loginInfo, tab);\n    } else if (\n      usernameMatches.length === 1 &&\n      usernameMatches[0].login.password !== loginInfo.password\n    ) {\n      const disabledChangePassword =\n        await this.stateService.getDisableChangedPasswordNotification();\n      if (disabledChangePassword) {\n        return;\n      }\n      this.pushChangePasswordToQueue(usernameMatches[0].id, loginDomain, loginInfo.password, tab);\n    }\n  }\n\n  private async pushAddLoginToQueue(\n    loginDomain: string,\n    loginInfo: AddLoginRuntimeMessage,\n    tab: chrome.tabs.Tab,\n    isVaultLocked = false\n  ) {\n    // remove any old messages for this tab\n    this.removeTabFromNotificationQueue(tab);\n    const message: AddLoginQueueMessage = {\n      type: NotificationQueueMessageType.AddLogin,\n      username: loginInfo.username,\n      password: loginInfo.password,\n      domain: loginDomain,\n      uri: loginInfo.url,\n      tabId: tab.id,\n      expires: new Date(new Date().getTime() + 5 * 60000), // 5 minutes\n      wasVaultLocked: isVaultLocked,\n    };\n    this.notificationQueue.push(message);\n    await this.checkNotificationQueue(tab);\n  }\n\n  private async changedPassword(changeData: ChangePasswordRuntimeMessage, tab: chrome.tabs.Tab) {\n    const loginDomain = Utils.getDomain(changeData.url);\n    if (loginDomain == null) {\n      return;\n    }\n\n    if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n      this.pushChangePasswordToQueue(null, loginDomain, changeData.newPassword, tab, true);\n      return;\n    }\n\n    let id: string = null;\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(changeData.url);\n    if (changeData.currentPassword != null) {\n      const passwordMatches = ciphers.filter(\n        (c) => c.login.password === changeData.currentPassword\n      );\n      if (passwordMatches.length === 1) {\n        id = passwordMatches[0].id;\n      }\n    } else if (ciphers.length === 1) {\n      id = ciphers[0].id;\n    }\n    if (id != null) {\n      this.pushChangePasswordToQueue(id, loginDomain, changeData.newPassword, tab);\n    }\n  }\n\n  private async pushChangePasswordToQueue(\n    cipherId: string,\n    loginDomain: string,\n    newPassword: string,\n    tab: chrome.tabs.Tab,\n    isVaultLocked = false\n  ) {\n    // remove any old messages for this tab\n    this.removeTabFromNotificationQueue(tab);\n    const message: AddChangePasswordQueueMessage = {\n      type: NotificationQueueMessageType.ChangePassword,\n      cipherId: cipherId,\n      newPassword: newPassword,\n      domain: loginDomain,\n      tabId: tab.id,\n      expires: new Date(new Date().getTime() + 5 * 60000), // 5 minutes\n      wasVaultLocked: isVaultLocked,\n    };\n    this.notificationQueue.push(message);\n    await this.checkNotificationQueue(tab);\n  }\n\n  private async saveOrUpdateCredentials(tab: chrome.tabs.Tab, edit: boolean, folderId?: string) {\n    for (let i = this.notificationQueue.length - 1; i >= 0; i--) {\n      const queueMessage = this.notificationQueue[i];\n      if (queueMessage.tabId !== tab.id || !(queueMessage.type in NotificationQueueMessageType)) {\n        continue;\n      }\n\n      const tabDomain = Utils.getDomain(tab.url);\n      if (tabDomain != null && tabDomain !== queueMessage.domain) {\n        continue;\n      }\n\n      this.notificationQueue.splice(i, 1);\n      BrowserApi.tabSendMessageData(tab, \"closeNotificationBar\");\n\n      if (queueMessage.type === NotificationQueueMessageType.ChangePassword) {\n        const cipherView = await this.getDecryptedCipherById(queueMessage.cipherId);\n        await this.updatePassword(cipherView, queueMessage.newPassword, edit, tab);\n        return;\n      }\n\n      if (queueMessage.type === NotificationQueueMessageType.AddLogin) {\n        // If the vault was locked, check if a cipher needs updating instead of creating a new one\n        if (queueMessage.wasVaultLocked) {\n          const allCiphers = await this.cipherService.getAllDecryptedForUrl(queueMessage.uri);\n          const existingCipher = allCiphers.find(\n            (c) =>\n              c.login.username != null && c.login.username.toLowerCase() === queueMessage.username\n          );\n\n          if (existingCipher != null) {\n            await this.updatePassword(existingCipher, queueMessage.password, edit, tab);\n            return;\n          }\n        }\n\n        folderId = (await this.folderExists(folderId)) ? folderId : null;\n        const newCipher = AddLoginQueueMessage.toCipherView(queueMessage, folderId);\n\n        if (edit) {\n          await this.editItem(newCipher, tab);\n          return;\n        }\n\n        const cipher = await this.cipherService.encrypt(newCipher);\n        await this.cipherService.createWithServer(cipher);\n        BrowserApi.tabSendMessageData(tab, \"addedCipher\");\n      }\n    }\n  }\n\n  private async updatePassword(\n    cipherView: CipherView,\n    newPassword: string,\n    edit: boolean,\n    tab: chrome.tabs.Tab\n  ) {\n    cipherView.login.password = newPassword;\n\n    if (edit) {\n      await this.editItem(cipherView, tab);\n      BrowserApi.tabSendMessage(tab, \"editedCipher\");\n      return;\n    }\n\n    const cipher = await this.cipherService.encrypt(cipherView);\n    await this.cipherService.updateWithServer(cipher);\n    // We've only updated the password, no need to broadcast editedCipher message\n    return;\n  }\n\n  private async editItem(cipherView: CipherView, senderTab: chrome.tabs.Tab) {\n    await this.stateService.setAddEditCipherInfo({\n      cipher: cipherView,\n      collectionIds: cipherView.collectionIds,\n    });\n\n    await BrowserApi.tabSendMessageData(senderTab, \"openAddEditCipher\", {\n      cipherId: cipherView.id,\n    });\n  }\n\n  private async folderExists(folderId: string) {\n    if (Utils.isNullOrWhitespace(folderId) || folderId === \"null\") {\n      return false;\n    }\n\n    const folders = await firstValueFrom(this.folderService.folderViews$);\n    return folders.some((x) => x.id === folderId);\n  }\n\n  private async getDecryptedCipherById(cipherId: string) {\n    const cipher = await this.cipherService.get(cipherId);\n    if (cipher != null && cipher.type === CipherType.Login) {\n      return await cipher.decrypt();\n    }\n    return null;\n  }\n\n  private async saveNever(tab: chrome.tabs.Tab) {\n    for (let i = this.notificationQueue.length - 1; i >= 0; i--) {\n      const queueMessage = this.notificationQueue[i];\n      if (\n        queueMessage.tabId !== tab.id ||\n        queueMessage.type !== NotificationQueueMessageType.AddLogin\n      ) {\n        continue;\n      }\n\n      const tabDomain = Utils.getDomain(tab.url);\n      if (tabDomain != null && tabDomain !== queueMessage.domain) {\n        continue;\n      }\n\n      this.notificationQueue.splice(i, 1);\n      BrowserApi.tabSendMessageData(tab, \"closeNotificationBar\");\n\n      const hostname = Utils.getHostname(tab.url);\n      await this.cipherService.saveNeverDomain(hostname);\n    }\n  }\n\n  private async getDataForTab(tab: chrome.tabs.Tab, responseCommand: string) {\n    const responseData: any = {};\n    if (responseCommand === \"notificationBarGetFoldersList\") {\n      responseData.folders = await firstValueFrom(this.folderService.folderViews$);\n    }\n\n    await BrowserApi.tabSendMessageData(tab, responseCommand, responseData);\n  }\n\n  private async removeIndividualVault(): Promise<boolean> {\n    return await firstValueFrom(\n      this.policyService.policyAppliesToActiveUser$(PolicyType.PersonalOwnership)\n    );\n  }\n}\n","import MainBackground from \"../../background/main.background\";\n\nimport NotificationBackground from \"./notification.background\";\n\nexport default class TabsBackground {\n  constructor(\n    private main: MainBackground,\n    private notificationBackground: NotificationBackground\n  ) {}\n\n  private focusedWindowId: number;\n\n  async init() {\n    if (!chrome.tabs || !chrome.windows) {\n      return;\n    }\n\n    chrome.windows.onFocusChanged.addListener(async (windowId: number) => {\n      if (windowId === null || windowId < 0) {\n        return;\n      }\n\n      this.focusedWindowId = windowId;\n      this.main.messagingService.send(\"windowChanged\");\n    });\n\n    chrome.tabs.onActivated.addListener(async (activeInfo: chrome.tabs.TabActiveInfo) => {\n      await this.main.refreshBadge();\n      await this.main.refreshMenu();\n      this.main.messagingService.send(\"tabChanged\");\n    });\n\n    chrome.tabs.onReplaced.addListener(async (addedTabId: number, removedTabId: number) => {\n      if (this.main.onReplacedRan) {\n        return;\n      }\n      this.main.onReplacedRan = true;\n\n      await this.notificationBackground.checkNotificationQueue();\n      await this.main.refreshBadge();\n      await this.main.refreshMenu();\n      this.main.messagingService.send(\"tabChanged\");\n    });\n\n    chrome.tabs.onUpdated.addListener(\n      async (tabId: number, changeInfo: chrome.tabs.TabChangeInfo, tab: chrome.tabs.Tab) => {\n        if (this.focusedWindowId > 0 && tab.windowId != this.focusedWindowId) {\n          return;\n        }\n\n        if (!tab.active) {\n          return;\n        }\n\n        if (this.main.onUpdatedRan) {\n          return;\n        }\n        this.main.onUpdatedRan = true;\n\n        await this.notificationBackground.checkNotificationQueue(tab);\n        await this.main.refreshBadge();\n        await this.main.refreshMenu();\n        this.main.messagingService.send(\"tabChanged\");\n      }\n    );\n  }\n}\n","export type CachedServices = Record<string, unknown>;\n\nexport type FactoryOptions = {\n  alwaysInitializeNewService?: boolean;\n  doNotStoreInitializedService?: boolean;\n  [optionsKey: string]: unknown;\n};\n\nexport async function factory<\n  TCache extends CachedServices,\n  TName extends keyof TCache,\n  TOpts extends FactoryOptions\n>(\n  cachedServices: TCache,\n  name: TName,\n  opts: TOpts,\n  factory: () => TCache[TName] | Promise<TCache[TName]>\n): Promise<TCache[TName]> {\n  let instance = cachedServices[name];\n  if (opts.alwaysInitializeNewService || !instance) {\n    const instanceOrPromise = factory();\n    instance = instanceOrPromise instanceof Promise ? await instanceOrPromise : instanceOrPromise;\n  }\n\n  if (!opts.doNotStoreInitializedService) {\n    cachedServices[name] = instance;\n  }\n\n  return instance as TCache[TName];\n}\n","import { View } from \"../../../../models/view/view\";\nimport { DeepJsonify } from \"../../../../types/deep-jsonify\";\nimport { SendFile } from \"../domain/send-file\";\n\nexport class SendFileView implements View {\n  id: string = null;\n  size: string = null;\n  sizeName: string = null;\n  fileName: string = null;\n\n  constructor(f?: SendFile) {\n    if (!f) {\n      return;\n    }\n\n    this.id = f.id;\n    this.size = f.size;\n    this.sizeName = f.sizeName;\n  }\n\n  get fileSize(): number {\n    try {\n      if (this.size != null) {\n        return parseInt(this.size, null);\n      }\n    } catch {\n      // Invalid file size.\n    }\n    return 0;\n  }\n\n  static fromJSON(json: DeepJsonify<SendFileView>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new SendFileView(), json);\n  }\n}\n","import { View } from \"../../../../models/view/view\";\nimport { DeepJsonify } from \"../../../../types/deep-jsonify\";\nimport { SendText } from \"../domain/send-text\";\n\nexport class SendTextView implements View {\n  text: string = null;\n  hidden: boolean;\n\n  constructor(t?: SendText) {\n    if (!t) {\n      return;\n    }\n\n    this.hidden = t.hidden;\n  }\n\n  get maskedText(): string {\n    return this.text != null ? \"••••••••\" : null;\n  }\n\n  static fromJSON(json: DeepJsonify<SendTextView>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new SendTextView(), json);\n  }\n}\n","import { View } from \"../../../../models/view/view\";\nimport { Utils } from \"../../../../platform/misc/utils\";\nimport { SymmetricCryptoKey } from \"../../../../platform/models/domain/symmetric-crypto-key\";\nimport { DeepJsonify } from \"../../../../types/deep-jsonify\";\nimport { SendType } from \"../../enums/send-type\";\nimport { Send } from \"../domain/send\";\n\nimport { SendFileView } from \"./send-file.view\";\nimport { SendTextView } from \"./send-text.view\";\n\nexport class SendView implements View {\n  id: string = null;\n  accessId: string = null;\n  name: string = null;\n  notes: string = null;\n  key: Uint8Array;\n  cryptoKey: SymmetricCryptoKey;\n  type: SendType = null;\n  text = new SendTextView();\n  file = new SendFileView();\n  maxAccessCount?: number = null;\n  accessCount = 0;\n  revisionDate: Date = null;\n  deletionDate: Date = null;\n  expirationDate: Date = null;\n  password: string = null;\n  disabled = false;\n  hideEmail = false;\n\n  constructor(s?: Send) {\n    if (!s) {\n      return;\n    }\n\n    this.id = s.id;\n    this.accessId = s.accessId;\n    this.type = s.type;\n    this.maxAccessCount = s.maxAccessCount;\n    this.accessCount = s.accessCount;\n    this.revisionDate = s.revisionDate;\n    this.deletionDate = s.deletionDate;\n    this.expirationDate = s.expirationDate;\n    this.disabled = s.disabled;\n    this.password = s.password;\n    this.hideEmail = s.hideEmail;\n  }\n\n  get urlB64Key(): string {\n    return Utils.fromBufferToUrlB64(this.key);\n  }\n\n  get maxAccessCountReached(): boolean {\n    if (this.maxAccessCount == null) {\n      return false;\n    }\n    return this.accessCount >= this.maxAccessCount;\n  }\n\n  get expired(): boolean {\n    if (this.expirationDate == null) {\n      return false;\n    }\n    return this.expirationDate <= new Date();\n  }\n\n  get pendingDelete(): boolean {\n    return this.deletionDate <= new Date();\n  }\n\n  toJSON() {\n    return Utils.merge(\n      { ...this },\n      {\n        key: Utils.fromBufferToB64(this.key),\n      }\n    );\n  }\n\n  static fromJSON(json: DeepJsonify<SendView>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new SendView(), json, {\n      key: Utils.fromB64ToArray(json.key),\n      cryptoKey: SymmetricCryptoKey.fromJSON(json.cryptoKey),\n      text: SendTextView.fromJSON(json.text),\n      file: SendFileView.fromJSON(json.file),\n      revisionDate: json.revisionDate == null ? null : new Date(json.revisionDate),\n      deletionDate: json.deletionDate == null ? null : new Date(json.deletionDate),\n      expirationDate: json.expirationDate == null ? null : new Date(json.expirationDate),\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Account } from \"./account\";\nimport { GlobalState } from \"./global-state\";\n\nexport class State<\n  TGlobalState extends GlobalState = GlobalState,\n  TAccount extends Account = Account\n> {\n  accounts: { [userId: string]: TAccount } = {};\n  globals: TGlobalState;\n  activeUserId: string;\n  authenticatedAccounts: string[] = [];\n  accountActivity: { [userId: string]: number } = {};\n\n  constructor(globals: TGlobalState) {\n    this.globals = globals;\n  }\n\n  // TODO, make Jsonify<State,TGlobalState,TAccount> work. It currently doesn't because Globals doesn't implement Jsonify.\n  static fromJSON<TGlobalState extends GlobalState, TAccount extends Account>(\n    obj: any,\n    accountDeserializer: (json: Jsonify<TAccount>) => TAccount\n  ): State<TGlobalState, TAccount> {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new State(null), obj, {\n      accounts: State.buildAccountMapFromJSON(obj?.accounts, accountDeserializer),\n    });\n  }\n\n  private static buildAccountMapFromJSON<TAccount extends Account>(\n    jsonAccounts: { [userId: string]: Jsonify<TAccount> },\n    accountDeserializer: (json: Jsonify<TAccount>) => TAccount\n  ) {\n    if (!jsonAccounts) {\n      return {};\n    }\n    const accounts: { [userId: string]: TAccount } = {};\n    for (const userId in jsonAccounts) {\n      accounts[userId] = accountDeserializer(jsonAccounts[userId]);\n    }\n    return accounts;\n  }\n}\n","import { BehaviorSubject, concatMap } from \"rxjs\";\nimport { Jsonify, JsonValue } from \"type-fest\";\n\nimport { EncryptedOrganizationKeyData } from \"../../admin-console/models/data/encrypted-organization-key.data\";\nimport { OrganizationData } from \"../../admin-console/models/data/organization.data\";\nimport { PolicyData } from \"../../admin-console/models/data/policy.data\";\nimport { ProviderData } from \"../../admin-console/models/data/provider.data\";\nimport { Policy } from \"../../admin-console/models/domain/policy\";\nimport { AdminAuthRequestStorable } from \"../../auth/models/domain/admin-auth-req-storable\";\nimport { EnvironmentUrls } from \"../../auth/models/domain/environment-urls\";\nimport { ForceResetPasswordReason } from \"../../auth/models/domain/force-reset-password-reason\";\nimport { KdfConfig } from \"../../auth/models/domain/kdf-config\";\nimport { BiometricKey } from \"../../auth/types/biometric-key\";\nimport {\n  HtmlStorageLocation,\n  KdfType,\n  StorageLocation,\n  ThemeType,\n  UriMatchType,\n} from \"../../enums\";\nimport { VaultTimeoutAction } from \"../../enums/vault-timeout-action.enum\";\nimport { EventData } from \"../../models/data/event.data\";\nimport { WindowState } from \"../../models/domain/window-state\";\nimport { GeneratedPasswordHistory } from \"../../tools/generator/password\";\nimport { SendData } from \"../../tools/send/models/data/send.data\";\nimport { SendView } from \"../../tools/send/models/view/send.view\";\nimport { CipherData } from \"../../vault/models/data/cipher.data\";\nimport { CollectionData } from \"../../vault/models/data/collection.data\";\nimport { FolderData } from \"../../vault/models/data/folder.data\";\nimport { LocalData } from \"../../vault/models/data/local.data\";\nimport { CipherView } from \"../../vault/models/view/cipher.view\";\nimport { CollectionView } from \"../../vault/models/view/collection.view\";\nimport { AddEditCipherInfo } from \"../../vault/types/add-edit-cipher-info\";\nimport { LogService } from \"../abstractions/log.service\";\nimport { StateMigrationService } from \"../abstractions/state-migration.service\";\nimport { StateService as StateServiceAbstraction } from \"../abstractions/state.service\";\nimport {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"../abstractions/storage.service\";\nimport { StateFactory } from \"../factories/state-factory\";\nimport { Utils } from \"../misc/utils\";\nimport { ServerConfigData } from \"../models/data/server-config.data\";\nimport {\n  Account,\n  AccountData,\n  AccountDecryptionOptions,\n  AccountSettings,\n  AccountSettingsSettings,\n} from \"../models/domain/account\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { GlobalState } from \"../models/domain/global-state\";\nimport { State } from \"../models/domain/state\";\nimport { StorageOptions } from \"../models/domain/storage-options\";\nimport {\n  DeviceKey,\n  MasterKey,\n  SymmetricCryptoKey,\n  UserKey,\n} from \"../models/domain/symmetric-crypto-key\";\n\nconst keys = {\n  state: \"state\",\n  global: \"global\",\n  authenticatedAccounts: \"authenticatedAccounts\",\n  activeUserId: \"activeUserId\",\n  tempAccountSettings: \"tempAccountSettings\", // used to hold account specific settings (i.e clear clipboard) between initial migration and first account authentication\n  accountActivity: \"accountActivity\",\n};\n\nconst partialKeys = {\n  userAutoKey: \"_user_auto\",\n  userBiometricKey: \"_user_biometric\",\n\n  autoKey: \"_masterkey_auto\",\n  biometricKey: \"_masterkey_biometric\",\n  masterKey: \"_masterkey\",\n};\n\nconst DDG_SHARED_KEY = \"DuckDuckGoSharedKey\";\n\nexport class StateService<\n  TGlobalState extends GlobalState = GlobalState,\n  TAccount extends Account = Account\n> implements StateServiceAbstraction<TAccount>\n{\n  protected accountsSubject = new BehaviorSubject<{ [userId: string]: TAccount }>({});\n  accounts$ = this.accountsSubject.asObservable();\n\n  protected activeAccountSubject = new BehaviorSubject<string | null>(null);\n  activeAccount$ = this.activeAccountSubject.asObservable();\n\n  protected activeAccountUnlockedSubject = new BehaviorSubject<boolean>(false);\n  activeAccountUnlocked$ = this.activeAccountUnlockedSubject.asObservable();\n\n  private hasBeenInited = false;\n  private isRecoveredSession = false;\n\n  protected accountDiskCache = new BehaviorSubject<Record<string, TAccount>>({});\n\n  // default account serializer, must be overridden by child class\n  protected accountDeserializer = Account.fromJSON as (json: Jsonify<TAccount>) => TAccount;\n\n  constructor(\n    protected storageService: AbstractStorageService,\n    protected secureStorageService: AbstractStorageService,\n    protected memoryStorageService: AbstractMemoryStorageService,\n    protected logService: LogService,\n    protected stateMigrationService: StateMigrationService,\n    protected stateFactory: StateFactory<TGlobalState, TAccount>,\n    protected useAccountCache: boolean = true\n  ) {\n    // If the account gets changed, verify the new account is unlocked\n    this.activeAccountSubject\n      .pipe(\n        concatMap(async (userId) => {\n          if (userId == null && this.activeAccountUnlockedSubject.getValue() == false) {\n            return;\n          } else if (userId == null) {\n            this.activeAccountUnlockedSubject.next(false);\n          }\n          // FIXME: This should be refactored into AuthService or a similar service,\n          //  as checking for the existence of the crypto key is a low level\n          //  implementation detail.\n          this.activeAccountUnlockedSubject.next((await this.getUserKey()) != null);\n        })\n      )\n      .subscribe();\n  }\n\n  async init(): Promise<void> {\n    if (this.hasBeenInited) {\n      return;\n    }\n\n    if (await this.stateMigrationService.needsMigration()) {\n      await this.stateMigrationService.migrate();\n    }\n\n    await this.state().then(async (state) => {\n      if (state == null) {\n        await this.setState(new State<TGlobalState, TAccount>(this.createGlobals()));\n      } else {\n        this.isRecoveredSession = true;\n      }\n    });\n    await this.initAccountState();\n\n    this.hasBeenInited = true;\n  }\n\n  async initAccountState() {\n    if (this.isRecoveredSession) {\n      return;\n    }\n\n    await this.updateState(async (state) => {\n      state.authenticatedAccounts =\n        (await this.storageService.get<string[]>(keys.authenticatedAccounts)) ?? [];\n      for (const i in state.authenticatedAccounts) {\n        if (i != null) {\n          await this.syncAccountFromDisk(state.authenticatedAccounts[i]);\n        }\n      }\n      const storedActiveUser = await this.storageService.get<string>(keys.activeUserId);\n      if (storedActiveUser != null) {\n        state.activeUserId = storedActiveUser;\n      }\n      await this.pushAccounts();\n      this.activeAccountSubject.next(state.activeUserId);\n\n      return state;\n    });\n  }\n\n  async syncAccountFromDisk(userId: string) {\n    if (userId == null) {\n      return;\n    }\n    await this.updateState(async (state) => {\n      if (state.accounts == null) {\n        state.accounts = {};\n      }\n      state.accounts[userId] = this.createAccount();\n      const diskAccount = await this.getAccountFromDisk({ userId: userId });\n      state.accounts[userId].profile = diskAccount.profile;\n      return state;\n    });\n  }\n\n  async addAccount(account: TAccount) {\n    account = await this.setAccountEnvironment(account);\n    await this.updateState(async (state) => {\n      state.authenticatedAccounts.push(account.profile.userId);\n      await this.storageService.save(keys.authenticatedAccounts, state.authenticatedAccounts);\n      state.accounts[account.profile.userId] = account;\n      return state;\n    });\n    await this.scaffoldNewAccountStorage(account);\n    await this.setLastActive(new Date().getTime(), { userId: account.profile.userId });\n    await this.setActiveUser(account.profile.userId);\n    this.activeAccountSubject.next(account.profile.userId);\n  }\n\n  async setActiveUser(userId: string): Promise<void> {\n    this.clearDecryptedDataForActiveUser();\n    await this.updateState(async (state) => {\n      state.activeUserId = userId;\n      await this.storageService.save(keys.activeUserId, userId);\n      this.activeAccountSubject.next(state.activeUserId);\n      return state;\n    });\n\n    await this.pushAccounts();\n  }\n\n  async clean(options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultInMemoryOptions());\n    await this.deAuthenticateAccount(options.userId);\n    if (options.userId === (await this.state())?.activeUserId) {\n      await this.dynamicallySetActiveUser();\n    }\n\n    await this.removeAccountFromDisk(options?.userId);\n    this.removeAccountFromMemory(options?.userId);\n    await this.pushAccounts();\n  }\n\n  async getAccessToken(options?: StorageOptions): Promise<string> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    return (await this.getAccount(options))?.tokens?.accessToken;\n  }\n\n  async setAccessToken(value: string, options?: StorageOptions): Promise<void> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    const account = await this.getAccount(options);\n    account.tokens.accessToken = value;\n    await this.saveAccount(account, options);\n  }\n\n  async getAddEditCipherInfo(options?: StorageOptions): Promise<AddEditCipherInfo> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.addEditCipherInfo;\n  }\n\n  async setAddEditCipherInfo(value: AddEditCipherInfo, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.addEditCipherInfo = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getAlwaysShowDock(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.alwaysShowDock ?? false\n    );\n  }\n\n  async setAlwaysShowDock(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.alwaysShowDock = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getApiKeyClientId(options?: StorageOptions): Promise<string> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    return (await this.getAccount(options))?.profile?.apiKeyClientId;\n  }\n\n  async setApiKeyClientId(value: string, options?: StorageOptions): Promise<void> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    const account = await this.getAccount(options);\n    account.profile.apiKeyClientId = value;\n    await this.saveAccount(account, options);\n  }\n\n  async getApiKeyClientSecret(options?: StorageOptions): Promise<string> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    return (await this.getAccount(options))?.keys?.apiKeyClientSecret;\n  }\n\n  async setApiKeyClientSecret(value: string, options?: StorageOptions): Promise<void> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    const account = await this.getAccount(options);\n    account.keys.apiKeyClientSecret = value;\n    await this.saveAccount(account, options);\n  }\n\n  async getAutoConfirmFingerPrints(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.autoConfirmFingerPrints ?? false\n    );\n  }\n\n  async setAutoConfirmFingerprints(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.autoConfirmFingerPrints = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getAutoFillOnPageLoadDefault(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.autoFillOnPageLoadDefault ?? true\n    );\n  }\n\n  async setAutoFillOnPageLoadDefault(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.autoFillOnPageLoadDefault = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getBiometricAwaitingAcceptance(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.biometricAwaitingAcceptance ?? false\n    );\n  }\n\n  async setBiometricAwaitingAcceptance(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.biometricAwaitingAcceptance = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getBiometricFingerprintValidated(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.biometricFingerprintValidated ?? false\n    );\n  }\n\n  async setBiometricFingerprintValidated(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.biometricFingerprintValidated = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getBiometricText(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.biometricText;\n  }\n\n  async setBiometricText(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.biometricText = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getBiometricUnlock(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.biometricUnlock ?? false\n    );\n  }\n\n  async setBiometricUnlock(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.biometricUnlock = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getCanAccessPremium(options?: StorageOptions): Promise<boolean> {\n    if (!(await this.getIsAuthenticated(options))) {\n      return false;\n    }\n\n    return (\n      (await this.getHasPremiumPersonally(options)) ||\n      (await this.getHasPremiumFromOrganization(options))\n    );\n  }\n\n  async getHasPremiumPersonally(options?: StorageOptions): Promise<boolean> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    return account?.profile?.hasPremiumPersonally;\n  }\n\n  async setHasPremiumPersonally(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.hasPremiumPersonally = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getHasPremiumFromOrganization(options?: StorageOptions): Promise<boolean> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n\n    if (account.profile?.hasPremiumFromOrganization) {\n      return true;\n    }\n\n    // TODO: older server versions won't send the hasPremiumFromOrganization flag, so we're keeping the old logic\n    // for backwards compatibility. It can be removed after everyone has upgraded.\n    const organizations = await this.getOrganizations(options);\n    if (organizations == null) {\n      return false;\n    }\n\n    for (const id of Object.keys(organizations)) {\n      const o = organizations[id];\n      if (o.enabled && o.usersGetPremium && !o.isProviderUser) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  async setHasPremiumFromOrganization(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.hasPremiumFromOrganization = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getClearClipboard(options?: StorageOptions): Promise<number> {\n    return (\n      (\n        await this.getAccount(\n          this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n        )\n      )?.settings?.clearClipboard ?? null\n    );\n  }\n\n  async setClearClipboard(value: number, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.clearClipboard = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getCollapsedGroupings(options?: StorageOptions): Promise<string[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.collapsedGroupings;\n  }\n\n  async setCollapsedGroupings(value: string[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.collapsedGroupings = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getConvertAccountToKeyConnector(options?: StorageOptions): Promise<boolean> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.convertAccountToKeyConnector;\n  }\n\n  async setConvertAccountToKeyConnector(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.convertAccountToKeyConnector = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  /**\n   * @deprecated Do not save the Master Key. Use the User Symmetric Key instead\n   */\n  async getCryptoMasterKey(options?: StorageOptions): Promise<SymmetricCryptoKey> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return account?.keys?.cryptoMasterKey;\n  }\n\n  /**\n   * @deprecated Do not save the Master Key. Use the User Symmetric Key instead\n   */\n  async setCryptoMasterKey(value: SymmetricCryptoKey, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.cryptoMasterKey = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n\n    if (options.userId == this.activeAccountSubject.getValue()) {\n      const nextValue = value != null;\n\n      // Avoid emitting if we are already unlocked\n      if (this.activeAccountUnlockedSubject.getValue() != nextValue) {\n        this.activeAccountUnlockedSubject.next(nextValue);\n      }\n    }\n  }\n\n  /**\n   * user key used to encrypt/decrypt data\n   */\n  async getUserKey(options?: StorageOptions): Promise<UserKey> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return account?.keys?.userKey as UserKey;\n  }\n\n  /**\n   * user key used to encrypt/decrypt data\n   */\n  async setUserKey(value: UserKey, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.userKey = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n\n    if (options?.userId == this.activeAccountSubject.getValue()) {\n      const nextValue = value != null;\n\n      // Avoid emitting if we are already unlocked\n      if (this.activeAccountUnlockedSubject.getValue() != nextValue) {\n        this.activeAccountUnlockedSubject.next(nextValue);\n      }\n    }\n  }\n\n  /**\n   * User's master key derived from MP, saved only if we decrypted with MP\n   */\n  async getMasterKey(options?: StorageOptions): Promise<MasterKey> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return account?.keys?.masterKey;\n  }\n\n  /**\n   * User's master key derived from MP, saved only if we decrypted with MP\n   */\n  async setMasterKey(value: MasterKey, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.masterKey = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  /**\n   * The master key encrypted User symmetric key, saved on every auth\n   * so we can unlock with MP offline\n   */\n  async getMasterKeyEncryptedUserKey(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.keys.masterKeyEncryptedUserKey;\n  }\n\n  /**\n   * The master key encrypted User symmetric key, saved on every auth\n   * so we can unlock with MP offline\n   */\n  async setMasterKeyEncryptedUserKey(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.masterKeyEncryptedUserKey = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  /**\n   * user key when using the \"never\" option of vault timeout\n   */\n  async getUserKeyAutoUnlock(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"auto\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(\n      `${options.userId}${partialKeys.userAutoKey}`,\n      options\n    );\n  }\n\n  /**\n   * user key when using the \"never\" option of vault timeout\n   */\n  async setUserKeyAutoUnlock(value: string, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"auto\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return;\n    }\n    await this.saveSecureStorageKey(partialKeys.userAutoKey, value, options);\n  }\n\n  /**\n   * User's encrypted symmetric key when using biometrics\n   */\n  async getUserKeyBiometric(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(\n      `${options.userId}${partialKeys.userBiometricKey}`,\n      options\n    );\n  }\n\n  async hasUserKeyBiometric(options?: StorageOptions): Promise<boolean> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return false;\n    }\n    return await this.secureStorageService.has(\n      `${options.userId}${partialKeys.userBiometricKey}`,\n      options\n    );\n  }\n\n  async setUserKeyBiometric(value: BiometricKey, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return;\n    }\n    await this.saveSecureStorageKey(partialKeys.userBiometricKey, value, options);\n  }\n\n  async getPinKeyEncryptedUserKey(options?: StorageOptions): Promise<EncString> {\n    return EncString.fromJSON(\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.pinKeyEncryptedUserKey\n    );\n  }\n\n  async setPinKeyEncryptedUserKey(value: EncString, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.pinKeyEncryptedUserKey = value?.encryptedString;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getPinKeyEncryptedUserKeyEphemeral(options?: StorageOptions): Promise<EncString> {\n    return EncString.fromJSON(\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions())))\n        ?.settings?.pinKeyEncryptedUserKeyEphemeral\n    );\n  }\n\n  async setPinKeyEncryptedUserKeyEphemeral(\n    value: EncString,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.settings.pinKeyEncryptedUserKeyEphemeral = value?.encryptedString;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  /**\n   * @deprecated Use UserKeyAuto instead\n   */\n  async getCryptoMasterKeyAuto(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"auto\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(\n      `${options.userId}${partialKeys.autoKey}`,\n      options\n    );\n  }\n\n  /**\n   * @deprecated Use UserKeyAuto instead\n   */\n  async setCryptoMasterKeyAuto(value: string, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"auto\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return;\n    }\n    await this.saveSecureStorageKey(partialKeys.autoKey, value, options);\n  }\n\n  /**\n   * @deprecated I don't see where this is even used\n   */\n  async getCryptoMasterKeyB64(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(\n      `${options?.userId}${partialKeys.masterKey}`,\n      options\n    );\n  }\n\n  /**\n   * @deprecated I don't see where this is even used\n   */\n  async setCryptoMasterKeyB64(value: string, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());\n    if (options?.userId == null) {\n      return;\n    }\n    await this.saveSecureStorageKey(partialKeys.masterKey, value, options);\n  }\n\n  /**\n   * @deprecated Use UserKeyBiometric instead\n   */\n  async getCryptoMasterKeyBiometric(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(\n      `${options.userId}${partialKeys.biometricKey}`,\n      options\n    );\n  }\n\n  /**\n   * @deprecated Use UserKeyBiometric instead\n   */\n  async hasCryptoMasterKeyBiometric(options?: StorageOptions): Promise<boolean> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return false;\n    }\n    return await this.secureStorageService.has(\n      `${options.userId}${partialKeys.biometricKey}`,\n      options\n    );\n  }\n\n  /**\n   * @deprecated Use UserKeyBiometric instead\n   */\n  async setCryptoMasterKeyBiometric(value: BiometricKey, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return;\n    }\n    await this.saveSecureStorageKey(partialKeys.biometricKey, value, options);\n  }\n\n  @withPrototypeForArrayMembers(CipherView, CipherView.fromJSON)\n  async getDecryptedCiphers(options?: StorageOptions): Promise<CipherView[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.ciphers?.decrypted;\n  }\n\n  async setDecryptedCiphers(value: CipherView[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.ciphers.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(CollectionView)\n  async getDecryptedCollections(options?: StorageOptions): Promise<CollectionView[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.collections?.decrypted;\n  }\n\n  async setDecryptedCollections(value: CollectionView[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.collections.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  /**\n   * @deprecated Use UserKey instead\n   */\n  async getDecryptedCryptoSymmetricKey(options?: StorageOptions): Promise<SymmetricCryptoKey> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return account?.keys?.cryptoSymmetricKey?.decrypted;\n  }\n\n  /**\n   * @deprecated Use UserKey instead\n   */\n  async setDecryptedCryptoSymmetricKey(\n    value: SymmetricCryptoKey,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.cryptoSymmetricKey.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDecryptedOrganizationKeys(\n    options?: StorageOptions\n  ): Promise<Map<string, SymmetricCryptoKey>> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return Utils.recordToMap(account?.keys?.organizationKeys?.decrypted);\n  }\n\n  async setDecryptedOrganizationKeys(\n    value: Map<string, SymmetricCryptoKey>,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.organizationKeys.decrypted = Utils.mapToRecord(value);\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(GeneratedPasswordHistory)\n  async getDecryptedPasswordGenerationHistory(\n    options?: StorageOptions\n  ): Promise<GeneratedPasswordHistory[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.passwordGenerationHistory?.decrypted;\n  }\n\n  async setDecryptedPasswordGenerationHistory(\n    value: GeneratedPasswordHistory[],\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.passwordGenerationHistory.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  /**\n   * @deprecated Use getPinKeyEncryptedUserKeyEphemeral instead\n   */\n  async getDecryptedPinProtected(options?: StorageOptions): Promise<EncString> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.settings?.pinProtected?.decrypted;\n  }\n\n  /**\n   * @deprecated Use setPinKeyEncryptedUserKeyEphemeral instead\n   */\n  async setDecryptedPinProtected(value: EncString, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.settings.pinProtected.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(Policy)\n  async getDecryptedPolicies(options?: StorageOptions): Promise<Policy[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.policies?.decrypted;\n  }\n\n  async setDecryptedPolicies(value: Policy[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.policies.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDecryptedPrivateKey(options?: StorageOptions): Promise<Uint8Array> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.keys?.privateKey.decrypted;\n  }\n\n  async setDecryptedPrivateKey(value: Uint8Array, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.privateKey.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDecryptedProviderKeys(\n    options?: StorageOptions\n  ): Promise<Map<string, SymmetricCryptoKey>> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return Utils.recordToMap(account?.keys?.providerKeys?.decrypted);\n  }\n\n  async setDecryptedProviderKeys(\n    value: Map<string, SymmetricCryptoKey>,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.providerKeys.decrypted = Utils.mapToRecord(value);\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(SendView)\n  async getDecryptedSends(options?: StorageOptions): Promise<SendView[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.sends?.decrypted;\n  }\n\n  async setDecryptedSends(value: SendView[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.sends.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDefaultUriMatch(options?: StorageOptions): Promise<UriMatchType> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.defaultUriMatch;\n  }\n\n  async setDefaultUriMatch(value: UriMatchType, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.defaultUriMatch = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableAddLoginNotification(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableAddLoginNotification ?? false\n    );\n  }\n\n  async setDisableAddLoginNotification(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableAddLoginNotification = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableAutoBiometricsPrompt(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableAutoBiometricsPrompt ?? false\n    );\n  }\n\n  async setDisableAutoBiometricsPrompt(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableAutoBiometricsPrompt = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableAutoTotpCopy(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableAutoTotpCopy ?? false\n    );\n  }\n\n  async setDisableAutoTotpCopy(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableAutoTotpCopy = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableBadgeCounter(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableBadgeCounter ?? false\n    );\n  }\n\n  async setDisableBadgeCounter(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableBadgeCounter = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableChangedPasswordNotification(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableChangedPasswordNotification ?? false\n    );\n  }\n\n  async setDisableChangedPasswordNotification(\n    value: boolean,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableChangedPasswordNotification = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableContextMenuItem(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableContextMenuItem ?? false\n    );\n  }\n\n  async setDisableContextMenuItem(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableContextMenuItem = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableFavicon(options?: StorageOptions): Promise<boolean> {\n    return (\n      (\n        await this.getGlobals(\n          this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n        )\n      )?.disableFavicon ?? false\n    );\n  }\n\n  async setDisableFavicon(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.disableFavicon = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getDisableGa(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableGa ?? false\n    );\n  }\n\n  async setDisableGa(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableGa = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDismissedAutofillCallout(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.dismissedAutoFillOnPageLoadCallout ?? false\n    );\n  }\n\n  async setDismissedAutofillCallout(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.dismissedAutoFillOnPageLoadCallout = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDontShowCardsCurrentTab(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.dontShowCardsCurrentTab ?? false\n    );\n  }\n\n  async setDontShowCardsCurrentTab(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.dontShowCardsCurrentTab = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDontShowIdentitiesCurrentTab(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.dontShowIdentitiesCurrentTab ?? false\n    );\n  }\n\n  async setDontShowIdentitiesCurrentTab(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.dontShowIdentitiesCurrentTab = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDuckDuckGoSharedKey(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(DDG_SHARED_KEY, options);\n  }\n\n  async setDuckDuckGoSharedKey(value: string, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());\n    if (options?.userId == null) {\n      return;\n    }\n    value == null\n      ? await this.secureStorageService.remove(DDG_SHARED_KEY, options)\n      : await this.secureStorageService.save(DDG_SHARED_KEY, value, options);\n  }\n\n  async getDeviceKey(options?: StorageOptions): Promise<DeviceKey | null> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskLocalOptions());\n\n    if (options?.userId == null) {\n      return null;\n    }\n\n    const account = await this.getAccount(options);\n\n    const existingDeviceKey = account?.keys?.deviceKey;\n\n    // Must manually instantiate the SymmetricCryptoKey class from the JSON object\n    if (existingDeviceKey != null) {\n      return SymmetricCryptoKey.fromJSON(existingDeviceKey) as DeviceKey;\n    } else {\n      return null;\n    }\n  }\n\n  async setDeviceKey(value: DeviceKey | null, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskLocalOptions());\n\n    if (options?.userId == null) {\n      return;\n    }\n\n    const account = await this.getAccount(options);\n\n    account.keys.deviceKey = value?.toJSON() ?? null;\n\n    await this.saveAccount(account, options);\n  }\n\n  async getAdminAuthRequest(options?: StorageOptions): Promise<AdminAuthRequestStorable | null> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskLocalOptions());\n\n    if (options?.userId == null) {\n      return null;\n    }\n\n    const account = await this.getAccount(options);\n\n    return account?.adminAuthRequest\n      ? AdminAuthRequestStorable.fromJSON(account.adminAuthRequest)\n      : null;\n  }\n\n  async setAdminAuthRequest(\n    adminAuthRequest: AdminAuthRequestStorable,\n    options?: StorageOptions\n  ): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskLocalOptions());\n\n    if (options?.userId == null) {\n      return;\n    }\n\n    const account = await this.getAccount(options);\n\n    account.adminAuthRequest = adminAuthRequest?.toJSON();\n\n    await this.saveAccount(account, options);\n  }\n\n  async getShouldTrustDevice(options?: StorageOptions): Promise<boolean | null> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskLocalOptions());\n\n    if (options?.userId == null) {\n      return null;\n    }\n\n    const account = await this.getAccount(options);\n\n    return account?.settings?.trustDeviceChoiceForDecryption ?? null;\n  }\n\n  async setShouldTrustDevice(value: boolean, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskLocalOptions());\n    if (options?.userId == null) {\n      return;\n    }\n\n    const account = await this.getAccount(options);\n\n    account.settings.trustDeviceChoiceForDecryption = value;\n\n    await this.saveAccount(account, options);\n  }\n\n  async getAccountDecryptionOptions(\n    options?: StorageOptions\n  ): Promise<AccountDecryptionOptions | null> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskLocalOptions());\n\n    if (options?.userId == null) {\n      return null;\n    }\n\n    const account = await this.getAccount(options);\n\n    return account?.decryptionOptions as AccountDecryptionOptions;\n  }\n\n  async setAccountDecryptionOptions(\n    value: AccountDecryptionOptions,\n    options?: StorageOptions\n  ): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskLocalOptions());\n\n    if (options?.userId == null) {\n      return;\n    }\n\n    const account = await this.getAccount(options);\n\n    account.decryptionOptions = value;\n\n    await this.saveAccount(account, options);\n  }\n\n  async getEmail(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.profile?.email;\n  }\n\n  async setEmail(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.profile.email = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getEmailVerified(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.profile.emailVerified ?? false\n    );\n  }\n\n  async setEmailVerified(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.emailVerified = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableAlwaysOnTop(options?: StorageOptions): Promise<boolean> {\n    const accountPreference = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.enableAlwaysOnTop;\n    const globalPreference = (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.enableAlwaysOnTop;\n    return accountPreference ?? globalPreference ?? false;\n  }\n\n  async setEnableAlwaysOnTop(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.enableAlwaysOnTop = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableAlwaysOnTop = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableAutoFillOnPageLoad(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.enableAutoFillOnPageLoad ?? false\n    );\n  }\n\n  async setEnableAutoFillOnPageLoad(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.enableAutoFillOnPageLoad = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableBrowserIntegration(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableBrowserIntegration ?? false\n    );\n  }\n\n  async setEnableBrowserIntegration(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableBrowserIntegration = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableBrowserIntegrationFingerprint(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableBrowserIntegrationFingerprint ?? false\n    );\n  }\n\n  async setEnableBrowserIntegrationFingerprint(\n    value: boolean,\n    options?: StorageOptions\n  ): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableBrowserIntegrationFingerprint = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableCloseToTray(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableCloseToTray ?? false\n    );\n  }\n\n  async setEnableCloseToTray(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableCloseToTray = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableDuckDuckGoBrowserIntegration(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableDuckDuckGoBrowserIntegration ?? false\n    );\n  }\n\n  async setEnableDuckDuckGoBrowserIntegration(\n    value: boolean,\n    options?: StorageOptions\n  ): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableDuckDuckGoBrowserIntegration = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableFullWidth(options?: StorageOptions): Promise<boolean> {\n    return (\n      (\n        await this.getAccount(\n          this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n        )\n      )?.settings?.enableFullWidth ?? false\n    );\n  }\n\n  async setEnableFullWidth(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.enableFullWidth = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getEnableMinimizeToTray(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableMinimizeToTray ?? false\n    );\n  }\n\n  async setEnableMinimizeToTray(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableMinimizeToTray = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableStartToTray(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableStartToTray ?? false\n    );\n  }\n\n  async setEnableStartToTray(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableStartToTray = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableTray(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableTray ?? false\n    );\n  }\n\n  async setEnableTray(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableTray = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(CipherData)\n  async getEncryptedCiphers(options?: StorageOptions): Promise<{ [id: string]: CipherData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.data?.ciphers?.encrypted;\n  }\n\n  async setEncryptedCiphers(\n    value: { [id: string]: CipherData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.data.ciphers.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(CollectionData)\n  async getEncryptedCollections(\n    options?: StorageOptions\n  ): Promise<{ [id: string]: CollectionData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.data?.collections?.encrypted;\n  }\n\n  async setEncryptedCollections(\n    value: { [id: string]: CollectionData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.data.collections.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  /**\n   * @deprecated Use UserKey instead\n   */\n  async getEncryptedCryptoSymmetricKey(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.keys.cryptoSymmetricKey.encrypted;\n  }\n\n  /**\n   * @deprecated Use UserKey instead\n   */\n  async setEncryptedCryptoSymmetricKey(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.cryptoSymmetricKey.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(FolderData)\n  async getEncryptedFolders(options?: StorageOptions): Promise<{ [id: string]: FolderData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.data?.folders?.encrypted;\n  }\n\n  async setEncryptedFolders(\n    value: { [id: string]: FolderData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.data.folders.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getEncryptedOrganizationKeys(\n    options?: StorageOptions\n  ): Promise<{ [orgId: string]: EncryptedOrganizationKeyData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.keys?.organizationKeys.encrypted;\n  }\n\n  async setEncryptedOrganizationKeys(\n    value: { [orgId: string]: EncryptedOrganizationKeyData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.organizationKeys.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(GeneratedPasswordHistory)\n  async getEncryptedPasswordGenerationHistory(\n    options?: StorageOptions\n  ): Promise<GeneratedPasswordHistory[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.passwordGenerationHistory?.encrypted;\n  }\n\n  async setEncryptedPasswordGenerationHistory(\n    value: GeneratedPasswordHistory[],\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.passwordGenerationHistory.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEncryptedPinProtected(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.pinProtected?.encrypted;\n  }\n\n  async setEncryptedPinProtected(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.pinProtected.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(PolicyData)\n  async getEncryptedPolicies(options?: StorageOptions): Promise<{ [id: string]: PolicyData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.policies?.encrypted;\n  }\n\n  async setEncryptedPolicies(\n    value: { [id: string]: PolicyData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.policies.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEncryptedPrivateKey(options?: StorageOptions): Promise<string> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    return account?.keys?.privateKey?.encrypted;\n  }\n\n  async setEncryptedPrivateKey(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.privateKey.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEncryptedProviderKeys(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.keys?.providerKeys?.encrypted;\n  }\n\n  async setEncryptedProviderKeys(value: any, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.providerKeys.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(SendData)\n  async getEncryptedSends(options?: StorageOptions): Promise<{ [id: string]: SendData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.data?.sends.encrypted;\n  }\n\n  async setEncryptedSends(\n    value: { [id: string]: SendData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.data.sends.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getEntityId(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.profile?.entityId;\n  }\n\n  async setEntityId(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.profile.entityId = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getEntityType(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.profile?.entityType;\n  }\n\n  async setEntityType(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.profile.entityType = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getEnvironmentUrls(options?: StorageOptions): Promise<EnvironmentUrls> {\n    if ((await this.state())?.activeUserId == null) {\n      return await this.getGlobalEnvironmentUrls(options);\n    }\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n    return (await this.getAccount(options))?.settings?.environmentUrls ?? new EnvironmentUrls();\n  }\n\n  async setEnvironmentUrls(value: EnvironmentUrls, options?: StorageOptions): Promise<void> {\n    // Global values are set on each change and the current global settings are passed to any newly authed accounts.\n    // This is to allow setting environment values before an account is active, while still allowing individual accounts to have their own environments.\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.environmentUrls = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getRegion(options?: StorageOptions): Promise<string> {\n    if ((await this.state())?.activeUserId == null) {\n      options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n      return (await this.getGlobals(options)).region ?? null;\n    }\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n    return (await this.getAccount(options))?.settings?.region ?? null;\n  }\n\n  async setRegion(value: string, options?: StorageOptions): Promise<void> {\n    // Global values are set on each change and the current global settings are passed to any newly authed accounts.\n    // This is to allow setting region values before an account is active, while still allowing individual accounts to have their own region.\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.region = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEquivalentDomains(options?: StorageOptions): Promise<string[][]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.equivalentDomains;\n  }\n\n  async setEquivalentDomains(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.equivalentDomains = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(EventData)\n  async getEventCollection(options?: StorageOptions): Promise<EventData[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.eventCollection;\n  }\n\n  async setEventCollection(value: EventData[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.eventCollection = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEverHadUserKey(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.profile?.everHadUserKey ?? false\n    );\n  }\n\n  async setEverHadUserKey(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.everHadUserKey = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEverBeenUnlocked(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions())))\n        ?.profile?.everBeenUnlocked ?? false\n    );\n  }\n\n  async setEverBeenUnlocked(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.profile.everBeenUnlocked = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getForcePasswordResetReason(options?: StorageOptions): Promise<ForceResetPasswordReason> {\n    return (\n      (\n        await this.getAccount(\n          this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n        )\n      )?.profile?.forcePasswordResetReason ?? ForceResetPasswordReason.None\n    );\n  }\n\n  async setForcePasswordResetReason(\n    value: ForceResetPasswordReason,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.profile.forcePasswordResetReason = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getInstalledVersion(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.installedVersion;\n  }\n\n  async setInstalledVersion(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.installedVersion = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getIsAuthenticated(options?: StorageOptions): Promise<boolean> {\n    return (await this.getAccessToken(options)) != null && (await this.getUserId(options)) != null;\n  }\n\n  async getKdfConfig(options?: StorageOptions): Promise<KdfConfig> {\n    const iterations = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.kdfIterations;\n    const memory = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.kdfMemory;\n    const parallelism = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.kdfParallelism;\n    return new KdfConfig(iterations, memory, parallelism);\n  }\n\n  async setKdfConfig(config: KdfConfig, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.kdfIterations = config.iterations;\n    account.profile.kdfMemory = config.memory;\n    account.profile.kdfParallelism = config.parallelism;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getKdfType(options?: StorageOptions): Promise<KdfType> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.kdfType;\n  }\n\n  async setKdfType(value: KdfType, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.kdfType = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getKeyHash(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.keyHash;\n  }\n\n  async setKeyHash(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.keyHash = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getLastActive(options?: StorageOptions): Promise<number> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n\n    const accountActivity = await this.storageService.get<{ [userId: string]: number }>(\n      keys.accountActivity,\n      options\n    );\n\n    if (accountActivity == null || Object.keys(accountActivity).length < 1) {\n      return null;\n    }\n\n    return accountActivity[options.userId];\n  }\n\n  async setLastActive(value: number, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n    if (options.userId == null) {\n      return;\n    }\n    const accountActivity =\n      (await this.storageService.get<{ [userId: string]: number }>(\n        keys.accountActivity,\n        options\n      )) ?? {};\n    accountActivity[options.userId] = value;\n    await this.storageService.save(keys.accountActivity, accountActivity, options);\n  }\n\n  async getLastSync(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.profile?.lastSync;\n  }\n\n  async setLastSync(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.profile.lastSync = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getLocalData(options?: StorageOptions): Promise<{ [cipherId: string]: LocalData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.data?.localData;\n  }\n\n  async setLocalData(\n    value: { [cipherId: string]: LocalData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.data.localData = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getLocale(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.locale;\n  }\n\n  async setLocale(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.locale = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getMainWindowSize(options?: StorageOptions): Promise<number> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.mainWindowSize;\n  }\n\n  async setMainWindowSize(value: number, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    globals.mainWindowSize = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getMinimizeOnCopyToClipboard(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.minimizeOnCopyToClipboard ?? false\n    );\n  }\n\n  async setMinimizeOnCopyToClipboard(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.minimizeOnCopyToClipboard = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getNeverDomains(options?: StorageOptions): Promise<{ [id: string]: any }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.neverDomains;\n  }\n\n  async setNeverDomains(value: { [id: string]: any }, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.neverDomains = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getNoAutoPromptBiometricsText(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.noAutoPromptBiometricsText;\n  }\n\n  async setNoAutoPromptBiometricsText(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.noAutoPromptBiometricsText = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getOpenAtLogin(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.openAtLogin ?? false\n    );\n  }\n\n  async setOpenAtLogin(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.openAtLogin = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getOrganizationInvitation(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.organizationInvitation;\n  }\n\n  async setOrganizationInvitation(value: any, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    globals.organizationInvitation = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getEmergencyAccessInvitation(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.emergencyAccessInvitation;\n  }\n\n  async setEmergencyAccessInvitation(value: any, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.emergencyAccessInvitation = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  /**\n   * @deprecated Do not call this directly, use OrganizationService\n   */\n  async getOrganizations(options?: StorageOptions): Promise<{ [id: string]: OrganizationData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.organizations;\n  }\n\n  /**\n   * @deprecated Do not call this directly, use OrganizationService\n   */\n  async setOrganizations(\n    value: { [id: string]: OrganizationData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.organizations = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getPasswordGenerationOptions(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.passwordGenerationOptions;\n  }\n\n  async setPasswordGenerationOptions(value: any, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.passwordGenerationOptions = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getUsernameGenerationOptions(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.usernameGenerationOptions;\n  }\n\n  async setUsernameGenerationOptions(value: any, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.usernameGenerationOptions = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getGeneratorOptions(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.generatorOptions;\n  }\n\n  async setGeneratorOptions(value: any, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.generatorOptions = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getProtectedPin(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.protectedPin;\n  }\n\n  async setProtectedPin(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.protectedPin = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(ProviderData)\n  async getProviders(options?: StorageOptions): Promise<{ [id: string]: ProviderData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.providers;\n  }\n\n  async setProviders(\n    value: { [id: string]: ProviderData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.providers = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getPublicKey(options?: StorageOptions): Promise<Uint8Array> {\n    const keys = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.keys;\n    return keys?.publicKey;\n  }\n\n  async setPublicKey(value: Uint8Array, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.publicKey = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getRefreshToken(options?: StorageOptions): Promise<string> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    return (await this.getAccount(options))?.tokens?.refreshToken;\n  }\n\n  async setRefreshToken(value: string, options?: StorageOptions): Promise<void> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    const account = await this.getAccount(options);\n    account.tokens.refreshToken = value;\n    await this.saveAccount(account, options);\n  }\n\n  async getRememberedEmail(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.rememberedEmail;\n  }\n\n  async setRememberedEmail(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.rememberedEmail = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getSecurityStamp(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.tokens?.securityStamp;\n  }\n\n  async setSecurityStamp(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.tokens.securityStamp = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getSettings(options?: StorageOptions): Promise<AccountSettingsSettings> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.settings?.settings;\n  }\n\n  async setSettings(value: AccountSettingsSettings, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.settings.settings = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getSsoCodeVerifier(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.ssoCodeVerifier;\n  }\n\n  async setSsoCodeVerifier(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.ssoCodeVerifier = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getSsoOrgIdentifier(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.ssoOrganizationIdentifier;\n  }\n\n  async setSsoOrganizationIdentifier(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.ssoOrganizationIdentifier = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getSsoState(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.ssoState;\n  }\n\n  async setSsoState(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.ssoState = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getUserSsoOrganizationIdentifier(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.loginState?.ssoOrganizationIdentifier;\n  }\n\n  async setUserSsoOrganizationIdentifier(\n    value: string | null,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.loginState.ssoOrganizationIdentifier = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getTheme(options?: StorageOptions): Promise<ThemeType> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.theme;\n  }\n\n  async setTheme(value: ThemeType, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.theme = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getTwoFactorToken(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.twoFactorToken;\n  }\n\n  async setTwoFactorToken(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.twoFactorToken = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getUserId(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.userId;\n  }\n\n  async getUsesKeyConnector(options?: StorageOptions): Promise<boolean> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.usesKeyConnector;\n  }\n\n  async setUsesKeyConnector(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.usesKeyConnector = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getVaultTimeout(options?: StorageOptions): Promise<number> {\n    const accountVaultTimeout = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.vaultTimeout;\n    return accountVaultTimeout;\n  }\n\n  async setVaultTimeout(value: number, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.vaultTimeout = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getVaultTimeoutAction(options?: StorageOptions): Promise<string> {\n    const accountVaultTimeoutAction = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.vaultTimeoutAction;\n    const globalVaultTimeoutAction = (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.vaultTimeoutAction;\n    return accountVaultTimeoutAction ?? globalVaultTimeoutAction;\n  }\n\n  async setVaultTimeoutAction(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.vaultTimeoutAction = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getApproveLoginRequests(options?: StorageOptions): Promise<boolean> {\n    const approveLoginRequests = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.approveLoginRequests;\n    return approveLoginRequests;\n  }\n\n  async setApproveLoginRequests(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.approveLoginRequests = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getStateVersion(): Promise<number> {\n    return (await this.getGlobals(await this.defaultOnDiskLocalOptions())).stateVersion ?? 1;\n  }\n\n  async setStateVersion(value: number): Promise<void> {\n    const globals = await this.getGlobals(await this.defaultOnDiskOptions());\n    globals.stateVersion = value;\n    await this.saveGlobals(globals, await this.defaultOnDiskOptions());\n  }\n\n  async getWindow(): Promise<WindowState> {\n    const globals = await this.getGlobals(await this.defaultOnDiskOptions());\n    return globals?.window != null && Object.keys(globals.window).length > 0\n      ? globals.window\n      : new WindowState();\n  }\n\n  async setWindow(value: WindowState, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.window = value;\n    return await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async setServerConfig(value: ServerConfigData, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.serverConfig = value;\n    return await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getServerConfig(options: StorageOptions): Promise<ServerConfigData> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.serverConfig;\n  }\n\n  async getAvatarColor(options?: StorageOptions): Promise<string | null | undefined> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.avatarColor;\n  }\n\n  async setAvatarColor(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.avatarColor = value;\n    return await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getActivateAutoFillOnPageLoadFromPolicy(options?: StorageOptions): Promise<boolean> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.activateAutoFillOnPageLoadFromPolicy;\n  }\n\n  async setActivateAutoFillOnPageLoadFromPolicy(\n    value: boolean,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.activateAutoFillOnPageLoadFromPolicy = value;\n    return await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getSMOnboardingTasks(\n    options?: StorageOptions\n  ): Promise<Record<string, Record<string, boolean>>> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.smOnboardingTasks;\n  }\n\n  async setSMOnboardingTasks(\n    value: Record<string, Record<string, boolean>>,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.smOnboardingTasks = value;\n    return await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  protected async getGlobals(options: StorageOptions): Promise<TGlobalState> {\n    let globals: TGlobalState;\n    if (this.useMemory(options.storageLocation)) {\n      globals = await this.getGlobalsFromMemory();\n    }\n\n    if (this.useDisk && globals == null) {\n      globals = await this.getGlobalsFromDisk(options);\n    }\n\n    return globals ?? this.createGlobals();\n  }\n\n  protected async saveGlobals(globals: TGlobalState, options: StorageOptions) {\n    return this.useMemory(options.storageLocation)\n      ? this.saveGlobalsToMemory(globals)\n      : await this.saveGlobalsToDisk(globals, options);\n  }\n\n  protected async getGlobalsFromMemory(): Promise<TGlobalState> {\n    return (await this.state()).globals;\n  }\n\n  protected async getGlobalsFromDisk(options: StorageOptions): Promise<TGlobalState> {\n    return await this.storageService.get<TGlobalState>(keys.global, options);\n  }\n\n  protected async saveGlobalsToMemory(globals: TGlobalState): Promise<void> {\n    await this.updateState(async (state) => {\n      state.globals = globals;\n      return state;\n    });\n  }\n\n  protected async saveGlobalsToDisk(globals: TGlobalState, options: StorageOptions): Promise<void> {\n    if (options.useSecureStorage) {\n      await this.secureStorageService.save(keys.global, globals, options);\n    } else {\n      await this.storageService.save(keys.global, globals, options);\n    }\n  }\n\n  protected async getAccount(options: StorageOptions): Promise<TAccount> {\n    try {\n      let account: TAccount;\n      if (this.useMemory(options.storageLocation)) {\n        account = await this.getAccountFromMemory(options);\n      }\n\n      if (this.useDisk(options.storageLocation) && account == null) {\n        account = await this.getAccountFromDisk(options);\n      }\n\n      return account;\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  protected async getAccountFromMemory(options: StorageOptions): Promise<TAccount> {\n    return await this.state().then(async (state) => {\n      if (state.accounts == null) {\n        return null;\n      }\n      return state.accounts[await this.getUserIdFromMemory(options)];\n    });\n  }\n\n  protected async getUserIdFromMemory(options: StorageOptions): Promise<string> {\n    return await this.state().then((state) => {\n      return options?.userId != null\n        ? state.accounts[options.userId]?.profile?.userId\n        : state.activeUserId;\n    });\n  }\n\n  protected async getAccountFromDisk(options: StorageOptions): Promise<TAccount> {\n    if (options?.userId == null && (await this.state())?.activeUserId == null) {\n      return null;\n    }\n\n    if (this.useAccountCache) {\n      const cachedAccount = this.accountDiskCache.value[options.userId];\n      if (cachedAccount != null) {\n        return cachedAccount;\n      }\n    }\n\n    const account = options?.useSecureStorage\n      ? (await this.secureStorageService.get<TAccount>(options.userId, options)) ??\n        (await this.storageService.get<TAccount>(\n          options.userId,\n          this.reconcileOptions(options, { htmlStorageLocation: HtmlStorageLocation.Local })\n        ))\n      : await this.storageService.get<TAccount>(options.userId, options);\n\n    this.setDiskCache(options.userId, account);\n    return account;\n  }\n\n  protected useMemory(storageLocation: StorageLocation) {\n    return storageLocation === StorageLocation.Memory || storageLocation === StorageLocation.Both;\n  }\n\n  protected useDisk(storageLocation: StorageLocation) {\n    return storageLocation === StorageLocation.Disk || storageLocation === StorageLocation.Both;\n  }\n\n  protected async saveAccount(\n    account: TAccount,\n    options: StorageOptions = {\n      storageLocation: StorageLocation.Both,\n      useSecureStorage: false,\n    }\n  ) {\n    return this.useMemory(options.storageLocation)\n      ? await this.saveAccountToMemory(account)\n      : await this.saveAccountToDisk(account, options);\n  }\n\n  protected async saveAccountToDisk(account: TAccount, options: StorageOptions): Promise<void> {\n    const storageLocation = options.useSecureStorage\n      ? this.secureStorageService\n      : this.storageService;\n\n    await storageLocation.save(`${options.userId}`, account, options);\n\n    this.deleteDiskCache(options.userId);\n  }\n\n  protected async saveAccountToMemory(account: TAccount): Promise<void> {\n    if (this.getAccountFromMemory({ userId: account.profile.userId }) !== null) {\n      await this.updateState((state) => {\n        return new Promise((resolve) => {\n          state.accounts[account.profile.userId] = account;\n          resolve(state);\n        });\n      });\n    }\n    await this.pushAccounts();\n  }\n\n  protected async scaffoldNewAccountStorage(account: TAccount): Promise<void> {\n    // We don't want to manipulate the referenced in memory account\n    const deepClone = JSON.parse(JSON.stringify(account));\n    await this.scaffoldNewAccountLocalStorage(deepClone);\n    await this.scaffoldNewAccountSessionStorage(deepClone);\n    await this.scaffoldNewAccountMemoryStorage(deepClone);\n  }\n\n  // TODO: There is a tech debt item for splitting up these methods - only Web uses multiple storage locations in its storageService.\n  // For now these methods exist with some redundancy to facilitate this special web requirement.\n  protected async scaffoldNewAccountLocalStorage(account: TAccount): Promise<void> {\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions(\n        { userId: account.profile.userId },\n        await this.defaultOnDiskLocalOptions()\n      )\n    );\n    // EnvironmentUrls and region are set before authenticating and should override whatever is stored from any previous session\n    const environmentUrls = account.settings.environmentUrls;\n    const region = account.settings.region;\n    if (storedAccount?.settings != null) {\n      account.settings = storedAccount.settings;\n    } else if (await this.storageService.has(keys.tempAccountSettings)) {\n      account.settings = await this.storageService.get<AccountSettings>(keys.tempAccountSettings);\n      await this.storageService.remove(keys.tempAccountSettings);\n    }\n    account.settings.environmentUrls = environmentUrls;\n    account.settings.region = region;\n\n    if (\n      account.settings.vaultTimeoutAction === VaultTimeoutAction.LogOut &&\n      account.settings.vaultTimeout != null\n    ) {\n      account.tokens.accessToken = null;\n      account.tokens.refreshToken = null;\n      account.profile.apiKeyClientId = null;\n      account.keys.apiKeyClientSecret = null;\n    }\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(\n        { userId: account.profile.userId },\n        await this.defaultOnDiskLocalOptions()\n      )\n    );\n  }\n\n  protected async scaffoldNewAccountMemoryStorage(account: TAccount): Promise<void> {\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions(\n        { userId: account.profile.userId },\n        await this.defaultOnDiskMemoryOptions()\n      )\n    );\n    if (storedAccount?.settings != null) {\n      storedAccount.settings.environmentUrls = account.settings.environmentUrls;\n      storedAccount.settings.region = account.settings.region;\n      account.settings = storedAccount.settings;\n    }\n    await this.storageService.save(\n      account.profile.userId,\n      account,\n      await this.defaultOnDiskMemoryOptions()\n    );\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(\n        { userId: account.profile.userId },\n        await this.defaultOnDiskMemoryOptions()\n      )\n    );\n  }\n\n  protected async scaffoldNewAccountSessionStorage(account: TAccount): Promise<void> {\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions({ userId: account.profile.userId }, await this.defaultOnDiskOptions())\n    );\n    if (storedAccount?.settings != null) {\n      storedAccount.settings.environmentUrls = account.settings.environmentUrls;\n      storedAccount.settings.region = account.settings.region;\n      account.settings = storedAccount.settings;\n    }\n    await this.storageService.save(\n      account.profile.userId,\n      account,\n      await this.defaultOnDiskMemoryOptions()\n    );\n    await this.saveAccount(\n      account,\n      this.reconcileOptions({ userId: account.profile.userId }, await this.defaultOnDiskOptions())\n    );\n  }\n  //\n\n  protected async pushAccounts(): Promise<void> {\n    await this.pruneInMemoryAccounts();\n    await this.state().then((state) => {\n      if (state.accounts == null || Object.keys(state.accounts).length < 1) {\n        this.accountsSubject.next({});\n        return;\n      }\n\n      this.accountsSubject.next(state.accounts);\n    });\n  }\n\n  protected reconcileOptions(\n    requestedOptions: StorageOptions,\n    defaultOptions: StorageOptions\n  ): StorageOptions {\n    if (requestedOptions == null) {\n      return defaultOptions;\n    }\n    requestedOptions.userId = requestedOptions?.userId ?? defaultOptions.userId;\n    requestedOptions.storageLocation =\n      requestedOptions?.storageLocation ?? defaultOptions.storageLocation;\n    requestedOptions.useSecureStorage =\n      requestedOptions?.useSecureStorage ?? defaultOptions.useSecureStorage;\n    requestedOptions.htmlStorageLocation =\n      requestedOptions?.htmlStorageLocation ?? defaultOptions.htmlStorageLocation;\n    requestedOptions.keySuffix = requestedOptions?.keySuffix ?? defaultOptions.keySuffix;\n    return requestedOptions;\n  }\n\n  protected async defaultInMemoryOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Memory,\n      userId: (await this.state()).activeUserId,\n    };\n  }\n\n  protected async defaultOnDiskOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Disk,\n      htmlStorageLocation: HtmlStorageLocation.Session,\n      userId: (await this.state())?.activeUserId ?? (await this.getActiveUserIdFromStorage()),\n      useSecureStorage: false,\n    };\n  }\n\n  protected async defaultOnDiskLocalOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Disk,\n      htmlStorageLocation: HtmlStorageLocation.Local,\n      userId: (await this.state())?.activeUserId ?? (await this.getActiveUserIdFromStorage()),\n      useSecureStorage: false,\n    };\n  }\n\n  protected async defaultOnDiskMemoryOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Disk,\n      htmlStorageLocation: HtmlStorageLocation.Memory,\n      userId: (await this.state())?.activeUserId ?? (await this.getUserId()),\n      useSecureStorage: false,\n    };\n  }\n\n  protected async defaultSecureStorageOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Disk,\n      useSecureStorage: true,\n      userId: (await this.state())?.activeUserId ?? (await this.getActiveUserIdFromStorage()),\n    };\n  }\n\n  protected async getActiveUserIdFromStorage(): Promise<string> {\n    return await this.storageService.get<string>(keys.activeUserId);\n  }\n\n  protected async removeAccountFromLocalStorage(userId: string = null): Promise<void> {\n    userId = userId ?? (await this.state())?.activeUserId;\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions({ userId: userId }, await this.defaultOnDiskLocalOptions())\n    );\n    await this.saveAccount(\n      this.resetAccount(storedAccount),\n      this.reconcileOptions({ userId: userId }, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  protected async removeAccountFromSessionStorage(userId: string = null): Promise<void> {\n    userId = userId ?? (await this.state())?.activeUserId;\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions({ userId: userId }, await this.defaultOnDiskOptions())\n    );\n    await this.saveAccount(\n      this.resetAccount(storedAccount),\n      this.reconcileOptions({ userId: userId }, await this.defaultOnDiskOptions())\n    );\n  }\n\n  protected async removeAccountFromSecureStorage(userId: string = null): Promise<void> {\n    userId = userId ?? (await this.state())?.activeUserId;\n    await this.setUserKeyAutoUnlock(null, { userId: userId });\n    await this.setUserKeyBiometric(null, { userId: userId });\n    await this.setCryptoMasterKeyAuto(null, { userId: userId });\n    await this.setCryptoMasterKeyBiometric(null, { userId: userId });\n    await this.setCryptoMasterKeyB64(null, { userId: userId });\n  }\n\n  protected async removeAccountFromMemory(userId: string = null): Promise<void> {\n    await this.updateState(async (state) => {\n      userId = userId ?? state.activeUserId;\n      delete state.accounts[userId];\n\n      this.deleteDiskCache(userId);\n\n      return state;\n    });\n  }\n\n  protected async pruneInMemoryAccounts() {\n    // We preserve settings for logged out accounts, but we don't want to consider them when thinking about active account state\n    for (const userId in (await this.state())?.accounts) {\n      if (!(await this.getIsAuthenticated({ userId: userId }))) {\n        await this.removeAccountFromMemory(userId);\n      }\n    }\n  }\n\n  // settings persist even on reset, and are not affected by this method\n  protected resetAccount(account: TAccount) {\n    const persistentAccountInformation = {\n      settings: account.settings,\n      keys: { deviceKey: account.keys.deviceKey },\n      adminAuthRequest: account.adminAuthRequest,\n    };\n    return Object.assign(this.createAccount(), persistentAccountInformation);\n  }\n\n  // The environment urls and region are selected before login and are transferred here to an authenticated account\n  protected async setAccountEnvironment(account: TAccount): Promise<TAccount> {\n    account.settings.region = await this.getGlobalRegion();\n    account.settings.environmentUrls = await this.getGlobalEnvironmentUrls();\n    return account;\n  }\n\n  protected async getGlobalEnvironmentUrls(options?: StorageOptions): Promise<EnvironmentUrls> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n    return (await this.getGlobals(options)).environmentUrls ?? new EnvironmentUrls();\n  }\n\n  protected async getGlobalRegion(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n    return (await this.getGlobals(options)).region ?? null;\n  }\n\n  protected async clearDecryptedDataForActiveUser(): Promise<void> {\n    await this.updateState(async (state) => {\n      const userId = state?.activeUserId;\n      if (userId != null && state?.accounts[userId]?.data != null) {\n        state.accounts[userId].data = new AccountData();\n      }\n\n      return state;\n    });\n  }\n\n  protected createAccount(init: Partial<TAccount> = null): TAccount {\n    return this.stateFactory.createAccount(init);\n  }\n\n  protected createGlobals(init: Partial<TGlobalState> = null): TGlobalState {\n    return this.stateFactory.createGlobal(init);\n  }\n\n  protected async deAuthenticateAccount(userId: string): Promise<void> {\n    await this.setAccessToken(null, { userId: userId });\n    await this.setLastActive(null, { userId: userId });\n    await this.updateState(async (state) => {\n      state.authenticatedAccounts = state.authenticatedAccounts.filter((id) => id !== userId);\n\n      await this.storageService.save(keys.authenticatedAccounts, state.authenticatedAccounts);\n\n      return state;\n    });\n  }\n\n  protected async removeAccountFromDisk(userId: string) {\n    await this.removeAccountFromSessionStorage(userId);\n    await this.removeAccountFromLocalStorage(userId);\n    await this.removeAccountFromSecureStorage(userId);\n  }\n\n  protected async dynamicallySetActiveUser() {\n    const accounts = (await this.state())?.accounts;\n    if (accounts == null || Object.keys(accounts).length < 1) {\n      await this.setActiveUser(null);\n      return;\n    }\n    for (const userId in accounts) {\n      if (userId == null) {\n        continue;\n      }\n      if (await this.getIsAuthenticated({ userId: userId })) {\n        await this.setActiveUser(userId);\n        break;\n      }\n      await this.setActiveUser(null);\n    }\n  }\n\n  private async getTimeoutBasedStorageOptions(options?: StorageOptions): Promise<StorageOptions> {\n    const timeoutAction = await this.getVaultTimeoutAction({ userId: options?.userId });\n    const timeout = await this.getVaultTimeout({ userId: options?.userId });\n    const defaultOptions =\n      timeoutAction === VaultTimeoutAction.LogOut && timeout != null\n        ? await this.defaultInMemoryOptions()\n        : await this.defaultOnDiskOptions();\n    return this.reconcileOptions(options, defaultOptions);\n  }\n\n  protected async saveSecureStorageKey<T extends JsonValue>(\n    key: string,\n    value: T,\n    options?: StorageOptions\n  ) {\n    return value == null\n      ? await this.secureStorageService.remove(`${options.userId}${key}`, options)\n      : await this.secureStorageService.save(`${options.userId}${key}`, value, options);\n  }\n\n  protected async state(): Promise<State<TGlobalState, TAccount>> {\n    const state = await this.memoryStorageService.get<State<TGlobalState, TAccount>>(keys.state, {\n      deserializer: (s) => State.fromJSON(s, this.accountDeserializer),\n    });\n    return state;\n  }\n\n  private async setState(state: State<TGlobalState, TAccount>): Promise<void> {\n    await this.memoryStorageService.save(keys.state, state);\n  }\n\n  protected async updateState(\n    stateUpdater: (state: State<TGlobalState, TAccount>) => Promise<State<TGlobalState, TAccount>>\n  ) {\n    await this.state().then(async (state) => {\n      const updatedState = await stateUpdater(state);\n      if (updatedState == null) {\n        throw new Error(\"Attempted to update state to null value\");\n      }\n\n      await this.setState(updatedState);\n    });\n  }\n\n  private setDiskCache(key: string, value: TAccount, options?: StorageOptions) {\n    if (this.useAccountCache) {\n      this.accountDiskCache.value[key] = value;\n      this.accountDiskCache.next(this.accountDiskCache.value);\n    }\n  }\n\n  protected deleteDiskCache(key: string) {\n    if (this.useAccountCache) {\n      delete this.accountDiskCache.value[key];\n      this.accountDiskCache.next(this.accountDiskCache.value);\n    }\n  }\n}\n\nfunction withPrototypeForArrayMembers<T>(\n  memberConstructor: new (...args: any[]) => T,\n  memberConverter: (input: any) => T = (i) => i\n): (\n  target: any,\n  propertyKey: string | symbol,\n  descriptor: PropertyDescriptor\n) => { value: (...args: any[]) => Promise<T[]> } {\n  return (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) => {\n    const originalMethod = descriptor.value;\n\n    return {\n      value: function (...args: any[]) {\n        const originalResult: Promise<any[]> = originalMethod.apply(this, args);\n\n        if (!Utils.isPromise(originalResult)) {\n          throw new Error(\n            `Error applying prototype to stored value -- result is not a promise for method ${String(\n              propertyKey\n            )}`\n          );\n        }\n\n        return originalResult.then((result) => {\n          if (result == null) {\n            return null;\n          } else if (!(result instanceof Array)) {\n            throw new Error(\n              `Attempted to retrieve non array type from state as an array for method ${String(\n                propertyKey\n              )}`\n            );\n          } else {\n            return result.map((r) => {\n              return r == null ||\n                r.constructor.name === memberConstructor.prototype.constructor.name\n                ? r\n                : memberConverter(\n                    Object.create(memberConstructor.prototype, Object.getOwnPropertyDescriptors(r))\n                  );\n            });\n          }\n        });\n      },\n    };\n  };\n}\n\nfunction withPrototypeForObjectValues<T>(\n  valuesConstructor: new (...args: any[]) => T,\n  valuesConverter: (input: any) => T = (i) => i\n): (\n  target: any,\n  propertyKey: string | symbol,\n  descriptor: PropertyDescriptor\n) => { value: (...args: any[]) => Promise<{ [key: string]: T }> } {\n  return (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) => {\n    const originalMethod = descriptor.value;\n\n    return {\n      value: function (...args: any[]) {\n        const originalResult: Promise<{ [key: string]: T }> = originalMethod.apply(this, args);\n\n        if (!Utils.isPromise(originalResult)) {\n          throw new Error(\n            `Error applying prototype to stored value -- result is not a promise for method ${String(\n              propertyKey\n            )}`\n          );\n        }\n\n        return originalResult.then((result) => {\n          if (result == null) {\n            return null;\n          } else {\n            for (const [key, val] of Object.entries(result)) {\n              result[key] =\n                val == null || val.constructor.name === valuesConstructor.prototype.constructor.name\n                  ? valuesConverter(val)\n                  : valuesConverter(\n                      Object.create(\n                        valuesConstructor.prototype,\n                        Object.getOwnPropertyDescriptors(val)\n                      )\n                    );\n            }\n\n            return result as { [key: string]: T };\n          }\n        });\n      },\n    };\n  };\n}\n","import { Jsonify } from \"type-fest\";\n\nexport class BrowserComponentState {\n  scrollY: number;\n  searchText: string;\n\n  static fromJSON(json: Jsonify<BrowserComponentState>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new BrowserComponentState(), json);\n  }\n}\n","import { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { DeepJsonify } from \"@bitwarden/common/types/deep-jsonify\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { CollectionView } from \"@bitwarden/common/vault/models/view/collection.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\nimport { BrowserComponentState } from \"./browserComponentState\";\n\nexport class BrowserGroupingsComponentState extends BrowserComponentState {\n  favoriteCiphers: CipherView[];\n  noFolderCiphers: CipherView[];\n  ciphers: CipherView[];\n  collectionCounts: Map<string, number>;\n  folderCounts: Map<string, number>;\n  typeCounts: Map<CipherType, number>;\n  folders: FolderView[];\n  collections: CollectionView[];\n  deletedCount: number;\n\n  toJSON() {\n    return Utils.merge(this, {\n      collectionCounts: Utils.mapToRecord(this.collectionCounts),\n      folderCounts: Utils.mapToRecord(this.folderCounts),\n      typeCounts: Utils.mapToRecord(this.typeCounts),\n    });\n  }\n\n  static fromJSON(json: DeepJsonify<BrowserGroupingsComponentState>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new BrowserGroupingsComponentState(), json, {\n      favoriteCiphers: json.favoriteCiphers?.map((c) => CipherView.fromJSON(c)),\n      noFolderCiphers: json.noFolderCiphers?.map((c) => CipherView.fromJSON(c)),\n      ciphers: json.ciphers?.map((c) => CipherView.fromJSON(c)),\n      collectionCounts: Utils.recordToMap(json.collectionCounts),\n      folderCounts: Utils.recordToMap(json.folderCounts),\n      typeCounts: Utils.recordToMap(json.typeCounts),\n      folders: json.folders?.map((f) => FolderView.fromJSON(f)),\n    });\n  }\n}\n","import { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { SendType } from \"@bitwarden/common/tools/send/enums/send-type\";\nimport { SendView } from \"@bitwarden/common/tools/send/models/view/send.view\";\nimport { DeepJsonify } from \"@bitwarden/common/types/deep-jsonify\";\n\nimport { BrowserComponentState } from \"./browserComponentState\";\n\nexport class BrowserSendComponentState extends BrowserComponentState {\n  sends: SendView[];\n  typeCounts: Map<SendType, number>;\n\n  toJSON() {\n    return Utils.merge(this, {\n      typeCounts: Utils.mapToRecord(this.typeCounts),\n    });\n  }\n\n  static fromJSON(json: DeepJsonify<BrowserSendComponentState>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new BrowserSendComponentState(), json, {\n      sends: json.sends?.map((s) => SendView.fromJSON(s)),\n      typeCounts: Utils.recordToMap(json.typeCounts),\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport {\n  Account as BaseAccount,\n  AccountSettings as BaseAccountSettings,\n} from \"@bitwarden/common/platform/models/domain/account\";\n\nimport { BrowserComponentState } from \"./browserComponentState\";\nimport { BrowserGroupingsComponentState } from \"./browserGroupingsComponentState\";\nimport { BrowserSendComponentState } from \"./browserSendComponentState\";\n\nexport class AccountSettings extends BaseAccountSettings {\n  vaultTimeout = -1; // On Restart\n\n  static fromJSON(json: Jsonify<AccountSettings>): AccountSettings {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountSettings(), json, super.fromJSON(json));\n  }\n}\n\nexport class Account extends BaseAccount {\n  settings?: AccountSettings = new AccountSettings();\n  groupings?: BrowserGroupingsComponentState;\n  send?: BrowserSendComponentState;\n  ciphers?: BrowserComponentState;\n  sendType?: BrowserComponentState;\n\n  constructor(init: Partial<Account>) {\n    super(init);\n    Object.assign(this.settings, {\n      ...new AccountSettings(),\n      ...this.settings,\n    });\n    this.groupings = init?.groupings ?? new BrowserGroupingsComponentState();\n    this.send = init?.send ?? new BrowserSendComponentState();\n    this.ciphers = init?.ciphers ?? new BrowserComponentState();\n    this.sendType = init?.sendType ?? new BrowserComponentState();\n  }\n\n  static fromJSON(json: Jsonify<Account>): Account {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new Account({}), json, super.fromJSON(json), {\n      settings: AccountSettings.fromJSON(json.settings),\n      groupings: BrowserGroupingsComponentState.fromJSON(json.groupings),\n      send: BrowserSendComponentState.fromJSON(json.send),\n      ciphers: BrowserComponentState.fromJSON(json.ciphers),\n      sendType: BrowserComponentState.fromJSON(json.sendType),\n    });\n  }\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { StateMigrationService } from \"@bitwarden/common/platform/abstractions/state-migration.service\";\nimport {\n  AbstractStorageService,\n  AbstractMemoryStorageService,\n} from \"@bitwarden/common/platform/abstractions/storage.service\";\nimport { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\nimport { StorageOptions } from \"@bitwarden/common/platform/models/domain/storage-options\";\nimport { StateService as BaseStateService } from \"@bitwarden/common/platform/services/state.service\";\n\nimport { Account } from \"../../models/account\";\nimport { BrowserComponentState } from \"../../models/browserComponentState\";\nimport { BrowserGroupingsComponentState } from \"../../models/browserGroupingsComponentState\";\nimport { BrowserSendComponentState } from \"../../models/browserSendComponentState\";\nimport { browserSession, sessionSync } from \"../decorators/session-sync-observable\";\n\nimport { BrowserStateService as StateServiceAbstraction } from \"./abstractions/browser-state.service\";\n\n@browserSession\nexport class BrowserStateService\n  extends BaseStateService<GlobalState, Account>\n  implements StateServiceAbstraction\n{\n  @sessionSync({\n    initializer: Account.fromJSON as any, // TODO: Remove this any when all any types are removed from Account\n    initializeAs: \"record\",\n  })\n  protected accountsSubject: BehaviorSubject<{ [userId: string]: Account }>;\n  @sessionSync({ initializer: (s: string) => s })\n  protected activeAccountSubject: BehaviorSubject<string>;\n  @sessionSync({ initializer: (b: boolean) => b })\n  protected activeAccountUnlockedSubject: BehaviorSubject<boolean>;\n\n  protected accountDeserializer = Account.fromJSON;\n\n  constructor(\n    storageService: AbstractStorageService,\n    secureStorageService: AbstractStorageService,\n    memoryStorageService: AbstractMemoryStorageService,\n    logService: LogService,\n    stateMigrationService: StateMigrationService,\n    stateFactory: StateFactory<GlobalState, Account>,\n    useAccountCache = true\n  ) {\n    super(\n      storageService,\n      secureStorageService,\n      memoryStorageService,\n      logService,\n      stateMigrationService,\n      stateFactory,\n      useAccountCache\n    );\n\n    // TODO: This is a hack to fix having a disk cache on both the popup and\n    // the background page that can get out of sync. We need to work out the\n    // best way to handle caching with multiple instances of the state service.\n    if (useAccountCache) {\n      chrome.storage.onChanged.addListener((changes, namespace) => {\n        if (namespace === \"local\") {\n          for (const key of Object.keys(changes)) {\n            if (key !== \"accountActivity\" && this.accountDiskCache.value[key]) {\n              this.deleteDiskCache(key);\n            }\n          }\n        }\n      });\n    }\n  }\n\n  async addAccount(account: Account) {\n    // Apply browser overrides to default account values\n    account = new Account(account);\n    await super.addAccount(account);\n  }\n\n  async getIsAuthenticated(options?: StorageOptions): Promise<boolean> {\n    // Firefox Private Mode can clash with non-Private Mode because they both read from the same onDiskOptions\n    // Check that there is an account in memory before considering the user authenticated\n    return (\n      (await super.getIsAuthenticated(options)) &&\n      (await this.getAccount(await this.defaultInMemoryOptions())) != null\n    );\n  }\n\n  async getBrowserGroupingComponentState(\n    options?: StorageOptions\n  ): Promise<BrowserGroupingsComponentState> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.groupings;\n  }\n\n  async setBrowserGroupingComponentState(\n    value: BrowserGroupingsComponentState,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.groupings = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getBrowserVaultItemsComponentState(\n    options?: StorageOptions\n  ): Promise<BrowserComponentState> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.ciphers;\n  }\n\n  async setBrowserVaultItemsComponentState(\n    value: BrowserComponentState,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.ciphers = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getBrowserSendComponentState(options?: StorageOptions): Promise<BrowserSendComponentState> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.send;\n  }\n\n  async setBrowserSendComponentState(\n    value: BrowserSendComponentState,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.send = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getBrowserSendTypeComponentState(options?: StorageOptions): Promise<BrowserComponentState> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.sendType;\n  }\n\n  async setBrowserSendTypeComponentState(\n    value: BrowserComponentState,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.sendType = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  // Overriding the base class to prevent deleting the cache on save. We register a storage listener\n  // to delete the cache in the constructor above.\n  protected override async saveAccountToDisk(\n    account: Account,\n    options: StorageOptions\n  ): Promise<void> {\n    const storageLocation = options.useSecureStorage\n      ? this.secureStorageService\n      : this.storageService;\n\n    await storageLocation.save(`${options.userId}`, account, options);\n  }\n}\n","import { LogLevelType } from \"@bitwarden/common/enums\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { ConsoleLogService } from \"@bitwarden/common/platform/services/console-log.service\";\n\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\n\ntype LogServiceFactoryOptions = FactoryOptions & {\n  logServiceOptions: {\n    isDev: boolean;\n    filter?: (level: LogLevelType) => boolean;\n  };\n};\n\nexport type LogServiceInitOptions = LogServiceFactoryOptions;\n\nexport function logServiceFactory(\n  cache: { logService?: LogService } & CachedServices,\n  opts: LogServiceInitOptions\n): Promise<LogService> {\n  return factory(\n    cache,\n    \"logService\",\n    opts,\n    () => new ConsoleLogService(opts.logServiceOptions.isDev, opts.logServiceOptions.filter)\n  );\n}\n","import { LogLevelType } from \"../../enums\";\n\nexport abstract class LogService {\n  debug: (message: string) => void;\n  info: (message: string) => void;\n  warning: (message: string) => void;\n  error: (message: string) => void;\n  write: (level: LogLevelType, message: string) => void;\n}\n","export abstract class StateMigrationService {\n  needsMigration: () => Promise<boolean>;\n  migrate: () => Promise<void>;\n}\n","import { AbstractStorageService } from \"@bitwarden/common/platform/abstractions/storage.service\";\n\nexport default abstract class AbstractChromeStorageService implements AbstractStorageService {\n  protected abstract chromeStorageApi: chrome.storage.StorageArea;\n\n  async get<T>(key: string): Promise<T> {\n    return new Promise((resolve) => {\n      this.chromeStorageApi.get(key, (obj: any) => {\n        if (obj != null && obj[key] != null) {\n          resolve(obj[key] as T);\n          return;\n        }\n        resolve(null);\n      });\n    });\n  }\n\n  async has(key: string): Promise<boolean> {\n    return (await this.get(key)) != null;\n  }\n\n  async save(key: string, obj: any): Promise<void> {\n    if (obj == null) {\n      // Fix safari not liking null in set\n      return new Promise<void>((resolve) => {\n        this.chromeStorageApi.remove(key, () => {\n          resolve();\n        });\n      });\n    }\n\n    if (obj instanceof Set) {\n      obj = Array.from(obj);\n    }\n\n    const keyedObj = { [key]: obj };\n    return new Promise<void>((resolve) => {\n      this.chromeStorageApi.set(keyedObj, () => {\n        resolve();\n      });\n    });\n  }\n\n  async remove(key: string): Promise<void> {\n    return new Promise<void>((resolve) => {\n      this.chromeStorageApi.remove(key, () => {\n        resolve();\n      });\n    });\n  }\n}\n","import AbstractChromeStorageService from \"./abstractions/abstract-chrome-storage-api.service\";\n\nexport default class BrowserLocalStorageService extends AbstractChromeStorageService {\n  protected chromeStorageApi = chrome.storage.local;\n}\n","// required to avoid linting errors when there are no flags\n/* eslint-disable @typescript-eslint/ban-types */\nexport type SharedFlags = {\n  multithreadDecryption: boolean;\n  showPasswordless?: boolean;\n};\n\n// required to avoid linting errors when there are no flags\n/* eslint-disable @typescript-eslint/ban-types */\nexport type SharedDevFlags = {};\n\nfunction getFlags<T>(envFlags: string | T): T {\n  if (typeof envFlags === \"string\") {\n    return JSON.parse(envFlags) as T;\n  } else {\n    return envFlags as T;\n  }\n}\n\n/**\n * Gets the value of a feature flag from environment.\n * All flags default to \"on\" (true).\n * Only use for shared code in `libs`, otherwise use the client-specific function.\n * @param flag The name of the feature flag to check\n * @returns The value of the flag\n */\nexport function flagEnabled<Flags extends SharedFlags>(flag: keyof Flags): boolean {\n  const flags = getFlags<Flags>(process.env.FLAGS);\n  return flags[flag] == null || !!flags[flag];\n}\n\n/**\n * Gets the value of a dev flag from environment.\n * Will always return false unless in development.\n * Only use for shared code in `libs`, otherwise use the client-specific function.\n * @param flag The name of the dev flag to check\n * @returns The value of the flag\n */\nexport function devFlagEnabled<DevFlags extends SharedDevFlags>(flag: keyof DevFlags): boolean {\n  if (process.env.ENV !== \"development\") {\n    return false;\n  }\n\n  const devFlags = getFlags<DevFlags>(process.env.DEV_FLAGS);\n  return devFlags[flag] == null || !!devFlags[flag];\n}\n\n/**\n * Gets the value of a dev flag from environment.\n * Will always return false unless in development.\n * @param flag The name of the dev flag to check\n * @returns The value of the flag\n * @throws Error if the flag is not enabled\n */\nexport function devFlagValue<DevFlags extends SharedDevFlags>(\n  flag: keyof DevFlags\n): DevFlags[keyof DevFlags] {\n  if (!devFlagEnabled(flag)) {\n    throw new Error(`This method should not be called, it is protected by a disabled dev flag.`);\n  }\n\n  const devFlags = getFlags<DevFlags>(process.env.DEV_FLAGS);\n  return devFlags[flag];\n}\n","import {\n  flagEnabled as baseFlagEnabled,\n  devFlagEnabled as baseDevFlagEnabled,\n  devFlagValue as baseDevFlagValue,\n  SharedFlags,\n  SharedDevFlags,\n} from \"@bitwarden/common/platform/misc/flags\";\n\nimport { GroupPolicyEnvironment } from \"../admin-console/types/group-policy-environment\";\n\n// required to avoid linting errors when there are no flags\n/* eslint-disable-next-line @typescript-eslint/ban-types */\nexport type Flags = {} & SharedFlags;\n\n// required to avoid linting errors when there are no flags\n/* eslint-disable-next-line @typescript-eslint/ban-types */\nexport type DevFlags = {\n  storeSessionDecrypted?: boolean;\n  managedEnvironment?: GroupPolicyEnvironment;\n} & SharedDevFlags;\n\nexport function flagEnabled(flag: keyof Flags): boolean {\n  return baseFlagEnabled<Flags>(flag);\n}\n\nexport function devFlagEnabled(flag: keyof DevFlags) {\n  return baseDevFlagEnabled<DevFlags>(flag);\n}\n\nexport function devFlagValue(flag: keyof DevFlags) {\n  return baseDevFlagValue(flag);\n}\n","import AbstractChromeStorageService from \"./abstractions/abstract-chrome-storage-api.service\";\n\nexport default class BrowserMemoryStorageService extends AbstractChromeStorageService {\n  protected chromeStorageApi = chrome.storage.session;\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { EncryptService } from \"@bitwarden/common/platform/abstractions/encrypt.service\";\nimport { AbstractMemoryStorageService } from \"@bitwarden/common/platform/abstractions/storage.service\";\nimport { EncString } from \"@bitwarden/common/platform/models/domain/enc-string\";\nimport { MemoryStorageOptions } from \"@bitwarden/common/platform/models/domain/storage-options\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/platform/models/domain/symmetric-crypto-key\";\n\nimport { devFlag } from \"../decorators/dev-flag.decorator\";\nimport { devFlagEnabled } from \"../flags\";\n\nimport { AbstractKeyGenerationService } from \"./abstractions/abstract-key-generation.service\";\nimport BrowserLocalStorageService from \"./browser-local-storage.service\";\nimport BrowserMemoryStorageService from \"./browser-memory-storage.service\";\n\nconst keys = {\n  encKey: \"localEncryptionKey\",\n  sessionKey: \"session\",\n};\n\nexport class LocalBackedSessionStorageService extends AbstractMemoryStorageService {\n  private cache = new Map<string, unknown>();\n  private localStorage = new BrowserLocalStorageService();\n  private sessionStorage = new BrowserMemoryStorageService();\n\n  constructor(\n    private encryptService: EncryptService,\n    private keyGenerationService: AbstractKeyGenerationService\n  ) {\n    super();\n  }\n\n  async get<T>(key: string, options?: MemoryStorageOptions<T>): Promise<T> {\n    if (this.cache.has(key)) {\n      return this.cache.get(key) as T;\n    }\n\n    return await this.getBypassCache(key, options);\n  }\n\n  async getBypassCache<T>(key: string, options?: MemoryStorageOptions<T>): Promise<T> {\n    const session = await this.getLocalSession(await this.getSessionEncKey());\n    if (session == null || !Object.keys(session).includes(key)) {\n      return null;\n    }\n\n    let value = session[key];\n    if (options?.deserializer != null) {\n      value = options.deserializer(value as Jsonify<T>);\n    }\n\n    this.cache.set(key, value);\n    return this.cache.get(key) as T;\n  }\n\n  async has(key: string): Promise<boolean> {\n    return (await this.get(key)) != null;\n  }\n\n  async save<T>(key: string, obj: T): Promise<void> {\n    if (obj == null) {\n      this.cache.delete(key);\n    } else {\n      this.cache.set(key, obj);\n    }\n\n    const sessionEncKey = await this.getSessionEncKey();\n    const localSession = (await this.getLocalSession(sessionEncKey)) ?? {};\n    localSession[key] = obj;\n    await this.setLocalSession(localSession, sessionEncKey);\n  }\n\n  async remove(key: string): Promise<void> {\n    await this.save(key, null);\n  }\n\n  async getLocalSession(encKey: SymmetricCryptoKey): Promise<Record<string, unknown>> {\n    const local = await this.localStorage.get<string>(keys.sessionKey);\n\n    if (local == null) {\n      return null;\n    }\n\n    if (devFlagEnabled(\"storeSessionDecrypted\")) {\n      return local as any as Record<string, unknown>;\n    }\n\n    const sessionJson = await this.encryptService.decryptToUtf8(new EncString(local), encKey);\n    if (sessionJson == null) {\n      // Error with decryption -- session is lost, delete state and key and start over\n      await this.setSessionEncKey(null);\n      await this.localStorage.remove(keys.sessionKey);\n      return null;\n    }\n    return JSON.parse(sessionJson);\n  }\n\n  async setLocalSession(session: Record<string, unknown>, key: SymmetricCryptoKey) {\n    if (devFlagEnabled(\"storeSessionDecrypted\")) {\n      await this.setDecryptedLocalSession(session);\n    } else {\n      await this.setEncryptedLocalSession(session, key);\n    }\n  }\n\n  @devFlag(\"storeSessionDecrypted\")\n  async setDecryptedLocalSession(session: Record<string, unknown>): Promise<void> {\n    // Make sure we're storing the jsonified version of the session\n    const jsonSession = JSON.parse(JSON.stringify(session));\n    if (session == null) {\n      await this.localStorage.remove(keys.sessionKey);\n    } else {\n      await this.localStorage.save(keys.sessionKey, jsonSession);\n    }\n  }\n\n  async setEncryptedLocalSession(session: Record<string, unknown>, key: SymmetricCryptoKey) {\n    const jsonSession = JSON.stringify(session);\n    const encSession = await this.encryptService.encrypt(jsonSession, key);\n\n    if (encSession == null) {\n      return await this.localStorage.remove(keys.sessionKey);\n    }\n    await this.localStorage.save(keys.sessionKey, encSession.encryptedString);\n  }\n\n  async getSessionEncKey(): Promise<SymmetricCryptoKey> {\n    let storedKey = await this.sessionStorage.get<SymmetricCryptoKey>(keys.encKey);\n    if (storedKey == null || Object.keys(storedKey).length == 0) {\n      storedKey = await this.keyGenerationService.makeEphemeralKey();\n      await this.setSessionEncKey(storedKey);\n    }\n    return SymmetricCryptoKey.fromJSON(storedKey);\n  }\n\n  async setSessionEncKey(input: SymmetricCryptoKey): Promise<void> {\n    if (input == null) {\n      await this.sessionStorage.remove(keys.encKey);\n    } else {\n      await this.sessionStorage.save(keys.encKey, input);\n    }\n  }\n}\n","import { CryptoFunctionService } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { WebCryptoFunctionService } from \"@bitwarden/common/platform/services/web-crypto-function.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\n\ntype CryptoFunctionServiceFactoryOptions = FactoryOptions & {\n  cryptoFunctionServiceOptions: {\n    win: Window | typeof globalThis;\n  };\n};\n\nexport type CryptoFunctionServiceInitOptions = CryptoFunctionServiceFactoryOptions;\n\nexport function cryptoFunctionServiceFactory(\n  cache: { cryptoFunctionService?: CryptoFunctionService } & CachedServices,\n  opts: CryptoFunctionServiceFactoryOptions\n): Promise<CryptoFunctionService> {\n  return factory(\n    cache,\n    \"cryptoFunctionService\",\n    opts,\n    () => new WebCryptoFunctionService(opts.cryptoFunctionServiceOptions.win)\n  );\n}\n","import { devFlagEnabled, DevFlags } from \"../flags\";\n\nexport function devFlag(flag: keyof DevFlags) {\n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    const originalMethod = descriptor.value;\n    descriptor.value = function (...args: any[]) {\n      if (!devFlagEnabled(flag)) {\n        throw new Error(\n          `This method should not be called, it is protected by a disabled dev flag.`\n        );\n      }\n      return originalMethod.apply(this, args);\n    };\n  };\n}\n","import { EncryptServiceImplementation } from \"@bitwarden/common/platform/services/cryptography/encrypt.service.implementation\";\n\nimport {\n  LogServiceInitOptions,\n  logServiceFactory,\n} from \"../../background/service-factories/log-service.factory\";\n\nimport {\n  cryptoFunctionServiceFactory,\n  CryptoFunctionServiceInitOptions,\n} from \"./crypto-function-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\n\ntype EncryptServiceFactoryOptions = FactoryOptions & {\n  encryptServiceOptions: {\n    logMacFailures: boolean;\n  };\n};\n\nexport type EncryptServiceInitOptions = EncryptServiceFactoryOptions &\n  CryptoFunctionServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function encryptServiceFactory(\n  cache: { encryptService?: EncryptServiceImplementation } & CachedServices,\n  opts: EncryptServiceInitOptions\n): Promise<EncryptServiceImplementation> {\n  return factory(\n    cache,\n    \"encryptService\",\n    opts,\n    async () =>\n      new EncryptServiceImplementation(\n        await cryptoFunctionServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        opts.encryptServiceOptions.logMacFailures\n      )\n  );\n}\n","import { CryptoFunctionService } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/platform/models/domain/symmetric-crypto-key\";\n\nimport { AbstractKeyGenerationService } from \"./abstractions/abstract-key-generation.service\";\n\nexport class KeyGenerationService implements AbstractKeyGenerationService {\n  constructor(private cryptoFunctionService: CryptoFunctionService) {}\n\n  async makeEphemeralKey(numBytes = 16): Promise<SymmetricCryptoKey> {\n    const keyMaterial = await this.cryptoFunctionService.randomBytes(numBytes);\n    const key = await this.cryptoFunctionService.hkdf(\n      keyMaterial,\n      \"bitwarden-ephemeral\",\n      \"ephemeral\",\n      64,\n      \"sha256\"\n    );\n    return new SymmetricCryptoKey(key);\n  }\n}\n","import {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"@bitwarden/common/platform/abstractions/storage.service\";\nimport { MemoryStorageService } from \"@bitwarden/common/platform/services/memory-storage.service\";\n\nimport { BrowserApi } from \"../../browser/browser-api\";\nimport BrowserLocalStorageService from \"../../services/browser-local-storage.service\";\nimport { LocalBackedSessionStorageService } from \"../../services/local-backed-session-storage.service\";\n\nimport { EncryptServiceInitOptions, encryptServiceFactory } from \"./encrypt-service.factory\";\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport {\n  KeyGenerationServiceInitOptions,\n  keyGenerationServiceFactory,\n} from \"./key-generation-service.factory\";\n\ntype StorageServiceFactoryOptions = FactoryOptions;\n\nexport type DiskStorageServiceInitOptions = StorageServiceFactoryOptions;\nexport type SecureStorageServiceInitOptions = StorageServiceFactoryOptions;\nexport type MemoryStorageServiceInitOptions = StorageServiceFactoryOptions &\n  EncryptServiceInitOptions &\n  KeyGenerationServiceInitOptions;\n\nexport function diskStorageServiceFactory(\n  cache: { diskStorageService?: AbstractStorageService } & CachedServices,\n  opts: DiskStorageServiceInitOptions\n): Promise<AbstractStorageService> {\n  return factory(cache, \"diskStorageService\", opts, () => new BrowserLocalStorageService());\n}\n\nexport function secureStorageServiceFactory(\n  cache: { secureStorageService?: AbstractStorageService } & CachedServices,\n  opts: SecureStorageServiceInitOptions\n): Promise<AbstractStorageService> {\n  return factory(cache, \"secureStorageService\", opts, () => new BrowserLocalStorageService());\n}\n\nexport function memoryStorageServiceFactory(\n  cache: { memoryStorageService?: AbstractMemoryStorageService } & CachedServices,\n  opts: MemoryStorageServiceInitOptions\n): Promise<AbstractMemoryStorageService> {\n  return factory(cache, \"memoryStorageService\", opts, async () => {\n    if (BrowserApi.manifestVersion === 3) {\n      return new LocalBackedSessionStorageService(\n        await encryptServiceFactory(cache, opts),\n        await keyGenerationServiceFactory(cache, opts)\n      );\n    }\n    return new MemoryStorageService();\n  });\n}\n","import { KeyGenerationService } from \"../../services/key-generation.service\";\n\nimport {\n  cryptoFunctionServiceFactory,\n  CryptoFunctionServiceInitOptions,\n} from \"./crypto-function-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\n\ntype KeyGenerationServiceFactoryOptions = FactoryOptions;\n\nexport type KeyGenerationServiceInitOptions = KeyGenerationServiceFactoryOptions &\n  CryptoFunctionServiceInitOptions;\n\nexport function keyGenerationServiceFactory(\n  cache: { keyGenerationService?: KeyGenerationService } & CachedServices,\n  opts: KeyGenerationServiceInitOptions\n): Promise<KeyGenerationService> {\n  return factory(\n    cache,\n    \"keyGenerationService\",\n    opts,\n    async () => new KeyGenerationService(await cryptoFunctionServiceFactory(cache, opts))\n  );\n}\n","import { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\n\nimport { Account } from \"../../../models/account\";\nimport { BrowserStateService } from \"../../services/browser-state.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\nimport {\n  stateMigrationServiceFactory,\n  StateMigrationServiceInitOptions,\n} from \"./state-migration-service.factory\";\nimport {\n  diskStorageServiceFactory,\n  secureStorageServiceFactory,\n  memoryStorageServiceFactory,\n  DiskStorageServiceInitOptions,\n  SecureStorageServiceInitOptions,\n  MemoryStorageServiceInitOptions,\n} from \"./storage-service.factory\";\n\ntype StateServiceFactoryOptions = FactoryOptions & {\n  stateServiceOptions: {\n    useAccountCache?: boolean;\n    stateFactory: StateFactory<GlobalState, Account>;\n  };\n};\n\nexport type StateServiceInitOptions = StateServiceFactoryOptions &\n  DiskStorageServiceInitOptions &\n  SecureStorageServiceInitOptions &\n  MemoryStorageServiceInitOptions &\n  LogServiceInitOptions &\n  StateMigrationServiceInitOptions;\n\nexport async function stateServiceFactory(\n  cache: { stateService?: BrowserStateService } & CachedServices,\n  opts: StateServiceInitOptions\n): Promise<BrowserStateService> {\n  const service = await factory(\n    cache,\n    \"stateService\",\n    opts,\n    async () =>\n      await new BrowserStateService(\n        await diskStorageServiceFactory(cache, opts),\n        await secureStorageServiceFactory(cache, opts),\n        await memoryStorageServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await stateMigrationServiceFactory(cache, opts),\n        opts.stateServiceOptions.stateFactory,\n        opts.stateServiceOptions.useAccountCache\n      )\n  );\n  service.init();\n  return service;\n}\n","import { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\nimport { StateMigrationService } from \"@bitwarden/common/platform/services/state-migration.service\";\n\nimport { Account } from \"../../../models/account\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport {\n  diskStorageServiceFactory,\n  DiskStorageServiceInitOptions,\n  secureStorageServiceFactory,\n  SecureStorageServiceInitOptions,\n} from \"./storage-service.factory\";\n\ntype StateMigrationServiceFactoryOptions = FactoryOptions & {\n  stateMigrationServiceOptions: {\n    stateFactory: StateFactory<GlobalState, Account>;\n  };\n};\n\nexport type StateMigrationServiceInitOptions = StateMigrationServiceFactoryOptions &\n  DiskStorageServiceInitOptions &\n  SecureStorageServiceInitOptions;\n\nexport function stateMigrationServiceFactory(\n  cache: { stateMigrationService?: StateMigrationService } & CachedServices,\n  opts: StateMigrationServiceInitOptions\n): Promise<StateMigrationService> {\n  return factory(\n    cache,\n    \"stateMigrationService\",\n    opts,\n    async () =>\n      new StateMigrationService(\n        await diskStorageServiceFactory(cache, opts),\n        await secureStorageServiceFactory(cache, opts),\n        opts.stateMigrationServiceOptions.stateFactory\n      )\n  );\n}\n","import { OrganizationService as AbstractOrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\n\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../platform/background/service-factories/state-service.factory\";\nimport { BrowserOrganizationService } from \"../../services/browser-organization.service\";\n\ntype OrganizationServiceFactoryOptions = FactoryOptions;\n\nexport type OrganizationServiceInitOptions = OrganizationServiceFactoryOptions &\n  StateServiceInitOptions;\n\nexport function organizationServiceFactory(\n  cache: { organizationService?: AbstractOrganizationService } & CachedServices,\n  opts: OrganizationServiceInitOptions\n): Promise<AbstractOrganizationService> {\n  return factory(\n    cache,\n    \"organizationService\",\n    opts,\n    async () => new BrowserOrganizationService(await stateServiceFactory(cache, opts))\n  );\n}\n","import { PolicyService as AbstractPolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\n\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  stateServiceFactory as stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../platform/background/service-factories/state-service.factory\";\nimport { BrowserPolicyService } from \"../../services/browser-policy.service\";\n\nimport {\n  organizationServiceFactory,\n  OrganizationServiceInitOptions,\n} from \"./organization-service.factory\";\n\ntype PolicyServiceFactoryOptions = FactoryOptions;\n\nexport type PolicyServiceInitOptions = PolicyServiceFactoryOptions &\n  StateServiceInitOptions &\n  OrganizationServiceInitOptions;\n\nexport function policyServiceFactory(\n  cache: { policyService?: AbstractPolicyService } & CachedServices,\n  opts: PolicyServiceInitOptions\n): Promise<AbstractPolicyService> {\n  return factory(\n    cache,\n    \"policyService\",\n    opts,\n    async () =>\n      new BrowserPolicyService(\n        await stateServiceFactory(cache, opts),\n        await organizationServiceFactory(cache, opts)\n      )\n  );\n}\n","import { TokenService as AbstractTokenService } from \"@bitwarden/common/auth/abstractions/token.service\";\nimport { TokenService } from \"@bitwarden/common/auth/services/token.service\";\n\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../platform/background/service-factories/state-service.factory\";\n\ntype TokenServiceFactoryOptions = FactoryOptions;\n\nexport type TokenServiceInitOptions = TokenServiceFactoryOptions & StateServiceInitOptions;\n\nexport function tokenServiceFactory(\n  cache: { tokenService?: AbstractTokenService } & CachedServices,\n  opts: TokenServiceInitOptions\n): Promise<AbstractTokenService> {\n  return factory(\n    cache,\n    \"tokenService\",\n    opts,\n    async () => new TokenService(await stateServiceFactory(cache, opts))\n  );\n}\n","import { Observable } from \"rxjs\";\n\nexport type Urls = {\n  base?: string;\n  webVault?: string;\n  api?: string;\n  identity?: string;\n  icons?: string;\n  notifications?: string;\n  events?: string;\n  keyConnector?: string;\n  scim?: string;\n};\n\nexport type PayPalConfig = {\n  businessId?: string;\n  buttonAction?: string;\n};\n\nexport enum Region {\n  US = \"US\",\n  EU = \"EU\",\n  SelfHosted = \"Self-hosted\",\n}\n\nexport enum RegionDomain {\n  US = \"bitwarden.com\",\n  EU = \"bitwarden.eu\",\n  USQA = \"bitwarden.pw\",\n}\n\nexport abstract class EnvironmentService {\n  urls: Observable<void>;\n  usUrls: Urls;\n  euUrls: Urls;\n  selectedRegion?: Region;\n  initialized = true;\n\n  hasBaseUrl: () => boolean;\n  getNotificationsUrl: () => string;\n  getWebVaultUrl: () => string;\n  /**\n   * Retrieves the URL of the cloud web vault app.\n   *\n   * @returns {string} The URL of the cloud web vault app.\n   * @remarks Use this method only in views exclusive to self-host instances.\n   */\n  getCloudWebVaultUrl: () => string;\n  /**\n   * Sets the URL of the cloud web vault app based on the region parameter.\n   *\n   * @param {Region} region - The region of the cloud web vault app.\n   */\n  setCloudWebVaultUrl: (region: Region) => void;\n  getSendUrl: () => string;\n  getIconsUrl: () => string;\n  getApiUrl: () => string;\n  getIdentityUrl: () => string;\n  getEventsUrl: () => string;\n  getKeyConnectorUrl: () => string;\n  getScimUrl: () => string;\n  setUrlsFromStorage: () => Promise<void>;\n  setUrls: (urls: Urls) => Promise<Urls>;\n  setRegion: (region: Region) => Promise<void>;\n  getUrls: () => Urls;\n  isCloud: () => boolean;\n  isEmpty: () => boolean;\n}\n","import { DiskStorageOptions } from \"@koa/multer\";\n\nimport { AppIdService as AbstractAppIdService } from \"@bitwarden/common/platform/abstractions/app-id.service\";\nimport { AppIdService } from \"@bitwarden/common/platform/services/app-id.service\";\n\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport { diskStorageServiceFactory } from \"./storage-service.factory\";\n\ntype AppIdServiceFactoryOptions = FactoryOptions;\n\nexport type AppIdServiceInitOptions = AppIdServiceFactoryOptions & DiskStorageOptions;\n\nexport function appIdServiceFactory(\n  cache: { appIdService?: AbstractAppIdService } & CachedServices,\n  opts: AppIdServiceInitOptions\n): Promise<AbstractAppIdService> {\n  return factory(\n    cache,\n    \"appIdService\",\n    opts,\n    async () => new AppIdService(await diskStorageServiceFactory(cache, opts))\n  );\n}\n","import { concatMap, Observable, Subject } from \"rxjs\";\n\nimport { EnvironmentUrls } from \"../../auth/models/domain/environment-urls\";\nimport {\n  EnvironmentService as EnvironmentServiceAbstraction,\n  Region,\n  Urls,\n} from \"../abstractions/environment.service\";\nimport { StateService } from \"../abstractions/state.service\";\n\nexport class EnvironmentService implements EnvironmentServiceAbstraction {\n  private readonly urlsSubject = new Subject<void>();\n  urls: Observable<void> = this.urlsSubject.asObservable();\n  selectedRegion?: Region;\n  initialized = false;\n\n  protected baseUrl: string;\n  protected webVaultUrl: string;\n  protected apiUrl: string;\n  protected identityUrl: string;\n  protected iconsUrl: string;\n  protected notificationsUrl: string;\n  protected eventsUrl: string;\n  private keyConnectorUrl: string;\n  private scimUrl: string = null;\n  private cloudWebVaultUrl: string;\n\n  readonly usUrls: Urls = {\n    base: null,\n    api: \"https://api.bitwarden.com\",\n    identity: \"https://identity.bitwarden.com\",\n    icons: \"https://icons.bitwarden.net\",\n    webVault: \"https://vault.bitwarden.com\",\n    notifications: \"https://notifications.bitwarden.com\",\n    events: \"https://events.bitwarden.com\",\n    scim: \"https://scim.bitwarden.com\",\n  };\n\n  readonly euUrls: Urls = {\n    base: null,\n    api: \"https://api.bitwarden.eu\",\n    identity: \"https://identity.bitwarden.eu\",\n    icons: \"https://icons.bitwarden.eu\",\n    webVault: \"https://vault.bitwarden.eu\",\n    notifications: \"https://notifications.bitwarden.eu\",\n    events: \"https://events.bitwarden.eu\",\n    scim: \"https://scim.bitwarden.eu\",\n  };\n\n  constructor(private stateService: StateService) {\n    this.stateService.activeAccount$\n      .pipe(\n        concatMap(async () => {\n          if (!this.initialized) {\n            return;\n          }\n          await this.setUrlsFromStorage();\n        })\n      )\n      .subscribe();\n  }\n\n  hasBaseUrl() {\n    return this.baseUrl != null;\n  }\n\n  getNotificationsUrl() {\n    if (this.notificationsUrl != null) {\n      return this.notificationsUrl;\n    }\n\n    if (this.baseUrl != null) {\n      return this.baseUrl + \"/notifications\";\n    }\n\n    return \"https://notifications.bitwarden.com\";\n  }\n\n  getWebVaultUrl() {\n    if (this.webVaultUrl != null) {\n      return this.webVaultUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl;\n    }\n    return \"https://vault.bitwarden.com\";\n  }\n\n  getCloudWebVaultUrl() {\n    if (this.cloudWebVaultUrl != null) {\n      return this.cloudWebVaultUrl;\n    }\n\n    return this.usUrls.webVault;\n  }\n\n  setCloudWebVaultUrl(region: Region) {\n    switch (region) {\n      case Region.EU:\n        this.cloudWebVaultUrl = this.euUrls.webVault;\n        break;\n      case Region.US:\n      default:\n        this.cloudWebVaultUrl = this.usUrls.webVault;\n        break;\n    }\n  }\n\n  getSendUrl() {\n    return this.getWebVaultUrl() === \"https://vault.bitwarden.com\"\n      ? \"https://send.bitwarden.com/#\"\n      : this.getWebVaultUrl() + \"/#/send/\";\n  }\n\n  getIconsUrl() {\n    if (this.iconsUrl != null) {\n      return this.iconsUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl + \"/icons\";\n    }\n\n    return \"https://icons.bitwarden.net\";\n  }\n\n  getApiUrl() {\n    if (this.apiUrl != null) {\n      return this.apiUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl + \"/api\";\n    }\n\n    return \"https://api.bitwarden.com\";\n  }\n\n  getIdentityUrl() {\n    if (this.identityUrl != null) {\n      return this.identityUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl + \"/identity\";\n    }\n\n    return \"https://identity.bitwarden.com\";\n  }\n\n  getEventsUrl() {\n    if (this.eventsUrl != null) {\n      return this.eventsUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl + \"/events\";\n    }\n\n    return \"https://events.bitwarden.com\";\n  }\n\n  getKeyConnectorUrl() {\n    return this.keyConnectorUrl;\n  }\n\n  getScimUrl() {\n    if (this.scimUrl != null) {\n      return this.scimUrl + \"/v2\";\n    }\n\n    return this.getWebVaultUrl() === \"https://vault.bitwarden.com\"\n      ? \"https://scim.bitwarden.com/v2\"\n      : this.getWebVaultUrl() + \"/scim/v2\";\n  }\n\n  async setUrlsFromStorage(): Promise<void> {\n    const region = await this.stateService.getRegion();\n    const savedUrls = await this.stateService.getEnvironmentUrls();\n    const envUrls = new EnvironmentUrls();\n\n    // In release `2023.5.0`, we set the `base` property of the environment URLs to the US web vault URL when a user clicked the \"US\" region.\n    // This check will detect these cases and convert them to the proper region instead.\n    // We are detecting this by checking for the presence of the web vault URL in the `base` and the absence of the `notifications` property.\n    // This is because the `notifications` will not be `null` in the web vault, and we don't want to migrate the URLs in that case.\n    if (savedUrls.base === \"https://vault.bitwarden.com\" && savedUrls.notifications == null) {\n      await this.setRegion(Region.US);\n      return;\n    }\n\n    switch (region) {\n      case Region.EU:\n        await this.setRegion(Region.EU);\n        return;\n      case Region.US:\n        await this.setRegion(Region.US);\n        return;\n      case Region.SelfHosted:\n      case null:\n      default:\n        this.baseUrl = envUrls.base = savedUrls.base;\n        this.webVaultUrl = savedUrls.webVault;\n        this.apiUrl = envUrls.api = savedUrls.api;\n        this.identityUrl = envUrls.identity = savedUrls.identity;\n        this.iconsUrl = savedUrls.icons;\n        this.notificationsUrl = savedUrls.notifications;\n        this.eventsUrl = envUrls.events = savedUrls.events;\n        this.keyConnectorUrl = savedUrls.keyConnector;\n        await this.setRegion(Region.SelfHosted);\n        // scimUrl is not saved to storage\n        this.urlsSubject.next();\n        break;\n    }\n  }\n\n  async setUrls(urls: Urls): Promise<Urls> {\n    urls.base = this.formatUrl(urls.base);\n    urls.webVault = this.formatUrl(urls.webVault);\n    urls.api = this.formatUrl(urls.api);\n    urls.identity = this.formatUrl(urls.identity);\n    urls.icons = this.formatUrl(urls.icons);\n    urls.notifications = this.formatUrl(urls.notifications);\n    urls.events = this.formatUrl(urls.events);\n    urls.keyConnector = this.formatUrl(urls.keyConnector);\n\n    // scimUrl cannot be cleared\n    urls.scim = this.formatUrl(urls.scim) ?? this.scimUrl;\n\n    await this.stateService.setEnvironmentUrls({\n      base: urls.base,\n      api: urls.api,\n      identity: urls.identity,\n      webVault: urls.webVault,\n      icons: urls.icons,\n      notifications: urls.notifications,\n      events: urls.events,\n      keyConnector: urls.keyConnector,\n      // scimUrl is not saved to storage\n    });\n\n    this.baseUrl = urls.base;\n    this.webVaultUrl = urls.webVault;\n    this.apiUrl = urls.api;\n    this.identityUrl = urls.identity;\n    this.iconsUrl = urls.icons;\n    this.notificationsUrl = urls.notifications;\n    this.eventsUrl = urls.events;\n    this.keyConnectorUrl = urls.keyConnector;\n    this.scimUrl = urls.scim;\n\n    await this.setRegion(Region.SelfHosted);\n\n    this.urlsSubject.next();\n\n    return urls;\n  }\n\n  getUrls() {\n    return {\n      base: this.baseUrl,\n      webVault: this.webVaultUrl,\n      cloudWebVault: this.cloudWebVaultUrl,\n      api: this.apiUrl,\n      identity: this.identityUrl,\n      icons: this.iconsUrl,\n      notifications: this.notificationsUrl,\n      events: this.eventsUrl,\n      keyConnector: this.keyConnectorUrl,\n      scim: this.scimUrl,\n    };\n  }\n\n  isEmpty(): boolean {\n    return (\n      this.baseUrl == null &&\n      this.webVaultUrl == null &&\n      this.apiUrl == null &&\n      this.identityUrl == null &&\n      this.iconsUrl == null &&\n      this.notificationsUrl == null &&\n      this.eventsUrl == null\n    );\n  }\n\n  async setRegion(region: Region) {\n    this.selectedRegion = region;\n    await this.stateService.setRegion(region);\n\n    if (region === Region.SelfHosted) {\n      // If user saves a self-hosted region with empty fields, default to US\n      if (this.isEmpty()) {\n        await this.setRegion(Region.US);\n      }\n    } else {\n      // If we are setting the region to EU or US, clear the self-hosted URLs\n      await this.stateService.setEnvironmentUrls(new EnvironmentUrls());\n      if (region === Region.EU) {\n        this.setUrlsInternal(this.euUrls);\n      } else if (region === Region.US) {\n        this.setUrlsInternal(this.usUrls);\n      }\n    }\n  }\n\n  private setUrlsInternal(urls: Urls) {\n    this.baseUrl = this.formatUrl(urls.base);\n    this.webVaultUrl = this.formatUrl(urls.webVault);\n    this.apiUrl = this.formatUrl(urls.api);\n    this.identityUrl = this.formatUrl(urls.identity);\n    this.iconsUrl = this.formatUrl(urls.icons);\n    this.notificationsUrl = this.formatUrl(urls.notifications);\n    this.eventsUrl = this.formatUrl(urls.events);\n    this.keyConnectorUrl = this.formatUrl(urls.keyConnector);\n\n    // scimUrl cannot be cleared\n    this.scimUrl = this.formatUrl(urls.scim) ?? this.scimUrl;\n    this.urlsSubject.next();\n  }\n\n  private formatUrl(url: string): string {\n    if (url == null || url === \"\") {\n      return null;\n    }\n\n    url = url.replace(/\\/+$/g, \"\");\n    if (!url.startsWith(\"http://\") && !url.startsWith(\"https://\")) {\n      url = \"https://\" + url;\n    }\n\n    return url.trim();\n  }\n\n  isCloud(): boolean {\n    return [\n      \"https://api.bitwarden.com\",\n      \"https://vault.bitwarden.com/api\",\n      \"https://api.bitwarden.eu\",\n      \"https://vault.bitwarden.eu/api\",\n    ].includes(this.getApiUrl());\n  }\n}\n","import { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/services/environment.service\";\n\nimport { GroupPolicyEnvironment } from \"../../admin-console/types/group-policy-environment\";\nimport { devFlagEnabled, devFlagValue } from \"../flags\";\n\nexport class BrowserEnvironmentService extends EnvironmentService {\n  constructor(stateService: StateService, private logService: LogService) {\n    super(stateService);\n  }\n\n  async hasManagedEnvironment(): Promise<boolean> {\n    try {\n      return (await this.getManagedEnvironment()) != null;\n    } catch (e) {\n      this.logService.error(e);\n      return false;\n    }\n  }\n\n  async settingsHaveChanged() {\n    if (!(await this.hasManagedEnvironment())) {\n      return false;\n    }\n\n    const env = await this.getManagedEnvironment();\n\n    return (\n      env.base != this.baseUrl ||\n      env.webVault != this.webVaultUrl ||\n      env.api != this.webVaultUrl ||\n      env.identity != this.identityUrl ||\n      env.icons != this.iconsUrl ||\n      env.notifications != this.notificationsUrl ||\n      env.events != this.eventsUrl\n    );\n  }\n\n  getManagedEnvironment(): Promise<GroupPolicyEnvironment> {\n    return devFlagEnabled(\"managedEnvironment\")\n      ? new Promise((resolve) => resolve(devFlagValue(\"managedEnvironment\")))\n      : new Promise((resolve, reject) => {\n          if (chrome.storage.managed == null) {\n            return resolve(null);\n          }\n\n          chrome.storage.managed.get(\"environment\", (result) => {\n            if (chrome.runtime.lastError) {\n              return reject(chrome.runtime.lastError);\n            }\n\n            resolve(result.environment);\n          });\n        });\n  }\n\n  async setUrlsToManagedEnvironment() {\n    const env = await this.getManagedEnvironment();\n    await this.setUrls({\n      base: env.base,\n      webVault: env.webVault,\n      api: env.api,\n      identity: env.identity,\n      icons: env.icons,\n      notifications: env.notifications,\n      events: env.events,\n    });\n  }\n}\n","import { BrowserEnvironmentService } from \"../../services/browser-environment.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\nimport {\n  stateServiceFactory as stateServiceFactory,\n  StateServiceInitOptions,\n} from \"./state-service.factory\";\n\ntype EnvironmentServiceFactoryOptions = FactoryOptions;\n\nexport type EnvironmentServiceInitOptions = EnvironmentServiceFactoryOptions &\n  StateServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function environmentServiceFactory(\n  cache: { environmentService?: BrowserEnvironmentService } & CachedServices,\n  opts: EnvironmentServiceInitOptions\n): Promise<BrowserEnvironmentService> {\n  return factory(\n    cache,\n    \"environmentService\",\n    opts,\n    async () =>\n      new BrowserEnvironmentService(\n        await stateServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts)\n      )\n  );\n}\n","import { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\n\nimport { BrowserApi } from \"../browser/browser-api\";\n\nexport default class BrowserMessagingService implements MessagingService {\n  send(subscriber: string, arg: any = {}) {\n    return BrowserApi.sendMessage(subscriber, arg);\n  }\n}\n","import { MessagingService as AbstractMessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\n\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../background/service-factories/factory-options\";\nimport BrowserMessagingService from \"../../services/browser-messaging.service\";\n\ntype MessagingServiceFactoryOptions = FactoryOptions;\n\nexport type MessagingServiceInitOptions = MessagingServiceFactoryOptions;\n\nexport function messagingServiceFactory(\n  cache: { messagingService?: AbstractMessagingService } & CachedServices,\n  opts: MessagingServiceInitOptions\n): Promise<AbstractMessagingService> {\n  return factory(cache, \"messagingService\", opts, () => new BrowserMessagingService());\n}\n","import { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\n\nimport BrowserPlatformUtilsService from \"../../services/browser-platform-utils.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { MessagingServiceInitOptions, messagingServiceFactory } from \"./messaging-service.factory\";\n\ntype PlatformUtilsServiceFactoryOptions = FactoryOptions & {\n  platformUtilsServiceOptions: {\n    clipboardWriteCallback: (clipboardValue: string, clearMs: number) => Promise<void>;\n    biometricCallback: () => Promise<boolean>;\n    win: Window & typeof globalThis;\n  };\n};\n\nexport type PlatformUtilsServiceInitOptions = PlatformUtilsServiceFactoryOptions &\n  MessagingServiceInitOptions;\n\nexport function platformUtilsServiceFactory(\n  cache: { platformUtilsService?: PlatformUtilsService } & CachedServices,\n  opts: PlatformUtilsServiceInitOptions\n): Promise<PlatformUtilsService> {\n  return factory(\n    cache,\n    \"platformUtilsService\",\n    opts,\n    async () =>\n      new BrowserPlatformUtilsService(\n        await messagingServiceFactory(cache, opts),\n        opts.platformUtilsServiceOptions.clipboardWriteCallback,\n        opts.platformUtilsServiceOptions.biometricCallback,\n        opts.platformUtilsServiceOptions.win\n      )\n  );\n}\n","import { ApiService as AbstractApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { ApiService } from \"@bitwarden/common/services/api.service\";\n\nimport {\n  tokenServiceFactory,\n  TokenServiceInitOptions,\n} from \"../../../auth/background/service-factories/token-service.factory\";\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../background/service-factories/factory-options\";\n\nimport { AppIdServiceInitOptions, appIdServiceFactory } from \"./app-id-service.factory\";\nimport {\n  environmentServiceFactory,\n  EnvironmentServiceInitOptions,\n} from \"./environment-service.factory\";\nimport {\n  PlatformUtilsServiceInitOptions,\n  platformUtilsServiceFactory,\n} from \"./platform-utils-service.factory\";\n\ntype ApiServiceFactoryOptions = FactoryOptions & {\n  apiServiceOptions: {\n    logoutCallback: (expired: boolean) => Promise<void>;\n    customUserAgent?: string;\n  };\n};\n\nexport type ApiServiceInitOptions = ApiServiceFactoryOptions &\n  TokenServiceInitOptions &\n  PlatformUtilsServiceInitOptions &\n  EnvironmentServiceInitOptions &\n  AppIdServiceInitOptions;\n\nexport function apiServiceFactory(\n  cache: { apiService?: AbstractApiService } & CachedServices,\n  opts: ApiServiceInitOptions\n): Promise<AbstractApiService> {\n  return factory(\n    cache,\n    \"apiService\",\n    opts,\n    async () =>\n      new ApiService(\n        await tokenServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts),\n        await environmentServiceFactory(cache, opts),\n        await appIdServiceFactory(cache, opts),\n        opts.apiServiceOptions.logoutCallback,\n        opts.apiServiceOptions.customUserAgent\n      )\n  );\n}\n","import { CryptoService } from \"../../../platform/abstractions/crypto.service\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { EncryptedOrganizationKeyData } from \"../data/encrypted-organization-key.data\";\n\nexport abstract class BaseEncryptedOrganizationKey {\n  decrypt: (cryptoService: CryptoService) => Promise<SymmetricCryptoKey>;\n\n  static fromData(data: EncryptedOrganizationKeyData) {\n    switch (data.type) {\n      case \"organization\":\n        return new EncryptedOrganizationKey(data.key);\n\n      case \"provider\":\n        return new ProviderEncryptedOrganizationKey(data.key, data.providerId);\n\n      default:\n        return null;\n    }\n  }\n}\n\nexport class EncryptedOrganizationKey implements BaseEncryptedOrganizationKey {\n  constructor(private key: string) {}\n\n  async decrypt(cryptoService: CryptoService) {\n    const decValue = await cryptoService.rsaDecrypt(this.key);\n    return new SymmetricCryptoKey(decValue);\n  }\n\n  toData(): EncryptedOrganizationKeyData {\n    return {\n      type: \"organization\",\n      key: this.key,\n    };\n  }\n}\n\nexport class ProviderEncryptedOrganizationKey implements BaseEncryptedOrganizationKey {\n  constructor(private key: string, private providerId: string) {}\n\n  async decrypt(cryptoService: CryptoService) {\n    const providerKey = await cryptoService.getProviderKey(this.providerId);\n    const decValue = await cryptoService.decryptToBytes(new EncString(this.key), providerKey);\n    return new SymmetricCryptoKey(decValue);\n  }\n\n  toData(): EncryptedOrganizationKeyData {\n    return {\n      type: \"provider\",\n      key: this.key,\n      providerId: this.providerId,\n    };\n  }\n}\n","import * as bigInt from \"big-integer\";\n\nimport { EncryptedOrganizationKeyData } from \"../../admin-console/models/data/encrypted-organization-key.data\";\nimport { BaseEncryptedOrganizationKey } from \"../../admin-console/models/domain/encrypted-organization-key\";\nimport { ProfileOrganizationResponse } from \"../../admin-console/models/response/profile-organization.response\";\nimport { ProfileProviderOrganizationResponse } from \"../../admin-console/models/response/profile-provider-organization.response\";\nimport { ProfileProviderResponse } from \"../../admin-console/models/response/profile-provider.response\";\nimport { KdfConfig } from \"../../auth/models/domain/kdf-config\";\nimport {\n  KeySuffixOptions,\n  HashPurpose,\n  KdfType,\n  DEFAULT_ARGON2_ITERATIONS,\n  DEFAULT_ARGON2_MEMORY,\n  DEFAULT_ARGON2_PARALLELISM,\n  EncryptionType,\n} from \"../../enums\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport { CryptoFunctionService } from \"../abstractions/crypto-function.service\";\nimport { CryptoService as CryptoServiceAbstraction } from \"../abstractions/crypto.service\";\nimport { EncryptService } from \"../abstractions/encrypt.service\";\nimport { LogService } from \"../abstractions/log.service\";\nimport { PlatformUtilsService } from \"../abstractions/platform-utils.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { sequentialize } from \"../misc/sequentialize\";\nimport { EFFLongWordList } from \"../misc/wordlist\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport {\n  MasterKey,\n  OrgKey,\n  PinKey,\n  ProviderKey,\n  SymmetricCryptoKey,\n  UserKey,\n} from \"../models/domain/symmetric-crypto-key\";\n\nexport class CryptoService implements CryptoServiceAbstraction {\n  constructor(\n    protected cryptoFunctionService: CryptoFunctionService,\n    protected encryptService: EncryptService,\n    protected platformUtilService: PlatformUtilsService,\n    protected logService: LogService,\n    protected stateService: StateService\n  ) {}\n\n  async setUserKey(key: UserKey, userId?: string): Promise<void> {\n    if (key != null) {\n      await this.stateService.setEverHadUserKey(true, { userId: userId });\n    }\n    await this.stateService.setUserKey(key, { userId: userId });\n    await this.storeAdditionalKeys(key, userId);\n  }\n\n  async getEverHadUserKey(userId?: string): Promise<boolean> {\n    return await this.stateService.getEverHadUserKey({ userId: userId });\n  }\n\n  async refreshAdditionalKeys(): Promise<void> {\n    const key = await this.getUserKey();\n    await this.setUserKey(key);\n  }\n\n  async getUserKey(userId?: string): Promise<UserKey> {\n    let userKey = await this.stateService.getUserKey({ userId: userId });\n    if (userKey) {\n      return userKey;\n    }\n\n    // If the user has set their vault timeout to 'Never', we can load the user key from storage\n    if (await this.hasUserKeyStored(KeySuffixOptions.Auto, userId)) {\n      userKey = await this.getKeyFromStorage(KeySuffixOptions.Auto, userId);\n      if (userKey) {\n        await this.setUserKey(userKey, userId);\n        return userKey;\n      }\n    }\n  }\n\n  async getUserKeyWithLegacySupport(userId?: string): Promise<UserKey> {\n    const userKey = await this.getUserKey(userId);\n    if (userKey) {\n      return userKey;\n    }\n\n    // Legacy support: encryption used to be done with the master key (derived from master password).\n    // Users who have not migrated will have a null user key and must use the master key instead.\n    return (await this.getMasterKey(userId)) as unknown as UserKey;\n  }\n\n  async getUserKeyFromStorage(keySuffix: KeySuffixOptions, userId?: string): Promise<UserKey> {\n    const userKey = await this.getKeyFromStorage(keySuffix, userId);\n    if (userKey) {\n      if (!(await this.validateUserKey(userKey))) {\n        this.logService.warning(\"Invalid key, throwing away stored keys\");\n        await this.clearAllStoredUserKeys(userId);\n      }\n      return userKey;\n    }\n  }\n\n  async hasUserKey(): Promise<boolean> {\n    return (\n      (await this.hasUserKeyInMemory()) || (await this.hasUserKeyStored(KeySuffixOptions.Auto))\n    );\n  }\n\n  async hasUserKeyInMemory(userId?: string): Promise<boolean> {\n    return (await this.stateService.getUserKey({ userId: userId })) != null;\n  }\n\n  async hasUserKeyStored(keySuffix: KeySuffixOptions, userId?: string): Promise<boolean> {\n    return (await this.getKeyFromStorage(keySuffix, userId)) != null;\n  }\n\n  async makeUserKey(masterKey: MasterKey): Promise<[UserKey, EncString]> {\n    masterKey ||= await this.getMasterKey();\n    if (masterKey == null) {\n      throw new Error(\"No Master Key found.\");\n    }\n\n    const newUserKey = await this.cryptoFunctionService.randomBytes(64);\n    return this.buildProtectedSymmetricKey(masterKey, newUserKey);\n  }\n\n  async clearUserKey(clearStoredKeys = true, userId?: string): Promise<void> {\n    await this.stateService.setUserKey(null, { userId: userId });\n    if (clearStoredKeys) {\n      await this.clearAllStoredUserKeys(userId);\n    }\n  }\n\n  async clearStoredUserKey(keySuffix: KeySuffixOptions, userId?: string): Promise<void> {\n    if (keySuffix === KeySuffixOptions.Auto) {\n      this.stateService.setUserKeyAutoUnlock(null, { userId: userId });\n      this.clearDeprecatedKeys(KeySuffixOptions.Auto, userId);\n    }\n    if (keySuffix === KeySuffixOptions.Pin) {\n      this.stateService.setPinKeyEncryptedUserKeyEphemeral(null, { userId: userId });\n      this.clearDeprecatedKeys(KeySuffixOptions.Pin, userId);\n    }\n  }\n\n  async setMasterKeyEncryptedUserKey(userKeyMasterKey: string, userId?: string): Promise<void> {\n    await this.stateService.setMasterKeyEncryptedUserKey(userKeyMasterKey, { userId: userId });\n  }\n\n  async setMasterKey(key: MasterKey, userId?: string): Promise<void> {\n    await this.stateService.setMasterKey(key, { userId: userId });\n  }\n\n  async getMasterKey(userId?: string): Promise<MasterKey> {\n    let masterKey = await this.stateService.getMasterKey({ userId: userId });\n    if (!masterKey) {\n      masterKey = (await this.stateService.getCryptoMasterKey({ userId: userId })) as MasterKey;\n      await this.setMasterKey(masterKey, userId);\n    }\n    return masterKey;\n  }\n\n  async getOrDeriveMasterKey(password: string, userId?: string) {\n    let masterKey = await this.getMasterKey(userId);\n    return (masterKey ||= await this.makeMasterKey(\n      password,\n      await this.stateService.getEmail({ userId: userId }),\n      await this.stateService.getKdfType({ userId: userId }),\n      await this.stateService.getKdfConfig({ userId: userId })\n    ));\n  }\n\n  async makeMasterKey(\n    password: string,\n    email: string,\n    kdf: KdfType,\n    KdfConfig: KdfConfig\n  ): Promise<MasterKey> {\n    return (await this.makeKey(password, email, kdf, KdfConfig)) as MasterKey;\n  }\n\n  async clearMasterKey(userId?: string): Promise<void> {\n    await this.stateService.setMasterKey(null, { userId: userId });\n  }\n\n  async encryptUserKeyWithMasterKey(\n    masterKey: MasterKey,\n    userKey?: UserKey\n  ): Promise<[UserKey, EncString]> {\n    userKey ||= await this.getUserKey();\n    return await this.buildProtectedSymmetricKey(masterKey, userKey.key);\n  }\n\n  async decryptUserKeyWithMasterKey(\n    masterKey: MasterKey,\n    userKey?: EncString,\n    userId?: string\n  ): Promise<UserKey> {\n    masterKey ||= await this.getMasterKey(userId);\n    if (masterKey == null) {\n      throw new Error(\"No master key found.\");\n    }\n\n    if (!userKey) {\n      let masterKeyEncryptedUserKey = await this.stateService.getMasterKeyEncryptedUserKey({\n        userId: userId,\n      });\n\n      // Try one more way to get the user key if it still wasn't found.\n      if (masterKeyEncryptedUserKey == null) {\n        masterKeyEncryptedUserKey = await this.stateService.getEncryptedCryptoSymmetricKey({\n          userId: userId,\n        });\n      }\n\n      if (masterKeyEncryptedUserKey == null) {\n        throw new Error(\"No encrypted user key found.\");\n      }\n      userKey = new EncString(masterKeyEncryptedUserKey);\n    }\n\n    let decUserKey: Uint8Array;\n    if (userKey.encryptionType === EncryptionType.AesCbc256_B64) {\n      decUserKey = await this.encryptService.decryptToBytes(userKey, masterKey);\n    } else if (userKey.encryptionType === EncryptionType.AesCbc256_HmacSha256_B64) {\n      const newKey = await this.stretchKey(masterKey);\n      decUserKey = await this.encryptService.decryptToBytes(userKey, newKey);\n    } else {\n      throw new Error(\"Unsupported encryption type.\");\n    }\n    if (decUserKey == null) {\n      return null;\n    }\n\n    return new SymmetricCryptoKey(decUserKey) as UserKey;\n  }\n\n  async hashMasterKey(\n    password: string,\n    key: MasterKey,\n    hashPurpose?: HashPurpose\n  ): Promise<string> {\n    key ||= await this.getMasterKey();\n\n    if (password == null || key == null) {\n      throw new Error(\"Invalid parameters.\");\n    }\n\n    const iterations = hashPurpose === HashPurpose.LocalAuthorization ? 2 : 1;\n    const hash = await this.cryptoFunctionService.pbkdf2(key.key, password, \"sha256\", iterations);\n    return Utils.fromBufferToB64(hash);\n  }\n\n  async setMasterKeyHash(keyHash: string): Promise<void> {\n    await this.stateService.setKeyHash(keyHash);\n  }\n\n  async getMasterKeyHash(): Promise<string> {\n    return await this.stateService.getKeyHash();\n  }\n\n  async clearMasterKeyHash(userId?: string): Promise<void> {\n    return await this.stateService.setKeyHash(null, { userId: userId });\n  }\n\n  async compareAndUpdateKeyHash(masterPassword: string, masterKey: MasterKey): Promise<boolean> {\n    const storedPasswordHash = await this.getMasterKeyHash();\n    if (masterPassword != null && storedPasswordHash != null) {\n      const localKeyHash = await this.hashMasterKey(\n        masterPassword,\n        masterKey,\n        HashPurpose.LocalAuthorization\n      );\n      if (localKeyHash != null && storedPasswordHash === localKeyHash) {\n        return true;\n      }\n\n      // TODO: remove serverKeyHash check in 1-2 releases after everyone's keyHash has been updated\n      const serverKeyHash = await this.hashMasterKey(\n        masterPassword,\n        masterKey,\n        HashPurpose.ServerAuthorization\n      );\n      if (serverKeyHash != null && storedPasswordHash === serverKeyHash) {\n        await this.setMasterKeyHash(localKeyHash);\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  async setOrgKeys(\n    orgs: ProfileOrganizationResponse[] = [],\n    providerOrgs: ProfileProviderOrganizationResponse[] = []\n  ): Promise<void> {\n    const encOrgKeyData: { [orgId: string]: EncryptedOrganizationKeyData } = {};\n\n    orgs.forEach((org) => {\n      encOrgKeyData[org.id] = {\n        type: \"organization\",\n        key: org.key,\n      };\n    });\n\n    providerOrgs.forEach((org) => {\n      encOrgKeyData[org.id] = {\n        type: \"provider\",\n        providerId: org.providerId,\n        key: org.key,\n      };\n    });\n\n    await this.stateService.setDecryptedOrganizationKeys(null);\n    return await this.stateService.setEncryptedOrganizationKeys(encOrgKeyData);\n  }\n\n  async getOrgKey(orgId: string): Promise<OrgKey> {\n    if (orgId == null) {\n      return null;\n    }\n\n    const orgKeys = await this.getOrgKeys();\n    if (orgKeys == null || !orgKeys.has(orgId)) {\n      return null;\n    }\n\n    return orgKeys.get(orgId);\n  }\n\n  @sequentialize(() => \"getOrgKeys\")\n  async getOrgKeys(): Promise<Map<string, OrgKey>> {\n    const result: Map<string, OrgKey> = new Map<string, OrgKey>();\n    const decryptedOrganizationKeys = await this.stateService.getDecryptedOrganizationKeys();\n    if (decryptedOrganizationKeys != null && decryptedOrganizationKeys.size > 0) {\n      return decryptedOrganizationKeys as Map<string, OrgKey>;\n    }\n\n    const encOrgKeyData = await this.stateService.getEncryptedOrganizationKeys();\n    if (encOrgKeyData == null) {\n      return result;\n    }\n\n    let setKey = false;\n\n    for (const orgId of Object.keys(encOrgKeyData)) {\n      if (result.has(orgId)) {\n        continue;\n      }\n\n      const encOrgKey = BaseEncryptedOrganizationKey.fromData(encOrgKeyData[orgId]);\n      const decOrgKey = (await encOrgKey.decrypt(this)) as OrgKey;\n      result.set(orgId, decOrgKey);\n\n      setKey = true;\n    }\n\n    if (setKey) {\n      await this.stateService.setDecryptedOrganizationKeys(result);\n    }\n\n    return result;\n  }\n\n  async makeDataEncKey<T extends OrgKey | UserKey>(\n    key: T\n  ): Promise<[SymmetricCryptoKey, EncString]> {\n    if (key == null) {\n      throw new Error(\"No key provided\");\n    }\n\n    const newSymKey = await this.cryptoFunctionService.randomBytes(64);\n    return this.buildProtectedSymmetricKey(key, newSymKey);\n  }\n\n  async clearOrgKeys(memoryOnly?: boolean, userId?: string): Promise<void> {\n    await this.stateService.setDecryptedOrganizationKeys(null, { userId: userId });\n    if (!memoryOnly) {\n      await this.stateService.setEncryptedOrganizationKeys(null, { userId: userId });\n    }\n  }\n\n  async setProviderKeys(providers: ProfileProviderResponse[]): Promise<void> {\n    const providerKeys: any = {};\n    providers.forEach((provider) => {\n      providerKeys[provider.id] = provider.key;\n    });\n\n    await this.stateService.setDecryptedProviderKeys(null);\n    return await this.stateService.setEncryptedProviderKeys(providerKeys);\n  }\n\n  async getProviderKey(providerId: string): Promise<ProviderKey> {\n    if (providerId == null) {\n      return null;\n    }\n\n    const providerKeys = await this.getProviderKeys();\n    if (providerKeys == null || !providerKeys.has(providerId)) {\n      return null;\n    }\n\n    return providerKeys.get(providerId);\n  }\n\n  @sequentialize(() => \"getProviderKeys\")\n  async getProviderKeys(): Promise<Map<string, ProviderKey>> {\n    const providerKeys: Map<string, ProviderKey> = new Map<string, ProviderKey>();\n    const decryptedProviderKeys = await this.stateService.getDecryptedProviderKeys();\n    if (decryptedProviderKeys != null && decryptedProviderKeys.size > 0) {\n      return decryptedProviderKeys as Map<string, ProviderKey>;\n    }\n\n    const encProviderKeys = await this.stateService.getEncryptedProviderKeys();\n    if (encProviderKeys == null) {\n      return null;\n    }\n\n    let setKey = false;\n\n    for (const orgId in encProviderKeys) {\n      // eslint-disable-next-line\n      if (!encProviderKeys.hasOwnProperty(orgId)) {\n        continue;\n      }\n\n      const decValue = await this.rsaDecrypt(encProviderKeys[orgId]);\n      providerKeys.set(orgId, new SymmetricCryptoKey(decValue) as ProviderKey);\n      setKey = true;\n    }\n\n    if (setKey) {\n      await this.stateService.setDecryptedProviderKeys(providerKeys);\n    }\n\n    return providerKeys;\n  }\n\n  async clearProviderKeys(memoryOnly?: boolean, userId?: string): Promise<void> {\n    await this.stateService.setDecryptedProviderKeys(null, { userId: userId });\n    if (!memoryOnly) {\n      await this.stateService.setEncryptedProviderKeys(null, { userId: userId });\n    }\n  }\n\n  async getPublicKey(): Promise<Uint8Array> {\n    const inMemoryPublicKey = await this.stateService.getPublicKey();\n    if (inMemoryPublicKey != null) {\n      return inMemoryPublicKey;\n    }\n\n    const privateKey = await this.getPrivateKey();\n    if (privateKey == null) {\n      return null;\n    }\n\n    const publicKey = await this.cryptoFunctionService.rsaExtractPublicKey(privateKey);\n    await this.stateService.setPublicKey(publicKey);\n    return publicKey;\n  }\n\n  async makeOrgKey<T extends OrgKey | ProviderKey>(): Promise<[EncString, T]> {\n    const shareKey = await this.cryptoFunctionService.randomBytes(64);\n    const publicKey = await this.getPublicKey();\n    const encShareKey = await this.rsaEncrypt(shareKey, publicKey);\n    return [encShareKey, new SymmetricCryptoKey(shareKey) as T];\n  }\n\n  async setPrivateKey(encPrivateKey: string): Promise<void> {\n    if (encPrivateKey == null) {\n      return;\n    }\n\n    await this.stateService.setDecryptedPrivateKey(null);\n    await this.stateService.setEncryptedPrivateKey(encPrivateKey);\n  }\n\n  async getPrivateKey(): Promise<Uint8Array> {\n    const decryptedPrivateKey = await this.stateService.getDecryptedPrivateKey();\n    if (decryptedPrivateKey != null) {\n      return decryptedPrivateKey;\n    }\n\n    const encPrivateKey = await this.stateService.getEncryptedPrivateKey();\n    if (encPrivateKey == null) {\n      return null;\n    }\n\n    const privateKey = await this.encryptService.decryptToBytes(\n      new EncString(encPrivateKey),\n      await this.getUserKeyWithLegacySupport()\n    );\n    await this.stateService.setDecryptedPrivateKey(privateKey);\n    return privateKey;\n  }\n\n  async getFingerprint(fingerprintMaterial: string, publicKey?: Uint8Array): Promise<string[]> {\n    if (publicKey == null) {\n      publicKey = await this.getPublicKey();\n    }\n    if (publicKey === null) {\n      throw new Error(\"No public key available.\");\n    }\n    const keyFingerprint = await this.cryptoFunctionService.hash(publicKey, \"sha256\");\n    const userFingerprint = await this.cryptoFunctionService.hkdfExpand(\n      keyFingerprint,\n      fingerprintMaterial,\n      32,\n      \"sha256\"\n    );\n    return this.hashPhrase(userFingerprint);\n  }\n\n  async makeKeyPair(key?: SymmetricCryptoKey): Promise<[string, EncString]> {\n    key ||= await this.getUserKey();\n\n    const keyPair = await this.cryptoFunctionService.rsaGenerateKeyPair(2048);\n    const publicB64 = Utils.fromBufferToB64(keyPair[0]);\n    const privateEnc = await this.encryptService.encrypt(keyPair[1], key);\n    return [publicB64, privateEnc];\n  }\n\n  async clearKeyPair(memoryOnly?: boolean, userId?: string): Promise<void[]> {\n    const keysToClear: Promise<void>[] = [\n      this.stateService.setDecryptedPrivateKey(null, { userId: userId }),\n      this.stateService.setPublicKey(null, { userId: userId }),\n    ];\n    if (!memoryOnly) {\n      keysToClear.push(this.stateService.setEncryptedPrivateKey(null, { userId: userId }));\n    }\n    return Promise.all(keysToClear);\n  }\n\n  async makePinKey(pin: string, salt: string, kdf: KdfType, kdfConfig: KdfConfig): Promise<PinKey> {\n    const pinKey = await this.makeKey(pin, salt, kdf, kdfConfig);\n    return (await this.stretchKey(pinKey)) as PinKey;\n  }\n\n  async clearPinKeys(userId?: string): Promise<void> {\n    await this.stateService.setPinKeyEncryptedUserKey(null, { userId: userId });\n    await this.stateService.setPinKeyEncryptedUserKeyEphemeral(null, { userId: userId });\n    await this.stateService.setProtectedPin(null, { userId: userId });\n    await this.clearDeprecatedKeys(KeySuffixOptions.Pin, userId);\n  }\n\n  async decryptUserKeyWithPin(\n    pin: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    pinProtectedUserKey?: EncString\n  ): Promise<UserKey> {\n    pinProtectedUserKey ||= await this.stateService.getPinKeyEncryptedUserKey();\n    pinProtectedUserKey ||= await this.stateService.getPinKeyEncryptedUserKeyEphemeral();\n    if (!pinProtectedUserKey) {\n      throw new Error(\"No PIN protected key found.\");\n    }\n    const pinKey = await this.makePinKey(pin, salt, kdf, kdfConfig);\n    const userKey = await this.encryptService.decryptToBytes(pinProtectedUserKey, pinKey);\n    return new SymmetricCryptoKey(userKey) as UserKey;\n  }\n\n  // only for migration purposes\n  async decryptMasterKeyWithPin(\n    pin: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    pinProtectedMasterKey?: EncString\n  ): Promise<MasterKey> {\n    if (!pinProtectedMasterKey) {\n      const pinProtectedMasterKeyString = await this.stateService.getEncryptedPinProtected();\n      if (pinProtectedMasterKeyString == null) {\n        throw new Error(\"No PIN protected key found.\");\n      }\n      pinProtectedMasterKey = new EncString(pinProtectedMasterKeyString);\n    }\n    const pinKey = await this.makePinKey(pin, salt, kdf, kdfConfig);\n    const masterKey = await this.encryptService.decryptToBytes(pinProtectedMasterKey, pinKey);\n    return new SymmetricCryptoKey(masterKey) as MasterKey;\n  }\n\n  async makeSendKey(keyMaterial: Uint8Array): Promise<SymmetricCryptoKey> {\n    const sendKey = await this.cryptoFunctionService.hkdf(\n      keyMaterial,\n      \"bitwarden-send\",\n      \"send\",\n      64,\n      \"sha256\"\n    );\n    return new SymmetricCryptoKey(sendKey);\n  }\n\n  async clearKeys(userId?: string): Promise<any> {\n    await this.clearUserKey(true, userId);\n    await this.clearMasterKeyHash(userId);\n    await this.clearOrgKeys(false, userId);\n    await this.clearProviderKeys(false, userId);\n    await this.clearKeyPair(false, userId);\n    await this.clearPinKeys(userId);\n  }\n\n  async rsaEncrypt(data: Uint8Array, publicKey?: Uint8Array): Promise<EncString> {\n    if (publicKey == null) {\n      publicKey = await this.getPublicKey();\n    }\n    if (publicKey == null) {\n      throw new Error(\"Public key unavailable.\");\n    }\n\n    const encBytes = await this.cryptoFunctionService.rsaEncrypt(data, publicKey, \"sha1\");\n    return new EncString(EncryptionType.Rsa2048_OaepSha1_B64, Utils.fromBufferToB64(encBytes));\n  }\n\n  async rsaDecrypt(encValue: string, privateKeyValue?: Uint8Array): Promise<Uint8Array> {\n    const headerPieces = encValue.split(\".\");\n    let encType: EncryptionType = null;\n    let encPieces: string[];\n\n    if (headerPieces.length === 1) {\n      encType = EncryptionType.Rsa2048_OaepSha256_B64;\n      encPieces = [headerPieces[0]];\n    } else if (headerPieces.length === 2) {\n      try {\n        encType = parseInt(headerPieces[0], null);\n        encPieces = headerPieces[1].split(\"|\");\n      } catch (e) {\n        this.logService.error(e);\n      }\n    }\n\n    switch (encType) {\n      case EncryptionType.Rsa2048_OaepSha256_B64:\n      case EncryptionType.Rsa2048_OaepSha1_B64:\n      case EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64: // HmacSha256 types are deprecated\n      case EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64:\n        break;\n      default:\n        throw new Error(\"encType unavailable.\");\n    }\n\n    if (encPieces == null || encPieces.length <= 0) {\n      throw new Error(\"encPieces unavailable.\");\n    }\n\n    const data = Utils.fromB64ToArray(encPieces[0]);\n    const privateKey = privateKeyValue ?? (await this.getPrivateKey());\n    if (privateKey == null) {\n      throw new Error(\"No private key.\");\n    }\n\n    let alg: \"sha1\" | \"sha256\" = \"sha1\";\n    switch (encType) {\n      case EncryptionType.Rsa2048_OaepSha256_B64:\n      case EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64:\n        alg = \"sha256\";\n        break;\n      case EncryptionType.Rsa2048_OaepSha1_B64:\n      case EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64:\n        break;\n      default:\n        throw new Error(\"encType unavailable.\");\n    }\n\n    return this.cryptoFunctionService.rsaDecrypt(data, privateKey, alg);\n  }\n\n  // EFForg/OpenWireless\n  // ref https://github.com/EFForg/OpenWireless/blob/master/app/js/diceware.js\n  async randomNumber(min: number, max: number): Promise<number> {\n    let rval = 0;\n    const range = max - min + 1;\n    const bitsNeeded = Math.ceil(Math.log2(range));\n    if (bitsNeeded > 53) {\n      throw new Error(\"We cannot generate numbers larger than 53 bits.\");\n    }\n\n    const bytesNeeded = Math.ceil(bitsNeeded / 8);\n    const mask = Math.pow(2, bitsNeeded) - 1;\n    // 7776 -> (2^13 = 8192) -1 == 8191 or 0x00001111 11111111\n\n    // Fill a byte array with N random numbers\n    const byteArray = new Uint8Array(await this.cryptoFunctionService.randomBytes(bytesNeeded));\n\n    let p = (bytesNeeded - 1) * 8;\n    for (let i = 0; i < bytesNeeded; i++) {\n      rval += byteArray[i] * Math.pow(2, p);\n      p -= 8;\n    }\n\n    // Use & to apply the mask and reduce the number of recursive lookups\n    rval = rval & mask;\n\n    if (rval >= range) {\n      // Integer out of acceptable range\n      return this.randomNumber(min, max);\n    }\n\n    // Return an integer that falls within the range\n    return min + rval;\n  }\n\n  // ---HELPERS---\n  protected async validateUserKey(key: UserKey): Promise<boolean> {\n    if (!key) {\n      return false;\n    }\n\n    try {\n      const encPrivateKey = await this.stateService.getEncryptedPrivateKey();\n      if (encPrivateKey == null) {\n        return false;\n      }\n\n      const privateKey = await this.encryptService.decryptToBytes(\n        new EncString(encPrivateKey),\n        key\n      );\n      await this.cryptoFunctionService.rsaExtractPublicKey(privateKey);\n    } catch (e) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Initialize all necessary crypto keys needed for a new account.\n   * Warning! This completely replaces any existing keys!\n   */\n  async initAccount(): Promise<{\n    userKey: UserKey;\n    publicKey: string;\n    privateKey: EncString;\n  }> {\n    const randomBytes = await this.cryptoFunctionService.randomBytes(64);\n    const userKey = new SymmetricCryptoKey(randomBytes) as UserKey;\n    const [publicKey, privateKey] = await this.makeKeyPair(userKey);\n    await this.setUserKey(userKey);\n    await this.stateService.setEncryptedPrivateKey(privateKey.encryptedString);\n\n    return {\n      userKey,\n      publicKey,\n      privateKey,\n    };\n  }\n\n  /**\n   * Generates any additional keys if needed. Additional keys are\n   * keys such as biometrics, auto, and pin keys.\n   * Useful to make sure other keys stay in sync when the user key\n   * has been rotated.\n   * @param key The user key\n   * @param userId The desired user\n   */\n  protected async storeAdditionalKeys(key: UserKey, userId?: string) {\n    const storeAuto = await this.shouldStoreKey(KeySuffixOptions.Auto, userId);\n    if (storeAuto) {\n      await this.stateService.setUserKeyAutoUnlock(key.keyB64, { userId: userId });\n    } else {\n      await this.stateService.setUserKeyAutoUnlock(null, { userId: userId });\n    }\n    await this.clearDeprecatedKeys(KeySuffixOptions.Auto, userId);\n\n    const storePin = await this.shouldStoreKey(KeySuffixOptions.Pin, userId);\n    if (storePin) {\n      await this.storePinKey(key, userId);\n      // We can't always clear deprecated keys because the pin is only\n      // migrated once used to unlock\n      await this.clearDeprecatedKeys(KeySuffixOptions.Pin, userId);\n    } else {\n      await this.stateService.setPinKeyEncryptedUserKey(null, { userId: userId });\n      await this.stateService.setPinKeyEncryptedUserKeyEphemeral(null, { userId: userId });\n    }\n  }\n\n  /**\n   * Stores the pin key if needed. If MP on Reset is enabled, stores the\n   * ephemeral version.\n   * @param key The user key\n   */\n  protected async storePinKey(key: UserKey, userId?: string) {\n    const pin = await this.encryptService.decryptToUtf8(\n      new EncString(await this.stateService.getProtectedPin({ userId: userId })),\n      key\n    );\n    const pinKey = await this.makePinKey(\n      pin,\n      await this.stateService.getEmail({ userId: userId }),\n      await this.stateService.getKdfType({ userId: userId }),\n      await this.stateService.getKdfConfig({ userId: userId })\n    );\n    const encPin = await this.encryptService.encrypt(key.key, pinKey);\n\n    if ((await this.stateService.getPinKeyEncryptedUserKey({ userId: userId })) != null) {\n      await this.stateService.setPinKeyEncryptedUserKey(encPin, { userId: userId });\n    } else {\n      await this.stateService.setPinKeyEncryptedUserKeyEphemeral(encPin, { userId: userId });\n    }\n  }\n\n  protected async shouldStoreKey(keySuffix: KeySuffixOptions, userId?: string) {\n    let shouldStoreKey = false;\n    switch (keySuffix) {\n      case KeySuffixOptions.Auto: {\n        const vaultTimeout = await this.stateService.getVaultTimeout({ userId: userId });\n        shouldStoreKey = vaultTimeout == null;\n        break;\n      }\n      case KeySuffixOptions.Pin: {\n        const protectedPin = await this.stateService.getProtectedPin({ userId: userId });\n        shouldStoreKey = !!protectedPin;\n        break;\n      }\n    }\n    return shouldStoreKey;\n  }\n\n  protected async getKeyFromStorage(\n    keySuffix: KeySuffixOptions,\n    userId?: string\n  ): Promise<UserKey> {\n    if (keySuffix === KeySuffixOptions.Auto) {\n      const userKey = await this.stateService.getUserKeyAutoUnlock({ userId: userId });\n      if (userKey) {\n        return new SymmetricCryptoKey(Utils.fromB64ToArray(userKey)) as UserKey;\n      }\n    }\n    return null;\n  }\n\n  protected async clearAllStoredUserKeys(userId?: string): Promise<void> {\n    await this.stateService.setUserKeyAutoUnlock(null, { userId: userId });\n    await this.stateService.setPinKeyEncryptedUserKeyEphemeral(null, { userId: userId });\n  }\n\n  private async stretchKey(key: SymmetricCryptoKey): Promise<SymmetricCryptoKey> {\n    const newKey = new Uint8Array(64);\n    const encKey = await this.cryptoFunctionService.hkdfExpand(key.key, \"enc\", 32, \"sha256\");\n    const macKey = await this.cryptoFunctionService.hkdfExpand(key.key, \"mac\", 32, \"sha256\");\n    newKey.set(new Uint8Array(encKey));\n    newKey.set(new Uint8Array(macKey), 32);\n    return new SymmetricCryptoKey(newKey);\n  }\n\n  private async hashPhrase(hash: Uint8Array, minimumEntropy = 64) {\n    const entropyPerWord = Math.log(EFFLongWordList.length) / Math.log(2);\n    let numWords = Math.ceil(minimumEntropy / entropyPerWord);\n\n    const hashArr = Array.from(new Uint8Array(hash));\n    const entropyAvailable = hashArr.length * 4;\n    if (numWords * entropyPerWord > entropyAvailable) {\n      throw new Error(\"Output entropy of hash function is too small\");\n    }\n\n    const phrase: string[] = [];\n    let hashNumber = bigInt.fromArray(hashArr, 256);\n    while (numWords--) {\n      const remainder = hashNumber.mod(EFFLongWordList.length);\n      hashNumber = hashNumber.divide(EFFLongWordList.length);\n      phrase.push(EFFLongWordList[remainder as any]);\n    }\n    return phrase;\n  }\n\n  private async buildProtectedSymmetricKey<T extends SymmetricCryptoKey>(\n    encryptionKey: SymmetricCryptoKey,\n    newSymKey: Uint8Array\n  ): Promise<[T, EncString]> {\n    let protectedSymKey: EncString = null;\n    if (encryptionKey.key.byteLength === 32) {\n      const stretchedEncryptionKey = await this.stretchKey(encryptionKey);\n      protectedSymKey = await this.encryptService.encrypt(newSymKey, stretchedEncryptionKey);\n    } else if (encryptionKey.key.byteLength === 64) {\n      protectedSymKey = await this.encryptService.encrypt(newSymKey, encryptionKey);\n    } else {\n      throw new Error(\"Invalid key size.\");\n    }\n    return [new SymmetricCryptoKey(newSymKey) as T, protectedSymKey];\n  }\n\n  private async makeKey(\n    password: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig\n  ): Promise<SymmetricCryptoKey> {\n    let key: Uint8Array = null;\n    if (kdf == null || kdf === KdfType.PBKDF2_SHA256) {\n      if (kdfConfig.iterations == null) {\n        kdfConfig.iterations = 5000;\n      } else if (kdfConfig.iterations < 5000) {\n        throw new Error(\"PBKDF2 iteration minimum is 5000.\");\n      }\n      key = await this.cryptoFunctionService.pbkdf2(password, salt, \"sha256\", kdfConfig.iterations);\n    } else if (kdf == KdfType.Argon2id) {\n      if (kdfConfig.iterations == null) {\n        kdfConfig.iterations = DEFAULT_ARGON2_ITERATIONS;\n      } else if (kdfConfig.iterations < 2) {\n        throw new Error(\"Argon2 iteration minimum is 2.\");\n      }\n\n      if (kdfConfig.memory == null) {\n        kdfConfig.memory = DEFAULT_ARGON2_MEMORY;\n      } else if (kdfConfig.memory < 16) {\n        throw new Error(\"Argon2 memory minimum is 16 MB\");\n      } else if (kdfConfig.memory > 1024) {\n        throw new Error(\"Argon2 memory maximum is 1024 MB\");\n      }\n\n      if (kdfConfig.parallelism == null) {\n        kdfConfig.parallelism = DEFAULT_ARGON2_PARALLELISM;\n      } else if (kdfConfig.parallelism < 1) {\n        throw new Error(\"Argon2 parallelism minimum is 1.\");\n      }\n\n      const saltHash = await this.cryptoFunctionService.hash(salt, \"sha256\");\n      key = await this.cryptoFunctionService.argon2(\n        password,\n        saltHash,\n        kdfConfig.iterations,\n        kdfConfig.memory * 1024, // convert to KiB from MiB\n        kdfConfig.parallelism\n      );\n    } else {\n      throw new Error(\"Unknown Kdf.\");\n    }\n    return new SymmetricCryptoKey(key);\n  }\n\n  // --LEGACY METHODS--\n  // We previously used the master key for additional keys, but now we use the user key.\n  // These methods support migrating the old keys to the new ones.\n  // TODO: Remove after 2023.10 release (https://bitwarden.atlassian.net/browse/PM-3475)\n\n  async clearDeprecatedKeys(keySuffix: KeySuffixOptions, userId?: string) {\n    if (keySuffix === KeySuffixOptions.Auto) {\n      await this.stateService.setCryptoMasterKeyAuto(null, { userId: userId });\n    } else if (keySuffix === KeySuffixOptions.Pin) {\n      await this.stateService.setEncryptedPinProtected(null, { userId: userId });\n      await this.stateService.setDecryptedPinProtected(null, { userId: userId });\n    }\n  }\n\n  async migrateAutoKeyIfNeeded(userId?: string) {\n    const oldAutoKey = await this.stateService.getCryptoMasterKeyAuto({ userId: userId });\n    if (oldAutoKey) {\n      // decrypt\n      const masterKey = new SymmetricCryptoKey(Utils.fromB64ToArray(oldAutoKey)) as MasterKey;\n      const encryptedUserKey = await this.stateService.getEncryptedCryptoSymmetricKey({\n        userId: userId,\n      });\n      const userKey = await this.decryptUserKeyWithMasterKey(\n        masterKey,\n        new EncString(encryptedUserKey),\n        userId\n      );\n      // migrate\n      await this.stateService.setUserKeyAutoUnlock(userKey.keyB64, { userId: userId });\n      await this.stateService.setCryptoMasterKeyAuto(null, { userId: userId });\n      // set encrypted user key in case user immediately locks without syncing\n      await this.setMasterKeyEncryptedUserKey(encryptedUserKey);\n    }\n  }\n\n  async decryptAndMigrateOldPinKey(\n    masterPasswordOnRestart: boolean,\n    pin: string,\n    email: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    oldPinKey: EncString\n  ): Promise<UserKey> {\n    // Decrypt\n    const masterKey = await this.decryptMasterKeyWithPin(pin, email, kdf, kdfConfig, oldPinKey);\n    const encUserKey = await this.stateService.getEncryptedCryptoSymmetricKey();\n    const userKey = await this.decryptUserKeyWithMasterKey(masterKey, new EncString(encUserKey));\n    // Migrate\n    const pinKey = await this.makePinKey(pin, email, kdf, kdfConfig);\n    const pinProtectedKey = await this.encryptService.encrypt(userKey.key, pinKey);\n    if (masterPasswordOnRestart) {\n      await this.stateService.setDecryptedPinProtected(null);\n      await this.stateService.setPinKeyEncryptedUserKeyEphemeral(pinProtectedKey);\n    } else {\n      await this.stateService.setEncryptedPinProtected(null);\n      await this.stateService.setPinKeyEncryptedUserKey(pinProtectedKey);\n      // We previously only set the protected pin if MP on Restart was enabled\n      // now we set it regardless\n      const encPin = await this.encryptService.encrypt(pin, userKey);\n      await this.stateService.setProtectedPin(encPin.encryptedString);\n    }\n    // This also clears the old Biometrics key since the new Biometrics key will\n    // be created when the user key is set.\n    await this.stateService.setCryptoMasterKeyBiometric(null);\n    return userKey;\n  }\n\n  // --DEPRECATED METHODS--\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.encrypt\n   */\n  async encrypt(plainValue: string | Uint8Array, key?: SymmetricCryptoKey): Promise<EncString> {\n    key ||= await this.getUserKeyWithLegacySupport();\n    return await this.encryptService.encrypt(plainValue, key);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.encryptToBytes\n   */\n  async encryptToBytes(plainValue: Uint8Array, key?: SymmetricCryptoKey): Promise<EncArrayBuffer> {\n    key ||= await this.getUserKeyWithLegacySupport();\n    return this.encryptService.encryptToBytes(plainValue, key);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.decryptToBytes\n   */\n  async decryptToBytes(encString: EncString, key?: SymmetricCryptoKey): Promise<Uint8Array> {\n    key ||= await this.getUserKeyWithLegacySupport();\n    return this.encryptService.decryptToBytes(encString, key);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.decryptToUtf8\n   */\n  async decryptToUtf8(encString: EncString, key?: SymmetricCryptoKey): Promise<string> {\n    key ||= await this.getUserKeyWithLegacySupport();\n    return await this.encryptService.decryptToUtf8(encString, key);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.decryptToBytes\n   */\n  async decryptFromBytes(encBuffer: EncArrayBuffer, key: SymmetricCryptoKey): Promise<Uint8Array> {\n    if (encBuffer == null) {\n      throw new Error(\"No buffer provided for decryption.\");\n    }\n\n    key ||= await this.getUserKeyWithLegacySupport();\n\n    return this.encryptService.decryptToBytes(encBuffer, key);\n  }\n}\n","import { KeySuffixOptions } from \"@bitwarden/common/enums\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport {\n  SymmetricCryptoKey,\n  UserKey,\n} from \"@bitwarden/common/platform/models/domain/symmetric-crypto-key\";\nimport { CryptoService } from \"@bitwarden/common/platform/services/crypto.service\";\n\nexport class BrowserCryptoService extends CryptoService {\n  override async hasUserKeyStored(keySuffix: KeySuffixOptions, userId?: string): Promise<boolean> {\n    if (keySuffix === KeySuffixOptions.Biometric) {\n      return await this.stateService.getBiometricUnlock({ userId: userId });\n    }\n    return super.hasUserKeyStored(keySuffix, userId);\n  }\n\n  /**\n   * Browser doesn't store biometric keys, so we retrieve them from the desktop and return\n   * if we successfully saved it into memory as the User Key\n   */\n  protected override async getKeyFromStorage(keySuffix: KeySuffixOptions): Promise<UserKey> {\n    if (keySuffix === KeySuffixOptions.Biometric) {\n      await this.platformUtilService.authenticateBiometric();\n      const userKey = await this.stateService.getUserKey();\n      if (userKey) {\n        return new SymmetricCryptoKey(Utils.fromB64ToArray(userKey.keyB64)) as UserKey;\n      }\n    }\n\n    return await super.getKeyFromStorage(keySuffix);\n  }\n}\n","import { CryptoService as AbstractCryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\n\nimport {\n  StateServiceInitOptions,\n  stateServiceFactory,\n} from \"../../../platform/background/service-factories/state-service.factory\";\nimport {\n  LogServiceInitOptions,\n  logServiceFactory,\n} from \"../../background/service-factories/log-service.factory\";\nimport { BrowserCryptoService } from \"../../services/browser-crypto.service\";\n\nimport {\n  cryptoFunctionServiceFactory,\n  CryptoFunctionServiceInitOptions,\n} from \"./crypto-function-service.factory\";\nimport { encryptServiceFactory, EncryptServiceInitOptions } from \"./encrypt-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport {\n  PlatformUtilsServiceInitOptions,\n  platformUtilsServiceFactory,\n} from \"./platform-utils-service.factory\";\n\ntype CryptoServiceFactoryOptions = FactoryOptions;\n\nexport type CryptoServiceInitOptions = CryptoServiceFactoryOptions &\n  CryptoFunctionServiceInitOptions &\n  EncryptServiceInitOptions &\n  PlatformUtilsServiceInitOptions &\n  LogServiceInitOptions &\n  StateServiceInitOptions;\n\nexport function cryptoServiceFactory(\n  cache: { cryptoService?: AbstractCryptoService } & CachedServices,\n  opts: CryptoServiceInitOptions\n): Promise<AbstractCryptoService> {\n  return factory(\n    cache,\n    \"cryptoService\",\n    opts,\n    async () =>\n      new BrowserCryptoService(\n        await cryptoFunctionServiceFactory(cache, opts),\n        await encryptServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts)\n      )\n  );\n}\n","import { TranslationService as TranslationServiceAbstraction } from \"../abstractions/translation.service\";\n\nexport abstract class TranslationService implements TranslationServiceAbstraction {\n  // First locale is the default (English)\n  supportedTranslationLocales: string[] = [\"en\"];\n  defaultLocale = \"en\";\n  abstract translationLocale: string;\n  collator: Intl.Collator;\n  localeNames = new Map<string, string>([\n    [\"af\", \"Afrikaans\"],\n    [\"ar\", \"العربية الفصحى\"],\n    [\"az\", \"Azərbaycanca\"],\n    [\"be\", \"Беларуская\"],\n    [\"bg\", \"български\"],\n    [\"bn\", \"বাংলা\"],\n    [\"bs\", \"bosanski jezik\"],\n    [\"ca\", \"català\"],\n    [\"cs\", \"čeština\"],\n    [\"da\", \"dansk\"],\n    [\"de\", \"Deutsch\"],\n    [\"el\", \"Ελληνικά\"],\n    [\"en\", \"English\"],\n    [\"en-GB\", \"English (British)\"],\n    [\"en-IN\", \"English (India)\"],\n    [\"eo\", \"Esperanto\"],\n    [\"es\", \"español\"],\n    [\"et\", \"eesti\"],\n    [\"eu\", \"euskara\"],\n    [\"fa\", \"فارسی\"],\n    [\"fi\", \"suomi\"],\n    [\"fil\", \"Wikang Filipino\"],\n    [\"fr\", \"français\"],\n    [\"he\", \"עברית\"],\n    [\"hi\", \"हिन्दी\"],\n    [\"hr\", \"hrvatski\"],\n    [\"hu\", \"magyar\"],\n    [\"id\", \"Bahasa Indonesia\"],\n    [\"it\", \"italiano\"],\n    [\"ja\", \"日本語\"],\n    [\"ka\", \"ქართული\"],\n    [\"km\", \"ខ្មែរ, ខេមរភាសា, ភាសាខ្មែរ\"],\n    [\"kn\", \"ಕನ್ನಡ\"],\n    [\"ko\", \"한국어\"],\n    [\"lt\", \"lietuvių kalba\"],\n    [\"lv\", \"Latvietis\"],\n    [\"me\", \"црногорски\"],\n    [\"ml\", \"മലയാളം\"],\n    [\"nb\", \"norsk (bokmål)\"],\n    [\"nl\", \"Nederlands\"],\n    [\"nn\", \"Norsk Nynorsk\"],\n    [\"pl\", \"polski\"],\n    [\"pt-BR\", \"português do Brasil\"],\n    [\"pt-PT\", \"português\"],\n    [\"ro\", \"română\"],\n    [\"ru\", \"русский\"],\n    [\"si\", \"සිංහල\"],\n    [\"sk\", \"slovenčina\"],\n    [\"sl\", \"Slovenski jezik, Slovenščina\"],\n    [\"sr\", \"Српски\"],\n    [\"sv\", \"svenska\"],\n    [\"th\", \"ไทย\"],\n    [\"tr\", \"Türkçe\"],\n    [\"uk\", \"українська\"],\n    [\"vi\", \"Tiếng Việt\"],\n    [\"zh-CN\", \"中文（中国大陆）\"],\n    [\"zh-TW\", \"中文（台灣）\"],\n  ]);\n\n  protected inited: boolean;\n  protected defaultMessages: any = {};\n  protected localeMessages: any = {};\n\n  constructor(\n    protected systemLanguage: string,\n    protected localesDirectory: string,\n    protected getLocalesJson: (formattedLocale: string) => Promise<any>\n  ) {\n    this.systemLanguage = systemLanguage.replace(\"_\", \"-\");\n  }\n\n  async init(locale?: string) {\n    if (this.inited) {\n      throw new Error(\"i18n already initialized.\");\n    }\n    if (this.supportedTranslationLocales == null || this.supportedTranslationLocales.length === 0) {\n      throw new Error(\"supportedTranslationLocales not set.\");\n    }\n\n    this.inited = true;\n    this.translationLocale = locale != null ? locale : this.systemLanguage;\n\n    try {\n      this.collator = new Intl.Collator(this.translationLocale, {\n        numeric: true,\n        sensitivity: \"base\",\n      });\n    } catch {\n      this.collator = null;\n    }\n\n    if (this.supportedTranslationLocales.indexOf(this.translationLocale) === -1) {\n      this.translationLocale = this.translationLocale.slice(0, 2);\n\n      if (this.supportedTranslationLocales.indexOf(this.translationLocale) === -1) {\n        this.translationLocale = this.defaultLocale;\n      }\n    }\n\n    if (this.localesDirectory != null) {\n      await this.loadMessages(this.translationLocale, this.localeMessages);\n      if (this.translationLocale !== this.defaultLocale) {\n        await this.loadMessages(this.defaultLocale, this.defaultMessages);\n      }\n    }\n  }\n\n  t(id: string, p1?: string, p2?: string, p3?: string): string {\n    return this.translate(id, p1, p2, p3);\n  }\n\n  translate(id: string, p1?: string | number, p2?: string | number, p3?: string | number): string {\n    let result: string;\n    // eslint-disable-next-line\n    if (this.localeMessages.hasOwnProperty(id) && this.localeMessages[id]) {\n      result = this.localeMessages[id];\n      // eslint-disable-next-line\n    } else if (this.defaultMessages.hasOwnProperty(id) && this.defaultMessages[id]) {\n      result = this.defaultMessages[id];\n    } else {\n      result = \"\";\n    }\n\n    if (result !== \"\") {\n      if (p1 != null) {\n        result = result.split(\"__$1__\").join(p1.toString());\n      }\n      if (p2 != null) {\n        result = result.split(\"__$2__\").join(p2.toString());\n      }\n      if (p3 != null) {\n        result = result.split(\"__$3__\").join(p3.toString());\n      }\n    }\n\n    return result;\n  }\n\n  protected async loadMessages(locale: string, messagesObj: any): Promise<any> {\n    const formattedLocale = locale.replace(\"-\", \"_\");\n    const locales = await this.getLocalesJson(formattedLocale);\n    for (const prop in locales) {\n      // eslint-disable-next-line\n      if (!locales.hasOwnProperty(prop)) {\n        continue;\n      }\n      messagesObj[prop] = locales[prop].message;\n\n      if (locales[prop].placeholders) {\n        for (const placeProp in locales[prop].placeholders) {\n          if (\n            !locales[prop].placeholders.hasOwnProperty(placeProp) || // eslint-disable-line\n            !locales[prop].placeholders[placeProp].content\n          ) {\n            continue;\n          }\n\n          const replaceToken = \"\\\\$\" + placeProp.toUpperCase() + \"\\\\$\";\n          let replaceContent = locales[prop].placeholders[placeProp].content;\n          if (replaceContent === \"$1\" || replaceContent === \"$2\" || replaceContent === \"$3\") {\n            replaceContent = \"__$\" + replaceContent + \"__\";\n          }\n          messagesObj[prop] = messagesObj[prop].replace(\n            new RegExp(replaceToken, \"g\"),\n            replaceContent\n          );\n        }\n      }\n    }\n  }\n}\n","import { Observable, ReplaySubject } from \"rxjs\";\n\nimport { I18nService as I18nServiceAbstraction } from \"../abstractions/i18n.service\";\n\nimport { TranslationService } from \"./translation.service\";\n\nexport class I18nService extends TranslationService implements I18nServiceAbstraction {\n  protected _locale = new ReplaySubject<string>(1);\n  private _translationLocale: string;\n  locale$: Observable<string> = this._locale.asObservable();\n\n  constructor(\n    protected systemLanguage: string,\n    protected localesDirectory: string,\n    protected getLocalesJson: (formattedLocale: string) => Promise<any>\n  ) {\n    super(systemLanguage, localesDirectory, getLocalesJson);\n  }\n\n  get translationLocale(): string {\n    return this._translationLocale;\n  }\n\n  set translationLocale(locale: string) {\n    this._translationLocale = locale;\n    this._locale.next(locale);\n  }\n}\n","import { I18nService as BaseI18nService } from \"@bitwarden/common/platform/services/i18n.service\";\n\nexport default class I18nService extends BaseI18nService {\n  constructor(systemLanguage: string) {\n    super(systemLanguage, null, async (formattedLocale: string) => {\n      // Deprecated\n      const file = await fetch(this.localesDirectory + formattedLocale + \"/messages.json\");\n      return await file.json();\n    });\n\n    // Please leave 'en' where it is, as it's our fallback language in case no translation can be found\n    this.supportedTranslationLocales = [\n      \"en\",\n      \"ar\",\n      \"az\",\n      \"be\",\n      \"bg\",\n      \"bn\",\n      \"bs\",\n      \"ca\",\n      \"cs\",\n      \"da\",\n      \"de\",\n      \"el\",\n      \"en-GB\",\n      \"en-IN\",\n      \"es\",\n      \"et\",\n      \"eu\",\n      \"fa\",\n      \"fi\",\n      \"fil\",\n      \"fr\",\n      \"he\",\n      \"hi\",\n      \"hr\",\n      \"hu\",\n      \"id\",\n      \"it\",\n      \"ja\",\n      \"ka\",\n      \"km\",\n      \"kn\",\n      \"ko\",\n      \"lt\",\n      \"lv\",\n      \"ml\",\n      \"nb\",\n      \"nl\",\n      \"nn\",\n      \"pl\",\n      \"pt-BR\",\n      \"pt-PT\",\n      \"ro\",\n      \"ru\",\n      \"si\",\n      \"sk\",\n      \"sl\",\n      \"sr\",\n      \"sv\",\n      \"th\",\n      \"tr\",\n      \"uk\",\n      \"vi\",\n      \"zh-CN\",\n      \"zh-TW\",\n    ];\n  }\n\n  t(id: string, p1?: string, p2?: string, p3?: string): string {\n    return this.translate(id, p1, p2, p3);\n  }\n\n  translate(id: string, p1?: string, p2?: string, p3?: string): string {\n    if (this.localesDirectory == null) {\n      const placeholders: string[] = [];\n      if (p1 != null) {\n        placeholders.push(p1);\n      }\n      if (p2 != null) {\n        placeholders.push(p2);\n      }\n      if (p3 != null) {\n        placeholders.push(p3);\n      }\n\n      if (placeholders.length) {\n        return chrome.i18n.getMessage(id, placeholders);\n      } else {\n        return chrome.i18n.getMessage(id);\n      }\n    }\n\n    return super.translate(id, p1, p2, p3);\n  }\n}\n","import { I18nService as AbstractI18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { I18nService as BaseI18nService } from \"@bitwarden/common/platform/services/i18n.service\";\n\nimport I18nService from \"../../services/i18n.service\";\n\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\n\ntype I18nServiceFactoryOptions = FactoryOptions & {\n  i18nServiceOptions: {\n    systemLanguage: string;\n  };\n};\n\nexport type I18nServiceInitOptions = I18nServiceFactoryOptions;\n\nexport async function i18nServiceFactory(\n  cache: { i18nService?: AbstractI18nService } & CachedServices,\n  opts: I18nServiceInitOptions\n): Promise<AbstractI18nService> {\n  const service = await factory(\n    cache,\n    \"i18nService\",\n    opts,\n    () => new I18nService(opts.i18nServiceOptions.systemLanguage)\n  );\n  if (!(service as BaseI18nService as any).inited) {\n    await (service as BaseI18nService).init();\n  }\n  return service;\n}\n","import { DeviceTrustCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/device-trust-crypto.service.abstraction\";\nimport { DeviceTrustCryptoService } from \"@bitwarden/common/auth/services/device-trust-crypto.service.implementation\";\n\nimport {\n  DevicesApiServiceInitOptions,\n  devicesApiServiceFactory,\n} from \"../../../background/service-factories/devices-api-service.factory\";\nimport {\n  AppIdServiceInitOptions,\n  appIdServiceFactory,\n} from \"../../../platform/background/service-factories/app-id-service.factory\";\nimport {\n  CryptoFunctionServiceInitOptions,\n  cryptoFunctionServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-function-service.factory\";\nimport {\n  CryptoServiceInitOptions,\n  cryptoServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-service.factory\";\nimport {\n  EncryptServiceInitOptions,\n  encryptServiceFactory,\n} from \"../../../platform/background/service-factories/encrypt-service.factory\";\nimport {\n  CachedServices,\n  FactoryOptions,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  I18nServiceInitOptions,\n  i18nServiceFactory,\n} from \"../../../platform/background/service-factories/i18n-service.factory\";\nimport {\n  PlatformUtilsServiceInitOptions,\n  platformUtilsServiceFactory,\n} from \"../../../platform/background/service-factories/platform-utils-service.factory\";\nimport {\n  StateServiceInitOptions,\n  stateServiceFactory,\n} from \"../../../platform/background/service-factories/state-service.factory\";\n\ntype DeviceTrustCryptoServiceFactoryOptions = FactoryOptions;\n\nexport type DeviceTrustCryptoServiceInitOptions = DeviceTrustCryptoServiceFactoryOptions &\n  CryptoFunctionServiceInitOptions &\n  CryptoServiceInitOptions &\n  EncryptServiceInitOptions &\n  StateServiceInitOptions &\n  AppIdServiceInitOptions &\n  DevicesApiServiceInitOptions &\n  I18nServiceInitOptions &\n  PlatformUtilsServiceInitOptions;\n\nexport function deviceTrustCryptoServiceFactory(\n  cache: { deviceTrustCryptoService?: DeviceTrustCryptoServiceAbstraction } & CachedServices,\n  opts: DeviceTrustCryptoServiceInitOptions\n): Promise<DeviceTrustCryptoServiceAbstraction> {\n  return factory(\n    cache,\n    \"deviceTrustCryptoService\",\n    opts,\n    async () =>\n      new DeviceTrustCryptoService(\n        await cryptoFunctionServiceFactory(cache, opts),\n        await cryptoServiceFactory(cache, opts),\n        await encryptServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await appIdServiceFactory(cache, opts),\n        await devicesApiServiceFactory(cache, opts),\n        await i18nServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts)\n      )\n  );\n}\n","import { DevicesApiServiceAbstraction } from \"@bitwarden/common/auth/abstractions/devices-api.service.abstraction\";\nimport { DevicesApiServiceImplementation } from \"@bitwarden/common/auth/services/devices-api.service.implementation\";\n\nimport {\n  ApiServiceInitOptions,\n  apiServiceFactory,\n} from \"../../platform/background/service-factories/api-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../platform/background/service-factories/factory-options\";\n\ntype DevicesApiServiceFactoryOptions = FactoryOptions;\n\nexport type DevicesApiServiceInitOptions = DevicesApiServiceFactoryOptions & ApiServiceInitOptions;\n\nexport function devicesApiServiceFactory(\n  cache: { devicesApiService?: DevicesApiServiceAbstraction } & CachedServices,\n  opts: DevicesApiServiceInitOptions\n): Promise<DevicesApiServiceAbstraction> {\n  return factory(\n    cache,\n    \"devicesApiService\",\n    opts,\n    async () => new DevicesApiServiceImplementation(await apiServiceFactory(cache, opts))\n  );\n}\n","import { AuthService as AbstractAuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthService } from \"@bitwarden/common/auth/services/auth.service\";\n\nimport {\n  policyServiceFactory,\n  PolicyServiceInitOptions,\n} from \"../../../admin-console/background/service-factories/policy-service.factory\";\nimport {\n  apiServiceFactory,\n  ApiServiceInitOptions,\n} from \"../../../platform/background/service-factories/api-service.factory\";\nimport { appIdServiceFactory } from \"../../../platform/background/service-factories/app-id-service.factory\";\nimport {\n  CryptoServiceInitOptions,\n  cryptoServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-service.factory\";\nimport {\n  EncryptServiceInitOptions,\n  encryptServiceFactory,\n} from \"../../../platform/background/service-factories/encrypt-service.factory\";\nimport {\n  environmentServiceFactory,\n  EnvironmentServiceInitOptions,\n} from \"../../../platform/background/service-factories/environment-service.factory\";\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  i18nServiceFactory,\n  I18nServiceInitOptions,\n} from \"../../../platform/background/service-factories/i18n-service.factory\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../../platform/background/service-factories/log-service.factory\";\nimport {\n  messagingServiceFactory,\n  MessagingServiceInitOptions,\n} from \"../../../platform/background/service-factories/messaging-service.factory\";\nimport {\n  platformUtilsServiceFactory,\n  PlatformUtilsServiceInitOptions,\n} from \"../../../platform/background/service-factories/platform-utils-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../platform/background/service-factories/state-service.factory\";\nimport {\n  passwordStrengthServiceFactory,\n  PasswordStrengthServiceInitOptions,\n} from \"../../../tools/background/service_factories/password-strength-service.factory\";\n\nimport {\n  authRequestCryptoServiceFactory,\n  AuthRequestCryptoServiceInitOptions,\n} from \"./auth-request-crypto-service.factory\";\nimport {\n  deviceTrustCryptoServiceFactory,\n  DeviceTrustCryptoServiceInitOptions,\n} from \"./device-trust-crypto-service.factory\";\nimport {\n  keyConnectorServiceFactory,\n  KeyConnectorServiceInitOptions,\n} from \"./key-connector-service.factory\";\nimport { tokenServiceFactory, TokenServiceInitOptions } from \"./token-service.factory\";\nimport { twoFactorServiceFactory, TwoFactorServiceInitOptions } from \"./two-factor-service.factory\";\n\ntype AuthServiceFactoyOptions = FactoryOptions;\n\nexport type AuthServiceInitOptions = AuthServiceFactoyOptions &\n  CryptoServiceInitOptions &\n  ApiServiceInitOptions &\n  TokenServiceInitOptions &\n  PlatformUtilsServiceInitOptions &\n  MessagingServiceInitOptions &\n  LogServiceInitOptions &\n  KeyConnectorServiceInitOptions &\n  EnvironmentServiceInitOptions &\n  StateServiceInitOptions &\n  TwoFactorServiceInitOptions &\n  I18nServiceInitOptions &\n  EncryptServiceInitOptions &\n  PolicyServiceInitOptions &\n  PasswordStrengthServiceInitOptions &\n  DeviceTrustCryptoServiceInitOptions &\n  AuthRequestCryptoServiceInitOptions;\n\nexport function authServiceFactory(\n  cache: { authService?: AbstractAuthService } & CachedServices,\n  opts: AuthServiceInitOptions\n): Promise<AbstractAuthService> {\n  return factory(\n    cache,\n    \"authService\",\n    opts,\n    async () =>\n      new AuthService(\n        await cryptoServiceFactory(cache, opts),\n        await apiServiceFactory(cache, opts),\n        await tokenServiceFactory(cache, opts),\n        await appIdServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts),\n        await messagingServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await keyConnectorServiceFactory(cache, opts),\n        await environmentServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await twoFactorServiceFactory(cache, opts),\n        await i18nServiceFactory(cache, opts),\n        await encryptServiceFactory(cache, opts),\n        await passwordStrengthServiceFactory(cache, opts),\n        await policyServiceFactory(cache, opts),\n        await deviceTrustCryptoServiceFactory(cache, opts),\n        await authRequestCryptoServiceFactory(cache, opts)\n      )\n  );\n}\n","import { KeyConnectorService as AbstractKeyConnectorService } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/services/key-connector.service\";\n\nimport {\n  OrganizationServiceInitOptions,\n  organizationServiceFactory,\n} from \"../../../admin-console/background/service-factories/organization-service.factory\";\nimport {\n  apiServiceFactory,\n  ApiServiceInitOptions,\n} from \"../../../platform/background/service-factories/api-service.factory\";\nimport {\n  CryptoFunctionServiceInitOptions,\n  cryptoFunctionServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-function-service.factory\";\nimport {\n  CryptoServiceInitOptions,\n  cryptoServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../../platform/background/service-factories/log-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../platform/background/service-factories/state-service.factory\";\n\nimport { TokenServiceInitOptions, tokenServiceFactory } from \"./token-service.factory\";\n\ntype KeyConnectorServiceFactoryOptions = FactoryOptions & {\n  keyConnectorServiceOptions: {\n    logoutCallback: (expired: boolean, userId?: string) => Promise<void>;\n  };\n};\n\nexport type KeyConnectorServiceInitOptions = KeyConnectorServiceFactoryOptions &\n  StateServiceInitOptions &\n  CryptoServiceInitOptions &\n  ApiServiceInitOptions &\n  TokenServiceInitOptions &\n  LogServiceInitOptions &\n  OrganizationServiceInitOptions &\n  CryptoFunctionServiceInitOptions;\n\nexport function keyConnectorServiceFactory(\n  cache: { keyConnectorService?: AbstractKeyConnectorService } & CachedServices,\n  opts: KeyConnectorServiceInitOptions\n): Promise<AbstractKeyConnectorService> {\n  return factory(\n    cache,\n    \"keyConnectorService\",\n    opts,\n    async () =>\n      new KeyConnectorService(\n        await stateServiceFactory(cache, opts),\n        await cryptoServiceFactory(cache, opts),\n        await apiServiceFactory(cache, opts),\n        await tokenServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await organizationServiceFactory(cache, opts),\n        await cryptoFunctionServiceFactory(cache, opts),\n        opts.keyConnectorServiceOptions.logoutCallback\n      )\n  );\n}\n","import { TwoFactorService as AbstractTwoFactorService } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/services/two-factor.service\";\n\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  I18nServiceInitOptions,\n  i18nServiceFactory,\n} from \"../../../platform/background/service-factories/i18n-service.factory\";\nimport {\n  PlatformUtilsServiceInitOptions,\n  platformUtilsServiceFactory,\n} from \"../../../platform/background/service-factories/platform-utils-service.factory\";\n\ntype TwoFactorServiceFactoryOptions = FactoryOptions;\n\nexport type TwoFactorServiceInitOptions = TwoFactorServiceFactoryOptions &\n  I18nServiceInitOptions &\n  PlatformUtilsServiceInitOptions;\n\nexport async function twoFactorServiceFactory(\n  cache: { twoFactorService?: AbstractTwoFactorService } & CachedServices,\n  opts: TwoFactorServiceInitOptions\n): Promise<AbstractTwoFactorService> {\n  const service = await factory(\n    cache,\n    \"twoFactorService\",\n    opts,\n    async () =>\n      new TwoFactorService(\n        await i18nServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts)\n      )\n  );\n  service.init();\n  return service;\n}\n","import {\n  PasswordStrengthService,\n  PasswordStrengthServiceAbstraction,\n} from \"@bitwarden/common/tools/password-strength\";\n\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../platform/background/service-factories/factory-options\";\n\ntype PasswordStrengthServiceFactoryOptions = FactoryOptions;\n\nexport type PasswordStrengthServiceInitOptions = PasswordStrengthServiceFactoryOptions;\n\nexport function passwordStrengthServiceFactory(\n  cache: {\n    passwordStrengthService?: PasswordStrengthServiceAbstraction;\n  } & CachedServices,\n  opts: PasswordStrengthServiceInitOptions\n): Promise<PasswordStrengthServiceAbstraction> {\n  return factory(cache, \"passwordStrengthService\", opts, async () => new PasswordStrengthService());\n}\n","import { AuthRequestCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/auth-request-crypto.service.abstraction\";\nimport { AuthRequestCryptoServiceImplementation } from \"@bitwarden/common/auth/services/auth-request-crypto.service.implementation\";\n\nimport {\n  CryptoServiceInitOptions,\n  cryptoServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-service.factory\";\nimport {\n  CachedServices,\n  FactoryOptions,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\n\ntype AuthRequestCryptoServiceFactoryOptions = FactoryOptions;\n\nexport type AuthRequestCryptoServiceInitOptions = AuthRequestCryptoServiceFactoryOptions &\n  CryptoServiceInitOptions;\n\nexport function authRequestCryptoServiceFactory(\n  cache: { authRequestCryptoService?: AuthRequestCryptoServiceAbstraction } & CachedServices,\n  opts: AuthRequestCryptoServiceInitOptions\n): Promise<AuthRequestCryptoServiceAbstraction> {\n  return factory(\n    cache,\n    \"authRequestCryptoService\",\n    opts,\n    async () => new AuthRequestCryptoServiceImplementation(await cryptoServiceFactory(cache, opts))\n  );\n}\n","import { UserVerificationService as AbstractUserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/services/user-verification/user-verification.service\";\n\nimport {\n  CryptoServiceInitOptions,\n  cryptoServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  I18nServiceInitOptions,\n  i18nServiceFactory,\n} from \"../../../platform/background/service-factories/i18n-service.factory\";\nimport {\n  StateServiceInitOptions,\n  stateServiceFactory,\n} from \"../../../platform/background/service-factories/state-service.factory\";\n\nimport {\n  UserVerificationApiServiceInitOptions,\n  userVerificationApiServiceFactory,\n} from \"./user-verification-api-service.factory\";\n\ntype UserVerificationServiceFactoryOptions = FactoryOptions;\n\nexport type UserVerificationServiceInitOptions = UserVerificationServiceFactoryOptions &\n  StateServiceInitOptions &\n  CryptoServiceInitOptions &\n  I18nServiceInitOptions &\n  UserVerificationApiServiceInitOptions;\n\nexport function userVerificationServiceFactory(\n  cache: { userVerificationService?: AbstractUserVerificationService } & CachedServices,\n  opts: UserVerificationServiceInitOptions\n): Promise<AbstractUserVerificationService> {\n  return factory(\n    cache,\n    \"userVerificationService\",\n    opts,\n    async () =>\n      new UserVerificationService(\n        await stateServiceFactory(cache, opts),\n        await cryptoServiceFactory(cache, opts),\n        await i18nServiceFactory(cache, opts),\n        await userVerificationApiServiceFactory(cache, opts)\n      )\n  );\n}\n","import { UserVerificationApiServiceAbstraction } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification-api.service.abstraction\";\nimport { UserVerificationApiService } from \"@bitwarden/common/auth/services/user-verification/user-verification-api.service\";\n\nimport {\n  ApiServiceInitOptions,\n  apiServiceFactory,\n} from \"../../../platform/background/service-factories/api-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\n\ntype UserVerificationApiServiceFactoryOptions = FactoryOptions;\n\nexport type UserVerificationApiServiceInitOptions = UserVerificationApiServiceFactoryOptions &\n  ApiServiceInitOptions;\n\nexport function userVerificationApiServiceFactory(\n  cache: { userVerificationApiService?: UserVerificationApiServiceAbstraction } & CachedServices,\n  opts: UserVerificationApiServiceInitOptions\n): Promise<UserVerificationApiServiceAbstraction> {\n  return factory(\n    cache,\n    \"userVerificationApiService\",\n    opts,\n    async () => new UserVerificationApiService(await apiServiceFactory(cache, opts))\n  );\n}\n","import { CipherFileUploadService as CipherFileUploadServiceAbstraction } from \"@bitwarden/common/vault/abstractions/file-upload/cipher-file-upload.service\";\nimport { CipherFileUploadService } from \"@bitwarden/common/vault/services/file-upload/cipher-file-upload.service\";\n\nimport {\n  ApiServiceInitOptions,\n  apiServiceFactory,\n} from \"../../platform/background/service-factories/api-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../platform/background/service-factories/factory-options\";\nimport {\n  FileUploadServiceInitOptions,\n  fileUploadServiceFactory,\n} from \"../../platform/background/service-factories/file-upload-service.factory\";\n\ntype CipherFileUploadServiceFactoyOptions = FactoryOptions;\n\nexport type CipherFileUploadServiceInitOptions = CipherFileUploadServiceFactoyOptions &\n  ApiServiceInitOptions &\n  FileUploadServiceInitOptions;\n\nexport function cipherFileUploadServiceFactory(\n  cache: { cipherFileUploadService?: CipherFileUploadServiceAbstraction } & CachedServices,\n  opts: CipherFileUploadServiceInitOptions\n): Promise<CipherFileUploadServiceAbstraction> {\n  return factory(\n    cache,\n    \"cipherFileUploadService\",\n    opts,\n    async () =>\n      new CipherFileUploadService(\n        await apiServiceFactory(cache, opts),\n        await fileUploadServiceFactory(cache, opts)\n      )\n  );\n}\n","import { FileUploadService as FileUploadServiceAbstraction } from \"@bitwarden/common/platform/abstractions/file-upload/file-upload.service\";\nimport { FileUploadService } from \"@bitwarden/common/platform/services/file-upload/file-upload.service\";\n\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../background/service-factories/factory-options\";\n\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\n\ntype FileUploadServiceFactoryOptions = FactoryOptions;\n\nexport type FileUploadServiceInitOptions = FileUploadServiceFactoryOptions & LogServiceInitOptions;\n\nexport function fileUploadServiceFactory(\n  cache: { fileUploadService?: FileUploadServiceAbstraction } & CachedServices,\n  opts: FileUploadServiceInitOptions\n): Promise<FileUploadServiceAbstraction> {\n  return factory(\n    cache,\n    \"fileUploadService\",\n    opts,\n    async () => new FileUploadService(await logServiceFactory(cache, opts))\n  );\n}\n","import { BehaviorSubject, concatMap } from \"rxjs\";\n\nimport { SettingsService as SettingsServiceAbstraction } from \"../abstractions/settings.service\";\nimport { StateService } from \"../platform/abstractions/state.service\";\nimport { Utils } from \"../platform/misc/utils\";\nimport { AccountSettingsSettings } from \"../platform/models/domain/account\";\n\nexport class SettingsService implements SettingsServiceAbstraction {\n  protected _settings: BehaviorSubject<AccountSettingsSettings> = new BehaviorSubject({});\n  protected _disableFavicon = new BehaviorSubject<boolean>(null);\n\n  settings$ = this._settings.asObservable();\n  disableFavicon$ = this._disableFavicon.asObservable();\n\n  constructor(private stateService: StateService) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (Utils.global.bitwardenContainerService == null) {\n            return;\n          }\n\n          if (!unlocked) {\n            this._settings.next({});\n            return;\n          }\n\n          const data = await this.stateService.getSettings();\n          const disableFavicon = await this.stateService.getDisableFavicon();\n\n          this._settings.next(data);\n          this._disableFavicon.next(disableFavicon);\n        })\n      )\n      .subscribe();\n  }\n\n  async setEquivalentDomains(equivalentDomains: string[][]): Promise<void> {\n    const settings = this._settings.getValue() ?? {};\n\n    settings.equivalentDomains = equivalentDomains;\n\n    this._settings.next(settings);\n    await this.stateService.setSettings(settings);\n  }\n\n  getEquivalentDomains(url: string): Set<string> {\n    const domain = Utils.getDomain(url);\n    if (domain == null) {\n      return new Set();\n    }\n\n    const settings = this._settings.getValue();\n\n    let result: string[] = [];\n\n    if (settings?.equivalentDomains != null) {\n      settings.equivalentDomains\n        .filter((ed) => ed.length > 0 && ed.includes(domain))\n        .forEach((ed) => {\n          result = result.concat(ed);\n        });\n    }\n\n    return new Set(result);\n  }\n\n  async setDisableFavicon(value: boolean) {\n    this._disableFavicon.next(value);\n    await this.stateService.setDisableFavicon(value);\n  }\n\n  getDisableFavicon(): boolean {\n    return this._disableFavicon.getValue();\n  }\n\n  async clear(userId?: string): Promise<void> {\n    if (userId == null || userId == (await this.stateService.getUserId())) {\n      this._settings.next({});\n    }\n\n    await this.stateService.setSettings(null, { userId: userId });\n  }\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { AccountSettingsSettings } from \"@bitwarden/common/platform/models/domain/account\";\nimport { SettingsService } from \"@bitwarden/common/services/settings.service\";\n\nimport { browserSession, sessionSync } from \"../platform/decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserSettingsService extends SettingsService {\n  @sessionSync({ initializer: (obj: string[][]) => obj })\n  protected _settings: BehaviorSubject<AccountSettingsSettings>;\n\n  @sessionSync({ initializer: (b: boolean) => b })\n  protected _disableFavicon: BehaviorSubject<boolean>;\n}\n","import { SettingsService as AbstractSettingsService } from \"@bitwarden/common/abstractions/settings.service\";\n\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../platform/background/service-factories/factory-options\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../platform/background/service-factories/state-service.factory\";\nimport { BrowserSettingsService } from \"../../services/browser-settings.service\";\n\ntype SettingsServiceFactoryOptions = FactoryOptions;\n\nexport type SettingsServiceInitOptions = SettingsServiceFactoryOptions & StateServiceInitOptions;\n\nexport function settingsServiceFactory(\n  cache: { settingsService?: AbstractSettingsService } & CachedServices,\n  opts: SettingsServiceInitOptions\n): Promise<AbstractSettingsService> {\n  return factory(\n    cache,\n    \"settingsService\",\n    opts,\n    async () => new BrowserSettingsService(await stateServiceFactory(cache, opts))\n  );\n}\n","import { CipherService as AbstractCipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherService } from \"@bitwarden/common/vault/services/cipher.service\";\n\nimport {\n  CipherFileUploadServiceInitOptions,\n  cipherFileUploadServiceFactory,\n} from \"../../../background/service-factories/cipher-file-upload-service.factory\";\nimport {\n  searchServiceFactory,\n  SearchServiceInitOptions,\n} from \"../../../background/service-factories/search-service.factory\";\nimport {\n  SettingsServiceInitOptions,\n  settingsServiceFactory,\n} from \"../../../background/service-factories/settings-service.factory\";\nimport {\n  apiServiceFactory,\n  ApiServiceInitOptions,\n} from \"../../../platform/background/service-factories/api-service.factory\";\nimport {\n  CryptoServiceInitOptions,\n  cryptoServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-service.factory\";\nimport {\n  EncryptServiceInitOptions,\n  encryptServiceFactory,\n} from \"../../../platform/background/service-factories/encrypt-service.factory\";\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  i18nServiceFactory,\n  I18nServiceInitOptions,\n} from \"../../../platform/background/service-factories/i18n-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../platform/background/service-factories/state-service.factory\";\n\ntype CipherServiceFactoryOptions = FactoryOptions;\n\nexport type CipherServiceInitOptions = CipherServiceFactoryOptions &\n  CryptoServiceInitOptions &\n  SettingsServiceInitOptions &\n  ApiServiceInitOptions &\n  CipherFileUploadServiceInitOptions &\n  I18nServiceInitOptions &\n  SearchServiceInitOptions &\n  StateServiceInitOptions &\n  EncryptServiceInitOptions;\n\nexport function cipherServiceFactory(\n  cache: { cipherService?: AbstractCipherService } & CachedServices,\n  opts: CipherServiceInitOptions\n): Promise<AbstractCipherService> {\n  return factory(\n    cache,\n    \"cipherService\",\n    opts,\n    async () =>\n      new CipherService(\n        await cryptoServiceFactory(cache, opts),\n        await settingsServiceFactory(cache, opts),\n        await apiServiceFactory(cache, opts),\n        await i18nServiceFactory(cache, opts),\n        await searchServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await encryptServiceFactory(cache, opts),\n        await cipherFileUploadServiceFactory(cache, opts)\n      )\n  );\n}\n","import { SearchService as AbstractSearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\n\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../platform/background/service-factories/factory-options\";\nimport {\n  i18nServiceFactory,\n  I18nServiceInitOptions,\n} from \"../../platform/background/service-factories/i18n-service.factory\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../platform/background/service-factories/log-service.factory\";\n\ntype SearchServiceFactoryOptions = FactoryOptions;\n\nexport type SearchServiceInitOptions = SearchServiceFactoryOptions &\n  LogServiceInitOptions &\n  I18nServiceInitOptions;\n\nexport function searchServiceFactory(\n  cache: { searchService?: AbstractSearchService } & CachedServices,\n  opts: SearchServiceInitOptions\n): Promise<AbstractSearchService> {\n  return factory(\n    cache,\n    \"searchService\",\n    opts,\n    async () =>\n      new SearchService(await logServiceFactory(cache, opts), await i18nServiceFactory(cache, opts))\n  );\n}\n","import { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport { Account } from \"../../models/account\";\nimport { CachedServices } from \"../../platform/background/service-factories/factory-options\";\nimport {\n  i18nServiceFactory,\n  I18nServiceInitOptions,\n} from \"../../platform/background/service-factories/i18n-service.factory\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../platform/background/service-factories/log-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../platform/background/service-factories/state-service.factory\";\nimport { BrowserStateService } from \"../../platform/services/abstractions/browser-state.service\";\n\nexport const ROOT_ID = \"root\";\n\nexport const AUTOFILL_ID = \"autofill\";\nexport const COPY_USERNAME_ID = \"copy-username\";\nexport const COPY_PASSWORD_ID = \"copy-password\";\nexport const COPY_VERIFICATIONCODE_ID = \"copy-totp\";\nexport const COPY_IDENTIFIER_ID = \"copy-identifier\";\n\nconst SEPARATOR_ID = \"separator\";\nexport const GENERATE_PASSWORD_ID = \"generate-password\";\n\nexport const NOOP_COMMAND_SUFFIX = \"noop\";\n\nexport class MainContextMenuHandler {\n  //\n  private initRunning = false;\n\n  create: (options: chrome.contextMenus.CreateProperties) => Promise<void>;\n\n  constructor(\n    private stateService: BrowserStateService,\n    private i18nService: I18nService,\n    private logService: LogService\n  ) {\n    if (chrome.contextMenus) {\n      this.create = (options) => {\n        return new Promise<void>((resolve, reject) => {\n          chrome.contextMenus.create(options, () => {\n            if (chrome.runtime.lastError) {\n              reject(chrome.runtime.lastError);\n              return;\n            }\n            resolve();\n          });\n        });\n      };\n    } else {\n      this.create = (_options) => Promise.resolve();\n    }\n  }\n\n  static async mv3Create(cachedServices: CachedServices) {\n    const stateFactory = new StateFactory(GlobalState, Account);\n    const serviceOptions: StateServiceInitOptions & I18nServiceInitOptions & LogServiceInitOptions =\n      {\n        cryptoFunctionServiceOptions: {\n          win: self,\n        },\n        encryptServiceOptions: {\n          logMacFailures: false,\n        },\n        i18nServiceOptions: {\n          systemLanguage: chrome.i18n.getUILanguage(),\n        },\n        logServiceOptions: {\n          isDev: false,\n        },\n        stateMigrationServiceOptions: {\n          stateFactory: stateFactory,\n        },\n        stateServiceOptions: {\n          stateFactory: stateFactory,\n        },\n      };\n\n    return new MainContextMenuHandler(\n      await stateServiceFactory(cachedServices, serviceOptions),\n      await i18nServiceFactory(cachedServices, serviceOptions),\n      await logServiceFactory(cachedServices, serviceOptions)\n    );\n  }\n\n  /**\n   *\n   * @returns a boolean showing whether or not items were created\n   */\n  async init(): Promise<boolean> {\n    const menuDisabled = await this.stateService.getDisableContextMenuItem();\n    if (menuDisabled) {\n      await MainContextMenuHandler.removeAll();\n      return false;\n    }\n\n    if (this.initRunning) {\n      return true;\n    }\n    this.initRunning = true;\n\n    try {\n      const create = async (options: Omit<chrome.contextMenus.CreateProperties, \"contexts\">) => {\n        await this.create({ ...options, contexts: [\"all\"] });\n      };\n\n      await create({\n        id: ROOT_ID,\n        title: \"Bitwarden\",\n      });\n\n      await create({\n        id: AUTOFILL_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"autoFill\"),\n      });\n\n      await create({\n        id: COPY_USERNAME_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"copyUsername\"),\n      });\n\n      await create({\n        id: COPY_PASSWORD_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"copyPassword\"),\n      });\n\n      if (await this.stateService.getCanAccessPremium()) {\n        await create({\n          id: COPY_VERIFICATIONCODE_ID,\n          parentId: ROOT_ID,\n          title: this.i18nService.t(\"copyVerificationCode\"),\n        });\n      }\n\n      await create({\n        id: SEPARATOR_ID,\n        type: \"separator\",\n        parentId: ROOT_ID,\n      });\n\n      await create({\n        id: GENERATE_PASSWORD_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"generatePasswordCopied\"),\n      });\n\n      await create({\n        id: COPY_IDENTIFIER_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"copyElementIdentifier\"),\n      });\n    } catch (error) {\n      this.logService.warning(error.message);\n    } finally {\n      this.initRunning = false;\n    }\n    return true;\n  }\n\n  static async removeAll() {\n    return new Promise<void>((resolve, reject) => {\n      chrome.contextMenus.removeAll(() => {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n\n        resolve();\n      });\n    });\n  }\n\n  static remove(menuItemId: string) {\n    return new Promise<void>((resolve, reject) => {\n      chrome.contextMenus.remove(menuItemId, () => {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n\n        resolve();\n      });\n    });\n  }\n\n  async loadOptions(title: string, id: string, url: string, cipher?: CipherView | undefined) {\n    if (cipher != null && cipher.type !== CipherType.Login) {\n      return;\n    }\n\n    try {\n      const sanitizedTitle = MainContextMenuHandler.sanitizeContextMenuTitle(title);\n\n      const createChildItem = async (parent: string) => {\n        const menuItemId = `${parent}_${id}`;\n        return await this.create({\n          type: \"normal\",\n          id: menuItemId,\n          parentId: parent,\n          title: sanitizedTitle,\n          contexts: [\"all\"],\n        });\n      };\n\n      if (cipher == null || !Utils.isNullOrEmpty(cipher.login.password)) {\n        await createChildItem(AUTOFILL_ID);\n        if (cipher?.viewPassword ?? true) {\n          await createChildItem(COPY_PASSWORD_ID);\n        }\n      }\n\n      if (cipher == null || !Utils.isNullOrEmpty(cipher.login.username)) {\n        await createChildItem(COPY_USERNAME_ID);\n      }\n\n      const canAccessPremium = await this.stateService.getCanAccessPremium();\n      if (canAccessPremium && (cipher == null || !Utils.isNullOrEmpty(cipher.login.totp))) {\n        await createChildItem(COPY_VERIFICATIONCODE_ID);\n      }\n    } catch (error) {\n      this.logService.warning(error.message);\n    }\n  }\n\n  static sanitizeContextMenuTitle(title: string): string {\n    return title.replace(/&/g, \"&&\");\n  }\n\n  async noAccess() {\n    if (await this.init()) {\n      const authed = await this.stateService.getIsAuthenticated();\n      await this.loadOptions(\n        this.i18nService.t(authed ? \"unlockVaultMenu\" : \"loginToVaultMenu\"),\n        NOOP_COMMAND_SUFFIX,\n        \"<all_urls>\"\n      );\n    }\n  }\n\n  async noLogins(url: string) {\n    await this.loadOptions(this.i18nService.t(\"noMatchingLogins\"), NOOP_COMMAND_SUFFIX, url);\n  }\n}\n","import { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport {\n  authServiceFactory,\n  AuthServiceInitOptions,\n} from \"../../auth/background/service-factories/auth-service.factory\";\nimport { userVerificationServiceFactory } from \"../../auth/background/service-factories/user-verification-service.factory\";\nimport { Account } from \"../../models/account\";\nimport { CachedServices } from \"../../platform/background/service-factories/factory-options\";\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../vault/background/service_factories/cipher-service.factory\";\n\nimport { MainContextMenuHandler } from \"./main-context-menu-handler\";\n\nconst NOT_IMPLEMENTED = (..._args: unknown[]) => Promise.resolve();\n\nconst LISTENED_TO_COMMANDS = [\n  \"loggedIn\",\n  \"unlocked\",\n  \"syncCompleted\",\n  \"bgUpdateContextMenu\",\n  \"editedCipher\",\n  \"addedCipher\",\n  \"deletedCipher\",\n];\n\nexport class CipherContextMenuHandler {\n  constructor(\n    private mainContextMenuHandler: MainContextMenuHandler,\n    private authService: AuthService,\n    private cipherService: CipherService,\n    private userVerificationService: UserVerificationService\n  ) {}\n\n  static async create(cachedServices: CachedServices) {\n    const stateFactory = new StateFactory(GlobalState, Account);\n    const serviceOptions: AuthServiceInitOptions & CipherServiceInitOptions = {\n      apiServiceOptions: {\n        logoutCallback: NOT_IMPLEMENTED,\n      },\n      cryptoFunctionServiceOptions: {\n        win: self,\n      },\n      encryptServiceOptions: {\n        logMacFailures: false,\n      },\n      i18nServiceOptions: {\n        systemLanguage: chrome.i18n.getUILanguage(),\n      },\n      keyConnectorServiceOptions: {\n        logoutCallback: NOT_IMPLEMENTED,\n      },\n      logServiceOptions: {\n        isDev: false,\n      },\n      platformUtilsServiceOptions: {\n        biometricCallback: () => Promise.resolve(false),\n        clipboardWriteCallback: NOT_IMPLEMENTED,\n        win: self,\n      },\n      stateMigrationServiceOptions: {\n        stateFactory: stateFactory,\n      },\n      stateServiceOptions: {\n        stateFactory: stateFactory,\n      },\n    };\n    return new CipherContextMenuHandler(\n      await MainContextMenuHandler.mv3Create(cachedServices),\n      await authServiceFactory(cachedServices, serviceOptions),\n      await cipherServiceFactory(cachedServices, serviceOptions),\n      await userVerificationServiceFactory(cachedServices, serviceOptions)\n    );\n  }\n\n  static async tabsOnActivatedListener(\n    activeInfo: chrome.tabs.TabActiveInfo,\n    serviceCache: CachedServices\n  ) {\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(serviceCache);\n    const tab = await BrowserApi.getTab(activeInfo.tabId);\n    await cipherContextMenuHandler.update(tab.url);\n  }\n\n  static async tabsOnReplacedListener(\n    addedTabId: number,\n    removedTabId: number,\n    serviceCache: CachedServices\n  ) {\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(serviceCache);\n    const tab = await BrowserApi.getTab(addedTabId);\n    await cipherContextMenuHandler.update(tab.url);\n  }\n\n  static async tabsOnUpdatedListener(\n    tabId: number,\n    changeInfo: chrome.tabs.TabChangeInfo,\n    tab: chrome.tabs.Tab,\n    serviceCache: CachedServices\n  ) {\n    if (changeInfo.status !== \"complete\") {\n      return;\n    }\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(serviceCache);\n    await cipherContextMenuHandler.update(tab.url);\n  }\n\n  static async messageListener(\n    message: { command: string },\n    sender: chrome.runtime.MessageSender,\n    cachedServices: CachedServices\n  ) {\n    if (!CipherContextMenuHandler.shouldListen(message)) {\n      return;\n    }\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(cachedServices);\n    await cipherContextMenuHandler.messageListener(message);\n  }\n\n  private static shouldListen(message: { command: string }) {\n    return LISTENED_TO_COMMANDS.includes(message.command);\n  }\n\n  async messageListener(message: { command: string }, sender?: chrome.runtime.MessageSender) {\n    if (!CipherContextMenuHandler.shouldListen(message)) {\n      return;\n    }\n\n    const activeTabs = await BrowserApi.getActiveTabs();\n    if (!activeTabs || activeTabs.length === 0) {\n      return;\n    }\n\n    await this.update(activeTabs[0].url);\n  }\n\n  async update(url: string) {\n    const authStatus = await this.authService.getAuthStatus();\n    await MainContextMenuHandler.removeAll();\n    if (authStatus !== AuthenticationStatus.Unlocked) {\n      // Should I pass in the auth status or even have two separate methods for this\n      // on MainContextMenuHandler\n      await this.mainContextMenuHandler.noAccess();\n      return;\n    }\n\n    const menuEnabled = await this.mainContextMenuHandler.init();\n    if (!menuEnabled) {\n      return;\n    }\n\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(url);\n    ciphers.sort((a, b) => this.cipherService.sortCiphersByLastUsedThenName(a, b));\n\n    if (ciphers.length === 0) {\n      await this.mainContextMenuHandler.noLogins(url);\n      return;\n    }\n\n    for (const cipher of ciphers) {\n      await this.updateForCipher(url, cipher);\n    }\n  }\n\n  private async updateForCipher(url: string, cipher: CipherView) {\n    if (\n      cipher == null ||\n      cipher.type !== CipherType.Login ||\n      (cipher.reprompt !== CipherRepromptType.None &&\n        (await this.userVerificationService.hasMasterPasswordAndMasterKeyHash()))\n    ) {\n      return;\n    }\n\n    let title = cipher.name;\n    if (!Utils.isNullOrEmpty(title)) {\n      title += ` (${cipher.login.username})`;\n    }\n\n    await this.mainContextMenuHandler.loadOptions(title, cipher.id, url, cipher);\n  }\n}\n","import { TotpService as AbstractTotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { TotpService } from \"@bitwarden/common/services/totp.service\";\n\nimport {\n  CryptoFunctionServiceInitOptions,\n  cryptoFunctionServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-function-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  LogServiceInitOptions,\n  logServiceFactory,\n} from \"../../../platform/background/service-factories/log-service.factory\";\n\ntype TotpServiceOptions = FactoryOptions;\n\nexport type TotpServiceInitOptions = TotpServiceOptions &\n  CryptoFunctionServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function totpServiceFactory(\n  cache: { totpService?: AbstractTotpService } & CachedServices,\n  opts: TotpServiceInitOptions\n): Promise<AbstractTotpService> {\n  return factory(\n    cache,\n    \"totpService\",\n    opts,\n    async () =>\n      new TotpService(\n        await cryptoFunctionServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts)\n      )\n  );\n}\n","import { EventCollectionService as AbstractEventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventCollectionService } from \"@bitwarden/common/services/event/event-collection.service\";\n\nimport {\n  organizationServiceFactory,\n  OrganizationServiceInitOptions,\n} from \"../../admin-console/background/service-factories/organization-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../platform/background/service-factories/factory-options\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../platform/background/service-factories/state-service.factory\";\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../vault/background/service_factories/cipher-service.factory\";\n\nimport {\n  eventUploadServiceFactory,\n  EventUploadServiceInitOptions,\n} from \"./event-upload-service.factory\";\n\ntype EventCollectionServiceOptions = FactoryOptions;\n\nexport type EventCollectionServiceInitOptions = EventCollectionServiceOptions &\n  CipherServiceInitOptions &\n  StateServiceInitOptions &\n  OrganizationServiceInitOptions &\n  EventUploadServiceInitOptions;\n\nexport function eventCollectionServiceFactory(\n  cache: { eventCollectionService?: AbstractEventCollectionService } & CachedServices,\n  opts: EventCollectionServiceInitOptions\n): Promise<AbstractEventCollectionService> {\n  return factory(\n    cache,\n    \"eventCollectionService\",\n    opts,\n    async () =>\n      new EventCollectionService(\n        await cipherServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await organizationServiceFactory(cache, opts),\n        await eventUploadServiceFactory(cache, opts)\n      )\n  );\n}\n","import { EventUploadService as AbstractEventUploadService } from \"@bitwarden/common/abstractions/event/event-upload.service\";\nimport { EventUploadService } from \"@bitwarden/common/services/event/event-upload.service\";\n\nimport {\n  ApiServiceInitOptions,\n  apiServiceFactory,\n} from \"../../platform/background/service-factories/api-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../platform/background/service-factories/factory-options\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../platform/background/service-factories/log-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../platform/background/service-factories/state-service.factory\";\n\ntype EventUploadServiceOptions = FactoryOptions;\n\nexport type EventUploadServiceInitOptions = EventUploadServiceOptions &\n  ApiServiceInitOptions &\n  StateServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function eventUploadServiceFactory(\n  cache: { eventUploadService?: AbstractEventUploadService } & CachedServices,\n  opts: EventUploadServiceInitOptions\n): Promise<AbstractEventUploadService> {\n  return factory(\n    cache,\n    \"eventUploadService\",\n    opts,\n    async () =>\n      new EventUploadService(\n        await apiServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts)\n      )\n  );\n}\n","import {\n  PasswordGenerationService,\n  PasswordGenerationServiceAbstraction,\n} from \"@bitwarden/common/tools/generator/password\";\n\nimport {\n  policyServiceFactory,\n  PolicyServiceInitOptions,\n} from \"../../../admin-console/background/service-factories/policy-service.factory\";\nimport {\n  CryptoServiceInitOptions,\n  cryptoServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-service.factory\";\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../platform/background/service-factories/state-service.factory\";\n\ntype PasswordGenerationServiceFactoryOptions = FactoryOptions;\n\nexport type PasswordGenerationServiceInitOptions = PasswordGenerationServiceFactoryOptions &\n  CryptoServiceInitOptions &\n  PolicyServiceInitOptions &\n  StateServiceInitOptions;\n\nexport function passwordGenerationServiceFactory(\n  cache: { passwordGenerationService?: PasswordGenerationServiceAbstraction } & CachedServices,\n  opts: PasswordGenerationServiceInitOptions\n): Promise<PasswordGenerationServiceAbstraction> {\n  return factory(\n    cache,\n    \"passwordGenerationService\",\n    opts,\n    async () =>\n      new PasswordGenerationService(\n        await cryptoServiceFactory(cache, opts),\n        await policyServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts)\n      )\n  );\n}\n","// String values affect code flow in autofill.ts and must not be changed\nexport type FillScriptOp = \"click_on_opid\" | \"focus_by_opid\" | \"fill_by_opid\" | \"delay\";\n\nexport type FillScript = [op: FillScriptOp, opid: string, value?: string];\n\nexport type AutofillScriptOptions = {\n  animate?: boolean;\n  markFilling?: boolean;\n};\n\nexport type AutofillScriptProperties = {\n  delay_between_operations?: number;\n};\n\nexport default class AutofillScript {\n  script: FillScript[] = [];\n  documentUUID = \"\";\n  properties: AutofillScriptProperties = {};\n  options: AutofillScriptOptions = {};\n  metadata: any = {}; // Unused, not written or read\n  autosubmit: any = null; // Appears to be unused, read but not written\n  savedUrls: string[];\n  untrustedIframe: boolean;\n  itemType: string; // Appears to be unused, read but not written\n\n  constructor(documentUUID: string) {\n    this.documentUUID = documentUUID;\n  }\n}\n","export class AutoFillConstants {\n  static readonly UsernameFieldNames: string[] = [\n    // English\n    \"username\",\n    \"user name\",\n    \"email\",\n    \"email address\",\n    \"e-mail\",\n    \"e-mail address\",\n    \"userid\",\n    \"user id\",\n    \"customer id\",\n    \"login id\",\n    // German\n    \"benutzername\",\n    \"benutzer name\",\n    \"email adresse\",\n    \"e-mail adresse\",\n    \"benutzerid\",\n    \"benutzer id\",\n  ];\n\n  static readonly TotpFieldNames: string[] = [\n    \"totp\",\n    \"2fa\",\n    \"mfa\",\n    \"totpcode\",\n    \"2facode\",\n    \"mfacode\",\n    \"twofactor\",\n    \"twofactorcode\",\n  ];\n\n  static readonly PasswordFieldIgnoreList: string[] = [\n    \"onetimepassword\",\n    \"captcha\",\n    \"findanything\",\n    \"forgot\",\n  ];\n\n  static readonly ExcludedAutofillTypes: string[] = [\n    \"radio\",\n    \"checkbox\",\n    \"hidden\",\n    \"file\",\n    \"button\",\n    \"image\",\n    \"reset\",\n    \"search\",\n  ];\n}\n\nexport class CreditCardAutoFillConstants {\n  static readonly CardAttributes: string[] = [\n    \"autoCompleteType\",\n    \"data-stripe\",\n    \"htmlName\",\n    \"htmlID\",\n    \"label-tag\",\n    \"placeholder\",\n    \"label-left\",\n    \"label-top\",\n    \"data-recurly\",\n  ];\n\n  static readonly CardAttributesExtended: string[] = [\n    ...CreditCardAutoFillConstants.CardAttributes,\n    \"label-right\",\n  ];\n\n  static readonly CardHolderFieldNames: string[] = [\n    \"cc-name\",\n    \"card-name\",\n    \"cardholder-name\",\n    \"cardholder\",\n    \"name\",\n    \"nom\",\n  ];\n\n  static readonly CardHolderFieldNameValues: string[] = [\n    \"cc-name\",\n    \"card-name\",\n    \"cardholder-name\",\n    \"cardholder\",\n    \"tbName\",\n  ];\n\n  static readonly CardNumberFieldNames: string[] = [\n    \"cc-number\",\n    \"cc-num\",\n    \"card-number\",\n    \"card-num\",\n    \"number\",\n    \"cc\",\n    \"cc-no\",\n    \"card-no\",\n    \"credit-card\",\n    \"numero-carte\",\n    \"carte\",\n    \"carte-credit\",\n    \"num-carte\",\n    \"cb-num\",\n  ];\n\n  static readonly CardNumberFieldNameValues: string[] = [\n    \"cc-number\",\n    \"cc-num\",\n    \"card-number\",\n    \"card-num\",\n    \"cc-no\",\n    \"card-no\",\n    \"numero-carte\",\n    \"num-carte\",\n    \"cb-num\",\n  ];\n\n  static readonly CardExpiryFieldNames: string[] = [\n    \"cc-exp\",\n    \"card-exp\",\n    \"cc-expiration\",\n    \"card-expiration\",\n    \"cc-ex\",\n    \"card-ex\",\n    \"card-expire\",\n    \"card-expiry\",\n    \"validite\",\n    \"expiration\",\n    \"expiry\",\n    \"mm-yy\",\n    \"mm-yyyy\",\n    \"yy-mm\",\n    \"yyyy-mm\",\n    \"expiration-date\",\n    \"payment-card-expiration\",\n    \"payment-cc-date\",\n  ];\n\n  static readonly CardExpiryFieldNameValues: string[] = [\n    \"mm-yy\",\n    \"mm-yyyy\",\n    \"yy-mm\",\n    \"yyyy-mm\",\n    \"expiration-date\",\n    \"payment-card-expiration\",\n  ];\n\n  static readonly ExpiryMonthFieldNames: string[] = [\n    \"exp-month\",\n    \"cc-exp-month\",\n    \"cc-month\",\n    \"card-month\",\n    \"cc-mo\",\n    \"card-mo\",\n    \"exp-mo\",\n    \"card-exp-mo\",\n    \"cc-exp-mo\",\n    \"card-expiration-month\",\n    \"expiration-month\",\n    \"cc-mm\",\n    \"cc-m\",\n    \"card-mm\",\n    \"card-m\",\n    \"card-exp-mm\",\n    \"cc-exp-mm\",\n    \"exp-mm\",\n    \"exp-m\",\n    \"expire-month\",\n    \"expire-mo\",\n    \"expiry-month\",\n    \"expiry-mo\",\n    \"card-expire-month\",\n    \"card-expire-mo\",\n    \"card-expiry-month\",\n    \"card-expiry-mo\",\n    \"mois-validite\",\n    \"mois-expiration\",\n    \"m-validite\",\n    \"m-expiration\",\n    \"expiry-date-field-month\",\n    \"expiration-date-month\",\n    \"expiration-date-mm\",\n    \"exp-mon\",\n    \"validity-mo\",\n    \"exp-date-mo\",\n    \"cb-date-mois\",\n    \"date-m\",\n  ];\n\n  static readonly ExpiryYearFieldNames: string[] = [\n    \"exp-year\",\n    \"cc-exp-year\",\n    \"cc-year\",\n    \"card-year\",\n    \"cc-yr\",\n    \"card-yr\",\n    \"exp-yr\",\n    \"card-exp-yr\",\n    \"cc-exp-yr\",\n    \"card-expiration-year\",\n    \"expiration-year\",\n    \"cc-yy\",\n    \"cc-y\",\n    \"card-yy\",\n    \"card-y\",\n    \"card-exp-yy\",\n    \"cc-exp-yy\",\n    \"exp-yy\",\n    \"exp-y\",\n    \"cc-yyyy\",\n    \"card-yyyy\",\n    \"card-exp-yyyy\",\n    \"cc-exp-yyyy\",\n    \"expire-year\",\n    \"expire-yr\",\n    \"expiry-year\",\n    \"expiry-yr\",\n    \"card-expire-year\",\n    \"card-expire-yr\",\n    \"card-expiry-year\",\n    \"card-expiry-yr\",\n    \"an-validite\",\n    \"an-expiration\",\n    \"annee-validite\",\n    \"annee-expiration\",\n    \"expiry-date-field-year\",\n    \"expiration-date-year\",\n    \"cb-date-ann\",\n    \"expiration-date-yy\",\n    \"expiration-date-yyyy\",\n    \"validity-year\",\n    \"exp-date-year\",\n    \"date-y\",\n  ];\n\n  static readonly CVVFieldNames: string[] = [\n    \"cvv\",\n    \"cvc\",\n    \"cvv2\",\n    \"cc-csc\",\n    \"cc-cvv\",\n    \"card-csc\",\n    \"card-cvv\",\n    \"cvd\",\n    \"cid\",\n    \"cvc2\",\n    \"cnv\",\n    \"cvn2\",\n    \"cc-code\",\n    \"card-code\",\n    \"code-securite\",\n    \"security-code\",\n    \"crypto\",\n    \"card-verif\",\n    \"verification-code\",\n    \"csc\",\n    \"ccv\",\n  ];\n\n  static readonly CardBrandFieldNames: string[] = [\n    \"cc-type\",\n    \"card-type\",\n    \"card-brand\",\n    \"cc-brand\",\n    \"cb-type\",\n  ];\n\n  // Each index represents a language. These three arrays should all be the same length.\n  // 0: English, 1: Danish, 2: German/Dutch, 3: French/Spanish/Italian, 4: Russian, 5: Portuguese\n  static readonly MonthAbbr = [\"mm\", \"mm\", \"mm\", \"mm\", \"мм\", \"mm\"];\n  static readonly YearAbbrShort = [\"yy\", \"åå\", \"jj\", \"aa\", \"гг\", \"rr\"];\n  static readonly YearAbbrLong = [\"yyyy\", \"åååå\", \"jjjj\", \"aa\", \"гггг\", \"rrrr\"];\n}\n\nexport class IdentityAutoFillConstants {\n  static readonly IdentityAttributes: string[] = [\n    \"autoCompleteType\",\n    \"data-stripe\",\n    \"htmlName\",\n    \"htmlID\",\n    \"label-tag\",\n    \"placeholder\",\n    \"label-left\",\n    \"label-top\",\n    \"data-recurly\",\n  ];\n\n  static readonly FullNameFieldNames: string[] = [\"name\", \"full-name\", \"your-name\"];\n\n  static readonly FullNameFieldNameValues: string[] = [\"full-name\", \"your-name\"];\n\n  static readonly TitleFieldNames: string[] = [\n    \"honorific-prefix\",\n    \"prefix\",\n    \"title\",\n    // German\n    \"anrede\",\n  ];\n\n  static readonly FirstnameFieldNames: string[] = [\n    // English\n    \"f-name\",\n    \"first-name\",\n    \"given-name\",\n    \"first-n\",\n    // German\n    \"vorname\",\n  ];\n\n  static readonly MiddlenameFieldNames: string[] = [\n    \"m-name\",\n    \"middle-name\",\n    \"additional-name\",\n    \"middle-initial\",\n    \"middle-n\",\n    \"middle-i\",\n  ];\n\n  static readonly LastnameFieldNames: string[] = [\n    // English\n    \"l-name\",\n    \"last-name\",\n    \"s-name\",\n    \"surname\",\n    \"family-name\",\n    \"family-n\",\n    \"last-n\",\n    // German\n    \"nachname\",\n    \"familienname\",\n  ];\n\n  static readonly EmailFieldNames: string[] = [\"e-mail\", \"email-address\"];\n\n  static readonly AddressFieldNames: string[] = [\n    \"address\",\n    \"street-address\",\n    \"addr\",\n    \"street\",\n    \"mailing-addr\",\n    \"billing-addr\",\n    \"mail-addr\",\n    \"bill-addr\",\n    // German\n    \"strasse\",\n    \"adresse\",\n  ];\n\n  static readonly AddressFieldNameValues: string[] = [\n    \"mailing-addr\",\n    \"billing-addr\",\n    \"mail-addr\",\n    \"bill-addr\",\n  ];\n\n  static readonly Address1FieldNames: string[] = [\n    \"address-1\",\n    \"address-line-1\",\n    \"addr-1\",\n    \"street-1\",\n  ];\n\n  static readonly Address2FieldNames: string[] = [\n    \"address-2\",\n    \"address-line-2\",\n    \"addr-2\",\n    \"street-2\",\n  ];\n\n  static readonly Address3FieldNames: string[] = [\n    \"address-3\",\n    \"address-line-3\",\n    \"addr-3\",\n    \"street-3\",\n  ];\n\n  static readonly PostalCodeFieldNames: string[] = [\n    \"postal\",\n    \"zip\",\n    \"zip2\",\n    \"zip-code\",\n    \"postal-code\",\n    \"post-code\",\n    \"address-zip\",\n    \"address-postal\",\n    \"address-code\",\n    \"address-postal-code\",\n    \"address-zip-code\",\n    // German\n    \"plz\",\n    \"postleitzahl\",\n  ];\n\n  static readonly CityFieldNames: string[] = [\n    \"city\",\n    \"town\",\n    \"address-level-2\",\n    \"address-city\",\n    \"address-town\",\n    // German\n    \"ort\",\n    \"stadt\",\n    \"wohnort\",\n  ];\n\n  static readonly StateFieldNames: string[] = [\n    \"state\",\n    \"province\",\n    \"provence\",\n    \"address-level-1\",\n    \"address-state\",\n    \"address-province\",\n    // German\n    \"bundesland\",\n  ];\n\n  static readonly CountryFieldNames: string[] = [\n    \"country\",\n    \"country-code\",\n    \"country-name\",\n    \"address-country\",\n    \"address-country-name\",\n    \"address-country-code\",\n    // German\n    \"land\",\n  ];\n\n  static readonly PhoneFieldNames: string[] = [\n    \"phone\",\n    \"mobile\",\n    \"mobile-phone\",\n    \"tel\",\n    \"telephone\",\n    \"phone-number\",\n    // German\n    \"telefon\",\n    \"telefonnummer\",\n    \"mobil\",\n    \"handy\",\n  ];\n\n  static readonly UserNameFieldNames: string[] = [\"user-name\", \"user-id\", \"screen-name\"];\n\n  static readonly CompanyFieldNames: string[] = [\n    \"company\",\n    \"company-name\",\n    \"organization\",\n    \"organization-name\",\n    // German\n    \"firma\",\n  ];\n\n  static readonly IsoCountries: { [id: string]: string } = {\n    afghanistan: \"AF\",\n    \"aland islands\": \"AX\",\n    albania: \"AL\",\n    algeria: \"DZ\",\n    \"american samoa\": \"AS\",\n    andorra: \"AD\",\n    angola: \"AO\",\n    anguilla: \"AI\",\n    antarctica: \"AQ\",\n    \"antigua and barbuda\": \"AG\",\n    argentina: \"AR\",\n    armenia: \"AM\",\n    aruba: \"AW\",\n    australia: \"AU\",\n    austria: \"AT\",\n    azerbaijan: \"AZ\",\n    bahamas: \"BS\",\n    bahrain: \"BH\",\n    bangladesh: \"BD\",\n    barbados: \"BB\",\n    belarus: \"BY\",\n    belgium: \"BE\",\n    belize: \"BZ\",\n    benin: \"BJ\",\n    bermuda: \"BM\",\n    bhutan: \"BT\",\n    bolivia: \"BO\",\n    \"bosnia and herzegovina\": \"BA\",\n    botswana: \"BW\",\n    \"bouvet island\": \"BV\",\n    brazil: \"BR\",\n    \"british indian ocean territory\": \"IO\",\n    \"brunei darussalam\": \"BN\",\n    bulgaria: \"BG\",\n    \"burkina faso\": \"BF\",\n    burundi: \"BI\",\n    cambodia: \"KH\",\n    cameroon: \"CM\",\n    canada: \"CA\",\n    \"cape verde\": \"CV\",\n    \"cayman islands\": \"KY\",\n    \"central african republic\": \"CF\",\n    chad: \"TD\",\n    chile: \"CL\",\n    china: \"CN\",\n    \"christmas island\": \"CX\",\n    \"cocos (keeling) islands\": \"CC\",\n    colombia: \"CO\",\n    comoros: \"KM\",\n    congo: \"CG\",\n    \"congo, democratic republic\": \"CD\",\n    \"cook islands\": \"CK\",\n    \"costa rica\": \"CR\",\n    \"cote d'ivoire\": \"CI\",\n    croatia: \"HR\",\n    cuba: \"CU\",\n    cyprus: \"CY\",\n    \"czech republic\": \"CZ\",\n    denmark: \"DK\",\n    djibouti: \"DJ\",\n    dominica: \"DM\",\n    \"dominican republic\": \"DO\",\n    ecuador: \"EC\",\n    egypt: \"EG\",\n    \"el salvador\": \"SV\",\n    \"equatorial guinea\": \"GQ\",\n    eritrea: \"ER\",\n    estonia: \"EE\",\n    ethiopia: \"ET\",\n    \"falkland islands\": \"FK\",\n    \"faroe islands\": \"FO\",\n    fiji: \"FJ\",\n    finland: \"FI\",\n    france: \"FR\",\n    \"french guiana\": \"GF\",\n    \"french polynesia\": \"PF\",\n    \"french southern territories\": \"TF\",\n    gabon: \"GA\",\n    gambia: \"GM\",\n    georgia: \"GE\",\n    germany: \"DE\",\n    ghana: \"GH\",\n    gibraltar: \"GI\",\n    greece: \"GR\",\n    greenland: \"GL\",\n    grenada: \"GD\",\n    guadeloupe: \"GP\",\n    guam: \"GU\",\n    guatemala: \"GT\",\n    guernsey: \"GG\",\n    guinea: \"GN\",\n    \"guinea-bissau\": \"GW\",\n    guyana: \"GY\",\n    haiti: \"HT\",\n    \"heard island & mcdonald islands\": \"HM\",\n    \"holy see (vatican city state)\": \"VA\",\n    honduras: \"HN\",\n    \"hong kong\": \"HK\",\n    hungary: \"HU\",\n    iceland: \"IS\",\n    india: \"IN\",\n    indonesia: \"ID\",\n    \"iran, islamic republic of\": \"IR\",\n    iraq: \"IQ\",\n    ireland: \"IE\",\n    \"isle of man\": \"IM\",\n    israel: \"IL\",\n    italy: \"IT\",\n    jamaica: \"JM\",\n    japan: \"JP\",\n    jersey: \"JE\",\n    jordan: \"JO\",\n    kazakhstan: \"KZ\",\n    kenya: \"KE\",\n    kiribati: \"KI\",\n    \"republic of korea\": \"KR\",\n    \"south korea\": \"KR\",\n    \"democratic people's republic of korea\": \"KP\",\n    \"north korea\": \"KP\",\n    kuwait: \"KW\",\n    kyrgyzstan: \"KG\",\n    \"lao people's democratic republic\": \"LA\",\n    latvia: \"LV\",\n    lebanon: \"LB\",\n    lesotho: \"LS\",\n    liberia: \"LR\",\n    \"libyan arab jamahiriya\": \"LY\",\n    liechtenstein: \"LI\",\n    lithuania: \"LT\",\n    luxembourg: \"LU\",\n    macao: \"MO\",\n    macedonia: \"MK\",\n    madagascar: \"MG\",\n    malawi: \"MW\",\n    malaysia: \"MY\",\n    maldives: \"MV\",\n    mali: \"ML\",\n    malta: \"MT\",\n    \"marshall islands\": \"MH\",\n    martinique: \"MQ\",\n    mauritania: \"MR\",\n    mauritius: \"MU\",\n    mayotte: \"YT\",\n    mexico: \"MX\",\n    \"micronesia, federated states of\": \"FM\",\n    moldova: \"MD\",\n    monaco: \"MC\",\n    mongolia: \"MN\",\n    montenegro: \"ME\",\n    montserrat: \"MS\",\n    morocco: \"MA\",\n    mozambique: \"MZ\",\n    myanmar: \"MM\",\n    namibia: \"NA\",\n    nauru: \"NR\",\n    nepal: \"NP\",\n    netherlands: \"NL\",\n    \"netherlands antilles\": \"AN\",\n    \"new caledonia\": \"NC\",\n    \"new zealand\": \"NZ\",\n    nicaragua: \"NI\",\n    niger: \"NE\",\n    nigeria: \"NG\",\n    niue: \"NU\",\n    \"norfolk island\": \"NF\",\n    \"northern mariana islands\": \"MP\",\n    norway: \"NO\",\n    oman: \"OM\",\n    pakistan: \"PK\",\n    palau: \"PW\",\n    \"palestinian territory, occupied\": \"PS\",\n    panama: \"PA\",\n    \"papua new guinea\": \"PG\",\n    paraguay: \"PY\",\n    peru: \"PE\",\n    philippines: \"PH\",\n    pitcairn: \"PN\",\n    poland: \"PL\",\n    portugal: \"PT\",\n    \"puerto rico\": \"PR\",\n    qatar: \"QA\",\n    reunion: \"RE\",\n    romania: \"RO\",\n    \"russian federation\": \"RU\",\n    rwanda: \"RW\",\n    \"saint barthelemy\": \"BL\",\n    \"saint helena\": \"SH\",\n    \"saint kitts and nevis\": \"KN\",\n    \"saint lucia\": \"LC\",\n    \"saint martin\": \"MF\",\n    \"saint pierre and miquelon\": \"PM\",\n    \"saint vincent and grenadines\": \"VC\",\n    samoa: \"WS\",\n    \"san marino\": \"SM\",\n    \"sao tome and principe\": \"ST\",\n    \"saudi arabia\": \"SA\",\n    senegal: \"SN\",\n    serbia: \"RS\",\n    seychelles: \"SC\",\n    \"sierra leone\": \"SL\",\n    singapore: \"SG\",\n    slovakia: \"SK\",\n    slovenia: \"SI\",\n    \"solomon islands\": \"SB\",\n    somalia: \"SO\",\n    \"south africa\": \"ZA\",\n    \"south georgia and sandwich isl.\": \"GS\",\n    spain: \"ES\",\n    \"sri lanka\": \"LK\",\n    sudan: \"SD\",\n    suriname: \"SR\",\n    \"svalbard and jan mayen\": \"SJ\",\n    swaziland: \"SZ\",\n    sweden: \"SE\",\n    switzerland: \"CH\",\n    \"syrian arab republic\": \"SY\",\n    taiwan: \"TW\",\n    tajikistan: \"TJ\",\n    tanzania: \"TZ\",\n    thailand: \"TH\",\n    \"timor-leste\": \"TL\",\n    togo: \"TG\",\n    tokelau: \"TK\",\n    tonga: \"TO\",\n    \"trinidad and tobago\": \"TT\",\n    tunisia: \"TN\",\n    turkey: \"TR\",\n    turkmenistan: \"TM\",\n    \"turks and caicos islands\": \"TC\",\n    tuvalu: \"TV\",\n    uganda: \"UG\",\n    ukraine: \"UA\",\n    \"united arab emirates\": \"AE\",\n    \"united kingdom\": \"GB\",\n    \"united states\": \"US\",\n    \"united states outlying islands\": \"UM\",\n    uruguay: \"UY\",\n    uzbekistan: \"UZ\",\n    vanuatu: \"VU\",\n    venezuela: \"VE\",\n    vietnam: \"VN\",\n    \"virgin islands, british\": \"VG\",\n    \"virgin islands, u.s.\": \"VI\",\n    \"wallis and futuna\": \"WF\",\n    \"western sahara\": \"EH\",\n    yemen: \"YE\",\n    zambia: \"ZM\",\n    zimbabwe: \"ZW\",\n  };\n\n  static readonly IsoStates: { [id: string]: string } = {\n    alabama: \"AL\",\n    alaska: \"AK\",\n    \"american samoa\": \"AS\",\n    arizona: \"AZ\",\n    arkansas: \"AR\",\n    california: \"CA\",\n    colorado: \"CO\",\n    connecticut: \"CT\",\n    delaware: \"DE\",\n    \"district of columbia\": \"DC\",\n    \"federated states of micronesia\": \"FM\",\n    florida: \"FL\",\n    georgia: \"GA\",\n    guam: \"GU\",\n    hawaii: \"HI\",\n    idaho: \"ID\",\n    illinois: \"IL\",\n    indiana: \"IN\",\n    iowa: \"IA\",\n    kansas: \"KS\",\n    kentucky: \"KY\",\n    louisiana: \"LA\",\n    maine: \"ME\",\n    \"marshall islands\": \"MH\",\n    maryland: \"MD\",\n    massachusetts: \"MA\",\n    michigan: \"MI\",\n    minnesota: \"MN\",\n    mississippi: \"MS\",\n    missouri: \"MO\",\n    montana: \"MT\",\n    nebraska: \"NE\",\n    nevada: \"NV\",\n    \"new hampshire\": \"NH\",\n    \"new jersey\": \"NJ\",\n    \"new mexico\": \"NM\",\n    \"new york\": \"NY\",\n    \"north carolina\": \"NC\",\n    \"north dakota\": \"ND\",\n    \"northern mariana islands\": \"MP\",\n    ohio: \"OH\",\n    oklahoma: \"OK\",\n    oregon: \"OR\",\n    palau: \"PW\",\n    pennsylvania: \"PA\",\n    \"puerto rico\": \"PR\",\n    \"rhode island\": \"RI\",\n    \"south carolina\": \"SC\",\n    \"south dakota\": \"SD\",\n    tennessee: \"TN\",\n    texas: \"TX\",\n    utah: \"UT\",\n    vermont: \"VT\",\n    \"virgin islands\": \"VI\",\n    virginia: \"VA\",\n    washington: \"WA\",\n    \"west virginia\": \"WV\",\n    wisconsin: \"WI\",\n    wyoming: \"WY\",\n  };\n\n  static readonly IsoProvinces: { [id: string]: string } = {\n    alberta: \"AB\",\n    \"british columbia\": \"BC\",\n    manitoba: \"MB\",\n    \"new brunswick\": \"NB\",\n    \"newfoundland and labrador\": \"NL\",\n    \"nova scotia\": \"NS\",\n    ontario: \"ON\",\n    \"prince edward island\": \"PE\",\n    quebec: \"QC\",\n    saskatchewan: \"SK\",\n  };\n}\n","import { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { SettingsService } from \"@bitwarden/common/abstractions/settings.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { EventType, FieldType, UriMatchType } from \"@bitwarden/common/enums\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FieldView } from \"@bitwarden/common/vault/models/view/field.view\";\n\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\nimport { BrowserStateService } from \"../../platform/services/abstractions/browser-state.service\";\nimport AutofillField from \"../models/autofill-field\";\nimport AutofillPageDetails from \"../models/autofill-page-details\";\nimport AutofillScript from \"../models/autofill-script\";\n\nimport {\n  AutoFillOptions,\n  AutofillService as AutofillServiceInterface,\n  PageDetail,\n  FormData,\n} from \"./abstractions/autofill.service\";\nimport {\n  AutoFillConstants,\n  CreditCardAutoFillConstants,\n  IdentityAutoFillConstants,\n} from \"./autofill-constants\";\n\nexport interface GenerateFillScriptOptions {\n  skipUsernameOnlyFill: boolean;\n  onlyEmptyFields: boolean;\n  onlyVisibleFields: boolean;\n  fillNewPassword: boolean;\n  allowTotpAutofill: boolean;\n  cipher: CipherView;\n  tabUrl: string;\n  defaultUriMatch: UriMatchType;\n}\n\nexport default class AutofillService implements AutofillServiceInterface {\n  constructor(\n    private cipherService: CipherService,\n    private stateService: BrowserStateService,\n    private totpService: TotpService,\n    private eventCollectionService: EventCollectionService,\n    private logService: LogService,\n    private settingsService: SettingsService,\n    private userVerificationService: UserVerificationService\n  ) {}\n\n  getFormsWithPasswordFields(pageDetails: AutofillPageDetails): FormData[] {\n    const formData: FormData[] = [];\n\n    const passwordFields = AutofillService.loadPasswordFields(pageDetails, true, true, false, true);\n\n    // TODO: this logic prevents multi-step account creation forms (that just start with email)\n    // from being passed on to the notification bar content script - even if autofill.js found the form and email field.\n    // ex: https://signup.live.com/\n    if (passwordFields.length === 0) {\n      return formData;\n    }\n\n    // Back up check for cases where there are several password fields detected,\n    // but they are not all part of the form b/c of bad HTML\n\n    // gather password fields that don't have an enclosing form\n    const passwordFieldsWithoutForm = passwordFields.filter((pf) => pf.form === undefined);\n    const formKeys = Object.keys(pageDetails.forms);\n    const formCount = formKeys.length;\n\n    // if we have 3 password fields and only 1 form, and there are password fields that are not within a form\n    // but there is at least one password field within the form, then most likely this is a poorly built password change form\n    if (passwordFields.length === 3 && formCount == 1 && passwordFieldsWithoutForm.length > 0) {\n      // Only one form so get the singular form key\n      const soloFormKey = formKeys[0];\n\n      const atLeastOnePasswordFieldWithinSoloForm =\n        passwordFields.filter((pf) => pf.form !== null && pf.form === soloFormKey).length > 0;\n\n      if (atLeastOnePasswordFieldWithinSoloForm) {\n        // We have a form with at least one password field,\n        // so let's make an assumption that the password fields without a form are actually part of this form\n        passwordFieldsWithoutForm.forEach((pf) => {\n          pf.form = soloFormKey;\n        });\n      }\n    }\n\n    for (const formKey in pageDetails.forms) {\n      // eslint-disable-next-line\n      if (!pageDetails.forms.hasOwnProperty(formKey)) {\n        continue;\n      }\n\n      const formPasswordFields = passwordFields.filter((pf) => formKey === pf.form);\n      if (formPasswordFields.length > 0) {\n        let uf = this.findUsernameField(pageDetails, formPasswordFields[0], false, false, false);\n        if (uf == null) {\n          // not able to find any viewable username fields. maybe there are some \"hidden\" ones?\n          uf = this.findUsernameField(pageDetails, formPasswordFields[0], true, true, false);\n        }\n        formData.push({\n          form: pageDetails.forms[formKey],\n          password: formPasswordFields[0],\n          username: uf,\n          passwords: formPasswordFields,\n        });\n      }\n    }\n\n    return formData;\n  }\n\n  /**\n   * Autofills a given tab with a given login item\n   * @param options Instructions about the autofill operation, including tab and login item\n   * @returns The TOTP code of the successfully autofilled login, if any\n   */\n  async doAutoFill(options: AutoFillOptions): Promise<string> {\n    const tab = options.tab;\n    if (!tab || !options.cipher || !options.pageDetails || !options.pageDetails.length) {\n      throw new Error(\"Nothing to auto-fill.\");\n    }\n\n    let totpPromise: Promise<string> = null;\n\n    const canAccessPremium = await this.stateService.getCanAccessPremium();\n    const defaultUriMatch = (await this.stateService.getDefaultUriMatch()) ?? UriMatchType.Domain;\n\n    let didAutofill = false;\n    await Promise.all(\n      options.pageDetails.map(async (pd) => {\n        // make sure we're still on correct tab\n        if (pd.tab.id !== tab.id || pd.tab.url !== tab.url) {\n          return;\n        }\n\n        const fillScript = await this.generateFillScript(pd.details, {\n          skipUsernameOnlyFill: options.skipUsernameOnlyFill || false,\n          onlyEmptyFields: options.onlyEmptyFields || false,\n          onlyVisibleFields: options.onlyVisibleFields || false,\n          fillNewPassword: options.fillNewPassword || false,\n          allowTotpAutofill: options.allowTotpAutofill || false,\n          cipher: options.cipher,\n          tabUrl: tab.url,\n          defaultUriMatch: defaultUriMatch,\n        });\n\n        if (!fillScript || !fillScript.script || !fillScript.script.length) {\n          return;\n        }\n\n        if (\n          fillScript.untrustedIframe &&\n          options.allowUntrustedIframe != undefined &&\n          !options.allowUntrustedIframe\n        ) {\n          this.logService.info(\"Auto-fill on page load was blocked due to an untrusted iframe.\");\n          return;\n        }\n\n        // Add a small delay between operations\n        fillScript.properties.delay_between_operations = 20;\n\n        didAutofill = true;\n        if (!options.skipLastUsed) {\n          this.cipherService.updateLastUsedDate(options.cipher.id);\n        }\n\n        BrowserApi.tabSendMessage(\n          tab,\n          {\n            command: \"fillForm\",\n            fillScript: fillScript,\n            url: tab.url,\n          },\n          { frameId: pd.frameId }\n        );\n\n        if (\n          options.cipher.type !== CipherType.Login ||\n          totpPromise ||\n          !options.cipher.login.totp ||\n          (!canAccessPremium && !options.cipher.organizationUseTotp)\n        ) {\n          return;\n        }\n\n        totpPromise = this.stateService.getDisableAutoTotpCopy().then((disabled) => {\n          if (!disabled) {\n            return this.totpService.getCode(options.cipher.login.totp);\n          }\n          return null;\n        });\n      })\n    );\n\n    if (didAutofill) {\n      this.eventCollectionService.collect(EventType.Cipher_ClientAutofilled, options.cipher.id);\n      if (totpPromise != null) {\n        return await totpPromise;\n      } else {\n        return null;\n      }\n    } else {\n      throw new Error(\"Did not auto-fill.\");\n    }\n  }\n\n  /**\n   * Autofills the specified tab with the next login item from the cache\n   * @param pageDetails The data scraped from the page\n   * @param tab The tab to be autofilled\n   * @param fromCommand Whether the autofill is triggered by a keyboard shortcut (`true`) or autofill on page load (`false`)\n   * @returns The TOTP code of the successfully autofilled login, if any\n   */\n  async doAutoFillOnTab(\n    pageDetails: PageDetail[],\n    tab: chrome.tabs.Tab,\n    fromCommand: boolean\n  ): Promise<string> {\n    let cipher: CipherView;\n    if (fromCommand) {\n      cipher = await this.cipherService.getNextCipherForUrl(tab.url);\n    } else {\n      const lastLaunchedCipher = await this.cipherService.getLastLaunchedForUrl(tab.url, true);\n      if (\n        lastLaunchedCipher &&\n        Date.now().valueOf() - lastLaunchedCipher.localData?.lastLaunched?.valueOf() < 30000\n      ) {\n        cipher = lastLaunchedCipher;\n      } else {\n        cipher = await this.cipherService.getLastUsedForUrl(tab.url, true);\n      }\n    }\n\n    if (cipher == null || cipher.reprompt !== CipherRepromptType.None) {\n      return null;\n    }\n\n    const totpCode = await this.doAutoFill({\n      tab: tab,\n      cipher: cipher,\n      pageDetails: pageDetails,\n      skipLastUsed: !fromCommand,\n      skipUsernameOnlyFill: !fromCommand,\n      onlyEmptyFields: !fromCommand,\n      onlyVisibleFields: !fromCommand,\n      fillNewPassword: fromCommand,\n      allowUntrustedIframe: fromCommand,\n      allowTotpAutofill: fromCommand,\n    });\n\n    // Update last used index as autofill has succeed\n    if (fromCommand) {\n      this.cipherService.updateLastUsedIndexForUrl(tab.url);\n    }\n\n    return totpCode;\n  }\n\n  /**\n   * Autofills the active tab with the next login item from the cache\n   * @param pageDetails The data scraped from the page\n   * @param fromCommand Whether the autofill is triggered by a keyboard shortcut (`true`) or autofill on page load (`false`)\n   * @returns The TOTP code of the successfully autofilled login, if any\n   */\n  async doAutoFillActiveTab(pageDetails: PageDetail[], fromCommand: boolean): Promise<string> {\n    const tab = await this.getActiveTab();\n    if (!tab || !tab.url) {\n      return;\n    }\n\n    return await this.doAutoFillOnTab(pageDetails, tab, fromCommand);\n  }\n\n  // Helpers\n\n  private async getActiveTab(): Promise<chrome.tabs.Tab> {\n    const tab = await BrowserApi.getTabFromCurrentWindow();\n    if (!tab) {\n      throw new Error(\"No tab found.\");\n    }\n\n    return tab;\n  }\n\n  private async generateFillScript(\n    pageDetails: AutofillPageDetails,\n    options: GenerateFillScriptOptions\n  ): Promise<AutofillScript> {\n    if (!pageDetails || !options.cipher) {\n      return null;\n    }\n\n    let fillScript = new AutofillScript(pageDetails.documentUUID);\n    const filledFields: { [id: string]: AutofillField } = {};\n    const fields = options.cipher.fields;\n\n    if (fields && fields.length) {\n      const fieldNames: string[] = [];\n\n      fields.forEach((f) => {\n        if (AutofillService.hasValue(f.name)) {\n          fieldNames.push(f.name.toLowerCase());\n        }\n      });\n\n      pageDetails.fields.forEach((field) => {\n        // eslint-disable-next-line\n        if (filledFields.hasOwnProperty(field.opid)) {\n          return;\n        }\n\n        if (!field.viewable && field.tagName !== \"span\") {\n          return;\n        }\n\n        const matchingIndex = this.findMatchingFieldIndex(field, fieldNames);\n        if (matchingIndex > -1) {\n          const matchingField: FieldView = fields[matchingIndex];\n          let val: string;\n          if (matchingField.type === FieldType.Linked) {\n            // Assumption: Linked Field is not being used to autofill a boolean value\n            val = options.cipher.linkedFieldValue(matchingField.linkedId) as string;\n          } else {\n            val = matchingField.value;\n            if (val == null && matchingField.type === FieldType.Boolean) {\n              val = \"false\";\n            }\n          }\n\n          filledFields[field.opid] = field;\n          AutofillService.fillByOpid(fillScript, field, val);\n        }\n      });\n    }\n\n    switch (options.cipher.type) {\n      case CipherType.Login:\n        fillScript = await this.generateLoginFillScript(\n          fillScript,\n          pageDetails,\n          filledFields,\n          options\n        );\n        break;\n      case CipherType.Card:\n        fillScript = this.generateCardFillScript(fillScript, pageDetails, filledFields, options);\n        break;\n      case CipherType.Identity:\n        fillScript = this.generateIdentityFillScript(\n          fillScript,\n          pageDetails,\n          filledFields,\n          options\n        );\n        break;\n      default:\n        return null;\n    }\n\n    return fillScript;\n  }\n\n  private async generateLoginFillScript(\n    fillScript: AutofillScript,\n    pageDetails: AutofillPageDetails,\n    filledFields: { [id: string]: AutofillField },\n    options: GenerateFillScriptOptions\n  ): Promise<AutofillScript> {\n    if (!options.cipher.login) {\n      return null;\n    }\n\n    const passwords: AutofillField[] = [];\n    const usernames: AutofillField[] = [];\n    const totps: AutofillField[] = [];\n    let pf: AutofillField = null;\n    let username: AutofillField = null;\n    let totp: AutofillField = null;\n    const login = options.cipher.login;\n    fillScript.savedUrls =\n      login?.uris?.filter((u) => u.match != UriMatchType.Never).map((u) => u.uri) ?? [];\n\n    fillScript.untrustedIframe = this.inUntrustedIframe(pageDetails.url, options);\n\n    let passwordFields = AutofillService.loadPasswordFields(\n      pageDetails,\n      false,\n      false,\n      options.onlyEmptyFields,\n      options.fillNewPassword\n    );\n    if (!passwordFields.length && !options.onlyVisibleFields) {\n      // not able to find any viewable password fields. maybe there are some \"hidden\" ones?\n      passwordFields = AutofillService.loadPasswordFields(\n        pageDetails,\n        true,\n        true,\n        options.onlyEmptyFields,\n        options.fillNewPassword\n      );\n    }\n\n    for (const formKey in pageDetails.forms) {\n      // eslint-disable-next-line\n      if (!pageDetails.forms.hasOwnProperty(formKey)) {\n        continue;\n      }\n\n      passwordFields.forEach((passField) => {\n        pf = passField;\n        passwords.push(pf);\n\n        if (login.username) {\n          username = this.findUsernameField(pageDetails, pf, false, false, false);\n\n          if (!username && !options.onlyVisibleFields) {\n            // not able to find any viewable username fields. maybe there are some \"hidden\" ones?\n            username = this.findUsernameField(pageDetails, pf, true, true, false);\n          }\n\n          if (username) {\n            usernames.push(username);\n          }\n        }\n\n        if (options.allowTotpAutofill && login.totp) {\n          totp = this.findTotpField(pageDetails, pf, false, false, false);\n\n          if (!totp && !options.onlyVisibleFields) {\n            // not able to find any viewable totp fields. maybe there are some \"hidden\" ones?\n            totp = this.findTotpField(pageDetails, pf, true, true, false);\n          }\n\n          if (totp) {\n            totps.push(totp);\n          }\n        }\n      });\n    }\n\n    if (passwordFields.length && !passwords.length) {\n      // The page does not have any forms with password fields. Use the first password field on the page and the\n      // input field just before it as the username.\n\n      pf = passwordFields[0];\n      passwords.push(pf);\n\n      if (login.username && pf.elementNumber > 0) {\n        username = this.findUsernameField(pageDetails, pf, false, false, true);\n\n        if (!username && !options.onlyVisibleFields) {\n          // not able to find any viewable username fields. maybe there are some \"hidden\" ones?\n          username = this.findUsernameField(pageDetails, pf, true, true, true);\n        }\n\n        if (username) {\n          usernames.push(username);\n        }\n      }\n\n      if (options.allowTotpAutofill && login.totp && pf.elementNumber > 0) {\n        totp = this.findTotpField(pageDetails, pf, false, false, true);\n\n        if (!totp && !options.onlyVisibleFields) {\n          // not able to find any viewable username fields. maybe there are some \"hidden\" ones?\n          totp = this.findTotpField(pageDetails, pf, true, true, true);\n        }\n\n        if (totp) {\n          totps.push(totp);\n        }\n      }\n    }\n\n    if (!passwordFields.length) {\n      // No password fields on this page. Let's try to just fuzzy fill the username.\n      pageDetails.fields.forEach((f) => {\n        if (\n          !options.skipUsernameOnlyFill &&\n          f.viewable &&\n          (f.type === \"text\" || f.type === \"email\" || f.type === \"tel\") &&\n          AutofillService.fieldIsFuzzyMatch(f, AutoFillConstants.UsernameFieldNames)\n        ) {\n          usernames.push(f);\n        }\n\n        if (\n          options.allowTotpAutofill &&\n          f.viewable &&\n          (f.type === \"text\" || f.type === \"number\") &&\n          (AutofillService.fieldIsFuzzyMatch(f, AutoFillConstants.TotpFieldNames) ||\n            f.autoCompleteType === \"one-time-code\")\n        ) {\n          totps.push(f);\n        }\n      });\n    }\n\n    usernames.forEach((u) => {\n      // eslint-disable-next-line\n      if (filledFields.hasOwnProperty(u.opid)) {\n        return;\n      }\n\n      filledFields[u.opid] = u;\n      AutofillService.fillByOpid(fillScript, u, login.username);\n    });\n\n    passwords.forEach((p) => {\n      // eslint-disable-next-line\n      if (filledFields.hasOwnProperty(p.opid)) {\n        return;\n      }\n\n      filledFields[p.opid] = p;\n      AutofillService.fillByOpid(fillScript, p, login.password);\n    });\n\n    if (options.allowTotpAutofill) {\n      await Promise.all(\n        totps.map(async (t) => {\n          if (Object.prototype.hasOwnProperty.call(filledFields, t.opid)) {\n            return;\n          }\n\n          filledFields[t.opid] = t;\n          const totpValue = await this.totpService.getCode(login.totp);\n          AutofillService.fillByOpid(fillScript, t, totpValue);\n        })\n      );\n    }\n\n    fillScript = AutofillService.setFillScriptForFocus(filledFields, fillScript);\n    return fillScript;\n  }\n\n  private generateCardFillScript(\n    fillScript: AutofillScript,\n    pageDetails: AutofillPageDetails,\n    filledFields: { [id: string]: AutofillField },\n    options: GenerateFillScriptOptions\n  ): AutofillScript {\n    if (!options.cipher.card) {\n      return null;\n    }\n\n    const fillFields: { [id: string]: AutofillField } = {};\n\n    pageDetails.fields.forEach((f) => {\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        return;\n      }\n\n      if (this.isExcludedType(f.type, AutoFillConstants.ExcludedAutofillTypes)) {\n        return;\n      }\n\n      for (let i = 0; i < CreditCardAutoFillConstants.CardAttributes.length; i++) {\n        const attr = CreditCardAutoFillConstants.CardAttributes[i];\n        // eslint-disable-next-line\n        if (!f.hasOwnProperty(attr) || !f[attr] || !f.viewable) {\n          continue;\n        }\n\n        // ref https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#autofill\n        // ref https://developers.google.com/web/fundamentals/design-and-ux/input/forms/\n        if (\n          !fillFields.cardholderName &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            CreditCardAutoFillConstants.CardHolderFieldNames,\n            CreditCardAutoFillConstants.CardHolderFieldNameValues\n          )\n        ) {\n          fillFields.cardholderName = f;\n          break;\n        } else if (\n          !fillFields.number &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            CreditCardAutoFillConstants.CardNumberFieldNames,\n            CreditCardAutoFillConstants.CardNumberFieldNameValues\n          )\n        ) {\n          fillFields.number = f;\n          break;\n        } else if (\n          !fillFields.exp &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            CreditCardAutoFillConstants.CardExpiryFieldNames,\n            CreditCardAutoFillConstants.CardExpiryFieldNameValues\n          )\n        ) {\n          fillFields.exp = f;\n          break;\n        } else if (\n          !fillFields.expMonth &&\n          AutofillService.isFieldMatch(f[attr], CreditCardAutoFillConstants.ExpiryMonthFieldNames)\n        ) {\n          fillFields.expMonth = f;\n          break;\n        } else if (\n          !fillFields.expYear &&\n          AutofillService.isFieldMatch(f[attr], CreditCardAutoFillConstants.ExpiryYearFieldNames)\n        ) {\n          fillFields.expYear = f;\n          break;\n        } else if (\n          !fillFields.code &&\n          AutofillService.isFieldMatch(f[attr], CreditCardAutoFillConstants.CVVFieldNames)\n        ) {\n          fillFields.code = f;\n          break;\n        } else if (\n          !fillFields.brand &&\n          AutofillService.isFieldMatch(f[attr], CreditCardAutoFillConstants.CardBrandFieldNames)\n        ) {\n          fillFields.brand = f;\n          break;\n        }\n      }\n    });\n\n    const card = options.cipher.card;\n    this.makeScriptAction(fillScript, card, fillFields, filledFields, \"cardholderName\");\n    this.makeScriptAction(fillScript, card, fillFields, filledFields, \"number\");\n    this.makeScriptAction(fillScript, card, fillFields, filledFields, \"code\");\n    this.makeScriptAction(fillScript, card, fillFields, filledFields, \"brand\");\n\n    if (fillFields.expMonth && AutofillService.hasValue(card.expMonth)) {\n      let expMonth: string = card.expMonth;\n\n      if (fillFields.expMonth.selectInfo && fillFields.expMonth.selectInfo.options) {\n        let index: number = null;\n        const siOptions = fillFields.expMonth.selectInfo.options;\n        if (siOptions.length === 12) {\n          index = parseInt(card.expMonth, null) - 1;\n        } else if (siOptions.length === 13) {\n          if (\n            siOptions[0][0] != null &&\n            siOptions[0][0] !== \"\" &&\n            (siOptions[12][0] == null || siOptions[12][0] === \"\")\n          ) {\n            index = parseInt(card.expMonth, null) - 1;\n          } else {\n            index = parseInt(card.expMonth, null);\n          }\n        }\n\n        if (index != null) {\n          const option = siOptions[index];\n          if (option.length > 1) {\n            expMonth = option[1];\n          }\n        }\n      } else if (\n        (this.fieldAttrsContain(fillFields.expMonth, \"mm\") ||\n          fillFields.expMonth.maxLength === 2) &&\n        expMonth.length === 1\n      ) {\n        expMonth = \"0\" + expMonth;\n      }\n\n      filledFields[fillFields.expMonth.opid] = fillFields.expMonth;\n      AutofillService.fillByOpid(fillScript, fillFields.expMonth, expMonth);\n    }\n\n    if (fillFields.expYear && AutofillService.hasValue(card.expYear)) {\n      let expYear: string = card.expYear;\n      if (fillFields.expYear.selectInfo && fillFields.expYear.selectInfo.options) {\n        for (let i = 0; i < fillFields.expYear.selectInfo.options.length; i++) {\n          const o: [string, string] = fillFields.expYear.selectInfo.options[i];\n          if (o[0] === card.expYear || o[1] === card.expYear) {\n            expYear = o[1];\n            break;\n          }\n          if (\n            o[1].length === 2 &&\n            card.expYear.length === 4 &&\n            o[1] === card.expYear.substring(2)\n          ) {\n            expYear = o[1];\n            break;\n          }\n          const colonIndex = o[1].indexOf(\":\");\n          if (colonIndex > -1 && o[1].length > colonIndex + 1) {\n            const val = o[1].substring(colonIndex + 2);\n            if (val != null && val.trim() !== \"\" && val === card.expYear) {\n              expYear = o[1];\n              break;\n            }\n          }\n        }\n      } else if (\n        this.fieldAttrsContain(fillFields.expYear, \"yyyy\") ||\n        fillFields.expYear.maxLength === 4\n      ) {\n        if (expYear.length === 2) {\n          expYear = \"20\" + expYear;\n        }\n      } else if (\n        this.fieldAttrsContain(fillFields.expYear, \"yy\") ||\n        fillFields.expYear.maxLength === 2\n      ) {\n        if (expYear.length === 4) {\n          expYear = expYear.substr(2);\n        }\n      }\n\n      filledFields[fillFields.expYear.opid] = fillFields.expYear;\n      AutofillService.fillByOpid(fillScript, fillFields.expYear, expYear);\n    }\n\n    if (\n      fillFields.exp &&\n      AutofillService.hasValue(card.expMonth) &&\n      AutofillService.hasValue(card.expYear)\n    ) {\n      const fullMonth = (\"0\" + card.expMonth).slice(-2);\n\n      let fullYear: string = card.expYear;\n      let partYear: string = null;\n      if (fullYear.length === 2) {\n        partYear = fullYear;\n        fullYear = \"20\" + fullYear;\n      } else if (fullYear.length === 4) {\n        partYear = fullYear.substr(2, 2);\n      }\n\n      let exp: string = null;\n      for (let i = 0; i < CreditCardAutoFillConstants.MonthAbbr.length; i++) {\n        if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] +\n              \"/\" +\n              CreditCardAutoFillConstants.YearAbbrLong[i]\n          )\n        ) {\n          exp = fullMonth + \"/\" + fullYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] +\n              \"/\" +\n              CreditCardAutoFillConstants.YearAbbrShort[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = fullMonth + \"/\" + partYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrLong[i] +\n              \"/\" +\n              CreditCardAutoFillConstants.MonthAbbr[i]\n          )\n        ) {\n          exp = fullYear + \"/\" + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrShort[i] +\n              \"/\" +\n              CreditCardAutoFillConstants.MonthAbbr[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = partYear + \"/\" + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] +\n              \"-\" +\n              CreditCardAutoFillConstants.YearAbbrLong[i]\n          )\n        ) {\n          exp = fullMonth + \"-\" + fullYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] +\n              \"-\" +\n              CreditCardAutoFillConstants.YearAbbrShort[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = fullMonth + \"-\" + partYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrLong[i] +\n              \"-\" +\n              CreditCardAutoFillConstants.MonthAbbr[i]\n          )\n        ) {\n          exp = fullYear + \"-\" + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrShort[i] +\n              \"-\" +\n              CreditCardAutoFillConstants.MonthAbbr[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = partYear + \"-\" + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrLong[i] + CreditCardAutoFillConstants.MonthAbbr[i]\n          )\n        ) {\n          exp = fullYear + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrShort[i] + CreditCardAutoFillConstants.MonthAbbr[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = partYear + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] + CreditCardAutoFillConstants.YearAbbrLong[i]\n          )\n        ) {\n          exp = fullMonth + fullYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] + CreditCardAutoFillConstants.YearAbbrShort[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = fullMonth + partYear;\n        }\n\n        if (exp != null) {\n          break;\n        }\n      }\n\n      if (exp == null) {\n        exp = fullYear + \"-\" + fullMonth;\n      }\n\n      this.makeScriptActionWithValue(fillScript, exp, fillFields.exp, filledFields);\n    }\n\n    return fillScript;\n  }\n\n  /**\n   * Determines whether an iframe is potentially dangerous (\"untrusted\") to autofill\n   * @param pageUrl The url of the page/iframe, usually from AutofillPageDetails\n   * @param options The GenerateFillScript options\n   * @returns `true` if the iframe is untrusted and a warning should be shown, `false` otherwise\n   */\n  private inUntrustedIframe(pageUrl: string, options: GenerateFillScriptOptions): boolean {\n    // If the pageUrl (from the content script) matches the tabUrl (from the sender tab), we are not in an iframe\n    // This also avoids a false positive if no URI is saved and the user triggers auto-fill anyway\n    if (pageUrl === options.tabUrl) {\n      return false;\n    }\n\n    // Check the pageUrl against cipher URIs using the configured match detection.\n    // Remember: if we are in this function, the tabUrl already matches a saved URI for the login.\n    // We need to verify the pageUrl also matches.\n    const equivalentDomains = this.settingsService.getEquivalentDomains(pageUrl);\n    const matchesUri = options.cipher.login.matchesUri(\n      pageUrl,\n      equivalentDomains,\n      options.defaultUriMatch\n    );\n    return !matchesUri;\n  }\n\n  private fieldAttrsContain(field: AutofillField, containsVal: string) {\n    if (!field) {\n      return false;\n    }\n\n    let doesContain = false;\n    CreditCardAutoFillConstants.CardAttributesExtended.forEach((attr) => {\n      // eslint-disable-next-line\n      if (doesContain || !field.hasOwnProperty(attr) || !field[attr]) {\n        return;\n      }\n\n      let val = field[attr];\n      val = val.replace(/ /g, \"\").toLowerCase();\n      doesContain = val.indexOf(containsVal) > -1;\n    });\n\n    return doesContain;\n  }\n\n  private generateIdentityFillScript(\n    fillScript: AutofillScript,\n    pageDetails: AutofillPageDetails,\n    filledFields: { [id: string]: AutofillField },\n    options: GenerateFillScriptOptions\n  ): AutofillScript {\n    if (!options.cipher.identity) {\n      return null;\n    }\n\n    const fillFields: { [id: string]: AutofillField } = {};\n\n    pageDetails.fields.forEach((f) => {\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        return;\n      }\n\n      if (this.isExcludedType(f.type, AutoFillConstants.ExcludedAutofillTypes)) {\n        return;\n      }\n\n      for (let i = 0; i < IdentityAutoFillConstants.IdentityAttributes.length; i++) {\n        const attr = IdentityAutoFillConstants.IdentityAttributes[i];\n        // eslint-disable-next-line\n        if (!f.hasOwnProperty(attr) || !f[attr] || !f.viewable) {\n          continue;\n        }\n\n        // ref https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#autofill\n        // ref https://developers.google.com/web/fundamentals/design-and-ux/input/forms/\n        if (\n          !fillFields.name &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            IdentityAutoFillConstants.FullNameFieldNames,\n            IdentityAutoFillConstants.FullNameFieldNameValues\n          )\n        ) {\n          fillFields.name = f;\n          break;\n        } else if (\n          !fillFields.firstName &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.FirstnameFieldNames)\n        ) {\n          fillFields.firstName = f;\n          break;\n        } else if (\n          !fillFields.middleName &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.MiddlenameFieldNames)\n        ) {\n          fillFields.middleName = f;\n          break;\n        } else if (\n          !fillFields.lastName &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.LastnameFieldNames)\n        ) {\n          fillFields.lastName = f;\n          break;\n        } else if (\n          !fillFields.title &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.TitleFieldNames)\n        ) {\n          fillFields.title = f;\n          break;\n        } else if (\n          !fillFields.email &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.EmailFieldNames)\n        ) {\n          fillFields.email = f;\n          break;\n        } else if (\n          !fillFields.address &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            IdentityAutoFillConstants.AddressFieldNames,\n            IdentityAutoFillConstants.AddressFieldNameValues\n          )\n        ) {\n          fillFields.address = f;\n          break;\n        } else if (\n          !fillFields.address1 &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.Address1FieldNames)\n        ) {\n          fillFields.address1 = f;\n          break;\n        } else if (\n          !fillFields.address2 &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.Address2FieldNames)\n        ) {\n          fillFields.address2 = f;\n          break;\n        } else if (\n          !fillFields.address3 &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.Address3FieldNames)\n        ) {\n          fillFields.address3 = f;\n          break;\n        } else if (\n          !fillFields.postalCode &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.PostalCodeFieldNames)\n        ) {\n          fillFields.postalCode = f;\n          break;\n        } else if (\n          !fillFields.city &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.CityFieldNames)\n        ) {\n          fillFields.city = f;\n          break;\n        } else if (\n          !fillFields.state &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.StateFieldNames)\n        ) {\n          fillFields.state = f;\n          break;\n        } else if (\n          !fillFields.country &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.CountryFieldNames)\n        ) {\n          fillFields.country = f;\n          break;\n        } else if (\n          !fillFields.phone &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.PhoneFieldNames)\n        ) {\n          fillFields.phone = f;\n          break;\n        } else if (\n          !fillFields.username &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.UserNameFieldNames)\n        ) {\n          fillFields.username = f;\n          break;\n        } else if (\n          !fillFields.company &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.CompanyFieldNames)\n        ) {\n          fillFields.company = f;\n          break;\n        }\n      }\n    });\n\n    const identity = options.cipher.identity;\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"title\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"firstName\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"middleName\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"lastName\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"address1\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"address2\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"address3\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"city\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"postalCode\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"company\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"email\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"phone\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"username\");\n\n    let filledState = false;\n    if (fillFields.state && identity.state && identity.state.length > 2) {\n      const stateLower = identity.state.toLowerCase();\n      const isoState =\n        IdentityAutoFillConstants.IsoStates[stateLower] ||\n        IdentityAutoFillConstants.IsoProvinces[stateLower];\n      if (isoState) {\n        filledState = true;\n        this.makeScriptActionWithValue(fillScript, isoState, fillFields.state, filledFields);\n      }\n    }\n\n    if (!filledState) {\n      this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"state\");\n    }\n\n    let filledCountry = false;\n    if (fillFields.country && identity.country && identity.country.length > 2) {\n      const countryLower = identity.country.toLowerCase();\n      const isoCountry = IdentityAutoFillConstants.IsoCountries[countryLower];\n      if (isoCountry) {\n        filledCountry = true;\n        this.makeScriptActionWithValue(fillScript, isoCountry, fillFields.country, filledFields);\n      }\n    }\n\n    if (!filledCountry) {\n      this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"country\");\n    }\n\n    if (fillFields.name && (identity.firstName || identity.lastName)) {\n      let fullName = \"\";\n      if (AutofillService.hasValue(identity.firstName)) {\n        fullName = identity.firstName;\n      }\n      if (AutofillService.hasValue(identity.middleName)) {\n        if (fullName !== \"\") {\n          fullName += \" \";\n        }\n        fullName += identity.middleName;\n      }\n      if (AutofillService.hasValue(identity.lastName)) {\n        if (fullName !== \"\") {\n          fullName += \" \";\n        }\n        fullName += identity.lastName;\n      }\n\n      this.makeScriptActionWithValue(fillScript, fullName, fillFields.name, filledFields);\n    }\n\n    if (fillFields.address && AutofillService.hasValue(identity.address1)) {\n      let address = \"\";\n      if (AutofillService.hasValue(identity.address1)) {\n        address = identity.address1;\n      }\n      if (AutofillService.hasValue(identity.address2)) {\n        if (address !== \"\") {\n          address += \", \";\n        }\n        address += identity.address2;\n      }\n      if (AutofillService.hasValue(identity.address3)) {\n        if (address !== \"\") {\n          address += \", \";\n        }\n        address += identity.address3;\n      }\n\n      this.makeScriptActionWithValue(fillScript, address, fillFields.address, filledFields);\n    }\n\n    return fillScript;\n  }\n\n  private isExcludedType(type: string, excludedTypes: string[]) {\n    return excludedTypes.indexOf(type) > -1;\n  }\n\n  private static isFieldMatch(\n    value: string,\n    options: string[],\n    containsOptions?: string[]\n  ): boolean {\n    value = value\n      .trim()\n      .toLowerCase()\n      .replace(/[^a-zA-Z0-9]+/g, \"\");\n    for (let i = 0; i < options.length; i++) {\n      let option = options[i];\n      const checkValueContains = containsOptions == null || containsOptions.indexOf(option) > -1;\n      option = option.toLowerCase().replace(/-/g, \"\");\n      if (value === option || (checkValueContains && value.indexOf(option) > -1)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  private makeScriptAction(\n    fillScript: AutofillScript,\n    cipherData: any,\n    fillFields: { [id: string]: AutofillField },\n    filledFields: { [id: string]: AutofillField },\n    dataProp: string,\n    fieldProp?: string\n  ) {\n    fieldProp = fieldProp || dataProp;\n    this.makeScriptActionWithValue(\n      fillScript,\n      cipherData[dataProp],\n      fillFields[fieldProp],\n      filledFields\n    );\n  }\n\n  private makeScriptActionWithValue(\n    fillScript: AutofillScript,\n    dataValue: any,\n    field: AutofillField,\n    filledFields: { [id: string]: AutofillField }\n  ) {\n    let doFill = false;\n    if (AutofillService.hasValue(dataValue) && field) {\n      if (field.type === \"select-one\" && field.selectInfo && field.selectInfo.options) {\n        for (let i = 0; i < field.selectInfo.options.length; i++) {\n          const option = field.selectInfo.options[i];\n          for (let j = 0; j < option.length; j++) {\n            if (\n              AutofillService.hasValue(option[j]) &&\n              option[j].toLowerCase() === dataValue.toLowerCase()\n            ) {\n              doFill = true;\n              if (option.length > 1) {\n                dataValue = option[1];\n              }\n              break;\n            }\n          }\n\n          if (doFill) {\n            break;\n          }\n        }\n      } else {\n        doFill = true;\n      }\n    }\n\n    if (doFill) {\n      filledFields[field.opid] = field;\n      AutofillService.fillByOpid(fillScript, field, dataValue);\n    }\n  }\n\n  static loadPasswordFields(\n    pageDetails: AutofillPageDetails,\n    canBeHidden: boolean,\n    canBeReadOnly: boolean,\n    mustBeEmpty: boolean,\n    fillNewPassword: boolean\n  ) {\n    const arr: AutofillField[] = [];\n    pageDetails.fields.forEach((f) => {\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        return;\n      }\n\n      const isPassword = f.type === \"password\";\n      const valueIsLikePassword = (value: string) => {\n        if (value == null) {\n          return false;\n        }\n        // Removes all whitespace, _ and - characters\n        // eslint-disable-next-line\n        const cleanedValue = value.toLowerCase().replace(/[\\s_\\-]/g, \"\");\n\n        if (cleanedValue.indexOf(\"password\") < 0) {\n          return false;\n        }\n\n        if (AutoFillConstants.PasswordFieldIgnoreList.some((i) => cleanedValue.indexOf(i) > -1)) {\n          return false;\n        }\n\n        return true;\n      };\n      const isLikePassword = () => {\n        if (f.type !== \"text\") {\n          return false;\n        }\n        if (valueIsLikePassword(f.htmlID)) {\n          return true;\n        }\n        if (valueIsLikePassword(f.htmlName)) {\n          return true;\n        }\n        if (valueIsLikePassword(f.placeholder)) {\n          return true;\n        }\n        return false;\n      };\n      if (\n        !f.disabled &&\n        (canBeReadOnly || !f.readonly) &&\n        (isPassword || isLikePassword()) &&\n        (canBeHidden || f.viewable) &&\n        (!mustBeEmpty || f.value == null || f.value.trim() === \"\") &&\n        (fillNewPassword || f.autoCompleteType !== \"new-password\")\n      ) {\n        arr.push(f);\n      }\n    });\n    return arr;\n  }\n\n  private findUsernameField(\n    pageDetails: AutofillPageDetails,\n    passwordField: AutofillField,\n    canBeHidden: boolean,\n    canBeReadOnly: boolean,\n    withoutForm: boolean\n  ) {\n    let usernameField: AutofillField = null;\n    for (let i = 0; i < pageDetails.fields.length; i++) {\n      const f = pageDetails.fields[i];\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        continue;\n      }\n\n      if (f.elementNumber >= passwordField.elementNumber) {\n        break;\n      }\n\n      if (\n        !f.disabled &&\n        (canBeReadOnly || !f.readonly) &&\n        (withoutForm || f.form === passwordField.form) &&\n        (canBeHidden || f.viewable) &&\n        (f.type === \"text\" || f.type === \"email\" || f.type === \"tel\")\n      ) {\n        usernameField = f;\n\n        if (this.findMatchingFieldIndex(f, AutoFillConstants.UsernameFieldNames) > -1) {\n          // We found an exact match. No need to keep looking.\n          break;\n        }\n      }\n    }\n\n    return usernameField;\n  }\n\n  private findTotpField(\n    pageDetails: AutofillPageDetails,\n    passwordField: AutofillField,\n    canBeHidden: boolean,\n    canBeReadOnly: boolean,\n    withoutForm: boolean\n  ) {\n    let totpField: AutofillField = null;\n    for (let i = 0; i < pageDetails.fields.length; i++) {\n      const f = pageDetails.fields[i];\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        continue;\n      }\n\n      if (\n        !f.disabled &&\n        (canBeReadOnly || !f.readonly) &&\n        (withoutForm || f.form === passwordField.form) &&\n        (canBeHidden || f.viewable) &&\n        (f.type === \"text\" || f.type === \"number\") &&\n        AutofillService.fieldIsFuzzyMatch(f, AutoFillConstants.TotpFieldNames)\n      ) {\n        totpField = f;\n\n        if (\n          this.findMatchingFieldIndex(f, AutoFillConstants.TotpFieldNames) > -1 ||\n          f.autoCompleteType === \"one-time-code\"\n        ) {\n          // We found an exact match. No need to keep looking.\n          break;\n        }\n      }\n    }\n\n    return totpField;\n  }\n\n  private findMatchingFieldIndex(field: AutofillField, names: string[]): number {\n    for (let i = 0; i < names.length; i++) {\n      if (names[i].indexOf(\"=\") > -1) {\n        if (this.fieldPropertyIsPrefixMatch(field, \"htmlID\", names[i], \"id\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"htmlName\", names[i], \"name\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"label-left\", names[i], \"label\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"label-right\", names[i], \"label\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"label-tag\", names[i], \"label\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"label-aria\", names[i], \"label\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"placeholder\", names[i], \"placeholder\")) {\n          return i;\n        }\n      }\n\n      if (this.fieldPropertyIsMatch(field, \"htmlID\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"htmlName\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"label-left\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"label-right\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"label-tag\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"label-aria\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"placeholder\", names[i])) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  private fieldPropertyIsPrefixMatch(\n    field: any,\n    property: string,\n    name: string,\n    prefix: string,\n    separator = \"=\"\n  ): boolean {\n    if (name.indexOf(prefix + separator) === 0) {\n      const sepIndex = name.indexOf(separator);\n      const val = name.substring(sepIndex + 1);\n      return val != null && this.fieldPropertyIsMatch(field, property, val);\n    }\n    return false;\n  }\n\n  private fieldPropertyIsMatch(field: any, property: string, name: string): boolean {\n    let fieldVal = field[property] as string;\n    if (!AutofillService.hasValue(fieldVal)) {\n      return false;\n    }\n\n    fieldVal = fieldVal.trim().replace(/(?:\\r\\n|\\r|\\n)/g, \"\");\n    if (name.startsWith(\"regex=\")) {\n      try {\n        const regexParts = name.split(\"=\", 2);\n        if (regexParts.length === 2) {\n          const regex = new RegExp(regexParts[1], \"i\");\n          return regex.test(fieldVal);\n        }\n      } catch (e) {\n        this.logService.error(e);\n      }\n    } else if (name.startsWith(\"csv=\")) {\n      const csvParts = name.split(\"=\", 2);\n      if (csvParts.length === 2) {\n        const csvVals = csvParts[1].split(\",\");\n        for (let i = 0; i < csvVals.length; i++) {\n          const val = csvVals[i];\n          if (val != null && val.trim().toLowerCase() === fieldVal.toLowerCase()) {\n            return true;\n          }\n        }\n        return false;\n      }\n    }\n\n    return fieldVal.toLowerCase() === name;\n  }\n\n  static fieldIsFuzzyMatch(field: AutofillField, names: string[]): boolean {\n    if (AutofillService.hasValue(field.htmlID) && this.fuzzyMatch(names, field.htmlID)) {\n      return true;\n    }\n    if (AutofillService.hasValue(field.htmlName) && this.fuzzyMatch(names, field.htmlName)) {\n      return true;\n    }\n    if (\n      AutofillService.hasValue(field[\"label-tag\"]) &&\n      this.fuzzyMatch(names, field[\"label-tag\"])\n    ) {\n      return true;\n    }\n    if (AutofillService.hasValue(field.placeholder) && this.fuzzyMatch(names, field.placeholder)) {\n      return true;\n    }\n    if (\n      AutofillService.hasValue(field[\"label-left\"]) &&\n      this.fuzzyMatch(names, field[\"label-left\"])\n    ) {\n      return true;\n    }\n    if (\n      AutofillService.hasValue(field[\"label-top\"]) &&\n      this.fuzzyMatch(names, field[\"label-top\"])\n    ) {\n      return true;\n    }\n    if (\n      AutofillService.hasValue(field[\"label-aria\"]) &&\n      this.fuzzyMatch(names, field[\"label-aria\"])\n    ) {\n      return true;\n    }\n\n    return false;\n  }\n\n  private static fuzzyMatch(options: string[], value: string): boolean {\n    if (options == null || options.length === 0 || value == null || value === \"\") {\n      return false;\n    }\n\n    value = value\n      .replace(/(?:\\r\\n|\\r|\\n)/g, \"\")\n      .trim()\n      .toLowerCase();\n\n    for (let i = 0; i < options.length; i++) {\n      if (value.indexOf(options[i]) > -1) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  static hasValue(str: string): boolean {\n    return Boolean(str && str !== \"\");\n  }\n\n  static setFillScriptForFocus(\n    filledFields: { [id: string]: AutofillField },\n    fillScript: AutofillScript\n  ): AutofillScript {\n    let lastField: AutofillField = null;\n    let lastPasswordField: AutofillField = null;\n\n    for (const opid in filledFields) {\n      // eslint-disable-next-line\n      if (filledFields.hasOwnProperty(opid) && filledFields[opid].viewable) {\n        lastField = filledFields[opid];\n\n        if (filledFields[opid].type === \"password\") {\n          lastPasswordField = filledFields[opid];\n        }\n      }\n    }\n\n    // Prioritize password field over others.\n    if (lastPasswordField) {\n      fillScript.script.push([\"focus_by_opid\", lastPasswordField.opid]);\n    } else if (lastField) {\n      fillScript.script.push([\"focus_by_opid\", lastField.opid]);\n    }\n\n    return fillScript;\n  }\n\n  static fillByOpid(fillScript: AutofillScript, field: AutofillField, value: string): void {\n    if (field.maxLength && value && value.length > field.maxLength) {\n      value = value.substr(0, value.length);\n    }\n    if (field.tagName !== \"span\") {\n      fillScript.script.push([\"click_on_opid\", field.opid]);\n      fillScript.script.push([\"focus_by_opid\", field.opid]);\n    }\n    fillScript.script.push([\"fill_by_opid\", field.opid, value]);\n  }\n\n  static forCustomFieldsOnly(field: AutofillField): boolean {\n    return field.tagName === \"span\";\n  }\n}\n","import {\n  TotpServiceInitOptions,\n  totpServiceFactory,\n} from \"../../../auth/background/service-factories/totp-service.factory\";\nimport {\n  UserVerificationServiceInitOptions,\n  userVerificationServiceFactory,\n} from \"../../../auth/background/service-factories/user-verification-service.factory\";\nimport {\n  EventCollectionServiceInitOptions,\n  eventCollectionServiceFactory,\n} from \"../../../background/service-factories/event-collection-service.factory\";\nimport {\n  settingsServiceFactory,\n  SettingsServiceInitOptions,\n} from \"../../../background/service-factories/settings-service.factory\";\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../../platform/background/service-factories/log-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../platform/background/service-factories/state-service.factory\";\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../../vault/background/service_factories/cipher-service.factory\";\nimport { AutofillService as AbstractAutoFillService } from \"../../services/abstractions/autofill.service\";\nimport AutofillService from \"../../services/autofill.service\";\n\ntype AutoFillServiceOptions = FactoryOptions;\n\nexport type AutoFillServiceInitOptions = AutoFillServiceOptions &\n  CipherServiceInitOptions &\n  StateServiceInitOptions &\n  TotpServiceInitOptions &\n  EventCollectionServiceInitOptions &\n  LogServiceInitOptions &\n  SettingsServiceInitOptions &\n  UserVerificationServiceInitOptions;\n\nexport function autofillServiceFactory(\n  cache: { autofillService?: AbstractAutoFillService } & CachedServices,\n  opts: AutoFillServiceInitOptions\n): Promise<AbstractAutoFillService> {\n  return factory(\n    cache,\n    \"autofillService\",\n    opts,\n    async () =>\n      new AutofillService(\n        await cipherServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await totpServiceFactory(cache, opts),\n        await eventCollectionServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await settingsServiceFactory(cache, opts),\n        await userVerificationServiceFactory(cache, opts)\n      )\n  );\n}\n","import { BrowserApi } from \"../../platform/browser/browser-api\";\n\nexport const clearClipboardAlarmName = \"clearClipboard\";\n\nexport class ClearClipboard {\n  /**\n    We currently rely on an active tab with an injected content script (`../content/misc-utils.ts`) to clear the clipboard via `window.navigator.clipboard.writeText(text)`\n    \n    With https://bugs.chromium.org/p/chromium/issues/detail?id=1160302 it was said that service workers,\n    would have access to the clipboard api and then we could migrate to a simpler solution\n    */\n  static async run() {\n    const activeTabs = await BrowserApi.getActiveTabs();\n    if (!activeTabs || activeTabs.length === 0) {\n      return;\n    }\n\n    BrowserApi.sendTabsMessage(activeTabs[0].id, {\n      command: \"clearClipboard\",\n    });\n  }\n}\n","import { BrowserApi } from \"../../platform/browser/browser-api\";\n\n/**\n * Copies text to the clipboard in a MV3 safe way.\n * @param tab - The tab that the text will be sent to so that it can be copied to the users clipboard this needs to be an active tab or the DOM won't be able to be used to do the action. The tab sent in here should be from a user started action or queried for active tabs.\n * @param text - The text that you want added to the users clipboard.\n */\nexport const copyToClipboard = async (tab: chrome.tabs.Tab, text: string) => {\n  if (tab.id == null) {\n    throw new Error(\"Cannot copy text to clipboard with a tab that does not have an id.\");\n  }\n\n  BrowserApi.sendTabsMessage(tab.id, {\n    command: \"copyText\",\n    text: text,\n  });\n};\n","import { clearClipboardAlarmName } from \"../../autofill/clipboard\";\nimport { BrowserApi } from \"../browser/browser-api\";\n\nexport const alarmKeys = [clearClipboardAlarmName] as const;\nexport type AlarmKeys = (typeof alarmKeys)[number];\n\ntype AlarmState = { [T in AlarmKeys]: number | undefined };\n\nconst alarmState: AlarmState = {\n  clearClipboard: null,\n  //TODO once implemented vaultTimeout: null;\n  //TODO once implemented checkNotifications: null;\n  //TODO once implemented (if necessary) processReload: null;\n};\n\n/**\n * Retrieves the set alarm time (planned execution) for a give an commandName {@link AlarmState}\n * @param commandName A command that has been previously registered with {@link AlarmState}\n * @returns {Promise<number>} null or Unix epoch timestamp when the alarm action is supposed to execute\n * @example\n * // getAlarmTime(clearClipboard)\n */\nexport async function getAlarmTime(commandName: AlarmKeys): Promise<number> {\n  let alarmTime: number;\n  if (BrowserApi.manifestVersion == 3) {\n    const fromSessionStore = await chrome.storage.session.get(commandName);\n    alarmTime = fromSessionStore[commandName];\n  } else {\n    alarmTime = alarmState[commandName];\n  }\n\n  return alarmTime;\n}\n\n/**\n * Registers an action that should execute after the given time has passed\n * @param commandName A command that has been previously registered with {@link AlarmState}\n * @param delay_ms The number of ms from now in which the command should execute from\n * @example\n * // setAlarmTime(clearClipboard, 5000) register the clearClipboard action which will execute when at least 5 seconds from now have passed\n */\nexport async function setAlarmTime(commandName: AlarmKeys, delay_ms: number): Promise<void> {\n  if (!delay_ms || delay_ms === 0) {\n    await this.clearAlarmTime(commandName);\n    return;\n  }\n\n  const time = Date.now() + delay_ms;\n  await setAlarmTimeInternal(commandName, time);\n}\n\n/**\n * Clears the time currently set for a given command\n * @param commandName A command that has been previously registered with {@link AlarmState}\n */\nexport async function clearAlarmTime(commandName: AlarmKeys): Promise<void> {\n  await setAlarmTimeInternal(commandName, null);\n}\n\nasync function setAlarmTimeInternal(commandName: AlarmKeys, time: number): Promise<void> {\n  if (BrowserApi.manifestVersion == 3) {\n    await chrome.storage.session.set({ [commandName]: time });\n  } else {\n    alarmState[commandName] = time;\n  }\n}\n","import { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\nimport { setAlarmTime } from \"../../platform/alarms/alarm-state\";\nimport { BrowserStateService } from \"../../platform/services/abstractions/browser-state.service\";\n\nimport { clearClipboardAlarmName } from \"./clear-clipboard\";\nimport { copyToClipboard } from \"./copy-to-clipboard-command\";\n\nexport class GeneratePasswordToClipboardCommand {\n  constructor(\n    private passwordGenerationService: PasswordGenerationServiceAbstraction,\n    private stateService: BrowserStateService\n  ) {}\n\n  async generatePasswordToClipboard(tab: chrome.tabs.Tab) {\n    const [options] = await this.passwordGenerationService.getOptions();\n    const password = await this.passwordGenerationService.generatePassword(options);\n\n    copyToClipboard(tab, password);\n\n    const clearClipboard = await this.stateService.getClearClipboard();\n\n    if (clearClipboard != null) {\n      await setAlarmTime(clearClipboardAlarmName, clearClipboard * 1000);\n    }\n  }\n}\n","import { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport AutofillPageDetails from \"../models/autofill-page-details\";\nimport { AutofillService } from \"../services/abstractions/autofill.service\";\n\nexport class AutofillTabCommand {\n  constructor(private autofillService: AutofillService) {}\n\n  async doAutofillTabCommand(tab: chrome.tabs.Tab) {\n    if (!tab.id) {\n      throw new Error(\"Tab does not have an id, cannot complete autofill.\");\n    }\n\n    const details = await this.collectPageDetails(tab.id);\n    await this.autofillService.doAutoFillOnTab(\n      [\n        {\n          frameId: 0,\n          tab: tab,\n          details: details,\n        },\n      ],\n      tab,\n      true\n    );\n  }\n\n  async doAutofillTabWithCipherCommand(tab: chrome.tabs.Tab, cipher: CipherView) {\n    if (!tab.id) {\n      throw new Error(\"Tab does not have an id, cannot complete autofill.\");\n    }\n\n    const details = await this.collectPageDetails(tab.id);\n    await this.autofillService.doAutoFill({\n      tab: tab,\n      cipher: cipher,\n      pageDetails: [\n        {\n          frameId: 0,\n          tab: tab,\n          details: details,\n        },\n      ],\n      skipLastUsed: false,\n      skipUsernameOnlyFill: false,\n      onlyEmptyFields: false,\n      onlyVisibleFields: false,\n      fillNewPassword: true,\n      allowTotpAutofill: true,\n    });\n  }\n\n  private async collectPageDetails(tabId: number): Promise<AutofillPageDetails> {\n    return new Promise((resolve, reject) => {\n      chrome.tabs.sendMessage(\n        tabId,\n        {\n          command: \"collectPageDetailsImmediately\",\n        },\n        (response: AutofillPageDetails) => {\n          if (chrome.runtime.lastError) {\n            reject(chrome.runtime.lastError);\n            return;\n          }\n\n          resolve(response);\n        }\n      );\n    });\n  }\n}\n","import { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { EventType } from \"@bitwarden/common/enums\";\nimport { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport {\n  authServiceFactory,\n  AuthServiceInitOptions,\n} from \"../../auth/background/service-factories/auth-service.factory\";\nimport { totpServiceFactory } from \"../../auth/background/service-factories/totp-service.factory\";\nimport LockedVaultPendingNotificationsItem from \"../../background/models/lockedVaultPendingNotificationsItem\";\nimport { eventCollectionServiceFactory } from \"../../background/service-factories/event-collection-service.factory\";\nimport { Account } from \"../../models/account\";\nimport { CachedServices } from \"../../platform/background/service-factories/factory-options\";\nimport { stateServiceFactory } from \"../../platform/background/service-factories/state-service.factory\";\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\nimport { passwordGenerationServiceFactory } from \"../../tools/background/service_factories/password-generation-service.factory\";\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../vault/background/service_factories/cipher-service.factory\";\nimport { autofillServiceFactory } from \"../background/service_factories/autofill-service.factory\";\nimport { copyToClipboard, GeneratePasswordToClipboardCommand } from \"../clipboard\";\nimport { AutofillTabCommand } from \"../commands/autofill-tab-command\";\n\nimport {\n  AUTOFILL_ID,\n  COPY_IDENTIFIER_ID,\n  COPY_PASSWORD_ID,\n  COPY_USERNAME_ID,\n  COPY_VERIFICATIONCODE_ID,\n  GENERATE_PASSWORD_ID,\n  NOOP_COMMAND_SUFFIX,\n} from \"./main-context-menu-handler\";\n\nexport type CopyToClipboardOptions = { text: string; tab: chrome.tabs.Tab };\nexport type CopyToClipboardAction = (options: CopyToClipboardOptions) => void;\nexport type AutofillAction = (tab: chrome.tabs.Tab, cipher: CipherView) => Promise<void>;\n\nexport type GeneratePasswordToClipboardAction = (tab: chrome.tabs.Tab) => Promise<void>;\n\nconst NOT_IMPLEMENTED = (..._args: unknown[]) =>\n  Promise.reject<never>(\"This action is not implemented inside of a service worker context.\");\n\nexport class ContextMenuClickedHandler {\n  constructor(\n    private copyToClipboard: CopyToClipboardAction,\n    private generatePasswordToClipboard: GeneratePasswordToClipboardAction,\n    private autofillAction: AutofillAction,\n    private authService: AuthService,\n    private cipherService: CipherService,\n    private totpService: TotpService,\n    private eventCollectionService: EventCollectionService\n  ) {}\n\n  static async mv3Create(cachedServices: CachedServices) {\n    const stateFactory = new StateFactory(GlobalState, Account);\n    const serviceOptions: AuthServiceInitOptions & CipherServiceInitOptions = {\n      apiServiceOptions: {\n        logoutCallback: NOT_IMPLEMENTED,\n      },\n      cryptoFunctionServiceOptions: {\n        win: self,\n      },\n      encryptServiceOptions: {\n        logMacFailures: false,\n      },\n      i18nServiceOptions: {\n        systemLanguage: chrome.i18n.getUILanguage(),\n      },\n      keyConnectorServiceOptions: {\n        logoutCallback: NOT_IMPLEMENTED,\n      },\n      logServiceOptions: {\n        isDev: false,\n      },\n      platformUtilsServiceOptions: {\n        biometricCallback: NOT_IMPLEMENTED,\n        clipboardWriteCallback: NOT_IMPLEMENTED,\n        win: self,\n      },\n      stateMigrationServiceOptions: {\n        stateFactory: stateFactory,\n      },\n      stateServiceOptions: {\n        stateFactory: stateFactory,\n      },\n    };\n\n    const generatePasswordToClipboardCommand = new GeneratePasswordToClipboardCommand(\n      await passwordGenerationServiceFactory(cachedServices, serviceOptions),\n      await stateServiceFactory(cachedServices, serviceOptions)\n    );\n\n    const autofillCommand = new AutofillTabCommand(\n      await autofillServiceFactory(cachedServices, serviceOptions)\n    );\n\n    return new ContextMenuClickedHandler(\n      (options) => copyToClipboard(options.tab, options.text),\n      (tab) => generatePasswordToClipboardCommand.generatePasswordToClipboard(tab),\n      (tab, cipher) => autofillCommand.doAutofillTabWithCipherCommand(tab, cipher),\n      await authServiceFactory(cachedServices, serviceOptions),\n      await cipherServiceFactory(cachedServices, serviceOptions),\n      await totpServiceFactory(cachedServices, serviceOptions),\n      await eventCollectionServiceFactory(cachedServices, serviceOptions)\n    );\n  }\n\n  static async onClickedListener(\n    info: chrome.contextMenus.OnClickData,\n    tab?: chrome.tabs.Tab,\n    cachedServices: CachedServices = {}\n  ) {\n    const contextMenuClickedHandler = await ContextMenuClickedHandler.mv3Create(cachedServices);\n    await contextMenuClickedHandler.run(info, tab);\n  }\n\n  static async messageListener(\n    message: { command: string; data: LockedVaultPendingNotificationsItem },\n    sender: chrome.runtime.MessageSender,\n    cachedServices: CachedServices\n  ) {\n    if (\n      message.command !== \"unlockCompleted\" ||\n      message.data.target !== \"contextmenus.background\"\n    ) {\n      return;\n    }\n\n    const contextMenuClickedHandler = await ContextMenuClickedHandler.mv3Create(cachedServices);\n    await contextMenuClickedHandler.run(\n      message.data.commandToRetry.msg.data,\n      message.data.commandToRetry.sender.tab\n    );\n  }\n\n  async run(info: chrome.contextMenus.OnClickData, tab?: chrome.tabs.Tab) {\n    switch (info.menuItemId) {\n      case GENERATE_PASSWORD_ID:\n        if (!tab) {\n          return;\n        }\n        await this.generatePasswordToClipboard(tab);\n        break;\n      case COPY_IDENTIFIER_ID:\n        if (!tab) {\n          return;\n        }\n        this.copyToClipboard({ text: await this.getIdentifier(tab, info), tab: tab });\n        break;\n      default:\n        await this.cipherAction(info, tab);\n    }\n  }\n\n  async cipherAction(info: chrome.contextMenus.OnClickData, tab?: chrome.tabs.Tab) {\n    if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n      const retryMessage: LockedVaultPendingNotificationsItem = {\n        commandToRetry: {\n          msg: { command: NOOP_COMMAND_SUFFIX, data: info },\n          sender: { tab: tab },\n        },\n        target: \"contextmenus.background\",\n      };\n      await BrowserApi.tabSendMessageData(\n        tab,\n        \"addToLockedVaultPendingNotifications\",\n        retryMessage\n      );\n\n      await BrowserApi.tabSendMessageData(tab, \"promptForLogin\");\n      return;\n    }\n\n    // NOTE: We don't actually use the first part of this ID, we further switch based on the parentMenuItemId\n    // I would really love to not add it but that is a departure from how it currently works.\n    const id = (info.menuItemId as string).split(\"_\")[1]; // We create all the ids, we can guarantee they are strings\n    let cipher: CipherView | undefined;\n    if (id === NOOP_COMMAND_SUFFIX) {\n      // This NOOP item has come through which is generally only for no access state but since we got here\n      // we are actually unlocked we will do our best to find a good match of an item to autofill this is useful\n      // in scenarios like unlock on autofill\n      const ciphers = await this.cipherService.getAllDecryptedForUrl(tab.url);\n      cipher = ciphers.find((c) => c.reprompt === CipherRepromptType.None);\n    } else {\n      const ciphers = await this.cipherService.getAllDecrypted();\n      cipher = ciphers.find((c) => c.id === id);\n    }\n\n    if (cipher == null) {\n      return;\n    }\n\n    switch (info.parentMenuItemId) {\n      case AUTOFILL_ID:\n        if (tab == null) {\n          return;\n        }\n        await this.autofillAction(tab, cipher);\n        break;\n      case COPY_USERNAME_ID:\n        this.copyToClipboard({ text: cipher.login.username, tab: tab });\n        break;\n      case COPY_PASSWORD_ID:\n        this.copyToClipboard({ text: cipher.login.password, tab: tab });\n        this.eventCollectionService.collect(EventType.Cipher_ClientCopiedPassword, cipher.id);\n        break;\n      case COPY_VERIFICATIONCODE_ID:\n        this.copyToClipboard({ text: await this.totpService.getCode(cipher.login.totp), tab: tab });\n        break;\n    }\n  }\n\n  private async getIdentifier(tab: chrome.tabs.Tab, info: chrome.contextMenus.OnClickData) {\n    return new Promise<string>((resolve, reject) => {\n      BrowserApi.sendTabsMessage(\n        tab.id,\n        { command: \"getClickedElement\" },\n        { frameId: info.frameId },\n        (identifier: string) => {\n          if (chrome.runtime.lastError) {\n            reject(chrome.runtime.lastError);\n            return;\n          }\n\n          resolve(identifier);\n        }\n      );\n    });\n  }\n}\n","import { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { EncryptService } from \"@bitwarden/common/platform/abstractions/encrypt.service\";\nimport { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\nimport { ContainerService } from \"@bitwarden/common/platform/services/container.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\nimport { authServiceFactory } from \"../../auth/background/service-factories/auth-service.factory\";\nimport { Account } from \"../../models/account\";\nimport { stateServiceFactory } from \"../../platform/background/service-factories/state-service.factory\";\nimport { BrowserStateService } from \"../../platform/services/abstractions/browser-state.service\";\nimport IconDetails from \"../../vault/background/models/icon-details\";\nimport { cipherServiceFactory } from \"../../vault/background/service_factories/cipher-service.factory\";\nimport { BrowserApi } from \"../browser/browser-api\";\nimport BrowserPlatformUtilsService from \"../services/browser-platform-utils.service\";\n\nexport type BadgeOptions = {\n  tab?: chrome.tabs.Tab;\n  windowId?: number;\n};\n\nexport class UpdateBadge {\n  private authService: AuthService;\n  private stateService: BrowserStateService;\n  private cipherService: CipherService;\n  private badgeAction: typeof chrome.action | typeof chrome.browserAction;\n  private sidebarAction: OperaSidebarAction | FirefoxSidebarAction;\n  private inited = false;\n  private win: Window & typeof globalThis;\n\n  private static readonly listenedToCommands = [\n    \"updateBadge\",\n    \"loggedIn\",\n    \"unlocked\",\n    \"syncCompleted\",\n    \"bgUpdateContextMenu\",\n    \"editedCipher\",\n    \"addedCipher\",\n    \"deletedCipher\",\n  ];\n\n  static async tabsOnActivatedListener(\n    activeInfo: chrome.tabs.TabActiveInfo,\n    serviceCache: Record<string, unknown>\n  ) {\n    await new UpdateBadge(self).run({\n      tabId: activeInfo.tabId,\n      existingServices: serviceCache,\n      windowId: activeInfo.windowId,\n    });\n  }\n\n  static async tabsOnReplacedListener(\n    addedTabId: number,\n    removedTabId: number,\n    serviceCache: Record<string, unknown>\n  ) {\n    await new UpdateBadge(self).run({ tabId: addedTabId, existingServices: serviceCache });\n  }\n\n  static async tabsOnUpdatedListener(\n    tabId: number,\n    changeInfo: chrome.tabs.TabChangeInfo,\n    tab: chrome.tabs.Tab,\n    serviceCache: Record<string, unknown>\n  ) {\n    await new UpdateBadge(self).run({\n      tabId,\n      existingServices: serviceCache,\n      windowId: tab.windowId,\n    });\n  }\n\n  static async messageListener(\n    message: { command: string; tabId: number },\n    serviceCache: Record<string, unknown>\n  ) {\n    if (!UpdateBadge.listenedToCommands.includes(message.command)) {\n      return;\n    }\n\n    await new UpdateBadge(self).run({ existingServices: serviceCache });\n  }\n\n  constructor(win: Window & typeof globalThis) {\n    this.badgeAction = BrowserApi.getBrowserAction();\n    this.sidebarAction = BrowserApi.getSidebarAction(self);\n    this.win = win;\n  }\n\n  async run(opts?: {\n    tabId?: number;\n    windowId?: number;\n    existingServices?: Record<string, unknown>;\n  }): Promise<void> {\n    await this.initServices(opts?.existingServices);\n\n    const authStatus = await this.authService.getAuthStatus();\n\n    await this.setBadgeBackgroundColor();\n\n    switch (authStatus) {\n      case AuthenticationStatus.LoggedOut: {\n        await this.setLoggedOut();\n        break;\n      }\n      case AuthenticationStatus.Locked: {\n        await this.setLocked();\n        break;\n      }\n      case AuthenticationStatus.Unlocked: {\n        const tab = await this.getTab(opts?.tabId, opts?.windowId);\n        await this.setUnlocked({ tab, windowId: tab?.windowId });\n        break;\n      }\n    }\n  }\n\n  async setLoggedOut(): Promise<void> {\n    await this.setBadgeIcon(\"_gray\");\n    await this.clearBadgeText();\n  }\n\n  async setLocked() {\n    await this.setBadgeIcon(\"_locked\");\n    await this.clearBadgeText();\n  }\n\n  private async clearBadgeText() {\n    const tabs = await BrowserApi.getActiveTabs();\n    if (tabs != null) {\n      tabs.forEach(async (tab) => {\n        if (tab.id != null) {\n          await this.setBadgeText(\"\", tab.id);\n        }\n      });\n    }\n  }\n\n  async setUnlocked(opts: BadgeOptions) {\n    await this.initServices();\n\n    await this.setBadgeIcon(\"\");\n\n    const disableBadgeCounter = await this.stateService.getDisableBadgeCounter();\n    if (disableBadgeCounter) {\n      return;\n    }\n\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(opts?.tab?.url);\n    let countText = ciphers.length == 0 ? \"\" : ciphers.length.toString();\n    if (ciphers.length > 9) {\n      countText = \"9+\";\n    }\n    await this.setBadgeText(countText, opts?.tab?.id);\n  }\n\n  setBadgeBackgroundColor(color = \"#294e5f\") {\n    if (this.badgeAction?.setBadgeBackgroundColor) {\n      this.badgeAction.setBadgeBackgroundColor({ color });\n    }\n    if (this.isOperaSidebar(this.sidebarAction)) {\n      this.sidebarAction.setBadgeBackgroundColor({ color });\n    }\n  }\n\n  setBadgeText(text: string, tabId?: number) {\n    this.setActionText(text, tabId);\n    this.setSideBarText(text, tabId);\n  }\n\n  async setBadgeIcon(iconSuffix: string, windowId?: number) {\n    const options: IconDetails = {\n      path: {\n        19: \"/images/icon19\" + iconSuffix + \".png\",\n        38: \"/images/icon38\" + iconSuffix + \".png\",\n      },\n    };\n    if (windowId && BrowserPlatformUtilsService.isFirefox()) {\n      options.windowId = windowId;\n    }\n\n    await this.setActionIcon(options);\n    await this.setSidebarActionIcon(options);\n  }\n\n  private setActionText(text: string, tabId?: number) {\n    if (this.badgeAction?.setBadgeText) {\n      this.badgeAction.setBadgeText({ text, tabId });\n    }\n  }\n\n  private setSideBarText(text: string, tabId?: number) {\n    if (this.isOperaSidebar(this.sidebarAction)) {\n      this.sidebarAction.setBadgeText({ text, tabId });\n    } else if (this.sidebarAction) {\n      // Firefox\n      const title = `Bitwarden${Utils.isNullOrEmpty(text) ? \"\" : ` [${text}]`}`;\n      this.sidebarAction.setTitle({ title, tabId });\n    }\n  }\n\n  private async setActionIcon(options: IconDetails) {\n    if (!this.badgeAction?.setIcon) {\n      return;\n    }\n\n    if (this.useSyncApiCalls) {\n      this.badgeAction.setIcon(options);\n    } else {\n      await new Promise<void>((resolve) => this.badgeAction.setIcon(options, () => resolve()));\n    }\n  }\n\n  private async setSidebarActionIcon(options: IconDetails) {\n    if (!this.sidebarAction?.setIcon) {\n      return;\n    }\n\n    if (this.isOperaSidebar(this.sidebarAction)) {\n      await new Promise<void>((resolve) =>\n        (this.sidebarAction as OperaSidebarAction).setIcon(options, () => resolve())\n      );\n    } else {\n      await this.sidebarAction.setIcon(options);\n    }\n  }\n\n  private async getTab(tabId?: number, windowId?: number) {\n    return (\n      (await BrowserApi.getTab(tabId)) ??\n      (windowId\n        ? await BrowserApi.tabsQueryFirst({ active: true, windowId })\n        : await BrowserApi.tabsQueryFirst({ active: true, currentWindow: true })) ??\n      (await BrowserApi.tabsQueryFirst({ active: true, lastFocusedWindow: true })) ??\n      (await BrowserApi.tabsQueryFirst({ active: true }))\n    );\n  }\n\n  private get useSyncApiCalls() {\n    return (\n      BrowserPlatformUtilsService.isFirefox() || BrowserPlatformUtilsService.isSafari(this.win)\n    );\n  }\n\n  private async initServices(existingServiceCache?: Record<string, unknown>): Promise<UpdateBadge> {\n    if (this.inited) {\n      return this;\n    }\n\n    const serviceCache: Record<string, unknown> = existingServiceCache || {};\n    const opts = {\n      cryptoFunctionServiceOptions: { win: self },\n      encryptServiceOptions: { logMacFailures: false },\n      logServiceOptions: { isDev: false },\n      platformUtilsServiceOptions: {\n        clipboardWriteCallback: (clipboardValue: string, clearMs: number) =>\n          Promise.reject(\"not implemented\"),\n        biometricCallback: () => Promise.reject(\"not implemented\"),\n        win: self,\n      },\n      stateServiceOptions: {\n        stateFactory: new StateFactory(GlobalState, Account),\n      },\n      stateMigrationServiceOptions: {\n        stateFactory: new StateFactory(GlobalState, Account),\n      },\n      apiServiceOptions: {\n        logoutCallback: () => Promise.reject(\"not implemented\"),\n      },\n      keyConnectorServiceOptions: {\n        logoutCallback: () => Promise.reject(\"not implemented\"),\n      },\n      i18nServiceOptions: {\n        systemLanguage: BrowserApi.getUILanguage(self),\n      },\n    };\n    this.stateService = await stateServiceFactory(serviceCache, opts);\n    this.authService = await authServiceFactory(serviceCache, opts);\n    this.cipherService = await cipherServiceFactory(serviceCache, opts);\n\n    // Needed for cipher decryption\n    if (!self.bitwardenContainerService) {\n      new ContainerService(\n        serviceCache.cryptoService as CryptoService,\n        serviceCache.encryptService as EncryptService\n      ).attachToGlobal(self);\n    }\n\n    this.inited = true;\n\n    return this;\n  }\n\n  private isOperaSidebar(\n    action: OperaSidebarAction | FirefoxSidebarAction\n  ): action is OperaSidebarAction {\n    return action != null && (action as OperaSidebarAction).setBadgeText != null;\n  }\n}\n","import { ReplaySubject } from \"rxjs\";\n\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\n\nimport { browserSession, sessionSync } from \"../decorators/session-sync-observable\";\n\nimport I18nService from \"./i18n.service\";\n\n@browserSession\nexport class BrowserI18nService extends I18nService {\n  @sessionSync({ initializer: (s: string) => s })\n  protected _locale: ReplaySubject<string>;\n\n  constructor(systemLanguage: string, private stateService: StateService) {\n    super(systemLanguage);\n  }\n}\n","import { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\n\nexport default class BrowserMessagingPrivateModeBackgroundService implements MessagingService {\n  send(subscriber: string, arg: any = {}) {\n    const message = Object.assign({}, { command: subscriber }, arg);\n    (window as any).bitwardenPopupMainMessageListener(message);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../../platform/models/domain/symmetric-crypto-key\";\nimport { SendFileData } from \"../data/send-file.data\";\nimport { SendFileView } from \"../view/send-file.view\";\n\nexport class SendFile extends Domain {\n  id: string;\n  size: string;\n  sizeName: string;\n  fileName: EncString;\n\n  constructor(obj?: SendFileData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.size = obj.size;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        sizeName: null,\n        fileName: null,\n      },\n      [\"id\", \"sizeName\"]\n    );\n  }\n\n  async decrypt(key: SymmetricCryptoKey): Promise<SendFileView> {\n    const view = await this.decryptObj(\n      new SendFileView(this),\n      {\n        fileName: null,\n      },\n      null,\n      key\n    );\n    return view;\n  }\n\n  static fromJSON(obj: Jsonify<SendFile>) {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new SendFile(), obj, {\n      fileName: EncString.fromJSON(obj.fileName),\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../../platform/models/domain/symmetric-crypto-key\";\nimport { SendTextData } from \"../data/send-text.data\";\nimport { SendTextView } from \"../view/send-text.view\";\n\nexport class SendText extends Domain {\n  text: EncString;\n  hidden: boolean;\n\n  constructor(obj?: SendTextData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.hidden = obj.hidden;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        text: null,\n      },\n      []\n    );\n  }\n\n  decrypt(key: SymmetricCryptoKey): Promise<SendTextView> {\n    return this.decryptObj(\n      new SendTextView(this),\n      {\n        text: null,\n      },\n      null,\n      key\n    );\n  }\n\n  static fromJSON(obj: Jsonify<SendText>) {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new SendText(), obj, {\n      text: EncString.fromJSON(obj.text),\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Utils } from \"../../../../platform/misc/utils\";\nimport Domain from \"../../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../../platform/models/domain/enc-string\";\nimport { SendType } from \"../../enums/send-type\";\nimport { SendData } from \"../data/send.data\";\nimport { SendView } from \"../view/send.view\";\n\nimport { SendFile } from \"./send-file\";\nimport { SendText } from \"./send-text\";\n\nexport class Send extends Domain {\n  id: string;\n  accessId: string;\n  type: SendType;\n  name: EncString;\n  notes: EncString;\n  file: SendFile;\n  text: SendText;\n  key: EncString;\n  maxAccessCount?: number;\n  accessCount: number;\n  revisionDate: Date;\n  expirationDate: Date;\n  deletionDate: Date;\n  password: string;\n  disabled: boolean;\n  hideEmail: boolean;\n\n  constructor(obj?: SendData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        accessId: null,\n        name: null,\n        notes: null,\n        key: null,\n      },\n      [\"id\", \"accessId\"]\n    );\n\n    this.type = obj.type;\n    this.maxAccessCount = obj.maxAccessCount;\n    this.accessCount = obj.accessCount;\n    this.password = obj.password;\n    this.disabled = obj.disabled;\n    this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;\n    this.deletionDate = obj.deletionDate != null ? new Date(obj.deletionDate) : null;\n    this.expirationDate = obj.expirationDate != null ? new Date(obj.expirationDate) : null;\n    this.hideEmail = obj.hideEmail;\n\n    switch (this.type) {\n      case SendType.Text:\n        this.text = new SendText(obj.text);\n        break;\n      case SendType.File:\n        this.file = new SendFile(obj.file);\n        break;\n      default:\n        break;\n    }\n  }\n\n  async decrypt(): Promise<SendView> {\n    const model = new SendView(this);\n\n    const cryptoService = Utils.getContainerService().getCryptoService();\n\n    try {\n      model.key = await cryptoService.decryptToBytes(this.key, null);\n      model.cryptoKey = await cryptoService.makeSendKey(model.key);\n    } catch (e) {\n      // TODO: error?\n    }\n\n    await this.decryptObj(\n      model,\n      {\n        name: null,\n        notes: null,\n      },\n      null,\n      model.cryptoKey\n    );\n\n    switch (this.type) {\n      case SendType.File:\n        model.file = await this.file.decrypt(model.cryptoKey);\n        break;\n      case SendType.Text:\n        model.text = await this.text.decrypt(model.cryptoKey);\n        break;\n      default:\n        break;\n    }\n\n    return model;\n  }\n\n  static fromJSON(obj: Jsonify<Send>) {\n    if (obj == null) {\n      return null;\n    }\n\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    const expirationDate = obj.expirationDate == null ? null : new Date(obj.expirationDate);\n    const deletionDate = obj.deletionDate == null ? null : new Date(obj.deletionDate);\n\n    return Object.assign(new Send(), obj, {\n      key: EncString.fromJSON(obj.key),\n      name: EncString.fromJSON(obj.name),\n      notes: EncString.fromJSON(obj.notes),\n      text: SendText.fromJSON(obj.text),\n      file: SendFile.fromJSON(obj.file),\n      revisionDate,\n      expirationDate,\n      deletionDate,\n    });\n  }\n}\n","import { BehaviorSubject, concatMap } from \"rxjs\";\n\nimport { SEND_KDF_ITERATIONS } from \"../../../enums\";\nimport { CryptoFunctionService } from \"../../../platform/abstractions/crypto-function.service\";\nimport { CryptoService } from \"../../../platform/abstractions/crypto.service\";\nimport { I18nService } from \"../../../platform/abstractions/i18n.service\";\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { EncArrayBuffer } from \"../../../platform/models/domain/enc-array-buffer\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { SendType } from \"../enums/send-type\";\nimport { SendData } from \"../models/data/send.data\";\nimport { Send } from \"../models/domain/send\";\nimport { SendFile } from \"../models/domain/send-file\";\nimport { SendText } from \"../models/domain/send-text\";\nimport { SendView } from \"../models/view/send.view\";\n\nimport { InternalSendService as InternalSendServiceAbstraction } from \"./send.service.abstraction\";\n\nexport class SendService implements InternalSendServiceAbstraction {\n  protected _sends: BehaviorSubject<Send[]> = new BehaviorSubject([]);\n  protected _sendViews: BehaviorSubject<SendView[]> = new BehaviorSubject([]);\n\n  sends$ = this._sends.asObservable();\n  sendViews$ = this._sendViews.asObservable();\n\n  constructor(\n    private cryptoService: CryptoService,\n    private i18nService: I18nService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private stateService: StateService\n  ) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (Utils.global.bitwardenContainerService == null) {\n            return;\n          }\n\n          if (!unlocked) {\n            this._sends.next([]);\n            this._sendViews.next([]);\n            return;\n          }\n\n          const data = await this.stateService.getEncryptedSends();\n\n          await this.updateObservables(data);\n        })\n      )\n      .subscribe();\n  }\n\n  async clearCache(): Promise<void> {\n    await this._sendViews.next([]);\n  }\n\n  async encrypt(\n    model: SendView,\n    file: File | ArrayBuffer,\n    password: string,\n    key?: SymmetricCryptoKey\n  ): Promise<[Send, EncArrayBuffer]> {\n    let fileData: EncArrayBuffer = null;\n    const send = new Send();\n    send.id = model.id;\n    send.type = model.type;\n    send.disabled = model.disabled;\n    send.hideEmail = model.hideEmail;\n    send.maxAccessCount = model.maxAccessCount;\n    if (model.key == null) {\n      model.key = await this.cryptoFunctionService.randomBytes(16);\n      model.cryptoKey = await this.cryptoService.makeSendKey(model.key);\n    }\n    if (password != null) {\n      const passwordHash = await this.cryptoFunctionService.pbkdf2(\n        password,\n        model.key,\n        \"sha256\",\n        SEND_KDF_ITERATIONS\n      );\n      send.password = Utils.fromBufferToB64(passwordHash);\n    }\n    send.key = await this.cryptoService.encrypt(model.key, key);\n    send.name = await this.cryptoService.encrypt(model.name, model.cryptoKey);\n    send.notes = await this.cryptoService.encrypt(model.notes, model.cryptoKey);\n    if (send.type === SendType.Text) {\n      send.text = new SendText();\n      send.text.text = await this.cryptoService.encrypt(model.text.text, model.cryptoKey);\n      send.text.hidden = model.text.hidden;\n    } else if (send.type === SendType.File) {\n      send.file = new SendFile();\n      if (file != null) {\n        if (file instanceof ArrayBuffer) {\n          const [name, data] = await this.encryptFileData(\n            model.file.fileName,\n            file,\n            model.cryptoKey\n          );\n          send.file.fileName = name;\n          fileData = data;\n        } else {\n          fileData = await this.parseFile(send, file, model.cryptoKey);\n        }\n      }\n    }\n\n    return [send, fileData];\n  }\n\n  get(id: string): Send {\n    const sends = this._sends.getValue();\n    return sends.find((send) => send.id === id);\n  }\n\n  async getFromState(id: string): Promise<Send> {\n    const sends = await this.stateService.getEncryptedSends();\n    // eslint-disable-next-line\n    if (sends == null || !sends.hasOwnProperty(id)) {\n      return null;\n    }\n\n    return new Send(sends[id]);\n  }\n\n  async getAll(): Promise<Send[]> {\n    const sends = await this.stateService.getEncryptedSends();\n    const response: Send[] = [];\n    for (const id in sends) {\n      // eslint-disable-next-line\n      if (sends.hasOwnProperty(id)) {\n        response.push(new Send(sends[id]));\n      }\n    }\n    return response;\n  }\n\n  async getAllDecryptedFromState(): Promise<SendView[]> {\n    let decSends = await this.stateService.getDecryptedSends();\n    if (decSends != null) {\n      return decSends;\n    }\n\n    decSends = [];\n    const hasKey = await this.cryptoService.hasUserKey();\n    if (!hasKey) {\n      throw new Error(\"No user key found.\");\n    }\n\n    const promises: Promise<any>[] = [];\n    const sends = await this.getAll();\n    sends.forEach((send) => {\n      promises.push(send.decrypt().then((f) => decSends.push(f)));\n    });\n\n    await Promise.all(promises);\n    decSends.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n\n    await this.stateService.setDecryptedSends(decSends);\n    return decSends;\n  }\n\n  async upsert(send: SendData | SendData[]): Promise<any> {\n    let sends = await this.stateService.getEncryptedSends();\n    if (sends == null) {\n      sends = {};\n    }\n    if (send instanceof SendData) {\n      const s = send as SendData;\n      sends[s.id] = s;\n    } else {\n      (send as SendData[]).forEach((s) => {\n        sends[s.id] = s;\n      });\n    }\n\n    await this.replace(sends);\n  }\n\n  async clear(userId?: string): Promise<any> {\n    if (userId == null || userId == (await this.stateService.getUserId())) {\n      this._sends.next([]);\n      this._sendViews.next([]);\n    }\n    await this.stateService.setDecryptedSends(null, { userId: userId });\n    await this.stateService.setEncryptedSends(null, { userId: userId });\n  }\n\n  async delete(id: string | string[]): Promise<any> {\n    const sends = await this.stateService.getEncryptedSends();\n    if (sends == null) {\n      return;\n    }\n\n    if (typeof id === \"string\") {\n      if (sends[id] == null) {\n        return;\n      }\n      delete sends[id];\n    } else {\n      (id as string[]).forEach((i) => {\n        delete sends[i];\n      });\n    }\n\n    await this.replace(sends);\n  }\n\n  async replace(sends: { [id: string]: SendData }): Promise<any> {\n    await this.updateObservables(sends);\n    await this.stateService.setEncryptedSends(sends);\n  }\n\n  private parseFile(send: Send, file: File, key: SymmetricCryptoKey): Promise<EncArrayBuffer> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsArrayBuffer(file);\n      reader.onload = async (evt) => {\n        try {\n          const [name, data] = await this.encryptFileData(\n            file.name,\n            evt.target.result as ArrayBuffer,\n            key\n          );\n          send.file.fileName = name;\n          resolve(data);\n        } catch (e) {\n          reject(e);\n        }\n      };\n      reader.onerror = () => {\n        reject(\"Error reading file.\");\n      };\n    });\n  }\n\n  private async encryptFileData(\n    fileName: string,\n    data: ArrayBuffer,\n    key: SymmetricCryptoKey\n  ): Promise<[EncString, EncArrayBuffer]> {\n    const encFileName = await this.cryptoService.encrypt(fileName, key);\n    const encFileData = await this.cryptoService.encryptToBytes(new Uint8Array(data), key);\n    return [encFileName, encFileData];\n  }\n\n  private async updateObservables(sendsMap: { [id: string]: SendData }) {\n    const sends = Object.values(sendsMap || {}).map((f) => new Send(f));\n    this._sends.next(sends);\n\n    if (await this.cryptoService.hasUserKey()) {\n      this._sendViews.next(await this.decryptSends(sends));\n    }\n  }\n\n  private async decryptSends(sends: Send[]) {\n    const decryptSendPromises = sends.map((s) => s.decrypt());\n    const decryptedSends = await Promise.all(decryptSendPromises);\n\n    decryptedSends.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n    return decryptedSends;\n  }\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { Send } from \"@bitwarden/common/tools/send/models/domain/send\";\nimport { SendView } from \"@bitwarden/common/tools/send/models/view/send.view\";\nimport { SendService } from \"@bitwarden/common/tools/send/services/send.service\";\n\nimport { browserSession, sessionSync } from \"../platform/decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserSendService extends SendService {\n  @sessionSync({ initializer: Send.fromJSON, initializeAs: \"array\" })\n  protected _sends: BehaviorSubject<Send[]>;\n  @sessionSync({ initializer: SendView.fromJSON, initializeAs: \"array\" })\n  protected _sendViews: BehaviorSubject<SendView[]>;\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { SearchService } from \"../../abstractions/search.service\";\nimport { VaultTimeoutSettingsService } from \"../../abstractions/vault-timeout/vault-timeout-settings.service\";\nimport { VaultTimeoutService as VaultTimeoutServiceAbstraction } from \"../../abstractions/vault-timeout/vault-timeout.service\";\nimport { AuthService } from \"../../auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"../../auth/enums/authentication-status\";\nimport { VaultTimeoutAction } from \"../../enums/vault-timeout-action.enum\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { MessagingService } from \"../../platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { CipherService } from \"../../vault/abstractions/cipher.service\";\nimport { CollectionService } from \"../../vault/abstractions/collection.service\";\nimport { FolderService } from \"../../vault/abstractions/folder/folder.service.abstraction\";\n\nexport class VaultTimeoutService implements VaultTimeoutServiceAbstraction {\n  private inited = false;\n\n  constructor(\n    private cipherService: CipherService,\n    private folderService: FolderService,\n    private collectionService: CollectionService,\n    private cryptoService: CryptoService,\n    protected platformUtilsService: PlatformUtilsService,\n    private messagingService: MessagingService,\n    private searchService: SearchService,\n    private stateService: StateService,\n    private authService: AuthService,\n    private vaultTimeoutSettingsService: VaultTimeoutSettingsService,\n    private lockedCallback: (userId?: string) => Promise<void> = null,\n    private loggedOutCallback: (expired: boolean, userId?: string) => Promise<void> = null\n  ) {}\n\n  async init(checkOnInterval: boolean) {\n    if (this.inited) {\n      return;\n    }\n    // TODO: Remove after 2023.10 release (https://bitwarden.atlassian.net/browse/PM-3483)\n    await this.migrateKeyForNeverLockIfNeeded();\n\n    this.inited = true;\n    if (checkOnInterval) {\n      this.startCheck();\n    }\n  }\n\n  startCheck() {\n    this.checkVaultTimeout();\n    setInterval(() => this.checkVaultTimeout(), 10 * 1000); // check every 10 seconds\n  }\n\n  async checkVaultTimeout(): Promise<void> {\n    if (await this.platformUtilsService.isViewOpen()) {\n      return;\n    }\n\n    const accounts = await firstValueFrom(this.stateService.accounts$);\n    for (const userId in accounts) {\n      if (userId != null && (await this.shouldLock(userId))) {\n        await this.executeTimeoutAction(userId);\n      }\n    }\n  }\n\n  async lock(userId?: string): Promise<void> {\n    const authed = await this.stateService.getIsAuthenticated({ userId: userId });\n    if (!authed) {\n      return;\n    }\n\n    const availableActions = await firstValueFrom(\n      this.vaultTimeoutSettingsService.availableVaultTimeoutActions$()\n    );\n    const supportsLock = availableActions.includes(VaultTimeoutAction.Lock);\n    if (!supportsLock) {\n      await this.logOut(userId);\n    }\n\n    if (userId == null || userId === (await this.stateService.getUserId())) {\n      this.searchService.clearIndex();\n      await this.folderService.clearCache();\n    }\n\n    await this.stateService.setEverBeenUnlocked(true, { userId: userId });\n    await this.stateService.setUserKeyAutoUnlock(null, { userId: userId });\n    await this.stateService.setCryptoMasterKeyAuto(null, { userId: userId });\n\n    await this.cryptoService.clearUserKey(false, userId);\n    await this.cryptoService.clearMasterKey(userId);\n    await this.cryptoService.clearOrgKeys(true, userId);\n    await this.cryptoService.clearKeyPair(true, userId);\n\n    await this.cipherService.clearCache(userId);\n    await this.collectionService.clearCache(userId);\n\n    this.messagingService.send(\"locked\", { userId: userId });\n\n    if (this.lockedCallback != null) {\n      await this.lockedCallback(userId);\n    }\n  }\n\n  async logOut(userId?: string): Promise<void> {\n    if (this.loggedOutCallback != null) {\n      await this.loggedOutCallback(false, userId);\n    }\n  }\n\n  private async shouldLock(userId: string): Promise<boolean> {\n    const authStatus = await this.authService.getAuthStatus(userId);\n    if (\n      authStatus === AuthenticationStatus.Locked ||\n      authStatus === AuthenticationStatus.LoggedOut\n    ) {\n      return false;\n    }\n\n    const vaultTimeout = await this.vaultTimeoutSettingsService.getVaultTimeout(userId);\n    if (vaultTimeout == null || vaultTimeout < 0) {\n      return false;\n    }\n\n    const lastActive = await this.stateService.getLastActive({ userId: userId });\n    if (lastActive == null) {\n      return false;\n    }\n\n    const vaultTimeoutSeconds = vaultTimeout * 60;\n    const diffSeconds = (new Date().getTime() - lastActive) / 1000;\n    return diffSeconds >= vaultTimeoutSeconds;\n  }\n\n  private async executeTimeoutAction(userId: string): Promise<void> {\n    const timeoutAction = await firstValueFrom(\n      this.vaultTimeoutSettingsService.vaultTimeoutAction$(userId)\n    );\n    timeoutAction === VaultTimeoutAction.LogOut\n      ? await this.logOut(userId)\n      : await this.lock(userId);\n  }\n\n  private async migrateKeyForNeverLockIfNeeded(): Promise<void> {\n    const accounts = await firstValueFrom(this.stateService.accounts$);\n    for (const userId in accounts) {\n      if (userId != null) {\n        await this.cryptoService.migrateAutoKeyIfNeeded(userId);\n      }\n    }\n  }\n}\n","import { VaultTimeoutService as BaseVaultTimeoutService } from \"@bitwarden/common/services/vault-timeout/vault-timeout.service\";\n\nimport { SafariApp } from \"../../browser/safariApp\";\n\nexport default class VaultTimeoutService extends BaseVaultTimeoutService {\n  startCheck() {\n    this.checkVaultTimeout();\n    if (this.platformUtilsService.isSafari()) {\n      this.checkSafari();\n    } else {\n      setInterval(() => this.checkVaultTimeout(), 10 * 1000); // check every 10 seconds\n    }\n  }\n\n  // This is a work-around to safari adding an arbitrary delay to setTimeout and\n  //  setIntervals. It works by calling the native extension which sleeps for 10s,\n  //  efficiently replicating setInterval.\n  async checkSafari() {\n    // eslint-disable-next-line\n    while (true) {\n      try {\n        await SafariApp.sendMessageToApp(\"sleep\");\n        this.checkVaultTimeout();\n      } catch (e) {\n        // eslint-disable-next-line\n        console.log(\"Exception Safari VaultTimeout\", e);\n      }\n    }\n  }\n}\n","import { BehaviorSubject, concatMap } from \"rxjs\";\n\nimport { CryptoService } from \"../../../platform/abstractions/crypto.service\";\nimport { I18nService } from \"../../../platform/abstractions/i18n.service\";\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { CipherService } from \"../../../vault/abstractions/cipher.service\";\nimport { InternalFolderService as InternalFolderServiceAbstraction } from \"../../../vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherData } from \"../../../vault/models/data/cipher.data\";\nimport { FolderData } from \"../../../vault/models/data/folder.data\";\nimport { Folder } from \"../../../vault/models/domain/folder\";\nimport { FolderView } from \"../../../vault/models/view/folder.view\";\n\nexport class FolderService implements InternalFolderServiceAbstraction {\n  protected _folders: BehaviorSubject<Folder[]> = new BehaviorSubject([]);\n  protected _folderViews: BehaviorSubject<FolderView[]> = new BehaviorSubject([]);\n\n  folders$ = this._folders.asObservable();\n  folderViews$ = this._folderViews.asObservable();\n\n  constructor(\n    private cryptoService: CryptoService,\n    private i18nService: I18nService,\n    private cipherService: CipherService,\n    private stateService: StateService\n  ) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (Utils.global.bitwardenContainerService == null) {\n            return;\n          }\n\n          if (!unlocked) {\n            this._folders.next([]);\n            this._folderViews.next([]);\n            return;\n          }\n\n          const data = await this.stateService.getEncryptedFolders();\n\n          await this.updateObservables(data);\n        })\n      )\n      .subscribe();\n  }\n\n  async clearCache(): Promise<void> {\n    this._folderViews.next([]);\n  }\n\n  // TODO: This should be moved to EncryptService or something\n  async encrypt(model: FolderView, key?: SymmetricCryptoKey): Promise<Folder> {\n    const folder = new Folder();\n    folder.id = model.id;\n    folder.name = await this.cryptoService.encrypt(model.name, key);\n    return folder;\n  }\n\n  async get(id: string): Promise<Folder> {\n    const folders = this._folders.getValue();\n\n    return folders.find((folder) => folder.id === id);\n  }\n\n  async getAllFromState(): Promise<Folder[]> {\n    const folders = await this.stateService.getEncryptedFolders();\n    const response: Folder[] = [];\n    for (const id in folders) {\n      // eslint-disable-next-line\n      if (folders.hasOwnProperty(id)) {\n        response.push(new Folder(folders[id]));\n      }\n    }\n    return response;\n  }\n\n  /**\n   * @deprecated For the CLI only\n   * @param id id of the folder\n   */\n  async getFromState(id: string): Promise<Folder> {\n    const foldersMap = await this.stateService.getEncryptedFolders();\n    const folder = foldersMap[id];\n    if (folder == null) {\n      return null;\n    }\n\n    return new Folder(folder);\n  }\n\n  /**\n   * @deprecated Only use in CLI!\n   */\n  async getAllDecryptedFromState(): Promise<FolderView[]> {\n    const data = await this.stateService.getEncryptedFolders();\n    const folders = Object.values(data || {}).map((f) => new Folder(f));\n\n    return this.decryptFolders(folders);\n  }\n\n  async upsert(folder: FolderData | FolderData[]): Promise<void> {\n    let folders = await this.stateService.getEncryptedFolders();\n    if (folders == null) {\n      folders = {};\n    }\n\n    if (folder instanceof FolderData) {\n      const f = folder as FolderData;\n      folders[f.id] = f;\n    } else {\n      (folder as FolderData[]).forEach((f) => {\n        folders[f.id] = f;\n      });\n    }\n\n    await this.updateObservables(folders);\n    await this.stateService.setEncryptedFolders(folders);\n  }\n\n  async replace(folders: { [id: string]: FolderData }): Promise<void> {\n    await this.updateObservables(folders);\n    await this.stateService.setEncryptedFolders(folders);\n  }\n\n  async clear(userId?: string): Promise<any> {\n    if (userId == null || userId == (await this.stateService.getUserId())) {\n      this._folders.next([]);\n      this._folderViews.next([]);\n    }\n    await this.stateService.setEncryptedFolders(null, { userId: userId });\n  }\n\n  async delete(id: string | string[]): Promise<any> {\n    const folders = await this.stateService.getEncryptedFolders();\n    if (folders == null) {\n      return;\n    }\n\n    if (typeof id === \"string\") {\n      if (folders[id] == null) {\n        return;\n      }\n      delete folders[id];\n    } else {\n      (id as string[]).forEach((i) => {\n        delete folders[i];\n      });\n    }\n\n    await this.updateObservables(folders);\n    await this.stateService.setEncryptedFolders(folders);\n\n    // Items in a deleted folder are re-assigned to \"No Folder\"\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers != null) {\n      const updates: CipherData[] = [];\n      for (const cId in ciphers) {\n        if (ciphers[cId].folderId === id) {\n          ciphers[cId].folderId = null;\n          updates.push(ciphers[cId]);\n        }\n      }\n      if (updates.length > 0) {\n        this.cipherService.upsert(updates);\n      }\n    }\n  }\n\n  private async updateObservables(foldersMap: { [id: string]: FolderData }) {\n    const folders = Object.values(foldersMap || {}).map((f) => new Folder(f));\n\n    this._folders.next(folders);\n\n    if (await this.cryptoService.hasUserKey()) {\n      this._folderViews.next(await this.decryptFolders(folders));\n    }\n  }\n\n  private async decryptFolders(folders: Folder[]) {\n    const decryptFolderPromises = folders.map((f) => f.decrypt());\n    const decryptedFolders = await Promise.all(decryptFolderPromises);\n\n    decryptedFolders.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n\n    const noneFolder = new FolderView();\n    noneFolder.name = this.i18nService.t(\"noneFolder\");\n    decryptedFolders.push(noneFolder);\n\n    return decryptedFolders;\n  }\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { Folder } from \"@bitwarden/common/vault/models/domain/folder\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\nimport { FolderService as BaseFolderService } from \"@bitwarden/common/vault/services/folder/folder.service\";\n\nimport { browserSession, sessionSync } from \"../../platform/decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserFolderService extends BaseFolderService {\n  @sessionSync({ initializer: Folder.fromJSON, initializeAs: \"array\" })\n  protected _folders: BehaviorSubject<Folder[]>;\n  @sessionSync({ initializer: FolderView.fromJSON, initializeAs: \"array\" })\n  protected _folderViews: BehaviorSubject<FolderView[]>;\n}\n","import { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport { CipherStatus } from \"./cipher-status.model\";\n\nexport type VaultFilterFunction = (cipher: CipherView) => boolean;\n\nexport class VaultFilter {\n  cipherType?: CipherType;\n  selectedCollection = false; // This is needed because of how the \"Unassigned\" collection works. It has a null id.\n  selectedCollectionId?: string;\n  status?: CipherStatus;\n  selectedFolder = false; // This is needed because of how the \"No Folder\" folder works. It has a null id.\n  selectedFolderId?: string;\n  selectedOrganizationId?: string;\n  myVaultOnly = false;\n  refreshCollectionsAndFolders = false;\n\n  constructor(init?: Partial<VaultFilter>) {\n    Object.assign(this, init);\n  }\n\n  resetFilter() {\n    this.cipherType = null;\n    this.status = null;\n    this.selectedCollection = false;\n    this.selectedCollectionId = null;\n    this.selectedFolder = false;\n    this.selectedFolderId = null;\n  }\n\n  resetOrganization() {\n    this.myVaultOnly = false;\n    this.selectedOrganizationId = null;\n    this.resetFilter();\n  }\n\n  buildFilter(): VaultFilterFunction {\n    return (cipher) => {\n      let cipherPassesFilter = true;\n      if (this.status === \"favorites\" && cipherPassesFilter) {\n        cipherPassesFilter = cipher.favorite;\n      }\n      if (this.status === \"trash\" && cipherPassesFilter) {\n        cipherPassesFilter = cipher.isDeleted;\n      }\n      if (this.cipherType != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.type === this.cipherType;\n      }\n      if (this.selectedFolder && this.selectedFolderId == null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.folderId == null;\n      }\n      if (this.selectedFolder && this.selectedFolderId != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.folderId === this.selectedFolderId;\n      }\n      if (this.selectedCollection && this.selectedCollectionId == null && cipherPassesFilter) {\n        cipherPassesFilter =\n          cipher.organizationId != null &&\n          (cipher.collectionIds == null || cipher.collectionIds.length === 0);\n      }\n      if (this.selectedCollection && this.selectedCollectionId != null && cipherPassesFilter) {\n        cipherPassesFilter =\n          cipher.collectionIds != null && cipher.collectionIds.includes(this.selectedCollectionId);\n      }\n      if (this.selectedOrganizationId != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.organizationId === this.selectedOrganizationId;\n      }\n      if (this.myVaultOnly && cipherPassesFilter) {\n        cipherPassesFilter = cipher.organizationId === null;\n      }\n      return cipherPassesFilter;\n    };\n  }\n}\n","import { ITreeNodeObject, TreeNode } from \"@bitwarden/common/models/domain/tree-node\";\n\nexport class DynamicTreeNode<T extends ITreeNodeObject> {\n  fullList: T[];\n  nestedList: TreeNode<T>[];\n\n  hasId(id: string): boolean {\n    return this.fullList != null && this.fullList.filter((i: T) => i.id === id).length > 0;\n  }\n\n  constructor(init?: Partial<DynamicTreeNode<T>>) {\n    Object.assign(this, init);\n  }\n}\n","import { Observable } from \"rxjs\";\n\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { FolderData } from \"../../models/data/folder.data\";\nimport { Folder } from \"../../models/domain/folder\";\nimport { FolderView } from \"../../models/view/folder.view\";\n\nexport abstract class FolderService {\n  folders$: Observable<Folder[]>;\n  folderViews$: Observable<FolderView[]>;\n\n  clearCache: () => Promise<void>;\n  encrypt: (model: FolderView, key?: SymmetricCryptoKey) => Promise<Folder>;\n  get: (id: string) => Promise<Folder>;\n  getAllFromState: () => Promise<Folder[]>;\n  /**\n   * @deprecated Only use in CLI!\n   */\n  getFromState: (id: string) => Promise<Folder>;\n  /**\n   * @deprecated Only use in CLI!\n   */\n  getAllDecryptedFromState: () => Promise<FolderView[]>;\n}\n\nexport abstract class InternalFolderService extends FolderService {\n  upsert: (folder: FolderData | FolderData[]) => Promise<void>;\n  replace: (folders: { [id: string]: FolderData }) => Promise<void>;\n  clear: (userId: string) => Promise<any>;\n  delete: (id: string | string[]) => Promise<any>;\n}\n","import { UriMatchType } from \"../../enums\";\nimport { SymmetricCryptoKey } from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { CipherType } from \"../enums/cipher-type\";\nimport { CipherData } from \"../models/data/cipher.data\";\nimport { Cipher } from \"../models/domain/cipher\";\nimport { Field } from \"../models/domain/field\";\nimport { CipherView } from \"../models/view/cipher.view\";\nimport { FieldView } from \"../models/view/field.view\";\n\nexport abstract class CipherService {\n  clearCache: (userId?: string) => Promise<void>;\n  encrypt: (\n    model: CipherView,\n    key?: SymmetricCryptoKey,\n    originalCipher?: Cipher\n  ) => Promise<Cipher>;\n  encryptFields: (fieldsModel: FieldView[], key: SymmetricCryptoKey) => Promise<Field[]>;\n  encryptField: (fieldModel: FieldView, key: SymmetricCryptoKey) => Promise<Field>;\n  get: (id: string) => Promise<Cipher>;\n  getAll: () => Promise<Cipher[]>;\n  getAllDecrypted: () => Promise<CipherView[]>;\n  getAllDecryptedForGrouping: (groupingId: string, folder?: boolean) => Promise<CipherView[]>;\n  getAllDecryptedForUrl: (\n    url: string,\n    includeOtherTypes?: CipherType[],\n    defaultMatch?: UriMatchType\n  ) => Promise<CipherView[]>;\n  getAllFromApiForOrganization: (organizationId: string) => Promise<CipherView[]>;\n  getLastUsedForUrl: (url: string, autofillOnPageLoad: boolean) => Promise<CipherView>;\n  getLastLaunchedForUrl: (url: string, autofillOnPageLoad: boolean) => Promise<CipherView>;\n  getNextCipherForUrl: (url: string) => Promise<CipherView>;\n  updateLastUsedIndexForUrl: (url: string) => void;\n  updateLastUsedDate: (id: string) => Promise<void>;\n  updateLastLaunchedDate: (id: string) => Promise<void>;\n  saveNeverDomain: (domain: string) => Promise<void>;\n  createWithServer: (cipher: Cipher, orgAdmin?: boolean) => Promise<any>;\n  updateWithServer: (cipher: Cipher, orgAdmin?: boolean, isNotClone?: boolean) => Promise<any>;\n  shareWithServer: (\n    cipher: CipherView,\n    organizationId: string,\n    collectionIds: string[]\n  ) => Promise<any>;\n  shareManyWithServer: (\n    ciphers: CipherView[],\n    organizationId: string,\n    collectionIds: string[]\n  ) => Promise<any>;\n  saveAttachmentWithServer: (\n    cipher: Cipher,\n    unencryptedFile: any,\n    admin?: boolean\n  ) => Promise<Cipher>;\n  saveAttachmentRawWithServer: (\n    cipher: Cipher,\n    filename: string,\n    data: ArrayBuffer,\n    admin?: boolean\n  ) => Promise<Cipher>;\n  saveCollectionsWithServer: (cipher: Cipher) => Promise<any>;\n  upsert: (cipher: CipherData | CipherData[]) => Promise<any>;\n  replace: (ciphers: { [id: string]: CipherData }) => Promise<any>;\n  clear: (userId: string) => Promise<any>;\n  moveManyWithServer: (ids: string[], folderId: string) => Promise<any>;\n  delete: (id: string | string[]) => Promise<any>;\n  deleteWithServer: (id: string, asAdmin?: boolean) => Promise<any>;\n  deleteManyWithServer: (ids: string[], asAdmin?: boolean) => Promise<any>;\n  deleteAttachment: (id: string, attachmentId: string) => Promise<void>;\n  deleteAttachmentWithServer: (id: string, attachmentId: string) => Promise<void>;\n  sortCiphersByLastUsed: (a: CipherView, b: CipherView) => number;\n  sortCiphersByLastUsedThenName: (a: CipherView, b: CipherView) => number;\n  getLocaleSortingFunction: () => (a: CipherView, b: CipherView) => number;\n  softDelete: (id: string | string[]) => Promise<any>;\n  softDeleteWithServer: (id: string, asAdmin?: boolean) => Promise<any>;\n  softDeleteManyWithServer: (ids: string[], asAdmin?: boolean) => Promise<any>;\n  restore: (\n    cipher: { id: string; revisionDate: string } | { id: string; revisionDate: string }[]\n  ) => Promise<any>;\n  restoreWithServer: (id: string, asAdmin?: boolean) => Promise<any>;\n  restoreManyWithServer: (\n    ids: string[],\n    organizationId?: string,\n    asAdmin?: boolean\n  ) => Promise<void>;\n}\n","import { TreeNode } from \"../../models/domain/tree-node\";\nimport { CollectionData } from \"../models/data/collection.data\";\nimport { Collection } from \"../models/domain/collection\";\nimport { CollectionView } from \"../models/view/collection.view\";\n\nexport abstract class CollectionService {\n  clearCache: (userId?: string) => Promise<void>;\n  encrypt: (model: CollectionView) => Promise<Collection>;\n  decryptMany: (collections: Collection[]) => Promise<CollectionView[]>;\n  get: (id: string) => Promise<Collection>;\n  getAll: () => Promise<Collection[]>;\n  getAllDecrypted: () => Promise<CollectionView[]>;\n  getAllNested: (collections?: CollectionView[]) => Promise<TreeNode<CollectionView>[]>;\n  getNested: (id: string) => Promise<TreeNode<CollectionView>>;\n  upsert: (collection: CollectionData | CollectionData[]) => Promise<any>;\n  replace: (collections: { [id: string]: CollectionData }) => Promise<any>;\n  clear: (userId: string) => Promise<any>;\n  delete: (id: string | string[]) => Promise<any>;\n}\n","import { Observable } from \"rxjs\";\n\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport { PolicyType } from \"../../enums\";\nimport { PolicyData } from \"../../models/data/policy.data\";\nimport { MasterPasswordPolicyOptions } from \"../../models/domain/master-password-policy-options\";\nimport { Policy } from \"../../models/domain/policy\";\nimport { ResetPasswordPolicyOptions } from \"../../models/domain/reset-password-policy-options\";\nimport { PolicyResponse } from \"../../models/response/policy.response\";\n\nexport abstract class PolicyService {\n  policies$: Observable<Policy[]>;\n  get$: (policyType: PolicyType, policyFilter?: (policy: Policy) => boolean) => Observable<Policy>;\n  masterPasswordPolicyOptions$: (policies?: Policy[]) => Observable<MasterPasswordPolicyOptions>;\n  policyAppliesToActiveUser$: (\n    policyType: PolicyType,\n    policyFilter?: (policy: Policy) => boolean\n  ) => Observable<boolean>;\n\n  /**\n   * @deprecated Do not call this, use the policies$ observable collection\n   */\n  getAll: (type?: PolicyType, userId?: string) => Promise<Policy[]>;\n  evaluateMasterPassword: (\n    passwordStrength: number,\n    newPassword: string,\n    enforcedPolicyOptions?: MasterPasswordPolicyOptions\n  ) => boolean;\n  getResetPasswordPolicyOptions: (\n    policies: Policy[],\n    orgId: string\n  ) => [ResetPasswordPolicyOptions, boolean];\n  mapPoliciesFromToken: (policiesResponse: ListResponse<PolicyResponse>) => Policy[];\n  policyAppliesToUser: (\n    policyType: PolicyType,\n    policyFilter?: (policy: Policy) => boolean,\n    userId?: string\n  ) => Promise<boolean>;\n}\n\nexport abstract class InternalPolicyService extends PolicyService {\n  upsert: (policy: PolicyData) => Promise<any>;\n  replace: (policies: { [id: string]: PolicyData }) => Promise<void>;\n  clear: (userId?: string) => Promise<any>;\n}\n","import { Injectable } from \"@angular/core\";\nimport { firstValueFrom, from, mergeMap, Observable } from \"rxjs\";\n\nimport {\n  isMember,\n  OrganizationService,\n} from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { ServiceUtils } from \"@bitwarden/common/misc/serviceUtils\";\nimport { TreeNode } from \"@bitwarden/common/models/domain/tree-node\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CollectionService } from \"@bitwarden/common/vault/abstractions/collection.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { CollectionView } from \"@bitwarden/common/vault/models/view/collection.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\nimport { DeprecatedVaultFilterService as DeprecatedVaultFilterServiceAbstraction } from \"../../abstractions/deprecated-vault-filter.service\";\nimport { DynamicTreeNode } from \"../models/dynamic-tree-node.model\";\n\nconst NestingDelimiter = \"/\";\n\n@Injectable()\nexport class VaultFilterService implements DeprecatedVaultFilterServiceAbstraction {\n  constructor(\n    protected stateService: StateService,\n    protected organizationService: OrganizationService,\n    protected folderService: FolderService,\n    protected cipherService: CipherService,\n    protected collectionService: CollectionService,\n    protected policyService: PolicyService\n  ) {}\n\n  async storeCollapsedFilterNodes(collapsedFilterNodes: Set<string>): Promise<void> {\n    await this.stateService.setCollapsedGroupings(Array.from(collapsedFilterNodes));\n  }\n\n  async buildCollapsedFilterNodes(): Promise<Set<string>> {\n    return new Set(await this.stateService.getCollapsedGroupings());\n  }\n\n  async buildOrganizations(): Promise<Organization[]> {\n    let organizations = await this.organizationService.getAll();\n    if (organizations != null) {\n      organizations = organizations.filter(isMember).sort((a, b) => a.name.localeCompare(b.name));\n    }\n\n    return organizations;\n  }\n\n  buildNestedFolders(organizationId?: string): Observable<DynamicTreeNode<FolderView>> {\n    const transformation = async (storedFolders: FolderView[]) => {\n      let folders: FolderView[];\n\n      // If no org or \"My Vault\" is selected, show all folders\n      if (organizationId == null || organizationId == \"MyVault\") {\n        folders = storedFolders;\n      } else {\n        // Otherwise, show only folders that have ciphers from the selected org and the \"no folder\" folder\n        const ciphers = await this.cipherService.getAllDecrypted();\n        const orgCiphers = ciphers.filter((c) => c.organizationId == organizationId);\n        folders = storedFolders.filter(\n          (f) => orgCiphers.some((oc) => oc.folderId == f.id) || f.id == null\n        );\n      }\n\n      const nestedFolders = await this.getAllFoldersNested(folders);\n      return new DynamicTreeNode<FolderView>({\n        fullList: folders,\n        nestedList: nestedFolders,\n      });\n    };\n\n    return this.folderService.folderViews$.pipe(\n      mergeMap((folders) => from(transformation(folders)))\n    );\n  }\n\n  async buildCollections(organizationId?: string): Promise<DynamicTreeNode<CollectionView>> {\n    const storedCollections = await this.collectionService.getAllDecrypted();\n    let collections: CollectionView[];\n    if (organizationId != null) {\n      collections = storedCollections.filter((c) => c.organizationId === organizationId);\n    } else {\n      collections = storedCollections;\n    }\n    const nestedCollections = await this.collectionService.getAllNested(collections);\n    return new DynamicTreeNode<CollectionView>({\n      fullList: collections,\n      nestedList: nestedCollections,\n    });\n  }\n\n  async checkForSingleOrganizationPolicy(): Promise<boolean> {\n    return await firstValueFrom(\n      this.policyService.policyAppliesToActiveUser$(PolicyType.SingleOrg)\n    );\n  }\n\n  async checkForPersonalOwnershipPolicy(): Promise<boolean> {\n    return await firstValueFrom(\n      this.policyService.policyAppliesToActiveUser$(PolicyType.PersonalOwnership)\n    );\n  }\n\n  protected async getAllFoldersNested(folders: FolderView[]): Promise<TreeNode<FolderView>[]> {\n    const nodes: TreeNode<FolderView>[] = [];\n    folders.forEach((f) => {\n      const folderCopy = new FolderView();\n      folderCopy.id = f.id;\n      folderCopy.revisionDate = f.revisionDate;\n      const parts = f.name != null ? f.name.replace(/^\\/+|\\/+$/g, \"\").split(NestingDelimiter) : [];\n      ServiceUtils.nestedTraverse(nodes, 0, parts, folderCopy, null, NestingDelimiter);\n    });\n    return nodes;\n  }\n\n  async getFolderNested(id: string): Promise<TreeNode<FolderView>> {\n    const folders = await this.getAllFoldersNested(\n      await firstValueFrom(this.folderService.folderViews$)\n    );\n    return ServiceUtils.getTreeNodeObjectFromList(folders, id) as TreeNode<FolderView>;\n  }\n}\n","import { VaultFilter } from \"@bitwarden/angular/vault/vault-filter/models/vault-filter.model\";\nimport { VaultFilterService as BaseVaultFilterService } from \"@bitwarden/angular/vault/vault-filter/services/vault-filter.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CollectionService } from \"@bitwarden/common/vault/abstractions/collection.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nexport class VaultFilterService extends BaseVaultFilterService {\n  vaultFilter: VaultFilter = new VaultFilter();\n\n  allVaults = \"allVaults\";\n  myVault = \"myVault\";\n\n  constructor(\n    stateService: StateService,\n    organizationService: OrganizationService,\n    folderService: FolderService,\n    cipherService: CipherService,\n    collectionService: CollectionService,\n    policyService: PolicyService\n  ) {\n    super(\n      stateService,\n      organizationService,\n      folderService,\n      cipherService,\n      collectionService,\n      policyService\n    );\n    this.vaultFilter.myVaultOnly = false;\n    this.vaultFilter.selectedOrganizationId = null;\n  }\n\n  getVaultFilter() {\n    return this.vaultFilter;\n  }\n\n  setVaultFilter(filter: string) {\n    if (filter === this.allVaults) {\n      this.vaultFilter.myVaultOnly = false;\n      this.vaultFilter.selectedOrganizationId = null;\n    } else if (filter === this.myVault) {\n      this.vaultFilter.myVaultOnly = true;\n      this.vaultFilter.selectedOrganizationId = null;\n    } else {\n      this.vaultFilter.myVaultOnly = false;\n      this.vaultFilter.selectedOrganizationId = filter;\n    }\n  }\n\n  clear() {\n    this.setVaultFilter(this.allVaults);\n  }\n\n  filterCipherForSelectedVault(cipher: CipherView) {\n    if (!this.vaultFilter.selectedOrganizationId && !this.vaultFilter.myVaultOnly) {\n      return false;\n    }\n    if (this.vaultFilter.selectedOrganizationId) {\n      if (cipher.organizationId === this.vaultFilter.selectedOrganizationId) {\n        return false;\n      }\n    } else if (this.vaultFilter.myVaultOnly) {\n      if (!cipher.organizationId) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n","import { VaultTimeoutService } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\nimport { BrowserApi } from \"../platform/browser/browser-api\";\n\nimport MainBackground from \"./main.background\";\nimport LockedVaultPendingNotificationsItem from \"./models/lockedVaultPendingNotificationsItem\";\n\nexport default class CommandsBackground {\n  private isSafari: boolean;\n  private isVivaldi: boolean;\n\n  constructor(\n    private main: MainBackground,\n    private passwordGenerationService: PasswordGenerationServiceAbstraction,\n    private platformUtilsService: PlatformUtilsService,\n    private vaultTimeoutService: VaultTimeoutService,\n    private authService: AuthService\n  ) {\n    this.isSafari = this.platformUtilsService.isSafari();\n    this.isVivaldi = this.platformUtilsService.isVivaldi();\n  }\n\n  async init() {\n    BrowserApi.messageListener(\n      \"commands.background\",\n      async (msg: any, sender: chrome.runtime.MessageSender, sendResponse: any) => {\n        if (msg.command === \"unlockCompleted\" && msg.data.target === \"commands.background\") {\n          await this.processCommand(\n            msg.data.commandToRetry.msg.command,\n            msg.data.commandToRetry.sender\n          );\n        }\n      }\n    );\n\n    if (chrome && chrome.commands) {\n      chrome.commands.onCommand.addListener(async (command: string) => {\n        await this.processCommand(command);\n      });\n    }\n  }\n\n  private async processCommand(command: string, sender?: chrome.runtime.MessageSender) {\n    switch (command) {\n      case \"generate_password\":\n        await this.generatePasswordToClipboard();\n        break;\n      case \"autofill_login\":\n        await this.autoFillLogin(sender ? sender.tab : null);\n        break;\n      case \"open_popup\":\n        await this.openPopup();\n        break;\n      case \"lock_vault\":\n        await this.vaultTimeoutService.lock();\n        break;\n      default:\n        break;\n    }\n  }\n\n  private async generatePasswordToClipboard() {\n    const options = (await this.passwordGenerationService.getOptions())?.[0] ?? {};\n    const password = await this.passwordGenerationService.generatePassword(options);\n    this.platformUtilsService.copyToClipboard(password, { window: window });\n    this.passwordGenerationService.addHistory(password);\n  }\n\n  private async autoFillLogin(tab?: chrome.tabs.Tab) {\n    if (!tab) {\n      tab = await BrowserApi.getTabFromCurrentWindowId();\n    }\n\n    if (tab == null) {\n      return;\n    }\n\n    if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n      const retryMessage: LockedVaultPendingNotificationsItem = {\n        commandToRetry: {\n          msg: { command: \"autofill_login\" },\n          sender: { tab: tab },\n        },\n        target: \"commands.background\",\n      };\n      await BrowserApi.tabSendMessageData(\n        tab,\n        \"addToLockedVaultPendingNotifications\",\n        retryMessage\n      );\n\n      BrowserApi.tabSendMessageData(tab, \"promptForLogin\");\n      return;\n    }\n\n    await this.main.collectPageDetailsForContentScript(tab, \"autofill_cmd\");\n  }\n\n  private async openPopup() {\n    // Chrome APIs cannot open popup\n    if (!this.isSafari) {\n      return;\n    }\n\n    this.main.openPopup();\n  }\n}\n","import { NotificationsService } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout.service\";\nimport { VaultTimeoutAction } from \"@bitwarden/common/enums/vault-timeout-action.enum\";\n\nimport { BrowserStateService } from \"../platform/services/abstractions/browser-state.service\";\n\nconst IdleInterval = 60 * 5; // 5 minutes\n\nexport default class IdleBackground {\n  private idle: any;\n  private idleTimer: number = null;\n  private idleState = \"active\";\n\n  constructor(\n    private vaultTimeoutService: VaultTimeoutService,\n    private stateService: BrowserStateService,\n    private notificationsService: NotificationsService\n  ) {\n    this.idle = chrome.idle || (browser != null ? browser.idle : null);\n  }\n\n  async init() {\n    if (!this.idle) {\n      return;\n    }\n\n    const idleHandler = (newState: string) => {\n      if (newState === \"active\") {\n        this.notificationsService.reconnectFromActivity();\n      } else {\n        this.notificationsService.disconnectFromInactivity();\n      }\n    };\n    if (this.idle.onStateChanged && this.idle.setDetectionInterval) {\n      this.idle.setDetectionInterval(IdleInterval);\n      this.idle.onStateChanged.addListener(idleHandler);\n    } else {\n      this.pollIdle(idleHandler);\n    }\n\n    if (this.idle.onStateChanged) {\n      this.idle.onStateChanged.addListener(async (newState: string) => {\n        if (newState === \"locked\") {\n          // If the screen is locked or the screensaver activates\n          const timeout = await this.stateService.getVaultTimeout();\n          if (timeout === -2) {\n            // On System Lock vault timeout option\n            const action = await this.stateService.getVaultTimeoutAction();\n            if (action === VaultTimeoutAction.LogOut) {\n              await this.vaultTimeoutService.logOut();\n            } else {\n              await this.vaultTimeoutService.lock();\n            }\n          }\n        }\n      });\n    }\n  }\n\n  private pollIdle(handler: (newState: string) => void) {\n    if (this.idleTimer != null) {\n      window.clearTimeout(this.idleTimer);\n      this.idleTimer = null;\n    }\n    this.idle.queryState(IdleInterval, (state: string) => {\n      if (state !== this.idleState) {\n        this.idleState = state;\n        handler(state);\n      }\n      this.idleTimer = window.setTimeout(() => this.pollIdle(handler), 5000);\n    });\n  }\n}\n","import { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { AppIdService } from \"@bitwarden/common/platform/abstractions/app-id.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { EncString } from \"@bitwarden/common/platform/models/domain/enc-string\";\nimport {\n  MasterKey,\n  SymmetricCryptoKey,\n  UserKey,\n} from \"@bitwarden/common/platform/models/domain/symmetric-crypto-key\";\n\nimport { BrowserApi } from \"../platform/browser/browser-api\";\n\nimport RuntimeBackground from \"./runtime.background\";\n\nconst MessageValidTimeout = 10 * 1000;\nconst EncryptionAlgorithm = \"sha1\";\n\ntype Message = {\n  command: string;\n\n  // Filled in by this service\n  userId?: string;\n  timestamp?: number;\n\n  // Used for sharing secret\n  publicKey?: string;\n};\n\ntype OuterMessage = {\n  message: Message | EncString;\n  appId: string;\n};\n\ntype ReceiveMessage = {\n  timestamp: number;\n  command: string;\n  response?: any;\n\n  // Unlock key\n  keyB64?: string;\n  userKeyB64?: string;\n};\n\ntype ReceiveMessageOuter = {\n  command: string;\n  appId: string;\n\n  // Should only have one of these.\n  message?: EncString;\n  sharedSecret?: string;\n};\n\nexport class NativeMessagingBackground {\n  private connected = false;\n  private connecting: boolean;\n  private port: browser.runtime.Port | chrome.runtime.Port;\n\n  private resolver: any = null;\n  private privateKey: Uint8Array = null;\n  private publicKey: Uint8Array = null;\n  private secureSetupResolve: any = null;\n  private sharedSecret: SymmetricCryptoKey;\n  private appId: string;\n  private validatingFingerprint: boolean;\n\n  constructor(\n    private cryptoService: CryptoService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private runtimeBackground: RuntimeBackground,\n    private i18nService: I18nService,\n    private messagingService: MessagingService,\n    private appIdService: AppIdService,\n    private platformUtilsService: PlatformUtilsService,\n    private stateService: StateService,\n    private logService: LogService,\n    private authService: AuthService\n  ) {\n    this.stateService.setBiometricFingerprintValidated(false);\n\n    if (chrome?.permissions?.onAdded) {\n      // Reload extension to activate nativeMessaging\n      chrome.permissions.onAdded.addListener((permissions) => {\n        BrowserApi.reloadExtension(null);\n      });\n    }\n  }\n\n  async connect() {\n    this.appId = await this.appIdService.getAppId();\n    this.stateService.setBiometricFingerprintValidated(false);\n\n    return new Promise<void>((resolve, reject) => {\n      this.port = BrowserApi.connectNative(\"com.8bit.bitwarden\");\n\n      this.connecting = true;\n\n      const connectedCallback = () => {\n        this.connected = true;\n        this.connecting = false;\n        resolve();\n      };\n\n      // Safari has a bundled native component which is always available, no need to\n      // check if the desktop app is running.\n      if (this.platformUtilsService.isSafari()) {\n        connectedCallback();\n      }\n\n      this.port.onMessage.addListener(async (message: ReceiveMessageOuter) => {\n        switch (message.command) {\n          case \"connected\":\n            connectedCallback();\n            break;\n          case \"disconnected\":\n            if (this.connecting) {\n              reject(\"startDesktop\");\n            }\n            this.connected = false;\n            this.port.disconnect();\n            break;\n          case \"setupEncryption\": {\n            // Ignore since it belongs to another device\n            if (message.appId !== this.appId) {\n              return;\n            }\n\n            const encrypted = Utils.fromB64ToArray(message.sharedSecret);\n            const decrypted = await this.cryptoFunctionService.rsaDecrypt(\n              encrypted,\n              this.privateKey,\n              EncryptionAlgorithm\n            );\n\n            if (this.validatingFingerprint) {\n              this.validatingFingerprint = false;\n              this.stateService.setBiometricFingerprintValidated(true);\n            }\n            this.sharedSecret = new SymmetricCryptoKey(decrypted);\n            this.secureSetupResolve();\n            break;\n          }\n          case \"invalidateEncryption\":\n            // Ignore since it belongs to another device\n            if (message.appId !== this.appId) {\n              return;\n            }\n\n            this.sharedSecret = null;\n            this.privateKey = null;\n            this.connected = false;\n\n            this.messagingService.send(\"showDialog\", {\n              title: { key: \"nativeMessagingInvalidEncryptionTitle\" },\n              content: { key: \"nativeMessagingInvalidEncryptionDesc\" },\n              acceptButtonText: { key: \"ok\" },\n              cancelButtonText: null,\n              type: \"danger\",\n            });\n            break;\n          case \"verifyFingerprint\": {\n            if (this.sharedSecret == null) {\n              this.validatingFingerprint = true;\n              this.showFingerprintDialog();\n            }\n            break;\n          }\n          case \"wrongUserId\":\n            this.showWrongUserDialog();\n            break;\n          default:\n            // Ignore since it belongs to another device\n            if (!this.platformUtilsService.isSafari() && message.appId !== this.appId) {\n              return;\n            }\n\n            this.onMessage(message.message);\n        }\n      });\n\n      this.port.onDisconnect.addListener((p: any) => {\n        let error;\n        if (BrowserApi.isWebExtensionsApi) {\n          error = p.error.message;\n        } else {\n          error = chrome.runtime.lastError.message;\n        }\n\n        this.sharedSecret = null;\n        this.privateKey = null;\n        this.connected = false;\n\n        const reason = error != null ? \"desktopIntegrationDisabled\" : null;\n        reject(reason);\n      });\n    });\n  }\n\n  showWrongUserDialog() {\n    this.messagingService.send(\"showDialog\", {\n      title: { key: \"nativeMessagingWrongUserTitle\" },\n      content: { key: \"nativeMessagingWrongUserDesc\" },\n      acceptButtonText: { key: \"ok\" },\n      cancelButtonText: null,\n      type: \"danger\",\n    });\n  }\n\n  async send(message: Message) {\n    if (!this.connected) {\n      await this.connect();\n    }\n\n    message.userId = await this.stateService.getUserId();\n    message.timestamp = Date.now();\n\n    if (this.platformUtilsService.isSafari()) {\n      this.postMessage(message as any);\n    } else {\n      this.postMessage({ appId: this.appId, message: await this.encryptMessage(message) });\n    }\n  }\n\n  async encryptMessage(message: Message) {\n    if (this.sharedSecret == null) {\n      await this.secureCommunication();\n    }\n\n    return await this.cryptoService.encrypt(JSON.stringify(message), this.sharedSecret);\n  }\n\n  getResponse(): Promise<any> {\n    return new Promise((resolve, reject) => {\n      this.resolver = resolve;\n    });\n  }\n\n  private postMessage(message: OuterMessage) {\n    // Wrap in try-catch to when the port disconnected without triggering `onDisconnect`.\n    try {\n      const msg: any = message;\n      if (message.message instanceof EncString) {\n        // Alternative, backwards-compatible serialization of EncString\n        msg.message = {\n          encryptedString: message.message.encryptedString,\n          encryptionType: message.message.encryptionType,\n          data: message.message.data,\n          iv: message.message.iv,\n          mac: message.message.mac,\n        };\n      }\n      this.port.postMessage(msg);\n    } catch (e) {\n      this.logService.error(\"NativeMessaging port disconnected, disconnecting.\");\n\n      this.sharedSecret = null;\n      this.privateKey = null;\n      this.connected = false;\n\n      this.messagingService.send(\"showDialog\", {\n        title: { key: \"nativeMessagingInvalidEncryptionTitle\" },\n        content: { key: \"nativeMessagingInvalidEncryptionDesc\" },\n        acceptButtonText: { key: \"ok\" },\n        cancelButtonText: null,\n        type: \"danger\",\n      });\n    }\n  }\n\n  private async onMessage(rawMessage: ReceiveMessage | EncString) {\n    let message = rawMessage as ReceiveMessage;\n    if (!this.platformUtilsService.isSafari()) {\n      message = JSON.parse(\n        await this.cryptoService.decryptToUtf8(rawMessage as EncString, this.sharedSecret)\n      );\n    }\n\n    if (Math.abs(message.timestamp - Date.now()) > MessageValidTimeout) {\n      this.logService.error(\"NativeMessage is to old, ignoring.\");\n      return;\n    }\n\n    switch (message.command) {\n      case \"biometricUnlock\": {\n        await this.stateService.setBiometricAwaitingAcceptance(null);\n\n        if (message.response === \"not enabled\") {\n          this.messagingService.send(\"showDialog\", {\n            title: { key: \"biometricsNotEnabledTitle\" },\n            content: { key: \"biometricsNotEnabledDesc\" },\n            acceptButtonText: { key: \"ok\" },\n            cancelButtonText: null,\n            type: \"danger\",\n          });\n          break;\n        } else if (message.response === \"not supported\") {\n          this.messagingService.send(\"showDialog\", {\n            title: { key: \"biometricsNotSupportedTitle\" },\n            content: { key: \"biometricsNotSupportedDesc\" },\n            acceptButtonText: { key: \"ok\" },\n            cancelButtonText: null,\n            type: \"danger\",\n          });\n          break;\n        }\n\n        const enabled = await this.stateService.getBiometricUnlock();\n        if (enabled === null || enabled === false) {\n          if (message.response === \"unlocked\") {\n            await this.stateService.setBiometricUnlock(true);\n          }\n          break;\n        }\n\n        // Ignore unlock if already unlocked\n        if ((await this.authService.getAuthStatus()) === AuthenticationStatus.Unlocked) {\n          break;\n        }\n\n        if (message.response === \"unlocked\") {\n          try {\n            if (message.userKeyB64) {\n              const userKey = new SymmetricCryptoKey(\n                Utils.fromB64ToArray(message.userKeyB64)\n              ) as UserKey;\n              await this.cryptoService.setUserKey(userKey);\n            } else if (message.keyB64) {\n              // Backwards compatibility to support cases in which the user hasn't updated their desktop app\n              // TODO: Remove after 2023.10 release (https://bitwarden.atlassian.net/browse/PM-3472)\n              let encUserKey = await this.stateService.getEncryptedCryptoSymmetricKey();\n              encUserKey ||= await this.stateService.getMasterKeyEncryptedUserKey();\n              if (!encUserKey) {\n                throw new Error(\"No encrypted user key found\");\n              }\n              const masterKey = new SymmetricCryptoKey(\n                Utils.fromB64ToArray(message.keyB64)\n              ) as MasterKey;\n              const userKey = await this.cryptoService.decryptUserKeyWithMasterKey(\n                masterKey,\n                new EncString(encUserKey)\n              );\n              await this.cryptoService.setMasterKey(masterKey);\n              await this.cryptoService.setUserKey(userKey);\n            } else {\n              throw new Error(\"No key received\");\n            }\n          } catch (e) {\n            this.logService.error(\"Unable to set key: \" + e);\n            this.messagingService.send(\"showDialog\", {\n              title: { key: \"biometricsFailedTitle\" },\n              content: { key: \"biometricsFailedDesc\" },\n              acceptButtonText: { key: \"ok\" },\n              cancelButtonText: null,\n              type: \"danger\",\n            });\n\n            // Exit early\n            if (this.resolver) {\n              this.resolver(message);\n            }\n            return;\n          }\n\n          // Verify key is correct by attempting to decrypt a secret\n          try {\n            await this.cryptoService.getFingerprint(await this.stateService.getUserId());\n          } catch (e) {\n            this.logService.error(\"Unable to verify key: \" + e);\n            await this.cryptoService.clearKeys();\n            this.showWrongUserDialog();\n\n            // Exit early\n            if (this.resolver) {\n              this.resolver(message);\n            }\n            return;\n          }\n\n          this.runtimeBackground.processMessage({ command: \"unlocked\" }, null, null);\n        }\n        break;\n      }\n      default:\n        this.logService.error(\"NativeMessage, got unknown command: \" + message.command);\n        break;\n    }\n\n    if (this.resolver) {\n      this.resolver(message);\n    }\n  }\n\n  private async secureCommunication() {\n    const [publicKey, privateKey] = await this.cryptoFunctionService.rsaGenerateKeyPair(2048);\n    this.publicKey = publicKey;\n    this.privateKey = privateKey;\n\n    this.sendUnencrypted({\n      command: \"setupEncryption\",\n      publicKey: Utils.fromBufferToB64(publicKey),\n      userId: await this.stateService.getUserId(),\n    });\n\n    return new Promise((resolve, reject) => (this.secureSetupResolve = resolve));\n  }\n\n  private async sendUnencrypted(message: Message) {\n    if (!this.connected) {\n      await this.connect();\n    }\n\n    message.timestamp = Date.now();\n\n    this.postMessage({ appId: this.appId, message: message });\n  }\n\n  private async showFingerprintDialog() {\n    const fingerprint = (\n      await this.cryptoService.getFingerprint(await this.stateService.getUserId(), this.publicKey)\n    ).join(\" \");\n\n    this.messagingService.send(\"showNativeMessagingFinterprintDialog\", {\n      fingerprint: fingerprint,\n    });\n  }\n}\n","import { NotificationsService } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config.service.abstraction\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { SystemService } from \"@bitwarden/common/platform/abstractions/system.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\n\nimport { AutofillService } from \"../autofill/services/abstractions/autofill.service\";\nimport { BrowserApi } from \"../platform/browser/browser-api\";\nimport { BrowserEnvironmentService } from \"../platform/services/browser-environment.service\";\nimport BrowserPlatformUtilsService from \"../platform/services/browser-platform-utils.service\";\n\nimport MainBackground from \"./main.background\";\nimport LockedVaultPendingNotificationsItem from \"./models/lockedVaultPendingNotificationsItem\";\n\nexport default class RuntimeBackground {\n  private autofillTimeout: any;\n  private pageDetailsToAutoFill: any[] = [];\n  private onInstalledReason: string = null;\n  private lockedVaultPendingNotifications: LockedVaultPendingNotificationsItem[] = [];\n\n  constructor(\n    private main: MainBackground,\n    private autofillService: AutofillService,\n    private platformUtilsService: BrowserPlatformUtilsService,\n    private i18nService: I18nService,\n    private notificationsService: NotificationsService,\n    private systemService: SystemService,\n    private environmentService: BrowserEnvironmentService,\n    private messagingService: MessagingService,\n    private logService: LogService,\n    private configService: ConfigServiceAbstraction\n  ) {\n    // onInstalled listener must be wired up before anything else, so we do it in the ctor\n    chrome.runtime.onInstalled.addListener((details: any) => {\n      this.onInstalledReason = details.reason;\n    });\n  }\n\n  async init() {\n    if (!chrome.runtime) {\n      return;\n    }\n\n    await this.checkOnInstalled();\n    const backgroundMessageListener = async (\n      msg: any,\n      sender: chrome.runtime.MessageSender,\n      sendResponse: any\n    ) => {\n      await this.processMessage(msg, sender, sendResponse);\n    };\n\n    BrowserApi.messageListener(\"runtime.background\", backgroundMessageListener);\n    if (this.main.popupOnlyContext) {\n      (window as any).bitwardenBackgroundMessageListener = backgroundMessageListener;\n    }\n  }\n\n  async processMessage(msg: any, sender: chrome.runtime.MessageSender, sendResponse: any) {\n    switch (msg.command) {\n      case \"loggedIn\":\n      case \"unlocked\": {\n        let item: LockedVaultPendingNotificationsItem;\n\n        if (this.lockedVaultPendingNotifications?.length > 0) {\n          item = this.lockedVaultPendingNotifications.pop();\n          BrowserApi.closeBitwardenExtensionTab();\n        }\n\n        await this.main.refreshBadge();\n        await this.main.refreshMenu(false);\n        this.notificationsService.updateConnection(msg.command === \"unlocked\");\n        this.systemService.cancelProcessReload();\n\n        if (item) {\n          await BrowserApi.focusWindow(item.commandToRetry.sender.tab.windowId);\n          await BrowserApi.focusTab(item.commandToRetry.sender.tab.id);\n          await BrowserApi.tabSendMessageData(\n            item.commandToRetry.sender.tab,\n            \"unlockCompleted\",\n            item\n          );\n        }\n        break;\n      }\n      case \"addToLockedVaultPendingNotifications\":\n        this.lockedVaultPendingNotifications.push(msg.data);\n        break;\n      case \"logout\":\n        await this.main.logout(msg.expired, msg.userId);\n        break;\n      case \"syncCompleted\":\n        if (msg.successfully) {\n          setTimeout(async () => {\n            await this.main.refreshBadge();\n            await this.main.refreshMenu();\n          }, 2000);\n          this.main.avatarUpdateService.loadColorFromState();\n          this.configService.fetchServerConfig();\n        }\n        break;\n      case \"openPopup\":\n        await this.main.openPopup();\n        break;\n      case \"promptForLogin\":\n        BrowserApi.openBitwardenExtensionTab(\"popup/index.html\", true);\n        break;\n      case \"openAddEditCipher\": {\n        const addEditCipherUrl =\n          msg.data?.cipherId == null\n            ? \"popup/index.html#/edit-cipher\"\n            : \"popup/index.html#/edit-cipher?cipherId=\" + msg.data.cipherId;\n\n        BrowserApi.openBitwardenExtensionTab(addEditCipherUrl, true);\n        break;\n      }\n      case \"closeTab\":\n        setTimeout(() => {\n          BrowserApi.closeBitwardenExtensionTab();\n        }, msg.delay ?? 0);\n        break;\n      case \"bgCollectPageDetails\":\n        await this.main.collectPageDetailsForContentScript(sender.tab, msg.sender, sender.frameId);\n        break;\n      case \"bgUpdateContextMenu\":\n      case \"editedCipher\":\n      case \"addedCipher\":\n      case \"deletedCipher\":\n        await this.main.refreshBadge();\n        await this.main.refreshMenu();\n        break;\n      case \"bgReseedStorage\":\n        await this.main.reseedStorage();\n        break;\n      case \"collectPageDetailsResponse\":\n        switch (msg.sender) {\n          case \"autofiller\":\n          case \"autofill_cmd\": {\n            const totpCode = await this.autofillService.doAutoFillActiveTab(\n              [\n                {\n                  frameId: sender.frameId,\n                  tab: msg.tab,\n                  details: msg.details,\n                },\n              ],\n              msg.sender === \"autofill_cmd\"\n            );\n            if (totpCode != null) {\n              this.platformUtilsService.copyToClipboard(totpCode, { window: window });\n            }\n            break;\n          }\n          case \"contextMenu\":\n            clearTimeout(this.autofillTimeout);\n            this.pageDetailsToAutoFill.push({\n              frameId: sender.frameId,\n              tab: msg.tab,\n              details: msg.details,\n            });\n            this.autofillTimeout = setTimeout(async () => await this.autofillPage(msg.tab), 300);\n            break;\n          default:\n            break;\n        }\n        break;\n      case \"authResult\": {\n        const vaultUrl = this.environmentService.getWebVaultUrl();\n\n        if (msg.referrer == null || Utils.getHostname(vaultUrl) !== msg.referrer) {\n          return;\n        }\n\n        try {\n          BrowserApi.createNewTab(\n            \"popup/index.html?uilocation=popout#/sso?code=\" +\n              encodeURIComponent(msg.code) +\n              \"&state=\" +\n              encodeURIComponent(msg.state)\n          );\n        } catch {\n          this.logService.error(\"Unable to open sso popout tab\");\n        }\n        break;\n      }\n      case \"webAuthnResult\": {\n        const vaultUrl = this.environmentService.getWebVaultUrl();\n\n        if (msg.referrer == null || Utils.getHostname(vaultUrl) !== msg.referrer) {\n          return;\n        }\n\n        const params =\n          `webAuthnResponse=${encodeURIComponent(msg.data)};` +\n          `remember=${encodeURIComponent(msg.remember)}`;\n        BrowserApi.openBitwardenExtensionTab(`popup/index.html#/2fa;${params}`, false);\n        break;\n      }\n      case \"reloadPopup\":\n        this.messagingService.send(\"reloadPopup\");\n        break;\n      case \"emailVerificationRequired\":\n        this.messagingService.send(\"showDialog\", {\n          title: { key: \"emailVerificationRequired\" },\n          content: { key: \"emailVerificationRequiredDesc\" },\n          acceptButtonText: { key: \"ok\" },\n          cancelButtonText: null,\n          type: \"info\",\n        });\n        break;\n      case \"getClickedElementResponse\":\n        this.platformUtilsService.copyToClipboard(msg.identifier, { window: window });\n        break;\n      default:\n        break;\n    }\n  }\n\n  private async autofillPage(tabToAutoFill: chrome.tabs.Tab) {\n    const totpCode = await this.autofillService.doAutoFill({\n      tab: tabToAutoFill,\n      cipher: this.main.loginToAutoFill,\n      pageDetails: this.pageDetailsToAutoFill,\n      fillNewPassword: true,\n      allowTotpAutofill: true,\n    });\n\n    if (totpCode != null) {\n      this.platformUtilsService.copyToClipboard(totpCode, { window: window });\n    }\n\n    // reset\n    this.main.loginToAutoFill = null;\n    this.pageDetailsToAutoFill = [];\n  }\n\n  private async checkOnInstalled() {\n    setTimeout(async () => {\n      if (this.onInstalledReason != null) {\n        if (this.onInstalledReason === \"install\") {\n          BrowserApi.createNewTab(\"https://bitwarden.com/browser-start/\");\n\n          if (await this.environmentService.hasManagedEnvironment()) {\n            await this.environmentService.setUrlsToManagedEnvironment();\n          }\n        }\n\n        this.onInstalledReason = null;\n      }\n    }, 100);\n  }\n}\n","import { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { UriMatchType } from \"@bitwarden/common/enums\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\nimport { BrowserApi } from \"../platform/browser/browser-api\";\n\nexport default class WebRequestBackground {\n  private pendingAuthRequests: any[] = [];\n  private webRequest: any;\n  private isFirefox: boolean;\n\n  constructor(\n    platformUtilsService: PlatformUtilsService,\n    private cipherService: CipherService,\n    private authService: AuthService\n  ) {\n    if (BrowserApi.manifestVersion === 2) {\n      this.webRequest = (window as any).chrome.webRequest;\n    }\n    this.isFirefox = platformUtilsService.isFirefox();\n  }\n\n  async init() {\n    if (!this.webRequest || !this.webRequest.onAuthRequired) {\n      return;\n    }\n\n    this.webRequest.onAuthRequired.addListener(\n      async (details: any, callback: any) => {\n        if (!details.url || this.pendingAuthRequests.indexOf(details.requestId) !== -1) {\n          if (callback) {\n            callback();\n          }\n          return;\n        }\n\n        this.pendingAuthRequests.push(details.requestId);\n\n        if (this.isFirefox) {\n          // eslint-disable-next-line\n          return new Promise(async (resolve, reject) => {\n            await this.resolveAuthCredentials(details.url, resolve, reject);\n          });\n        } else {\n          await this.resolveAuthCredentials(details.url, callback, callback);\n        }\n      },\n      { urls: [\"http://*/*\", \"https://*/*\"] },\n      [this.isFirefox ? \"blocking\" : \"asyncBlocking\"]\n    );\n\n    this.webRequest.onCompleted.addListener((details: any) => this.completeAuthRequest(details), {\n      urls: [\"http://*/*\"],\n    });\n    this.webRequest.onErrorOccurred.addListener(\n      (details: any) => this.completeAuthRequest(details),\n      {\n        urls: [\"http://*/*\"],\n      }\n    );\n  }\n\n  // eslint-disable-next-line\n  private async resolveAuthCredentials(domain: string, success: Function, error: Function) {\n    if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n      error();\n      return;\n    }\n\n    try {\n      const ciphers = await this.cipherService.getAllDecryptedForUrl(\n        domain,\n        null,\n        UriMatchType.Host\n      );\n      if (ciphers == null || ciphers.length !== 1) {\n        error();\n        return;\n      }\n\n      success({\n        authCredentials: {\n          username: ciphers[0].login.username,\n          password: ciphers[0].login.password,\n        },\n      });\n    } catch {\n      error();\n    }\n  }\n\n  private completeAuthRequest(details: any) {\n    const i = this.pendingAuthRequests.indexOf(details.requestId);\n    if (i > -1) {\n      this.pendingAuthRequests.splice(i, 1);\n    }\n  }\n}\n","import { AvatarUpdateService as AvatarUpdateServiceAbstraction } from \"@bitwarden/common/abstractions/account/avatar-update.service\";\nimport { ApiService as ApiServiceAbstraction } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuditService as AuditServiceAbstraction } from \"@bitwarden/common/abstractions/audit.service\";\nimport { DevicesServiceAbstraction } from \"@bitwarden/common/abstractions/devices/devices.service.abstraction\";\nimport { EventCollectionService as EventCollectionServiceAbstraction } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventUploadService as EventUploadServiceAbstraction } from \"@bitwarden/common/abstractions/event/event-upload.service\";\nimport { NotificationsService as NotificationsServiceAbstraction } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { SearchService as SearchServiceAbstraction } from \"@bitwarden/common/abstractions/search.service\";\nimport { SettingsService as SettingsServiceAbstraction } from \"@bitwarden/common/abstractions/settings.service\";\nimport { TotpService as TotpServiceAbstraction } from \"@bitwarden/common/abstractions/totp.service\";\nimport { VaultTimeoutSettingsService as VaultTimeoutSettingsServiceAbstraction } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout-settings.service\";\nimport { InternalOrganizationServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy-api.service.abstraction\";\nimport { InternalPolicyService as InternalPolicyServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { ProviderService as ProviderServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/provider.service\";\nimport { PolicyApiService } from \"@bitwarden/common/admin-console/services/policy/policy-api.service\";\nimport { ProviderService } from \"@bitwarden/common/admin-console/services/provider.service\";\nimport { AuthRequestCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/auth-request-crypto.service.abstraction\";\nimport { AuthService as AuthServiceAbstraction } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/device-trust-crypto.service.abstraction\";\nimport { DevicesApiServiceAbstraction } from \"@bitwarden/common/auth/abstractions/devices-api.service.abstraction\";\nimport { KeyConnectorService as KeyConnectorServiceAbstraction } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { TokenService as TokenServiceAbstraction } from \"@bitwarden/common/auth/abstractions/token.service\";\nimport { TwoFactorService as TwoFactorServiceAbstraction } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { UserVerificationApiServiceAbstraction } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification-api.service.abstraction\";\nimport { UserVerificationService as UserVerificationServiceAbstraction } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { AuthRequestCryptoServiceImplementation } from \"@bitwarden/common/auth/services/auth-request-crypto.service.implementation\";\nimport { AuthService } from \"@bitwarden/common/auth/services/auth.service\";\nimport { DeviceTrustCryptoService } from \"@bitwarden/common/auth/services/device-trust-crypto.service.implementation\";\nimport { DevicesApiServiceImplementation } from \"@bitwarden/common/auth/services/devices-api.service.implementation\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/services/key-connector.service\";\nimport { TokenService } from \"@bitwarden/common/auth/services/token.service\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/services/two-factor.service\";\nimport { UserVerificationApiService } from \"@bitwarden/common/auth/services/user-verification/user-verification-api.service\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/services/user-verification/user-verification.service\";\nimport { AppIdService as AppIdServiceAbstraction } from \"@bitwarden/common/platform/abstractions/app-id.service\";\nimport { ConfigApiServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config-api.service.abstraction\";\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config.service.abstraction\";\nimport { CryptoFunctionService as CryptoFunctionServiceAbstraction } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { CryptoService as CryptoServiceAbstraction } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { EncryptService } from \"@bitwarden/common/platform/abstractions/encrypt.service\";\nimport { FileUploadService as FileUploadServiceAbstraction } from \"@bitwarden/common/platform/abstractions/file-upload/file-upload.service\";\nimport { I18nService as I18nServiceAbstraction } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService as LogServiceAbstraction } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService as MessagingServiceAbstraction } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService as PlatformUtilsServiceAbstraction } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"@bitwarden/common/platform/abstractions/storage.service\";\nimport { SystemService as SystemServiceAbstraction } from \"@bitwarden/common/platform/abstractions/system.service\";\nimport { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\nimport { AppIdService } from \"@bitwarden/common/platform/services/app-id.service\";\nimport { ConfigService } from \"@bitwarden/common/platform/services/config/config.service\";\nimport { ConsoleLogService } from \"@bitwarden/common/platform/services/console-log.service\";\nimport { ContainerService } from \"@bitwarden/common/platform/services/container.service\";\nimport { EncryptServiceImplementation } from \"@bitwarden/common/platform/services/cryptography/encrypt.service.implementation\";\nimport { MultithreadEncryptServiceImplementation } from \"@bitwarden/common/platform/services/cryptography/multithread-encrypt.service.implementation\";\nimport { FileUploadService } from \"@bitwarden/common/platform/services/file-upload/file-upload.service\";\nimport { MemoryStorageService } from \"@bitwarden/common/platform/services/memory-storage.service\";\nimport { StateMigrationService } from \"@bitwarden/common/platform/services/state-migration.service\";\nimport { SystemService } from \"@bitwarden/common/platform/services/system.service\";\nimport { WebCryptoFunctionService } from \"@bitwarden/common/platform/services/web-crypto-function.service\";\nimport { AvatarUpdateService } from \"@bitwarden/common/services/account/avatar-update.service\";\nimport { ApiService } from \"@bitwarden/common/services/api.service\";\nimport { AuditService } from \"@bitwarden/common/services/audit.service\";\nimport { DevicesServiceImplementation } from \"@bitwarden/common/services/devices/devices.service.implementation\";\nimport { EventCollectionService } from \"@bitwarden/common/services/event/event-collection.service\";\nimport { EventUploadService } from \"@bitwarden/common/services/event/event-upload.service\";\nimport { NotificationsService } from \"@bitwarden/common/services/notifications.service\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\nimport { TotpService } from \"@bitwarden/common/services/totp.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/services/vault-timeout/vault-timeout-settings.service\";\nimport {\n  PasswordGenerationService,\n  PasswordGenerationServiceAbstraction,\n} from \"@bitwarden/common/tools/generator/password\";\nimport {\n  UsernameGenerationService,\n  UsernameGenerationServiceAbstraction,\n} from \"@bitwarden/common/tools/generator/username\";\nimport {\n  PasswordStrengthService,\n  PasswordStrengthServiceAbstraction,\n} from \"@bitwarden/common/tools/password-strength\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service\";\nimport { SendApiService as SendApiServiceAbstraction } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { InternalSendService as InternalSendServiceAbstraction } from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\nimport { CipherService as CipherServiceAbstraction } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CollectionService as CollectionServiceAbstraction } from \"@bitwarden/common/vault/abstractions/collection.service\";\nimport { CipherFileUploadService as CipherFileUploadServiceAbstraction } from \"@bitwarden/common/vault/abstractions/file-upload/cipher-file-upload.service\";\nimport { FolderApiServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder-api.service.abstraction\";\nimport { InternalFolderService as InternalFolderServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { SyncNotifierService as SyncNotifierServiceAbstraction } from \"@bitwarden/common/vault/abstractions/sync/sync-notifier.service.abstraction\";\nimport { SyncService as SyncServiceAbstraction } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { CipherService } from \"@bitwarden/common/vault/services/cipher.service\";\nimport { CollectionService } from \"@bitwarden/common/vault/services/collection.service\";\nimport { CipherFileUploadService } from \"@bitwarden/common/vault/services/file-upload/cipher-file-upload.service\";\nimport { FolderApiService } from \"@bitwarden/common/vault/services/folder/folder-api.service\";\nimport { SyncNotifierService } from \"@bitwarden/common/vault/services/sync/sync-notifier.service\";\nimport { SyncService } from \"@bitwarden/common/vault/services/sync/sync.service\";\nimport {\n  VaultExportService,\n  VaultExportServiceAbstraction,\n} from \"@bitwarden/exporter/vault-export\";\n\nimport { BrowserOrganizationService } from \"../admin-console/services/browser-organization.service\";\nimport { BrowserPolicyService } from \"../admin-console/services/browser-policy.service\";\nimport ContextMenusBackground from \"../autofill/background/context-menus.background\";\nimport NotificationBackground from \"../autofill/background/notification.background\";\nimport TabsBackground from \"../autofill/background/tabs.background\";\nimport { CipherContextMenuHandler } from \"../autofill/browser/cipher-context-menu-handler\";\nimport { ContextMenuClickedHandler } from \"../autofill/browser/context-menu-clicked-handler\";\nimport { MainContextMenuHandler } from \"../autofill/browser/main-context-menu-handler\";\nimport { AutofillService as AutofillServiceAbstraction } from \"../autofill/services/abstractions/autofill.service\";\nimport AutofillService from \"../autofill/services/autofill.service\";\nimport { SafariApp } from \"../browser/safariApp\";\nimport { Account } from \"../models/account\";\nimport { BrowserApi } from \"../platform/browser/browser-api\";\nimport { flagEnabled } from \"../platform/flags\";\nimport { UpdateBadge } from \"../platform/listeners/update-badge\";\nimport { BrowserStateService as StateServiceAbstraction } from \"../platform/services/abstractions/browser-state.service\";\nimport { BrowserCryptoService } from \"../platform/services/browser-crypto.service\";\nimport { BrowserEnvironmentService } from \"../platform/services/browser-environment.service\";\nimport { BrowserI18nService } from \"../platform/services/browser-i18n.service\";\nimport BrowserLocalStorageService from \"../platform/services/browser-local-storage.service\";\nimport BrowserMessagingPrivateModeBackgroundService from \"../platform/services/browser-messaging-private-mode-background.service\";\nimport BrowserMessagingService from \"../platform/services/browser-messaging.service\";\nimport BrowserPlatformUtilsService from \"../platform/services/browser-platform-utils.service\";\nimport { BrowserStateService } from \"../platform/services/browser-state.service\";\nimport { KeyGenerationService } from \"../platform/services/key-generation.service\";\nimport { LocalBackedSessionStorageService } from \"../platform/services/local-backed-session-storage.service\";\nimport { BrowserSendService } from \"../services/browser-send.service\";\nimport { BrowserSettingsService } from \"../services/browser-settings.service\";\nimport VaultTimeoutService from \"../services/vault-timeout/vault-timeout.service\";\nimport { BrowserFolderService } from \"../vault/services/browser-folder.service\";\nimport { VaultFilterService } from \"../vault/services/vault-filter.service\";\n\nimport CommandsBackground from \"./commands.background\";\nimport IdleBackground from \"./idle.background\";\nimport { NativeMessagingBackground } from \"./nativeMessaging.background\";\nimport RuntimeBackground from \"./runtime.background\";\nimport WebRequestBackground from \"./webRequest.background\";\n\nexport default class MainBackground {\n  messagingService: MessagingServiceAbstraction;\n  storageService: AbstractStorageService;\n  secureStorageService: AbstractStorageService;\n  memoryStorageService: AbstractMemoryStorageService;\n  i18nService: I18nServiceAbstraction;\n  platformUtilsService: PlatformUtilsServiceAbstraction;\n  logService: LogServiceAbstraction;\n  cryptoService: CryptoServiceAbstraction;\n  cryptoFunctionService: CryptoFunctionServiceAbstraction;\n  tokenService: TokenServiceAbstraction;\n  appIdService: AppIdServiceAbstraction;\n  apiService: ApiServiceAbstraction;\n  environmentService: BrowserEnvironmentService;\n  settingsService: SettingsServiceAbstraction;\n  cipherService: CipherServiceAbstraction;\n  folderService: InternalFolderServiceAbstraction;\n  collectionService: CollectionServiceAbstraction;\n  vaultTimeoutService: VaultTimeoutService;\n  vaultTimeoutSettingsService: VaultTimeoutSettingsServiceAbstraction;\n  syncService: SyncServiceAbstraction;\n  passwordGenerationService: PasswordGenerationServiceAbstraction;\n  passwordStrengthService: PasswordStrengthServiceAbstraction;\n  totpService: TotpServiceAbstraction;\n  autofillService: AutofillServiceAbstraction;\n  containerService: ContainerService;\n  auditService: AuditServiceAbstraction;\n  authService: AuthServiceAbstraction;\n  exportService: VaultExportServiceAbstraction;\n  searchService: SearchServiceAbstraction;\n  notificationsService: NotificationsServiceAbstraction;\n  stateService: StateServiceAbstraction;\n  stateMigrationService: StateMigrationService;\n  systemService: SystemServiceAbstraction;\n  eventCollectionService: EventCollectionServiceAbstraction;\n  eventUploadService: EventUploadServiceAbstraction;\n  policyService: InternalPolicyServiceAbstraction;\n  sendService: InternalSendServiceAbstraction;\n  fileUploadService: FileUploadServiceAbstraction;\n  cipherFileUploadService: CipherFileUploadServiceAbstraction;\n  organizationService: InternalOrganizationServiceAbstraction;\n  providerService: ProviderServiceAbstraction;\n  keyConnectorService: KeyConnectorServiceAbstraction;\n  userVerificationService: UserVerificationServiceAbstraction;\n  twoFactorService: TwoFactorServiceAbstraction;\n  vaultFilterService: VaultFilterService;\n  usernameGenerationService: UsernameGenerationServiceAbstraction;\n  encryptService: EncryptService;\n  folderApiService: FolderApiServiceAbstraction;\n  policyApiService: PolicyApiServiceAbstraction;\n  sendApiService: SendApiServiceAbstraction;\n  userVerificationApiService: UserVerificationApiServiceAbstraction;\n  syncNotifierService: SyncNotifierServiceAbstraction;\n  avatarUpdateService: AvatarUpdateServiceAbstraction;\n  mainContextMenuHandler: MainContextMenuHandler;\n  cipherContextMenuHandler: CipherContextMenuHandler;\n  configService: ConfigServiceAbstraction;\n  configApiService: ConfigApiServiceAbstraction;\n  devicesApiService: DevicesApiServiceAbstraction;\n  devicesService: DevicesServiceAbstraction;\n  deviceTrustCryptoService: DeviceTrustCryptoServiceAbstraction;\n  authRequestCryptoService: AuthRequestCryptoServiceAbstraction;\n\n  // Passed to the popup for Safari to workaround issues with theming, downloading, etc.\n  backgroundWindow = window;\n\n  onUpdatedRan: boolean;\n  onReplacedRan: boolean;\n  loginToAutoFill: CipherView = null;\n\n  private commandsBackground: CommandsBackground;\n  private contextMenusBackground: ContextMenusBackground;\n  private idleBackground: IdleBackground;\n  private notificationBackground: NotificationBackground;\n  private runtimeBackground: RuntimeBackground;\n  private tabsBackground: TabsBackground;\n  private webRequestBackground: WebRequestBackground;\n\n  private syncTimeout: any;\n  private isSafari: boolean;\n  private nativeMessagingBackground: NativeMessagingBackground;\n  popupOnlyContext: boolean;\n\n  constructor(public isPrivateMode: boolean = false) {\n    this.popupOnlyContext = isPrivateMode || BrowserApi.manifestVersion === 3;\n\n    // Services\n    const lockedCallback = async (userId?: string) => {\n      if (this.notificationsService != null) {\n        this.notificationsService.updateConnection(false);\n      }\n      await this.refreshBadge();\n      await this.refreshMenu(true);\n      if (this.systemService != null) {\n        await this.systemService.clearPendingClipboard();\n        await this.systemService.startProcessReload(this.authService);\n      }\n    };\n\n    const logoutCallback = async (expired: boolean, userId?: string) =>\n      await this.logout(expired, userId);\n\n    this.messagingService = this.popupOnlyContext\n      ? new BrowserMessagingPrivateModeBackgroundService()\n      : new BrowserMessagingService();\n    this.logService = new ConsoleLogService(false);\n    this.cryptoFunctionService = new WebCryptoFunctionService(window);\n    this.storageService = new BrowserLocalStorageService();\n    this.secureStorageService = new BrowserLocalStorageService();\n    this.memoryStorageService =\n      BrowserApi.manifestVersion === 3\n        ? new LocalBackedSessionStorageService(\n            new EncryptServiceImplementation(this.cryptoFunctionService, this.logService, false),\n            new KeyGenerationService(this.cryptoFunctionService)\n          )\n        : new MemoryStorageService();\n    this.stateMigrationService = new StateMigrationService(\n      this.storageService,\n      this.secureStorageService,\n      new StateFactory(GlobalState, Account)\n    );\n    this.stateService = new BrowserStateService(\n      this.storageService,\n      this.secureStorageService,\n      this.memoryStorageService,\n      this.logService,\n      this.stateMigrationService,\n      new StateFactory(GlobalState, Account)\n    );\n    this.platformUtilsService = new BrowserPlatformUtilsService(\n      this.messagingService,\n      (clipboardValue, clearMs) => {\n        if (this.systemService != null) {\n          this.systemService.clearClipboard(clipboardValue, clearMs);\n        }\n      },\n      async () => {\n        if (this.nativeMessagingBackground != null) {\n          const promise = this.nativeMessagingBackground.getResponse();\n\n          try {\n            await this.nativeMessagingBackground.send({ command: \"biometricUnlock\" });\n          } catch (e) {\n            return Promise.reject(e);\n          }\n\n          return promise.then((result) => result.response === \"unlocked\");\n        }\n      },\n      window\n    );\n    this.i18nService = new BrowserI18nService(BrowserApi.getUILanguage(window), this.stateService);\n    this.encryptService = flagEnabled(\"multithreadDecryption\")\n      ? new MultithreadEncryptServiceImplementation(\n          this.cryptoFunctionService,\n          this.logService,\n          true\n        )\n      : new EncryptServiceImplementation(this.cryptoFunctionService, this.logService, true);\n    this.cryptoService = new BrowserCryptoService(\n      this.cryptoFunctionService,\n      this.encryptService,\n      this.platformUtilsService,\n      this.logService,\n      this.stateService\n    );\n    this.tokenService = new TokenService(this.stateService);\n    this.appIdService = new AppIdService(this.storageService);\n    this.environmentService = new BrowserEnvironmentService(this.stateService, this.logService);\n    this.apiService = new ApiService(\n      this.tokenService,\n      this.platformUtilsService,\n      this.environmentService,\n      this.appIdService,\n      (expired: boolean) => this.logout(expired)\n    );\n    this.settingsService = new BrowserSettingsService(this.stateService);\n    this.fileUploadService = new FileUploadService(this.logService);\n    this.cipherFileUploadService = new CipherFileUploadService(\n      this.apiService,\n      this.fileUploadService\n    );\n    this.searchService = new SearchService(this.logService, this.i18nService);\n\n    this.cipherService = new CipherService(\n      this.cryptoService,\n      this.settingsService,\n      this.apiService,\n      this.i18nService,\n      this.searchService,\n      this.stateService,\n      this.encryptService,\n      this.cipherFileUploadService\n    );\n    this.folderService = new BrowserFolderService(\n      this.cryptoService,\n      this.i18nService,\n      this.cipherService,\n      this.stateService\n    );\n    this.folderApiService = new FolderApiService(this.folderService, this.apiService);\n    this.collectionService = new CollectionService(\n      this.cryptoService,\n      this.i18nService,\n      this.stateService\n    );\n    this.syncNotifierService = new SyncNotifierService();\n    this.organizationService = new BrowserOrganizationService(this.stateService);\n    this.policyService = new BrowserPolicyService(this.stateService, this.organizationService);\n    this.policyApiService = new PolicyApiService(\n      this.policyService,\n      this.apiService,\n      this.stateService\n    );\n    this.keyConnectorService = new KeyConnectorService(\n      this.stateService,\n      this.cryptoService,\n      this.apiService,\n      this.tokenService,\n      this.logService,\n      this.organizationService,\n      this.cryptoFunctionService,\n      logoutCallback\n    );\n    this.vaultFilterService = new VaultFilterService(\n      this.stateService,\n      this.organizationService,\n      this.folderService,\n      this.cipherService,\n      this.collectionService,\n      this.policyService\n    );\n\n    this.passwordStrengthService = new PasswordStrengthService();\n\n    this.passwordGenerationService = new PasswordGenerationService(\n      this.cryptoService,\n      this.policyService,\n      this.stateService\n    );\n\n    this.twoFactorService = new TwoFactorService(this.i18nService, this.platformUtilsService);\n\n    // eslint-disable-next-line\n    const that = this;\n    const backgroundMessagingService = new (class extends MessagingServiceAbstraction {\n      // AuthService should send the messages to the background not popup.\n      send = (subscriber: string, arg: any = {}) => {\n        const message = Object.assign({}, { command: subscriber }, arg);\n        that.runtimeBackground.processMessage(message, that as any, null);\n      };\n    })();\n\n    this.devicesApiService = new DevicesApiServiceImplementation(this.apiService);\n    this.deviceTrustCryptoService = new DeviceTrustCryptoService(\n      this.cryptoFunctionService,\n      this.cryptoService,\n      this.encryptService,\n      this.stateService,\n      this.appIdService,\n      this.devicesApiService,\n      this.i18nService,\n      this.platformUtilsService\n    );\n\n    this.devicesService = new DevicesServiceImplementation(this.devicesApiService);\n\n    this.authRequestCryptoService = new AuthRequestCryptoServiceImplementation(this.cryptoService);\n\n    this.authService = new AuthService(\n      this.cryptoService,\n      this.apiService,\n      this.tokenService,\n      this.appIdService,\n      this.platformUtilsService,\n      backgroundMessagingService,\n      this.logService,\n      this.keyConnectorService,\n      this.environmentService,\n      this.stateService,\n      this.twoFactorService,\n      this.i18nService,\n      this.encryptService,\n      this.passwordStrengthService,\n      this.policyService,\n      this.deviceTrustCryptoService,\n      this.authRequestCryptoService\n    );\n\n    this.userVerificationApiService = new UserVerificationApiService(this.apiService);\n\n    this.userVerificationService = new UserVerificationService(\n      this.stateService,\n      this.cryptoService,\n      this.i18nService,\n      this.userVerificationApiService\n    );\n\n    this.vaultTimeoutSettingsService = new VaultTimeoutSettingsService(\n      this.cryptoService,\n      this.tokenService,\n      this.policyService,\n      this.stateService,\n      this.userVerificationService\n    );\n\n    this.vaultTimeoutService = new VaultTimeoutService(\n      this.cipherService,\n      this.folderService,\n      this.collectionService,\n      this.cryptoService,\n      this.platformUtilsService,\n      this.messagingService,\n      this.searchService,\n      this.stateService,\n      this.authService,\n      this.vaultTimeoutSettingsService,\n      lockedCallback,\n      logoutCallback\n    );\n    this.containerService = new ContainerService(this.cryptoService, this.encryptService);\n    this.sendService = new BrowserSendService(\n      this.cryptoService,\n      this.i18nService,\n      this.cryptoFunctionService,\n      this.stateService\n    );\n    this.sendApiService = new SendApiService(\n      this.apiService,\n      this.fileUploadService,\n      this.sendService\n    );\n    this.providerService = new ProviderService(this.stateService);\n    this.syncService = new SyncService(\n      this.apiService,\n      this.settingsService,\n      this.folderService,\n      this.cipherService,\n      this.cryptoService,\n      this.collectionService,\n      this.messagingService,\n      this.policyService,\n      this.sendService,\n      this.logService,\n      this.keyConnectorService,\n      this.stateService,\n      this.providerService,\n      this.folderApiService,\n      this.organizationService,\n      this.sendApiService,\n      logoutCallback\n    );\n    this.eventUploadService = new EventUploadService(\n      this.apiService,\n      this.stateService,\n      this.logService\n    );\n    this.eventCollectionService = new EventCollectionService(\n      this.cipherService,\n      this.stateService,\n      this.organizationService,\n      this.eventUploadService\n    );\n    this.totpService = new TotpService(this.cryptoFunctionService, this.logService);\n\n    this.autofillService = new AutofillService(\n      this.cipherService,\n      this.stateService,\n      this.totpService,\n      this.eventCollectionService,\n      this.logService,\n      this.settingsService,\n      this.userVerificationService\n    );\n    this.auditService = new AuditService(this.cryptoFunctionService, this.apiService);\n    this.exportService = new VaultExportService(\n      this.folderService,\n      this.cipherService,\n      this.apiService,\n      this.cryptoService,\n      this.cryptoFunctionService,\n      this.stateService\n    );\n    this.notificationsService = new NotificationsService(\n      this.syncService,\n      this.appIdService,\n      this.apiService,\n      this.environmentService,\n      logoutCallback,\n      this.logService,\n      this.stateService,\n      this.authService,\n      this.messagingService\n    );\n    this.configService = new ConfigService(\n      this.stateService,\n      this.configApiService,\n      this.authService,\n      this.environmentService\n    );\n\n    const systemUtilsServiceReloadCallback = () => {\n      const forceWindowReload =\n        this.platformUtilsService.isSafari() ||\n        this.platformUtilsService.isFirefox() ||\n        this.platformUtilsService.isOpera();\n      BrowserApi.reloadExtension(forceWindowReload ? window : null);\n      return Promise.resolve();\n    };\n\n    this.systemService = new SystemService(\n      this.messagingService,\n      this.platformUtilsService,\n      systemUtilsServiceReloadCallback,\n      this.stateService\n    );\n\n    // Other fields\n    this.isSafari = this.platformUtilsService.isSafari();\n\n    // Background\n    this.runtimeBackground = new RuntimeBackground(\n      this,\n      this.autofillService,\n      this.platformUtilsService as BrowserPlatformUtilsService,\n      this.i18nService,\n      this.notificationsService,\n      this.systemService,\n      this.environmentService,\n      this.messagingService,\n      this.logService,\n      this.configService\n    );\n    this.nativeMessagingBackground = new NativeMessagingBackground(\n      this.cryptoService,\n      this.cryptoFunctionService,\n      this.runtimeBackground,\n      this.i18nService,\n      this.messagingService,\n      this.appIdService,\n      this.platformUtilsService,\n      this.stateService,\n      this.logService,\n      this.authService\n    );\n    this.commandsBackground = new CommandsBackground(\n      this,\n      this.passwordGenerationService,\n      this.platformUtilsService,\n      this.vaultTimeoutService,\n      this.authService\n    );\n    this.notificationBackground = new NotificationBackground(\n      this.autofillService,\n      this.cipherService,\n      this.authService,\n      this.policyService,\n      this.folderService,\n      this.stateService,\n      this.environmentService\n    );\n\n    this.tabsBackground = new TabsBackground(this, this.notificationBackground);\n    if (!this.popupOnlyContext) {\n      const contextMenuClickedHandler = new ContextMenuClickedHandler(\n        (options) => this.platformUtilsService.copyToClipboard(options.text, { window: self }),\n        async (_tab) => {\n          const options = (await this.passwordGenerationService.getOptions())?.[0] ?? {};\n          const password = await this.passwordGenerationService.generatePassword(options);\n          this.platformUtilsService.copyToClipboard(password, { window: window });\n          this.passwordGenerationService.addHistory(password);\n        },\n        async (tab, cipher) => {\n          this.loginToAutoFill = cipher;\n          if (tab == null) {\n            return;\n          }\n\n          BrowserApi.tabSendMessage(tab, {\n            command: \"collectPageDetails\",\n            tab: tab,\n            sender: \"contextMenu\",\n          });\n        },\n        this.authService,\n        this.cipherService,\n        this.totpService,\n        this.eventCollectionService\n      );\n\n      this.contextMenusBackground = new ContextMenusBackground(contextMenuClickedHandler);\n    }\n\n    this.idleBackground = new IdleBackground(\n      this.vaultTimeoutService,\n      this.stateService,\n      this.notificationsService\n    );\n    this.webRequestBackground = new WebRequestBackground(\n      this.platformUtilsService,\n      this.cipherService,\n      this.authService\n    );\n\n    this.usernameGenerationService = new UsernameGenerationService(\n      this.cryptoService,\n      this.stateService,\n      this.apiService\n    );\n\n    this.avatarUpdateService = new AvatarUpdateService(this.apiService, this.stateService);\n\n    if (!this.popupOnlyContext) {\n      this.mainContextMenuHandler = new MainContextMenuHandler(\n        this.stateService,\n        this.i18nService,\n        this.logService\n      );\n\n      this.cipherContextMenuHandler = new CipherContextMenuHandler(\n        this.mainContextMenuHandler,\n        this.authService,\n        this.cipherService,\n        this.userVerificationService\n      );\n    }\n  }\n\n  async bootstrap() {\n    this.containerService.attachToGlobal(window);\n\n    await this.stateService.init();\n\n    await this.vaultTimeoutService.init(true);\n    await (this.i18nService as BrowserI18nService).init();\n    await (this.eventUploadService as EventUploadService).init(true);\n    await this.runtimeBackground.init();\n    await this.notificationBackground.init();\n    await this.commandsBackground.init();\n\n    this.twoFactorService.init();\n\n    await this.tabsBackground.init();\n    if (!this.popupOnlyContext) {\n      this.contextMenusBackground?.init();\n    }\n    await this.idleBackground.init();\n    await this.webRequestBackground.init();\n\n    if (this.platformUtilsService.isFirefox() && !this.isPrivateMode) {\n      // Set Private Mode windows to the default icon - they do not share state with the background page\n      const privateWindows = await BrowserApi.getPrivateModeWindows();\n      privateWindows.forEach(async (win) => {\n        await new UpdateBadge(self).setBadgeIcon(\"\", win.id);\n      });\n\n      BrowserApi.onWindowCreated(async (win) => {\n        if (win.incognito) {\n          await new UpdateBadge(self).setBadgeIcon(\"\", win.id);\n        }\n      });\n    }\n\n    return new Promise<void>((resolve) => {\n      setTimeout(async () => {\n        await this.environmentService.setUrlsFromStorage();\n        // Workaround to ignore stateService.activeAccount until URLs are set\n        // TODO: Remove this when implementing ticket PM-2637\n        this.environmentService.initialized = true;\n        if (!this.isPrivateMode) {\n          await this.refreshBadge();\n        }\n        this.fullSync(true);\n        setTimeout(() => this.notificationsService.init(), 2500);\n        resolve();\n      }, 500);\n    });\n  }\n\n  async refreshBadge() {\n    await new UpdateBadge(self).run({ existingServices: this as any });\n  }\n\n  async refreshMenu(forLocked = false) {\n    if (!chrome.windows || !chrome.contextMenus) {\n      return;\n    }\n\n    await MainContextMenuHandler.removeAll();\n\n    if (forLocked) {\n      await this.mainContextMenuHandler?.noAccess();\n      this.onUpdatedRan = this.onReplacedRan = false;\n      return;\n    }\n\n    await this.mainContextMenuHandler?.init();\n\n    const tab = await BrowserApi.getTabFromCurrentWindow();\n    if (tab) {\n      await this.cipherContextMenuHandler?.update(tab.url);\n      this.onUpdatedRan = this.onReplacedRan = false;\n    }\n  }\n\n  async logout(expired: boolean, userId?: string) {\n    await this.eventUploadService.uploadEvents(userId);\n\n    await Promise.all([\n      this.syncService.setLastSync(new Date(0), userId),\n      this.cryptoService.clearKeys(userId),\n      this.settingsService.clear(userId),\n      this.cipherService.clear(userId),\n      this.folderService.clear(userId),\n      this.collectionService.clear(userId),\n      this.policyService.clear(userId),\n      this.passwordGenerationService.clear(userId),\n      this.vaultTimeoutSettingsService.clear(userId),\n      this.keyConnectorService.clear(),\n      this.vaultFilterService.clear(),\n    ]);\n\n    //Needs to be checked before state is cleaned\n    const needStorageReseed = await this.needsStorageReseed();\n\n    await this.stateService.clean({ userId: userId });\n\n    if (userId == null || userId === (await this.stateService.getUserId())) {\n      this.searchService.clearIndex();\n      this.messagingService.send(\"doneLoggingOut\", { expired: expired, userId: userId });\n    }\n\n    if (needStorageReseed) {\n      await this.reseedStorage();\n    }\n\n    if (BrowserApi.manifestVersion === 3) {\n      BrowserApi.sendMessage(\"updateBadge\");\n    }\n    await this.refreshBadge();\n    await this.mainContextMenuHandler.noAccess();\n    this.notificationsService.updateConnection(false);\n    await this.systemService.clearPendingClipboard();\n    await this.systemService.startProcessReload(this.authService);\n  }\n\n  private async needsStorageReseed(): Promise<boolean> {\n    const currentVaultTimeout = await this.stateService.getVaultTimeout();\n    return currentVaultTimeout == null ? false : true;\n  }\n\n  async collectPageDetailsForContentScript(tab: any, sender: string, frameId: number = null) {\n    if (tab == null || !tab.id) {\n      return;\n    }\n\n    const options: any = {};\n    if (frameId != null) {\n      options.frameId = frameId;\n    }\n\n    BrowserApi.tabSendMessage(\n      tab,\n      {\n        command: \"collectPageDetails\",\n        tab: tab,\n        sender: sender,\n      },\n      options\n    );\n  }\n\n  async openPopup() {\n    // Chrome APIs cannot open popup\n\n    // TODO: Do we need to open this popup?\n    if (!this.isSafari) {\n      return;\n    }\n    await SafariApp.sendMessageToApp(\"showPopover\", null, true);\n  }\n\n  async reseedStorage() {\n    if (\n      !this.platformUtilsService.isChrome() &&\n      !this.platformUtilsService.isVivaldi() &&\n      !this.platformUtilsService.isOpera()\n    ) {\n      return;\n    }\n\n    const getStorage = (): Promise<any> =>\n      new Promise((resolve) => {\n        chrome.storage.local.get(null, (o: any) => resolve(o));\n      });\n\n    const clearStorage = (): Promise<void> =>\n      new Promise((resolve) => {\n        chrome.storage.local.clear(() => resolve());\n      });\n\n    const storage = await getStorage();\n    await clearStorage();\n\n    for (const key in storage) {\n      // eslint-disable-next-line\n      if (!storage.hasOwnProperty(key)) {\n        continue;\n      }\n      await this.storageService.save(key, storage[key]);\n    }\n  }\n\n  private async fullSync(override = false) {\n    const syncInternal = 6 * 60 * 60 * 1000; // 6 hours\n    const lastSync = await this.syncService.getLastSync();\n\n    let lastSyncAgo = syncInternal + 1;\n    if (lastSync != null) {\n      lastSyncAgo = new Date().getTime() - lastSync.getTime();\n    }\n\n    if (override || lastSyncAgo >= syncInternal) {\n      await this.syncService.fullSync(override);\n      this.scheduleNextSync();\n    } else {\n      this.scheduleNextSync();\n    }\n  }\n\n  private scheduleNextSync() {\n    if (this.syncTimeout) {\n      clearTimeout(this.syncTimeout);\n    }\n\n    this.syncTimeout = setTimeout(async () => await this.fullSync(), 5 * 60 * 1000); // check every 5 minutes\n  }\n}\n","import { ClearClipboard, clearClipboardAlarmName } from \"../../autofill/clipboard\";\n\nimport { alarmKeys, clearAlarmTime, getAlarmTime } from \"./alarm-state\";\n\nexport const onAlarmListener = async (alarm: chrome.alarms.Alarm) => {\n  alarmKeys.forEach(async (key) => {\n    const executionTime = await getAlarmTime(key);\n    if (!executionTime) {\n      return;\n    }\n\n    const currentDate = Date.now();\n    if (executionTime > currentDate) {\n      return;\n    }\n\n    await clearAlarmTime(key);\n\n    switch (key) {\n      case clearClipboardAlarmName:\n        ClearClipboard.run();\n        break;\n      default:\n    }\n  });\n};\n","import { CachedServices } from \"../background/service-factories/factory-options\";\n\ntype Listener<T extends unknown[]> = (...args: [...T, CachedServices]) => Promise<void>;\n\nexport const combine = <T extends unknown[]>(\n  listeners: Listener<T>[],\n  startingServices: CachedServices = {}\n) => {\n  return async (...args: T) => {\n    const cachedServices = { ...startingServices };\n    for (const listener of listeners) {\n      await listener(...[...args, cachedServices]);\n    }\n  };\n};\n","import { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\n\nimport { authServiceFactory } from \"../../auth/background/service-factories/auth-service.factory\";\nimport { autofillServiceFactory } from \"../../autofill/background/service_factories/autofill-service.factory\";\nimport { GeneratePasswordToClipboardCommand } from \"../../autofill/clipboard\";\nimport { AutofillTabCommand } from \"../../autofill/commands/autofill-tab-command\";\nimport { Account } from \"../../models/account\";\nimport { stateServiceFactory } from \"../../platform/background/service-factories/state-service.factory\";\nimport {\n  passwordGenerationServiceFactory,\n  PasswordGenerationServiceInitOptions,\n} from \"../../tools/background/service_factories/password-generation-service.factory\";\nimport { CachedServices } from \"../background/service-factories/factory-options\";\nimport { logServiceFactory } from \"../background/service-factories/log-service.factory\";\nimport { BrowserApi } from \"../browser/browser-api\";\n\nexport const onCommandListener = async (command: string, tab: chrome.tabs.Tab) => {\n  switch (command) {\n    case \"autofill_login\":\n      await doAutoFillLogin(tab);\n      break;\n    case \"generate_password\":\n      await doGeneratePasswordToClipboard(tab);\n      break;\n  }\n};\n\nconst doAutoFillLogin = async (tab: chrome.tabs.Tab): Promise<void> => {\n  const cachedServices: CachedServices = {};\n  const opts = {\n    cryptoFunctionServiceOptions: {\n      win: self,\n    },\n    encryptServiceOptions: {\n      logMacFailures: true,\n    },\n    logServiceOptions: {\n      isDev: false,\n    },\n    platformUtilsServiceOptions: {\n      clipboardWriteCallback: () => Promise.resolve(),\n      biometricCallback: () => Promise.resolve(false),\n      win: self,\n    },\n    stateServiceOptions: {\n      stateFactory: new StateFactory(GlobalState, Account),\n    },\n    stateMigrationServiceOptions: {\n      stateFactory: new StateFactory(GlobalState, Account),\n    },\n    apiServiceOptions: {\n      logoutCallback: () => Promise.resolve(),\n    },\n    keyConnectorServiceOptions: {\n      logoutCallback: () => Promise.resolve(),\n    },\n    i18nServiceOptions: {\n      systemLanguage: BrowserApi.getUILanguage(self),\n    },\n  };\n  const logService = await logServiceFactory(cachedServices, opts);\n  const authService = await authServiceFactory(cachedServices, opts);\n  const autofillService = await autofillServiceFactory(cachedServices, opts);\n\n  const authStatus = await authService.getAuthStatus();\n  if (authStatus < AuthenticationStatus.Unlocked) {\n    // TODO: Add back in unlock on autofill\n    logService.info(\"Currently not unlocked, MV3 does not support unlock on autofill currently.\");\n    return;\n  }\n\n  const command = new AutofillTabCommand(autofillService);\n  await command.doAutofillTabCommand(tab);\n};\n\nconst doGeneratePasswordToClipboard = async (tab: chrome.tabs.Tab): Promise<void> => {\n  const stateFactory = new StateFactory(GlobalState, Account);\n\n  const cache = {};\n  const options: PasswordGenerationServiceInitOptions = {\n    cryptoFunctionServiceOptions: {\n      win: self,\n    },\n    encryptServiceOptions: {\n      logMacFailures: false,\n    },\n    logServiceOptions: {\n      isDev: false,\n    },\n    platformUtilsServiceOptions: {\n      biometricCallback: () => Promise.resolve(true),\n      clipboardWriteCallback: () => Promise.resolve(),\n      win: self,\n    },\n    stateMigrationServiceOptions: {\n      stateFactory: stateFactory,\n    },\n    stateServiceOptions: {\n      stateFactory: stateFactory,\n    },\n  };\n\n  const command = new GeneratePasswordToClipboardCommand(\n    await passwordGenerationServiceFactory(cache, options),\n    await stateServiceFactory(cache, options)\n  );\n  command.generatePasswordToClipboard(tab);\n};\n","import { CipherContextMenuHandler } from \"../../autofill/browser/cipher-context-menu-handler\";\nimport { ContextMenuClickedHandler } from \"../../autofill/browser/context-menu-clicked-handler\";\n\nimport { combine } from \"./combine\";\nimport { onCommandListener } from \"./on-command-listener\";\nimport { onInstallListener } from \"./on-install-listener\";\nimport { UpdateBadge } from \"./update-badge\";\n\nconst tabsOnActivatedListener = combine([\n  UpdateBadge.tabsOnActivatedListener,\n  CipherContextMenuHandler.tabsOnActivatedListener,\n]);\n\nconst tabsOnReplacedListener = combine([\n  UpdateBadge.tabsOnReplacedListener,\n  CipherContextMenuHandler.tabsOnReplacedListener,\n]);\n\nconst tabsOnUpdatedListener = combine([\n  UpdateBadge.tabsOnUpdatedListener,\n  CipherContextMenuHandler.tabsOnUpdatedListener,\n]);\n\nconst contextMenusClickedListener = ContextMenuClickedHandler.onClickedListener;\n\n// TODO: All message listeners should be RuntimeMessage in Notifications follow up then this type annotation can be inferred\nconst runtimeMessageListener = combine<\n  [message: { command: string }, sender: chrome.runtime.MessageSender]\n>([\n  UpdateBadge.messageListener,\n  CipherContextMenuHandler.messageListener,\n  ContextMenuClickedHandler.messageListener,\n]);\n\nexport {\n  tabsOnActivatedListener,\n  tabsOnReplacedListener,\n  tabsOnUpdatedListener,\n  contextMenusClickedListener,\n  runtimeMessageListener,\n  onCommandListener,\n  onInstallListener,\n};\n","import MainBackground from \"../background/main.background\";\n\nimport { onAlarmListener } from \"./alarms/on-alarm-listener\";\nimport { registerAlarms } from \"./alarms/register-alarms\";\nimport { BrowserApi } from \"./browser/browser-api\";\nimport {\n  contextMenusClickedListener,\n  onCommandListener,\n  onInstallListener,\n  runtimeMessageListener,\n  tabsOnActivatedListener,\n  tabsOnReplacedListener,\n  tabsOnUpdatedListener,\n} from \"./listeners\";\n\nif (BrowserApi.manifestVersion === 3) {\n  chrome.commands.onCommand.addListener(onCommandListener);\n  chrome.runtime.onInstalled.addListener(onInstallListener);\n  chrome.alarms.onAlarm.addListener(onAlarmListener);\n  registerAlarms();\n  chrome.tabs.onActivated.addListener(tabsOnActivatedListener);\n  chrome.tabs.onReplaced.addListener(tabsOnReplacedListener);\n  chrome.tabs.onUpdated.addListener(tabsOnUpdatedListener);\n  chrome.contextMenus.onClicked.addListener(contextMenusClickedListener);\n  BrowserApi.messageListener(\n    \"runtime.background\",\n    (message: { command: string }, sender, sendResponse) => {\n      runtimeMessageListener(message, sender);\n    }\n  );\n} else {\n  const bitwardenMain = ((window as any).bitwardenMain = new MainBackground());\n  bitwardenMain.bootstrap().then(() => {\n    // Finished bootstrapping\n  });\n}\n","import { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\n\nimport { Account } from \"../../models/account\";\nimport {\n  EnvironmentServiceInitOptions,\n  environmentServiceFactory,\n} from \"../background/service-factories/environment-service.factory\";\nimport { BrowserApi } from \"../browser/browser-api\";\n\nexport async function onInstallListener(details: chrome.runtime.InstalledDetails) {\n  const cache = {};\n  const opts: EnvironmentServiceInitOptions = {\n    encryptServiceOptions: {\n      logMacFailures: false,\n    },\n    cryptoFunctionServiceOptions: {\n      win: self,\n    },\n    logServiceOptions: {\n      isDev: false,\n    },\n    stateServiceOptions: {\n      stateFactory: new StateFactory(GlobalState, Account),\n    },\n    stateMigrationServiceOptions: {\n      stateFactory: new StateFactory(GlobalState, Account),\n    },\n  };\n  const environmentService = await environmentServiceFactory(cache, opts);\n\n  setTimeout(async () => {\n    if (details.reason != null && details.reason === chrome.runtime.OnInstalledReason.INSTALL) {\n      BrowserApi.createNewTab(\"https://bitwarden.com/browser-start/\");\n\n      if (await environmentService.hasManagedEnvironment()) {\n        await environmentService.setUrlsToManagedEnvironment();\n      }\n    }\n  }, 100);\n}\n","const NUMBER_OF_ALARMS = 6;\n\nexport function registerAlarms() {\n  alarmsToBeCreated(NUMBER_OF_ALARMS);\n}\n\n/**\n * Creates staggered alarms that periodically (1min) raise OnAlarm events. The staggering is calculated based on the number of alarms passed in.\n * @param numberOfAlarms Number of named alarms, that shall be registered\n * @example\n * // alarmsToBeCreated(2) results in 2 alarms separated by 30 seconds\n * @example\n * // alarmsToBeCreated(4) results in 4 alarms separated by 15 seconds\n * @example\n * // alarmsToBeCreated(6) results in 6 alarms separated by 10 seconds\n * @example\n * // alarmsToBeCreated(60) results in 60 alarms separated by 1 second\n */\nfunction alarmsToBeCreated(numberOfAlarms: number): void {\n  const oneMinuteInMs = 60 * 1000;\n  const offset = oneMinuteInMs / numberOfAlarms;\n\n  let calculatedWhen: number = Date.now() + offset;\n\n  for (let index = 0; index < numberOfAlarms; index++) {\n    chrome.alarms.create(`bw_alarm${index}`, { periodInMinutes: 1, when: calculatedWhen });\n    calculatedWhen += offset;\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + \"encrypt-worker\" + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t352: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_bitwarden_browser\"] = self[\"webpackChunk_bitwarden_browser\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// module cache are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\nvar __webpack_exports__ = __webpack_require__.O(undefined, [736], () => (__webpack_require__(28025)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","constructor","response","this","getResponseProperty","propertyName","exactName","Error","undefined","otherCasePropertyName","charAt","toUpperCase","toLowerCase","length","slice","ListResponse","t","super","data","map","dr","continuationToken","nodeURL","window","static","inited","isNode","process","release","name","isBrowser","isMobileBrowser","isMobile","isAppleMobileBrowser","isAppleMobile","global","g","self","str","Uint8Array","Buffer","from","binaryString","atob","bytes","i","charCodeAt","fromB64ToArray","fromUrlB64ToB64","parseInt","substr","strUtf8","unescape","encodeURIComponent","arr","buffer","toString","binary","byteLength","String","fromCharCode","btoa","fromB64toUrlB64","fromBufferToB64","b64Str","replace","encodedString","apply","decodeURIComponent","escape","Array","prototype","call","x","join","urlB64Str","output","fromB64ToUtf8","utfStr","fromBufferToUrlB64","fromUtf8ToArray","c","r","Math","random","id","RegExp","test","uriString","isNullOrWhitespace","trim","startsWith","indexOf","hostname","validHosts","url","getUrl","host","parseResult","isIp","domain","search","Map","split","forEach","pair","parts","set","i18nService","prop","a","b","collator","compare","localeCompare","obj","target","source","Object","assign","keys","filter","k","Number","isNaN","getUrlObject","s","bgColor","threshold","svgTextFill","bgColorHexNums","substring","hash","color","bitwardenContainerService","fromEntries","record","entries","e","destination","denormalizedPath","win","mobile","navigator","userAgent","vendor","opera","match","ms","Promise","resolve","setTimeout","generator","of","pipe","switchMap","targetDate","diffTime","getTime","Date","now","max","floor","hasProtocol","URL","regexpEmojiPresentation","minimumPasswordLength","DomainMatchBlacklist","Set","init","PolicyData","organizationId","type","enabled","PolicyResponse","OrganizationApiKeyType","OrganizationConnectionType","OrganizationUserStatusType","OrganizationUserType","PolicyType","ProviderUserStatusType","ProviderUserType","ScimProviderType","PolicyApiService","policyService","apiService","stateService","getPolicy","send","getPolicies","getPoliciesByToken","token","email","organizationUserId","encodeRFC3986URIComponent","getPoliciesByInvitedUser","userId","getMasterPasswordPoliciesForInvitedUsers","orgId","getUserId","policies","mapPoliciesFromToken","firstValueFrom","masterPasswordPolicyOptions$","putPolicy","request","upsert","Provider","status","useEvents","canAccess","isProviderAdmin","Confirmed","canCreateOrganizations","canManageUsers","canAccessEventLogs","ProviderAdmin","ClientType","DeviceType","ProviderService","get","providers","getProviders","hasOwnProperty","getAll","push","save","setProviders","Android","iOS","AndroidAmazon","WindowsDesktop","MacOsDesktop","LinuxDesktop","UWP","EncryptedExportType","EncryptionType","EXPECTED_NUM_PARTS_BY_ENCRYPTION_TYPE","AesCbc256_B64","AesCbc128_HmacSha256_B64","AesCbc256_HmacSha256_B64","Rsa2048_OaepSha256_B64","Rsa2048_OaepSha1_B64","Rsa2048_OaepSha256_HmacSha256_B64","Rsa2048_OaepSha1_HmacSha256_B64","EventSystemUser","EventType","FieldType","FileUploadType","HashPurpose","HtmlStorageLocation","HttpStatusCode","KdfType","KdfConfig","iterations","memory","parallelism","PBKDF2_SHA256","KeySuffixOptions","LoginLinkedId","CardLinkedId","IdentityLinkedId","LogLevelType","NativeMessagingVersion","NotificationType","ProductType","ProviderType","SecureNoteType","StateVersion","StorageLocation","ThemeType","UriMatchType","SymmetricCryptoKey","key","encType","encKey","macKey","keyB64","encKeyB64","macKeyB64","toJSON","arrayBuffer","fromString","AuthRequestCryptoServiceImplementation","cryptoService","setUserKeyAfterDecryptingSharedUserKey","authReqResponse","authReqPrivateKey","userKey","decryptPubKeyEncryptedUserKey","setUserKey","setKeysAfterDecryptingSharedMasterKeyAndHash","masterKey","masterKeyHash","decryptPubKeyEncryptedMasterKeyAndHash","masterPasswordHash","decryptUserKeyWithMasterKey","setMasterKey","setMasterKeyHash","pubKeyEncryptedUserKey","privateKey","decryptedUserKeyBytes","rsaDecrypt","pubKeyEncryptedMasterKey","pubKeyEncryptedMasterKeyHash","decryptedMasterKeyArrayBuffer","decryptedMasterKeyHashArrayBuffer","fromBufferToUtf8","AuthenticationStatus","AuthenticationType","PreloginRequest","ErrorResponse","identityResponse","errorModel","responseErrorModel","message","validationErrors","captchaSiteKey","HCaptcha_SiteKey","captchaRequired","statusCode","getSingleMessage","getAllMessages","messages","item","prefix","lastSep","lastIndexOf","EncString","encryptedStringOrType","iv","mac","initFromData","initFromEncryptedString","ivBytes","macBytes","dataBytes","encryptedString","encryptionType","encPieces","parseEncryptedString","headerPieces","decrypt","decryptedValue","getKeyForDecryption","encryptService","getContainerService","getEncryptService","decryptToUtf8","getCryptoService","getOrgKey","getUserKeyWithLegacySupport","ForceResetPasswordReason","TwoFactorProviderType","Domain","buildDomainModel","dataObj","notEncList","objProp","buildDataModel","notEncStringList","decryptObj","viewModel","promises","theProp","p","then","mapProp","val","all","MasterPasswordPolicyOptions","minComplexity","minLength","requireUpper","requireLower","requireNumbers","requireSpecial","enforceOnLogin","policy","options","TokenRequest","twoFactor","device","alterIdentityTokenHeaders","headers","setTwoFactor","setPasswordlessAccessCode","accessCode","passwordlessAuthRequest","toIdentityToken","clientId","scope","client_id","deviceType","deviceIdentifier","identifier","deviceName","authRequest","provider","twoFactorToken","twoFactorProvider","twoFactorRemember","remember","PasswordTokenRequest","captchaResponse","grant_type","username","password","fromUtf8ToUrlB64","IdentityCaptchaResponse","siteKey","KeysRequest","publicKey","encryptedPrivateKey","AdminAuthRequestStorable","fromBufferToByteString","privateKeyBuffer","fromByteStringToArray","EnvironmentUrls","base","api","identity","icons","notifications","events","webVault","keyConnector","KeyConnectorUserDecryptionOption","keyConnectorUrl","TrustedDeviceUserDecryptionOption","hasAdminApproval","hasLoginApprovingDevice","hasManageResetPasswordPermission","ServerConfigData","serverConfigResponse","featureStates","version","gitHash","server","ThirdPartyServerConfigData","utcDate","toISOString","environment","EnvironmentServerConfigData","fromJSON","cloudRegion","vault","sso","EncryptionPair","encrypted","decrypted","ArrayBuffer","decryptedFromJson","encryptedFromJson","DataEncryptionPair","TemporaryDataEncryption","AccountData","ciphers","folders","sends","collections","passwordGenerationHistory","AccountKeys","organizationKeys","providerKeys","cryptoSymmetricKey","merge","deviceKey","cryptoMasterKey","initRecordEncryptionPairsFromJSON","decObj","AccountProfile","environmentUrls","vaultTimeoutAction","pinProtected","serverConfig","AccountTokens","AccountDecryptionOptions","accountDecryptionOptions","hasMasterPassword","trustedDeviceOption","keyConnectorOption","LoginState","profile","settings","tokens","decryptionOptions","loginState","adminAuthRequest","json","AuthResult","resetMasterPassword","forcePasswordReset","None","twoFactorProviders","requiresCaptcha","requiresTwoFactor","DeviceRequest","appId","platformUtilsService","getDevice","getDeviceString","pushToken","TokenTwoFactorRequest","MasterPasswordPolicyResponse","KeyConnectorUserDecryptionOptionResponse","TrustedDeviceUserDecryptionOptionResponse","EncryptedPrivateKey","EncryptedUserKey","encryptedUserKey","UserDecryptionOptionsResponse","TrustedDeviceOption","KeyConnectorOption","IdentityTokenResponse","accessToken","access_token","expiresIn","expires_in","refreshToken","refresh_token","tokenType","token_type","kdf","kdfIterations","kdfMemory","kdfParallelism","apiUseKeyConnector","masterPasswordPolicy","UserDecryptionOptions","userDecryptionOptions","IdentityTwoFactorResponse","twoFactorProviders2","captchaToken","ssoEmail2faSessionToken","LogInStrategy","tokenService","appIdService","messagingService","logService","twoFactorService","captchaBypassToken","logInTwoFactor","tokenRequest","authResult","startLogIn","clearSelectedProvider","postIdentityToken","processTwoFactorResponse","processCaptchaResponse","processTokenResponse","buildDeviceRequest","getAppId","buildTwoFactor","userProvidedTwoFactor","storedTwoFactorToken","getTwoFactorToken","Remember","saveAccountInformation","tokenResponse","accountInformation","decodeToken","sub","getDeviceKey","accountKeys","getAdminAuthRequest","addAccount","hasPremiumPersonally","premium","kdfType","fromResponse","result","AdminForcePasswordReset","setTwoFactorToken","setPrivateKey","createKeyPairForOldAccount","makeKeyPair","postAccountKeys","error","ssoEmail2FaSessionToken","PasswordLogInStrategy","passwordStrengthService","authService","forcePasswordResetReason","setForcePasswordResetReason","logIn","credentials","masterPassword","makePreloginKey","localMasterKeyHash","hashMasterKey","LocalAuthorization","masterPasswordPolicyOptions","getMasterPasswordPolicyOptionsFromResponse","evaluateMasterPassword","WeakMasterPassword","setMasterKeyEncryptedUserKey","getMasterKey","passwordStrength","getPasswordStrength","score","PasswordlessLogInStrategy","passwordlessCredentials","authRequestId","deviceTrustCryptoService","decryptedMasterKey","decryptedMasterKeyHash","decryptedUserKey","trySetUserKeyWithMasterKey","trustDeviceIfRequired","SsoTokenRequest","code","codeVerifier","redirectUri","code_verifier","redirect_uri","SsoLogInStrategy","keyConnectorService","authReqCryptoService","redirectUrl","ssoAuthResult","newSsoUser","convertNewSsoUserToKeyConnector","setMasterKeyFromUrl","masterKeyEncryptedUserKey","trySetUserKeyWithApprovedAdminRequestIfExists","hasUserKey","trySetUserKeyWithDeviceKey","adminAuthReqStorable","adminAuthReqResponse","getAuthRequest","NotFound","setAdminAuthRequest","requestApproved","showToast","encDevicePrivateKey","encUserKey","decryptUserKeyWithDeviceKey","UserApiTokenRequest","clientSecret","client_secret","UserApiLogInStrategy","environmentService","getKeyConnectorUrl","setApiKeyClientId","setApiKeyClientSecret","PasswordlessAuthRequest","AuthService","logInStrategy","pushNotificationSubject","Subject","strategy","clearState","Password","Sso","UserApi","Passwordless","saveState","logOut","callback","authingWithUserApiKey","authingWithSso","authingWithPassword","authingWithPasswordless","getAuthStatus","getIsAuthenticated","LoggedOut","hasUserKeyInMemory","hasUserKeyStored","Auto","getEverBeenUnlocked","getUserKeyFromStorage","Unlocked","Locked","kdfConfig","preloginResponse","postPrelogin","makeMasterKey","authResponsePushNotification","notification","next","getPushNotificationObs$","asObservable","passwordlessLogin","pubKey","keyToEncrypt","encryptedMasterKeyHash","getKeyHash","rsaEncrypt","getUserKey","encryptedKey","putAuthRequest","startSessionTimeout","clearSessionTimeout","sessionTimeout","clearTimeout","SecretVerificationRequest","UpdateDevicesTrustRequest","DeviceKeysUpdateRequest","DeviceTrustCryptoService","cryptoFunctionService","devicesApiService","getShouldTrustDevice","setShouldTrustDevice","value","trustDevice","makeDeviceKey","devicePublicKey","devicePrivateKey","rsaGenerateKeyPair","devicePublicKeyEncryptedUserKey","userKeyEncryptedDevicePublicKey","deviceKeyEncryptedDevicePrivateKey","encrypt","deviceResponse","updateTrustedDeviceKeys","setDeviceKey","rotateDevicesTrust","newUserKey","oldUserKey","secretVerificationRequest","currentDeviceKeys","getDeviceKeys","decryptedDevicePublicKey","decryptToBytes","encryptedPublicKey","encryptedNewUserKey","encryptedDevicePublicKey","currentDeviceUpdateRequest","trustRequest","currentDevice","otherDevices","updateTrust","randomBytes","encryptedDevicePrivateKey","supportsDeviceTrust","getAccountDecryptionOptions","DeviceResponse","creationDate","revisionDate","TrustedDeviceKeysRequest","ProtectedDeviceResponse","DevicesApiServiceImplementation","getKnownDevice","getDeviceByIdentifier","getDevices","updateDevicesTrustRequestModel","KeyConnectorUserKeyRequest","SetKeyConnectorKeyRequest","orgIdentifier","KeyConnectorService","organizationService","logoutCallback","setUsesKeyConnector","usesKeyConnector","getUsesKeyConnector","userNeedsMigration","loggedInUsingSso","getIsExternal","requiredByOrganization","getManagingOrganization","userIsNotUsingKeyConnector","migrateUser","organization","keyConnectorRequest","postUserKeyToKeyConnector","handleKeyConnectorError","postConvertToKeyConnector","masterKeyResponse","getMasterKeyFromKeyConnector","keyArr","find","o","keyConnectorEnabled","Admin","Owner","isProviderUser","getEmail","makeUserKey","privKey","setPasswordRequest","postSetKeyConnectorKey","setConvertAccountRequired","setConvertAccountToKeyConnector","getConvertAccountRequired","getConvertAccountToKeyConnector","removeConvertAccountRequired","clear","TokenService","decoded","fromUrlB64ToUtf8","JSON","parse","setTokens","clientIdClientSecret","setToken","setRefreshToken","setClientId","setClientSecret","getClientId","getApiKeyClientId","getClientSecret","getApiKeyClientSecret","setAccessToken","getToken","getAccessToken","getRefreshToken","clearTwoFactorToken","clearToken","getTokenExpirationDate","exp","d","setUTCSeconds","tokenSecondsRemaining","offsetSeconds","msRemaining","valueOf","round","tokenNeedsRefresh","minutes","getEmailVerified","email_verified","getName","getIssuer","iss","isArray","amr","includes","TwoFactorProviders","Authenticator","description","priority","sort","Yubikey","Duo","OrganizationDuo","Email","WebAuthn","TwoFactorService","selectedTwoFactorProviderType","getSupportedProviders","twoFactorProvidersData","has","supportsDuo","supportsWebAuthn","getDefaultProvider","webAuthnSupported","providerType","providerPriority","_value","setSelectedProvider","clearProviders","VerificationType","UserVerificationApiService","postAccountVerifyOTP","postAccountRequestOTP","VerifyOTPRequest","OTP","UserVerificationService","userVerificationApiService","buildRequest","verification","requestClass","alreadyHashed","validateInput","otp","secret","getKdfType","getKdfConfig","verifyUser","compareAndUpdateKeyHash","requestOTP","hasMasterPasswordAndMasterKeyHash","getMasterKeyHash","MessagingService","AccountFactory","accountConstructor","create","args","GlobalStateFactory","globalStateConstructor","StateFactory","globalStateFactory","accountFactory","createGlobal","createAccount","WindowState","GlobalState","theme","System","stateVersion","One","AppIdService","storageService","makeAndGetAppId","getAnonymousAppId","existingId","htmlStorageLocation","Local","guid","newGuid","ServerConfig","serverConfigData","getAgeInMilliseconds","isValid","expiresSoon","ConfigService","configApiService","_serverConfig","BehaviorSubject","serverConfig$","timer","concatMap","fetchServerConfig","subscribe","urls","setServerConfig","setCloudWebVaultUrl","getFeatureFlagBool","defaultValue","getFeatureFlag","getFeatureFlagString","getFeatureFlagNumber","getCloudRegion","buildServerConfig","getServerConfig","getValue","ConsoleLogService","isDev","timersMap","debug","write","Debug","info","Info","warning","Warning","level","console","log","warn","ContainerService","attachToGlobal","EncArrayBuffer","encBytes","minimumLength","ENC_TYPE_LENGTH","throwDecryptionError","b64","EncryptedObject","EncryptServiceImplementation","logMacFailures","plainValue","plainBuf","encObj","aesEncrypt","encryptToBytes","encValue","macLen","encString","resolveLegacyKey","fastParams","aesDecryptFastParameters","computedMac","hmacFast","macData","compareFast","logMacFailed","aesDecryptFast","encThing","hmac","aesDecrypt","decryptItems","items","msg","InitializerKey","CipherType","CipherRepromptType","AttachmentData","fileName","size","sizeName","CardData","cardholderName","brand","number","expMonth","expYear","FieldData","linkedId","IdentityData","title","firstName","middleName","lastName","address1","address2","address3","city","state","postalCode","country","company","phone","ssn","passportNumber","licenseNumber","LoginUriData","uri","LoginData","passwordRevisionDate","totp","autofillOnPageLoad","uris","u","PasswordHistoryData","lastUsedDate","SecureNoteData","CipherData","collectionIds","folderId","edit","viewPassword","organizationUseTotp","favorite","notes","deletedDate","reprompt","Login","login","SecureNote","secureNote","Card","card","Identity","fields","f","attachments","passwordHistory","ph","AttachmentView","fileSize","LinkedMetadata","propertyKey","_i18nKey","i18nKey","linkedFieldOption","linkedFieldOptions","ItemView","CardView","_brand","_number","_subTitle","maskedCode","repeat","maskedNumber","subTitle","count","expiration","formatYear","year","cardNum","re","CardholderName","ExpMonth","ExpYear","Code","Brand","FieldView","newField","showValue","showCount","maskedValue","IdentityView","_firstName","_lastName","fullName","fullAddress","address","fullAddressPart2","addressPart2","Title","MiddleName","Address1","Address2","Address3","City","State","PostalCode","Country","Company","Phone","Ssn","Username","PassportNumber","LicenseNumber","FirstName","LastName","FullName","CanLaunchWhitelist","LoginUriView","_uri","_domain","_hostname","_host","_canLaunch","getDomain","RegularExpression","getHostname","getHost","hostnameOrUri","hostOrUri","isWebsite","canLaunch","launchUri","matchesUri","targetUri","equivalentDomains","defaultUriMatch","matchType","targetDomain","matchDomains","add","matchesDomain","Host","urlHost","Exact","StartsWith","Never","domainUrlHost","LoginView","l","hasUris","maskedPassword","some","hasTotp","PasswordHistoryView","SecureNoteView","n","CipherView","initializerKey","localData","hasPasswordHistory","hasAttachments","hasOldAttachments","hasFields","passwordRevisionDisplayDate","isDeleted","linkedFieldValue","linkedFieldI18nKey","view","Attachment","decryptAttachmentKey","decValue","toAttachmentData","toCardData","Field","toFieldData","toIdentityData","LoginUri","toLoginUriData","toLoginData","toPasswordHistoryData","toSecureNoteData","Cipher","model","reduce","promise","attachment","decAttachment","field","decField","decPh","toCipherData","classInitializers","MultithreadEncryptServiceImplementation","clear$","worker","Worker","restartTimeout","postMessage","stringify","fromEvent","jsonItem","className","takeUntil","defaultIfEmpty","terminate","timeout","AzureFileUploadService","upload","renewalCallback","azureUploadBlob","azureUploadBlocks","urlObject","Headers","toUTCString","searchParams","Request","body","cache","method","blobResponse","fetch","baseUrl","blockSize","getMaxBlockSize","blockIndex","numBlocks","ceil","blocksStaged","renewUrlIfNecessary","blockUrl","blockId","encodedBlockId","append","start","blockData","blockHeaders","blockRequest","blockResponse","blockListUrl","blockListXml","expiry","setTime","utfBlockId","fromUtf8ToB64","blockIdList","xml","Version","month","day","v","compareTo","BitwardenFileUploadService","encryptedFileName","encryptedFileData","apiCall","fd","FormData","blob","Blob","filepath","contentType","FileUploadService","azureFileUploadService","bitwardenFileUploadService","uploadData","fileUploadMethods","fileUploadType","Direct","postDirect","Azure","renewFileUploadUrl","rollback","AbstractStorageService","AbstractMemoryStorageService","TYPE","MemoryStorageService","store","remove","delete","getBypassCache","v1Keys","alwaysShowDock","autoConfirmFingerprints","autoFillOnPageLoadDefault","biometricAwaitingAcceptance","biometricFingerprintValidated","biometricText","biometricUnlock","clearClipboard","collapsedGroupings","convertAccountToKeyConnector","disableAddLoginNotification","disableAutoBiometricsPrompt","disableAutoTotpCopy","disableBadgeCounter","disableChangedPasswordNotification","disableContextMenuItem","disableFavicon","disableGa","dontShowCardsCurrentTab","dontShowIdentitiesCurrentTab","emailVerified","enableAlwaysOnTop","enableAutoFillOnPageLoad","enableBiometric","enableBrowserIntegration","enableBrowserIntegrationFingerprint","enableCloseToTray","enableFullWidth","enableMinimizeToTray","enableStartToTray","enableTray","encOrgKeys","encPrivate","encProviderKeys","entityId","entityType","eventCollection","history","installedVersion","keyHash","lastActive","locale","mainWindowSize","minimizeOnCopyToClipboard","neverDomains","noAutoPromptBiometricsText","openAtLogin","passwordGenerationOptions","protectedPin","ssoCodeVerifier","ssoIdentifier","ssoState","stamp","userEmail","usesConnector","vaultTimeout","rememberedEmail","v1KeyPrefixes","lastSync","organizations","partialKeys","StateMigrationService","secureStorageService","stateFactory","needsMigration","currentStateVersion","getCurrentStateVersion","Latest","migrate","migrateStateFrom1To2","Two","migrateStateFrom2To3","Three","migrateStateFrom3To4","Four","authenticatedAccounts","getAuthenticatedAccounts","account","migratedAccount","migrateAccountFrom4To5","setCurrentStateVersion","Five","migrateAccountFrom5To6","Six","globals","getGlobals","migrateAccountFrom6To7","noAutoPromptBiometrics","Seven","clearV1Keys","clearingUserId","keyPrefix","ssoOrganizationIdentifier","defaultAccount","accountSettings","autoConfirmFingerPrints","addEditCipherInfo","apiKeyClientSecret","cryptoMasterKeyAuto","cryptoMasterKeyB64","cryptoMasterKeyBiometric","legacyEtmKey","apiKeyClientId","authenticationStatus","everBeenUnlocked","decodedToken","securityStamp","accountActivity","keySuffix","authenticatedUserIds","encryptedOrgKeys","globalSetting","newVersion","SystemService","reloadCallback","reloadInterval","clearClipboardTimeout","clearClipboardTimeoutFunction","startProcessReload","accounts","accounts$","getPinKeyEncryptedUserKeyEphemeral","cancelProcessReload","executeProcessReload","getBiometricFingerprintValidated","clearInterval","setInterval","clipboardValue","timeoutMs","getClearClipboard","clearSeconds","clipboardValueNow","readFromClipboard","copyToClipboard","clearing","clearPendingClipboard","DecryptParameters","WebCryptoFunctionService","crypto","subtle","wasmSupported","checkIfWasmSupported","pbkdf2","salt","algorithm","wcLen","passwordBuf","toBuf","pbkdf2Params","toWebCryptoAlgorithm","impKey","importKey","deriveBits","argon2","passwordArr","saltArr","pass","time","mem","hashLen","ArgonType","Argon2id","unloadRuntime","hkdf","ikm","outputByteSize","hkdfParams","hkdfExpand","prk","infoBuf","infoArr","runningOkmLength","previousT","okm","md","md5","sha1","valueBytes","toByteString","update","digest","valueBuf","signingAlgorithm","sign","mac1","mac2","arr1","arr2","getBytes","rand","Uint32Array","createBuffer","putInt32","meta","encKeyByteString","macKeyByteString","decode64","parameters","dataBuffer","decipher","createDecipher","finish","rsaParams","rsaExtractPublicKey","impPrivateKey","jwkPrivateKey","exportKey","jwkPublicKeyParams","kty","alg","ext","impPublicKey","modulusLength","publicExponent","keyPair","generateKey","getRandomValues","buf","encodeUtf8","WebAssembly","instantiate","module","Module","Instance","UpdateAvatarRequest","avatarColor","AvatarUpdateService","_avatarUpdate$","avatarUpdate$","loadColorFromState","getAvatarColor","pushUpdate","putAvatar","setAvatarColor","OrganizationConnectionResponse","configType","rawConfig","config","CardApi","FieldApi","IdentityApi","LoginUriApi","LoginApi","SecureNoteApi","AttachmentResponse","PasswordHistoryResponse","CipherResponse","h","SelectionReadOnlyResponse","readOnly","hidePasswords","CollectionResponse","externalId","CollectionDetailsResponse","CollectionAccessDetailsResponse","groups","users","assigned","OrganizationExportResponse","OrganizationSponsorshipSyncStatusResponse","lastSyncDate","ProviderOrganizationResponse","providerId","userCount","seats","plan","ProviderOrganizationOrganizationDetailsResponse","organizationName","OrganizationUserBulkPublicKeyResponse","ProviderUserBulkPublicKeyResponse","ProviderUserBulkResponse","PermissionsApi","accessEventLogs","accessImportExport","accessReports","createNewCollections","editAnyCollection","deleteAnyCollection","editAssignedCollections","deleteAssignedCollections","manageCiphers","manageGroups","manageSso","managePolicies","manageUsers","manageResetPassword","manageScim","ProviderUserResponse","permissions","ProviderUserUserDetailsResponse","ProviderResponse","businessName","billingEmail","ApiKeyResponse","apiKey","AuthRequestResponse","requestDeviceType","requestIpAddress","responseDate","requestDate","requestDateUTC","UTC","getUTCFullYear","getUTCMonth","getDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","dateNow","dateNowUTC","isExpired","isAnswered","DeviceVerificationResponse","isDeviceVerificationSectionEnabled","unknownDeviceVerificationEnabled","EmergencyAccessGranteeDetailsResponse","granteeId","waitTimeDays","EmergencyAccessGrantorDetailsResponse","grantorId","EmergencyAccessTakeoverResponse","keyEncrypted","EmergencyAccessViewResponse","KeyConnectorUserKeyResponse","PreloginResponse","RegisterResponse","SsoPreValidateResponse","TwoFactorAuthenticatorResponse","TwoFactorDuoResponse","secretKey","integrationKey","TwoFactorEmailResponse","TwoFactorProviderResponse","TwoFactorRecoverResponse","TwoFactorWebAuthnResponse","KeyResponse","migrated","ChallengeResponse","attestation","authenticatorSelection","challenge","fromUrlB64ToArray","excludeCredentials","extensions","pubKeyCredParams","rp","user","TwoFactorYubiKeyResponse","key1","key2","key3","key4","key5","nfc","BillingSourceResponse","cardBrand","needsVerification","BillingInvoiceResponse","pdfUrl","paid","date","amount","BillingTransactionResponse","createdDate","refunded","partiallyRefunded","refundedAmount","paymentMethodType","details","BillingHistoryResponse","invoices","transactions","hasNoHistory","BillingPaymentResponse","balance","paymentSource","ProfileOrganizationResponse","usePolicies","useGroups","useDirectory","useTotp","use2fa","useApi","useSso","useKeyConnector","useScim","useCustomPermissions","useResetPassword","useSecretsManager","usePasswordManager","useActivateAutofillPolicy","selfHost","usersGetPremium","maxCollections","maxStorageGb","hasPublicAndPrivateKeys","ssoBound","resetPasswordEnrolled","providerName","familySponsorshipFriendlyName","familySponsorshipAvailable","planProductType","familySponsorshipLastSyncDateString","familySponsorshipLastSyncDate","familySponsorshipValidUntilString","familySponsorshipValidUntil","familySponsorshipToDelete","accessSecretsManager","ProfileProviderOrganizationResponse","ProfileProviderResponse","ProfileResponse","providerOrganizations","masterPasswordHint","premiumPersonally","premiumFromOrganization","culture","twoFactorEnabled","PaymentResponse","userProfile","paymentIntentClientSecret","success","PlanResponse","product","isAnnual","nameLocalizationKey","descriptionLocalizationKey","canBeUsedByBusiness","baseSeats","baseStorageGb","maxUsers","hasAdditionalSeatsOption","maxAdditionalSeats","hasAdditionalStorageOption","maxAdditionalStorage","hasPremiumAccessOption","trialPeriodDays","hasSelfHost","hasPolicies","hasGroups","hasDirectory","hasEvents","has2fa","hasApi","hasSso","hasResetPassword","upgradeSortOrder","displaySortOrder","legacyYear","disabled","stripePlanId","stripeSeatPlanId","stripeStoragePlanId","stripePremiumAccessPlanId","basePrice","seatPrice","additionalStoragePricePerGb","premiumAccessOptionPrice","bitwardenProduct","additionalPricePerServiceAccount","baseServiceAccount","maxServiceAccount","hasAdditionalServiceAccountOption","maxProjects","maxAdditionalServiceAccounts","stripeServiceAccountPlanId","SubscriptionResponse","storageName","storageGb","license","usingInAppPurchase","subscription","upcomingInvoice","BillingSubscriptionResponse","BillingSubscriptionUpcomingInvoiceResponse","trialEndDate","periodStartDate","periodEndDate","cancelledDate","cancelAtEndDate","cancelled","BillingSubscriptionItemResponse","quantity","interval","sponsoredSubscriptionItem","addonSubscriptionItem","TaxInfoResponse","taxId","taxIdType","line1","line2","TaxRateResponse","rate","BreachAccountResponse","addedDate","breachDate","dataClasses","isActive","isVerified","logoPath","modifiedDate","pwnCount","GlobalDomainResponse","domains","excluded","DomainsResponse","globalEquivalentDomains","EventResponse","cipherId","collectionId","groupId","policyId","providerUserId","providerOrganizationId","actingUserId","ipAddress","installationId","systemUser","domainName","secretId","serviceAccountId","UserKeyResponse","AttachmentUploadDataResponse","attachmentId","cipherResponse","cipherMiniResponse","SendFileApi","SendTextApi","text","hidden","SendResponse","accessId","maxAccessCount","accessCount","expirationDate","deletionDate","disable","hideEmail","file","FolderResponse","SyncResponse","ApiService","customUserAgent","isWebClient","isDesktopClient","IEBrowser","ChromeBrowser","EdgeBrowser","FirefoxBrowser","OperaBrowser","SafariBrowser","UnknownBrowser","VivaldiBrowser","Accept","identityToken","getClientType","getIdentityUrl","qsStringify","getCredentials","responseJson","isJsonResponse","TwoFactorProviders2","reject","refreshIdentityToken","doAuthRefresh","postAuthRequest","postAdminAuthRequest","getAuthResponse","path","getAuthRequests","getLastAuthRequest","activeRequests","m","getProfile","getUserSubscription","getTaxInfo","putProfile","putTaxInfo","postEmailToken","postEmail","postPassword","setPassword","postSecurityStamp","getAccountRevisionDate","postPasswordHint","postRegister","postPremium","postIapCheck","postReinstatePremium","postCancelPremium","postAccountStorage","postAccountPayment","postAccountLicense","postAccountKey","postAccountVerifyEmail","postAccountVerifyEmailToken","postAccountVerifyPassword","postAccountRecoverDelete","postAccountRecoverDeleteToken","postAccountKdf","deleteSsoUser","getSsoUserIdentifier","postUserApiKey","postUserRotateApiKey","putUpdateTempPassword","getUserBillingHistory","getUserBillingPayment","getCipher","getFullCipherDetails","getCipherAdmin","getCiphersOrganization","postCipher","postCipherCreate","postCipherAdmin","putCipher","putPartialCipher","putCipherAdmin","deleteCipher","deleteCipherAdmin","deleteManyCiphers","deleteManyCiphersAdmin","putMoveCiphers","putShareCipher","putShareCiphers","putCipherCollections","putCipherCollectionsAdmin","postPurgeCiphers","putDeleteCipher","putDeleteCipherAdmin","putDeleteManyCiphers","putDeleteManyCiphersAdmin","putRestoreCipher","putRestoreCipherAdmin","putRestoreManyCiphers","putRestoreManyCiphersAdmin","getAttachmentData","emergencyAccessId","postCipherAttachment","postCipherAttachmentLegacy","postCipherAttachmentAdminLegacy","deleteCipherAttachment","deleteCipherAttachmentAdmin","postShareCipherAttachment","renewAttachmentUploadUrl","postAttachmentFile","getCollectionAccessDetails","getUserCollections","getCollections","getManyCollectionsWithAccessDetails","getCollectionUsers","postCollection","putCollection","putCollectionUsers","deleteCollection","deleteManyCollections","deleteCollectionUser","getGroupUsers","putGroupUsers","deleteGroupUser","getPlans","postPublicImportDirectory","getTaxRates","getSettingsDomains","putSettingsDomains","getSync","getTwoFactorProviders","getTwoFactorOrganizationProviders","getTwoFactorAuthenticator","getTwoFactorEmail","getTwoFactorDuo","getTwoFactorOrganizationDuo","getTwoFactorYubiKey","getTwoFactorWebAuthn","getTwoFactorWebAuthnChallenge","getTwoFactorRecover","putTwoFactorAuthenticator","putTwoFactorEmail","putTwoFactorDuo","putTwoFactorOrganizationDuo","putTwoFactorYubiKey","putTwoFactorWebAuthn","rawId","getClientExtensionResults","AttestationObject","attestationObject","clientDataJson","clientDataJSON","deleteTwoFactorWebAuthn","putTwoFactorDisable","putTwoFactorOrganizationDisable","postTwoFactorRecover","postTwoFactorEmailSetup","postTwoFactorEmail","getDeviceVerificationSettings","putDeviceVerificationSettings","getEmergencyAccessTrusted","getEmergencyAccessGranted","getEmergencyAccess","getEmergencyGrantorPolicies","putEmergencyAccess","deleteEmergencyAccess","postEmergencyAccessInvite","postEmergencyAccessReinvite","postEmergencyAccessAccept","postEmergencyAccessConfirm","postEmergencyAccessInitiate","postEmergencyAccessApprove","postEmergencyAccessReject","postEmergencyAccessTakeover","postEmergencyAccessPassword","postEmergencyAccessView","getCloudCommunicationsEnabled","getOrganizationConnection","createOrganizationConnection","updateOrganizationConnection","organizationConnectionId","deleteOrganizationConnection","postProviderSetup","getProvider","putProvider","getProviderUsers","getProviderUser","postProviderUserInvite","postProviderUserReinvite","postManyProviderUserReinvite","postProviderUserBulkConfirm","deleteManyProviderUsers","postProviderUserAccept","postProviderUserConfirm","postProviderUsersPublicKey","putProviderUser","deleteProviderUser","getProviderClients","postProviderAddOrganization","postProviderCreateOrganization","deleteProviderOrganization","getEvents","end","addEventParameters","getEventsCipher","getEventsOrganization","getEventsOrganizationUser","getEventsProvider","getEventsProviderUser","postEventsCollect","authHeader","getActiveBearerToken","Authorization","getEventsUrl","getUserPublicKey","getHibpBreach","postBitPayInvoice","postSetupPayment","handleError","getKeyConnectorAlive","getOrganizationExport","getApplicationVersionNumber","nativeFetch","preValidateSso","postCreateSponsorship","sponsoredOrgId","isSelfHost","getSponsorshipSyncStatus","deleteRevokeSponsorship","sponsoringOrganizationId","deleteRemoveSponsorship","sponsoringOrgId","postPreValidateSponsorshipToken","sponsorshipToken","postRedeemSponsorship","postResendSponsorshipOffer","doRefreshToken","doApiTokenRefresh","deviceRequest","authed","hasResponse","apiUrl","alterHeaders","getApiUrl","pathParts","requestUrl","normalizePath","requestInit","responseType","responseIsJson","tokenError","isTextResponse","Message","params","hasBaseUrl","typeHeader","AuditService","passwordLeaked","hashBytes","fromBufferToHex","hashStart","hashEnding","breachedAccounts","limit","throttleKey","descriptor","originalMethod","allThrottles","throttles","getThrottles","argsThrottleKey","queue","exec","onFinally","splice","catch","err","DeviceView","DevicesServiceImplementation","getDevices$","defer","deviceResponses","getDeviceByIdentifier$","isDeviceKnownForUser$","updateTrustedDeviceKeys$","EventData","EventCollectionService","cipherService","eventUploadService","collect","eventType","uploadImmediately","orgIds","cipher","getEventCollection","event","setEventCollection","uploadEvents","EventRequest","EventUploadService","checkOnInterval","req","clearEvents","NotificationResponse","contextId","payload","SyncCipherCreate","SyncCipherDelete","SyncCipherUpdate","SyncLoginDelete","SyncCipherNotification","SyncFolderCreate","SyncFolderDelete","SyncFolderUpdate","SyncFolderNotification","SyncVault","SyncCiphers","SyncOrgKeys","SyncSettings","LogOut","UserNotification","SyncSendCreate","SyncSendUpdate","SyncSendDelete","SyncSendNotification","AuthRequest","AuthRequestPushNotification","NotificationsService","syncService","connected","inactive","reconnectTimer","getNotificationsUrl","signalrConnection","off","stop","withUrl","accessTokenFactory","skipNegotiation","transport","WebSockets","withHubProtocol","build","on","processNotification","onclose","reconnect","isAuthedAndUnlocked","updateConnection","sync","reconnectFromActivity","disconnectFromInactivity","isAuthenticated","payloadUserId","UserId","myUserId","syncUpsertCipher","syncDeleteCipher","syncUpsertFolder","syncDeleteFolder","fullSync","syncUpsertSend","syncDeleteSend","getApproveLoginRequests","notificationId","min","SearchService","indexedEntityId","indexing","index","immediateSearchLocales","defaultSearchableMinLength","searchableMinLength","locale$","registeredPipeline","lunr","Pipeline","registerFunction","normalizeAccentsPipelineFunction","clearIndex","isSearchable","query","normalizeSearchQuery","indexCiphers","builder","Builder","pipeline","ref","boost","extractor","uriExtractor","fieldExtractor","attachmentExtractor","searchCiphers","results","every","getIndexForSearch","searchCiphersBasic","ciphersMap","searchResults","soWild","Query","wildcard","LEADING","TRAILING","q","tokenizer","term","deleted","loginUri","searchSends","toLocaleLowerCase","sendsMatched","lowPriorityMatched","concat","joined","Text","protocolIndex","queryIndex","searchableFields","metadata","normalize","B32Chars","SteamChars","TotpService","getCode","period","digits","keyB32","isOtpAuth","isSteamAuth","getQueryParams","digitParams","periodParam","algParam","epoch","timeHex","leftPad","decToHex","timeBytes","fromHexToArray","keyBytes","b32ToBytes","offset","fullCode","trunc","pow","getTimeInterval","b32ToHex","cleanedInput","bits","hex","byteIndex","chunk","signature","VaultTimeoutAction","VaultTimeoutSettingsService","userVerificationService","setVaultTimeoutOptions","action","setVaultTimeout","currentAction","getVaultTimeoutAction","setVaultTimeoutAction","refreshAdditionalKeys","availableVaultTimeoutActions$","getAvailableVaultTimeoutActions","isPinLockSet","pinIsEnabled","getProtectedPin","aUserKeyPinIsSet","getPinKeyEncryptedUserKey","anOldUserKeyPinIsSet","getEncryptedPinProtected","isBiometricLockSet","getBiometricUnlock","getVaultTimeout","policyAppliesToUser","MaximumVaultTimeout","vaultTimeoutAction$","availableActions","Lock","setEverBeenUnlocked","clearPinKeys","PasswordGeneratorPolicyOptions","defaultType","useUppercase","useLowercase","useNumbers","numberCount","useSpecial","specialCount","minNumberWords","capitalize","includeNumber","inEffect","EFFLongWordList","GeneratedPasswordHistory","DefaultOptions","ambiguous","minNumber","uppercase","minUppercase","lowercase","minLowercase","special","minSpecial","numWords","wordSeparator","PasswordGenerationService","generatePassword","generatePassphrase","sanitizePasswordLength","positions","shuffleArray","allCharSet","lowercaseCharSet","uppercaseCharSet","numberCharSet","specialCharSet","positionChars","randomCharIndex","randomNumber","listLength","wordList","wordIndex","appendRandomNumberToRandomWord","getOptions","getPasswordGenerationOptions","setPasswordGenerationOptions","enforcedOptions","enforcePasswordGeneratorPoliciesOnOptions","enforcedPolicyOptions","getPasswordGeneratorPolicyOptions","PasswordGenerator","currentPolicy","useUpper","useLower","minNumbers","saveOptions","getHistory","getDecryptedPasswordGenerationHistory","getEncryptedPasswordGenerationHistory","decryptHistory","setDecryptedPasswordGenerationHistory","addHistory","currentHistory","matchesPrevious","unshift","pop","newHistory","encryptHistory","setEncryptedPasswordGenerationHistory","normalizeOptions","num","array","j","forGeneration","minUppercaseCalc","minLowercaseCalc","minNumberCalc","minSpecialCalc","AnonAddyForwarder","generate","anonaddy","redirect","website","DuckDuckGoForwarder","FastmailForwarder","accountId","getAccountId","using","methodCalls","emailPrefix","fastmail","methodResponses","created","notCreated","primaryAccounts","FirefoxRelayForwarder","generated_for","full_address","ForwarderOptions","FastmailForwarderOptions","AnonAddyForwarderOptions","forwardemail","ForwardEmailForwarderOptions","SimpleLoginForwarder","Authentication","note","alias","ForwardEmailForwarder","labels","wordCapitalize","wordIncludeNumber","subaddressType","catchallType","forwardedService","forwardedAnonAddyDomain","forwardedForwardEmailDomain","UsernameGenerationService","generateUsername","generateCatchall","generateSubaddress","generateForwarded","generateWord","word","zeroPad","subaddressEmail","atIndex","emailBeginning","emailEnding","subaddressString","randomString","catchallDomain","startString","forwarder","forwarderOptions","forwardedSimpleLoginApiKey","forwardedAnonAddyApiToken","forwardedFirefoxApiToken","forwardedFastmailApiToken","forwardedDuckDuckGoToken","forwardedForwardEmailApiToken","getUsernameGenerationOptions","setUsernameGenerationOptions","charSet","width","SendType","PasswordStrengthService","emailInput","userInputs","globalUserInputs","emailToUserInputs","finalUserInputs","atPosition","SendFileData","SendTextData","SendData","File","SendRequest","fileLength","SendAccessResponse","creatorIdentifier","SendFileDownloadDataResponse","SendFileUploadDataResponse","sendResponse","SendApiService","fileUploadService","sendService","getSend","postSendAccess","getSendFileDownloadData","getSends","postSend","postFileTypeSend","renewSendFileUploadUrl","sendId","fileId","postSendFile","postSendFileLegacy","putSend","putSendRemovePassword","deleteSend","sendData","removePassword","uploadDataResponse","generateMethods","legacyServerSendFileUpload","generatePostDirectCallback","generateRenewFileUploadUrlCallback","generateRollbackCallback","renewResponse","sequentialize","cacheKey","caches","getCache","argsCacheKey","SortedCiphersCache","comparator","sortedCiphersByUrl","timeouts","isCached","addCiphers","Ciphers","resetTimer","getLastUsed","getLastLaunched","getNext","updateLastUsedIndex","lastUsedIndex","lastLaunched","y","getNextIndex","CipherBulkDeleteRequest","ids","CipherBulkMoveRequest","CipherBulkRestoreRequest","AttachmentRequest","CipherRequest","lastKnownRevisionDate","attachments2","attachmentRequest","CipherWithIdRequest","CipherBulkShareRequest","CipherCollectionsRequest","CipherCreateRequest","CipherPartialRequest","CipherShareRequest","CipherService","settingsService","searchService","cipherFileUploadService","sortedCiphersCache","sortCiphersByLastUsed","getDecryptedCipherCache","getDecryptedCiphers","setDecryptedCipherCache","setDecryptedCiphers","clearCache","clearDecryptedCiphersState","originalCipher","existingCipher","existingHiddenFields","Hidden","hiddenFields","ef","matchedField","encryptObjProperty","encryptCipherData","encryptFields","encryptPasswordHistories","encryptAttachments","attachmentsModel","encAttachments","fieldsModel","encFields","encField","encryptField","fieldModel","Boolean","phModels","encPhs","encPh","encryptPasswordHistory","phModel","getEncryptedCiphers","getLocalData","getAllDecrypted","reindexCiphers","orgKeys","getOrgKeys","grouped","agg","decCiphers","groupedCiphers","flat","getLocaleSortingFunction","getAllDecryptedForGrouping","groupingId","folder","getAllDecryptedForUrl","includeOtherTypes","defaultMatch","getEquivalentDomains","getDefaultUriMatch","getAllFromApiForOrganization","cr","getLastUsedForUrl","getCipherForUrl","getLastLaunchedForUrl","getNextCipherForUrl","updateLastUsedIndexForUrl","updateLastUsedDate","ciphersLocalData","setLocalData","decryptedCipherCache","cached","updateLastLaunchedDate","saveNeverDomain","getNeverDomains","setNeverDomains","createWithServer","orgAdmin","updateWithServer","isNotClone","shareWithServer","attachmentPromises","shareAttachmentWithServer","encCipher","shareManyWithServer","encCiphers","saveAttachmentWithServer","unencryptedFile","admin","reader","FileReader","readAsArrayBuffer","onload","evt","cData","saveAttachmentRawWithServer","onerror","filename","dataEncKey","makeDataEncKey","encFileName","encData","saveCollectionsWithServer","setEncryptedCiphers","clearEncryptedCiphersState","moveManyWithServer","deleteWithServer","asAdmin","deleteManyWithServer","deleteAttachment","deleteAttachmentWithServer","aLastUsed","bLastUsed","bothNotNull","sortCiphersByLastUsedThenName","aName","bName","softDelete","setDeletedDate","softDeleteWithServer","softDeleteManyWithServer","restore","clearDeletedDate","restoreWithServer","restoreManyWithServer","restores","attachmentView","attachmentResponse","encBuf","decBuf","decryptFromBytes","theObj","modelProp","lastUsed","autofillOnPageLoadDefault","getAutoFillOnPageLoadDefault","clearSortedCiphers","TreeNode","node","parent","children","ServiceUtils","nodeTree","partIndex","delimiter","partName","nestedTraverse","newPartName","getTreeNodeObject","getTreeNodeObjectFromList","CollectionData","CollectionView","Collection","CollectionService","setDecryptedCollections","collection","decryptMany","decCollections","getSortFunction","getEncryptedCollections","decryptedCollections","getDecryptedCollections","getAllNested","nodes","collectionCopy","getNested","setEncryptedCollections","CipherFileUploadService","adminRequest","legacyServerAttachmentFileUpload","isAdmin","FolderData","FolderRequest","FolderApiService","folderService","postFolder","putFolder","deleteFolder","SyncNotifierService","_sync","sync$","OrganizationData","isMember","ProviderData","SyncService","collectionService","providerService","folderApiService","sendApiService","syncInProgress","getLastSync","setLastSync","forceSync","allowThrowOnError","syncStarted","syncCompleted","needsSync","needsSyncing","syncProfile","syncFolders","syncCollections","syncCiphers","syncSends","syncSettings","syncPolicies","isEdit","localFolder","remoteFolder","shouldUpdate","localCipher","checkCollections","remoteCipher","localSend","remoteSend","successfully","getSecurityStamp","setProviderKeys","setOrgKeys","setSecurityStamp","setEmailVerified","setHasPremiumPersonally","setHasPremiumFromOrganization","syncProfileOrganizations","eqDomains","setEquivalentDomains","CardExport","FieldExport","IdentityExport","LoginUriExport","LoginExport","toView","toDomain","SecureNoteExport","Generic","CipherExport","values","CipherWithIdExport","CollectionExport","CollectionWithIdExport","FolderView","Folder","FolderExport","FolderWithIdExport","ExportHelper","extension","getFullYear","padNumber","getMonth","getHours","getMinutes","getSeconds","padCharacter","numString","VaultExportService","getExport","format","getEncryptedExport","getDecryptedExport","getPasswordProtectedExport","clearText","makePinKey","encKeyValidation","encText","jsonDoc","passwordProtected","encKeyValidation_DO_NOT_EDIT","getOrganizationEncryptedExport","getOrganizationDecryptedExport","getFileName","decFolders","getAllDecryptedFromState","foldersMap","exportCiphers","buildCommonCipher","getAllFromState","exportData","exportPromises","decCol","decCipher","collectionsMap","orgKey","login_uri","login_username","login_password","login_totp","Organization","isOwner","isManager","Manager","canAccessImportExport","canAccessReports","canCreateNewCollections","canEditAnyCollection","canUseAdminCollections","canDeleteAnyCollection","canViewAllCollections","canEditAssignedCollections","canDeleteAssignedCollections","canViewAssignedCollections","canManageGroups","canManageSso","canManageDomainVerification","canManageScim","canManagePolicies","canManageUsersPassword","canManageDeviceApprovals","isExemptFromPolicies","canViewSubscription","canEditSubscription","hasProvider","Msp","canEditPaymentMethods","canViewBillingHistory","canAccessSecretsManager","isFreeOrg","org","OrganizationService","_organizations","organizations$","memberOrganizations$","orgs","activeAccountUnlocked$","unlocked","getOrganizations","updateObservables","get$","organizationsMap","canManageSponsorships","hasOrganizations","getFromState","getByIdentifier","setOrganizations","SafariApp","command","resolveNow","BrowserApi","isSafariApi","messageId","MAX_SAFE_INTEGER","browser","runtime","sendNativeMessage","responseData","BrowserPlatformUtilsService","clipboardWriteCallback","biometricCallback","deviceCache","isFirefox","FirefoxExtension","isOpera","OperaExtension","isEdge","EdgeExtension","isVivaldi","VivaldiExtension","isChrome","ChromeExtension","isSafari","SafariExtension","Browser","chrome","opr","addons","safariVersion","isIE","isMacAppStore","isViewOpen","isPopupOpen","getViews","lockTimeout","createNewTab","extensionPage","getApplicationVersion","PublicKeyCredential","doc","document","clearMs","sendMessageToApp","clipboard","writeText","queryCommandSupported","textarea","createElement","textContent","style","position","appendChild","select","execCommand","removeChild","readText","focus","supportsBiometric","getPlatformInfo","os","getBrowserInfo","authenticateBiometric","supportsSecureStorage","getAutofillKeyboardShortcut","autofillCommand","commands","shortcut","manifestVersion","getManifest","manifest_version","tabsQueryFirst","active","windowId","windows","WINDOW_ID_CURRENT","tabId","tabs","currentWindow","tabsQuery","tab","tabSendMessage","sendMessage","lastError","responseCallback","incognito","onCreated","addListener","getBackgroundPage","focused","relativeUrl","fullUrl","getURL","parsedUrl","createdTab","focusWindow","windowType","tabToClose","onMessage","isBackgroundPage","registeredMessageListeners","onpagehide","removeListener","subscriber","arg","highlighted","isWebExtensionsApi","isFirefoxOnAndroid","finally","close","i18n","getUILanguage","location","reload","exemptCurrentHref","currentHref","href","w","application","connectNative","isChromeApi","permission","browserAction","sidebarAction","SyncedItemMetadata","itemBuilder","initializer","initializeAs","keyValuePair","SessionSyncer","subject","memoryStorageService","metaData","ignoreNUpdates","ReplaySubject","_buffer","observe","sessionKey","updateFromMemory","listenForUpdates","stream","skip","updateSession","messageListener","updateMessageCommand","updateFromMessage","serializedValue","unBuiltValue","browserSession","findStorageService","__syncedItemMetadata","__sessionSyncers","buildSyncer","storageSerice","syncer","isMemoryStorageService","sessionSync","buildOptions","BrowserOrganizationService","Policy","ResetPasswordPolicyOptions","autoEnrollEnabled","PolicyService","_policies","policies$","getEncryptedPolicies","policyType","policyFilter","checkPoliciesThatApplyToUser","decryptedPolicies","getDecryptedPolicies","diskPolicies","setDecryptedPolicies","obsPolicies","filteredPolicies","MasterPassword","policyAppliesToActiveUser$","newPassword","toLocaleUpperCase","getResetPasswordPolicyOptions","resetPasswordPolicyOptions","ResetPassword","policiesResponse","setEncryptedPolicies","policiesMap","policySet","Accepted","StateService","BrowserPolicyService","handleActivateAutofillPolicy","bind","ActivateAutofill","_","getActivateAutoFillOnPageLoadFromPolicy","getEnableAutoFillOnPageLoad","tap","activated","autofillEnabled","setActivateAutoFillOnPageLoadFromPolicy","NotificationQueueMessageType","ContextMenusBackground","contextMenuClickedHandler","contextMenus","onClicked","run","sender","cipherAction","commandToRetry","NotificationQueueMessage","AddLoginQueueMessage","uriView","loginView","cipherView","NotificationBackground","autofillService","notificationQueue","processMessage","cleanupNotificationQueue","getDataForTab","responseCommand","tabSendMessageData","addLogin","changedPassword","removeTabFromNotificationQueue","retryMessage","saveOrUpdateCredentials","saveNever","forms","getFormsWithPasswordFields","checkNotificationQueue","doNotificationQueueCheck","currentTab","getTabFromCurrentWindow","expires","tabDomain","AddLogin","typeData","isVaultLocked","wasVaultLocked","getCurrentTheme","removeIndividualVault","webVaultURL","getWebVaultUrl","ChangePassword","getTheme","matchMedia","matches","Dark","Light","loginInfo","authStatus","loginDomain","normalizedUsername","disabledAddLogin","getDisableAddLoginNotification","pushAddLoginToQueue","usernameMatches","getDisableChangedPasswordNotification","pushChangePasswordToQueue","changeData","currentPassword","passwordMatches","queueMessage","getDecryptedCipherById","updatePassword","folderExists","newCipher","toCipherView","editItem","senderTab","setAddEditCipherInfo","folderViews$","PersonalOwnership","TabsBackground","main","notificationBackground","onFocusChanged","focusedWindowId","onActivated","activeInfo","refreshBadge","refreshMenu","onReplaced","addedTabId","removedTabId","onReplacedRan","onUpdated","changeInfo","onUpdatedRan","factory","cachedServices","opts","instance","alwaysInitializeNewService","instanceOrPromise","doNotStoreInitializedService","SendFileView","SendTextView","maskedText","SendView","urlB64Key","maxAccessCountReached","expired","pendingDelete","cryptoKey","accountDeserializer","buildAccountMapFromJSON","jsonAccounts","DDG_SHARED_KEY","stateMigrationService","useAccountCache","accountsSubject","activeAccountSubject","activeAccount$","activeAccountUnlockedSubject","hasBeenInited","isRecoveredSession","accountDiskCache","setState","createGlobals","initAccountState","updateState","syncAccountFromDisk","storedActiveUser","activeUserId","pushAccounts","diskAccount","getAccountFromDisk","setAccountEnvironment","scaffoldNewAccountStorage","setLastActive","setActiveUser","clearDecryptedDataForActiveUser","clean","reconcileOptions","defaultInMemoryOptions","deAuthenticateAccount","dynamicallySetActiveUser","removeAccountFromDisk","removeAccountFromMemory","getTimeoutBasedStorageOptions","getAccount","saveAccount","getAddEditCipherInfo","getAlwaysShowDock","defaultOnDiskOptions","setAlwaysShowDock","saveGlobals","getAutoConfirmFingerPrints","setAutoConfirmFingerprints","setAutoFillOnPageLoadDefault","getBiometricAwaitingAcceptance","setBiometricAwaitingAcceptance","setBiometricFingerprintValidated","getBiometricText","setBiometricText","setBiometricUnlock","getCanAccessPremium","getHasPremiumPersonally","getHasPremiumFromOrganization","hasPremiumFromOrganization","defaultOnDiskLocalOptions","setClearClipboard","getCollapsedGroupings","setCollapsedGroupings","getCryptoMasterKey","setCryptoMasterKey","nextValue","getMasterKeyEncryptedUserKey","getUserKeyAutoUnlock","defaultSecureStorageOptions","setUserKeyAutoUnlock","saveSecureStorageKey","getUserKeyBiometric","hasUserKeyBiometric","setUserKeyBiometric","pinKeyEncryptedUserKey","setPinKeyEncryptedUserKey","pinKeyEncryptedUserKeyEphemeral","setPinKeyEncryptedUserKeyEphemeral","getCryptoMasterKeyAuto","setCryptoMasterKeyAuto","getCryptoMasterKeyB64","setCryptoMasterKeyB64","getCryptoMasterKeyBiometric","hasCryptoMasterKeyBiometric","setCryptoMasterKeyBiometric","getDecryptedCryptoSymmetricKey","setDecryptedCryptoSymmetricKey","getDecryptedOrganizationKeys","recordToMap","setDecryptedOrganizationKeys","mapToRecord","getDecryptedPinProtected","setDecryptedPinProtected","getDecryptedPrivateKey","setDecryptedPrivateKey","getDecryptedProviderKeys","setDecryptedProviderKeys","getDecryptedSends","setDecryptedSends","setDefaultUriMatch","setDisableAddLoginNotification","getDisableAutoBiometricsPrompt","setDisableAutoBiometricsPrompt","getDisableAutoTotpCopy","setDisableAutoTotpCopy","getDisableBadgeCounter","setDisableBadgeCounter","setDisableChangedPasswordNotification","getDisableContextMenuItem","setDisableContextMenuItem","getDisableFavicon","setDisableFavicon","getDisableGa","setDisableGa","getDismissedAutofillCallout","dismissedAutoFillOnPageLoadCallout","setDismissedAutofillCallout","getDontShowCardsCurrentTab","setDontShowCardsCurrentTab","getDontShowIdentitiesCurrentTab","setDontShowIdentitiesCurrentTab","getDuckDuckGoSharedKey","setDuckDuckGoSharedKey","existingDeviceKey","trustDeviceChoiceForDecryption","setAccountDecryptionOptions","setEmail","getEnableAlwaysOnTop","accountPreference","globalPreference","setEnableAlwaysOnTop","setEnableAutoFillOnPageLoad","getEnableBrowserIntegration","setEnableBrowserIntegration","getEnableBrowserIntegrationFingerprint","setEnableBrowserIntegrationFingerprint","getEnableCloseToTray","setEnableCloseToTray","getEnableDuckDuckGoBrowserIntegration","enableDuckDuckGoBrowserIntegration","setEnableDuckDuckGoBrowserIntegration","getEnableFullWidth","setEnableFullWidth","getEnableMinimizeToTray","setEnableMinimizeToTray","getEnableStartToTray","setEnableStartToTray","getEnableTray","setEnableTray","defaultOnDiskMemoryOptions","getEncryptedCryptoSymmetricKey","setEncryptedCryptoSymmetricKey","getEncryptedFolders","setEncryptedFolders","getEncryptedOrganizationKeys","setEncryptedOrganizationKeys","setEncryptedPinProtected","getEncryptedPrivateKey","setEncryptedPrivateKey","getEncryptedProviderKeys","setEncryptedProviderKeys","getEncryptedSends","setEncryptedSends","getEntityId","setEntityId","getEntityType","setEntityType","getEnvironmentUrls","getGlobalEnvironmentUrls","setEnvironmentUrls","getRegion","region","setRegion","getEverHadUserKey","everHadUserKey","setEverHadUserKey","getForcePasswordResetReason","getInstalledVersion","setInstalledVersion","setKdfConfig","setKdfType","setKeyHash","getLastActive","getLocale","setLocale","getMainWindowSize","setMainWindowSize","getMinimizeOnCopyToClipboard","setMinimizeOnCopyToClipboard","getNoAutoPromptBiometricsText","setNoAutoPromptBiometricsText","getOpenAtLogin","setOpenAtLogin","getOrganizationInvitation","organizationInvitation","setOrganizationInvitation","getEmergencyAccessInvitation","emergencyAccessInvitation","setEmergencyAccessInvitation","usernameGenerationOptions","getGeneratorOptions","generatorOptions","setGeneratorOptions","setProtectedPin","getPublicKey","setPublicKey","getRememberedEmail","setRememberedEmail","getSettings","setSettings","getSsoCodeVerifier","setSsoCodeVerifier","getSsoOrgIdentifier","setSsoOrganizationIdentifier","getSsoState","setSsoState","getUserSsoOrganizationIdentifier","setUserSsoOrganizationIdentifier","setTheme","accountVaultTimeoutAction","globalVaultTimeoutAction","approveLoginRequests","setApproveLoginRequests","getStateVersion","setStateVersion","getWindow","setWindow","activateAutoFillOnPageLoadFromPolicy","getSMOnboardingTasks","smOnboardingTasks","setSMOnboardingTasks","useMemory","storageLocation","getGlobalsFromMemory","useDisk","getGlobalsFromDisk","saveGlobalsToMemory","saveGlobalsToDisk","useSecureStorage","getAccountFromMemory","getUserIdFromMemory","cachedAccount","setDiskCache","Memory","Both","Disk","saveAccountToMemory","saveAccountToDisk","deleteDiskCache","deepClone","scaffoldNewAccountLocalStorage","scaffoldNewAccountSessionStorage","scaffoldNewAccountMemoryStorage","storedAccount","pruneInMemoryAccounts","requestedOptions","defaultOptions","Session","getActiveUserIdFromStorage","removeAccountFromLocalStorage","resetAccount","removeAccountFromSessionStorage","removeAccountFromSecureStorage","persistentAccountInformation","getGlobalRegion","timeoutAction","deserializer","stateUpdater","updatedState","withPrototypeForArrayMembers","memberConstructor","memberConverter","originalResult","isPromise","getOwnPropertyDescriptors","withPrototypeForObjectValues","valuesConstructor","valuesConverter","BrowserComponentState","BrowserGroupingsComponentState","collectionCounts","folderCounts","typeCounts","favoriteCiphers","noFolderCiphers","BrowserSendComponentState","AccountSettings","Account","groupings","sendType","BrowserStateService","storage","onChanged","changes","namespace","getBrowserGroupingComponentState","setBrowserGroupingComponentState","getBrowserVaultItemsComponentState","setBrowserVaultItemsComponentState","getBrowserSendComponentState","setBrowserSendComponentState","getBrowserSendTypeComponentState","setBrowserSendTypeComponentState","logServiceFactory","logServiceOptions","AbstractChromeStorageService","chromeStorageApi","keyedObj","BrowserLocalStorageService","local","getFlags","envFlags","flag","flags","BrowserMemoryStorageService","session","LocalBackedSessionStorageService","keyGenerationService","localStorage","sessionStorage","getLocalSession","getSessionEncKey","sessionEncKey","localSession","setLocalSession","sessionJson","setSessionEncKey","setEncryptedLocalSession","setDecryptedLocalSession","jsonSession","encSession","storedKey","makeEphemeralKey","input","cryptoFunctionServiceFactory","cryptoFunctionServiceOptions","encryptServiceFactory","encryptServiceOptions","KeyGenerationService","numBytes","keyMaterial","diskStorageServiceFactory","secureStorageServiceFactory","memoryStorageServiceFactory","keyGenerationServiceFactory","stateServiceFactory","service","stateMigrationServiceOptions","stateMigrationServiceFactory","stateServiceOptions","organizationServiceFactory","policyServiceFactory","tokenServiceFactory","Region","RegionDomain","appIdServiceFactory","urlsSubject","initialized","scimUrl","usUrls","scim","euUrls","setUrlsFromStorage","notificationsUrl","webVaultUrl","getCloudWebVaultUrl","cloudWebVaultUrl","EU","US","getSendUrl","getIconsUrl","iconsUrl","identityUrl","eventsUrl","getScimUrl","savedUrls","envUrls","SelfHosted","setUrls","formatUrl","getUrls","cloudWebVault","isEmpty","selectedRegion","setUrlsInternal","isCloud","BrowserEnvironmentService","hasManagedEnvironment","getManagedEnvironment","settingsHaveChanged","env","managed","setUrlsToManagedEnvironment","environmentServiceFactory","BrowserMessagingService","messagingServiceFactory","platformUtilsServiceFactory","platformUtilsServiceOptions","apiServiceFactory","apiServiceOptions","BaseEncryptedOrganizationKey","EncryptedOrganizationKey","ProviderEncryptedOrganizationKey","toData","providerKey","getProviderKey","CryptoService","platformUtilService","storeAdditionalKeys","getKeyFromStorage","validateUserKey","clearAllStoredUserKeys","buildProtectedSymmetricKey","clearUserKey","clearStoredKeys","clearStoredUserKey","clearDeprecatedKeys","Pin","userKeyMasterKey","getOrDeriveMasterKey","makeKey","clearMasterKey","encryptUserKeyWithMasterKey","decUserKey","newKey","stretchKey","hashPurpose","clearMasterKeyHash","storedPasswordHash","localKeyHash","serverKeyHash","ServerAuthorization","providerOrgs","encOrgKeyData","decryptedOrganizationKeys","setKey","encOrgKey","fromData","decOrgKey","newSymKey","clearOrgKeys","memoryOnly","getProviderKeys","decryptedProviderKeys","clearProviderKeys","inMemoryPublicKey","getPrivateKey","makeOrgKey","shareKey","encPrivateKey","decryptedPrivateKey","getFingerprint","fingerprintMaterial","keyFingerprint","userFingerprint","hashPhrase","clearKeyPair","keysToClear","pin","pinKey","decryptUserKeyWithPin","pinProtectedUserKey","decryptMasterKeyWithPin","pinProtectedMasterKey","pinProtectedMasterKeyString","makeSendKey","sendKey","clearKeys","privateKeyValue","rval","range","bitsNeeded","log2","bytesNeeded","mask","byteArray","initAccount","shouldStoreKey","storePinKey","encPin","minimumEntropy","entropyPerWord","hashArr","phrase","hashNumber","remainder","mod","divide","encryptionKey","protectedSymKey","stretchedEncryptionKey","saltHash","migrateAutoKeyIfNeeded","oldAutoKey","decryptAndMigrateOldPinKey","masterPasswordOnRestart","oldPinKey","pinProtectedKey","encBuffer","BrowserCryptoService","Biometric","cryptoServiceFactory","TranslationService","systemLanguage","localesDirectory","getLocalesJson","supportedTranslationLocales","defaultLocale","localeNames","defaultMessages","localeMessages","translationLocale","Intl","Collator","numeric","sensitivity","loadMessages","p1","p2","p3","translate","messagesObj","formattedLocale","locales","placeholders","placeProp","content","replaceToken","replaceContent","_locale","_translationLocale","I18nService","getMessage","i18nServiceFactory","i18nServiceOptions","deviceTrustCryptoServiceFactory","devicesApiServiceFactory","authServiceFactory","keyConnectorServiceOptions","keyConnectorServiceFactory","twoFactorServiceFactory","passwordStrengthServiceFactory","authRequestCryptoServiceFactory","userVerificationServiceFactory","userVerificationApiServiceFactory","cipherFileUploadServiceFactory","fileUploadServiceFactory","SettingsService","_settings","_disableFavicon","settings$","disableFavicon$","ed","BrowserSettingsService","settingsServiceFactory","cipherServiceFactory","searchServiceFactory","ROOT_ID","AUTOFILL_ID","COPY_USERNAME_ID","COPY_PASSWORD_ID","COPY_VERIFICATIONCODE_ID","COPY_IDENTIFIER_ID","GENERATE_PASSWORD_ID","NOOP_COMMAND_SUFFIX","MainContextMenuHandler","initRunning","_options","serviceOptions","removeAll","contexts","parentId","menuItemId","loadOptions","sanitizedTitle","sanitizeContextMenuTitle","createChildItem","isNullOrEmpty","noAccess","noLogins","NOT_IMPLEMENTED","_args","LISTENED_TO_COMMANDS","CipherContextMenuHandler","mainContextMenuHandler","mv3Create","serviceCache","cipherContextMenuHandler","getTab","shouldListen","activeTabs","getActiveTabs","updateForCipher","totpServiceFactory","eventCollectionServiceFactory","eventUploadServiceFactory","passwordGenerationServiceFactory","AutofillScript","documentUUID","script","properties","autosubmit","AutoFillConstants","UsernameFieldNames","TotpFieldNames","PasswordFieldIgnoreList","ExcludedAutofillTypes","CreditCardAutoFillConstants","CardAttributes","CardAttributesExtended","CardHolderFieldNames","CardHolderFieldNameValues","CardNumberFieldNames","CardNumberFieldNameValues","CardExpiryFieldNames","CardExpiryFieldNameValues","ExpiryMonthFieldNames","ExpiryYearFieldNames","CVVFieldNames","CardBrandFieldNames","MonthAbbr","YearAbbrShort","YearAbbrLong","IdentityAutoFillConstants","IdentityAttributes","FullNameFieldNames","FullNameFieldNameValues","TitleFieldNames","FirstnameFieldNames","MiddlenameFieldNames","LastnameFieldNames","EmailFieldNames","AddressFieldNames","AddressFieldNameValues","Address1FieldNames","Address2FieldNames","Address3FieldNames","PostalCodeFieldNames","CityFieldNames","StateFieldNames","CountryFieldNames","PhoneFieldNames","UserNameFieldNames","CompanyFieldNames","IsoCountries","afghanistan","albania","algeria","andorra","angola","anguilla","antarctica","argentina","armenia","aruba","australia","austria","azerbaijan","bahamas","bahrain","bangladesh","barbados","belarus","belgium","belize","benin","bermuda","bhutan","bolivia","botswana","brazil","bulgaria","burundi","cambodia","cameroon","canada","chad","chile","china","colombia","comoros","congo","croatia","cuba","cyprus","denmark","djibouti","dominica","ecuador","egypt","eritrea","estonia","ethiopia","fiji","finland","france","gabon","gambia","georgia","germany","ghana","gibraltar","greece","greenland","grenada","guadeloupe","guam","guatemala","guernsey","guinea","guyana","haiti","honduras","hungary","iceland","india","indonesia","iraq","ireland","israel","italy","jamaica","japan","jersey","jordan","kazakhstan","kenya","kiribati","kuwait","kyrgyzstan","latvia","lebanon","lesotho","liberia","liechtenstein","lithuania","luxembourg","macao","macedonia","madagascar","malawi","malaysia","maldives","mali","malta","martinique","mauritania","mauritius","mayotte","mexico","moldova","monaco","mongolia","montenegro","montserrat","morocco","mozambique","myanmar","namibia","nauru","nepal","netherlands","nicaragua","niger","nigeria","niue","norway","oman","pakistan","palau","panama","paraguay","peru","philippines","pitcairn","poland","portugal","qatar","reunion","romania","rwanda","samoa","senegal","serbia","seychelles","singapore","slovakia","slovenia","somalia","spain","sudan","suriname","swaziland","sweden","switzerland","taiwan","tajikistan","tanzania","thailand","togo","tokelau","tonga","tunisia","turkey","turkmenistan","tuvalu","uganda","ukraine","uruguay","uzbekistan","vanuatu","venezuela","vietnam","yemen","zambia","zimbabwe","IsoStates","alabama","alaska","arizona","arkansas","california","colorado","connecticut","delaware","florida","hawaii","idaho","illinois","indiana","iowa","kansas","kentucky","louisiana","maine","maryland","massachusetts","michigan","minnesota","mississippi","missouri","montana","nebraska","nevada","ohio","oklahoma","oregon","pennsylvania","tennessee","texas","utah","vermont","virginia","washington","wisconsin","wyoming","IsoProvinces","alberta","manitoba","ontario","quebec","saskatchewan","AutofillService","totpService","eventCollectionService","pageDetails","formData","passwordFields","loadPasswordFields","passwordFieldsWithoutForm","pf","form","formKeys","formCount","soloFormKey","formKey","formPasswordFields","uf","findUsernameField","passwords","doAutoFill","totpPromise","canAccessPremium","didAutofill","pd","fillScript","generateFillScript","skipUsernameOnlyFill","onlyEmptyFields","onlyVisibleFields","fillNewPassword","allowTotpAutofill","tabUrl","untrustedIframe","allowUntrustedIframe","delay_between_operations","skipLastUsed","frameId","Cipher_ClientAutofilled","doAutoFillOnTab","fromCommand","lastLaunchedCipher","totpCode","doAutoFillActiveTab","getActiveTab","filledFields","fieldNames","hasValue","opid","viewable","tagName","matchingIndex","findMatchingFieldIndex","matchingField","Linked","fillByOpid","generateLoginFillScript","generateCardFillScript","generateIdentityFillScript","usernames","totps","inUntrustedIframe","passField","findTotpField","elementNumber","fieldIsFuzzyMatch","autoCompleteType","totpValue","setFillScriptForFocus","fillFields","forCustomFieldsOnly","isExcludedType","attr","isFieldMatch","makeScriptAction","selectInfo","siOptions","option","fieldAttrsContain","maxLength","colonIndex","fullMonth","fullYear","partYear","makeScriptActionWithValue","pageUrl","containsVal","doesContain","filledState","stateLower","isoState","filledCountry","countryLower","isoCountry","excludedTypes","containsOptions","checkValueContains","cipherData","dataProp","fieldProp","dataValue","doFill","canBeHidden","canBeReadOnly","mustBeEmpty","isPassword","valueIsLikePassword","cleanedValue","readonly","htmlID","htmlName","placeholder","passwordField","withoutForm","usernameField","totpField","names","fieldPropertyIsPrefixMatch","fieldPropertyIsMatch","property","separator","sepIndex","fieldVal","regexParts","csvParts","csvVals","fuzzyMatch","lastField","lastPasswordField","autofillServiceFactory","clearClipboardAlarmName","ClearClipboard","sendTabsMessage","alarmKeys","alarmState","setAlarmTimeInternal","commandName","GeneratePasswordToClipboardCommand","passwordGenerationService","generatePasswordToClipboard","delay_ms","clearAlarmTime","setAlarmTime","AutofillTabCommand","doAutofillTabCommand","collectPageDetails","doAutofillTabWithCipherCommand","ContextMenuClickedHandler","autofillAction","generatePasswordToClipboardCommand","getIdentifier","parentMenuItemId","Cipher_ClientCopiedPassword","UpdateBadge","existingServices","listenedToCommands","badgeAction","getBrowserAction","getSidebarAction","initServices","setBadgeBackgroundColor","setLoggedOut","setLocked","setUnlocked","setBadgeIcon","clearBadgeText","setBadgeText","countText","isOperaSidebar","setActionText","setSideBarText","iconSuffix","setActionIcon","setSidebarActionIcon","setTitle","setIcon","useSyncApiCalls","lastFocusedWindow","existingServiceCache","BrowserI18nService","BrowserMessagingPrivateModeBackgroundService","bitwardenPopupMainMessageListener","SendFile","SendText","Send","SendService","_sends","_sendViews","sends$","sendViews$","fileData","passwordHash","encryptFileData","parseFile","decSends","sendsMap","decryptSends","decryptSendPromises","decryptedSends","BrowserSendService","vaultTimeoutSettingsService","lockedCallback","loggedOutCallback","migrateKeyForNeverLockIfNeeded","startCheck","checkVaultTimeout","shouldLock","executeTimeoutAction","lock","vaultTimeoutSeconds","VaultTimeoutService","checkSafari","FolderService","_folders","_folderViews","folders$","decryptFolders","updates","cId","decryptFolderPromises","decryptedFolders","noneFolder","BrowserFolderService","VaultFilter","selectedCollection","selectedFolder","myVaultOnly","refreshCollectionsAndFolders","resetFilter","cipherType","selectedCollectionId","selectedFolderId","resetOrganization","selectedOrganizationId","buildFilter","cipherPassesFilter","DynamicTreeNode","hasId","fullList","storeCollapsedFilterNodes","collapsedFilterNodes","buildCollapsedFilterNodes","buildOrganizations","buildNestedFolders","transformation","storedFolders","orgCiphers","oc","nestedFolders","getAllFoldersNested","nestedList","mergeMap","buildCollections","storedCollections","nestedCollections","checkForSingleOrganizationPolicy","SingleOrg","checkForPersonalOwnershipPolicy","folderCopy","getFolderNested","VaultFilterService","vaultFilter","allVaults","myVault","getVaultFilter","setVaultFilter","filterCipherForSelectedVault","CommandsBackground","vaultTimeoutService","processCommand","onCommand","autoFillLogin","openPopup","getTabFromCurrentWindowId","collectPageDetailsForContentScript","IdleBackground","notificationsService","idleTimer","idleState","idle","idleHandler","newState","onStateChanged","setDetectionInterval","pollIdle","handler","queryState","NativeMessagingBackground","runtimeBackground","resolver","secureSetupResolve","onAdded","reloadExtension","connect","port","connecting","connectedCallback","disconnect","sharedSecret","validatingFingerprint","acceptButtonText","cancelButtonText","showFingerprintDialog","showWrongUserDialog","onDisconnect","timestamp","encryptMessage","secureCommunication","getResponse","rawMessage","abs","userKeyB64","sendUnencrypted","fingerprint","RuntimeBackground","systemService","configService","pageDetailsToAutoFill","onInstalledReason","lockedVaultPendingNotifications","onInstalled","reason","checkOnInstalled","backgroundMessageListener","popupOnlyContext","bitwardenBackgroundMessageListener","closeBitwardenExtensionTab","focusTab","logout","avatarUpdateService","openBitwardenExtensionTab","addEditCipherUrl","delay","reseedStorage","autofillTimeout","autofillPage","vaultUrl","referrer","tabToAutoFill","loginToAutoFill","WebRequestBackground","pendingAuthRequests","webRequest","onAuthRequired","requestId","resolveAuthCredentials","onCompleted","completeAuthRequest","onErrorOccurred","authCredentials","MainBackground","isPrivateMode","backgroundWindow","nativeMessagingBackground","syncNotifierService","policyApiService","vaultFilterService","that","backgroundMessagingService","devicesService","authRequestCryptoService","containerService","auditService","exportService","forceWindowReload","commandsBackground","tabsBackground","_tab","contextMenusBackground","idleBackground","webRequestBackground","usernameGenerationService","bootstrap","getPrivateModeWindows","onWindowCreated","forLocked","needStorageReseed","needsStorageReseed","override","syncInternal","lastSyncAgo","scheduleNextSync","syncTimeout","onAlarmListener","alarm","executionTime","alarmTime","getAlarmTime","combine","listeners","startingServices","listener","onCommandListener","doAutoFillLogin","doGeneratePasswordToClipboard","tabsOnActivatedListener","tabsOnReplacedListener","tabsOnUpdatedListener","contextMenusClickedListener","onClickedListener","runtimeMessageListener","OnInstalledReason","INSTALL","alarms","onAlarm","numberOfAlarms","calculatedWhen","periodInMinutes","when","alarmsToBeCreated","bitwardenMain","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","loaded","__webpack_modules__","O","chunkIds","fn","notFulfilled","Infinity","fulfilled","getPrototypeOf","mode","__esModule","ns","def","current","getOwnPropertyNames","definition","defineProperty","enumerable","chunkId","globalThis","Function","Symbol","toStringTag","nmd","paths","scriptUrl","importScripts","currentScript","src","scripts","getElementsByTagName","baseURI","installedChunks","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}